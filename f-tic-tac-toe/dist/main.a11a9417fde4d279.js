"use strict";var ZL=Object.defineProperty,XL=(ue,It,Sn)=>It in ue?ZL(ue,It,{enumerable:!0,configurable:!0,writable:!0,value:Sn}):ue[It]=Sn,g=(ue,It,Sn)=>(XL(ue,"symbol"!=typeof It?It+"":It,Sn),Sn);(self.webpackChunktic_tac_toe_v2_front_end=self.webpackChunktic_tac_toe_v2_front_end||[]).push([[179],{719:()=>{function ue(t){return"function"==typeof t}function It(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Sn=It(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,s)=>`${s+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ci(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Ht{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const i of n)i.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(ue(r))try{r()}catch(i){e=i instanceof Sn?i.errors:[i]}const{_teardowns:s}=this;if(s){this._teardowns=null;for(const i of s)try{Hh(i)}catch(o){e=null!=e?e:[],o instanceof Sn?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Sn(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Hh(e);else{if(e instanceof Ht){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(n=this._teardowns)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ci(n,e)}remove(e){const{_teardowns:n}=this;n&&Ci(n,e),e instanceof Ht&&e._removeParent(this)}}Ht.EMPTY=(()=>{const t=new Ht;return t.closed=!0,t})();const $h=Ht.EMPTY;function Uh(t){return t instanceof Ht||t&&"closed"in t&&ue(t.remove)&&ue(t.add)&&ue(t.unsubscribe)}function Hh(t){ue(t)?t():t.unsubscribe()}const Lr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Qo={setTimeout(...t){const{delegate:e}=Qo;return((null==e?void 0:e.setTimeout)||setTimeout)(...t)},clearTimeout(t){const{delegate:e}=Qo;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Vh(t){Qo.setTimeout(()=>{const{onUnhandledError:e}=Lr;if(!e)throw t;e(t)})}function Zo(){}const uD=Du("C",void 0,void 0);function Du(t,e,n){return{kind:t,value:e,error:n}}let jr=null;function Xo(t){if(Lr.useDeprecatedSynchronousErrorHandling){const e=!jr;if(e&&(jr={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=jr;if(jr=null,n)throw r}}else t()}class Cu extends Ht{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Uh(e)&&e.add(this)):this.destination=hD}static create(e,n,r){return new Eu(e,n,r)}next(e){this.isStopped?Su(function dD(t){return Du("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Su(function lD(t){return Du("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Su(uD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Eu extends Cu{constructor(e,n,r){let s;if(super(),ue(e))s=e;else if(e){let i;({next:s,error:n,complete:r}=e),this&&Lr.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe()):i=e,s=null==s?void 0:s.bind(i),n=null==n?void 0:n.bind(i),r=null==r?void 0:r.bind(i)}this.destination={next:s?xu(s):Zo,error:xu(null!=n?n:qh),complete:r?xu(r):Zo}}}function xu(t,e){return(...n)=>{try{t(...n)}catch(r){Lr.useDeprecatedSynchronousErrorHandling?function fD(t){Lr.useDeprecatedSynchronousErrorHandling&&jr&&(jr.errorThrown=!0,jr.error=t)}(r):Vh(r)}}}function qh(t){throw t}function Su(t,e){const{onStoppedNotification:n}=Lr;n&&Qo.setTimeout(()=>n(t,e))}const hD={closed:!0,next:Zo,error:qh,complete:Zo},Iu="function"==typeof Symbol&&Symbol.observable||"@@observable";function Br(t){return t}let Ce=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,s){const i=function gD(t){return t&&t instanceof Cu||function pD(t){return t&&ue(t.next)&&ue(t.error)&&ue(t.complete)}(t)&&Uh(t)}(n)?n:new Eu(n,r,s);return Xo(()=>{const{operator:o,source:a}=this;i.add(o?o.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Gh(r))((s,i)=>{let o;o=this.subscribe(a=>{try{n(a)}catch(c){i(c),null==o||o.unsubscribe()}},i,s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Iu](){return this}pipe(...n){return function zh(t){return 0===t.length?Br:1===t.length?t[0]:function(n){return t.reduce((r,s)=>s(r),n)}}(n)(this)}toPromise(n){return new(n=Gh(n))((r,s)=>{let i;this.subscribe(o=>i=o,o=>s(o),()=>r(i))})}}return t.create=e=>new t(e),t})();function Gh(t){var e;return null!==(e=null!=t?t:Lr.Promise)&&void 0!==e?e:Promise}const mD=It(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let In=(()=>{class t extends Ce{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Wh(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new mD}next(n){Xo(()=>{if(this._throwIfClosed(),!this.isStopped){const r=this.observers.slice();for(const s of r)s.next(n)}})}error(n){Xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:s,observers:i}=this;return r||s?$h:(i.push(n),new Ht(()=>Ci(i,n)))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:s,isStopped:i}=this;r?n.error(s):i&&n.complete()}asObservable(){const n=new Ce;return n.source=this,n}}return t.create=(e,n)=>new Wh(e,n),t})();class Wh extends In{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:$h}}function Kh(t){return ue(null==t?void 0:t.lift)}function Ye(t){return e=>{if(Kh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}class Qe extends Cu{constructor(e,n,r,s,i){super(e),this.onFinalize=i,this._next=n?function(o){try{n(o)}catch(a){e.error(a)}}:super._next,this._error=s?function(o){try{s(o)}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(o){e.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}function fe(t,e){return Ye((n,r)=>{let s=0;n.subscribe(new Qe(r,i=>{r.next(t.call(e,i,s++))}))})}function $r(t){return this instanceof $r?(this.v=t,this):new $r(t)}function bD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=n.apply(t,e||[]),i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){r[f]&&(s[f]=function(h){return new Promise(function(y,_){i.push([f,h,y,_])>1||a(f,h)})})}function a(f,h){try{!function c(f){f.value instanceof $r?Promise.resolve(f.value.v).then(u,l):d(i[0][2],f)}(r[f](h))}catch(y){d(i[0][3],y)}}function u(f){a("next",f)}function l(f){a("throw",f)}function d(f,h){f(h),i.shift(),i.length&&a(i[0][0],i[0][1])}}function _D(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Qh(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){!function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}(a,c,(o=t[i](o)).done,o.value)})}}}const Zh=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Xh(t){return ue(null==t?void 0:t.then)}function ep(t){return ue(t[Iu])}function tp(t){return Symbol.asyncIterator&&ue(null==t?void 0:t[Symbol.asyncIterator])}function np(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const rp=function DD(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function sp(t){return ue(null==t?void 0:t[rp])}function ip(t){return bD(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:s}=yield $r(n.read());if(s)return yield $r(void 0);yield yield $r(r)}}finally{n.releaseLock()}})}function op(t){return ue(null==t?void 0:t.getReader)}function zn(t){if(t instanceof Ce)return t;if(null!=t){if(ep(t))return function CD(t){return new Ce(e=>{const n=t[Iu]();if(ue(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Zh(t))return function ED(t){return new Ce(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Xh(t))return function xD(t){return new Ce(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Vh)})}(t);if(tp(t))return ap(t);if(sp(t))return function SD(t){return new Ce(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(op(t))return function ID(t){return ap(ip(t))}(t)}throw np(t)}function ap(t){return new Ce(e=>{(function AD(t,e){var n,r,s,i;return function yD(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):function s(i){return i instanceof n?i:new n(function(o){o(i)})}(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=_D(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){s={error:o}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(s)throw s.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Gn(t,e,n,r=0,s=!1){const i=e.schedule(function(){n(),s?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!s)return i}function Ge(t,e,n=1/0){return ue(e)?Ge((r,s)=>fe((i,o)=>e(r,i,s,o))(zn(t(r,s))),n):("number"==typeof e&&(n=e),Ye((r,s)=>function MD(t,e,n,r,s,i,o,a){const c=[];let u=0,l=0,d=!1;const f=()=>{d&&!c.length&&!u&&e.complete()},h=_=>u<r?y(_):c.push(_),y=_=>{i&&e.next(_),u++;let E=!1;zn(n(_,l++)).subscribe(new Qe(e,S=>{null==s||s(S),i?h(S):e.next(S)},()=>{E=!0},void 0,()=>{if(E)try{for(u--;c.length&&u<r;){const S=c.shift();o?Gn(e,o,()=>y(S)):y(S)}f()}catch(S){e.error(S)}}))};return t.subscribe(new Qe(e,h,()=>{d=!0,f()})),()=>{null==a||a()}}(r,s,t,n)))}function Ei(t=1/0){return Ge(Br,t)}const Wn=new Ce(t=>t.complete());function Mu(t){return t[t.length-1]}function xi(t){return function PD(t){return t&&ue(t.schedule)}(Mu(t))?t.pop():void 0}function cp(t,e=0){return Ye((n,r)=>{n.subscribe(new Qe(r,s=>Gn(r,t,()=>r.next(s),e),()=>Gn(r,t,()=>r.complete(),e),s=>Gn(r,t,()=>r.error(s),e)))})}function up(t,e=0){return Ye((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function lp(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ce(n=>{Gn(n,e,()=>{const r=t[Symbol.asyncIterator]();Gn(n,e,()=>{r.next().then(s=>{s.done?n.complete():n.next(s.value)})},0,!0)})})}function Ze(t,e){return e?function BD(t,e){if(null!=t){if(ep(t))return function ND(t,e){return zn(t).pipe(up(e),cp(e))}(t,e);if(Zh(t))return function FD(t,e){return new Ce(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Xh(t))return function kD(t,e){return zn(t).pipe(up(e),cp(e))}(t,e);if(tp(t))return lp(t,e);if(sp(t))return function LD(t,e){return new Ce(n=>{let r;return Gn(n,e,()=>{r=t[rp](),Gn(n,e,()=>{let s,i;try{({value:s,done:i}=r.next())}catch(o){return void n.error(o)}i?n.complete():n.next(s)},0,!0)}),()=>ue(null==r?void 0:r.return)&&r.return()})}(t,e);if(op(t))return function jD(t,e){return lp(ip(t),e)}(t,e)}throw np(t)}(t,e):zn(t)}function ea(t){return t<=0?()=>Wn:Ye((e,n)=>{let r=0;e.subscribe(new Qe(n,s=>{++r<=t&&(n.next(s),t<=r&&n.complete())}))})}function Tu(t,e,...n){return!0===e?(t(),null):!1===e?null:e(...n).pipe(ea(1)).subscribe(()=>t())}function ye(t){for(let e in t)if(t[e]===ye)return e;throw Error("Could not find renamed property on target object.")}function he(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(he).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Ou(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const HD=ye({__forward_ref__:ye});function Ru(t){return t.__forward_ref__=Ru,t.toString=function(){return he(this())},t}function Z(t){return function dp(t){return"function"==typeof t&&t.hasOwnProperty(HD)&&t.__forward_ref__===Ru}(t)?t():t}class le extends Error{constructor(e,n){super(function Nu(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function G(t){return"string"==typeof t?t:null==t?"":String(t)}function ut(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():G(t)}function ta(t,e){const n=e?` in ${e}`:"";throw new le(-201,`No provider for ${ut(t)} found${n}`)}function Mt(t,e){null==t&&function we(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Y(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function An(t){return{providers:t.providers||[],imports:t.imports||[]}}function ku(t){return fp(t,na)||fp(t,pp)}function fp(t,e){return t.hasOwnProperty(e)?t[e]:null}function hp(t){return t&&(t.hasOwnProperty(Fu)||t.hasOwnProperty(JD))?t[Fu]:null}const na=ye({\u0275prov:ye}),Fu=ye({\u0275inj:ye}),pp=ye({ngInjectableDef:ye}),JD=ye({ngInjectorDef:ye});var J=(()=>((J=J||{})[J.Default=0]="Default",J[J.Host=1]="Host",J[J.Self=2]="Self",J[J.SkipSelf=4]="SkipSelf",J[J.Optional=8]="Optional",J))();let Lu;function dr(t){const e=Lu;return Lu=t,e}function gp(t,e,n){const r=ku(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&J.Optional?null:void 0!==e?e:void ta(he(t),"Injector")}function fr(t){return{toString:t}.toString()}var nn=(()=>((nn=nn||{})[nn.OnPush=0]="OnPush",nn[nn.Default=1]="Default",nn))(),Mn=(()=>{return(t=Mn||(Mn={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Mn;var t})();const QD="undefined"!=typeof globalThis&&globalThis,ZD="undefined"!=typeof window&&window,XD="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ge=QD||"undefined"!=typeof global&&global||ZD||XD,hs={},ve=[],ra=ye({\u0275cmp:ye}),ju=ye({\u0275dir:ye}),Bu=ye({\u0275pipe:ye}),mp=ye({\u0275mod:ye}),Jn=ye({\u0275fac:ye}),Si=ye({__NG_ELEMENT_ID__:ye});let eC=0;function ps(t){return fr(()=>{const n={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===nn.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||ve,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Mn.Emulated,id:"c",styles:t.styles||ve,_:null,setInput:null,schemas:t.schemas||null,tView:null},s=t.directives,i=t.features,o=t.pipes;return r.id+=eC++,r.inputs=_p(t.inputs,n),r.outputs=_p(t.outputs),i&&i.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(yp):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(vp):null,r})}function yp(t){return tt(t)||function hr(t){return t[ju]||null}(t)}function vp(t){return function Ur(t){return t[Bu]||null}(t)}const bp={};function Yn(t){return fr(()=>{const e={type:t.type,bootstrap:t.bootstrap||ve,declarations:t.declarations||ve,imports:t.imports||ve,exports:t.exports||ve,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(bp[t.id]=t.type),e})}function _p(t,e){if(null==t)return hs;const n={};for(const r in t)if(t.hasOwnProperty(r)){let s=t[r],i=s;Array.isArray(s)&&(i=s[1],s=s[0]),n[s]=r,e&&(e[s]=i)}return n}const et=ps;function bt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function tt(t){return t[ra]||null}function Vt(t,e){const n=t[mp]||null;if(!n&&!0===e)throw new Error(`Type ${he(t)} does not have '\u0275mod' property.`);return n}const X=11;function Tn(t){return Array.isArray(t)&&"object"==typeof t[1]}function sn(t){return Array.isArray(t)&&!0===t[1]}function Hu(t){return 0!=(8&t.flags)}function aa(t){return 2==(2&t.flags)}function ca(t){return 1==(1&t.flags)}function on(t){return null!==t.template}function oC(t){return 0!=(512&t[2])}function zr(t,e){return t.hasOwnProperty(Jn)?t[Jn]:null}class uC{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Dp(t){return t.type.prototype.ngOnChanges&&(t.setInput=dC),lC}function lC(){const t=Ep(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===hs)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function dC(t,e,n,r){const s=Ep(t)||function fC(t,e){return t[Cp]=e}(t,{previous:hs,current:null}),i=s.current||(s.current={}),o=s.previous,a=this.declaredInputs[n],c=o[a];i[a]=new uC(c&&c.currentValue,e,o===hs),t[r]=e}const Cp="__ngSimpleChanges__";function Ep(t){return t[Cp]||null}let zu;function Ie(t){return!!t.listen}const Ip={createRenderer:(t,e)=>function Gu(){return void 0!==zu?zu:"undefined"!=typeof document?document:void 0}()};function Oe(t){for(;Array.isArray(t);)t=t[0];return t}function ua(t,e){return Oe(e[t])}function Gt(t,e){return Oe(e[t.index])}function Wu(t,e){return t.data[e]}function Pt(t,e){const n=e[t];return Tn(n)?n:n[0]}function Ku(t){return 128==(128&t[2])}function pr(t,e){return null==e?null:t[e]}function Mp(t){t[18]=0}function Ju(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const z={lFrame:Lp(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Tp(){return z.bindingsEnabled}function M(){return z.lFrame.lView}function ce(){return z.lFrame.tView}function $e(){let t=Pp();for(;null!==t&&64===t.type;)t=t.parent;return t}function Pp(){return z.lFrame.currentTNode}function Pn(t,e){const n=z.lFrame;n.currentTNode=t,n.isParent=e}function Yu(){return z.lFrame.isParent}function Qu(){z.lFrame.isParent=!1}function la(){return z.isInCheckNoChangesMode}function da(t){z.isInCheckNoChangesMode=t}function _s(){return z.lFrame.bindingIndex++}function IC(t,e){const n=z.lFrame;n.bindingIndex=n.bindingRootIndex=t,Zu(e)}function Zu(t){z.lFrame.currentDirectiveIndex=t}function el(t){z.lFrame.currentQueryIndex=t}function MC(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function kp(t,e,n){if(n&J.SkipSelf){let s=e,i=t;for(;!(s=s.parent,null!==s||n&J.Host||(s=MC(i),null===s||(i=i[15],10&s.type))););if(null===s)return!1;e=s,t=i}const r=z.lFrame=Fp();return r.currentTNode=e,r.lView=t,!0}function fa(t){const e=Fp(),n=t[1];z.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Fp(){const t=z.lFrame,e=null===t?null:t.child;return null===e?Lp(t):e}function Lp(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function jp(){const t=z.lFrame;return z.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Bp=jp;function ha(){const t=jp();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function dt(){return z.lFrame.selectedIndex}function gr(t){z.lFrame.selectedIndex=t}function Ae(){const t=z.lFrame;return Wu(t.tView,t.selectedIndex)}function pa(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const i=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=i;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),c&&(t.viewHooks||(t.viewHooks=[])).push(-n,c),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=l&&(t.destroyHooks||(t.destroyHooks=[])).push(n,l)}}function ga(t,e,n){$p(t,e,3,n)}function ma(t,e,n,r){(3&t[2])===n&&$p(t,e,n,r)}function tl(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function $p(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&t[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[18]+=65536),(a<i||-1==i)&&(jC(t,n,e,c),t[18]=(4294901760&t[18])+c+2),c++}function jC(t,e,n,r){const s=n[r]<0,i=n[r+1],a=t[s?-n[r]:n[r]];if(s){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{i.call(a)}finally{}}}else try{i.call(a)}finally{}}class Pi{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function ya(t,e,n){const r=Ie(t);let s=0;for(;s<n.length;){const i=n[s];if("number"==typeof i){if(0!==i)break;s++;const o=n[s++],a=n[s++],c=n[s++];r?t.setAttribute(e,a,c,o):e.setAttributeNS(o,a,c)}else{const o=i,a=n[++s];rl(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),s++}}return s}function Up(t){return 3===t||4===t||6===t}function rl(t){return 64===t.charCodeAt(0)}function va(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const s=e[r];"number"==typeof s?n=s:0===n||Hp(t,n,s,null,-1===n||2===n?e[++r]:null)}}return t}function Hp(t,e,n,r,s){let i=0,o=t.length;if(-1===e)o=-1;else for(;i<t.length;){const a=t[i++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=i-1;break}}}for(;i<t.length;){const a=t[i];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==s&&(t[i+1]=s));if(r===t[i+1])return void(t[i+2]=s)}i++,null!==r&&i++,null!==s&&i++}-1!==o&&(t.splice(o,0,e),i=o+1),t.splice(i++,0,n),null!==r&&t.splice(i++,0,r),null!==s&&t.splice(i++,0,s)}function Vp(t){return-1!==t}function ws(t){return 32767&t}function Ds(t,e){let n=function VC(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let sl=!0;function ba(t){const e=sl;return sl=t,e}let qC=0;function Ri(t,e){const n=ol(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,il(r.data,t),il(e,null),il(r.blueprint,null));const s=_a(t,e),i=t.injectorIndex;if(Vp(s)){const o=ws(s),a=Ds(s,e),c=a[1].data;for(let u=0;u<8;u++)e[i+u]=a[o+u]|c[o+u]}return e[i+8]=s,i}function il(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ol(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function _a(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,s=e;for(;null!==s;){const i=s[1],o=i.type;if(r=2===o?i.declTNode:1===o?s[6]:null,null===r)return-1;if(n++,s=s[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function wa(t,e,n){!function zC(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Si)&&(r=n[Si]),null==r&&(r=n[Si]=qC++);const s=255&r;e.data[t+(s>>5)]|=1<<s}(t,e,n)}function Gp(t,e,n){if(n&J.Optional)return t;ta(e,"NodeInjector")}function Wp(t,e,n,r){if(n&J.Optional&&void 0===r&&(r=null),0==(n&(J.Self|J.Host))){const s=t[9],i=dr(void 0);try{return s?s.get(e,r,n&J.Optional):gp(e,r,n&J.Optional)}finally{dr(i)}}return Gp(r,e,n)}function Kp(t,e,n,r=J.Default,s){if(null!==t){const i=function JC(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Si)?t[Si]:void 0;return"number"==typeof e?e>=0?255&e:WC:e}(n);if("function"==typeof i){if(!kp(e,t,r))return r&J.Host?Gp(s,n,r):Wp(e,n,r,s);try{const o=i(r);if(null!=o||r&J.Optional)return o;ta(n)}finally{Bp()}}else if("number"==typeof i){let o=null,a=ol(t,e),c=-1,u=r&J.Host?e[16][6]:null;for((-1===a||r&J.SkipSelf)&&(c=-1===a?_a(t,e):e[a+8],-1!==c&&Qp(r,!1)?(o=e[1],a=ws(c),e=Ds(c,e)):a=-1);-1!==a;){const l=e[1];if(Yp(i,a,l.data)){const d=KC(a,e,n,o,r,u);if(d!==Jp)return d}c=e[a+8],-1!==c&&Qp(r,e[1].data[a+8]===u)&&Yp(i,a,e)?(o=l,a=ws(c),e=Ds(c,e)):a=-1}}}return Wp(e,n,r,s)}const Jp={};function WC(){return new Cs($e(),M())}function KC(t,e,n,r,s,i){const o=e[1],a=o.data[t+8],l=function Da(t,e,n,r,s){const i=t.providerIndexes,o=e.data,a=1048575&i,c=t.directiveStart,l=i>>20,f=s?a+l:t.directiveEnd;for(let h=r?a:a+l;h<f;h++){const y=o[h];if(h<c&&n===y||h>=c&&y.type===n)return h}if(s){const h=o[c];if(h&&on(h)&&h.type===n)return c}return null}(a,o,n,null==r?aa(a)&&sl:r!=o&&0!=(3&a.type),s&J.Host&&i===a);return null!==l?Ni(e,o,l,a):Jp}function Ni(t,e,n,r){let s=t[n];const i=e.data;if(function BC(t){return t instanceof Pi}(s)){const o=s;o.resolving&&function VD(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new le(-200,`Circular dependency in DI detected for ${t}${n}`)}(ut(i[n]));const a=ba(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?dr(o.injectImpl):null;kp(t,r,J.Default);try{s=t[n]=o.factory(void 0,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&function LC(t,e,n){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:i}=e.type.prototype;if(r){const o=Dp(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o)}s&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,s),i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,i))}(n,i[n],e)}finally{null!==c&&dr(c),ba(a),o.resolving=!1,Bp()}}return s}function Yp(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Qp(t,e){return!(t&J.Self||t&J.Host&&e)}class Cs{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Kp(this._tNode,this._lView,e,r,n)}}const xs="__parameters__";function Is(t,e,n){return fr(()=>{const r=function cl(t){return function(...n){if(t){const r=t(...n);for(const s in r)this[s]=r[s]}}}(e);function s(...i){if(this instanceof s)return r.apply(this,i),this;const o=new s(...i);return a.annotation=o,a;function a(c,u,l){const d=c.hasOwnProperty(xs)?c[xs]:Object.defineProperty(c,xs,{value:[]})[xs];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=t,s.annotationCls=s,s})}class se{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Y({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ZC=new se("AnalyzeForEntryComponents");function On(t,e){t.forEach(n=>Array.isArray(n)?On(n,e):e(n))}function Xp(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ca(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Ot(t,e,n){let r=As(t,e);return r>=0?t[1|r]=n:(r=~r,function tE(t,e,n,r){let s=t.length;if(s==e)t.push(n,r);else if(1===s)t.push(r,t[0]),t[0]=n;else{for(s--,t.push(t[s-1],t[s]);s>e;)t[s]=t[s-2],s--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function ll(t,e){const n=As(t,e);if(n>=0)return t[1|n]}function As(t,e){return function ng(t,e,n){let r=0,s=t.length>>n;for(;s!==r;){const i=r+(s-r>>1),o=t[i<<n];if(e===o)return i<<n;o>e?s=i:r=i+1}return~(s<<n)}(t,e,1)}const Bi={},fl="__NG_DI_FLAG__",xa="ngTempTokenPath",cE=/\n/gm,sg="__source",lE=ye({provide:String,useValue:ye});let $i;function ig(t){const e=$i;return $i=t,e}function dE(t,e=J.Default){if(void 0===$i)throw new le(203,"");return null===$i?gp(t,void 0,e):$i.get(t,e&J.Optional?null:void 0,e)}function H(t,e=J.Default){return(function YD(){return Lu}()||dE)(Z(t),e)}function hl(t){const e=[];for(let n=0;n<t.length;n++){const r=Z(t[n]);if(Array.isArray(r)){if(0===r.length)throw new le(900,"");let s,i=J.Default;for(let o=0;o<r.length;o++){const a=r[o],c=fE(a);"number"==typeof c?-1===c?s=a.token:i|=c:s=a}e.push(H(s,i))}else e.push(H(r))}return e}function Ui(t,e){return t[fl]=e,t.prototype[fl]=e,t}function fE(t){return t[fl]}const Hi=Ui(Is("Inject",t=>({token:t})),-1),Rn=Ui(Is("Optional"),8),Ms=Ui(Is("SkipSelf"),4);const Eg="__ngContext__";function rt(t,e){t[Eg]=e}function Cl(t){const e=function Wi(t){return t[Eg]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function xl(t){return t.ngOriginalError}function sx(t,...e){t.error(...e)}class Os{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),r=function rx(t){return t&&t.ngErrorLogger||sx}(e);r(this._console,"ERROR",e),n&&r(this._console,"ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&xl(e);for(;n&&xl(n);)n=xl(n);return n||null}}const Mg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ge))();function kn(t){return t instanceof Function?t():t}var Rt=(()=>((Rt=Rt||{})[Rt.Important=1]="Important",Rt[Rt.DashCase=2]="DashCase",Rt))();function Il(t,e){return undefined(t,e)}function Ki(t){const e=t[3];return sn(e)?e[3]:e}function Al(t){return Ng(t[13])}function Ml(t){return Ng(t[4])}function Ng(t){for(;null!==t&&!sn(t);)t=t[4];return t}function Ns(t,e,n,r,s){if(null!=r){let i,o=!1;sn(r)?i=r:Tn(r)&&(o=!0,r=r[0]);const a=Oe(r);0===t&&null!==n?null==s?$g(e,n,a):Wr(e,n,a,s||null,!0):1===t&&null!==n?Wr(e,n,a,s||null,!0):2===t?function Wg(t,e,n){const r=Pa(t,e);r&&function Ix(t,e,n,r){Ie(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=i&&function Tx(t,e,n,r,s){const i=n[7];i!==Oe(n)&&Ns(e,t,r,i,s);for(let a=10;a<n.length;a++){const c=n[a];Ji(c[1],c,t,e,r,i)}}(e,t,i,n,s)}}function Pl(t,e,n){return Ie(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Fg(t,e){const n=t[9],r=n.indexOf(e),s=e[3];1024&e[2]&&(e[2]&=-1025,Ju(s,-1)),n.splice(r,1)}function Ol(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&Fg(s,r),e>0&&(t[n-1][4]=r[4]);const i=Ca(t,10+e);!function bx(t,e){Ji(t,e,e[X],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=i[19];null!==o&&o.detachView(i[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Lg(t,e){if(!(256&e[2])){const n=e[X];Ie(n)&&n.destroyNode&&Ji(t,e,n,3,null,null),function Dx(t){let e=t[13];if(!e)return Rl(t[1],t);for(;e;){let n=null;if(Tn(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Tn(e)&&Rl(e[1],e),e=e[3];null===e&&(e=t),Tn(e)&&Rl(e[1],e),n=e&&e[4]}e=n}}(e)}}function Rl(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function Sx(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const s=e[n[r]];if(!(s instanceof Pi)){const i=n[r+1];if(Array.isArray(i))for(let o=0;o<i.length;o+=2){const a=s[i[o]],c=i[o+1];try{c.call(a)}finally{}}else try{i.call(s)}finally{}}}}(t,e),function xx(t,e){const n=t.cleanup,r=e[7];let s=-1;if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const o=n[i+1],a="function"==typeof o?o(e):Oe(e[o]),c=r[s=n[i+2]],u=n[i+3];"boolean"==typeof u?a.removeEventListener(n[i],c,u):u>=0?r[s=u]():r[s=-u].unsubscribe(),i+=2}else{const o=r[s=n[i+1]];n[i].call(o)}if(null!==r){for(let i=s+1;i<r.length;i++)r[i]();e[7]=null}}(t,e),1===e[1].type&&Ie(e[X])&&e[X].destroy();const n=e[17];if(null!==n&&sn(e[3])){n!==e[3]&&Fg(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function jg(t,e,n){return function Bg(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const s=t.data[r.directiveStart].encapsulation;if(s===Mn.None||s===Mn.Emulated)return null}return Gt(r,n)}(t,e.parent,n)}function Wr(t,e,n,r,s){Ie(t)?t.insertBefore(e,n,r,s):e.insertBefore(n,r,s)}function $g(t,e,n){Ie(t)?t.appendChild(e,n):e.appendChild(n)}function Ug(t,e,n,r,s){null!==r?Wr(t,e,n,r,s):$g(t,e,n)}function Pa(t,e){return Ie(t)?t.parentNode(e):e.parentNode}let qg=function Vg(t,e,n){return 40&t.type?Gt(t,n):null};function Oa(t,e,n,r){const s=jg(t,r,e),i=e[X],a=function Hg(t,e,n){return qg(t,e,n)}(r.parent||e[6],r,e);if(null!=s)if(Array.isArray(n))for(let c=0;c<n.length;c++)Ug(i,s,n[c],a,!1);else Ug(i,s,n,a,!1)}function Ra(t,e){if(null!==e){const n=e.type;if(3&n)return Gt(e,t);if(4&n)return kl(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Ra(t,r);{const s=t[e.index];return sn(s)?kl(-1,s):Oe(s)}}if(32&n)return Il(e,t)()||Oe(t[e.index]);{const r=Gg(t,e);return null!==r?Array.isArray(r)?r[0]:Ra(Ki(t[16]),r):Ra(t,e.next)}}return null}function Gg(t,e){return null!==e?t[16][6].projection[e.projection]:null}function kl(t,e){const n=10+t+1;if(n<e.length){const r=e[n],s=r[1].firstChild;if(null!==s)return Ra(r,s)}return e[7]}function Fl(t,e,n,r,s,i,o){for(;null!=n;){const a=r[n.index],c=n.type;if(o&&0===e&&(a&&rt(Oe(a),r),n.flags|=4),64!=(64&n.flags))if(8&c)Fl(t,e,n.child,r,s,i,!1),Ns(e,t,s,a,i);else if(32&c){const u=Il(n,r);let l;for(;l=u();)Ns(e,t,s,l,i);Ns(e,t,s,a,i)}else 16&c?Kg(t,e,r,n,s,i):Ns(e,t,s,a,i);n=o?n.projectionNext:n.next}}function Ji(t,e,n,r,s,i){Fl(n,r,t.firstChild,e,s,i,!1)}function Kg(t,e,n,r,s,i){const o=n[16],c=o[6].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)Ns(e,t,s,c[u],i);else Fl(t,e,c,o[3],s,i,!0)}function Jg(t,e,n){Ie(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ll(t,e,n){Ie(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Yg(t,e,n){let r=t.length;for(;;){const s=t.indexOf(e,n);if(-1===s)return s;if(0===s||t.charCodeAt(s-1)<=32){const i=e.length;if(s+i===r||t.charCodeAt(s+i)<=32)return s}n=s+1}}const Qg="ng-template";function Ox(t,e,n){let r=0;for(;r<t.length;){let s=t[r++];if(n&&"class"===s){if(s=t[r],-1!==Yg(s.toLowerCase(),e,0))return!0}else if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}}return!1}function Zg(t){return 4===t.type&&t.value!==Qg}function Rx(t,e,n){return e===(4!==t.type||n?t.value:Qg)}function Nx(t,e,n){let r=4;const s=t.attrs||[],i=function Lx(t){for(let e=0;e<t.length;e++)if(Up(t[e]))return e;return t.length}(s);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!Rx(t,c,n)||""===c&&1===e.length){if(an(r))return!1;o=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==t.attrs){if(!Ox(t.attrs,u,n)){if(an(r))return!1;o=!0}continue}const d=kx(8&r?"class":c,s,Zg(t),n);if(-1===d){if(an(r))return!1;o=!0;continue}if(""!==u){let f;f=d>i?"":s[d+1].toLowerCase();const h=8&r?f:null;if(h&&-1!==Yg(h,u,0)||2&r&&u!==f){if(an(r))return!1;o=!0}}}}else{if(!o&&!an(r)&&!an(c))return!1;if(o&&an(c))continue;o=!1,r=c|1&r}}return an(r)||o}function an(t){return 0==(1&t)}function kx(t,e,n,r){if(null===e)return-1;let s=0;if(r||!n){let i=!1;for(;s<e.length;){const o=e[s];if(o===t)return s;if(3===o||6===o)i=!0;else{if(1===o||2===o){let a=e[++s];for(;"string"==typeof a;)a=e[++s];continue}if(4===o)break;if(0===o){s+=4;continue}}s+=i?1:2}return-1}return function jx(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Xg(t,e,n=!1){for(let r=0;r<e.length;r++)if(Nx(t,e[r],n))return!0;return!1}function em(t,e){return t?":not("+e.trim()+")":e}function $x(t){let e=t[0],n=1,r=2,s="",i=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?s+="."+o:4&r&&(s+=" "+o);else""!==s&&!an(o)&&(e+=em(i,s),s=""),r=o,i=i||!an(r);n++}return""!==s&&(e+=em(i,s)),e}const W={};function Ke(t){tm(ce(),M(),dt()+t,la())}function tm(t,e,n,r){if(!r)if(3==(3&e[2])){const i=t.preOrderCheckHooks;null!==i&&ga(e,i,n)}else{const i=t.preOrderHooks;null!==i&&ma(e,i,0,n)}gr(n)}function Na(t,e){return t<<17|e<<2}function cn(t){return t>>17&32767}function jl(t){return 2|t}function Xn(t){return(131068&t)>>2}function Bl(t,e){return-131069&t|e<<2}function $l(t){return 1|t}function fm(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r],i=n[r+1];if(-1!==i){const o=t.data[i];el(s),o.contentQueries(2,e[i],i)}}}function Yi(t,e,n,r,s,i,o,a,c,u){const l=e.blueprint.slice();return l[0]=s,l[2]=140|r,Mp(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[X]=a||t&&t[X],l[12]=c||t&&t[12]||null,l[9]=u||t&&t[9]||null,l[6]=i,l[16]=2==e.type?t[16]:l,l}function ks(t,e,n,r,s){let i=t.data[e];if(null===i)i=function Jl(t,e,n,r,s){const i=Pp(),o=Yu(),c=t.data[e]=function sS(t,e,n,r,s,i){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?i:i&&i.parent,n,e,r,s);return null===t.firstChild&&(t.firstChild=c),null!==i&&(o?null==i.child&&null!==c.parent&&(i.child=c):null===i.next&&(i.next=c)),c}(t,e,n,r,s),function SC(){return z.lFrame.inI18n}()&&(i.flags|=64);else if(64&i.type){i.type=n,i.value=r,i.attrs=s;const o=function Ti(){const t=z.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();i.injectorIndex=null===o?-1:o.injectorIndex}return Pn(i,!0),i}function Fs(t,e,n,r){if(0===n)return-1;const s=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return s}function Qi(t,e,n){fa(e);try{const r=t.viewQuery;null!==r&&sd(1,r,n);const s=t.template;null!==s&&hm(t,e,s,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&fm(t,e),t.staticViewQueries&&sd(2,t.viewQuery,n);const i=t.components;null!==i&&function tS(t,e){for(let n=0;n<e.length;n++)DS(t,e[n])}(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,ha()}}function Ls(t,e,n,r){const s=e[2];if(256==(256&s))return;fa(e);const i=la();try{Mp(e),function Op(t){return z.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&hm(t,e,n,2,r);const o=3==(3&s);if(!i)if(o){const u=t.preOrderCheckHooks;null!==u&&ga(e,u,null)}else{const u=t.preOrderHooks;null!==u&&ma(e,u,0,null),tl(e,0)}if(function _S(t){for(let e=Al(t);null!==e;e=Ml(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const s=n[r],i=s[3];0==(1024&s[2])&&Ju(i,1),s[2]|=1024}}}(e),function bS(t){for(let e=Al(t);null!==e;e=Ml(e))for(let n=10;n<e.length;n++){const r=e[n],s=r[1];Ku(r)&&Ls(s,r,s.template,r[8])}}(e),null!==t.contentQueries&&fm(t,e),!i)if(o){const u=t.contentCheckHooks;null!==u&&ga(e,u)}else{const u=t.contentHooks;null!==u&&ma(e,u,1),tl(e,1)}!function Xx(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const s=n[r];if(s<0)gr(~s);else{const i=s,o=n[++r],a=n[++r];IC(o,i),a(2,e[i])}}}finally{gr(-1)}}(t,e);const a=t.components;null!==a&&function eS(t,e){for(let n=0;n<e.length;n++)wS(t,e[n])}(e,a);const c=t.viewQuery;if(null!==c&&sd(2,c,r),!i)if(o){const u=t.viewCheckHooks;null!==u&&ga(e,u)}else{const u=t.viewHooks;null!==u&&ma(e,u,2),tl(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),i||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ju(e[3],-1))}finally{ha()}}function nS(t,e,n,r){const s=e[10],i=!la(),o=function Ap(t){return 4==(4&t[2])}(e);try{i&&!o&&s.begin&&s.begin(),o&&Qi(t,e,r),Ls(t,e,n,r)}finally{i&&!o&&s.end&&s.end()}}function hm(t,e,n,r,s){const i=dt(),o=2&r;try{gr(-1),o&&e.length>20&&tm(t,e,20,la()),n(r,s)}finally{gr(i)}}function pm(t,e,n){if(Hu(e)){const s=e.directiveEnd;for(let i=e.directiveStart;i<s;i++){const o=t.data[i];o.contentQueries&&o.contentQueries(1,n[i],i)}}}function Yl(t,e,n){!Tp()||(function dS(t,e,n,r){const s=n.directiveStart,i=n.directiveEnd;t.firstCreatePass||Ri(n,e),rt(r,e);const o=n.initialInputs;for(let a=s;a<i;a++){const c=t.data[a],u=on(c);u&&mS(e,n,c);const l=Ni(e,t,a,n);rt(l,e),null!==o&&yS(0,a-s,l,c,0,o),u&&(Pt(n.index,e)[8]=l)}}(t,e,n,Gt(n,e)),128==(128&n.flags)&&function fS(t,e,n){const r=n.directiveStart,s=n.directiveEnd,o=n.index,a=function AC(){return z.lFrame.currentDirectiveIndex}();try{gr(o);for(let c=r;c<s;c++){const u=t.data[c],l=e[c];Zu(c),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Dm(u,l)}}finally{gr(-1),Zu(a)}}(t,e,n))}function Ql(t,e,n=Gt){const r=e.localNames;if(null!==r){let s=e.index+1;for(let i=0;i<r.length;i+=2){const o=r[i+1],a=-1===o?n(e,t):t[o];t[s++]=a}}}function gm(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=La(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function La(t,e,n,r,s,i,o,a,c,u){const l=20+r,d=l+s,f=function rS(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:W);return n}(l,d),h="function"==typeof u?u():u;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:h,incompleteFirstPass:!1}}function bm(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const s=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,s):n[r]=[e,s]}return n}function Nt(t,e,n,r,s,i,o,a){const c=Gt(e,n);let l,u=e.inputs;!a&&null!=u&&(l=u[r])?(Om(t,n,l,r,s),aa(e)&&function aS(t,e){const n=Pt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function oS(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),s=null!=o?o(s,e.value||"",r):s,Ie(i)?i.setProperty(c,r,s):rl(r)||(c.setProperty?c.setProperty(r,s):c[r]=s))}function Zl(t,e,n,r){let s=!1;if(Tp()){const i=function hS(t,e,n){const r=t.directiveRegistry;let s=null;if(r)for(let i=0;i<r.length;i++){const o=r[i];Xg(n,o.selectors,!1)&&(s||(s=[]),wa(Ri(n,e),t,o.type),on(o)?(Cm(t,n),s.unshift(o)):s.push(o))}return s}(t,e,n),o=null===r?null:{"":-1};if(null!==i){s=!0,Em(n,t.data.length,i.length);for(let l=0;l<i.length;l++){const d=i[l];d.providersResolver&&d.providersResolver(d)}let a=!1,c=!1,u=Fs(t,e,i.length,null);for(let l=0;l<i.length;l++){const d=i[l];n.mergedAttrs=va(n.mergedAttrs,d.hostAttrs),xm(t,n,e,u,d),gS(u,d,o),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);const f=d.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),a=!0),!c&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),c=!0),u++}!function iS(t,e){const r=e.directiveEnd,s=t.data,i=e.attrs,o=[];let a=null,c=null;for(let u=e.directiveStart;u<r;u++){const l=s[u],d=l.inputs,f=null===i||Zg(e)?null:vS(d,i);o.push(f),a=bm(d,u,a),c=bm(l.outputs,u,c)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=c}(t,n)}o&&function pS(t,e,n){if(e){const r=t.localNames=[];for(let s=0;s<e.length;s+=2){const i=n[e[s+1]];if(null==i)throw new le(-301,`Export of name '${e[s+1]}' not found!`);r.push(e[s],i)}}}(n,r,o)}return n.mergedAttrs=va(n.mergedAttrs,n.attrs),s}function wm(t,e,n,r,s,i){const o=i.hostBindings;if(o){let a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);const c=~e.index;(function lS(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(a)!=c&&a.push(c),a.push(r,s,o)}}function Dm(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Cm(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function gS(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;on(e)&&(n[""]=t)}}function Em(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function xm(t,e,n,r,s){t.data[r]=s;const i=s.factory||(s.factory=zr(s.type)),o=new Pi(i,on(s),null);t.blueprint[r]=o,n[r]=o,wm(t,e,0,r,Fs(t,n,s.hostVars,W),s)}function mS(t,e,n){const r=Gt(e,t),s=gm(n),i=t[10],o=ja(t,Yi(t,s,null,n.onPush?64:16,r,e,i,i.createRenderer(r,n),null,null));t[e.index]=o}function yS(t,e,n,r,s,i){const o=i[e];if(null!==o){const a=r.setInput;for(let c=0;c<o.length;){const u=o[c++],l=o[c++],d=o[c++];null!==a?r.setInput(n,d,u,l):n[l]=d}}}function vS(t,e){let n=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;t.hasOwnProperty(s)&&(null===n&&(n=[]),n.push(s,t[s],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Sm(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function wS(t,e){const n=Pt(e,t);if(Ku(n)){const r=n[1];80&n[2]?Ls(r,n,r.template,n[8]):n[5]>0&&ed(n)}}function ed(t){for(let r=Al(t);null!==r;r=Ml(r))for(let s=10;s<r.length;s++){const i=r[s];if(1024&i[2]){const o=i[1];Ls(o,i,o.template,i[8])}else i[5]>0&&ed(i)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const s=Pt(n[r],t);Ku(s)&&s[5]>0&&ed(s)}}function DS(t,e){const n=Pt(e,t),r=n[1];(function CS(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),Qi(r,n,n[8])}function ja(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function td(t){for(;t;){t[2]|=64;const e=Ki(t);if(oC(t)&&!e)return t;t=e}return null}function rd(t,e,n){const r=e[10];r.begin&&r.begin();try{Ls(t,e,t.template,n)}catch(s){throw Pm(e,s),s}finally{r.end&&r.end()}}function Im(t){!function nd(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Cl(n),s=r[1];nS(s,r,s.template,n)}}(t[8])}function sd(t,e,n){el(0),e(t,n)}const IS=(()=>Promise.resolve(null))();function Am(t){return t[7]||(t[7]=[])}function Mm(t){return t.cleanup||(t.cleanup=[])}function Pm(t,e){const n=t[9],r=n?n.get(Os,null):null;r&&r.handleError(e)}function Om(t,e,n,r,s){for(let i=0;i<n.length;){const o=n[i++],a=n[i++],c=e[o],u=t.data[o];null!==u.setInput?u.setInput(c,s,r,a):c[a]=s}}function er(t,e,n){const r=ua(e,t);!function kg(t,e,n){Ie(t)?t.setValue(e,n):e.textContent=n}(t[X],r,n)}function Ba(t,e,n){let r=n?t.styles:null,s=n?t.classes:null,i=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?i=a:1==i?s=Ou(s,a):2==i&&(r=Ou(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=s:t.classesWithoutHost=s}const id=new se("INJECTOR",-1);class Rm{get(e,n=Bi){if(n===Bi){const r=new Error(`NullInjectorError: No provider for ${he(e)}!`);throw r.name="NullInjectorError",r}return n}}const od=new se("Set Injector scope."),Zi={},TS={};let ad;function Nm(){return void 0===ad&&(ad=new Rm),ad}function km(t,e=null,n=null,r){const s=Fm(t,e,n,r);return s._resolveInjectorDefTypes(),s}function Fm(t,e=null,n=null,r){return new PS(t,n,e||Nm(),r)}class PS{constructor(e,n,r,s=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];n&&On(n,a=>this.processProvider(a,e,n)),On([e],a=>this.processInjectorType(a,[],i)),this.records.set(id,js(void 0,this));const o=this.records.get(od);this.scope=null!=o?o.value:null,this.source=s||("object"==typeof e?null:he(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=Bi,r=J.Default){this.assertNotDestroyed();const s=ig(this),i=dr(void 0);try{if(!(r&J.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function BS(t){return"function"==typeof t||"object"==typeof t&&t instanceof se}(e)&&ku(e);a=c&&this.injectableDefInScope(c)?js(cd(e),Zi):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&J.Self?Nm():this.parent).get(e,n=r&J.Optional&&n===Bi?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[xa]=o[xa]||[]).unshift(he(e)),s)throw o;return function hE(t,e,n,r){const s=t[xa];throw e[sg]&&s.unshift(e[sg]),t.message=function pE(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let s=he(e);if(Array.isArray(e))s=e.map(he).join(" -> ");else if("object"==typeof e){let i=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];i.push(o+":"+("string"==typeof a?JSON.stringify(a):he(a)))}s=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${t.replace(cE,"\n  ")}`}("\n"+t.message,s,n,r),t.ngTokenPath=s,t[xa]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{dr(i),ig(s)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,s)=>e.push(he(s))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new le(205,"")}processInjectorType(e,n,r){if(!(e=Z(e)))return!1;let s=hp(e);const i=null==s&&e.ngModule||void 0,o=void 0===i?e:i,a=-1!==r.indexOf(o);if(void 0!==i&&(s=hp(i)),null==s)return!1;if(null!=s.imports&&!a){let l;r.push(o);try{On(s.imports,d=>{this.processInjectorType(d,n,r)&&(void 0===l&&(l=[]),l.push(d))})}finally{}if(void 0!==l)for(let d=0;d<l.length;d++){const{ngModule:f,providers:h}=l[d];On(h,y=>this.processProvider(y,f,h||ve))}}this.injectorDefTypes.add(o);const c=zr(o)||(()=>new o);this.records.set(o,js(c,Zi));const u=s.providers;if(null!=u&&!a){const l=e;On(u,d=>this.processProvider(d,l,u))}return void 0!==i&&void 0!==e.providers}processProvider(e,n,r){let s=Bs(e=Z(e))?e:Z(e&&e.provide);const i=function RS(t,e,n){return jm(t)?js(void 0,t.useValue):js(function Lm(t,e,n){let r;if(Bs(t)){const s=Z(t);return zr(s)||cd(s)}if(jm(t))r=()=>Z(t.useValue);else if(function kS(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...hl(t.deps||[]));else if(function NS(t){return!(!t||!t.useExisting)}(t))r=()=>H(Z(t.useExisting));else{const s=Z(t&&(t.useClass||t.provide));if(!function LS(t){return!!t.deps}(t))return zr(s)||cd(s);r=()=>new s(...hl(t.deps))}return r}(t),Zi)}(e);if(Bs(e)||!0!==e.multi)this.records.get(s);else{let o=this.records.get(s);o||(o=js(void 0,Zi,!0),o.factory=()=>hl(o.multi),this.records.set(s,o)),s=e,o.multi.push(e)}this.records.set(s,i)}hydrate(e,n){return n.value===Zi&&(n.value=TS,n.value=n.factory()),"object"==typeof n.value&&n.value&&function jS(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Z(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function cd(t){const e=ku(t),n=null!==e?e.factory:zr(t);if(null!==n)return n;if(t instanceof se)throw new le(204,"");if(t instanceof Function)return function OS(t){const e=t.length;if(e>0)throw function ji(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new le(204,"");const n=function WD(t){const e=t&&(t[na]||t[pp]);if(e){const n=function KD(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new le(204,"")}function js(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function jm(t){return null!==t&&"object"==typeof t&&lE in t}function Bs(t){return"function"==typeof t}let st=(()=>{class t{static create(n,r){var s;if(Array.isArray(n))return km({name:""},r,n,"");{const i=null!==(s=n.name)&&void 0!==s?s:"";return km({name:i},n.parent,n.providers,i)}}}return t.THROW_IF_NOT_FOUND=Bi,t.NULL=new Rm,t.\u0275prov=Y({token:t,providedIn:"any",factory:()=>H(id)}),t.__NG_ELEMENT_ID__=-1,t})();function WS(t,e){pa(Cl(t)[1],$e())}let $a=null;function $s(){if(!$a){const t=ge.Symbol;if(t&&t.iterator)$a=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&($a=r)}}}return $a}function Xi(t){return!!fd(t)&&(Array.isArray(t)||!(t instanceof Map)&&$s()in t)}function fd(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function it(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Hs(t,e,n,r){return it(t,_s(),n)?e+G(n)+r:W}function pd(t,e,n,r,s,i,o,a){const c=M(),u=ce(),l=t+20,d=u.firstCreatePass?function sI(t,e,n,r,s,i,o,a,c){const u=e.consts,l=ks(e,t,4,o||null,pr(u,a));Zl(e,n,l,pr(u,c)),pa(e,l);const d=l.tViews=La(2,l,r,s,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}(l,u,c,e,n,r,s,i,o):u.data[l];Pn(d,!1);const f=c[X].createComment("");Oa(u,c,f,d),rt(f,c),ja(c,c[l]=Sm(f,c,f,d)),ca(d)&&Yl(u,c,d),null!=o&&Ql(c,d,a)}function $(t,e=J.Default){const n=M();return null===n?H(t,e):Kp($e(),n,Z(t),e)}function bd(){throw new Error("invalid")}function to(t,e,n){const r=M();return it(r,_s(),e)&&Nt(ce(),Ae(),r,t,e,r[X],n,!1),to}function _d(t,e,n,r,s){const o=s?"class":"style";Om(t,n,e.inputs[o],o,r)}function Ne(t,e,n,r){const s=M(),i=ce(),o=20+t,a=s[X],c=s[o]=Pl(a,e,function FC(){return z.lFrame.currentNamespace}()),u=i.firstCreatePass?function SI(t,e,n,r,s,i,o){const a=e.consts,u=ks(e,t,2,s,pr(a,i));return Zl(e,n,u,pr(a,o)),null!==u.attrs&&Ba(u,u.attrs,!1),null!==u.mergedAttrs&&Ba(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,i,s,0,e,n,r):i.data[o];Pn(u,!0);const l=u.mergedAttrs;null!==l&&ya(a,c,l);const d=u.classes;null!==d&&Ll(a,c,d);const f=u.styles;null!==f&&Jg(a,c,f),64!=(64&u.flags)&&Oa(i,s,c,u),0===function bC(){return z.lFrame.elementDepthCount}()&&rt(c,s),function _C(){z.lFrame.elementDepthCount++}(),ca(u)&&(Yl(i,s,u),pm(i,u,s)),null!==r&&Ql(s,u)}function ke(){let t=$e();Yu()?Qu():(t=t.parent,Pn(t,!1));const e=t;!function wC(){z.lFrame.elementDepthCount--}();const n=ce();n.firstCreatePass&&(pa(n,t),Hu(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function UC(t){return 0!=(16&t.flags)}(e)&&_d(n,e,M(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function HC(t){return 0!=(32&t.flags)}(e)&&_d(n,e,M(),e.stylesWithoutHost,!1)}function wd(t,e,n,r){Ne(t,e,n,r),ke()}function Va(t,e,n){const r=M(),s=ce(),i=t+20,o=s.firstCreatePass?function II(t,e,n,r,s){const i=e.consts,o=pr(i,r),a=ks(e,t,8,"ng-container",o);return null!==o&&Ba(a,o,!0),Zl(e,n,a,pr(i,s)),null!==e.queries&&e.queries.elementStart(e,a),a}(i,s,r,e,n):s.data[i];Pn(o,!0);const a=r[i]=r[X].createComment("");Oa(s,r,a,o),rt(a,r),ca(o)&&(Yl(s,r,o),pm(s,o,r)),null!=n&&Ql(r,o)}function qa(){let t=$e();const e=ce();Yu()?Qu():(t=t.parent,Pn(t,!1)),e.firstCreatePass&&(pa(e,t),Hu(t)&&e.queries.elementEnd(t))}function za(t){return!!t&&"function"==typeof t.then}const vy=function yy(t){return!!t&&"function"==typeof t.subscribe};function ot(t,e,n,r){const s=M(),i=ce(),o=$e();return function _y(t,e,n,r,s,i,o,a){const c=ca(r),l=t.firstCreatePass&&Mm(t),d=e[8],f=Am(e);let h=!0;if(3&r.type||a){const E=Gt(r,e),S=a?a(E):E,C=f.length,P=a?U=>a(Oe(U[r.index])):r.index;if(Ie(n)){let U=null;if(!a&&c&&(U=function TI(t,e,n,r){const s=t.cleanup;if(null!=s)for(let i=0;i<s.length-1;i+=2){const o=s[i];if(o===n&&s[i+1]===r){const a=e[7],c=s[i+2];return a.length>c?a[c]:null}"string"==typeof o&&(i+=2)}return null}(t,e,s,r.index)),null!==U)(U.__ngLastListenerFn__||U).__ngNextListenerFn__=i,U.__ngLastListenerFn__=i,h=!1;else{i=Dd(r,e,d,i,!1);const K=n.listen(S,s,i);f.push(i,K),l&&l.push(s,P,C,C+1)}}else i=Dd(r,e,d,i,!0),S.addEventListener(s,i,o),f.push(i),l&&l.push(s,P,C,o)}else i=Dd(r,e,d,i,!1);const y=r.outputs;let _;if(h&&null!==y&&(_=y[s])){const E=_.length;if(E)for(let S=0;S<E;S+=2){const Be=e[_[S]][_[S+1]].subscribe(i),en=f.length;f.push(i,Be),l&&l.push(s,r.index,en,-(en+1))}}}(i,s,s[X],o,t,e,!!n,r),ot}function wy(t,e,n,r){try{return!1!==n(r)}catch(s){return Pm(t,s),!1}}function Dd(t,e,n,r,s){return function i(o){if(o===Function)return r;const a=2&t.flags?Pt(t.index,e):e;0==(32&e[2])&&td(a);let c=wy(e,0,r,o),u=i.__ngNextListenerFn__;for(;u;)c=wy(e,0,u,o)&&c,u=u.__ngNextListenerFn__;return s&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function Ga(t,e,n){return Cd(t,"",e,"",n),Ga}function Cd(t,e,n,r,s){const i=M(),o=Hs(i,e,n,r);return o!==W&&Nt(ce(),Ae(),i,t,o,i[X],s,!1),Cd}function Ty(t,e,n,r,s){const i=t[n+1],o=null===e;let a=r?cn(i):Xn(i),c=!1;for(;0!==a&&(!1===c||o);){const l=t[a+1];LI(t[a],e)&&(c=!0,t[a+1]=r?$l(l):jl(l)),a=r?cn(l):Xn(l)}c&&(t[n+1]=r?jl(i):$l(i))}function LI(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&As(t,e)>=0}function Wa(t,e){return function ln(t,e,n,r){const s=M(),i=ce(),o=function Zn(t){const e=z.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);i.firstUpdatePass&&function By(t,e,n,r){const s=t.data;if(null===s[n+1]){const i=s[dt()],o=function jy(t,e){return e>=t.expandoStartIndex}(t,n);(function Vy(t,e){return 0!=(t.flags&(e?16:32))})(i,r)&&null===e&&!o&&(e=!1),e=function GI(t,e,n,r){const s=function Xu(t){const e=z.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let i=r?e.residualClasses:e.residualStyles;if(null===s)0===(r?e.classBindings:e.styleBindings)&&(n=no(n=Ed(null,t,e,n,r),e.attrs,r),i=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==s)if(n=Ed(s,t,e,n,r),null===i){let c=function WI(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Xn(r))return t[cn(r)]}(t,e,r);void 0!==c&&Array.isArray(c)&&(c=Ed(null,t,e,c[1],r),c=no(c,e.attrs,r),function KI(t,e,n,r){t[cn(n?e.classBindings:e.styleBindings)]=r}(t,e,r,c))}else i=function JI(t,e,n){let r;const s=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<s;i++)r=no(r,t[i].hostAttrs,n);return no(r,e.attrs,n)}(t,e,r)}return void 0!==i&&(r?e.residualClasses=i:e.residualStyles=i),n}(s,i,e,r),function kI(t,e,n,r,s,i){let o=i?e.classBindings:e.styleBindings,a=cn(o),c=Xn(o);t[r]=n;let l,u=!1;if(Array.isArray(n)){const d=n;l=d[1],(null===l||As(d,l)>0)&&(u=!0)}else l=n;if(s)if(0!==c){const f=cn(t[a+1]);t[r+1]=Na(f,a),0!==f&&(t[f+1]=Bl(t[f+1],r)),t[a+1]=function Vx(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Na(a,0),0!==a&&(t[a+1]=Bl(t[a+1],r)),a=r;else t[r+1]=Na(c,0),0===a?a=r:t[c+1]=Bl(t[c+1],r),c=r;u&&(t[r+1]=jl(t[r+1])),Ty(t,l,r,!0),Ty(t,l,r,!1),function FI(t,e,n,r,s){const i=s?t.residualClasses:t.residualStyles;null!=i&&"string"==typeof e&&As(i,e)>=0&&(n[r+1]=$l(n[r+1]))}(e,l,t,r,i),o=Na(a,c),i?e.classBindings=o:e.styleBindings=o}(s,i,e,n,o,r)}}(i,t,o,r),e!==W&&it(s,o,e)&&function Uy(t,e,n,r,s,i,o,a){if(!(3&e.type))return;const c=t.data,u=c[a+1];Ka(function sm(t){return 1==(1&t)}(u)?Hy(c,e,n,s,Xn(u),o):void 0)||(Ka(i)||function rm(t){return 2==(2&t)}(u)&&(i=Hy(c,null,n,s,a,o)),function Px(t,e,n,r,s){const i=Ie(t);if(e)s?i?t.addClass(n,r):n.classList.add(r):i?t.removeClass(n,r):n.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:Rt.DashCase;if(null==s)i?t.removeStyle(n,r,o):n.style.removeProperty(r);else{const a="string"==typeof s&&s.endsWith("!important");a&&(s=s.slice(0,-10),o|=Rt.Important),i?t.setStyle(n,r,s,o):n.style.setProperty(r,s,a?"important":"")}}}(r,o,ua(dt(),n),s,i))}(i,i.data[dt()],s,s[X],t,s[o+1]=function ZI(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=he(function yr(t){return t instanceof class pg{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,n),r,o)}(t,e,null,!0),Wa}function Ed(t,e,n,r,s){let i=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(i=e[a],r=no(r,i.hostAttrs,s),i!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function no(t,e,n){const r=n?1:2;let s=-1;if(null!==e)for(let i=0;i<e.length;i++){const o=e[i];"number"==typeof o?s=o:s===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ot(t,o,!!n||e[++i]))}return void 0===t?null:t}function Hy(t,e,n,r,s,i){const o=null===e;let a;for(;s>0;){const c=t[s],u=Array.isArray(c),l=u?c[1]:c,d=null===l;let f=n[s+1];f===W&&(f=d?ve:void 0);let h=d?ll(f,r):l===r?f:void 0;if(u&&!Ka(h)&&(h=ll(c,r)),Ka(h)&&(a=h,o))return a;const y=t[s+1];s=o?cn(y):Xn(y)}if(null!==e){let c=i?e.residualClasses:e.residualStyles;null!=c&&(a=ll(c,r))}return a}function Ka(t){return void 0!==t}function ht(t,e=""){const n=M(),r=ce(),s=t+20,i=r.firstCreatePass?ks(r,s,1,e,null):r.data[s],o=n[s]=function Tl(t,e){return Ie(t)?t.createText(e):t.createTextNode(e)}(n[X],e);Oa(r,n,o,i),Pn(i,!1)}function kt(t){return Ja("",t,""),kt}function Ja(t,e,n){const r=M(),s=Hs(r,t,e,n);return s!==W&&er(r,dt(),s),Ja}const Jr=void 0;var vA=["en",[["a","p"],["AM","PM"],Jr],[["AM","PM"],Jr,Jr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jr,"{1} 'at' {0}",Jr],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function yA(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let Zs={};function lv(t){return t in Zs||(Zs[t]=ge.ng&&ge.ng.common&&ge.ng.common.locales&&ge.ng.common.locales[t]),Zs[t]}var L=(()=>((L=L||{})[L.LocaleId=0]="LocaleId",L[L.DayPeriodsFormat=1]="DayPeriodsFormat",L[L.DayPeriodsStandalone=2]="DayPeriodsStandalone",L[L.DaysFormat=3]="DaysFormat",L[L.DaysStandalone=4]="DaysStandalone",L[L.MonthsFormat=5]="MonthsFormat",L[L.MonthsStandalone=6]="MonthsStandalone",L[L.Eras=7]="Eras",L[L.FirstDayOfWeek=8]="FirstDayOfWeek",L[L.WeekendRange=9]="WeekendRange",L[L.DateFormat=10]="DateFormat",L[L.TimeFormat=11]="TimeFormat",L[L.DateTimeFormat=12]="DateTimeFormat",L[L.NumberSymbols=13]="NumberSymbols",L[L.NumberFormats=14]="NumberFormats",L[L.CurrencyCode=15]="CurrencyCode",L[L.CurrencySymbol=16]="CurrencySymbol",L[L.CurrencyName=17]="CurrencyName",L[L.Currencies=18]="Currencies",L[L.Directionality=19]="Directionality",L[L.PluralCase=20]="PluralCase",L[L.ExtraData=21]="ExtraData",L))();const Ya="en-US";let dv=Ya;class Fv{}class w1{resolveComponentFactory(e){throw function _1(t){const e=Error(`No component factory found for ${he(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let ei=(()=>{class t{}return t.NULL=new w1,t})();function D1(){return ti($e(),M())}function ti(t,e){return new _r(Gt(t,e))}let _r=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=D1,t})();class jv{}let S1=(()=>{class t{}return t.\u0275prov=Y({token:t,providedIn:"root",factory:()=>null}),t})();class nc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const I1=new nc("13.1.3"),Pd={};function rc(t,e,n,r,s=!1){for(;null!==n;){const i=e[n.index];if(null!==i&&r.push(Oe(i)),sn(i))for(let a=10;a<i.length;a++){const c=i[a],u=c[1].firstChild;null!==u&&rc(c[1],c,u,r)}const o=n.type;if(8&o)rc(t,e,n.child,r);else if(32&o){const a=Il(n,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=Gg(e,n);if(Array.isArray(a))r.push(...a);else{const c=Ki(e[16]);rc(c[1],c,a,r,!0)}}n=s?n.projectionNext:n.next}return r}class ao{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return rc(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(sn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Ol(e,r),Ca(n,r))}this._attachedToViewContainer=!1}Lg(this._lView[1],this._lView)}onDestroy(e){!function vm(t,e,n,r){const s=Am(e);null===n?s.push(r):(s.push(n),t.firstCreatePass&&Mm(t).push(r,s.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){td(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){rd(this._lView[1],this._lView,this.context)}checkNoChanges(){!function xS(t,e,n){da(!0);try{rd(t,e,n)}finally{da(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new le(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function wx(t,e){Ji(t,e,e[X],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new le(902,"");this._appRef=e}}class A1 extends ao{constructor(e){super(e),this._view=e}detectChanges(){Im(this._view)}checkNoChanges(){!function SS(t){da(!0);try{Im(t)}finally{da(!1)}}(this._view)}get context(){return null}}class Bv extends ei{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=tt(e);return new Od(n,this.ngModule)}}function $v(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const T1=new se("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Mg});class Od extends Fv{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Ux(t){return t.map($x).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return $v(this.componentDef.inputs)}get outputs(){return $v(this.componentDef.outputs)}create(e,n,r,s){const i=(s=s||this.ngModule)?function P1(t,e){return{get:(n,r,s)=>{const i=t.get(n,Pd,s);return i!==Pd||r===Pd?i:e.get(n,r,s)}}}(e,s.injector):e,o=i.get(jv,Ip),a=i.get(S1,null),c=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",l=r?function ym(t,e,n){if(Ie(t))return t.selectRootElement(e,n===Mn.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(c,r,this.componentDef.encapsulation):Pl(o.createRenderer(null,this.componentDef),u,function M1(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),d=this.componentDef.onPush?576:528,f=function Jm(t,e){return{components:[],scheduler:t||Mg,clean:IS,playerHandler:e||null,flags:0}}(),h=La(0,null,null,1,0,null,null,null,null,null),y=Yi(null,h,f,d,null,null,o,c,a,i);let _,E;fa(y);try{const S=function Wm(t,e,n,r,s,i){const o=n[1];n[20]=t;const c=ks(o,20,2,"#host",null),u=c.mergedAttrs=e.hostAttrs;null!==u&&(Ba(c,u,!0),null!==t&&(ya(s,t,u),null!==c.classes&&Ll(s,t,c.classes),null!==c.styles&&Jg(s,t,c.styles)));const l=r.createRenderer(t,e),d=Yi(n,gm(e),null,e.onPush?64:16,n[20],c,r,l,i||null,null);return o.firstCreatePass&&(wa(Ri(c,n),o,e.type),Cm(o,c),Em(c,n.length,1)),ja(n,d),n[20]=d}(l,this.componentDef,y,o,c);if(l)if(r)ya(c,l,["ng-version",I1.full]);else{const{attrs:C,classes:P}=function Hx(t){const e=[],n=[];let r=1,s=2;for(;r<t.length;){let i=t[r];if("string"==typeof i)2===s?""!==i&&e.push(i,t[++r]):8===s&&n.push(i);else{if(!an(s))break;s=i}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);C&&ya(c,l,C),P&&P.length>0&&Ll(c,l,P.join(" "))}if(E=Wu(h,20),void 0!==n){const C=E.projection=[];for(let P=0;P<this.ngContentSelectors.length;P++){const U=n[P];C.push(null!=U?Array.from(U):null)}}_=function Km(t,e,n,r,s){const i=n[1],o=function uS(t,e,n){const r=$e();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),xm(t,r,e,Fs(t,e,1,null),n));const s=Ni(e,t,r.directiveStart,r);rt(s,e);const i=Gt(r,e);return i&&rt(i,e),s}(i,n,e);if(r.components.push(o),t[8]=o,s&&s.forEach(c=>c(o,e)),e.contentQueries){const c=$e();e.contentQueries(1,o,c.directiveStart)}const a=$e();return!i.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(gr(a.index),wm(n[1],a,0,a.directiveStart,a.directiveEnd,e),Dm(e,o)),o}(S,this.componentDef,y,f,[WS]),Qi(h,y,null)}finally{ha()}return new R1(this.componentType,_,ti(E,y),y,E)}}class R1 extends class b1{}{constructor(e,n,r,s,i){super(),this.location=r,this._rootLView=s,this._tNode=i,this.instance=n,this.hostView=this.changeDetectorRef=new A1(s),this.componentType=e}get injector(){return new Cs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class tr{}class Uv{}const ni=new Map;class qv extends tr{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Bv(this);const r=Vt(e);this._bootstrapComponents=kn(r.bootstrap),this._r3Injector=Fm(e,n,[{provide:tr,useValue:this},{provide:ei,useValue:this.componentFactoryResolver}],he(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=st.THROW_IF_NOT_FOUND,r=J.Default){return e===st||e===tr||e===id?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Rd extends Uv{constructor(e){super(),this.moduleType=e,null!==Vt(e)&&function k1(t){const e=new Set;!function n(r){const s=Vt(r,!0),i=s.id;null!==i&&(function Hv(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${he(e)} vs ${he(e.name)}`)}(i,ni.get(i),r),ni.set(i,r));const o=kn(s.imports);for(const a of o)e.has(a)||(e.add(a),n(a))}(t)}(e)}create(e){return new qv(this.moduleType,e)}}function zv(t,e,n,r,s,i){const o=e+n;return it(t,o,s)?function Ln(t,e,n){return t[e]=n}(t,o+1,i?r.call(i,s):r(s)):function co(t,e){const n=t[e];return n===W?void 0:n}(t,o+1)}function Qv(t,e,n){const r=t+20,s=M(),i=function bs(t,e){return t[e]}(s,r);return function uo(t,e){return t[1].data[e].pure}(s,r)?zv(s,function lt(){const t=z.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,i.transform,n,i):i.transform(n)}function Nd(t){return e=>{setTimeout(t,void 0,e)}}const gt=class Q1 extends In{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){var s,i,o;let a=e,c=n||(()=>null),u=r;if(e&&"object"==typeof e){const d=e;a=null===(s=d.next)||void 0===s?void 0:s.bind(d),c=null===(i=d.error)||void 0===i?void 0:i.bind(d),u=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(c=Nd(c),a&&(a=Nd(a)),u&&(u=Nd(u)));const l=super.subscribe({next:a,error:c,complete:u});return e instanceof Ht&&e.add(l),l}};Symbol;let nr=(()=>{class t{}return t.__NG_ELEMENT_ID__=tM,t})();const X1=nr,eM=class extends X1{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e){const n=this._declarationTContainer.tViews,r=Yi(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const i=this._declarationLView[19];return null!==i&&(r[19]=i.createEmbeddedView(n)),Qi(n,r,e),new ao(r)}};function tM(){return function sc(t,e){return 4&t.type?new eM(e,t,ti(t,e)):null}($e(),M())}let fn=(()=>{class t{}return t.__NG_ELEMENT_ID__=nM,t})();function nM(){return function e0(t,e){let n;const r=e[t.index];if(sn(r))n=r;else{let s;if(8&t.type)s=Oe(r);else{const i=e[X];s=i.createComment("");const o=Gt(t,e);Wr(i,Pa(i,o),s,function Ax(t,e){return Ie(t)?t.nextSibling(e):e.nextSibling}(i,o),!1)}e[t.index]=n=Sm(r,e,s,t),ja(e,n)}return new Zv(n,t,e)}($e(),M())}const rM=fn,Zv=class extends rM{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ti(this._hostTNode,this._hostLView)}get injector(){return new Cs(this._hostTNode,this._hostLView)}get parentInjector(){const e=_a(this._hostTNode,this._hostLView);if(Vp(e)){const n=Ds(e,this._hostLView),r=ws(e);return new Cs(n[1].data[r+8],n)}return new Cs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=Xv(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){const s=e.createEmbeddedView(n||{});return this.insert(s,r),s}createComponent(e,n,r,s,i){const o=e&&!function Li(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const d=n||{};a=d.index,r=d.injector,s=d.projectableNodes,i=d.ngModuleRef}const c=o?e:new Od(tt(e)),u=r||this.parentInjector;if(!i&&null==c.ngModule&&u){const d=u.get(tr,null);d&&(i=d)}const l=c.create(u,s,void 0,i);return this.insert(l.hostView,a),l}insert(e,n){const r=e._lView,s=r[1];if(function vC(t){return sn(t[3])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const d=r[3],f=new Zv(d,d[6],d[3]);f.detach(f.indexOf(e))}}const i=this._adjustIndex(n),o=this._lContainer;!function Cx(t,e,n,r){const s=10+r,i=n.length;r>0&&(n[s-1][4]=e),r<i-10?(e[4]=n[s],Xp(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function Ex(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(s,r,o,i);const a=kl(i,o),c=r[X],u=Pa(c,o[7]);return null!==u&&function _x(t,e,n,r,s,i){r[0]=s,r[6]=e,Ji(t,r,n,1,s,i)}(s,o[6],c,r,u,a),e.attachToViewContainerRef(),Xp(Fd(o),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=Xv(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Ol(this._lContainer,n);r&&(Ca(Fd(this._lContainer),n),Lg(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Ol(this._lContainer,n);return r&&null!=Ca(Fd(this._lContainer),n)?new ao(r):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function Xv(t){return t[8]}function Fd(t){return t[8]||(t[8]=[])}function ac(...t){}const cc=new se("Application Initializer");let si=(()=>{class t{constructor(n){this.appInits=n,this.resolve=ac,this.reject=ac,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,s)=>{this.resolve=r,this.reject=s})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let s=0;s<this.appInits.length;s++){const i=this.appInits[s]();if(za(i))n.push(i);else if(vy(i)){const o=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});n.push(o)}}Promise.all(n).then(()=>{r()}).catch(s=>{this.reject(s)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(H(cc,8))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();const fo=new se("AppId"),PM={provide:fo,useFactory:function TM(){return`${Yd()}${Yd()}${Yd()}`},deps:[]};function Yd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const C0=new se("Platform Initializer"),uc=new se("Platform ID"),E0=new se("appBootstrapListener");let x0=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();const wr=new se("LocaleId"),S0=new se("DefaultCurrencyCode");class OM{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let lc=(()=>{class t{compileModuleSync(n){return new Rd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),i=kn(Vt(n).declarations).reduce((o,a)=>{const c=tt(a);return c&&o.push(new Od(c)),o},[]);return new OM(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();const NM=(()=>Promise.resolve(0))();function Qd(t){"undefined"==typeof Zone?NM.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ve{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gt(!1),this.onMicrotaskEmpty=new gt(!1),this.onStable=new gt(!1),this.onError=new gt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&n,s.shouldCoalesceRunChangeDetection=r,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function kM(){let t=ge.requestAnimationFrame,e=ge.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function jM(t){const e=()=>{!function LM(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ge,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Xd(t),t.isCheckStableRunning=!0,Zd(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Xd(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,s,i,o,a)=>{try{return I0(t),n.invokeTask(s,i,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||t.shouldCoalesceRunChangeDetection)&&e(),A0(t)}},onInvoke:(n,r,s,i,o,a,c)=>{try{return I0(t),n.invoke(s,i,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),A0(t)}},onHasTask:(n,r,s,i)=>{n.hasTask(s,i),r===s&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Xd(t),Zd(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,s,i)=>(n.handleError(s,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(s)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ve.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ve.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,s){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+s,e,FM,ac,ac);try{return i.runTask(o,n,r)}finally{i.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const FM={};function Zd(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Xd(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function I0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function A0(t){t._nesting--,Zd(t)}class BM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gt,this.onMicrotaskEmpty=new gt,this.onStable=new gt,this.onError=new gt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,s){return e.apply(n,r)}}let ef=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ve.assertNotInAngularZone(),Qd(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Qd(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,s){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==i),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:i,updateCb:s})}whenStable(n,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,s){return[]}}return t.\u0275fac=function(n){return new(n||t)(H(Ve))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})(),M0=(()=>{class t{constructor(){this._applications=new Map,tf.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return tf.findTestabilityInTree(this,n,r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();class $M{addToWindow(e){}findTestabilityInTree(e,n,r){return null}}let hn,tf=new $M;const T0=new se("AllowMultipleToken");class P0{constructor(e,n){this.name=e,this.token=n}}function O0(t,e,n=[]){const r=`Platform: ${e}`,s=new se(r);return(i=[])=>{let o=R0();if(!o||o.injector.get(T0,!1))if(t)t(n.concat(i).concat({provide:s,useValue:!0}));else{const a=n.concat(i).concat({provide:s,useValue:!0},{provide:od,useValue:"platform"});!function qM(t){if(hn&&!hn.destroyed&&!hn.injector.get(T0,!1))throw new le(400,"");hn=t.get(N0);const e=t.get(C0,null);e&&e.forEach(n=>n())}(st.create({providers:a,name:r}))}return function zM(t){const e=R0();if(!e)throw new le(401,"");return e}()}}function R0(){return hn&&!hn.destroyed?hn:null}let N0=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const a=function GM(t,e){let n;return n="noop"===t?new BM:("zone.js"===t?void 0:t)||new Ve({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),c=[{provide:Ve,useValue:a}];return a.run(()=>{const u=st.create({providers:c,parent:this.injector,name:n.moduleType.name}),l=n.create(u),d=l.injector.get(Os,null);if(!d)throw new le(402,"");return a.runOutsideAngular(()=>{const f=a.onError.subscribe({next:h=>{d.handleError(h)}});l.onDestroy(()=>{nf(this._modules,l),f.unsubscribe()})}),function WM(t,e,n){try{const r=n();return za(r)?r.catch(s=>{throw e.runOutsideAngular(()=>t.handleError(s)),s}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(d,a,()=>{const f=l.injector.get(si);return f.runInitializers(),f.donePromise.then(()=>(function CA(t){Mt(t,"Expected localeId to be defined"),"string"==typeof t&&(dv=t.toLowerCase().replace(/_/g,"-"))}(l.injector.get(wr,Ya)||Ya),this._moduleDoBootstrap(l),l))})})}bootstrapModule(n,r=[]){const s=k0({},r);return function HM(t,e,n){const r=new Rd(n);return Promise.resolve(r)}(0,0,n).then(i=>this.bootstrapModuleFactory(i,s))}_moduleDoBootstrap(n){const r=n.injector.get(ho);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(s=>r.bootstrap(s));else{if(!n.instance.ngDoBootstrap)throw new le(403,"");n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new le(404,"");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(H(st))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();function k0(t,e){return Array.isArray(e)?e.reduce(k0,t):Object.assign(Object.assign({},t),e)}let ho=(()=>{class t{constructor(n,r,s,i,o){this._zone=n,this._injector=r,this._exceptionHandler=s,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new Ce(u=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{u.next(this._stable),u.complete()})}),c=new Ce(u=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Ve.assertNotInAngularZone(),Qd(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,u.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Ve.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{u.next(!1)}))});return()=>{l.unsubscribe(),d.unsubscribe()}});this.isStable=function $D(...t){const e=xi(t),n=function RD(t,e){return"number"==typeof Mu(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?zn(r[0]):Ei(n)(Ze(r,e)):Wn}(a,c.pipe(function UD(t={}){const{connector:e=(()=>new In),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:s=!0}=t;return i=>{let o=null,a=null,c=null,u=0,l=!1,d=!1;const f=()=>{null==a||a.unsubscribe(),a=null},h=()=>{f(),o=c=null,l=d=!1},y=()=>{const _=o;h(),null==_||_.unsubscribe()};return Ye((_,E)=>{u++,!d&&!l&&f();const S=c=null!=c?c:e();E.add(()=>{u--,0===u&&!d&&!l&&(a=Tu(y,s))}),S.subscribe(E),o||(o=new Eu({next:C=>S.next(C),error:C=>{d=!0,f(),a=Tu(h,n,C),S.error(C)},complete:()=>{l=!0,f(),a=Tu(h,r),S.complete()}}),Ze(_).subscribe(o))})(i)}}()))}bootstrap(n,r){if(!this._initStatus.done)throw new le(405,"");let s;s=n instanceof Fv?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(s.componentType);const i=function VM(t){return t.isBoundToModule}(s)?void 0:this._injector.get(tr),a=s.create(st.NULL,[],r||s.selector,i),c=a.location.nativeElement,u=a.injector.get(ef,null),l=u&&a.injector.get(M0);return u&&l&&l.registerApplication(c,u),a.onDestroy(()=>{this.detachView(a.hostView),nf(this.components,a),l&&l.unregisterApplication(c)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new le(101,"");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;nf(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(E0,[]).concat(this._bootstrapListeners).forEach(s=>s(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(H(Ve),H(st),H(Os),H(ei),H(si))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();function nf(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let L0=!0,rf=(()=>{class t{}return t.__NG_ELEMENT_ID__=YM,t})();function YM(t){return function QM(t,e,n){if(aa(t)&&!n){const r=Pt(t.index,e);return new ao(r,r)}return 47&t.type?new ao(e[16],e):null}($e(),M(),16==(16&t))}class q0{constructor(){}supports(e){return Xi(e)}create(e){return new rT(e)}}const nT=(t,e)=>e;class rT{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||nT}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,s=0,i=null;for(;n||r;){const o=!r||n&&n.currentIndex<G0(r,s,i)?n:r,a=G0(o,s,i),c=o.currentIndex;if(o===r)s--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)s++;else{i||(i=[]);const u=a-s,l=c-s;if(u!=l){for(let f=0;f<u;f++){const h=f<i.length?i[f]:i[f]=0,y=h+f;l<=y&&y<u&&(i[f]=h+1)}i[o.previousIndex]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Xi(e))throw new le(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let s,i,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],o=this._trackByFn(a,i),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,i,o,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)):(n=this._mismatch(n,i,o,a),r=!0),n=n._next}else s=0,function rI(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[$s()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(s,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,s)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,s),r=!0),n=n._next,s++}),this.length=s;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,s){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,i,s)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,s))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,i,s)):e=this._addAfter(new sT(n,r),i,s),e}_verifyReinsertion(e,n,r,s){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?e=this._reinsertAfter(i,e._prev,s):e.currentIndex!=s&&(e.currentIndex=s,this._addToMoves(e,s)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const s=e._prevRemoved,i=e._nextRemoved;return null===s?this._removalsHead=i:s._nextRemoved=i,null===i?this._removalsTail=s:i._prevRemoved=s,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const s=null===n?this._itHead:n._next;return e._next=s,e._prev=n,null===s?this._itTail=e:s._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new z0),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new z0),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class sT{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class iT{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class z0{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new iT,this.map.set(n,r)),r.add(e)}get(e,n){const s=this.map.get(e);return s?s.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function G0(t,e,n){const r=t.previousIndex;if(null===r)return r;let s=0;return n&&r<n.length&&(s=n[r]),r+e+s}class W0{constructor(){}supports(e){return e instanceof Map||fd(e)}create(){return new oT}}class oT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||fd(e)))throw new le(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,s)=>{if(n&&n.key===s)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const i=this._getOrCreateRecordForKey(s,r);n=this._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const s=this._records.get(e);this._maybeAddToChanges(s,n);const i=s._prev,o=s._next;return i&&(i._next=o),o&&(o._prev=i),s._next=null,s._prev=null,s}const r=new aT(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class aT{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function K0(){return new po([new q0])}let po=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const s=r.factories.slice();n=n.concat(s)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||K0()),deps:[[t,new Ms,new Rn]]}}find(n){const r=this.factories.find(s=>s.supports(n));if(null!=r)return r;throw new le(901,"")}}return t.\u0275prov=Y({token:t,providedIn:"root",factory:K0}),t})();function J0(){return new ii([new W0])}let ii=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(r){const s=r.factories.slice();n=n.concat(s)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||J0()),deps:[[t,new Ms,new Rn]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new le(901,"")}}return t.\u0275prov=Y({token:t,providedIn:"root",factory:J0}),t})();const cT=[new W0],lT=new po([new q0]),dT=new ii(cT),fT=O0(null,"core",[{provide:uc,useValue:"unknown"},{provide:N0,deps:[st]},{provide:M0,deps:[]},{provide:x0,deps:[]}]),yT=[{provide:ho,useClass:ho,deps:[Ve,st,Os,ei,si]},{provide:T1,deps:[Ve],useFactory:function vT(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(n){e.push(n)}}},{provide:si,useClass:si,deps:[[new Rn,cc]]},{provide:lc,useClass:lc,deps:[]},PM,{provide:po,useFactory:function hT(){return lT},deps:[]},{provide:ii,useFactory:function pT(){return dT},deps:[]},{provide:wr,useFactory:function gT(t){return t||function mT(){return"undefined"!=typeof $localize&&$localize.locale||Ya}()},deps:[[new Hi(wr),new Rn,new Ms]]},{provide:S0,useValue:"USD"}];let bT=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(H(ho))},t.\u0275mod=Yn({type:t}),t.\u0275inj=An({providers:yT}),t})(),fc=null;function Dr(){return fc}const Ft=new se("DocumentToken");let Qr=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Y({token:t,factory:function(){return function CT(){return H(Y0)}()},providedIn:"platform"}),t})();const ET=new se("Location Initialized");let Y0=(()=>{class t extends Qr{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Dr().getBaseHref(this._doc)}onPopState(n){const r=Dr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Dr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,s){Q0()?this._history.pushState(n,r,s):this.location.hash=s}replaceState(n,r,s){Q0()?this._history.replaceState(n,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(H(Ft))},t.\u0275prov=Y({token:t,factory:function(){return function xT(){return new Y0(H(Ft))}()},providedIn:"platform"}),t})();function Q0(){return!!window.history.pushState}function uf(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Z0(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function rr(t){return t&&"?"!==t[0]?"?"+t:t}let oi=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Y({token:t,factory:function(){return function ST(t){const e=H(Ft).location;return new X0(H(Qr),e&&e.origin||"")}()},providedIn:"root"}),t})();const lf=new se("appBaseHref");let X0=(()=>{class t extends oi{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return uf(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+rr(this._platformLocation.search),s=this._platformLocation.hash;return s&&n?`${r}${s}`:r}pushState(n,r,s,i){const o=this.prepareExternalUrl(s+rr(i));this._platformLocation.pushState(n,r,o)}replaceState(n,r,s,i){const o=this.prepareExternalUrl(s+rr(i));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,n)}}return t.\u0275fac=function(n){return new(n||t)(H(Qr),H(lf,8))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})(),IT=(()=>{class t extends oi{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=uf(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,s,i){let o=this.prepareExternalUrl(s+rr(i));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,s,i){let o=this.prepareExternalUrl(s+rr(i));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,n)}}return t.\u0275fac=function(n){return new(n||t)(H(Qr),H(lf,8))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})(),df=(()=>{class t{constructor(n,r){this._subject=new gt,this._urlChangeListeners=[],this._platformStrategy=n;const s=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Z0(eb(s)),this._platformStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+rr(r))}normalize(n){return t.stripTrailingSlash(function MT(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,eb(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,r="",s=null){this._platformStrategy.pushState(s,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+rr(r)),s)}replaceState(n,r="",s=null){this._platformStrategy.replaceState(s,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+rr(r)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var r,s;null===(s=(r=this._platformStrategy).historyGo)||void 0===s||s.call(r,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(s=>s(n,r))}subscribe(n,r,s){return this._subject.subscribe({next:n,error:r,complete:s})}}return t.normalizeQueryParams=rr,t.joinWithSlash=uf,t.stripTrailingSlash=Z0,t.\u0275fac=function(n){return new(n||t)(H(oi),H(Qr))},t.\u0275prov=Y({token:t,factory:function(){return function AT(){return new df(H(oi),H(Qr))}()},providedIn:"root"}),t})();function eb(t){return t.replace(/\/index.html$/,"")}var Fe=(()=>((Fe=Fe||{})[Fe.Zero=0]="Zero",Fe[Fe.One=1]="One",Fe[Fe.Two=2]="Two",Fe[Fe.Few=3]="Few",Fe[Fe.Many=4]="Many",Fe[Fe.Other=5]="Other",Fe))();const FT=function uv(t){return function pt(t){const e=function bA(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=lv(e);if(n)return n;const r=e.split("-")[0];if(n=lv(r),n)return n;if("en"===r)return vA;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[L.PluralCase]};class Dc{}let dP=(()=>{class t extends Dc{constructor(n){super(),this.locale=n}getPluralCategory(n,r){switch(FT(r||this.locale)(n)){case Fe.Zero:return"zero";case Fe.One:return"one";case Fe.Two:return"two";case Fe.Few:return"few";case Fe.Many:return"many";default:return"other"}}}return t.\u0275fac=function(n){return new(n||t)(H(wr))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();function ub(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[s,i]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(s.trim()===e)return decodeURIComponent(i)}return null}class pP{constructor(e,n,r,s){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let lb=(()=>{class t{constructor(n,r,s){this._viewContainer=n,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((s,i,o)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new pP(s.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,o),db(a,s)}});for(let s=0,i=r.length;s<i;s++){const a=r.get(s).context;a.index=s,a.count=i,a.ngForOf=this._ngForOf}n.forEachIdentityChange(s=>{db(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)($(fn),$(nr),$(po))},t.\u0275dir=et({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function db(t,e){t.context.$implicit=e.item}const AP=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let pb=(()=>{class t{transform(n){if(null==n)return null;if("string"!=typeof n)throw function gn(t,e){return new le(2100,"")}();return n.replace(AP,r=>r[0].toUpperCase()+r.substr(1).toLowerCase())}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=bt({name:"titlecase",type:t,pure:!0}),t})(),HP=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yn({type:t}),t.\u0275inj=An({providers:[{provide:Dc,useClass:dP}]}),t})();let GP=(()=>{class t{}return t.\u0275prov=Y({token:t,providedIn:"root",factory:()=>new WP(H(Ft),window)}),t})();class WP{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function KP(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const i=s.shadowRoot;if(i){const o=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(o)return o}s=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,s=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],s-i[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=yb(this.window.history)||yb(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function yb(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class vb{}class Ef extends class JP extends class DT{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function wT(t){fc||(fc=t)}(new Ef)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function YP(){return yo=yo||document.querySelector("base"),yo?yo.getAttribute("href"):null}();return null==n?null:function QP(t){Cc=Cc||document.createElement("a"),Cc.setAttribute("href",t);const e=Cc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){yo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ub(document.cookie,e)}}let Cc,yo=null;const bb=new se("TRANSITION_ID"),XP=[{provide:cc,useFactory:function ZP(t,e,n){return()=>{n.get(si).donePromise.then(()=>{const r=Dr(),s=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let i=0;i<s.length;i++)r.remove(s[i])})}},deps:[bb,Ft,st],multi:!0}];class xf{static init(){!function UM(t){tf=t}(new xf)}addToWindow(e){ge.getAngularTestability=(r,s=!0)=>{const i=e.findTestabilityInTree(r,s);if(null==i)throw new Error("Could not find testability for element.");return i},ge.getAllAngularTestabilities=()=>e.getAllTestabilities(),ge.getAllAngularRootElements=()=>e.getAllRootElements(),ge.frameworkStabilizers||(ge.frameworkStabilizers=[]),ge.frameworkStabilizers.push(r=>{const s=ge.getAllAngularTestabilities();let i=s.length,o=!1;const a=function(c){o=o||c,i--,0==i&&r(o)};s.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const s=e.getTestability(n);return null!=s?s:r?Dr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let eO=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();const Ec=new se("EventManagerPlugins");let xc=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(s=>s.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,s){return this._findPluginFor(r).addEventListener(n,r,s)}addGlobalEventListener(n,r,s){return this._findPluginFor(r).addGlobalEventListener(n,r,s)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const s=this._plugins;for(let i=0;i<s.length;i++){const o=s[i];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(H(Ec),H(Ve))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();class _b{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const s=Dr().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${n}`);return this.addEventListener(s,n,r)}}let wb=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})(),vo=(()=>{class t extends wb{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,s){n.forEach(i=>{const o=this._doc.createElement("style");o.textContent=i,s.push(r.appendChild(o))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(Db),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(n,s,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(Db))}}return t.\u0275fac=function(n){return new(n||t)(H(Ft))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();function Db(t){Dr().remove(t)}const Sf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},If=/%COMP%/g;function Sc(t,e,n){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Sc(t,s,n):(s=s.replace(If,t),n.push(s))}return n}function xb(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Af=(()=>{class t{constructor(n,r,s){this.eventManager=n,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Mf(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case Mn.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new oO(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(n),s}case 1:case Mn.ShadowDom:return new aO(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const s=Sc(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(H(xc),H(vo),H(fo))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();class Mf{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(Sf[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,r){e&&e.insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,s){if(s){n=s+":"+n;const i=Sf[s];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const s=Sf[r];s?e.removeAttributeNS(s,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,s){s&(Rt.DashCase|Rt.Important)?e.style.setProperty(n,r,s&Rt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Rt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,xb(r)):this.eventManager.addEventListener(e,n,xb(r))}}class oO extends Mf{constructor(e,n,r,s){super(e),this.component=r;const i=Sc(s+"-"+r.id,r.styles,[]);n.addStyles(i),this.contentAttr=function rO(t){return"_ngcontent-%COMP%".replace(If,t)}(s+"-"+r.id),this.hostAttr=function sO(t){return"_nghost-%COMP%".replace(If,t)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class aO extends Mf{constructor(e,n,r,s){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Sc(s.id,s.styles,[]);for(let o=0;o<i.length;o++){const a=document.createElement("style");a.textContent=i[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let cO=(()=>{class t extends _b{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,s){return n.addEventListener(r,s,!1),()=>this.removeEventListener(n,r,s)}removeEventListener(n,r,s){return n.removeEventListener(r,s)}}return t.\u0275fac=function(n){return new(n||t)(H(Ft))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();const Ib=["alt","control","meta","shift"],lO={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ab={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},dO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let fO=(()=>{class t extends _b{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,s){const i=t.parseEventName(r),o=t.eventCallback(i.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dr().onAndCancel(n,i.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const i=t._normalizeKey(r.pop());let o="";if(Ib.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=i,0!=r.length||0===i.length)return null;const a={};return a.domEventName=s,a.fullKey=o,a}static getEventFullKey(n){let r="",s=function hO(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Ab.hasOwnProperty(e)&&(e=Ab[e]))}return lO[e]||e}(n);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Ib.forEach(i=>{i!=s&&dO[i](n)&&(r+=i+".")}),r+=s,r}static eventCallback(n,r,s){return i=>{t.getEventFullKey(i)===n&&s.runGuarded(()=>r(i))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(H(Ft))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();const yO=O0(fT,"browser",[{provide:uc,useValue:"browser"},{provide:C0,useValue:function pO(){Ef.makeCurrent(),xf.init()},multi:!0},{provide:Ft,useFactory:function mO(){return function pC(t){zu=t}(document),document},deps:[]}]),vO=[{provide:od,useValue:"root"},{provide:Os,useFactory:function gO(){return new Os},deps:[]},{provide:Ec,useClass:cO,multi:!0,deps:[Ft,Ve,uc]},{provide:Ec,useClass:fO,multi:!0,deps:[Ft]},{provide:Af,useClass:Af,deps:[xc,vo,fo]},{provide:jv,useExisting:Af},{provide:wb,useExisting:vo},{provide:vo,useClass:vo,deps:[Ft]},{provide:ef,useClass:ef,deps:[Ve]},{provide:xc,useClass:xc,deps:[Ec,Ve]},{provide:vb,useClass:eO,deps:[]}];let bO=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:fo,useValue:n.appId},{provide:bb,useExisting:fo},XP]}}}return t.\u0275fac=function(n){return new(n||t)(H(t,12))},t.\u0275mod=Yn({type:t}),t.\u0275inj=An({providers:vO,imports:[HP,bT]}),t})();function Q(...t){return Ze(t,xi(t))}function ai(t,e){return ue(e)?Ge(t,e,1):Ge(t,1)}function Zr(t,e){return Ye((n,r)=>{let s=0;n.subscribe(new Qe(r,i=>t.call(e,i,s++)&&r.next(i)))})}"undefined"!=typeof window&&window;class Pb{}class Ob{}class mn{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const s=n.slice(0,r),i=s.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(s,i),this.headers.has(i)?this.headers.get(i).push(o):this.headers.set(i,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(n=>{let r=e[n];const s=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(s,r),this.maybeSetNormalizedName(n,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof mn?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new mn;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof mn?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const s=("a"===e.op?this.headers.get(n):void 0)||[];s.push(...r),this.headers.set(n,s);break;case"d":const i=e.value;if(i){let o=this.headers.get(n);if(!o)return;o=o.filter(a=>-1===i.indexOf(a)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class TO{encodeKey(e){return Rb(e)}encodeValue(e){return Rb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const OO=/%(\d[a-f0-9])/gi,RO={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Rb(t){return encodeURIComponent(t).replace(OO,(e,n)=>{var r;return null!==(r=RO[n])&&void 0!==r?r:e})}function Nb(t){return`${t}`}class Er{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new TO,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function PO(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(s=>{const i=s.indexOf("="),[o,a]=-1==i?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,i)),e.decodeValue(s.slice(i+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n];this.map.set(n,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(i=>{n.push({param:r,value:i,op:"a"})}):n.push({param:r,value:s,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new Er({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(Nb(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(Nb(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class NO{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function kb(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Fb(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Lb(t){return"undefined"!=typeof FormData&&t instanceof FormData}class bo{constructor(e,n,r,s){let i;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function kO(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,i=s):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new mn),this.context||(this.context=new NO),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new Er,this.urlWithParams=n}serializeBody(){return null===this.body?null:kb(this.body)||Fb(this.body)||Lb(this.body)||function FO(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Er?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Lb(this.body)?null:Fb(this.body)?this.body.type||null:kb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Er?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var n;const r=e.method||this.method,s=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,c=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,l=e.params||this.params;const d=null!==(n=e.context)&&void 0!==n?n:this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((f,h)=>f.set(h,e.setHeaders[h]),u)),e.setParams&&(l=Object.keys(e.setParams).reduce((f,h)=>f.set(h,e.setParams[h]),l)),new bo(r,s,o,{params:l,headers:u,context:d,reportProgress:c,responseType:i,withCredentials:a})}}var je=(()=>((je=je||{})[je.Sent=0]="Sent",je[je.UploadProgress=1]="UploadProgress",je[je.ResponseHeader=2]="ResponseHeader",je[je.DownloadProgress=3]="DownloadProgress",je[je.Response=4]="Response",je[je.User=5]="User",je))();class Pf{constructor(e,n=200,r="OK"){this.headers=e.headers||new mn,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Of extends Pf{constructor(e={}){super(e),this.type=je.ResponseHeader}clone(e={}){return new Of({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ic extends Pf{constructor(e={}){super(e),this.type=je.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ic({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class jb extends Pf{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Rf(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Nf=(()=>{class t{constructor(n){this.handler=n}request(n,r,s={}){let i;if(n instanceof bo)i=n;else{let c,u;c=s.headers instanceof mn?s.headers:new mn(s.headers),s.params&&(u=s.params instanceof Er?s.params:new Er({fromObject:s.params})),i=new bo(n,r,void 0!==s.body?s.body:null,{headers:c,context:s.context,params:u,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const o=Q(i).pipe(ai(c=>this.handler.handle(c)));if(n instanceof bo||"events"===s.observe)return o;const a=o.pipe(Zr(c=>c instanceof Ic));switch(s.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(fe(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(fe(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(fe(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(fe(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new Er).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,s={}){return this.request("PATCH",n,Rf(s,r))}post(n,r,s={}){return this.request("POST",n,Rf(s,r))}put(n,r,s={}){return this.request("PUT",n,Rf(s,r))}}return t.\u0275fac=function(n){return new(n||t)(H(Pb))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();class Bb{constructor(e,n){this.next=e,this.interceptor=n}handle(e){return this.interceptor.intercept(e,this.next)}}const $b=new se("HTTP_INTERCEPTORS");let LO=(()=>{class t{intercept(n,r){return r.handle(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();const jO=/^\)\]\}',?\n/;let Ub=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ce(r=>{const s=this.xhrFactory.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((h,y)=>s.setRequestHeader(h,y.join(","))),n.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const h=n.detectContentTypeHeader();null!==h&&s.setRequestHeader("Content-Type",h)}if(n.responseType){const h=n.responseType.toLowerCase();s.responseType="json"!==h?h:"text"}const i=n.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const h=1223===s.status?204:s.status,y=s.statusText||"OK",_=new mn(s.getAllResponseHeaders()),E=function BO(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(s)||n.url;return o=new Of({headers:_,status:h,statusText:y,url:E}),o},c=()=>{let{headers:h,status:y,statusText:_,url:E}=a(),S=null;204!==y&&(S=void 0===s.response?s.responseText:s.response),0===y&&(y=S?200:0);let C=y>=200&&y<300;if("json"===n.responseType&&"string"==typeof S){const P=S;S=S.replace(jO,"");try{S=""!==S?JSON.parse(S):null}catch(U){S=P,C&&(C=!1,S={error:U,text:S})}}C?(r.next(new Ic({body:S,headers:h,status:y,statusText:_,url:E||void 0})),r.complete()):r.error(new jb({error:S,headers:h,status:y,statusText:_,url:E||void 0}))},u=h=>{const{url:y}=a(),_=new jb({error:h,status:s.status||0,statusText:s.statusText||"Unknown Error",url:y||void 0});r.error(_)};let l=!1;const d=h=>{l||(r.next(a()),l=!0);let y={type:je.DownloadProgress,loaded:h.loaded};h.lengthComputable&&(y.total=h.total),"text"===n.responseType&&!!s.responseText&&(y.partialText=s.responseText),r.next(y)},f=h=>{let y={type:je.UploadProgress,loaded:h.loaded};h.lengthComputable&&(y.total=h.total),r.next(y)};return s.addEventListener("load",c),s.addEventListener("error",u),s.addEventListener("timeout",u),s.addEventListener("abort",u),n.reportProgress&&(s.addEventListener("progress",d),null!==i&&s.upload&&s.upload.addEventListener("progress",f)),s.send(i),r.next({type:je.Sent}),()=>{s.removeEventListener("error",u),s.removeEventListener("abort",u),s.removeEventListener("load",c),s.removeEventListener("timeout",u),n.reportProgress&&(s.removeEventListener("progress",d),null!==i&&s.upload&&s.upload.removeEventListener("progress",f)),s.readyState!==s.DONE&&s.abort()}})}}return t.\u0275fac=function(n){return new(n||t)(H(vb))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();const kf=new se("XSRF_COOKIE_NAME"),Ff=new se("XSRF_HEADER_NAME");class Hb{}let $O=(()=>{class t{constructor(n,r,s){this.doc=n,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=ub(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return t.\u0275fac=function(n){return new(n||t)(H(Ft),H(uc),H(kf))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})(),Lf=(()=>{class t{constructor(n,r){this.tokenService=n,this.headerName=r}intercept(n,r){const s=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||s.startsWith("http://")||s.startsWith("https://"))return r.handle(n);const i=this.tokenService.getToken();return null!==i&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,i)})),r.handle(n)}}return t.\u0275fac=function(n){return new(n||t)(H(Hb),H(Ff))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})(),UO=(()=>{class t{constructor(n,r){this.backend=n,this.injector=r,this.chain=null}handle(n){if(null===this.chain){const r=this.injector.get($b,[]);this.chain=r.reduceRight((s,i)=>new Bb(s,i),this.backend)}return this.chain.handle(n)}}return t.\u0275fac=function(n){return new(n||t)(H(Ob),H(st))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})(),HO=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Lf,useClass:LO}]}}static withOptions(n={}){return{ngModule:t,providers:[n.cookieName?{provide:kf,useValue:n.cookieName}:[],n.headerName?{provide:Ff,useValue:n.headerName}:[]]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yn({type:t}),t.\u0275inj=An({providers:[Lf,{provide:$b,useExisting:Lf,multi:!0},{provide:Hb,useClass:$O},{provide:kf,useValue:"XSRF-TOKEN"},{provide:Ff,useValue:"X-XSRF-TOKEN"}]}),t})(),VO=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yn({type:t}),t.\u0275inj=An({providers:[Nf,{provide:Pb,useClass:UO},Ub,{provide:Ob,useExisting:Ub}],imports:[[HO.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();class yn extends In{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:qO}=Array,{getPrototypeOf:zO,prototype:GO,keys:WO}=Object;const{isArray:YO}=Array;function eR(...t){const e=xi(t),n=function OD(t){return ue(Mu(t))?t.pop():void 0}(t),{args:r,keys:s}=function KO(t){if(1===t.length){const e=t[0];if(qO(e))return{args:e,keys:null};if(function JO(t){return t&&"object"==typeof t&&zO(t)===GO}(e)){const n=WO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return Ze([],e);const i=new Ce(function tR(t,e,n=Br){return r=>{Vb(e,()=>{const{length:s}=t,i=new Array(s);let o=s,a=s;for(let c=0;c<s;c++)Vb(e,()=>{const u=Ze(t[c],e);let l=!1;u.subscribe(new Qe(r,d=>{i[c]=d,l||(l=!0,a--),a||r.next(n(i.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,s?o=>function XO(t,e){return t.reduce((n,r,s)=>(n[r]=e[s],n),{})}(s,o):Br));return n?i.pipe(function ZO(t){return fe(e=>function QO(t,e){return YO(e)?t(...e):t(e)}(t,e))}(n)):i}function Vb(t,e,n){t?Gn(n,t,e):e()}const Ac=It(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function jf(...t){return function nR(){return Ei(1)}()(Ze(t,xi(t)))}function qb(t){return new Ce(e=>{zn(t()).subscribe(e)})}function zb(){return Ye((t,e)=>{let n=null;t._refCount++;const r=new Qe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const s=t._connection,i=n;n=null,s&&(!i||s===i)&&s.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class rR extends Ce{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Kh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ht;const n=this.getSubject();e.add(this.source.subscribe(new Qe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ht.EMPTY)}return e}refCount(){return zb()(this)}}function Xr(t,e){return Ye((n,r)=>{let s=null,i=0,o=!1;const a=()=>o&&!s&&r.complete();n.subscribe(new Qe(r,c=>{null==s||s.unsubscribe();let u=0;const l=i++;zn(t(c,l)).subscribe(s=new Qe(r,d=>r.next(e?e(c,d,l,u++):d),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function iR(t,e,n,r,s){return(i,o)=>{let a=n,c=e,u=0;i.subscribe(new Qe(o,l=>{const d=u++;c=a?t(c,l,d):(a=!0,l),r&&o.next(c)},s&&(()=>{a&&o.next(c),o.complete()})))}}function Gb(t,e){return Ye(iR(t,e,arguments.length>=2,!0))}function xr(t){return Ye((e,n)=>{let i,r=null,s=!1;r=e.subscribe(new Qe(n,void 0,void 0,o=>{i=zn(t(o,xr(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):s=!0})),s&&(r.unsubscribe(),r=null,i.subscribe(n))})}function Bf(t){return t<=0?()=>Wn:Ye((e,n)=>{let r=[];e.subscribe(new Qe(n,s=>{r.push(s),t<r.length&&r.shift()},()=>{for(const s of r)n.next(s);n.complete()},void 0,()=>{r=null}))})}function Wb(t=oR){return Ye((e,n)=>{let r=!1;e.subscribe(new Qe(n,s=>{r=!0,n.next(s)},()=>r?n.complete():n.error(t())))})}function oR(){return new Ac}function Kb(t){return Ye((e,n)=>{let r=!1;e.subscribe(new Qe(n,s=>{r=!0,n.next(s)},()=>{r||n.next(t),n.complete()}))})}function ci(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Zr((s,i)=>t(s,i,r)):Br,ea(1),n?Kb(e):Wb(()=>new Ac))}function Lt(t,e,n){const r=ue(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ye((s,i)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;s.subscribe(new Qe(i,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),i.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),i.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),i.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):Br}class ir{constructor(e,n){this.id=e,this.url=n}}class $f extends ir{constructor(e,n,r="imperative",s=null){super(e,n),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _o extends ir{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Jb extends ir{constructor(e,n,r){super(e,n),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class uR extends ir{constructor(e,n,r){super(e,n),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class lR extends ir{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dR extends ir{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fR extends ir{constructor(e,n,r,s,i){super(e,n),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class hR extends ir{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pR extends ir{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yb{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Qb{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gR{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mR{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yR{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vR{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zb{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ne="primary";class bR{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function ui(t){return new bR(t)}const Xb="ngNavigationCancelingError";function Uf(t){const e=Error("NavigationCancelingError: "+t);return e[Xb]=!0,e}function wR(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const s={};for(let i=0;i<r.length;i++){const o=r[i],a=t[i];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:s}}function $n(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let s;for(let i=0;i<n.length;i++)if(s=n[i],!e_(t[s],e[s]))return!1;return!0}function e_(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((s,i)=>r[i]===s)}return t===e}function t_(t){return Array.prototype.concat.apply([],t)}function n_(t){return t.length>0?t[t.length-1]:null}function Xe(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Un(t){return vy(t)?t:za(t)?Ze(Promise.resolve(t)):Q(t)}const ER={exact:function i_(t,e,n){if(!ts(t.segments,e.segments)||!Mc(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!i_(t.children[r],e.children[r],n))return!1;return!0},subset:o_},r_={exact:function xR(t,e){return $n(t,e)},subset:function SR(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>e_(t[n],e[n]))},ignored:()=>!0};function s_(t,e,n){return ER[n.paths](t.root,e.root,n.matrixParams)&&r_[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function o_(t,e,n){return a_(t,e,e.segments,n)}function a_(t,e,n,r){if(t.segments.length>n.length){const s=t.segments.slice(0,n.length);return!(!ts(s,n)||e.hasChildren()||!Mc(s,n,r))}if(t.segments.length===n.length){if(!ts(t.segments,n)||!Mc(t.segments,n,r))return!1;for(const s in e.children)if(!t.children[s]||!o_(t.children[s],e.children[s],r))return!1;return!0}{const s=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!(ts(t.segments,s)&&Mc(t.segments,s,r)&&t.children[ne])&&a_(t.children[ne],e,i,r)}}function Mc(t,e,n){return e.every((r,s)=>r_[n](t[s].parameters,r.parameters))}class es{constructor(e,n,r){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ui(this.queryParams)),this._queryParamMap}toString(){return MR.serialize(this)}}class ie{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Xe(n,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tc(this)}}class wo{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=ui(this.parameters)),this._parameterMap}toString(){return f_(this)}}function ts(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}class c_{}class u_{parse(e){const n=new jR(e);return new es(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Do(e.root,!0)}`,r=function OR(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(s=>`${Pc(n)}=${Pc(s)}`).join("&"):`${Pc(n)}=${Pc(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function TR(t){return encodeURI(t)}(e.fragment)}`:""}`}}const MR=new u_;function Tc(t){return t.segments.map(e=>f_(e)).join("/")}function Do(t,e){if(!t.hasChildren())return Tc(t);if(e){const n=t.children[ne]?Do(t.children[ne],!1):"",r=[];return Xe(t.children,(s,i)=>{i!==ne&&r.push(`${i}:${Do(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function AR(t,e){let n=[];return Xe(t.children,(r,s)=>{s===ne&&(n=n.concat(e(r,s)))}),Xe(t.children,(r,s)=>{s!==ne&&(n=n.concat(e(r,s)))}),n}(t,(r,s)=>s===ne?[Do(t.children[ne],!1)]:[`${s}:${Do(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[ne]?`${Tc(t)}/${n[0]}`:`${Tc(t)}/(${n.join("//")})`}}function l_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pc(t){return l_(t).replace(/%3B/gi,";")}function Hf(t){return l_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Oc(t){return decodeURIComponent(t)}function d_(t){return Oc(t.replace(/\+/g,"%20"))}function f_(t){return`${Hf(t.path)}${function PR(t){return Object.keys(t).map(e=>`;${Hf(e)}=${Hf(t[e])}`).join("")}(t.parameters)}`}const RR=/^[^\/()?;=#]+/;function Rc(t){const e=t.match(RR);return e?e[0]:""}const NR=/^[^=?&#]+/,FR=/^[^&#]+/;class jR{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ie([],{}):new ie([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ne]=new ie(e,n)),r}parseSegment(){const e=Rc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new wo(Oc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=Rc(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=Rc(this.remaining);s&&(r=s,this.capture(r))}e[Oc(n)]=Oc(r)}parseQueryParam(e){const n=function kR(t){const e=t.match(NR);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function LR(t){const e=t.match(FR);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const s=d_(n),i=d_(r);if(e.hasOwnProperty(s)){let o=e[s];Array.isArray(o)||(o=[o],e[s]=o),o.push(i)}else e[s]=i}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Rc(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let i;r.indexOf(":")>-1?(i=r.substr(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=ne);const o=this.parseChildren();n[i]=1===Object.keys(o).length?o[ne]:new ie([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class h_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=Vf(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=Vf(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=qf(e,this._root);return n.length<2?[]:n[n.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return qf(e,this._root).map(n=>n.value)}}function Vf(t,e){if(t===e.value)return e;for(const n of e.children){const r=Vf(t,n);if(r)return r}return null}function qf(t,e){if(t===e.value)return[e];for(const n of e.children){const r=qf(t,n);if(r.length)return r.unshift(e),r}return[]}class or{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function li(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class p_ extends h_{constructor(e,n){super(e),this.snapshot=n,zf(this,e)}toString(){return this.snapshot.toString()}}function g_(t,e){const n=function BR(t,e){const o=new Nc([],{},{},"",{},ne,e,null,t.root,-1,{});return new y_("",new or(o,[]))}(t,e),r=new yn([new wo("",{})]),s=new yn({}),i=new yn({}),o=new yn({}),a=new yn(""),c=new ns(r,s,o,a,i,ne,e,n.root);return c.snapshot=n.root,new p_(new or(c,[]),n)}class ns{constructor(e,n,r,s,i,o,a,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(fe(e=>ui(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(fe(e=>ui(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function m_(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const s=n[r],i=n[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(i.component)break;r--}}return function $R(t){return t.reduce((e,n)=>({params:Object.assign(Object.assign({},e.params),n.params),data:Object.assign(Object.assign({},e.data),n.data),resolve:Object.assign(Object.assign({},e.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Nc{constructor(e,n,r,s,i,o,a,c,u,l,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this.routeConfig=c,this._urlSegment=u,this._lastPathIndex=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ui(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ui(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class y_ extends h_{constructor(e,n){super(n),this.url=e,zf(this,n)}toString(){return v_(this._root)}}function zf(t,e){e.value._routerState=t,e.children.forEach(n=>zf(t,n))}function v_(t){const e=t.children.length>0?` { ${t.children.map(v_).join(", ")} } `:"";return`${t.value}${e}`}function Gf(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,$n(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),$n(e.params,n.params)||t.params.next(n.params),function DR(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!$n(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),$n(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Wf(t,e){const n=$n(t.params,e.params)&&function IR(t,e){return ts(t,e)&&t.every((n,r)=>$n(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Wf(t.parent,e.parent))}function Co(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const s=function HR(t,e,n){return e.children.map(r=>{for(const s of n.children)if(t.shouldReuseRoute(r.value,s.value.snapshot))return Co(t,r,s);return Co(t,r)})}(t,e,n);return new or(r,s)}{if(t.shouldAttach(e.value)){const i=t.retrieve(e.value);if(null!==i){const o=i.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Co(t,a)),o}}const r=function VR(t){return new ns(new yn(t.url),new yn(t.params),new yn(t.queryParams),new yn(t.fragment),new yn(t.data),t.outlet,t.component,t)}(e.value),s=e.children.map(i=>Co(t,i));return new or(r,s)}}function kc(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Eo(t){return"object"==typeof t&&null!=t&&t.outlets}function Kf(t,e,n,r,s){let i={};return r&&Xe(r,(o,a)=>{i[a]=Array.isArray(o)?o.map(c=>`${c}`):`${o}`}),new es(n.root===t?e:b_(n.root,t,e),i,s)}function b_(t,e,n){const r={};return Xe(t.children,(s,i)=>{r[i]=s===e?n:b_(s,e,n)}),new ie(t.segments,r)}class __{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&kc(r[0]))throw new Error("Root segment cannot have matrix parameters");const s=r.find(Eo);if(s&&s!==n_(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Jf{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function w_(t,e,n){if(t||(t=new ie([],{})),0===t.segments.length&&t.hasChildren())return Fc(t,e,n);const r=function JR(t,e,n){let r=0,s=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;s<t.segments.length;){if(r>=n.length)return i;const o=t.segments[s],a=n[r];if(Eo(a))break;const c=`${a}`,u=r<n.length-1?n[r+1]:null;if(s>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!C_(c,u,o))return i;r+=2}else{if(!C_(c,{},o))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(t,e,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const i=new ie(t.segments.slice(0,r.pathIndex),{});return i.children[ne]=new ie(t.segments.slice(r.pathIndex),t.children),Fc(i,0,s)}return r.match&&0===s.length?new ie(t.segments,{}):r.match&&!t.hasChildren()?Yf(t,e,n):r.match?Fc(t,0,s):Yf(t,e,n)}function Fc(t,e,n){if(0===n.length)return new ie(t.segments,{});{const r=function KR(t){return Eo(t[0])?t[0].outlets:{[ne]:t}}(n),s={};return Xe(r,(i,o)=>{"string"==typeof i&&(i=[i]),null!==i&&(s[o]=w_(t.children[o],e,i))}),Xe(t.children,(i,o)=>{void 0===r[o]&&(s[o]=i)}),new ie(t.segments,s)}}function Yf(t,e,n){const r=t.segments.slice(0,e);let s=0;for(;s<n.length;){const i=n[s];if(Eo(i)){const c=YR(i.outlets);return new ie(r,c)}if(0===s&&kc(n[0])){r.push(new wo(t.segments[e].path,D_(n[0]))),s++;continue}const o=Eo(i)?i.outlets[ne]:`${i}`,a=s<n.length-1?n[s+1]:null;o&&a&&kc(a)?(r.push(new wo(o,D_(a))),s+=2):(r.push(new wo(o,{})),s++)}return new ie(r,{})}function YR(t){const e={};return Xe(t,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[r]=Yf(new ie([],{}),0,n))}),e}function D_(t){const e={};return Xe(t,(n,r)=>e[r]=`${n}`),e}function C_(t,e,n){return t==n.path&&$n(e,n.parameters)}class ZR{constructor(e,n,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Gf(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const s=li(n);e.children.forEach(i=>{const o=i.value.outlet;this.deactivateRoutes(i,s[o],r),delete s[o]}),Xe(s,(i,o)=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){const s=e.value,i=n?n.value:null;if(s===i)if(s.component){const o=r.getContext(s.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),s=r&&e.value.component?r.children:n,i=li(e);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],s);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),s=r&&e.value.component?r.children:n,i=li(e);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,n,r){const s=li(n);e.children.forEach(i=>{this.activateRoutes(i,s[i.value.outlet],r),this.forwardEvent(new vR(i.value.snapshot))}),e.children.length&&this.forwardEvent(new mR(e.value.snapshot))}activateRoutes(e,n,r){const s=e.value,i=n?n.value:null;if(Gf(s),s===i)if(s.component){const o=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(s.component){const o=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Gf(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function XR(t){for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(s.snapshot),c=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=s,o.resolver=c,o.outlet&&o.outlet.activateWith(s,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class Qf{constructor(e,n){this.routes=e,this.module=n}}function Sr(t){return"function"==typeof t}function rs(t){return t instanceof es}const xo=Symbol("INITIAL_VALUE");function So(){return Xr(t=>eR(t.map(e=>e.pipe(ea(1),function sR(...t){const e=xi(t);return Ye((n,r)=>{(e?jf(t,n,e):jf(t,n)).subscribe(r)})}(xo)))).pipe(Gb((e,n)=>{let r=!1;return n.reduce((s,i,o)=>s!==xo?s:(i===xo&&(r=!0),r||!1!==i&&o!==n.length-1&&!rs(i)?s:i),e)},xo),Zr(e=>e!==xo),fe(e=>rs(e)?e:!0===e),ea(1)))}class iN{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Io,this.attachRef=null}}class Io{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new iN,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}let Zf=(()=>{class t{constructor(n,r,s,i,o){this.parentContexts=n,this.location=r,this.resolver=s,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new gt,this.deactivateEvents=new gt,this.attachEvents=new gt,this.detachEvents=new gt,this.name=i||ne,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const o=(r=r||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,c=new oN(n,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,c),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)($(Io),$(fn),$(ei),function ki(t){return function GC(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let s=0;for(;s<r;){const i=n[s];if(Up(i))break;if(0===i)s+=2;else if("number"==typeof i)for(s++;s<r&&"string"==typeof n[s];)s++;else{if(i===e)return n[s+1];s+=2}}}return null}($e(),t)}("name"),$(rf))},t.\u0275dir=et({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class oN{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ns?this.route:e===Io?this.childContexts:this.parent.get(e,n)}}let E_=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=ps({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&wd(0,"router-outlet")},directives:[Zf],encapsulation:2}),t})();function x_(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];aN(r,cN(e,r))}}function aN(t,e){t.children&&x_(t.children,e)}function cN(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Xf(t){const e=t.children&&t.children.map(Xf),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ne&&(n.component=E_),n}function Qt(t){return t.outlet||ne}function S_(t,e){const n=t.filter(r=>Qt(r)===e);return n.push(...t.filter(r=>Qt(r)!==e)),n}const I_={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Lc(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},I_):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||wR)(n,t,e);if(!i)return Object.assign({},I_);const o={};Xe(i.posParams,(c,u)=>{o[u]=c.path});const a=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:a,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function jc(t,e,n,r,s="corrected"){if(n.length>0&&function dN(t,e,n){return n.some(r=>Bc(t,e,r)&&Qt(r)!==ne)}(t,n,r)){const o=new ie(e,function lN(t,e,n,r){const s={};s[ne]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const i of n)if(""===i.path&&Qt(i)!==ne){const o=new ie([],{});o._sourceSegment=t,o._segmentIndexShift=e.length,s[Qt(i)]=o}return s}(t,e,r,new ie(n,t.children)));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function fN(t,e,n){return n.some(r=>Bc(t,e,r))}(t,n,r)){const o=new ie(t.segments,function uN(t,e,n,r,s,i){const o={};for(const a of r)if(Bc(t,n,a)&&!s[Qt(a)]){const c=new ie([],{});c._sourceSegment=t,c._segmentIndexShift="legacy"===i?t.segments.length:e.length,o[Qt(a)]=c}return Object.assign(Object.assign({},s),o)}(t,e,n,r,t.children,s));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const i=new ie(t.segments,t.children);return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}function Bc(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function A_(t,e,n,r){return!!(Qt(t)===r||r!==ne&&Bc(e,n,t))&&("**"===t.path||Lc(e,t,n).matched)}function M_(t,e,n){return 0===e.length&&!t.children[n]}class Ao{constructor(e){this.segmentGroup=e||null}}class T_{constructor(e){this.urlTree=e}}function $c(t){return new Ce(e=>e.error(new Ao(t)))}function P_(t){return new Ce(e=>e.error(new T_(t)))}function hN(t){return new Ce(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class mN{constructor(e,n,r,s,i){this.configLoader=n,this.urlSerializer=r,this.urlTree=s,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(tr)}apply(){const e=jc(this.urlTree.root,[],[],this.config).segmentGroup,n=new ie(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,n,ne).pipe(fe(i=>this.createUrlTree(eh(i),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xr(i=>{if(i instanceof T_)return this.allowRedirects=!1,this.match(i.urlTree);throw i instanceof Ao?this.noMatchError(i):i}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ne).pipe(fe(s=>this.createUrlTree(eh(s),e.queryParams,e.fragment))).pipe(xr(s=>{throw s instanceof Ao?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,n,r){const s=e.segments.length>0?new ie([],{[ne]:e}):e;return new es(s,n,r)}expandSegmentGroup(e,n,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,n,r).pipe(fe(i=>new ie([],i))):this.expandSegment(e,r,n,r.segments,s,!0)}expandChildren(e,n,r){const s=[];for(const i of Object.keys(r.children))"primary"===i?s.unshift(i):s.push(i);return Ze(s).pipe(ai(i=>{const o=r.children[i],a=S_(n,i);return this.expandSegmentGroup(e,a,o,i).pipe(fe(c=>({segment:c,outlet:i})))}),Gb((i,o)=>(i[o.outlet]=o.segment,i),{}),function aR(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Zr((s,i)=>t(s,i,r)):Br,Bf(1),n?Kb(e):Wb(()=>new Ac))}())}expandSegment(e,n,r,s,i,o){return Ze(r).pipe(ai(a=>this.expandSegmentAgainstRoute(e,n,r,a,s,i,o).pipe(xr(u=>{if(u instanceof Ao)return Q(null);throw u}))),ci(a=>!!a),xr((a,c)=>{if(a instanceof Ac||"EmptyError"===a.name){if(M_(n,s,i))return Q(new ie([],{}));throw new Ao(n)}throw a}))}expandSegmentAgainstRoute(e,n,r,s,i,o,a){return A_(s,n,i,o)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,n,s,i,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,r,s,i,o):$c(n):$c(n)}expandSegmentAgainstRouteUsingRedirect(e,n,r,s,i,o){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,s,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?P_(i):this.lineralizeSegments(r,i).pipe(Ge(o=>{const a=new ie(o,{});return this.expandSegment(e,a,n,o,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,s,i,o){const{matched:a,consumedSegments:c,lastChild:u,positionalParamSegments:l}=Lc(n,s,i);if(!a)return $c(n);const d=this.applyRedirectCommands(c,s.redirectTo,l);return s.redirectTo.startsWith("/")?P_(d):this.lineralizeSegments(s,d).pipe(Ge(f=>this.expandSegment(e,n,r,f.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(e,n,r,s,i){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Q(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(fe(f=>(r._loadedConfig=f,new ie(s,{})))):Q(new ie(s,{}));const{matched:o,consumedSegments:a,lastChild:c}=Lc(n,r,s);if(!o)return $c(n);const u=s.slice(c);return this.getChildConfig(e,r,s).pipe(Ge(d=>{const f=d.module,h=d.routes,{segmentGroup:y,slicedSegments:_}=jc(n,a,u,h),E=new ie(y.segments,y.children);if(0===_.length&&E.hasChildren())return this.expandChildren(f,h,E).pipe(fe(U=>new ie(a,U)));if(0===h.length&&0===_.length)return Q(new ie(a,{}));const S=Qt(r)===i;return this.expandSegment(f,E,h,_,S?ne:i,!0).pipe(fe(P=>new ie(a.concat(P.segments),P.children)))}))}getChildConfig(e,n,r){return n.children?Q(new Qf(n.children,e)):n.loadChildren?void 0!==n._loadedConfig?Q(n._loadedConfig):this.runCanLoadGuards(e.injector,n,r).pipe(Ge(s=>s?this.configLoader.load(e.injector,n).pipe(fe(i=>(n._loadedConfig=i,i))):function pN(t){return new Ce(e=>e.error(Uf(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(n))):Q(new Qf([],e))}runCanLoadGuards(e,n,r){const s=n.canLoad;return s&&0!==s.length?Q(s.map(o=>{const a=e.get(o);let c;if(function tN(t){return t&&Sr(t.canLoad)}(a))c=a.canLoad(n,r);else{if(!Sr(a))throw new Error("Invalid CanLoad guard");c=a(n,r)}return Un(c)})).pipe(So(),Lt(o=>{if(!rs(o))return;const a=Uf(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),fe(o=>!0===o)):Q(!0)}lineralizeSegments(e,n){let r=[],s=n.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return Q(r);if(s.numberOfChildren>1||!s.children[ne])return hN(e.redirectTo);s=s.children[ne]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreatreUrlTree(e,n,r,s){const i=this.createSegmentGroup(e,n.root,r,s);return new es(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Xe(e,(s,i)=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,s){const i=this.createSegments(e,n.segments,r,s);let o={};return Xe(n.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,r,s)}),new ie(i,o)}createSegments(e,n,r,s){return n.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,s):this.findOrReturn(i,r))}findPosParam(e,n,r){const s=r[n.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${n.path}'.`);return s}findOrReturn(e,n){let r=0;for(const s of n){if(s.path===e.path)return n.splice(r),s;r++}return e}}function eh(t){const e={};for(const r of Object.keys(t.children)){const i=eh(t.children[r]);(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function yN(t){if(1===t.numberOfChildren&&t.children[ne]){const e=t.children[ne];return new ie(t.segments.concat(e.segments),e.children)}return t}(new ie(t.segments,e))}class O_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Uc{constructor(e,n){this.component=e,this.route=n}}function bN(t,e,n){const r=t._root;return Mo(r,e?e._root:null,n,[r.value])}function Hc(t,e,n){const r=function wN(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Mo(t,e,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=li(e);return t.children.forEach(o=>{(function DN(t,e,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){const c=function CN(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!ts(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ts(t.url,e.url)||!$n(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wf(t,e)||!$n(t.queryParams,e.queryParams);default:return!Wf(t,e)}}(o,i,i.routeConfig.runGuardsAndResolvers);c?s.canActivateChecks.push(new O_(r)):(i.data=o.data,i._resolvedData=o._resolvedData),Mo(t,e,i.component?a?a.children:null:n,r,s),c&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new Uc(a.outlet.component,o))}else o&&To(e,a,s),s.canActivateChecks.push(new O_(r)),Mo(t,null,i.component?a?a.children:null:n,r,s)})(o,i[o.value.outlet],n,r.concat([o.value]),s),delete i[o.value.outlet]}),Xe(i,(o,a)=>To(o,n.getContext(a),s)),s}function To(t,e,n){const r=li(t),s=t.value;Xe(r,(i,o)=>{To(i,s.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new Uc(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class ON{}function R_(t){return new Ce(e=>e.error(t))}class NN{constructor(e,n,r,s,i,o){this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const e=jc(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,ne);if(null===n)return null;const r=new Nc([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ne,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new or(r,n),i=new y_(this.url,s);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const n=e.value,r=m_(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,n):this.processSegment(e,n,n.segments,r)}processChildren(e,n){const r=[];for(const i of Object.keys(n.children)){const o=n.children[i],a=S_(e,i),c=this.processSegmentGroup(a,o,i);if(null===c)return null;r.push(...c)}const s=N_(r);return function kN(t){t.sort((e,n)=>e.value.outlet===ne?-1:n.value.outlet===ne?1:e.value.outlet.localeCompare(n.value.outlet))}(s),s}processSegment(e,n,r,s){for(const i of e){const o=this.processSegmentAgainstRoute(i,n,r,s);if(null!==o)return o}return M_(n,r,s)?[]:null}processSegmentAgainstRoute(e,n,r,s){if(e.redirectTo||!A_(e,n,r,s))return null;let i,o=[],a=[];if("**"===e.path){const h=r.length>0?n_(r).parameters:{};i=new Nc(r,h,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,L_(e),Qt(e),e.component,e,k_(n),F_(n)+r.length,j_(e))}else{const h=Lc(n,e,r);if(!h.matched)return null;o=h.consumedSegments,a=r.slice(h.lastChild),i=new Nc(o,h.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,L_(e),Qt(e),e.component,e,k_(n),F_(n)+o.length,j_(e))}const c=function FN(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(e),{segmentGroup:u,slicedSegments:l}=jc(n,o,a,c.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution);if(0===l.length&&u.hasChildren()){const h=this.processChildren(c,u);return null===h?null:[new or(i,h)]}if(0===c.length&&0===l.length)return[new or(i,[])];const d=Qt(e)===s,f=this.processSegment(c,u,l,d?ne:s);return null===f?null:[new or(i,f)]}}function LN(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function N_(t){const e=[],n=new Set;for(const r of t){if(!LN(r)){e.push(r);continue}const s=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==s?(s.children.push(...r.children),n.add(s)):e.push(r)}for(const r of n){const s=N_(r.children);e.push(new or(r.value,s))}return e.filter(r=>!n.has(r))}function k_(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function F_(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function L_(t){return t.data||{}}function j_(t){return t.resolve||{}}function th(t){return Xr(e=>{const n=t(e);return n?Ze(n).pipe(fe(()=>e)):Q(e)})}class zN extends class qN{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}{}const nh=new se("ROUTES");class B_{constructor(e,n,r,s){this.injector=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=s}load(e,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactory(n.loadChildren).pipe(fe(i=>{this.onLoadEndListener&&this.onLoadEndListener(n);const o=i.create(e);return new Qf(t_(o.injector.get(nh,void 0,J.Self|J.Optional)).map(Xf),o)}),xr(i=>{throw n._loader$=void 0,i}));return n._loader$=new rR(s,()=>new In).pipe(zb()),n._loader$}loadModuleFactory(e){return Un(e()).pipe(Ge(n=>n instanceof Uv?Q(n):Ze(this.compiler.compileModuleAsync(n))))}}class WN{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}function KN(t){throw t}function JN(t,e,n){return e.parse("/")}function $_(t,e){return Q(null)}const YN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Dt=(()=>{class t{constructor(n,r,s,i,o,a,c){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=s,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new In,this.errorHandler=KN,this.malformedUriErrorHandler=JN,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:$_,afterPreactivation:$_},this.urlHandlingStrategy=new WN,this.routeReuseStrategy=new zN,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(tr),this.console=o.get(x0);const d=o.get(Ve);this.isNgZoneEnabled=d instanceof Ve&&Ve.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function CR(){return new es(new ie([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new B_(o,a,f=>this.triggerEvent(new Yb(f)),f=>this.triggerEvent(new Qb(f))),this.routerState=g_(this.currentUrlTree,this.rootComponentType),this.transitions=new yn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(Zr(s=>0!==s.id),fe(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Xr(s=>{let i=!1,o=!1;return Q(s).pipe(Lt(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Xr(a=>{const c=this.browserUrlTree.toString(),u=!this.navigated||a.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||u)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Vc(a.source)&&(this.browserUrlTree=a.extractedUrl),Q(a).pipe(Xr(d=>{const f=this.transitions.getValue();return r.next(new $f(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions.getValue()?Wn:Promise.resolve(d)}),function vN(t,e,n,r){return Xr(s=>function gN(t,e,n,r,s){return new mN(t,e,n,r,s).apply()}(t,e,n,s.extractedUrl,r).pipe(fe(i=>Object.assign(Object.assign({},s),{urlAfterRedirects:i}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Lt(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function jN(t,e,n,r,s){return Ge(i=>function RN(t,e,n,r,s="emptyOnly",i="legacy"){try{const o=new NN(t,e,n,r,s,i).recognize();return null===o?R_(new ON):Q(o)}catch(o){return R_(o)}}(t,e,i.urlAfterRedirects,n(i.urlAfterRedirects),r,s).pipe(fe(o=>Object.assign(Object.assign({},i),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Lt(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const h=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(h,d)}this.browserUrlTree=d.urlAfterRedirects}const f=new lR(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(f)}));if(u&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:f,extractedUrl:h,source:y,restoredState:_,extras:E}=a,S=new $f(f,this.serializeUrl(h),y,_);r.next(S);const C=g_(h,this.rootComponentType).snapshot;return Q(Object.assign(Object.assign({},a),{targetSnapshot:C,urlAfterRedirects:h,extras:Object.assign(Object.assign({},E),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),Wn}),th(a=>{const{targetSnapshot:c,id:u,extractedUrl:l,rawUrl:d,extras:{skipLocationChange:f,replaceUrl:h}}=a;return this.hooks.beforePreactivation(c,{navigationId:u,appliedUrlTree:l,rawUrlTree:d,skipLocationChange:!!f,replaceUrl:!!h})}),Lt(a=>{const c=new dR(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(c)}),fe(a=>Object.assign(Object.assign({},a),{guards:bN(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function EN(t,e){return Ge(n=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=n;return 0===o.length&&0===i.length?Q(Object.assign(Object.assign({},n),{guardsResult:!0})):function xN(t,e,n,r){return Ze(t).pipe(Ge(s=>function PN(t,e,n,r,s){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?Q(i.map(a=>{const c=Hc(a,e,s);let u;if(function sN(t){return t&&Sr(t.canDeactivate)}(c))u=Un(c.canDeactivate(t,e,n,r));else{if(!Sr(c))throw new Error("Invalid CanDeactivate guard");u=Un(c(t,e,n,r))}return u.pipe(ci())})).pipe(So()):Q(!0)}(s.component,s.route,n,e,r)),ci(s=>!0!==s,!0))}(o,r,s,t).pipe(Ge(a=>a&&function eN(t){return"boolean"==typeof t}(a)?function SN(t,e,n,r){return Ze(e).pipe(ai(s=>jf(function AN(t,e){return null!==t&&e&&e(new gR(t)),Q(!0)}(s.route.parent,r),function IN(t,e){return null!==t&&e&&e(new yR(t)),Q(!0)}(s.route,r),function TN(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>function _N(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>qb(()=>Q(o.guards.map(c=>{const u=Hc(c,o.node,n);let l;if(function rN(t){return t&&Sr(t.canActivateChild)}(u))l=Un(u.canActivateChild(r,t));else{if(!Sr(u))throw new Error("Invalid CanActivateChild guard");l=Un(u(r,t))}return l.pipe(ci())})).pipe(So())));return Q(i).pipe(So())}(t,s.path,n),function MN(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Q(!0);const s=r.map(i=>qb(()=>{const o=Hc(i,e,n);let a;if(function nN(t){return t&&Sr(t.canActivate)}(o))a=Un(o.canActivate(e,t));else{if(!Sr(o))throw new Error("Invalid CanActivate guard");a=Un(o(e,t))}return a.pipe(ci())}));return Q(s).pipe(So())}(t,s.route,n))),ci(s=>!0!==s,!0))}(r,i,t,e):Q(a)),fe(a=>Object.assign(Object.assign({},n),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Lt(a=>{if(rs(a.guardsResult)){const u=Uf(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw u.url=a.guardsResult,u}const c=new fR(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(c)}),Zr(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),th(a=>{if(a.guards.canActivateChecks.length)return Q(a).pipe(Lt(c=>{const u=new hR(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(u)}),Xr(c=>{let u=!1;return Q(c).pipe(function BN(t,e){return Ge(n=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=n;if(!s.length)return Q(n);let i=0;return Ze(s).pipe(ai(o=>function $N(t,e,n,r){return function UN(t,e,n,r){const s=Object.keys(t);if(0===s.length)return Q({});const i={};return Ze(s).pipe(Ge(o=>function HN(t,e,n,r){const s=Hc(t,e,r);return Un(s.resolve?s.resolve(e,n):s(e,n))}(t[o],e,n,r).pipe(Lt(a=>{i[o]=a}))),Bf(1),Ge(()=>Object.keys(i).length===s.length?Q(i):Wn))}(t._resolve,t,e,r).pipe(fe(i=>(t._resolvedData=i,t.data=Object.assign(Object.assign({},t.data),m_(t,n).resolve),null)))}(o.route,r,t,e)),Lt(()=>i++),Bf(1),Ge(o=>i===s.length?Q(n):Wn))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Lt({next:()=>u=!0,complete:()=>{u||(this.restoreHistory(c),this.cancelNavigationTransition(c,"At least one route resolver didn't emit any value."))}}))}),Lt(c=>{const u=new pR(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(u)}))}),th(a=>{const{targetSnapshot:c,id:u,extractedUrl:l,rawUrl:d,extras:{skipLocationChange:f,replaceUrl:h}}=a;return this.hooks.afterPreactivation(c,{navigationId:u,appliedUrlTree:l,rawUrlTree:d,skipLocationChange:!!f,replaceUrl:!!h})}),fe(a=>{const c=function UR(t,e,n){const r=Co(t,e._root,n?n._root:void 0);return new p_(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:c})}),Lt(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((t,e,n)=>fe(r=>(new ZR(e,r.targetRouterState,r.currentRouterState,n).activate(t),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Lt({next(){i=!0},complete(){i=!0}}),function cR(t){return Ye((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}(()=>{var a;i||o||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===s.id&&(this.currentNavigation=null)}),xr(a=>{if(o=!0,function _R(t){return t&&t[Xb]}(a)){const c=rs(a.url);c||(this.navigated=!0,this.restoreHistory(s,!0));const u=new Jb(s.id,this.serializeUrl(s.extractedUrl),a.message);r.next(u),c?setTimeout(()=>{const l=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Vc(s.source)};this.scheduleNavigation(l,"imperative",null,d,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const c=new uR(s.id,this.serializeUrl(s.extractedUrl),a);r.next(c);try{s.resolve(this.errorHandler(a))}catch(u){s.reject(u)}}return Wn}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var s;const i={replaceUrl:!0},o=(null===(s=n.state)||void 0===s?void 0:s.navigationId)?n.state:null;if(o){const c=Object.assign({},o);delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const a=this.parseUrl(n.url);this.scheduleNavigation(a,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){x_(n),this.config=n.map(Xf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:s,queryParams:i,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=s||this.routerState.root,l=c?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=i||null}return null!==d&&(d=this.removeEmptyProps(d)),function qR(t,e,n,r,s){if(0===n.length)return Kf(e.root,e.root,e,r,s);const i=function zR(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new __(!0,0,t);let e=0,n=!1;const r=t.reduce((s,i,o)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Xe(i.outlets,(c,u)=>{a[u]="string"==typeof c?c.split("/"):c}),[...s,{outlets:a}]}if(i.segmentPath)return[...s,i.segmentPath]}return"string"!=typeof i?[...s,i]:0===o?(i.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?e++:""!=a&&s.push(a))}),s):[...s,i]},[]);return new __(n,e,r)}(n);if(i.toRoot())return Kf(e.root,new ie([],{}),e,r,s);const o=function GR(t,e,n){if(t.isAbsolute)return new Jf(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const i=n.snapshot._urlSegment;return new Jf(i,i===e.root,0)}const r=kc(t.commands[0])?0:1;return function WR(t,e,n){let r=t,s=e,i=n;for(;i>s;){if(i-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new Jf(r,!1,s-i)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(i,e,t),a=o.processChildren?Fc(o.segmentGroup,o.index,i.commands):w_(o.segmentGroup,o.index,i.commands);return Kf(o.segmentGroup,a,e,r,s)}(u,this.currentUrlTree,n,d,null!=l?l:null)}navigateByUrl(n,r={skipLocationChange:!1}){const s=rs(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function ZN(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,n)}return r}isActive(n,r){let s;if(s=!0===r?Object.assign({},YN):!1===r?Object.assign({},QN):r,rs(n))return s_(this.currentUrlTree,n,s);const i=this.parseUrl(n);return s_(this.currentUrlTree,i,s)}removeEmptyProps(n){return Object.keys(n).reduce((r,s)=>{const i=n[s];return null!=i&&(r[s]=i),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new _o(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,s,i,o){var a,c,u;if(this.disposed)return Promise.resolve(!1);const l=this.transitions.value,d=Vc(r)&&l&&!Vc(l.source),f=l.rawUrl.toString()===n.toString(),h=l.id===(null===(a=this.currentNavigation)||void 0===a?void 0:a.id);if(d&&f&&h)return Promise.resolve(!0);let _,E,S;o?(_=o.resolve,E=o.reject,S=o.promise):S=new Promise((U,K)=>{_=U,E=K});const C=++this.navigationId;let P;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),P=s&&s.\u0275routerPageId?s.\u0275routerPageId:i.replaceUrl||i.skipLocationChange?null!==(c=this.browserPageId)&&void 0!==c?c:0:(null!==(u=this.browserPageId)&&void 0!==u?u:0)+1):P=0,this.setTransition({id:C,targetPageId:P,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:i,resolve:_,reject:E,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(U=>Promise.reject(U))}setBrowserUrl(n,r){const s=this.urlSerializer.serialize(n),i=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",i):this.location.go(s,"",i)}restoreHistory(n,r=!1){var s,i;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===o?this.currentUrlTree===(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)&&0===o&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const s=new Jb(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(s),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){bd()},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();function Vc(t){return"imperative"!==t}class U_{}class H_{preload(e,n){return Q(null)}}let V_=(()=>{class t{constructor(n,r,s,i){this.router=n,this.injector=s,this.preloadingStrategy=i,this.loader=new B_(s,r,c=>n.triggerEvent(new Yb(c)),c=>n.triggerEvent(new Qb(c)))}setUpPreloading(){this.subscription=this.router.events.pipe(Zr(n=>n instanceof _o),ai(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(tr);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const s=[];for(const i of r)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const o=i._loadedConfig;s.push(this.processRoutes(o.module,o.routes))}else i.loadChildren&&!i.canLoad?s.push(this.preloadConfig(n,i)):i.children&&s.push(this.processRoutes(n,i.children));return Ze(s).pipe(Ei(),fe(i=>{}))}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Q(r._loadedConfig):this.loader.load(n.injector,r)).pipe(Ge(i=>(r._loadedConfig=i,this.processRoutes(i.module,i.routes)))))}}return t.\u0275fac=function(n){return new(n||t)(H(Dt),H(lc),H(st),H(U_))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})(),ih=(()=>{class t{constructor(n,r,s={}){this.router=n,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof $f?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof _o&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Zb&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new Zb(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(n){bd()},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();const ss=new se("ROUTER_CONFIGURATION"),q_=new se("ROUTER_FORROOT_GUARD"),nk=[df,{provide:c_,useClass:u_},{provide:Dt,useFactory:function ak(t,e,n,r,s,i,o={},a,c){const u=new Dt(null,t,e,n,r,s,t_(i));return a&&(u.urlHandlingStrategy=a),c&&(u.routeReuseStrategy=c),function ck(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(e.canceledNavigationResolution=t.canceledNavigationResolution)}(o,u),o.enableTracing&&u.events.subscribe(l=>{var d,f;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${l.constructor.name}`),console.log(l.toString()),console.log(l),null===(f=console.groupEnd)||void 0===f||f.call(console)}),u},deps:[c_,Io,df,st,lc,nh,ss,[class GN{},new Rn],[class VN{},new Rn]]},Io,{provide:ns,useFactory:function uk(t){return t.routerState.root},deps:[Dt]},V_,H_,class tk{preload(e,n){return n().pipe(xr(()=>Q(null)))}},{provide:ss,useValue:{enableTracing:!1}}];function rk(){return new P0("Router",Dt)}let z_=(()=>{class t{constructor(n,r){}static forRoot(n,r){return{ngModule:t,providers:[nk,G_(n),{provide:q_,useFactory:ok,deps:[[Dt,new Rn,new Ms]]},{provide:ss,useValue:r||{}},{provide:oi,useFactory:ik,deps:[Qr,[new Hi(lf),new Rn],ss]},{provide:ih,useFactory:sk,deps:[Dt,GP,ss]},{provide:U_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:H_},{provide:P0,multi:!0,useFactory:rk},[oh,{provide:cc,multi:!0,useFactory:lk,deps:[oh]},{provide:W_,useFactory:dk,deps:[oh]},{provide:E0,multi:!0,useExisting:W_}]]}}static forChild(n){return{ngModule:t,providers:[G_(n)]}}}return t.\u0275fac=function(n){return new(n||t)(H(q_,8),H(Dt,8))},t.\u0275mod=Yn({type:t}),t.\u0275inj=An({}),t})();function sk(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ih(t,e,n)}function ik(t,e,n={}){return n.useHash?new IT(t,e):new X0(t,e)}function ok(t){return"guarded"}function G_(t){return[{provide:ZC,multi:!0,useValue:t},{provide:nh,multi:!0,useValue:t}]}let oh=(()=>{class t{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new In}appInitializer(){return this.injector.get(ET,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const s=new Promise(a=>r=a),i=this.injector.get(Dt),o=this.injector.get(ss);return"disabled"===o.initialNavigation?(i.setUpLocationChangeListener(),r(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(i.hooks.afterPreactivation=()=>this.initNavigation?Q(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),i.initialNavigation()):r(!0),s})}bootstrapListener(n){const r=this.injector.get(ss),s=this.injector.get(V_),i=this.injector.get(ih),o=this.injector.get(Dt),a=this.injector.get(ho);n===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),s.setUpPreloading(),i.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(n){return new(n||t)(H(st))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();function lk(t){return t.appInitializer.bind(t)}function dk(t){return t.bootstrapListener.bind(t)}const W_=new se("Router Initializer");let K_=(()=>{class t{constructor(n){this._httpClient=n,this._httpOptions={headers:new mn({"Content-Type":"application/json"})}}getGame(n){return this._httpClient.get(`/api/games/${n}`)}create(n){return this._httpClient.post("/api/games",n,this._httpOptions)}makeMove(n,r,s){return this._httpClient.post(`/api/games/${n}/players/${r}/moves`,s,this._httpOptions)}}return t.\u0275fac=function(n){return new(n||t)(H(Nf))},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function J_(t,e,n,r,s,i,o){try{var a=t[i](o),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,s)}function R(t){return function(){var e=this,n=arguments;return new Promise(function(r,s){var i=t.apply(e,n);function o(c){J_(i,r,s,o,a,"next",c)}function a(c){J_(i,r,s,o,a,"throw",c)}o(void 0)})}}function pk(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Z_(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){!function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}(a,c,(o=t[i](o)).done,o.value)})}}}function Ir(t){var e,n,r,s=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);s--;){if(n&&null!=(e=t[n]))return e.call(t);if(r&&null!=(e=t[r]))return new zc(e.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function zc(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var r=n.done;return Promise.resolve(n.value).then(function(s){return{value:s,done:r}})}return(zc=function(r){this.s=r,this.n=r.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(r){var s=this.s.return;return void 0===s?Promise.resolve({value:r,done:!0}):e(s.apply(this.s,arguments))},throw:function(r){var s=this.s.return;return void 0===s?Promise.reject(r):e(s.apply(this.s,arguments))}},new zc(t)}function X_(t){this.wrapped=t}function Gc(t){return new X_(t)}function Po(t){var e,n;function s(o,a){try{var c=t[o](a),u=c.value,l=u instanceof X_;Promise.resolve(l?u.wrapped:u).then(function(d){l?s("return"===o?"return":"next",d):i(c.done?"return":"normal",d)},function(d){s("throw",d)})}catch(d){i("throw",d)}}function i(o,a){switch(o){case"return":e.resolve({value:a,done:!0});break;case"throw":e.reject(a);break;default:e.resolve({value:a,done:!1})}(e=e.next)?s(e.key,e.arg):n=null}this._invoke=function r(o,a){return new Promise(function(c,u){var l={key:o,arg:a,resolve:c,reject:u,next:null};n?n=n.next=l:(e=n=l,s(o,a))})},"function"!=typeof t.return&&(this.return=void 0)}function ch(t){return function(){return new Po(t.apply(this,arguments))}}Po.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Po.prototype.next=function(t){return this._invoke("next",t)},Po.prototype.throw=function(t){return this._invoke("throw",t)},Po.prototype.return=function(t){return this._invoke("return",t)};var O=(()=>{return(t=O||(O={})).ApiError="BAD API",t.BadAuthentication="BAD_AUTHENTICATION",t.BadCreds="BAD_CREDS",t.BadHeader="BAD_HEADER",t.BadJson="BAD_JSON",t.BadPayload="BAD_PAYLOAD",t.BadSubject="BAD_SUBJECT",t.Cancelled="CANCELLED",t.ConnectionClosed="CONNECTION_CLOSED",t.ConnectionDraining="CONNECTION_DRAINING",t.ConnectionRefused="CONNECTION_REFUSED",t.ConnectionTimeout="CONNECTION_TIMEOUT",t.Disconnect="DISCONNECT",t.InvalidOption="INVALID_OPTION",t.InvalidPayload="INVALID_PAYLOAD",t.MaxPayloadExceeded="MAX_PAYLOAD_EXCEEDED",t.NoResponders="503",t.NotFunction="NOT_FUNC",t.RequestError="REQUEST_ERROR",t.ServerOptionNotAvailable="SERVER_OPT_NA",t.SubClosed="SUB_CLOSED",t.SubDraining="SUB_DRAINING",t.Timeout="TIMEOUT",t.Tls="TLS",t.Unknown="UNKNOWN_ERROR",t.WssRequired="WSS_REQUIRED",t.JetStreamInvalidAck="JESTREAM_INVALID_ACK",t.JetStream404NoMessages="404",t.JetStream408RequestTimeout="408",t.JetStream409MaxAckPendingExceeded="409",t.JetStream409="409",t.JetStreamNotEnabled="503",t.JetStreamIdleHeartBeat="IDLE_HEARTBEAT",t.AuthorizationViolation="AUTHORIZATION_VIOLATION",t.AuthenticationExpired="AUTHENTICATION_EXPIRED",t.ProtocolError="NATS_PROTOCOL_ERR",t.PermissionsViolation="PERMISSIONS_VIOLATION",O;var t})();class ew{constructor(){g(this,"messages"),this.messages=new Map,this.messages.set(O.InvalidPayload,"Invalid payload type - payloads can be 'binary', 'string', or 'json'"),this.messages.set(O.BadJson,"Bad JSON"),this.messages.set(O.WssRequired,"TLS is required, therefore a secure websocket connection is also required")}static getMessage(e){return mk.getMessage(e)}getMessage(e){return this.messages.get(e)||e}}const mk=new ew;class j extends Error{constructor(e,n,r){super(e),g(this,"name"),g(this,"message"),g(this,"code"),g(this,"permissionContext"),g(this,"chainedError"),g(this,"api_error"),this.name="NatsError",this.message=e,this.code=n,this.chainedError=r}static errorForCode(e,n){const r=ew.getMessage(e);return new j(r,e,n)}isAuthError(){return this.code===O.AuthenticationExpired||this.code===O.AuthorizationViolation}isPermissionError(){return this.code===O.PermissionsViolation}isProtocolError(){return this.code===O.ProtocolError}isJetStreamError(){return void 0!==this.api_error}jsError(){return this.api_error?this.api_error:null}}const at=new Uint8Array(0);var Ar=(()=>{return(t=Ar||(Ar={})).Disconnect="disconnect",t.Reconnect="reconnect",t.Update="update",t.LDM="ldm",t.Error="error",Ar;var t})(),fi=(()=>{return(t=fi||(fi={})).Reconnecting="reconnecting",t.PingTimer="pingTimer",t.StaleConnection="staleConnection",fi;var t})();const uh="127.0.0.1";var vn=(()=>{return(t=vn||(vn={})).Timer="timer",t.Count="count",t.JitterTimer="jitterTimer",t.SentinelMsg="sentinelMsg",vn;var t})(),Wc=(()=>{return(t=Wc||(Wc={})).Limits="limits",t.Interest="interest",t.Workqueue="workqueue",Wc;var t})(),hi=(()=>{return(t=hi||(hi={})).Old="old",t.New="new",hi;var t})(),Kc=(()=>{return(t=Kc||(Kc={})).File="file",t.Memory="memory",Kc;var t})(),Ct=(()=>{return(t=Ct||(Ct={})).All="all",t.Last="last",t.New="new",t.StartSequence="by_start_sequence",t.StartTime="by_start_time",t.LastPerSubject="last_per_subject",Ct;var t})(),Je=(()=>{return(t=Je||(Je={})).None="none",t.All="all",t.Explicit="explicit",t.NotSet="",Je;var t})(),is=(()=>{return(t=is||(is={})).Instant="instant",t.Original="original",is;var t})(),Zt=(()=>{return(t=Zt||(Zt={})).StreamSourceHdr="Nats-Stream-Source",t.LastConsumerSeqHdr="Nats-Last-Consumer",t.LastStreamSeqHdr="Nats-Last-Stream",t.ConsumerStalledHdr="Nats-Consumer-Stalled",t.MessageSizeHdr="Nats-Msg-Size",t.RollupHdr="Nats-Rollup",t.RollupValueSubject="sub",t.RollupValueAll="all",Zt;var t})(),os=(()=>{return(t=os||(os={})).Stream="Nats-Stream",t.Sequence="Nats-Sequence",t.TimeStamp="Nats-Time-Stamp",t.Subject="Nats-Subject",os;var t})();const Mr=new TextEncoder,bn=new TextDecoder;function Oo(...t){const e=[];for(let n=0;n<t.length;n++)e.push(Mr.encode(t[n]));return 0===e.length?at:1===e.length?e[0]:function bk(...t){let e=0;for(let s=0;s<t.length;s++)e+=t[s].length;const n=new Uint8Array(e);let r=0;for(let s=0;s<t.length;s++)n.set(t[s],r),r+=t[s].length;return n}(...e)}function rw(t){return t&&0!==t.length?bn.decode(t):""}class Ro{constructor(){g(this,"buffers"),g(this,"byteLength"),this.buffers=[],this.byteLength=0}static concat(...e){let n=0;for(let i=0;i<e.length;i++)n+=e[i].length;const r=new Uint8Array(n);let s=0;for(let i=0;i<e.length;i++)r.set(e[i],s),s+=e[i].length;return r}static fromAscii(e){return e||(e=""),Mr.encode(e)}static toAscii(e){return bn.decode(e)}reset(){this.buffers.length=0,this.byteLength=0}pack(){if(this.buffers.length>1){const e=new Uint8Array(this.byteLength);let n=0;for(let r=0;r<this.buffers.length;r++)e.set(this.buffers[r],n),n+=this.buffers[r].length;this.buffers.length=0,this.buffers.push(e)}}shift(){if(this.buffers.length){const e=this.buffers.shift();if(e)return this.byteLength-=e.length,e}return new Uint8Array(0)}drain(e){if(this.buffers.length){this.pack();const n=this.buffers.pop();if(n){const r=this.byteLength;(void 0===e||e>r)&&(e=r);const s=n.subarray(0,e);return r>e&&this.buffers.push(n.subarray(e)),this.byteLength=r-e,s}}return new Uint8Array(0)}fill(e,...n){e&&(this.buffers.push(e),this.byteLength+=e.length);for(let r=0;r<n.length;r++)n[r]&&n[r].length&&(this.buffers.push(n[r]),this.byteLength+=n[r].length)}peek(){return this.buffers.length?(this.pack(),this.buffers[0]):new Uint8Array(0)}size(){return this.byteLength}length(){return this.buffers.length}}const Jc=Ro.fromAscii("\r\n"),_k=new Uint8Array(Jc)[0],wk=new Uint8Array(Jc)[1];function Yc(t,...e){for(let n=0;n<e.length;n++){const r=e[n];Object.keys(r).forEach(function(s){t[s]=r[s]})}return t}function Qc(t){return bn.decode(t).replace(/\n/g,"\u240a").replace(/\r/g,"\u240d")}function Zc(t){const e=j.errorForCode(O.Timeout);let n,r;const s=new Promise((i,o)=>{n={cancel:()=>{r&&clearTimeout(r)}},r=setTimeout(()=>{o(e)},t)});return Object.assign(s,n)}function lh(t=0){return new Promise(e=>{setTimeout(()=>{e()},t)})}function xe(){let t={};const e=new Promise((n,r)=>{t={resolve:n,reject:r}});return Object.assign(e,t)}function sw(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}class Et{constructor(){g(this,"inflight"),g(this,"processed"),g(this,"received"),g(this,"noIterator"),g(this,"iterClosed"),g(this,"done"),g(this,"signal"),g(this,"yields"),g(this,"filtered"),g(this,"pendingFiltered"),g(this,"ingestionFilterFn"),g(this,"protocolFilterFn"),g(this,"dispatchedFn"),g(this,"ctx"),g(this,"_data"),g(this,"err"),g(this,"time"),this.inflight=0,this.filtered=0,this.pendingFiltered=0,this.processed=0,this.received=0,this.noIterator=!1,this.done=!1,this.signal=xe(),this.yields=[],this.iterClosed=xe(),this.time=0}[Symbol.asyncIterator](){return this.iterate()}push(e){if(this.done)return;if("function"==typeof e)return this.yields.push(e),void this.signal.resolve();const{ingest:n,protocol:r}=this.ingestionFilterFn?this.ingestionFilterFn(e,this.ctx||this):{ingest:!0,protocol:!1};n&&(r&&(this.filtered++,this.pendingFiltered++),this.yields.push(e),this.signal.resolve())}iterate(){var e=this;return ch(function*(){if(e.noIterator)throw new j("unsupported iterator",O.ApiError);try{for(;;){if(0===e.yields.length&&(yield Gc(e.signal)),e.err)throw e.err;const n=e.yields;e.inflight=n.length,e.yields=[];for(let r=0;r<n.length;r++)if("function"!=typeof n[r]){if(!e.protocolFilterFn||e.protocolFilterFn(n[r])){e.processed++;const i=Date.now();yield n[r],e.time=Date.now()-i,e.dispatchedFn&&n[r]&&e.dispatchedFn(n[r])}else e.pendingFiltered--;e.inflight--}else{const i=n[r];try{i()}catch(o){throw o}if(e.err)throw e.err}if(e.done)break;0===e.yields.length&&(n.length=0,e.yields=n,e.signal=xe())}}finally{e.stop()}})()}stop(e){this.done||(this.err=e,this.done=!0,this.signal.resolve(),this.iterClosed.resolve())}getProcessed(){return this.noIterator?this.received:this.processed}getPending(){return this.yields.length+this.inflight-this.pendingFiltered}getReceived(){return this.received-this.filtered}}function iw(t){let r=!0;const s=new Array(t.length);for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);if(58===o||o<33||o>126)throw new j(`'${t[i]}' is not a valid character for a header key`,O.BadHeader);r&&97<=o&&o<=122?o-=32:!r&&65<=o&&o<=90&&(o+=32),s[i]=o,r=45==o}return String.fromCharCode(...s)}function ar(t=0,e=""){if(0===t&&""!==e||t>0&&""===e)throw new Error("setting status requires both code and description");return new Pr(t,e)}const dh="NATS/1.0";var jt=(()=>{return(t=jt||(jt={}))[t.Exact=0]="Exact",t[t.CanonicalMIME=1]="CanonicalMIME",t[t.IgnoreCase=2]="IgnoreCase",jt;var t})();class Pr{constructor(e=0,n=""){g(this,"_code"),g(this,"headers"),g(this,"_description"),this._code=e,this._description=n,this.headers=new Map}[Symbol.iterator](){return this.headers.entries()}size(){return this.headers.size}equals(e){if(e&&this.headers.size===e.headers.size&&this._code===e._code){for(const[n,r]of this.headers){const s=e.values(n);if(r.length!==s.length)return!1;const i=[...r].sort(),o=[...s].sort();for(let a=0;a<i.length;a++)if(i[a]!==o[a])return!1}return!0}return!1}static decode(e){const n=new Pr,s=bn.decode(e).split("\r\n"),i=s[0];if(i!==dh){let o=i.replace(dh,"");n._code=parseInt(o,10);const a=n._code.toString();o=o.replace(a,""),n._description=o.trim()}return s.length>=1&&s.slice(1).map(o=>{if(o){const a=o.indexOf(":");if(a>-1){const c=o.slice(0,a),u=o.slice(a+1).trim();n.append(c,u)}}}),n}toString(){if(0===this.headers.size&&0===this._code)return"";let e=dh;this._code>0&&""!==this._description&&(e+=` ${this._code} ${this._description}`);for(const[n,r]of this.headers)for(let s=0;s<r.length;s++)e=`${e}\r\n${n}: ${r[s]}`;return`${e}\r\n\r\n`}encode(){return Mr.encode(this.toString())}static validHeaderValue(e){if(/[\r\n]/.test(e))throw new j("invalid header value - \\r and \\n are not allowed.",O.BadHeader);return e.trim()}keys(){const e=[];for(const n of this.headers.keys())e.push(n);return e}findKeys(e,n=jt.Exact){const r=this.keys();switch(n){case jt.Exact:return r.filter(s=>s===e);case jt.CanonicalMIME:return e=iw(e),r.filter(s=>s===e);default:{const s=e.toLowerCase();return r.filter(i=>s===i.toLowerCase())}}}get(e,n=jt.Exact){const r=this.findKeys(e,n);if(r.length){const s=this.headers.get(r[0]);if(s)return Array.isArray(s)?s[0]:s}return""}has(e,n=jt.Exact){return this.findKeys(e,n).length>0}set(e,n,r=jt.Exact){this.delete(e,r),this.append(e,n,r)}append(e,n,r=jt.Exact){const s=iw(e);r===jt.CanonicalMIME&&(e=s);const i=this.findKeys(e,r);e=i.length>0?i[0]:e;const o=Pr.validHeaderValue(n);let a=this.headers.get(e);a||(a=[],this.headers.set(e,a)),a.push(o)}values(e,n=jt.Exact){const r=[];return this.findKeys(e,n).forEach(i=>{const o=this.headers.get(i);o&&r.push(...o)}),r}delete(e,n=jt.Exact){this.findKeys(e,n).forEach(s=>{this.headers.delete(s)})}get hasError(){return this._code>=300}get status(){return`${this._code} ${this._description}`.trim()}toRecord(){const e={};return this.keys().forEach(n=>{e[n]=this.values(n)}),e}get code(){return this._code}get description(){return this._description}static fromRecord(e){const n=new Pr;for(const r in e)n.headers.set(r,e[r]);return n}}function ow(){return{encode:t=>Mr.encode(t),decode:t=>bn.decode(t)}}function Hn(t){return{encode(e){try{return void 0===e&&(e=null),Mr.encode(JSON.stringify(e))}catch(n){throw j.errorForCode(O.BadJson,n)}},decode(e){try{return JSON.parse(bn.decode(e),t)}catch(n){throw j.errorForCode(O.BadJson,n)}}}}const aw="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";const No=new class Tk{constructor(){g(this,"buf"),g(this,"seq"),g(this,"inc"),this.buf=new Uint8Array(22),this.init()}init(){this.setPre(),this.initSeqAndInc(),this.fillSeq()}initSeqAndInc(){this.seq=Math.floor(0xcfd41b9100000*Math.random()),this.inc=Math.floor(300*Math.random()+33)}setPre(){const e=new Uint8Array(12);!function Mk(t){var e;(null==(e=null==globalThis?void 0:globalThis.crypto)?void 0:e.getRandomValues)?globalThis.crypto.getRandomValues(t):function Ak(t){for(let e=0;e<t.length;e++)t[e]=Math.floor(255*Math.random())}(t)}(e);for(let n=0;n<12;n++)this.buf[n]=aw.charCodeAt(e[n]%36)}fillSeq(){let e=this.seq;for(let n=21;n>=12;n--)this.buf[n]=aw.charCodeAt(e%36),e=Math.floor(e/36)}next(){return this.seq+=this.inc,this.seq>0xcfd41b9100000&&(this.setPre(),this.initSeqAndInc()),this.fillSeq(),String.fromCharCode.apply(String,this.buf)}reset(){this.init()}};function dw(t){var e;return t&&0===t.data.length&&503===(null==(e=t.headers)?void 0:e.code)?j.errorForCode(O.NoResponders):null}class fw{constructor(e,n,r){g(this,"_headers"),g(this,"_msg"),g(this,"_rdata"),g(this,"_reply"),g(this,"_subject"),g(this,"publisher"),this._msg=e,this._rdata=n,this.publisher=r}get subject(){return this._subject||(this._subject=bn.decode(this._msg.subject)),this._subject}get reply(){return this._reply||(this._reply=bn.decode(this._msg.reply)),this._reply}get sid(){return this._msg.sid}get headers(){if(this._msg.hdr>-1&&!this._headers){const e=this._rdata.subarray(0,this._msg.hdr);this._headers=Pr.decode(e)}return this._headers}get data(){return this._rdata?this._msg.hdr>-1?this._rdata.subarray(this._msg.hdr):this._rdata:new Uint8Array(0)}respond(e=at,n){return!!this.reply&&(this.publisher.publish(this.reply,e,n),!0)}size(){var s;return this._msg.subject.length+((null==(s=this._msg.reply)?void 0:s.length)||0)+(-1===this._msg.size?0:this._msg.size)}}function pi(t){return hw("durable",t)}function xt(t){return hw("stream",t)}function hw(t,e=""){if(""===e)throw Error(`${t} name required`);return[".","*",">","/","\\"].forEach(r=>{if(-1!==e.indexOf(r))throw Error(`invalid ${t} name - ${t} name cannot contain '${r}'`)}),""}function Xc(t,e=""){if(""===e)throw Error(`${t} name required`);const n=pw(e);if(n.length)throw new Error(`invalid ${t} name - ${t} name ${n}`)}function pw(t=""){if(""===t)throw Error("name required");const e=/^[-\w]+$/g;if(null===t.match(e))for(const r of t.split(""))if(null===r.match(e))return`cannot contain '${r}'`;return""}function ze(t){return 1e6*t}function fh(t){return Math.floor(t/1e6)}function hh(t){if(t.data.length>0)return!1;const e=t.headers;return!!e&&e.code>=100&&e.code<200}function gw(t){var e;return hh(t)&&"Idle Heartbeat"===(null==(e=t.headers)?void 0:e.description)}function gi(t){if(0!==t.data.length)return null;const e=t.headers;return e?mw(e.code,e.description):null}var Bt=(()=>{return(t=Bt||(Bt={})).MaxBatchExceeded="exceeded maxrequestbatch of",t.MaxExpiresExceeded="exceeded maxrequestexpires of",t.MaxBytesExceeded="exceeded maxrequestmaxbytes of",t.MaxMessageSizeExceeded="message size exceeds maxbytes",t.PushConsumer="consumer is push based",t.MaxWaitingExceeded="exceeded maxwaiting",t.IdleHeartbeatMissed="`idle heartbeats missed`",Bt;var t})();function mw(t,e=""){if(t<300)return null;switch(e=e.toLowerCase(),t){case 404:return new j(e,O.JetStream404NoMessages);case 408:return new j(e,O.JetStream408RequestTimeout);case 409:{const n=e.startsWith(Bt.IdleHeartbeatMissed)?O.JetStreamIdleHeartBeat:O.JetStream409;return new j(e,n)}case 503:return j.errorForCode(O.JetStreamNotEnabled,new Error(e));default:return""===e&&(e=O.Unknown),new j(e,`${t}`)}}function as(t=""){const e=t.match(/(\d+).(\d+).(\d+)/);if(e)return{major:parseInt(e[1]),minor:parseInt(e[2]),micro:parseInt(e[3])};throw new Error(`'${t}' is not a semver value`)}function ph(t,e){return t.major<e.major?-1:t.major>e.major?1:t.minor<e.minor?-1:t.minor>e.minor?1:t.micro<e.micro?-1:t.micro>e.micro?1:0}var St=(()=>{return(t=St||(St={})).JS_KV="js_kv",t.JS_OBJECTSTORE="js_objectstore",t.JS_PULL_MAX_BYTES="js_pull_max_bytes",t.JS_NEW_CONSUMER_CREATE_API="js_new_consumer_create",t.JS_ALLOW_DIRECT="js_allow_direct",St;var t})();class kk{constructor(e){g(this,"server"),g(this,"features"),g(this,"disabled"),this.features=new Map,this.disabled=[],this.update(e)}resetDisabled(){this.disabled.length=0,this.update(this.server)}disable(e){this.disabled.push(e),this.update(this.server)}isDisabled(e){return-1!==this.disabled.indexOf(e)}update(e){"string"==typeof e&&(e=as(e)),this.server=e,this.set(St.JS_KV,"2.6.2"),this.set(St.JS_OBJECTSTORE,"2.6.3"),this.set(St.JS_PULL_MAX_BYTES,"2.8.3"),this.set(St.JS_NEW_CONSUMER_CREATE_API,"2.9.0"),this.set(St.JS_ALLOW_DIRECT,"2.9.0"),this.disabled.forEach(n=>{this.features.delete(n)})}set(e,n){this.features.set(e,{min:n,ok:ph(this.server,as(n))>=0})}get(e){return this.features.get(e)||{min:"unknown",ok:!1}}supports(e){var n;return(null==(n=this.get(e))?void 0:n.ok)||!1}require(e){return"string"==typeof e&&(e=as(e)),ph(this.server,e)>=0}}const eu="Nats-Service-Error",tu="Nats-Service-Error-Code";var _n=(()=>{return(t=_n||(_n={})).PING="PING",t.STATS="STATS",t.INFO="INFO",t.SCHEMA="SCHEMA",_n;var t})(),cs=(()=>{return(t=cs||(cs={})).STATS="io.nats.micro.v1.stats_response",t.INFO="io.nats.micro.v1.info_response",t.PING="io.nats.micro.v1.ping_response",t.SCHEMA="io.nats.micro.v1.schema_response",cs;var t})();class yw{constructor(e){g(this,"msg"),this.msg=e}get data(){return this.msg.data}get sid(){return this.msg.sid}get subject(){return this.msg.subject}respond(e,n){return this.msg.respond(e,n)}respondError(e,n,r,s){var i,o;return(s=s||{}).headers=s.headers||ar(),null==(i=s.headers)||i.set(tu,`${e}`),null==(o=s.headers)||o.set(eu,n),this.msg.respond(r,s)}}class ko{constructor(e,n=""){g(this,"subject"),g(this,"srv"),""!==n&&function jk(t,e){if(-1!==e.indexOf(" "))throw new Error(`${t} cannot contain spaces: '${e}'`);e.split(".").forEach(r=>{if(">"===r)throw new Error(`${t} name cannot contain internal '>': '${e}'`)})}("service group",n);let r="";if(e instanceof Fo)this.srv=e,r="";else{if(!(e instanceof ko))throw new Error("unknown ServiceGroup type");{const s=e;this.srv=s.srv,r=s.subject}}this.subject=this.calcSubject(r,n)}calcSubject(e,n=""){return""===n?e:""!==e?`${e}.${n}`:n}addEndpoint(e="",n){const r="function"==typeof(n=n||{subject:e})?{handler:n,subject:e}:n;Xc("endpoint",e);let{subject:s,handler:i,schema:o}=r;return s=s||e,function Lk(t,e){if(""===e)throw new Error(`${t} cannot be empty`);if(-1!==e.indexOf(" "))throw new Error(`${t} cannot contain spaces: '${e}'`);const n=e.split(".");n.forEach((r,s)=>{if(">"===r&&s!==n.length-1)throw new Error(`${t} cannot have internal '>': '${e}'`)})}("endpoint subject",s),s=this.calcSubject(this.subject,s),this.srv._addEndpoint({name:e,subject:s,handler:i,schema:o})}addGroup(e=""){return new ko(this,e)}}class nu extends Error{constructor(e,n){super(n),g(this,"code"),this.code=e}static isServiceError(e){return null!==nu.toServiceError(e)}static toServiceError(e){var r,s;const n=(null==(r=null==e?void 0:e.headers)?void 0:r.get(tu))||"";if(""!==n){const i=parseInt(n)||400,o=(null==(s=null==e?void 0:e.headers)?void 0:s.get(eu))||"";return new nu(i,o.length?o:n)}return null}}class Fo extends Et{constructor(e,n={name:"",version:""}){var r,s,i;super(),g(this,"nc"),g(this,"_id"),g(this,"config"),g(this,"handlers"),g(this,"internal"),g(this,"_stopped"),g(this,"_done"),g(this,"_schema"),g(this,"started"),this.nc=e,this.config=n,Xc("name",this.config.name),as(this.config.version),this._id=No.next(),this.internal=[],this._done=xe(),this._stopped=!1,this.handlers=[],this.noIterator=!0,this.started=(new Date).toISOString(),this.reset(),this.config.endpoint&&this._addEndpoint({name:"default",subject:null==(r=this.config.endpoint)?void 0:r.subject,handler:null==(s=this.config.endpoint)?void 0:s.handler,schema:null==(i=this.config.endpoint)?void 0:i.schema},!0),this.nc.closed().then(()=>{this.close().catch()}).catch(o=>{this.close(o).catch()})}static controlSubject(e,n="",r="",s){const i=null!=s?s:"$SRV";return""===n&&""===r?`${i}.${e}`:(Xc("control subject name",n),""!==r?(Xc("control subject id",r),`${i}.${e}.${n}.${r}`):`${i}.${e}.${n}`)}get subjects(){return this.handlers.filter(e=>!1===e.internal).map(e=>e.subject)}get id(){return this._id}get name(){return this.config.name}get description(){var e;return null!=(e=this.config.description)?e:""}get version(){return this.config.version}errorToHeader(e){const n=ar();if(e instanceof nu){const r=e;n.set(eu,r.message),n.set(tu,`${r.code}`)}else n.set(eu,e.message),n.set(tu,"500");return n}setupHandler(e,n=!1){const r=n?"":"q",{name:s,subject:i,handler:o,schema:a}=e,c=e;c.internal=n,n&&this.internal.push(c),c.stats=new Bk(s,i),c.schema=a;const u=o?(l,d)=>{if(l)return void this.close(l);const f=Date.now();try{o(l,new yw(d))}catch(h){c.stats.countError(h),null==d||d.respond(at,{headers:this.errorToHeader(h)})}finally{c.stats.countLatency(f)}}:void 0;return c.sub=this.nc.subscribe(i,{callback:u,queue:r}),c.sub.closed.then(()=>{this._stopped||this.close(new Error(`required subscription ${e.subject} stopped`)).catch()}).catch(l=>{if(!this._stopped){const d=new Error(`required subscription ${e.subject} errored: ${l.message}`);d.stack=l.stack,this.close(d).catch()}}),c}info(){return{type:cs.INFO,name:this.name,id:this.id,version:this.version,description:this.description,subjects:this.subjects}}stats(){var e=this;return R(function*(){const n=[];for(const r of e.handlers){if("function"==typeof e.config.statsHandler)try{r.stats.data=yield e.config.statsHandler(r)}catch(s){r.stats.countError(s)}n.push(r.stats.stats(r.qi))}return{type:cs.STATS,name:e.name,id:e.id,version:e.version,started:e.started,endpoints:n}})()}addInternalHandler(e,n){const r=`${e}`.toUpperCase();this._doAddInternalHandler(`${r}-all`,e,n),this._doAddInternalHandler(`${r}-kind`,e,n,this.name),this._doAddInternalHandler(`${r}`,e,n,this.name,this.id)}_doAddInternalHandler(e,n,r,s="",i=""){const o={};o.name=e,o.subject=Fo.controlSubject(n,s,i),o.handler=r,this.setupHandler(o,!0)}start(){const e=Hn(),s=e.encode({type:cs.PING,name:this.name,id:this.id,version:this.version});return this.addInternalHandler(_n.PING,(a,c)=>a?(this.close(a).then().catch(),Promise.reject(a)):(c.respond(s),Promise.resolve())),this.addInternalHandler(_n.STATS,(a,c)=>a?(this.close(a),Promise.reject(a)):this.stats().then(u=>(null==c||c.respond(e.encode(u)),Promise.resolve()))),this.addInternalHandler(_n.INFO,(a,c)=>a?(this.close(a),Promise.reject(a)):(null==c||c.respond(e.encode(this.info())),Promise.resolve())),this.addInternalHandler(_n.SCHEMA,(a,c)=>a?(this.close(a),Promise.reject(a)):(null==c||c.respond(Hn().encode(this.schema())),Promise.resolve())),this.handlers.forEach(a=>{const{subject:c}=a;"string"==typeof c&&null!==a.handler&&this.setupHandler(a)}),Promise.resolve(this)}close(e){if(this._stopped)return this._done;this._stopped=!0;let n=[];return this.nc.isClosed()||(n=this.handlers.concat(this.internal).map(r=>r.sub.drain())),Promise.allSettled(n).then(()=>{this._done.resolve(e||null)}),this._done}get stopped(){return this._done}get isStopped(){return this._stopped}stop(e){return this.close(e)}schema(){const e={type:cs.SCHEMA,name:this.name,id:this.id,version:this.version,api_url:this.config.apiURL,endpoints:[]};return e.endpoints=this.handlers.map(n=>{const{schema:r,subject:s,name:i}=n;return{schema:r,subject:s,name:i}}),e}reset(){if(this.started=(new Date).toISOString(),this.handlers)for(const e of this.handlers)e.stats.reset(e.qi)}addGroup(e){return new ko(this,e)}addEndpoint(e,n){return new ko(this).addEndpoint(e,n)}_addEndpoint(e,n=!1){const r=n?this:new Et;r.noIterator="function"==typeof e.handler,r.noIterator||(e.handler=(i,o)=>{i?this.stop(i).catch():r.push(new yw(o))},r.iterClosed.then(()=>{this.close().catch()}));const s=this.setupHandler(e,!1);return s.qi=r,this.handlers.push(s),r}}class Bk{constructor(e,n){g(this,"name"),g(this,"subject"),g(this,"average_processing_time"),g(this,"num_requests"),g(this,"processing_time"),g(this,"num_errors"),g(this,"last_error"),g(this,"data"),this.name=e,this.subject=n,this.average_processing_time=0,this.num_errors=0,this.num_requests=0,this.processing_time=0}reset(e){this.num_requests=0,this.processing_time=0,this.average_processing_time=0,this.num_errors=0,this.last_error=void 0,this.data=void 0;const n=e;n&&(n.time=0,n.processed=0)}countLatency(e){this.num_requests++,this.processing_time+=ze(Date.now()-e),this.average_processing_time=Math.round(this.processing_time/this.num_requests)}countError(e){this.num_errors++,this.last_error=e.message}_stats(){const{name:e,subject:n,average_processing_time:r,num_errors:s,num_requests:i,processing_time:o,last_error:a,data:c}=this;return{name:e,subject:n,average_processing_time:r,num_errors:s,num_requests:i,processing_time:o,last_error:a,data:c}}stats(e){const n=e;return!1===(null==n?void 0:n.noIterator)&&(this.processing_time=n.time,this.num_requests=n.processed,this.average_processing_time=this.processing_time>0&&this.num_requests>0?this.processing_time/this.num_requests:0),this._stats()}}class Lo{constructor(e,n){g(this,"nc"),g(this,"opts"),g(this,"prefix"),g(this,"timeout"),g(this,"jc"),this.nc=e,this.opts=function Uk(t){return(t=t||{}).domain&&(t.apiPrefix=`$JS.${t.domain}.API`,delete t.domain),Yc({apiPrefix:"$JS.API",timeout:5e3},t)}(n),this._parseOpts(),this.prefix=this.opts.apiPrefix,this.timeout=this.opts.timeout,this.jc=Hn()}_parseOpts(){let e=this.opts.apiPrefix;if(!e||0===e.length)throw new Error("invalid empty prefix");"."===e[e.length-1]&&(e=e.substr(0,e.length-1)),this.opts.apiPrefix=e}_request(e,n=null,r){var s=this;return R(function*(){(r=r||{}).timeout=s.timeout;let i=at;n&&(i=s.jc.encode(n));const o=yield s.nc.request(e,i,r);return s.parseJsResponse(o)})()}findStream(e){var n=this;return R(function*(){const r={subject:e},i=yield n._request(`${n.prefix}.STREAM.NAMES`,r);if(!i.streams||1!==i.streams.length)throw new Error("no stream matches subject");return i.streams[0]})()}parseJsResponse(e){const n=this.jc.decode(e.data),r=n;if(r.error){const s=mw(r.error.code,r.error.description);if(null!==s)throw s.api_error=r.error,s}return n}}class jo{constructor(e,n,r,s){if(g(this,"err"),g(this,"offset"),g(this,"pageInfo"),g(this,"subject"),g(this,"jsm"),g(this,"filter"),g(this,"payload"),!e)throw new Error("subject is required");this.subject=e,this.jsm=r,this.offset=0,this.pageInfo={},this.filter=n,this.payload=s||{}}next(){var e=this;return R(function*(){if(e.err)return[];if(e.pageInfo&&e.offset>=e.pageInfo.total)return[];const n={offset:e.offset};e.payload&&Object.assign(n,e.payload);try{const r=yield e.jsm._request(e.subject,n,{timeout:e.jsm.timeout});return e.pageInfo=r,e.offset+=e.countResponse(r),e.filter(r)}catch(r){throw e.err=r,r}})()}countResponse(e){var n;switch(null==e?void 0:e.type){case"io.nats.jetstream.api.v1.stream_names_response":case"io.nats.jetstream.api.v1.stream_list_response":return e.streams.length;case"io.nats.jetstream.api.v1.consumer_list_response":return e.consumers.length;default:return console.error(`jslister.ts: unknown API response for paged output: ${null==e?void 0:e.type}`),(null==(n=e.streams)?void 0:n.length)||0}return 0}[Symbol.asyncIterator](){var e=this;return ch(function*(){let n=yield Gc(e.next());for(;n.length>0;){for(const r of n)yield r;n=yield Gc(e.next())}})()}}class vw extends Lo{constructor(e,n){super(e,n)}add(e,n){var r=this;return R(function*(){var f,h,y;if(xt(e),n.deliver_group&&n.flow_control)throw new Error("jetstream flow control is not supported with queue groups");if(n.deliver_group&&n.idle_heartbeat)throw new Error("jetstream idle heartbeat is not supported with queue groups");const s={};s.config=n,s.stream_name=e,s.config.durable_name&&pi(s.config.durable_name);const i=r.nc,{min:o,ok:a}=i.features.get(St.JS_NEW_CONSUMER_CREATE_API),c=""===n.name?void 0:n.name;if(c&&!a)throw new Error(`consumer 'name' requires server ${o}`);if(c){const _=pw(c);if(_.length)throw new Error(`consumer 'name' ${_}`)}let u,l="";if(a&&(l=null!=(h=null!=(f=n.name)?f:n.durable_name)?h:""),""!==l){let _=null!=(y=n.filter_subject)?y:void 0;">"===_&&(_=void 0),u=void 0!==_?`${r.prefix}.CONSUMER.CREATE.${e}.${l}.${_}`:`${r.prefix}.CONSUMER.CREATE.${e}.${l}`}else u=n.durable_name?`${r.prefix}.CONSUMER.DURABLE.CREATE.${e}.${n.durable_name}`:`${r.prefix}.CONSUMER.CREATE.${e}`;return yield r._request(u,s)})()}update(e,n,r){var s=this;return R(function*(){const i=yield s.info(e,n);return s.add(e,Object.assign(i.config,r))})()}info(e,n){var r=this;return R(function*(){return xt(e),pi(n),yield r._request(`${r.prefix}.CONSUMER.INFO.${e}.${n}`)})()}delete(e,n){var r=this;return R(function*(){return xt(e),pi(n),(yield r._request(`${r.prefix}.CONSUMER.DELETE.${e}.${n}`)).success})()}list(e){return xt(e),new jo(`${this.prefix}.CONSUMER.LIST.${e}`,s=>s.consumers,this)}}class bw{constructor(e,n){g(this,"token"),g(this,"received"),g(this,"ctx"),g(this,"requestSubject"),g(this,"mux"),this.mux=e,this.requestSubject=n,this.received=0,this.token=No.next(),this.ctx=new Error}}class Hk extends bw{constructor(e,n,r={maxWait:1e3}){if(super(e,n),g(this,"callback"),g(this,"done"),g(this,"timer"),g(this,"max"),g(this,"opts"),this.opts=r,"function"!=typeof this.opts.callback)throw new Error("callback is required");this.callback=this.opts.callback,this.max="number"==typeof r.maxMessages&&r.maxMessages>0?r.maxMessages:-1,this.done=xe(),this.done.then(()=>{this.callback(null,null)}),this.timer=setTimeout(()=>{this.cancel()},r.maxWait)}cancel(e){e&&this.callback(e,null),clearTimeout(this.timer),this.mux.cancel(this),this.done.resolve()}resolver(e,n){e?(e.stack+=`\n\n${this.ctx.stack}`,this.cancel(e)):(this.callback(null,n),this.opts.strategy===vn.Count&&(this.max--,0===this.max&&this.cancel()),this.opts.strategy===vn.JitterTimer&&(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.cancel()},this.opts.jitter||300)),this.opts.strategy===vn.SentinelMsg&&n&&0===n.data.length&&this.cancel())}}class _w extends bw{constructor(e,n,r={timeout:1e3}){super(e,n),g(this,"deferred"),g(this,"timer"),this.deferred=xe(),this.timer=Zc(r.timeout)}resolver(e,n){this.timer&&this.timer.cancel(),e?(e.stack+=`\n\n${this.ctx.stack}`,this.deferred.reject(e)):this.deferred.resolve(n),this.cancel()}cancel(e){this.timer&&this.timer.cancel(),this.mux.cancel(this),this.deferred.reject(e||j.errorForCode(O.Cancelled))}}const ww=Uint8Array.of(43,65,67,75),Vk=Uint8Array.of(45,78,65,75),Bo=Uint8Array.of(43,87,80,73),qk=Uint8Array.of(43,78,88,84),zk=Uint8Array.of(43,84,69,82,77),Gk=Uint8Array.of(32);function ru(t){return new Kk(t)}class Kk{constructor(e){g(this,"msg"),g(this,"di"),g(this,"didAck"),this.msg=e,this.didAck=!1}get subject(){return this.msg.subject}get sid(){return this.msg.sid}get data(){return this.msg.data}get headers(){return this.msg.headers}get info(){return this.di||(this.di=function Wk(t){const e=t.split(".");if(9===e.length&&e.splice(2,0,"_",""),e.length<11||"$JS"!==e[0]||"ACK"!==e[1])throw new Error("not js message");const n={};return n.domain="_"===e[2]?"":e[2],n.account_hash=e[3],n.stream=e[4],n.consumer=e[5],n.redeliveryCount=parseInt(e[6],10),n.redelivered=n.redeliveryCount>1,n.streamSequence=parseInt(e[7],10),n.deliverySequence=parseInt(e[8],10),n.timestampNanos=parseInt(e[9],10),n.pending=parseInt(e[10],10),n}(this.reply)),this.di}get redelivered(){return this.info.redeliveryCount>1}get reply(){return this.msg.reply||""}get seq(){return this.info.streamSequence}doAck(e){this.didAck||(this.didAck=!this.isWIP(e),this.msg.respond(e))}isWIP(e){return 4===e.length&&e[0]===Bo[0]&&e[1]===Bo[1]&&e[2]===Bo[2]&&e[3]===Bo[3]}ackAck(){var e=this;return R(function*(){if(!e.didAck&&(e.didAck=!0,e.msg.reply)){const r=e.msg.publisher,s=new _w(r.muxSubscriptions,e.msg.reply);r.request(s);try{r.publish(e.msg.reply,ww,{reply:`${r.muxSubscriptions.baseInbox}${s.token}`})}catch(i){s.cancel(i)}try{return yield Promise.race([s.timer,s.deferred]),!0}catch(i){s.cancel(i)}}return!1})()}ack(){this.doAck(ww)}nak(e){let n=Vk;e&&(n=ow().encode(`-NAK ${JSON.stringify({delay:ze(e)})}`)),this.doAck(n)}working(){this.doAck(Bo)}next(e,n={batch:1}){const r={};r.batch=n.batch||1,r.no_wait=n.no_wait||!1,n.expires&&n.expires>0&&(r.expires=ze(n.expires));const s=Hn().encode(r),i=Ro.concat(qk,Gk,s);this.msg.respond(i,e?{reply:e}:void 0)}term(){this.doAck(zk)}}function mi(t,e,n=!1){if(!0===n&&!t)throw j.errorForCode(O.ApiError,new Error(`${e} is not a function`));if(t&&"function"!=typeof t)throw j.errorForCode(O.ApiError,new Error(`${e} is not a function`))}class Jk extends Et{constructor(e,n,r){var s;super(),g(this,"sub"),g(this,"adapter"),g(this,"subIterDone"),s=this,mi(r.adapter,"adapter",!0),this.adapter=r.adapter,r.callback&&mi(r.callback,"callback"),this.noIterator="function"==typeof r.callback,r.ingestionFilterFn&&(mi(r.ingestionFilterFn,"ingestionFilterFn"),this.ingestionFilterFn=r.ingestionFilterFn),r.protocolFilterFn&&(mi(r.protocolFilterFn,"protocolFilterFn"),this.protocolFilterFn=r.protocolFilterFn),r.dispatchedFn&&(mi(r.dispatchedFn,"dispatchedFn"),this.dispatchedFn=r.dispatchedFn),r.cleanupFn&&mi(r.cleanupFn,"cleanupFn");let i=(l,d)=>{this.callback(l,d)};if(r.callback){const l=r.callback;i=(d,f)=>{const[h,y]=this.adapter(d,f);if(h)return void l(h,null);const{ingest:_}=this.ingestionFilterFn?this.ingestionFilterFn(y,this):{ingest:!0};_&&(!this.protocolFilterFn||this.protocolFilterFn(y))&&(l(h,y),this.dispatchedFn&&y&&this.dispatchedFn(y))}}const{max:o,queue:a,timeout:c}=r,u={queue:a,timeout:c,callback:i};var l;o&&o>0&&(u.max=o),this.sub=e.subscribe(n,u),r.cleanupFn&&(this.sub.cleanupFn=r.cleanupFn),this.noIterator||this.iterClosed.then(()=>{this.unsubscribe()}),this.subIterDone=xe(),Promise.all([this.sub.closed,this.iterClosed]).then(()=>{this.subIterDone.resolve()}).catch(()=>{this.subIterDone.resolve()}),(l=R(function*(d){yield d.closed,s.stop()}),function(d){return l.apply(this,arguments)})(this.sub).then().catch()}unsubscribe(e){this.sub.unsubscribe(e)}drain(){return this.sub.drain()}isDraining(){return this.sub.isDraining()}isClosed(){return this.sub.isClosed()}callback(e,n){this.sub.cancelTimeout();const[r,s]=this.adapter(e,n);r&&this.stop(r),s&&this.push(s)}getSubject(){return this.sub.getSubject()}getReceived(){return this.sub.getReceived()}getProcessed(){return this.sub.getProcessed()}getPending(){return this.sub.getPending()}getID(){return this.sub.getID()}getMax(){return this.sub.getMax()}get closed(){return this.sub.closed}}let $t;function Dw(){return void 0!==$t&&void 0!==$t.defaultPort?$t.defaultPort:4222}function gh(){return void 0!==$t&&$t.urlParseFn?$t.urlParseFn:void 0}function Cw(){return void 0!==$t&&$t.dnsResolveFn?$t.dnsResolveFn:void 0}function mh(t){return void 0!==function nF(t){for(let e=0;e<t.length;e++)switch(t[e]){case".":return xw(t);case":":return rF(t)}}(t)}function xw(t){const e=new Uint8Array(4);for(let n=0;n<4;n++){if(0===t.length)return;if(n>0){if("."!==t[0])return;t=t.substring(1)}const{n:r,c:s,ok:i}=sF(t);if(!i||r>255)return;t=t.substring(s),e[n]=r}return function tF(t,e,n,r){const s=new Uint8Array(16);return[0,0,0,0,0,0,0,0,0,0,255,255].forEach((o,a)=>{s[a]=o}),s[12]=t,s[13]=e,s[14]=n,s[15]=r,s}(e[0],e[1],e[2],e[3])}function rF(t){const e=new Uint8Array(16);let n=-1;if(t.length>=2&&":"===t[0]&&":"===t[1]&&(n=0,0===(t=t.substring(2)).length))return e;let r=0;for(;r<16;){const{n:s,c:i,ok:o}=iF(t);if(!o||s>65535)return;if(i<t.length&&"."===t[i]){if(n<0&&12!=r||r+4>16)return;const a=xw(t);if(void 0===a)return;e[r]=a[12],e[r+1]=a[13],e[r+2]=a[14],e[r+3]=a[15],t="",r+=4;break}if(e[r]=s>>8,e[r+1]=s,r+=2,0===(t=t.substring(i)).length)break;if(":"!==t[0]||1==t.length)return;if(":"===(t=t.substring(1))[0]){if(n>=0)return;if(n=r,0===(t=t.substring(1)).length)break}}if(0===t.length){if(r<16){if(n<0)return;const s=16-r;for(let i=r-1;i>=n;i--)e[i+s]=e[i];for(let i=n+s-1;i>=n;i--)e[i]=0}else if(n>=0)return;return e}}function sF(t){let e=0,n=0;for(e=0;e<t.length&&48<=t.charCodeAt(e)&&t.charCodeAt(e)<=57;e++)if(n=10*n+(t.charCodeAt(e)-48),n>=16777215)return{n:16777215,c:e,ok:!1};return 0===e?{n:0,c:0,ok:!1}:{n,c:e,ok:!0}}function iF(t){let e=0,n=0;for(n=0;n<t.length;n++){if(48<=t.charCodeAt(n)&&t.charCodeAt(n)<=57)e*=16,e+=t.charCodeAt(n)-48;else if(97<=t.charCodeAt(n)&&t.charCodeAt(n)<=102)e*=16,e+=t.charCodeAt(n)-97+10;else{if(!(65<=t.charCodeAt(n)&&t.charCodeAt(n)<=70))break;e*=16,e+=t.charCodeAt(n)-65+10}if(e>=16777215)return{n:0,c:n,ok:!1}}return 0===n?{n:0,c:n,ok:!1}:{n:e,c:n,ok:!0}}function yh(t){return!function oF(t){return-1!==t.indexOf(".")||-1===t.indexOf("[")&&-1===t.indexOf("::")&&t.split(":").length<=2}(t)}class $o{constructor(e,n=!1){g(this,"src"),g(this,"listen"),g(this,"hostname"),g(this,"port"),g(this,"didConnect"),g(this,"reconnects"),g(this,"lastConnect"),g(this,"gossiped"),g(this,"tlsName"),g(this,"resolves"),this.src=e,this.tlsName="";const r=function aF(t){(t=t.trim()).match(/^(.*:\/\/)(.*)/m)&&(t=t.replace(/^(.*:\/\/)(.*)/gm,"$2")),yh(t)&&-1===t.indexOf("[")&&(t=`[${t}]`);const e=yh(t)?t.match(/(]:)(\d+)/):t.match(/(:)(\d+)/),n=e&&3===e.length&&e[1]&&e[2]?parseInt(e[2]):4222,s=new URL(`${80===n?"https":"http"}://${t}`);s.port=`${n}`;let i=s.hostname;return"["===i.charAt(0)&&(i=i.substring(1,i.length-1)),{listen:s.host,hostname:i,port:n}}(e);this.listen=r.listen,this.hostname=r.hostname,this.port=r.port,this.didConnect=!1,this.reconnects=0,this.lastConnect=0,this.gossiped=n}toString(){return this.listen}resolve(e){var n=this;return R(function*(){if(!e.fn)return[n];const r=[];if(mh(n.hostname))return[n];{const s=yield e.fn(n.hostname);e.debug&&console.log(`resolve ${n.hostname} = ${s.join(",")}`);for(const i of s){const a=new URL(`${80===n.port?"https":"http"}://${yh(i)?"["+i+"]":i}`);a.port=`${n.port}`;const c=new $o(a.host,!1);c.tlsName=n.hostname,r.push(c)}}return e.randomize&&sw(r),n.resolves=r,r})()}}class cF{constructor(e=[],n={}){g(this,"firstSelect"),g(this,"servers"),g(this,"currentServer"),g(this,"tlsName"),g(this,"randomize"),this.firstSelect=!0,this.servers=[],this.tlsName="",this.randomize=n.randomize||!1;const r=gh();e&&(e.forEach(s=>{s=r?r(s):s,this.servers.push(new $o(s))}),this.randomize&&(this.servers=sw(this.servers))),0===this.servers.length&&this.addServer(`${uh}:${Dw()}`,!1),this.currentServer=this.servers[0]}clear(){this.servers.length=0}updateTLSName(){const e=this.getCurrentServer();mh(e.hostname)||(this.tlsName=e.hostname,this.servers.forEach(n=>{n.gossiped&&(n.tlsName=this.tlsName)}))}getCurrentServer(){return this.currentServer}addServer(e,n=!1){const r=gh();e=r?r(e):e;const s=new $o(e,n);mh(s.hostname)&&(s.tlsName=this.tlsName),this.servers.push(s)}selectServer(){if(this.firstSelect)return this.firstSelect=!1,this.currentServer;const e=this.servers.shift();return e&&(this.servers.push(e),this.currentServer=e),e}removeCurrentServer(){this.removeServer(this.currentServer)}removeServer(e){if(e){const n=this.servers.indexOf(e);this.servers.splice(n,1)}}length(){return this.servers.length}next(){return this.servers.length?this.servers[0]:void 0}getServers(){return this.servers}update(e){const n=[];let r=[];const s=gh(),i=new Map;e.connect_urls&&e.connect_urls.length>0&&e.connect_urls.forEach(a=>{a=s?s(a):a;const c=new $o(a,!0);i.set(a,c)});const o=[];return this.servers.forEach((a,c)=>{const u=a.listen;a.gossiped&&this.currentServer.listen!==u&&void 0===i.get(u)&&o.push(c),i.delete(u)}),o.reverse(),o.forEach(a=>{const c=this.servers.splice(a,1);r=r.concat(c[0].listen)}),i.forEach((a,c)=>{this.servers.push(a),n.push(c)}),{added:n,deleted:r}}}class Sw extends Et{constructor(e,n,r={}){super(),g(this,"sid"),g(this,"queue"),g(this,"draining"),g(this,"max"),g(this,"subject"),g(this,"drained"),g(this,"protocol"),g(this,"timer"),g(this,"info"),g(this,"cleanupFn"),g(this,"closed"),g(this,"requestSubject"),Yc(this,r),this.protocol=e,this.subject=n,this.draining=!1,this.noIterator="function"==typeof r.callback,this.closed=xe(),r.timeout&&(this.timer=Zc(r.timeout),this.timer.then(()=>{this.timer=void 0}).catch(s=>{this.stop(s),this.noIterator&&this.callback(s,{})})),this.noIterator||this.iterClosed.then(()=>{this.closed.resolve(),this.unsubscribe()})}setPrePostHandlers(e){if(this.noIterator){const n=this.callback,r=e.ingestionFilterFn?e.ingestionFilterFn:()=>({ingest:!0,protocol:!1}),s=e.protocolFilterFn?e.protocolFilterFn:()=>!0,i=e.dispatchedFn?e.dispatchedFn:()=>{};this.callback=(o,a)=>{const{ingest:c}=r(a);!c||s(a)&&(n(o,a),i(a))}}else this.protocolFilterFn=e.protocolFilterFn,this.dispatchedFn=e.dispatchedFn}callback(e,n){this.cancelTimeout(),e?this.stop(e):this.push(n)}close(){if(!this.isClosed()){this.cancelTimeout();const e=()=>{if(this.stop(),this.cleanupFn)try{this.cleanupFn(this,this.info)}catch(n){}this.closed.resolve()};this.noIterator?e():this.push(e)}}unsubscribe(e){this.protocol.unsubscribe(this,e)}cancelTimeout(){this.timer&&(this.timer.cancel(),this.timer=void 0)}drain(){return this.protocol.isClosed()?Promise.reject(j.errorForCode(O.ConnectionClosed)):this.isClosed()?Promise.reject(j.errorForCode(O.SubClosed)):(this.drained||(this.protocol.unsub(this),this.drained=this.protocol.flush(xe()).then(()=>{this.protocol.subscriptions.cancel(this)}).catch(()=>{this.protocol.subscriptions.cancel(this)})),this.drained)}isDraining(){return this.draining}isClosed(){return this.done}getSubject(){return this.subject}getMax(){return this.max}getID(){return this.sid}}class uF{constructor(){g(this,"mux"),g(this,"subs"),g(this,"sidCounter"),this.sidCounter=0,this.mux=null,this.subs=new Map}size(){return this.subs.size}add(e){return this.sidCounter++,e.sid=this.sidCounter,this.subs.set(e.sid,e),e}setMux(e){return this.mux=e,e}getMux(){return this.mux}get(e){return this.subs.get(e)}resub(e){return this.sidCounter++,this.subs.delete(e.sid),e.sid=this.sidCounter,this.subs.set(e.sid,e),e}all(){return Array.from(this.subs.values())}cancel(e){e&&(e.close(),this.subs.delete(e.sid))}handleError(e){if(e&&e.permissionContext){const n=e.permissionContext,r=this.all();let s;if("subscription"===n.operation&&(s=r.find(i=>i.subject===n.subject)),"publish"===n.operation&&(s=r.find(i=>i.requestSubject===n.subject)),s)return s.callback(e,{}),s.close(),this.subs.delete(s.sid),s!==this.mux}return!1}close(){this.subs.forEach(e=>{e.close()})}}class lF{constructor(e,n,r){g(this,"ph"),g(this,"interval"),g(this,"maxOut"),g(this,"timer"),g(this,"pendings"),this.ph=e,this.interval=n,this.maxOut=r,this.pendings=[]}start(){this.cancel(),this._schedule()}cancel(e){this.timer&&(clearTimeout(this.timer),this.timer=void 0),this._reset(),e&&this.ph.disconnect()}_schedule(){this.timer=setTimeout(()=>{if(this.ph.dispatchStatus({type:fi.PingTimer,data:`${this.pendings.length+1}`}),this.pendings.length===this.maxOut)return void this.cancel(!0);const e=xe();this.ph.flush(e).then(()=>{this._reset()}).catch(()=>{this.cancel()}),this.pendings.push(e),this._schedule()},this.interval)}_reset(){this.pendings=this.pendings.filter(e=>(e.resolve(),!1))}}class dF extends Error{constructor(e){super(e),this.name="AssertionError"}}const vh=2**32-2;function su(t,e,n=0){const r=e.byteLength-n;return t.byteLength>r&&(t=t.subarray(0,r)),e.set(t,n),t.byteLength}class bh{constructor(e){g(this,"_buf"),g(this,"_off"),this._off=0,this._buf=null!=e?new Uint8Array(e):new Uint8Array(0)}bytes(e={copy:!0}){return!1===e.copy?this._buf.subarray(this._off):this._buf.slice(this._off)}empty(){return this._buf.byteLength<=this._off}get length(){return this._buf.byteLength-this._off}get capacity(){return this._buf.buffer.byteLength}truncate(e){if(0!==e){if(e<0||e>this.length)throw Error("bytes.Buffer: truncation out of range");this._reslice(this._off+e)}else this.reset()}reset(){this._reslice(0),this._off=0}_tryGrowByReslice(e){const n=this._buf.byteLength;return e<=this.capacity-n?(this._reslice(n+e),n):-1}_reslice(e){(function fF(t,e="Assertion failed."){if(!t)throw new dF(e)})(e<=this._buf.buffer.byteLength),this._buf=new Uint8Array(this._buf.buffer,0,e)}readByte(){const e=new Uint8Array(1);return this.read(e)?e[0]:null}read(e){if(this.empty())return this.reset(),0===e.byteLength?0:null;const n=su(this._buf.subarray(this._off),e);return this._off+=n,n}writeByte(e){return this.write(Uint8Array.of(e))}writeString(e){return this.write(Mr.encode(e))}write(e){const n=this._grow(e.byteLength);return su(e,this._buf,n)}_grow(e){const n=this.length;0===n&&0!==this._off&&this.reset();const r=this._tryGrowByReslice(e);if(r>=0)return r;const s=this.capacity;if(e<=Math.floor(s/2)-n)su(this._buf.subarray(this._off),this._buf);else{if(s+e>vh)throw new Error("The buffer cannot be grown beyond the maximum size.");{const i=new Uint8Array(Math.min(2*s+e,vh));su(this._buf.subarray(this._off),i),this._buf=i}}return this._off=0,this._reslice(Math.min(n+e,vh)),n}grow(e){if(e<0)throw Error("Buffer._grow: negative count");const n=this._grow(e);this._reslice(n)}readFrom(e){let n=0;const r=new Uint8Array(32768);for(;;){const s=this.capacity-this.length<32768,i=s?r:new Uint8Array(this._buf.buffer,this.length),o=e.read(i);if(null===o)return n;s?this.write(i.subarray(0,o)):this._reslice(this.length+o),n+=o}}}var ct=(()=>{return(t=ct||(ct={}))[t.OK=0]="OK",t[t.ERR=1]="ERR",t[t.MSG=2]="MSG",t[t.INFO=3]="INFO",t[t.PING=4]="PING",t[t.PONG=5]="PONG",ct;var t})();class Mw{constructor(e){g(this,"dispatcher"),g(this,"state"),g(this,"as"),g(this,"drop"),g(this,"hdr"),g(this,"ma"),g(this,"argBuf"),g(this,"msgBuf"),this.dispatcher=e,this.state=N.OP_START,this.as=0,this.drop=0,this.hdr=0}parse(e){let n;for(n=0;n<e.length;n++){const r=e[n];switch(this.state){case N.OP_START:switch(r){case k.M:case k.m:this.state=N.OP_M,this.hdr=-1,this.ma={sid:-1,hdr:-1,size:-1};break;case k.H:case k.h:this.state=N.OP_H,this.hdr=0,this.ma={sid:-1,hdr:-1,size:-1};break;case k.P:case k.p:this.state=N.OP_P;break;case k.PLUS:this.state=N.OP_PLUS;break;case k.MINUS:this.state=N.OP_MINUS;break;case k.I:case k.i:this.state=N.OP_I;break;default:throw this.fail(e.subarray(n))}break;case N.OP_H:switch(r){case k.M:case k.m:this.state=N.OP_M;break;default:throw this.fail(e.subarray(n))}break;case N.OP_M:switch(r){case k.S:case k.s:this.state=N.OP_MS;break;default:throw this.fail(e.subarray(n))}break;case N.OP_MS:switch(r){case k.G:case k.g:this.state=N.OP_MSG;break;default:throw this.fail(e.subarray(n))}break;case N.OP_MSG:switch(r){case k.SPACE:case k.TAB:this.state=N.OP_MSG_SPC;break;default:throw this.fail(e.subarray(n))}break;case N.OP_MSG_SPC:switch(r){case k.SPACE:case k.TAB:continue;default:this.state=N.MSG_ARG,this.as=n}break;case N.MSG_ARG:switch(r){case k.CR:this.drop=1;break;case k.NL:{const s=this.argBuf?this.argBuf.bytes():e.subarray(this.as,n-this.drop);this.processMsgArgs(s),this.drop=0,this.as=n+1,this.state=N.MSG_PAYLOAD,n=this.as+this.ma.size-1;break}default:this.argBuf&&this.argBuf.writeByte(r)}break;case N.MSG_PAYLOAD:if(this.msgBuf)if(this.msgBuf.length>=this.ma.size){const s=this.msgBuf.bytes({copy:!1});this.dispatcher.push({kind:ct.MSG,msg:this.ma,data:s}),this.argBuf=void 0,this.msgBuf=void 0,this.state=N.MSG_END}else{let s=this.ma.size-this.msgBuf.length;const i=e.length-n;i<s&&(s=i),s>0?(this.msgBuf.write(e.subarray(n,n+s)),n=n+s-1):this.msgBuf.writeByte(r)}else n-this.as>=this.ma.size&&(this.dispatcher.push({kind:ct.MSG,msg:this.ma,data:e.subarray(this.as,n)}),this.argBuf=void 0,this.msgBuf=void 0,this.state=N.MSG_END);break;case N.MSG_END:if(r!==k.NL)continue;this.drop=0,this.as=n+1,this.state=N.OP_START;break;case N.OP_PLUS:switch(r){case k.O:case k.o:this.state=N.OP_PLUS_O;break;default:throw this.fail(e.subarray(n))}break;case N.OP_PLUS_O:switch(r){case k.K:case k.k:this.state=N.OP_PLUS_OK;break;default:throw this.fail(e.subarray(n))}break;case N.OP_PLUS_OK:r===k.NL&&(this.dispatcher.push({kind:ct.OK}),this.drop=0,this.state=N.OP_START);break;case N.OP_MINUS:switch(r){case k.E:case k.e:this.state=N.OP_MINUS_E;break;default:throw this.fail(e.subarray(n))}break;case N.OP_MINUS_E:switch(r){case k.R:case k.r:this.state=N.OP_MINUS_ER;break;default:throw this.fail(e.subarray(n))}break;case N.OP_MINUS_ER:switch(r){case k.R:case k.r:this.state=N.OP_MINUS_ERR;break;default:throw this.fail(e.subarray(n))}break;case N.OP_MINUS_ERR:switch(r){case k.SPACE:case k.TAB:this.state=N.OP_MINUS_ERR_SPC;break;default:throw this.fail(e.subarray(n))}break;case N.OP_MINUS_ERR_SPC:switch(r){case k.SPACE:case k.TAB:continue;default:this.state=N.MINUS_ERR_ARG,this.as=n}break;case N.MINUS_ERR_ARG:switch(r){case k.CR:this.drop=1;break;case k.NL:{let s;this.argBuf?(s=this.argBuf.bytes(),this.argBuf=void 0):s=e.subarray(this.as,n-this.drop),this.dispatcher.push({kind:ct.ERR,data:s}),this.drop=0,this.as=n+1,this.state=N.OP_START;break}default:this.argBuf&&this.argBuf.write(Uint8Array.of(r))}break;case N.OP_P:switch(r){case k.I:case k.i:this.state=N.OP_PI;break;case k.O:case k.o:this.state=N.OP_PO;break;default:throw this.fail(e.subarray(n))}break;case N.OP_PO:switch(r){case k.N:case k.n:this.state=N.OP_PON;break;default:throw this.fail(e.subarray(n))}break;case N.OP_PON:switch(r){case k.G:case k.g:this.state=N.OP_PONG;break;default:throw this.fail(e.subarray(n))}break;case N.OP_PONG:r===k.NL&&(this.dispatcher.push({kind:ct.PONG}),this.drop=0,this.state=N.OP_START);break;case N.OP_PI:switch(r){case k.N:case k.n:this.state=N.OP_PIN;break;default:throw this.fail(e.subarray(n))}break;case N.OP_PIN:switch(r){case k.G:case k.g:this.state=N.OP_PING;break;default:throw this.fail(e.subarray(n))}break;case N.OP_PING:r===k.NL&&(this.dispatcher.push({kind:ct.PING}),this.drop=0,this.state=N.OP_START);break;case N.OP_I:switch(r){case k.N:case k.n:this.state=N.OP_IN;break;default:throw this.fail(e.subarray(n))}break;case N.OP_IN:switch(r){case k.F:case k.f:this.state=N.OP_INF;break;default:throw this.fail(e.subarray(n))}break;case N.OP_INF:switch(r){case k.O:case k.o:this.state=N.OP_INFO;break;default:throw this.fail(e.subarray(n))}break;case N.OP_INFO:switch(r){case k.SPACE:case k.TAB:this.state=N.OP_INFO_SPC;break;default:throw this.fail(e.subarray(n))}break;case N.OP_INFO_SPC:switch(r){case k.SPACE:case k.TAB:continue;default:this.state=N.INFO_ARG,this.as=n}break;case N.INFO_ARG:switch(r){case k.CR:this.drop=1;break;case k.NL:{let s;this.argBuf?(s=this.argBuf.bytes(),this.argBuf=void 0):s=e.subarray(this.as,n-this.drop),this.dispatcher.push({kind:ct.INFO,data:s}),this.drop=0,this.as=n+1,this.state=N.OP_START;break}default:this.argBuf&&this.argBuf.writeByte(r)}break;default:throw this.fail(e.subarray(n))}}(this.state===N.MSG_ARG||this.state===N.MINUS_ERR_ARG||this.state===N.INFO_ARG)&&!this.argBuf&&(this.argBuf=new bh(e.subarray(this.as,n-this.drop))),this.state===N.MSG_PAYLOAD&&!this.msgBuf&&(this.argBuf||this.cloneMsgArg(),this.msgBuf=new bh(e.subarray(this.as)))}cloneMsgArg(){const e=this.ma.subject.length,r=new Uint8Array(e+(this.ma.reply?this.ma.reply.length:0));r.set(this.ma.subject),this.ma.reply&&r.set(this.ma.reply,e),this.argBuf=new bh(r),this.ma.subject=r.subarray(0,e),this.ma.reply&&(this.ma.reply=r.subarray(e))}processMsgArgs(e){if(this.hdr>=0)return this.processHeaderMsgArgs(e);const n=[];let r=-1;for(let s=0;s<e.length;s++)switch(e[s]){case k.SPACE:case k.TAB:case k.CR:case k.NL:r>=0&&(n.push(e.subarray(r,s)),r=-1);break;default:r<0&&(r=s)}switch(r>=0&&n.push(e.subarray(r)),n.length){case 3:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=void 0,this.ma.size=this.protoParseInt(n[2]);break;case 4:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=n[2],this.ma.size=this.protoParseInt(n[3]);break;default:throw this.fail(e,"processMsgArgs Parse Error")}if(this.ma.sid<0)throw this.fail(e,"processMsgArgs Bad or Missing Sid Error");if(this.ma.size<0)throw this.fail(e,"processMsgArgs Bad or Missing Size Error")}fail(e,n=""){return n=n?`${n} [${this.state}]`:`parse error [${this.state}]`,new Error(`${n}: ${bn.decode(e)}`)}processHeaderMsgArgs(e){const n=[];let r=-1;for(let s=0;s<e.length;s++)switch(e[s]){case k.SPACE:case k.TAB:case k.CR:case k.NL:r>=0&&(n.push(e.subarray(r,s)),r=-1);break;default:r<0&&(r=s)}switch(r>=0&&n.push(e.subarray(r)),n.length){case 4:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=void 0,this.ma.hdr=this.protoParseInt(n[2]),this.ma.size=this.protoParseInt(n[3]);break;case 5:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=n[2],this.ma.hdr=this.protoParseInt(n[3]),this.ma.size=this.protoParseInt(n[4]);break;default:throw this.fail(e,"processHeaderMsgArgs Parse Error")}if(this.ma.sid<0)throw this.fail(e,"processHeaderMsgArgs Bad or Missing Sid Error");if(this.ma.hdr<0||this.ma.hdr>this.ma.size)throw this.fail(e,"processHeaderMsgArgs Bad or Missing Header Size Error");if(this.ma.size<0)throw this.fail(e,"processHeaderMsgArgs Bad or Missing Size Error")}protoParseInt(e){if(0===e.length)return-1;let n=0;for(let r=0;r<e.length;r++){if(e[r]<48||e[r]>57)return-1;n=10*n+(e[r]-48)}return n}}var N=(()=>{return(t=N||(N={}))[t.OP_START=0]="OP_START",t[t.OP_PLUS=1]="OP_PLUS",t[t.OP_PLUS_O=2]="OP_PLUS_O",t[t.OP_PLUS_OK=3]="OP_PLUS_OK",t[t.OP_MINUS=4]="OP_MINUS",t[t.OP_MINUS_E=5]="OP_MINUS_E",t[t.OP_MINUS_ER=6]="OP_MINUS_ER",t[t.OP_MINUS_ERR=7]="OP_MINUS_ERR",t[t.OP_MINUS_ERR_SPC=8]="OP_MINUS_ERR_SPC",t[t.MINUS_ERR_ARG=9]="MINUS_ERR_ARG",t[t.OP_M=10]="OP_M",t[t.OP_MS=11]="OP_MS",t[t.OP_MSG=12]="OP_MSG",t[t.OP_MSG_SPC=13]="OP_MSG_SPC",t[t.MSG_ARG=14]="MSG_ARG",t[t.MSG_PAYLOAD=15]="MSG_PAYLOAD",t[t.MSG_END=16]="MSG_END",t[t.OP_H=17]="OP_H",t[t.OP_P=18]="OP_P",t[t.OP_PI=19]="OP_PI",t[t.OP_PIN=20]="OP_PIN",t[t.OP_PING=21]="OP_PING",t[t.OP_PO=22]="OP_PO",t[t.OP_PON=23]="OP_PON",t[t.OP_PONG=24]="OP_PONG",t[t.OP_I=25]="OP_I",t[t.OP_IN=26]="OP_IN",t[t.OP_INF=27]="OP_INF",t[t.OP_INFO=28]="OP_INFO",t[t.OP_INFO_SPC=29]="OP_INFO_SPC",t[t.INFO_ARG=30]="INFO_ARG",N;var t})(),k=(()=>{return(t=k||(k={}))[t.CR="\r".charCodeAt(0)]="CR",t[t.E="E".charCodeAt(0)]="E",t[t.e="e".charCodeAt(0)]="e",t[t.F="F".charCodeAt(0)]="F",t[t.f="f".charCodeAt(0)]="f",t[t.G="G".charCodeAt(0)]="G",t[t.g="g".charCodeAt(0)]="g",t[t.H="H".charCodeAt(0)]="H",t[t.h="h".charCodeAt(0)]="h",t[t.I="I".charCodeAt(0)]="I",t[t.i="i".charCodeAt(0)]="i",t[t.K="K".charCodeAt(0)]="K",t[t.k="k".charCodeAt(0)]="k",t[t.M="M".charCodeAt(0)]="M",t[t.m="m".charCodeAt(0)]="m",t[t.MINUS="-".charCodeAt(0)]="MINUS",t[t.N="N".charCodeAt(0)]="N",t[t.n="n".charCodeAt(0)]="n",t[t.NL="\n".charCodeAt(0)]="NL",t[t.O="O".charCodeAt(0)]="O",t[t.o="o".charCodeAt(0)]="o",t[t.P="P".charCodeAt(0)]="P",t[t.p="p".charCodeAt(0)]="p",t[t.PLUS="+".charCodeAt(0)]="PLUS",t[t.R="R".charCodeAt(0)]="R",t[t.r="r".charCodeAt(0)]="r",t[t.S="S".charCodeAt(0)]="S",t[t.s="s".charCodeAt(0)]="s",t[t.SPACE=" ".charCodeAt(0)]="SPACE",t[t.TAB="\t".charCodeAt(0)]="TAB",k;var t})();const gF=/^INFO\s+([^\r\n]+)\r\n/i;function Or(t=""){if("string"!=typeof(t=t||"_INBOX"))throw new Error("prefix must be a string");return`${t}.${No.next()}`}class mF{constructor(){g(this,"baseInbox"),g(this,"reqs"),this.reqs=new Map}size(){return this.reqs.size}init(e){return this.baseInbox=`${Or(e)}.`,this.baseInbox}add(e){isNaN(e.received)||(e.received=0),this.reqs.set(e.token,e)}get(e){return this.reqs.get(e)}cancel(e){this.reqs.delete(e.token)}getToken(e){const n=e.subject||"";return 0===n.indexOf(this.baseInbox)?n.substring(this.baseInbox.length):null}all(){return Array.from(this.reqs.values())}handleError(e,n){if(n&&n.permissionContext){if(e)return this.all().forEach(s=>{s.resolver(n,{})}),!0;const r=n.permissionContext;if("publish"===r.operation){const s=this.all().find(i=>i.requestSubject===r.subject);if(s)return s.resolver(n,{}),!0}}return!1}dispatcher(){return(e,n)=>{const r=this.getToken(n);if(r){const s=this.get(r);s&&(null===e&&n.headers&&(e=dw(n)),s.resolver(e,n))}}}close(){const e=j.errorForCode(O.Timeout);this.reqs.forEach(n=>{n.resolver(e,{})})}}const yF=Oo("PONG\r\n"),Tw=Oo("PING\r\n");class vF{constructor(e,n,r){g(this,"echo"),g(this,"no_responders"),g(this,"protocol"),g(this,"verbose"),g(this,"pedantic"),g(this,"jwt"),g(this,"nkey"),g(this,"sig"),g(this,"user"),g(this,"pass"),g(this,"auth_token"),g(this,"tls_required"),g(this,"name"),g(this,"lang"),g(this,"version"),g(this,"headers"),this.protocol=1,this.version=e.version,this.lang=e.lang,this.echo=!n.noEcho&&void 0,this.verbose=n.verbose,this.pedantic=n.pedantic,this.tls_required=!!n.tls||void 0,this.name=n.name,Yc(this,(n&&n.authenticator?n.authenticator(r):{})||{})}}class iu{constructor(e,n){g(this,"connected"),g(this,"connectedOnce"),g(this,"infoReceived"),g(this,"info"),g(this,"muxSubscriptions"),g(this,"options"),g(this,"outbound"),g(this,"pongs"),g(this,"subscriptions"),g(this,"transport"),g(this,"noMorePublishing"),g(this,"connectError"),g(this,"publisher"),g(this,"_closed"),g(this,"closed"),g(this,"listeners"),g(this,"heartbeats"),g(this,"parser"),g(this,"outMsgs"),g(this,"inMsgs"),g(this,"outBytes"),g(this,"inBytes"),g(this,"pendingLimit"),g(this,"lastError"),g(this,"abortReconnect"),g(this,"servers"),g(this,"server"),g(this,"features"),this._closed=!1,this.connected=!1,this.connectedOnce=!1,this.infoReceived=!1,this.noMorePublishing=!1,this.abortReconnect=!1,this.listeners=[],this.pendingLimit=32768,this.outMsgs=0,this.inMsgs=0,this.outBytes=0,this.inBytes=0,this.options=e,this.publisher=n,this.subscriptions=new uF,this.muxSubscriptions=new mF,this.outbound=new Ro,this.pongs=[],this.pendingLimit=e.pendingLimit||this.pendingLimit,this.features=new kk({major:0,minor:0,micro:0}),this.servers=new cF("string"==typeof e.servers?[e.servers]:e.servers,{randomize:!e.noRandomize}),this.closed=xe(),this.parser=new Mw(this),this.heartbeats=new lF(this,this.options.pingInterval||12e4,this.options.maxPingOut||2)}resetOutbound(){this.outbound.reset();const e=this.pongs;this.pongs=[];const n=j.errorForCode(O.Disconnect);n.stack="",e.forEach(r=>{r.reject(n)}),this.parser=new Mw(this),this.infoReceived=!1}dispatchStatus(e){this.listeners.forEach(n=>{n.push(e)})}status(){const e=new Et;return this.listeners.push(e),e}prepare(){var e=this;this.info=void 0,this.resetOutbound();const n=xe();return n.catch(()=>{}),this.pongs.unshift(n),this.connectError=r=>{n.reject(r)},this.transport=function Qk(){if(!$t||"function"!=typeof $t.factory)throw new Error("transport fn is not set");return $t.factory()}(),this.transport.closed().then(function(){var r=R(function*(s){e.connected=!1,e.isClosed()||(yield e.disconnected(e.transport.closeError||e.lastError))});return function(s){return r.apply(this,arguments)}}()),n}disconnect(){this.dispatchStatus({type:fi.StaleConnection,data:""}),this.transport.disconnect()}disconnected(e){var n=this;return R(function*(){n.dispatchStatus({type:Ar.Disconnect,data:n.servers.getCurrentServer().toString()}),n.options.reconnect?yield n.dialLoop().then(()=>{var r;n.dispatchStatus({type:Ar.Reconnect,data:n.servers.getCurrentServer().toString()}),(null==(r=n.lastError)?void 0:r.code)===O.AuthenticationExpired&&(n.lastError=void 0)}).catch(r=>{n._close(r)}):yield n._close(e)})()}dial(e){var n=this;return R(function*(){const r=n.prepare();let s;try{s=Zc(n.options.timeout||2e4);const i=n.transport.connect(e,n.options);yield Promise.race([i,s]),R(function*(){try{var c,o=!1,a=!1;try{for(var l,u=Ir(n.transport);o=!(l=yield u.next()).done;o=!1)n.parser.parse(l.value)}catch(d){a=!0,c=d}finally{try{o&&null!=u.return&&(yield u.return())}finally{if(a)throw c}}}catch(d){console.log("reader closed",d)}})().then()}catch(i){r.reject(i)}try{yield Promise.race([s,r]),s&&s.cancel(),n.connected=!0,n.connectError=void 0,n.sendSubscriptions(),n.connectedOnce=!0,n.server.didConnect=!0,n.server.reconnects=0,n.flushPending(),n.heartbeats.start()}catch(i){throw s&&s.cancel(),yield n.transport.close(i),i}})()}_doDial(e){var n=this;return R(function*(){const r=yield e.resolve({fn:Cw(),debug:n.options.debug,randomize:!n.options.noRandomize});let s=null;for(const i of r)try{return s=null,n.dispatchStatus({type:fi.Reconnecting,data:i.toString()}),void(yield n.dial(i))}catch(o){s=o}throw s})()}dialLoop(){var e=this;return R(function*(){let n;for(;;){e._closed&&e.servers.clear();const r=e.options.reconnectDelayHandler?e.options.reconnectDelayHandler():2e3;let s=r;const i=e.selectServer();if(!i||e.abortReconnect)throw n||(e.lastError?e.lastError:j.errorForCode(O.ConnectionRefused));const o=Date.now();if(0===i.lastConnect||i.lastConnect+r<=o){i.lastConnect=Date.now();try{yield e._doDial(i);break}catch(a){if(n=a,!e.connectedOnce){if(e.options.waitOnFirstConnect)continue;e.servers.removeCurrentServer()}i.reconnects++;const c=e.options.maxReconnectAttempts||0;-1!==c&&i.reconnects>=c&&e.servers.removeCurrentServer()}}else s=Math.min(s,i.lastConnect+r-o),yield lh(s)}})()}static connect(e,n){return R(function*(){const r=new iu(e,n);return yield r.dialLoop(),r})()}static toError(e){const n=e?e.toLowerCase():"";if(-1!==n.indexOf("permissions violation")){const r=new j(e,O.PermissionsViolation),s=e.match(/(Publish|Subscription) to "(\S+)"/);return s&&(r.permissionContext={operation:s[1].toLowerCase(),subject:s[2]}),r}return-1!==n.indexOf("authorization violation")?new j(e,O.AuthorizationViolation):-1!==n.indexOf("user authentication expired")?new j(e,O.AuthenticationExpired):new j(e,O.ProtocolError)}processMsg(e,n){if(this.inMsgs++,this.inBytes+=n.length,!this.subscriptions.sidCounter)return;const r=this.subscriptions.get(e.sid);!r||(r.received+=1,r.callback&&r.callback(null,new fw(e,n,this)),void 0!==r.max&&r.received>=r.max&&r.unsubscribe())}processError(e){const n=rw(e),r=iu.toError(n),s={type:Ar.Error,data:r.code};if(r.isPermissionError()){let i=!1;if(r.permissionContext){s.permissionContext=r.permissionContext;const o=this.subscriptions.getMux();i=(null==o?void 0:o.subject)===r.permissionContext.subject}this.subscriptions.handleError(r),this.muxSubscriptions.handleError(i,r),i&&this.subscriptions.setMux(null)}this.dispatchStatus(s),this.handleError(r)}handleError(e){e.isAuthError()&&this.handleAuthError(e),e.isProtocolError()&&(this.lastError=e),e.isPermissionError()||(this.lastError=e)}handleAuthError(e){this.lastError&&e.code===this.lastError.code&&!1===this.options.ignoreAuthErrorAbort&&(this.abortReconnect=!0),this.connectError?this.connectError(e):this.disconnect()}processPing(){this.transport.send(yF)}processPong(){const e=this.pongs.shift();e&&e.resolve()}processInfo(e){const n=JSON.parse(rw(e));this.info=n;const r=this.options&&this.options.ignoreClusterUpdates?void 0:this.servers.update(n);if(!this.infoReceived){this.features.update(as(n.version)),this.infoReceived=!0,this.transport.isEncrypted()&&this.servers.updateTLSName();const{version:i,lang:o}=this.transport;try{const a=new vF({version:i,lang:o},this.options,n.nonce);n.headers&&(a.headers=!0,a.no_responders=!0);const c=JSON.stringify(a);this.transport.send(Oo(`CONNECT ${c}\r\n`)),this.transport.send(Tw)}catch(a){this._close(a)}}r&&this.dispatchStatus({type:Ar.Update,data:r}),void 0!==n.ldm&&n.ldm&&this.dispatchStatus({type:Ar.LDM,data:this.servers.getCurrentServer().toString()})}push(e){switch(e.kind){case ct.MSG:{const{msg:n,data:r}=e;this.processMsg(n,r);break}case ct.OK:break;case ct.ERR:this.processError(e.data);break;case ct.PING:this.processPing();break;case ct.PONG:this.processPong();break;case ct.INFO:this.processInfo(e.data)}}sendCommand(e,...n){const r=this.outbound.length();let s;s="string"==typeof e?Oo(e):e,this.outbound.fill(s,...n),0===r?setTimeout(()=>{this.flushPending()}):this.outbound.size()>=this.pendingLimit&&this.flushPending()}publish(e,n,r){let s=n.length;(r=r||{}).reply=r.reply||"";let a,i=at,o=0;if(r.headers){if(this.info&&!this.info.headers)throw new j("headers",O.ServerOptionNotAvailable);i=r.headers.encode(),o=i.length,s=n.length+o}if(this.info&&s>this.info.max_payload)throw j.errorForCode(O.MaxPayloadExceeded);this.outBytes+=s,this.outMsgs++,r.headers?(a=r.reply?`HPUB ${e} ${r.reply} ${o} ${s}\r\n`:`HPUB ${e} ${o} ${s}\r\n`,this.sendCommand(a,i,n,Jc)):(a=r.reply?`PUB ${e} ${r.reply} ${s}\r\n`:`PUB ${e} ${s}\r\n`,this.sendCommand(a,n,Jc))}request(e){return this.initMux(),this.muxSubscriptions.add(e),e}subscribe(e){return this.subscriptions.add(e),this._subunsub(e),e}_sub(e){this.sendCommand(e.queue?`SUB ${e.subject} ${e.queue} ${e.sid}\r\n`:`SUB ${e.subject} ${e.sid}\r\n`)}_subunsub(e){return this._sub(e),e.max&&this.unsubscribe(e,e.max),e}unsubscribe(e,n){this.unsub(e,n),(void 0===e.max||e.received>=e.max)&&this.subscriptions.cancel(e)}unsub(e,n){!e||this.isClosed()||(this.sendCommand(n?`UNSUB ${e.sid} ${n}\r\n`:`UNSUB ${e.sid}\r\n`),e.max=n)}resub(e,n){!e||this.isClosed()||(e.subject=n,this.subscriptions.resub(e),this._sub(e))}flush(e){return e||(e=xe()),this.pongs.push(e),this.sendCommand(Tw),e}sendSubscriptions(){const e=[];this.subscriptions.all().forEach(n=>{e.push(n.queue?`SUB ${n.subject} ${n.queue} ${n.sid}\r\n`:`SUB ${n.subject} ${n.sid}\r\n`)}),e.length&&this.transport.send(Oo(e.join("")))}_close(e){var n=this;return R(function*(){n._closed||(n.heartbeats.cancel(),n.connectError&&(n.connectError(e),n.connectError=void 0),n.muxSubscriptions.close(),n.subscriptions.close(),n.listeners.forEach(r=>{r.stop()}),n._closed=!0,yield n.transport.close(e),yield n.closed.resolve(e))})()}close(){return this._close()}isClosed(){return this._closed}drain(){var e=this;const n=this.subscriptions.all(),r=[];return n.forEach(s=>{r.push(s.drain())}),Promise.all(r).then(R(function*(){return e.noMorePublishing=!0,yield e.flush(),e.close()})).catch(()=>{})}flushPending(){if(this.infoReceived&&this.connected&&this.outbound.size()){const e=this.outbound.drain();this.transport.send(e)}}initMux(){if(!this.subscriptions.getMux()){const n=this.muxSubscriptions.init(this.options.inboxPrefix),r=new Sw(this,`${n}*`);r.callback=this.muxSubscriptions.dispatcher(),this.subscriptions.setMux(r),this.subscribe(r)}}selectServer(){const e=this.servers.selectServer();if(void 0!==e)return this.server=e,this.server}getServer(){return this.server}}function Rr(t){return new bF(t)}class bF{constructor(e){g(this,"config"),g(this,"ordered"),g(this,"mack"),g(this,"stream"),g(this,"callbackFn"),g(this,"max"),g(this,"qname"),g(this,"isBind"),this.stream="",this.mack=!1,this.ordered=!1,this.config=function Pk(t,e={}){return Object.assign({name:t,deliver_policy:Ct.All,ack_policy:Je.Explicit,ack_wait:ze(3e4),replay_policy:is.Instant},e)}("",e||{})}getOpts(){const e={};return e.config=this.config,e.mack=this.mack,e.stream=this.stream,e.callbackFn=this.callbackFn,e.max=this.max,e.queue=this.qname,e.ordered=this.ordered,e.config.ack_policy=e.ordered?Je.None:e.config.ack_policy,e.isBind=e.isBind||!1,e}description(e){return this.config.description=e,this}deliverTo(e){return this.config.deliver_subject=e,this}durable(e){return pi(e),this.config.durable_name=e,this}startSequence(e){if(e<=0)throw new Error("sequence must be greater than 0");return this.config.deliver_policy=Ct.StartSequence,this.config.opt_start_seq=e,this}startTime(e){return this.config.deliver_policy=Ct.StartTime,this.config.opt_start_time=e.toISOString(),this}deliverAll(){return this.config.deliver_policy=Ct.All,this}deliverLastPerSubject(){return this.config.deliver_policy=Ct.LastPerSubject,this}deliverLast(){return this.config.deliver_policy=Ct.Last,this}deliverNew(){return this.config.deliver_policy=Ct.New,this}startAtTimeDelta(e){return this.startTime(new Date(Date.now()-e)),this}headersOnly(){return this.config.headers_only=!0,this}ackNone(){return this.config.ack_policy=Je.None,this}ackAll(){return this.config.ack_policy=Je.All,this}ackExplicit(){return this.config.ack_policy=Je.Explicit,this}ackWait(e){return this.config.ack_wait=ze(e),this}maxDeliver(e){return this.config.max_deliver=e,this}filterSubject(e){return this.config.filter_subject=e,this}replayInstantly(){return this.config.replay_policy=is.Instant,this}replayOriginal(){return this.config.replay_policy=is.Original,this}sample(e){if((e=Math.trunc(e))<0||e>100)throw new Error("value must be between 0-100");return this.config.sample_freq=`${e}%`,this}limit(e){return this.config.rate_limit_bps=e,this}maxWaiting(e){return this.config.max_waiting=e,this}maxAckPending(e){return this.config.max_ack_pending=e,this}idleHeartbeat(e){return this.config.idle_heartbeat=ze(e),this}flowControl(){return this.config.flow_control=!0,this}deliverGroup(e){return this.queue(e),this}manualAck(){return this.mack=!0,this}maxMessages(e){return this.max=e,this}callback(e){return this.callbackFn=e,this}queue(e){return this.qname=e,this.config.deliver_group=e,this}orderedConsumer(){return this.ordered=!0,this}bind(e,n){return this.stream=e,this.config.durable_name=n,this.isBind=!0,this}bindStream(e){return this.stream=e,this}inactiveEphemeralThreshold(e){return this.config.inactive_threshold=ze(e),this}maxPullBatch(e){return this.config.max_batch=e,this}maxPullRequestExpires(e){return this.config.max_expires=ze(e),this}memory(){return this.config.mem_storage=!0,this}numReplicas(e){return this.config.num_replicas=e,this}}function Pw(t){return"function"==typeof t.getOpts}class Ow{constructor(e,n,r={maxOut:2}){g(this,"interval"),g(this,"maxOut"),g(this,"cancelAfter"),g(this,"timer"),g(this,"autoCancelTimer"),g(this,"last"),g(this,"missed"),g(this,"count"),g(this,"callback"),this.interval=e,this.maxOut=(null==r?void 0:r.maxOut)||2,this.cancelAfter=(null==r?void 0:r.cancelAfter)||0,this.last=Date.now(),this.missed=0,this.count=0,this.callback=n,this._schedule()}cancel(){this.autoCancelTimer&&clearTimeout(this.autoCancelTimer),this.timer&&clearInterval(this.timer),this.timer=0,this.autoCancelTimer=0}work(){this.last=Date.now(),this.missed=0}_change(e,n=0,r=2){this.interval=e,this.maxOut=r,this.cancelAfter=n,this.restart()}restart(){this.cancel(),this._schedule()}_schedule(){this.cancelAfter>0&&(this.autoCancelTimer=setTimeout(()=>{this.cancel()},this.cancelAfter)),this.timer=setInterval(()=>{if(this.count++,Date.now()-this.interval>this.last&&this.missed++,this.missed>=this.maxOut)try{!0===this.callback(this.missed)&&this.cancel()}catch(e){console.log(e)}},this.interval)}}class Uo{static encode(e){return Uo.toB64URLEncoding(class _F{static encode(e){if("string"==typeof e)return btoa(e);const n=Array.from(e);return btoa(String.fromCharCode(...n))}static decode(e,n=!1){const r=atob(e);return n?Uint8Array.from(r,s=>s.charCodeAt(0)):r}}.encode(e))}static decode(e,n=!1){return Uo.decode(Uo.fromB64URLEncoding(e),n)}static toB64URLEncoding(e){return e.replace(/\+/g,"-").replace(/\//g,"_")}static fromB64URLEncoding(e){return e.replace(/_/g,"/").replace(/-/g,"+")}}function Rw(t){const e=t.length;let n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}const Nw=[],kw=[],_h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";for(let t=0,e=_h.length;t<e;++t)Nw[t]=_h[t],kw[_h.charCodeAt(t)]=t;const{toUint8Array:DF,fromUint8Array:CF}=function wF(t,e,n=!1){function r(o,a){return Math.floor(3*(o+a)/4-a)}function s(o){return t[o>>18&63]+t[o>>12&63]+t[o>>6&63]+t[63&o]}function i(o,a,c){const u=new Array((c-a)/3);for(let l=a,d=0;l<c;l+=3)u[d++]=s((o[l]<<16)+(o[l+1]<<8)+o[l+2]);return u.join("")}return{byteLength:o=>r.apply(null,Rw(o)),toUint8Array(o){const[a,c]=Rw(o),u=new Uint8Array(r(a,c)),l=c?a-4:a;let d,h,f=0;for(h=0;h<l;h+=4)d=e[o.charCodeAt(h)]<<18|e[o.charCodeAt(h+1)]<<12|e[o.charCodeAt(h+2)]<<6|e[o.charCodeAt(h+3)],u[f++]=d>>16&255,u[f++]=d>>8&255,u[f++]=255&d;return 2===c?(d=e[o.charCodeAt(h)]<<2|e[o.charCodeAt(h+1)]>>4,u[f++]=255&d):1===c&&(d=e[o.charCodeAt(h)]<<10|e[o.charCodeAt(h+1)]<<4|e[o.charCodeAt(h+2)]>>2,u[f++]=d>>8&255,u[f++]=255&d),u},fromUint8Array(o){const c=o.length,u=c%3,l=c-u,d=new Array(Math.ceil(l/16383)+(u?1:0));let h,y,f=0;for(let _=0;_<l;_+=16383)h=_+16383,d[f++]=i(o,_,h>l?l:h);return 1===u?(y=o[l],d[f]=t[y>>2]+t[y<<4&63],n||(d[f]+="==")):2===u&&(y=o[l]<<8|255&o[l+1],d[f]=t[y>>10]+t[y>>4&63]+t[y<<2&63],n||(d[f]+="=")),d.join("")}}}(Nw,kw,!0),EF=new TextDecoder,xF=new TextEncoder;class Fw{constructor(){g(this,"hashSize",32),g(this,"_buf"),g(this,"_bufIdx"),g(this,"_count"),g(this,"_K"),g(this,"_H"),g(this,"_finalized"),this._buf=new Uint8Array(64),this._K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),this.init()}init(){return this._H=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),this._bufIdx=0,this._count=new Uint32Array(2),this._buf.fill(0),this._finalized=!1,this}update(e,n){if(null===e)throw new TypeError("msg must be a string or Uint8Array.");"string"==typeof e&&(e=function MF(t,e="utf8"){if(/^utf-?8$/i.test(e))return xF.encode(t);if(/^base64$/i.test(e))return DF(t);if(/^hex(?:adecimal)?$/i.test(e))return function IF(t){const e=t.length;if(e%2||!/^[0-9a-fA-F]+$/.test(t))throw new TypeError("Invalid hex string.");t=t.toLowerCase();const n=new Uint8Array(Math.floor(e/2)),r=e/2;for(let s=0;s<r;++s)n[s]=parseInt(t.substr(2*s,2),16);return n}(t);throw new TypeError("Unsupported string encoding.")}(e,n));for(let s=0,i=e.length;s<i;s++)this._buf[this._bufIdx++]=e[s],64===this._bufIdx&&(this._transform(),this._bufIdx=0);const r=this._count;return(r[0]+=e.length<<3)<e.length<<3&&r[1]++,r[1]+=e.length>>>29,this}digest(e){if(this._finalized)throw new Error("digest has already been called.");this._finalized=!0;const n=this._buf;let r=this._bufIdx;for(n[r++]=128;56!==r;)64===r&&(this._transform(),r=0),n[r++]=0;const s=this._count;n[56]=s[1]>>>24&255,n[57]=s[1]>>>16&255,n[58]=s[1]>>>8&255,n[59]=s[1]>>>0&255,n[60]=s[0]>>>24&255,n[61]=s[0]>>>16&255,n[62]=s[0]>>>8&255,n[63]=s[0]>>>0&255,this._transform();const i=new Uint8Array(32);for(let o=0;o<8;o++)i[0+(o<<2)]=this._H[o]>>>24&255,i[1+(o<<2)]=this._H[o]>>>16&255,i[2+(o<<2)]=this._H[o]>>>8&255,i[3+(o<<2)]=this._H[o]>>>0&255;return this.init(),e?function AF(t,e="utf8"){if(/^utf-?8$/i.test(e))return EF.decode(t);if(/^base64$/i.test(e))return CF(t);if(/^hex(?:adecimal)?$/i.test(e))return function SF(t){return t.reduce((e,n)=>`${e}${n<16?"0":""}${n.toString(16)}`,"")}(t);throw new TypeError("Unsupported string encoding.")}(i,e):i}_transform(){const e=this._H;let n=e[0],r=e[1],s=e[2],i=e[3],o=e[4],a=e[5],c=e[6],u=e[7];const l=new Uint32Array(16);let d;for(d=0;d<16;d++)l[d]=this._buf[3+(d<<2)]|this._buf[2+(d<<2)]<<8|this._buf[1+(d<<2)]<<16|this._buf[d<<2]<<24;for(d=0;d<64;d++){let f;if(d<16)f=l[d];else{let h=l[d+1&15],y=l[d+14&15];f=l[15&d]=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+l[15&d]+l[d+9&15]|0}f=f+u+(o>>>6^o>>>11^o>>>25^o<<26^o<<21^o<<7)+(c^o&(a^c))+this._K[d]|0,u=c,c=a,a=o,o=i+f,i=s,s=r,r=n,n=f+(r&s^i&(r^s))+(r>>>2^r>>>13^r>>>22^r<<30^r<<19^r<<10)|0}e[0]=e[0]+n|0,e[1]=e[1]+r|0,e[2]=e[2]+s|0,e[3]=e[3]+i|0,e[4]=e[4]+o|0,e[5]=e[5]+a|0,e[6]=e[6]+c|0,e[7]=e[7]+u|0}}class TF extends Lo{constructor(e,n){super(e,n)}getMessage(e,n){var r=this;return R(function*(){xt(e);let s=n;const{last_by_subj:i}=s;i&&(s=null);const o=s?r.jc.encode(s):at,a=r.opts.apiPrefix||"$JS.API",c=i?`${a}.DIRECT.GET.${e}.${i}`:`${a}.DIRECT.GET.${e}`,u=yield r.nc.request(c,o),l=gi(u);if(l)return Promise.reject(l);const d=new PF(u);return Promise.resolve(d)})()}}class PF{constructor(e){if(g(this,"data"),g(this,"header"),!e.headers)throw new Error("headers expected");this.data=e.data,this.header=e.headers}get subject(){return this.header.get(os.Subject)}get seq(){const e=this.header.get(os.Sequence);return"string"==typeof e?parseInt(e):0}get time(){return new Date(Date.parse(this.header.get(os.TimeStamp)))}get stream(){return this.header.get(os.Stream)}}!function(t){var e=function(p,v){this.hi=0|p,this.lo=0|v},n=function(p){var v,m=new Float64Array(16);if(p)for(v=0;v<p.length;v++)m[v]=p[v];return m},r=function(){throw new Error("no PRNG")},s=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=n(),a=n([1]),c=n([56129,1]),u=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function y(p,v){return p<<v|p>>>32-v}function _(p,v){var m=255&p[v+3];return(m=(m=m<<8|255&p[v+2])<<8|255&p[v+1])<<8|255&p[v+0]}function E(p,v){return new e(p[v]<<24|p[v+1]<<16|p[v+2]<<8|p[v+3],p[v+4]<<24|p[v+5]<<16|p[v+6]<<8|p[v+7])}function S(p,v,m){var b;for(b=0;b<4;b++)p[v+b]=255&m,m>>>=8}function C(p,v,m){p[v]=m.hi>>24&255,p[v+1]=m.hi>>16&255,p[v+2]=m.hi>>8&255,p[v+3]=255&m.hi,p[v+4]=m.lo>>24&255,p[v+5]=m.lo>>16&255,p[v+6]=m.lo>>8&255,p[v+7]=255&m.lo}function P(p,v,m,b,w){var D,A=0;for(D=0;D<w;D++)A|=p[v+D]^m[b+D];return(1&A-1>>>8)-1}function U(p,v,m,b){return P(p,v,m,b,16)}function K(p,v,m,b){return P(p,v,m,b,32)}function Be(p,v,m,b,w){var I,B,ae,D=new Uint32Array(16),A=new Uint32Array(16),T=new Uint32Array(16),x=new Uint32Array(4);for(I=0;I<4;I++)A[5*I]=_(b,4*I),A[1+I]=_(m,4*I),A[6+I]=_(v,4*I),A[11+I]=_(m,16+4*I);for(I=0;I<16;I++)T[I]=A[I];for(I=0;I<20;I++){for(B=0;B<4;B++){for(ae=0;ae<4;ae++)x[ae]=A[(5*B+4*ae)%16];for(x[1]^=y(x[0]+x[3]|0,7),x[2]^=y(x[1]+x[0]|0,9),x[3]^=y(x[2]+x[1]|0,13),x[0]^=y(x[3]+x[2]|0,18),ae=0;ae<4;ae++)D[4*B+(B+ae)%4]=x[ae]}for(ae=0;ae<16;ae++)A[ae]=D[ae]}if(w){for(I=0;I<16;I++)A[I]=A[I]+T[I]|0;for(I=0;I<4;I++)A[5*I]=A[5*I]-_(b,4*I)|0,A[6+I]=A[6+I]-_(v,4*I)|0;for(I=0;I<4;I++)S(p,4*I,A[5*I]),S(p,16+4*I,A[6+I])}else for(I=0;I<16;I++)S(p,4*I,A[I]+T[I]|0)}function en(p,v,m,b){return Be(p,v,m,b,!1),0}function wn(p,v,m,b){return Be(p,v,m,b,!0),0}var vt=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Vn(p,v,m,b,w,D,A){var I,B,T=new Uint8Array(16),x=new Uint8Array(64);if(!w)return 0;for(B=0;B<16;B++)T[B]=0;for(B=0;B<8;B++)T[B]=D[B];for(;w>=64;){for(en(x,T,A,vt),B=0;B<64;B++)p[v+B]=(m?m[b+B]:0)^x[B];for(I=1,B=8;B<16;B++)T[B]=255&(I=I+(255&T[B])|0),I>>>=8;w-=64,v+=64,m&&(b+=64)}if(w>0)for(en(x,T,A,vt),B=0;B<w;B++)p[v+B]=(m?m[b+B]:0)^x[B];return 0}function Fr(p,v,m,b,w){return Vn(p,v,null,0,m,b,w)}function cr(p,v,m,b,w){var D=new Uint8Array(32);return wn(D,b,w,vt),Fr(p,v,m,b.subarray(16),D)}function Dn(p,v,m,b,w,D,A){var T=new Uint8Array(32);return wn(T,D,A,vt),Vn(p,v,m,b,w,D.subarray(16),T)}function us(p,v){var m,b=0;for(m=0;m<17;m++)p[m]=255&(b=b+(p[m]+v[m]|0)|0),b>>>=8}var qo=new Uint32Array([5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,252]);function ls(p,v,m,b,w,D){var A,T,x,I,B=new Uint32Array(17),ae=new Uint32Array(17),Se=new Uint32Array(17),xn=new Uint32Array(17),Di=new Uint32Array(17);for(x=0;x<17;x++)ae[x]=Se[x]=0;for(x=0;x<16;x++)ae[x]=D[x];for(ae[3]&=15,ae[4]&=252,ae[7]&=15,ae[8]&=252,ae[11]&=15,ae[12]&=252,ae[15]&=15;w>0;){for(x=0;x<17;x++)xn[x]=0;for(x=0;x<16&&x<w;++x)xn[x]=m[b+x];for(xn[x]=1,b+=x,w-=x,us(Se,xn),T=0;T<17;T++)for(B[T]=0,x=0;x<17;x++)B[T]=0|B[T]+Se[x]*(x<=T?ae[T-x]:320*ae[T+17-x]|0);for(T=0;T<17;T++)Se[T]=B[T];for(I=0,x=0;x<16;x++)Se[x]=255&(I=I+Se[x]|0),I>>>=8;for(Se[16]=3&(I=I+Se[16]|0),I=5*(I>>>2)|0,x=0;x<16;x++)Se[x]=255&(I=I+Se[x]|0),I>>>=8;Se[16]=I=I+Se[16]|0}for(x=0;x<17;x++)Di[x]=Se[x];for(us(Se,qo),A=0|-(Se[16]>>>7),x=0;x<17;x++)Se[x]^=A&(Di[x]^Se[x]);for(x=0;x<16;x++)xn[x]=D[x+16];for(xn[16]=0,us(Se,xn),x=0;x<16;x++)p[v+x]=Se[x];return 0}function Jw(p,v,m,b,w,D){var A=new Uint8Array(16);return ls(A,0,m,b,w,D),U(p,v,A,0)}function Ih(p,v,m,b,w){var D;if(m<32)return-1;for(Dn(p,0,v,0,m,b,w),ls(p,16,p,32,m-32,p),D=0;D<16;D++)p[D]=0;return 0}function Ah(p,v,m,b,w){var D,A=new Uint8Array(32);if(m<32||(cr(A,0,32,b,w),0!==Jw(v,16,v,32,m-32,A)))return-1;for(Dn(p,0,v,0,m,b,w),D=0;D<32;D++)p[D]=0;return 0}function ur(p,v){var m;for(m=0;m<16;m++)p[m]=0|v[m]}function zo(p){var v,m;for(m=0;m<16;m++)p[m]+=65536,v=Math.floor(p[m]/65536),p[(m+1)*(m<15?1:0)]+=v-1+37*(v-1)*(15===m?1:0),p[m]-=65536*v}function vi(p,v,m){for(var b,w=~(m-1),D=0;D<16;D++)p[D]^=b=w&(p[D]^v[D]),v[D]^=b}function bi(p,v){var m,b,w,D=n(),A=n();for(m=0;m<16;m++)A[m]=v[m];for(zo(A),zo(A),zo(A),b=0;b<2;b++){for(D[0]=A[0]-65517,m=1;m<15;m++)D[m]=A[m]-65535-(D[m-1]>>16&1),D[m-1]&=65535;D[15]=A[15]-32767-(D[14]>>16&1),w=D[15]>>16&1,D[14]&=65535,vi(A,D,1-w)}for(m=0;m<16;m++)p[2*m]=255&A[m],p[2*m+1]=A[m]>>8}function Yw(p,v){var m=new Uint8Array(32),b=new Uint8Array(32);return bi(m,p),bi(b,v),K(m,0,b,0)}function Qw(p){var v=new Uint8Array(32);return bi(v,p),1&v[0]}function Mh(p,v){var m;for(m=0;m<16;m++)p[m]=v[2*m]+(v[2*m+1]<<8);p[15]&=32767}function Cn(p,v,m){var b;for(b=0;b<16;b++)p[b]=v[b]+m[b]|0}function En(p,v,m){var b;for(b=0;b<16;b++)p[b]=v[b]-m[b]|0}function oe(p,v,m){var b,w,D=new Float64Array(31);for(b=0;b<31;b++)D[b]=0;for(b=0;b<16;b++)for(w=0;w<16;w++)D[b+w]+=v[b]*m[w];for(b=0;b<15;b++)D[b]+=38*D[b+16];for(b=0;b<16;b++)p[b]=D[b];zo(p),zo(p)}function tn(p,v){oe(p,v,v)}function Zw(p,v){var b,m=n();for(b=0;b<16;b++)m[b]=v[b];for(b=253;b>=0;b--)tn(m,m),2!==b&&4!==b&&oe(m,m,v);for(b=0;b<16;b++)p[b]=m[b]}function Xw(p,v){var b,m=n();for(b=0;b<16;b++)m[b]=v[b];for(b=250;b>=0;b--)tn(m,m),1!==b&&oe(m,m,v);for(b=0;b<16;b++)p[b]=m[b]}function hu(p,v,m){var D,A,b=new Uint8Array(32),w=new Float64Array(80),T=n(),x=n(),I=n(),B=n(),ae=n(),Se=n();for(A=0;A<31;A++)b[A]=v[A];for(b[31]=127&v[31]|64,b[0]&=248,Mh(w,m),A=0;A<16;A++)x[A]=w[A],B[A]=T[A]=I[A]=0;for(T[0]=B[0]=1,A=254;A>=0;--A)vi(T,x,D=b[A>>>3]>>>(7&A)&1),vi(I,B,D),Cn(ae,T,I),En(T,T,I),Cn(I,x,B),En(x,x,B),tn(B,ae),tn(Se,T),oe(T,I,T),oe(I,x,ae),Cn(ae,T,I),En(T,T,I),tn(x,T),En(I,B,Se),oe(T,I,c),Cn(T,T,B),oe(I,I,T),oe(T,B,Se),oe(B,x,w),tn(x,ae),vi(T,x,D),vi(I,B,D);for(A=0;A<16;A++)w[A+16]=T[A],w[A+32]=I[A],w[A+48]=x[A],w[A+64]=B[A];var xn=w.subarray(32),Di=w.subarray(16);return Zw(xn,xn),oe(Di,Di,xn),bi(p,Di),0}function pu(p,v){return hu(p,v,i)}function eD(p,v){return r(v,32),pu(p,v)}function gu(p,v,m){var b=new Uint8Array(32);return hu(b,m,v),wn(p,s,b,vt)}var tD=Ih,LL=Ah;function Go(){var D,A,T,p=0,v=0,m=0,b=0,w=65535;for(T=0;T<arguments.length;T++)p+=(D=arguments[T].lo)&w,v+=D>>>16,m+=(A=arguments[T].hi)&w,b+=A>>>16;return new e((m+=(v+=p>>>16)>>>16)&w|(b+=m>>>16)<<16,p&w|v<<16)}function nD(p,v){return new e(p.hi>>>v,p.lo>>>v|p.hi<<32-v)}function mu(){var m,p=0,v=0;for(m=0;m<arguments.length;m++)p^=arguments[m].lo,v^=arguments[m].hi;return new e(v,p)}function qn(p,v){var m,b,w=32-v;return v<32?(m=p.hi>>>v|p.lo<<w,b=p.lo>>>v|p.hi<<w):v<64&&(m=p.lo>>>v|p.hi<<w,b=p.hi>>>v|p.lo<<w),new e(m,b)}function $L(p,v,m){return new e(p.hi&v.hi^~p.hi&m.hi,p.lo&v.lo^~p.lo&m.lo)}function UL(p,v,m){return new e(p.hi&v.hi^p.hi&m.hi^v.hi&m.hi,p.lo&v.lo^p.lo&m.lo^v.lo&m.lo)}function HL(p){return mu(qn(p,28),qn(p,34),qn(p,39))}function VL(p){return mu(qn(p,14),qn(p,18),qn(p,41))}function qL(p){return mu(qn(p,1),qn(p,8),nD(p,7))}function zL(p){return mu(qn(p,19),qn(p,61),nD(p,6))}var GL=[new e(1116352408,3609767458),new e(1899447441,602891725),new e(3049323471,3964484399),new e(3921009573,2173295548),new e(961987163,4081628472),new e(1508970993,3053834265),new e(2453635748,2937671579),new e(2870763221,3664609560),new e(3624381080,2734883394),new e(310598401,1164996542),new e(607225278,1323610764),new e(1426881987,3590304994),new e(1925078388,4068182383),new e(2162078206,991336113),new e(2614888103,633803317),new e(3248222580,3479774868),new e(3835390401,2666613458),new e(4022224774,944711139),new e(264347078,2341262773),new e(604807628,2007800933),new e(770255983,1495990901),new e(1249150122,1856431235),new e(1555081692,3175218132),new e(1996064986,2198950837),new e(2554220882,3999719339),new e(2821834349,766784016),new e(2952996808,2566594879),new e(3210313671,3203337956),new e(3336571891,1034457026),new e(3584528711,2466948901),new e(113926993,3758326383),new e(338241895,168717936),new e(666307205,1188179964),new e(773529912,1546045734),new e(1294757372,1522805485),new e(1396182291,2643833823),new e(1695183700,2343527390),new e(1986661051,1014477480),new e(2177026350,1206759142),new e(2456956037,344077627),new e(2730485921,1290863460),new e(2820302411,3158454273),new e(3259730800,3505952657),new e(3345764771,106217008),new e(3516065817,3606008344),new e(3600352804,1432725776),new e(4094571909,1467031594),new e(275423344,851169720),new e(430227734,3100823752),new e(506948616,1363258195),new e(659060556,3750685593),new e(883997877,3785050280),new e(958139571,3318307427),new e(1322822218,3812723403),new e(1537002063,2003034995),new e(1747873779,3602036899),new e(1955562222,1575990012),new e(2024104815,1125592928),new e(2227730452,2716904306),new e(2361852424,442776044),new e(2428436474,593698344),new e(2756734187,3733110249),new e(3204031479,2999351573),new e(3329325298,3815920427),new e(3391569614,3928383900),new e(3515267271,566280711),new e(3940187606,3454069534),new e(4118630271,4000239992),new e(116418474,1914138554),new e(174292421,2731055270),new e(289380356,3203993006),new e(460393269,320620315),new e(685471733,587496836),new e(852142971,1086792851),new e(1017036298,365543100),new e(1126000580,2618297676),new e(1288033470,3409855158),new e(1501505948,4234509866),new e(1607167915,987167468),new e(1816402316,1246189591)];function rD(p,v,m){var T,x,I,b=[],w=[],D=[],A=[];for(x=0;x<8;x++)b[x]=D[x]=E(p,8*x);for(var B=0;m>=128;){for(x=0;x<16;x++)A[x]=E(v,8*x+B);for(x=0;x<80;x++){for(I=0;I<8;I++)w[I]=D[I];for(T=Go(D[7],VL(D[4]),$L(D[4],D[5],D[6]),GL[x],A[x%16]),w[7]=Go(T,HL(D[0]),UL(D[0],D[1],D[2])),w[3]=Go(w[3],T),I=0;I<8;I++)D[(I+1)%8]=w[I];if(x%16==15)for(I=0;I<16;I++)A[I]=Go(A[I],A[(I+9)%16],qL(A[(I+1)%16]),zL(A[(I+14)%16]))}for(x=0;x<8;x++)D[x]=Go(D[x],b[x]),b[x]=D[x];B+=128,m-=128}for(x=0;x<8;x++)C(p,8*x,b[x]);return m}var WL=new Uint8Array([106,9,230,103,243,188,201,8,187,103,174,133,132,202,167,59,60,110,243,114,254,148,248,43,165,79,245,58,95,29,54,241,81,14,82,127,173,230,130,209,155,5,104,140,43,62,108,31,31,131,217,171,251,65,189,107,91,224,205,25,19,126,33,121]);function ds(p,v,m){var D,b=new Uint8Array(64),w=new Uint8Array(256),A=m;for(D=0;D<64;D++)b[D]=WL[D];for(rD(b,v,m),m%=128,D=0;D<256;D++)w[D]=0;for(D=0;D<m;D++)w[D]=v[A-m+D];for(w[m]=128,w[(m=256-128*(m<112?1:0))-9]=0,C(w,m-8,new e(A/536870912|0,A<<3)),rD(b,w,m),D=0;D<64;D++)p[D]=b[D];return 0}function yu(p,v){var m=n(),b=n(),w=n(),D=n(),A=n(),T=n(),x=n(),I=n(),B=n();En(m,p[1],p[0]),En(B,v[1],v[0]),oe(m,m,B),Cn(b,p[0],p[1]),Cn(B,v[0],v[1]),oe(b,b,B),oe(w,p[3],v[3]),oe(w,w,l),oe(D,p[2],v[2]),Cn(D,D,D),En(A,b,m),En(T,D,w),Cn(x,D,w),Cn(I,b,m),oe(p[0],A,T),oe(p[1],I,x),oe(p[2],x,T),oe(p[3],A,I)}function sD(p,v,m){var b;for(b=0;b<4;b++)vi(p[b],v[b],m)}function Th(p,v){var m=n(),b=n(),w=n();Zw(w,v[2]),oe(m,v[0],w),oe(b,v[1],w),bi(p,b),p[31]^=Qw(m)<<7}function Ph(p,v,m){var b,w;for(ur(p[0],o),ur(p[1],a),ur(p[2],a),ur(p[3],o),w=255;w>=0;--w)sD(p,v,b=m[w/8|0]>>(7&w)&1),yu(v,p),yu(p,p),sD(p,v,b)}function vu(p,v){var m=[n(),n(),n(),n()];ur(m[0],d),ur(m[1],f),ur(m[2],a),oe(m[3],d,f),Ph(p,m,v)}function Oh(p,v,m){var D,b=new Uint8Array(64),w=[n(),n(),n(),n()];for(m||r(v,32),ds(b,v,32),b[0]&=248,b[31]&=127,b[31]|=64,vu(w,b),Th(p,w),D=0;D<32;D++)v[D+32]=p[D];return 0}var p,bu=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Rh(p,v){var m,b,w,D;for(b=63;b>=32;--b){for(m=0,w=b-32,D=b-12;w<D;++w)v[w]+=m-16*v[b]*bu[w-(b-32)],m=Math.floor((v[w]+128)/256),v[w]-=256*m;v[w]+=m,v[b]=0}for(m=0,w=0;w<32;w++)v[w]+=m-(v[31]>>4)*bu[w],m=v[w]>>8,v[w]&=255;for(w=0;w<32;w++)v[w]-=m*bu[w];for(b=0;b<32;b++)v[b+1]+=v[b]>>8,p[b]=255&v[b]}function Nh(p){var m,v=new Float64Array(64);for(m=0;m<64;m++)v[m]=p[m];for(m=0;m<64;m++)p[m]=0;Rh(p,v)}function iD(p,v,m,b){var T,x,w=new Uint8Array(64),D=new Uint8Array(64),A=new Uint8Array(64),I=new Float64Array(64),B=[n(),n(),n(),n()];ds(w,b,32),w[0]&=248,w[31]&=127,w[31]|=64;var ae=m+64;for(T=0;T<m;T++)p[64+T]=v[T];for(T=0;T<32;T++)p[32+T]=w[32+T];for(ds(A,p.subarray(32),m+32),Nh(A),vu(B,A),Th(p,B),T=32;T<64;T++)p[T]=b[T];for(ds(D,p,m+64),Nh(D),T=0;T<64;T++)I[T]=0;for(T=0;T<32;T++)I[T]=A[T];for(T=0;T<32;T++)for(x=0;x<32;x++)I[T+x]+=D[T]*w[x];return Rh(p.subarray(32),I),ae}function kh(p,v,m,b){var w,D=new Uint8Array(32),A=new Uint8Array(64),T=[n(),n(),n(),n()],x=[n(),n(),n(),n()];if(m<64||function KL(p,v){var m=n(),b=n(),w=n(),D=n(),A=n(),T=n(),x=n();return ur(p[2],a),Mh(p[1],v),tn(w,p[1]),oe(D,w,u),En(w,w,p[2]),Cn(D,p[2],D),tn(A,D),tn(T,A),oe(x,T,A),oe(m,x,w),oe(m,m,D),Xw(m,m),oe(m,m,w),oe(m,m,D),oe(m,m,D),oe(p[0],m,D),tn(b,p[0]),oe(b,b,D),Yw(b,w)&&oe(p[0],p[0],h),tn(b,p[0]),oe(b,b,D),Yw(b,w)?-1:(Qw(p[0])===v[31]>>7&&En(p[0],o,p[0]),oe(p[3],p[0],p[1]),0)}(x,b))return-1;for(w=0;w<m;w++)p[w]=v[w];for(w=0;w<32;w++)p[w+32]=b[w];if(ds(A,p,m),Nh(A),Ph(T,x,A),vu(x,v.subarray(32)),yu(T,x),Th(D,T),m-=64,K(v,0,D,0)){for(w=0;w<m;w++)p[w]=0;return-1}for(w=0;w<m;w++)p[w]=v[w+64];return m}function aD(p,v){if(32!==p.length)throw new Error("bad key size");if(24!==v.length)throw new Error("bad nonce size")}function Ut(){for(var p=0;p<arguments.length;p++)if(!(arguments[p]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function cD(p){for(var v=0;v<p.length;v++)p[v]=0}t.lowlevel={crypto_core_hsalsa20:wn,crypto_stream_xor:Dn,crypto_stream:cr,crypto_stream_salsa20_xor:Vn,crypto_stream_salsa20:Fr,crypto_onetimeauth:ls,crypto_onetimeauth_verify:Jw,crypto_verify_16:U,crypto_verify_32:K,crypto_secretbox:Ih,crypto_secretbox_open:Ah,crypto_scalarmult:hu,crypto_scalarmult_base:pu,crypto_box_beforenm:gu,crypto_box_afternm:tD,crypto_box:function jL(p,v,m,b,w,D){var A=new Uint8Array(32);return gu(A,w,D),tD(p,v,m,b,A)},crypto_box_open:function BL(p,v,m,b,w,D){var A=new Uint8Array(32);return gu(A,w,D),LL(p,v,m,b,A)},crypto_box_keypair:eD,crypto_hash:ds,crypto_sign:iD,crypto_sign_keypair:Oh,crypto_sign_open:kh,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:n,D:u,L:bu,pack25519:bi,unpack25519:Mh,M:oe,A:Cn,S:tn,Z:En,pow2523:Xw,add:yu,set25519:ur,modL:Rh,scalarmult:Ph,scalarbase:vu},t.randomBytes=function(p){var v=new Uint8Array(p);return r(v,p),v},t.secretbox=function(p,v,m){Ut(p,v,m),aD(m,v);for(var b=new Uint8Array(32+p.length),w=new Uint8Array(b.length),D=0;D<p.length;D++)b[D+32]=p[D];return Ih(w,b,b.length,v,m),w.subarray(16)},t.secretbox.open=function(p,v,m){Ut(p,v,m),aD(m,v);for(var b=new Uint8Array(16+p.length),w=new Uint8Array(b.length),D=0;D<p.length;D++)b[D+16]=p[D];return b.length<32||0!==Ah(w,b,b.length,v,m)?null:w.subarray(32)},t.secretbox.keyLength=32,t.secretbox.nonceLength=24,t.secretbox.overheadLength=16,t.scalarMult=function(p,v){if(Ut(p,v),32!==p.length)throw new Error("bad n size");if(32!==v.length)throw new Error("bad p size");var m=new Uint8Array(32);return hu(m,p,v),m},t.scalarMult.base=function(p){if(Ut(p),32!==p.length)throw new Error("bad n size");var v=new Uint8Array(32);return pu(v,p),v},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(p,v,m,b){var w=t.box.before(m,b);return t.secretbox(p,v,w)},t.box.before=function(p,v){Ut(p,v),function QL(p,v){if(32!==p.length)throw new Error("bad public key size");if(32!==v.length)throw new Error("bad secret key size")}(p,v);var m=new Uint8Array(32);return gu(m,p,v),m},t.box.after=t.secretbox,t.box.open=function(p,v,m,b){var w=t.box.before(m,b);return t.secretbox.open(p,v,w)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var p=new Uint8Array(32),v=new Uint8Array(32);return eD(p,v),{publicKey:p,secretKey:v}},t.box.keyPair.fromSecretKey=function(p){if(Ut(p),32!==p.length)throw new Error("bad secret key size");var v=new Uint8Array(32);return pu(v,p),{publicKey:v,secretKey:new Uint8Array(p)}},t.box.publicKeyLength=32,t.box.secretKeyLength=32,t.box.sharedKeyLength=32,t.box.nonceLength=24,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(p,v){if(Ut(p,v),64!==v.length)throw new Error("bad secret key size");var m=new Uint8Array(64+p.length);return iD(m,p,p.length,v),m},t.sign.open=function(p,v){if(Ut(p,v),32!==v.length)throw new Error("bad public key size");var m=new Uint8Array(p.length),b=kh(m,p,p.length,v);if(b<0)return null;for(var w=new Uint8Array(b),D=0;D<w.length;D++)w[D]=m[D];return w},t.sign.detached=function(p,v){for(var m=t.sign(p,v),b=new Uint8Array(64),w=0;w<b.length;w++)b[w]=m[w];return b},t.sign.detached.verify=function(p,v,m){if(Ut(p,v,m),64!==v.length)throw new Error("bad signature size");if(32!==m.length)throw new Error("bad public key size");var D,b=new Uint8Array(64+p.length),w=new Uint8Array(64+p.length);for(D=0;D<64;D++)b[D]=v[D];for(D=0;D<p.length;D++)b[D+64]=p[D];return kh(w,b,b.length,m)>=0},t.sign.keyPair=function(){var p=new Uint8Array(32),v=new Uint8Array(64);return Oh(p,v),{publicKey:p,secretKey:v}},t.sign.keyPair.fromSecretKey=function(p){if(Ut(p),64!==p.length)throw new Error("bad secret key size");for(var v=new Uint8Array(32),m=0;m<v.length;m++)v[m]=p[32+m];return{publicKey:v,secretKey:new Uint8Array(p)}},t.sign.keyPair.fromSeed=function(p){if(Ut(p),32!==p.length)throw new Error("bad seed size");for(var v=new Uint8Array(32),m=new Uint8Array(64),b=0;b<32;b++)m[b]=p[b];return Oh(v,m,!0),{publicKey:v,secretKey:m}},t.sign.publicKeyLength=32,t.sign.secretKeyLength=64,t.sign.seedLength=32,t.sign.signatureLength=64,t.hash=function(p){Ut(p);var v=new Uint8Array(64);return ds(v,p,p.length),v},t.hash.hashLength=64,t.verify=function(p,v){return Ut(p,v),0!==p.length&&0!==v.length&&p.length===v.length&&0===P(p,0,v,0,p.length)},t.setPRNG=function(p){r=p},(p="undefined"!=typeof globalThis?globalThis.crypto||globalThis.msCrypto:null)&&p.getRandomValues?t.setPRNG(function(m,b){var w,D=new Uint8Array(b);for(w=0;w<b;w+=65536)p.getRandomValues(D.subarray(w,w+Math.min(b-w,65536)));for(w=0;w<b;w++)m[w]=D[w];cD(D)}):"undefined"!=typeof require&&(p=require("crypto"))&&p.randomBytes&&t.setPRNG(function(m,b){var w,D=p.randomBytes(b);for(w=0;w<b;w++)m[w]=D[w];cD(D)})}("undefined"!=typeof module&&module.exports?module.exports:globalThis.nacl=globalThis.nacl||{});const ou="undefined"!=typeof module&&module.exports?module.exports:globalThis.nacl,OF={fromSeed:ou.sign.keyPair.fromSeed,sign:ou.sign.detached,verify:ou.sign.detached.verify,randomBytes:ou.randomBytes};let Lw;new Uint16Array([0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920]),Error,function RF(t){Lw=t}(OF);const lu="KV-Operation",Xt="KV_",tL=/^[-/=.\w]+$/,nL=/^[-/=.>*\w]+$/,rL=/^[-\w]+$/;function Vw(t){if(t.startsWith(".")||t.endsWith(".")||!tL.test(t))throw new Error(`invalid key: ${t}`)}function sL(t){if(t.startsWith(".")||t.endsWith(".")||!nL.test(t))throw new Error(`invalid key: ${t}`)}function iL(t){if(t.startsWith(".")||t.endsWith("."))throw new Error(`invalid key: ${t}`);const e=t.split(".");let n=!1;for(let r=0;r<e.length;r++)switch(e[r]){case"*":n=!0;break;case">":if(r!==e.length-1)throw new Error(`invalid key: ${t}`);n=!0}return n}function du(t){if(!rL.test(t))throw new Error(`invalid bucket name: ${t}`)}class Ho{constructor(e,n,r){g(this,"jsm"),g(this,"js"),g(this,"stream"),g(this,"bucket"),g(this,"direct"),g(this,"codec"),g(this,"prefix"),g(this,"editPrefix"),g(this,"useJsPrefix"),g(this,"_prefixLen"),g(this,"validateKey",Vw),g(this,"validateSearchKey",sL),g(this,"hasWildcards",iL),du(e),this.jsm=n,this.js=r,this.bucket=e,this.prefix="$KV",this.editPrefix="",this.useJsPrefix=!1,this._prefixLen=0}static create(e,n,r={}){return R(function*(){const s=e,{ok:i,min:o}=s.nc.features.get(St.JS_KV);if(!i)return Promise.reject(new Error(`kv is only supported on servers ${o} or better`));du(n);let c=s.opts||{};c=Object.assign(c,{timeout:r.timeout||2e3});const u=yield s.nc.jetstreamManager(c),l=new Ho(n,u,e);return yield l.init(r),l})()}static bind(e,n,r={}){return R(function*(){var c;const i=yield e.nc.jetstreamManager(),o=yield i.streams.info(`KV_${n}`);du(o.config.name);const a=new Ho(n,i,e);return Object.assign(a,o),a.codec=r.codec||{key:{encode:t=>t,decode:t=>t},value:{encode:t=>t,decode:t=>t}},a.direct=null!=(c=o.config.allow_direct)&&c,a.initializePrefixes(o),a})()}init(e={}){var n=this;return R(function*(){var f,h;const r=Object.assign(function eL(){return{replicas:1,history:1,timeout:2e3,maxBucketSize:-1,maxValueSize:-1,codec:{key:{encode:t=>t,decode:t=>t},value:{encode:t=>t,decode:t=>t}},storage:Kc.File}}(),e);n.codec=r.codec;const s={};n.stream=s.name=null!=(f=e.streamName)?f:n.bucketName(),s.retention=Wc.Limits,s.max_msgs_per_subject=r.history,r.maxBucketSize&&(r.max_bytes=r.maxBucketSize),r.max_bytes&&(s.max_bytes=r.max_bytes),s.max_msg_size=r.maxValueSize,s.storage=r.storage;const i=null!=(h=e.placementCluster)?h:"";if(i&&(e.placement={},e.placement.cluster=i,e.placement.tags=[]),e.placement&&(s.placement=e.placement),e.republish&&(s.republish=e.republish),e.description&&(s.description=e.description),e.mirror){const y=Object.assign({},e.mirror);y.name.startsWith(Xt)||(y.name=`KV_${y.name}`),s.mirror=y,s.mirror_direct=!0}else if(e.sources){const y=e.sources.map(_=>{const E=Object.assign({},_);E.name.startsWith(Xt)||(E.name=`KV_${E.name}`)});s.sources=y}else s.subjects=[n.subjectForBucket()];const o=n.js.nc,a=o.getServerVersion(),c=!!a&&ph(a,as("2.7.2"))>=0;s.discard=c?hi.New:hi.Old;const{ok:u,min:l}=o.features.get(St.JS_ALLOW_DIRECT);if(!u&&!0===e.allow_direct)return Promise.reject(new Error(`allow_direct is not available on server version ${a?`${a.major}.${a.minor}.${a.micro}`:"unknown"} - requires ${l}`));let d;e.allow_direct="boolean"==typeof e.allow_direct?e.allow_direct:u,s.allow_direct=e.allow_direct,n.direct=s.allow_direct,s.num_replicas=r.replicas,r.ttl&&(s.max_age=ze(r.ttl)),s.allow_rollup_hdrs=!0;try{d=yield n.jsm.streams.info(s.name),!d.config.allow_direct&&!0===n.direct&&(n.direct=!1)}catch(y){if("stream not found"!==y.message)throw y;d=yield n.jsm.streams.add(s)}n.initializePrefixes(d)})()}initializePrefixes(e){this._prefixLen=0,this.prefix=`$KV.${this.bucket}`,this.useJsPrefix="$JS.API"!==this.js.opts.apiPrefix;const{mirror:n}=e.config;if(n){let r=n.name;if(r.startsWith(Xt)&&(r=r.substring(Xt.length)),n.external&&""!==n.external.api){const s=n.name.substring(Xt.length);this.useJsPrefix=!1,this.prefix=`$KV.${s}`,this.editPrefix=`${n.external.api}.$KV.${r}`}else this.editPrefix=this.prefix}}bucketName(){var e;return null!=(e=this.stream)?e:`KV_${this.bucket}`}subjectForBucket(){return`${this.prefix}.${this.bucket}.>`}subjectForKey(e,n=!1){const r=[];return n?(this.useJsPrefix&&r.push(this.js.apiPrefix),r.push(""!==this.editPrefix?this.editPrefix:this.prefix)):this.prefix&&r.push(this.prefix),r.push(e),r.join(".")}fullKeyName(e){return""!==this.prefix?`${this.prefix}.${e}`:`$KV.${this.bucket}.${e}`}get prefixLen(){return 0===this._prefixLen&&(this._prefixLen=this.prefix.length+1),this._prefixLen}encodeKey(e){const n=[];for(const r of e.split("."))switch(r){case">":case"*":n.push(r);break;default:n.push(this.codec.key.encode(r))}return n.join(".")}decodeKey(e){const n=[];for(const r of e.split("."))switch(r){case">":case"*":n.push(r);break;default:n.push(this.codec.key.decode(r))}return n.join(".")}close(){return Promise.resolve()}dataLen(e,n){const r=n&&n.get(Zt.MessageSizeHdr)||"";return""!==r?parseInt(r,10):e.length}smToEntry(e){return{bucket:this.bucket,key:e.subject.substring(this.prefixLen),value:e.data,delta:0,created:e.time,revision:e.seq,operation:e.header.get(lu)||"PUT",length:this.dataLen(e.data,e.header)}}jmToEntry(e){var r;const n=this.decodeKey(e.subject.substring(this.prefixLen));return{bucket:this.bucket,key:n,value:e.data,created:new Date(fh(e.info.timestampNanos)),revision:e.seq,operation:(null==(r=e.headers)?void 0:r.get(lu))||"PUT",delta:e.info.pending,length:this.dataLen(e.data,e.headers)}}create(e,n){var r=this;return R(function*(){var o;let s;try{const a=yield r.put(e,n,{previousSeq:0});return Promise.resolve(a)}catch(a){if(s=a,10071!==(null==(o=null==a?void 0:a.api_error)?void 0:o.err_code))return Promise.reject(a)}let i=0;try{const a=yield r.get(e);return"DEL"===(null==a?void 0:a.operation)||"PURGE"===(null==a?void 0:a.operation)?(i=null!==a?a.revision:0,r.update(e,n,i)):Promise.reject(s)}catch(a){return Promise.reject(a)}})()}update(e,n,r){if(r<=0)throw new Error("version must be greater than 0");return this.put(e,n,{previousSeq:r})}put(e,n,r={}){var s=this;return R(function*(){var a,c;const i=s.encodeKey(e);s.validateKey(i);const o={};if(void 0!==r.previousSeq){const u=ar();o.headers=u,u.set("Nats-Expected-Last-Subject-Sequence",`${r.previousSeq}`)}try{return(yield s.js.publish(s.subjectForKey(i,!0),n,o)).seq}catch(u){const l=u;return l.isJetStreamError()?(l.message=null==(a=l.api_error)?void 0:a.description,l.code=`${null==(c=l.api_error)?void 0:c.code}`,Promise.reject(l)):Promise.reject(u)}})()}get(e,n){var r=this;return R(function*(){const s=r.encodeKey(e);r.validateKey(s);let o,i={last_by_subj:r.subjectForKey(s)};n&&n.revision>0&&(i={seq:n.revision});try{o=r.direct?yield r.jsm.direct.getMessage(r.bucketName(),i):yield r.jsm.streams.getMessage(r.bucketName(),i);const a=r.smToEntry(o);return a.key!==s?null:a}catch(a){if(a.code===O.JetStream404NoMessages)return null;throw a}})()}purge(e){return this._deleteOrPurge(e,"PURGE")}delete(e){return this._deleteOrPurge(e,"DEL")}purgeDeletes(e=18e5){var n=this;return R(function*(){const r=xe(),s=[],i=yield n.watch({key:">",initializedFn:()=>{r.resolve()}});R(function*(){var d,u=!1,l=!1;try{for(var h,f=Ir(i);u=!(h=yield f.next()).done;u=!1){const y=h.value;("DEL"===y.operation||"PURGE"===y.operation)&&s.push(y)}}catch(y){l=!0,d=y}finally{try{u&&null!=f.return&&(yield f.return())}finally{if(l)throw d}}})().then(),yield r,i.stop();const o=Date.now()-e,a=s.map(u=>{const l=n.subjectForKey(u.key);return u.created.getTime()>=o?n.jsm.streams.purge(n.stream,{filter:l,keep:1}):n.jsm.streams.purge(n.stream,{filter:l,keep:0})}),c=yield Promise.all(a);return c.unshift({success:!0,purged:0}),c.reduce((u,l)=>(u.purged+=l.purged,u))})()}_deleteOrPurge(e,n){var r=this;return R(function*(){if(!r.hasWildcards(e))return r._doDeleteOrPurge(e,n);const s=yield r.keys(e),i=[];var c,o=!1,a=!1;try{for(var l,u=Ir(s);o=!(l=yield u.next()).done;o=!1)i.push(r._doDeleteOrPurge(l.value,n)),100===i.length&&(yield Promise.all(i),i.length=0)}catch(d){a=!0,c=d}finally{try{o&&null!=u.return&&(yield u.return())}finally{if(a)throw c}}i.length>0&&(yield Promise.all(i))})()}_doDeleteOrPurge(e,n){var r=this;return R(function*(){const s=r.encodeKey(e);r.validateKey(s);const i=ar();i.set(lu,n),"PURGE"===n&&i.set(Zt.RollupHdr,Zt.RollupValueSubject),yield r.js.publish(r.subjectForKey(s,!0),at,{headers:i})})()}_buildCC(e,n=!1,r={}){const s=this.encodeKey(e);return this.validateSearchKey(e),Object.assign({deliver_policy:n?Ct.All:Ct.LastPerSubject,ack_policy:Je.None,filter_subject:this.fullKeyName(s),flow_control:!0,idle_heartbeat:ze(5e3)},r)}remove(e){return this.purge(e)}history(e={}){var n=this;return R(function*(){var f;const r=null!=(f=e.key)?f:">",s=new Et,i={};let o;i.headers_only=e.headers_only||!1,o=()=>{s.stop()};let a=0;const c=n._buildCC(r,!0,i),u=c.filter_subject,l=Rr(c);l.bindStream(n.stream),l.orderedConsumer(),l.callback((h,y)=>{if(h)s.stop(h);else if(y){const _=n.jmToEntry(y);s.push(_),s.received++,(o&&a>0&&s.received>=a||0===y.info.pending)&&(s.push(o),o=void 0)}});const d=yield n.js.subscribe(u,l);if(o){const{info:{last:h}}=d,y=h.num_pending+h.delivered.consumer_seq;if(0===y||s.received>=y)try{o()}catch(_){s.stop(_)}finally{o=void 0}else a=y}return s._data=d,s.iterClosed.then(()=>{d.unsubscribe()}),d.closed.then(()=>{s.stop()}).catch(h=>{s.stop(h)}),s})()}watch(e={}){var n=this;return R(function*(){var f;const r=null!=(f=e.key)?f:">",s=new Et,i={};i.headers_only=e.headers_only||!1;let o=e.initializedFn,a=0;const c=n._buildCC(r,!1,i),u=c.filter_subject,l=Rr(c);l.bindStream(n.stream),l.orderedConsumer(),l.callback((h,y)=>{if(h)s.stop(h);else if(y){const _=n.jmToEntry(y);s.push(_),s.received++,o&&(a>0&&s.received>=a||0===y.info.pending)&&(s.push(o),o=void 0)}});const d=yield n.js.subscribe(u,l);if(o){const{info:{last:h}}=d,y=h.num_pending+h.delivered.consumer_seq;if(0===y||s.received>=y)try{o()}catch(_){s.stop(_)}finally{o=void 0}else a=y}return s._data=d,s.iterClosed.then(()=>{d.unsubscribe()}),d.closed.then(()=>{s.stop()}).catch(h=>{s.stop(h)}),s})()}keys(e=">"){var n=this;return R(function*(){const r=new Et,s=n._buildCC(e,!1,{headers_only:!0}),i=s.filter_subject,o=Rr(s);o.bindStream(n.stream),o.orderedConsumer();const a=yield n.js.subscribe(i,o);return R(function*(){var y,d,u=!1,l=!1;try{for(var h,f=Ir(a);u=!(h=yield f.next()).done;u=!1){const _=h.value,E=null==(y=_.headers)?void 0:y.get(lu);if("DEL"!==E&&"PURGE"!==E){const S=n.decodeKey(_.subject.substring(n.prefixLen));r.push(S)}0===_.info.pending&&a.unsubscribe()}}catch(_){l=!0,d=_}finally{try{u&&null!=f.return&&(yield f.return())}finally{if(l)throw d}}})().then(()=>{r.stop()}).catch(u=>{r.stop(u)}),0===a.info.last.num_pending&&a.unsubscribe(),r})()}purgeBucket(e){return this.jsm.streams.purge(this.bucketName(),e)}destroy(){return this.jsm.streams.delete(this.bucketName())}status(){var e=this;return R(function*(){var o,a;const r=null!=(a=null==(o=e.js.nc.info)?void 0:o.cluster)?a:"",s=e.bucketName(),i=yield e.jsm.streams.info(s);return new qw(i,r)})()}}class qw{constructor(e,n=""){g(this,"si"),g(this,"cluster"),this.si=e,this.cluster=n}get bucket(){return this.si.config.name.startsWith(Xt)?this.si.config.name.substring(Xt.length):this.si.config.name}get values(){return this.si.state.messages}get history(){return this.si.config.max_msgs_per_subject}get ttl(){return fh(this.si.config.max_age)}get bucket_location(){return this.cluster}get backingStore(){return this.si.config.storage}get storage(){return this.si.config.storage}get replicas(){return this.si.config.num_replicas}get description(){var e;return null!=(e=this.si.config.description)?e:""}get maxBucketSize(){return this.si.config.max_bytes}get maxValueSize(){return this.si.config.max_msg_size}get max_bytes(){return this.si.config.max_bytes}get placement(){return this.si.config.placement||{cluster:"",tags:[]}}get placementCluster(){var e,n;return null!=(n=null==(e=this.si.config.placement)?void 0:e.cluster)?n:""}get republish(){var e;return null!=(e=this.si.config.republish)?e:{src:"",dest:""}}get streamInfo(){return this.si}get size(){return this.si.state.bytes}}const zw="SHA-256=";class Ch{constructor(e){g(this,"si"),g(this,"backingStore"),this.si=e,this.backingStore="JetStream"}get bucket(){return function aL(t){return t.startsWith("OBJ_")?t.substring(4):t}(this.si.config.name)}get description(){var e;return null!=(e=this.si.config.description)?e:""}get ttl(){return this.si.config.max_age}get storage(){return this.si.config.storage}get replicas(){return this.si.config.num_replicas}get sealed(){return this.si.config.sealed}get size(){return this.si.state.bytes}get streamInfo(){return this.si}}function fu(t){if(void 0===t)return;const{domain:e}=t;if(void 0===e)return t;const n=Object.assign({},t);if(delete n.domain,""===e)return n;if(n.external)throw new Error("domain and external are both set");return n.external={api:`$JS.${e}.API`},n}class cL extends Lo{constructor(e,n){super(e,n)}add(e={}){var n=this;return R(function*(){var i;xt(e.name),e.mirror=fu(e.mirror),e.sources=null==(i=e.sources)?void 0:i.map(fu);const s=yield n._request(`${n.prefix}.STREAM.CREATE.${e.name}`,e);return n._fixInfo(s),s})()}delete(e){var n=this;return R(function*(){return xt(e),(yield n._request(`${n.prefix}.STREAM.DELETE.${e}`)).success})()}update(e,n={}){var r=this;return R(function*(){var c;if("object"==typeof e){const u=e;e=u.name,n=u,console.trace("\x1b[33m >> streams.update(config: StreamConfig) api changed to streams.update(name: string, config: StreamUpdateConfig) - this shim will be removed - update your code.  \x1b[0m")}xt(e);const s=yield r.info(e),i=Object.assign(s.config,n);i.mirror=fu(i.mirror),i.sources=null==(c=i.sources)?void 0:c.map(fu);const a=yield r._request(`${r.prefix}.STREAM.UPDATE.${e}`,i);return r._fixInfo(a),a})()}info(e,n){var r=this;return R(function*(){xt(e);const s=`${r.prefix}.STREAM.INFO.${e}`;let o=yield r._request(s,n),{total:a,limit:c}=o,u=o.state.subjects?Object.getOwnPropertyNames(o.state.subjects).length:1;if(a&&a>u){const l=[o],d=n||{};let f=0;for(;a>u;){f++,d.offset=c*f;const y=yield r._request(s,d);a=y.total,l.push(y);const _=Object.getOwnPropertyNames(y.state.subjects).length;if(u+=_,_<c)break}let h={};for(let y=0;y<l.length;y++)o=l[y],o.state.subjects&&(h=Object.assign(h,o.state.subjects));o.offset=0,o.total=0,o.limit=0,o.state.subjects=h}return r._fixInfo(o),o})()}list(e=""){return new jo(`${this.prefix}.STREAM.LIST`,i=>{const o=i;return o.streams.forEach(a=>{this._fixInfo(a)}),o.streams},this,(null==e?void 0:e.length)?{subject:e}:{})}_fixInfo(e){e.config.sealed=e.config.sealed||!1,e.config.deny_delete=e.config.deny_delete||!1,e.config.deny_purge=e.config.deny_purge||!1,e.config.allow_rollup_hdrs=e.config.allow_rollup_hdrs||!1}purge(e,n){var r=this;return R(function*(){if(n){const{keep:i,seq:o}=n;if("number"==typeof i&&"number"==typeof o)throw new Error("can specify one of keep or seq")}return xt(e),yield r._request(`${r.prefix}.STREAM.PURGE.${e}`,n)})()}deleteMessage(e,n,r=!0){var s=this;return R(function*(){xt(e);const i={seq:n};return r||(i.no_erase=!0),(yield s._request(`${s.prefix}.STREAM.MSG.DELETE.${e}`,i)).success})()}getMessage(e,n){var r=this;return R(function*(){xt(e);const i=yield r._request(`${r.prefix}.STREAM.MSG.GET.${e}`,n);return new mL(i)})()}find(e){return this.findStream(e)}listKvs(){return new jo(`${this.prefix}.STREAM.LIST`,r=>{var c,u;const i=r.streams.filter(l=>l.config.name.startsWith(Xt));i.forEach(l=>{this._fixInfo(l)});let o="";return i.length&&(o=null!=(u=null==(c=this.nc.info)?void 0:c.cluster)?u:""),i.map(l=>new qw(l,o))},this)}listObjectStores(){return new jo(`${this.prefix}.STREAM.LIST`,r=>{const i=r.streams.filter(a=>a.config.name.startsWith("OBJ_"));return i.forEach(a=>{this._fixInfo(a)}),i.map(a=>new Ch(a))},this)}names(e=""){return new jo(`${this.prefix}.STREAM.NAMES`,i=>i.streams,this,(null==e?void 0:e.length)?{subject:e}:{})}}class uL extends Lo{constructor(e,n){super(e,n),g(this,"streams"),g(this,"consumers"),g(this,"direct"),this.streams=new cL(e,n),this.consumers=new vw(e,n),this.direct=new TF(e,n)}getAccountInfo(){var e=this;return R(function*(){return yield e._request(`${e.prefix}.INFO`)})()}advisories(){const e=new Et;return this.nc.subscribe("$JS.EVENT.ADVISORY.>",{callback:(n,r)=>{if(n)throw n;try{const s=this.parseJsResponse(r),i=s.type.split(".");e.push({kind:i[i.length-1],data:s})}catch(s){e.stop(s)}}}),e}}var kr=(()=>{return(t=kr||(kr={})).MsgIdHdr="Nats-Msg-Id",t.ExpectedStreamHdr="Nats-Expected-Stream",t.ExpectedLastSeqHdr="Nats-Expected-Last-Sequence",t.ExpectedLastMsgIdHdr="Nats-Expected-Last-Msg-Id",t.ExpectedLastSubjectSequenceHdr="Nats-Expected-Last-Subject-Sequence",kr;var t})();class Eh{constructor(e){g(this,"info"),g(this,"hdrs"),this.info=e}get name(){return this.info.name}get description(){var e;return null!=(e=this.info.description)?e:""}get headers(){return this.hdrs||(this.hdrs=Pr.fromRecord(this.info.headers||{})),this.hdrs}get options(){return this.info.options}get bucket(){return this.info.bucket}get chunks(){return this.info.chunks}get deleted(){var e;return null!=(e=this.info.deleted)&&e}get digest(){return this.info.digest}get mtime(){return this.info.mtime}get nuid(){return this.info.nuid}get size(){return this.info.size}}function Gw(t){var n;const e={name:t.name,description:null!=(n=t.description)?n:"",options:t.options};return t.headers&&(e.headers=t.headers.toRecord()),e}class Vo{constructor(e,n,r){g(this,"jsm"),g(this,"js"),g(this,"stream"),g(this,"name"),this.name=e,this.jsm=n,this.js=r}_sanitizeName(e){if(!e||0===e.length)return{name:e,error:new Error("name cannot be empty")};let n;e=e.replace(/[. ]/g,"_");try{Vw(e)}catch(r){n=r}return{name:e,error:n}}info(e){var n=this;return R(function*(){const r=yield n.rawInfo(e);return r?new Eh(r):null})()}list(){var e=this;return R(function*(){const n=[],r=yield e.watch({ignoreDeletes:!0,includeHistory:!0});var o,s=!1,i=!1;try{for(var c,a=Ir(r);s=!(c=yield a.next()).done;s=!1){const u=c.value;if(null===u)break;n.push(u)}}catch(u){i=!0,o=u}finally{try{s&&null!=a.return&&(yield a.return())}finally{if(i)throw o}}return Promise.resolve(n)})()}rawInfo(e){var n=this;return R(function*(){const{name:r,error:s}=n._sanitizeName(e);if(s)return Promise.reject(s);const i=n._metaSubject(r);try{const o=yield n.jsm.streams.getMessage(n.stream,{last_by_subj:i});return Hn().decode(o.data)}catch(o){return"404"===o.code?null:Promise.reject(o)}})()}_si(e){var n=this;return R(function*(){try{return yield n.jsm.streams.info(n.stream,e)}catch(r){return"404"===r.code?null:Promise.reject(r)}})()}seal(){var e=this;return R(function*(){let n=yield e._si();return null===n?Promise.reject(new Error("object store not found")):(n.config.sealed=!0,n=yield e.jsm.streams.update(e.stream,n.config),Promise.resolve(new Ch(n)))})()}status(e){var n=this;return R(function*(){const r=yield n._si(e);return null===r?Promise.reject(new Error("object store not found")):Promise.resolve(new Ch(r))})()}destroy(){return this.jsm.streams.delete(this.stream)}_put(e,n,r){var s=this;return R(function*(){var P,U;const i=s.js;(r=r||{timeout:i.timeout}).timeout=r.timeout||1e3;const{timeout:o}=r,a=(null==(P=i.nc.info)?void 0:P.max_payload)||1024;(e=e||{}).options=e.options||{};let c=(null==(U=e.options)?void 0:U.max_chunk_size)||131072;c=c>a?a:c,e.options.max_chunk_size=c;const u=yield s.info(e.name),{name:l,error:d}=s._sanitizeName(e.name);if(d)return Promise.reject(d);const f=No.next(),h=s._chunkSubject(f),y=s._metaSubject(l),_=Object.assign({bucket:s.name,nuid:f,size:0,chunks:0},Gw(e)),E=xe(),S=[],C=new Ro;try{const K=n?n.getReader():null,Be=new Fw;for(;;){const{done:en,value:wn}=K?yield K.read():{done:!0,value:void 0};if(en){if(C.size()>0){const Dn=C.drain();Be.update(Dn),_.chunks++,_.size+=Dn.length,S.push(s.js.publish(h,Dn,{timeout:o}))}_.mtime=(new Date).toISOString();const vt=Be.digest("base64"),Vn=vt.length%3,Fr=Vn>0?"=".repeat(Vn):"";_.digest=`${zw}${vt}${Fr}`,_.deleted=!1;const cr=ar();cr.set(Zt.RollupHdr,Zt.RollupValueSubject),S.push(s.js.publish(y,Hn().encode(_),{headers:cr,timeout:o})),u&&S.push(s.jsm.streams.purge(s.stream,{filter:`$O.${s.name}.C.${u.nuid}`})),yield Promise.all(S),E.resolve(new Eh(_));break}if(wn)for(C.fill(wn);C.size()>c;){_.chunks++,_.size+=c;const vt=C.drain(e.options.max_chunk_size);Be.update(vt),S.push(s.js.publish(h,vt,{timeout:o}))}}}catch(K){yield s.jsm.streams.purge(s.stream,{filter:h}),E.reject(K)}return E})()}put(e,n,r){var s;return(null==(s=null==e?void 0:e.options)?void 0:s.link)?Promise.reject(new Error("link cannot be set when putting the object in bucket")):this._put(e,n,r)}get(e){var n=this;return R(function*(){const r=yield n.rawInfo(e);if(null===r||r.deleted)return Promise.resolve(null);if(r.options&&r.options.link){const d=r.options.link.name||"";if(""===d)throw new Error("link is a bucket");return(yield Vo.create(n.js,r.options.link.bucket)).get(d)}const s=xe(),i={info:new Eh(r),error:s};if(0===r.size)return i.data=function dL(){return new ReadableStream({pull(t){t.enqueue(new Uint8Array(0)),t.close()}})}(),s.resolve(null),Promise.resolve(i);let o;const a=Rr();a.orderedConsumer();const c=new Fw,u=`$O.${n.name}.C.${r.nuid}`,l=yield n.js.subscribe(u,a);return R(function*(){var h,d=!1,f=!1;try{for(var _,y=Ir(l);d=!(_=yield y.next()).done;d=!1){const E=_.value;if(E.data.length>0&&(c.update(E.data),o.enqueue(E.data)),0===E.info.pending){const S=c.digest("base64"),C=S.length%3,P=C>0?"=".repeat(C):"",U=`${zw}${S}${P}`;U!==r.digest?o.error(new Error(`received a corrupt object, digests do not match received: ${r.digest} calculated ${U}`)):o.close(),l.unsubscribe()}}}catch(E){f=!0,h=E}finally{try{d&&null!=y.return&&(yield y.return())}finally{if(f)throw h}}})().then(()=>{s.resolve()}).catch(d=>{o.error(d),s.reject(d)}),i.data=new ReadableStream({start(d){o=d},cancel(){l.unsubscribe()}}),i})()}linkStore(e,n){if(!(n instanceof Vo))return Promise.reject("bucket required");const r=n,{name:s,error:i}=this._sanitizeName(e);return i?Promise.reject(i):this._put({name:s,options:{link:{bucket:r.name}}},null)}link(e,n){var r=this;return R(function*(){if(n.deleted)return Promise.reject(new Error("object is deleted"));const{name:s,error:i}=r._sanitizeName(e);if(i)return Promise.reject(i);if(r.name===n.bucket){const c=Object.assign({},function lL(t){return{name:t.name,description:t.description,headers:t.headers,options:t.options}}(n));c.name=s;try{return yield r.update(n.name,c),yield r.info(s)}catch(u){return Promise.reject(u)}}return r._put({name:s,options:{link:{bucket:n.bucket,name:n.name}}},null)})()}delete(e){var n=this;return R(function*(){const r=yield n.rawInfo(e);if(null===r)return Promise.resolve({purged:0,success:!1});r.deleted=!0,r.size=0,r.chunks=0,r.digest="";const s=Hn(),i=ar();return i.set(Zt.RollupHdr,Zt.RollupValueSubject),yield n.js.publish(n._metaSubject(r.name),s.encode(r),{headers:i}),n.jsm.streams.purge(n.stream,{filter:n._chunkSubject(r.nuid)})})()}update(e,n={}){var r=this;return R(function*(){var u;const s=yield r.rawInfo(e);if(null===s)return Promise.reject(new Error("object not found"));if(s.deleted)return Promise.reject(new Error("cannot update meta for a deleted object"));n.name=null!=(u=n.name)?u:s.name;const{name:i,error:o}=r._sanitizeName(n.name);if(o)return Promise.reject(o);if(e!==n.name){const l=yield r.info(n.name);if(l&&!l.deleted)return Promise.reject(new Error("an object already exists with that name"))}n.name=i;const a=Object.assign({},s,Gw(n)),c=Hn();return r.js.publish(r._metaSubject(a.name),c.encode(a))})()}watch(e={}){var n=this;return R(function*(){var u,l;e.includeHistory=null!=(u=e.includeHistory)&&u,e.ignoreDeletes=null!=(l=e.ignoreDeletes)&&l;let r=!1;const s=new Et,i=n._metaSubjectAll();try{yield n.jsm.streams.getMessage(n.stream,{last_by_subj:i})}catch(d){"404"===d.code?(s.push(null),r=!0):s.stop(d)}const o=Hn(),a=Rr();a.orderedConsumer(),e.includeHistory?a.deliverLastPerSubject():(r=!0,a.deliverNew()),a.callback((d,f)=>{var h;if(d)s.stop(d);else if(null!==f){const y=o.decode(f.data);y.deleted&&!0===e.ignoreDeletes||s.push(y),0===(null==(h=f.info)?void 0:h.pending)&&!r&&(r=!0,s.push(null))}});const c=yield n.js.subscribe(i,a);return s._data=c,s.iterClosed.then(()=>{c.unsubscribe()}),c.closed.then(()=>{s.stop()}).catch(d=>{s.stop(d)}),s})()}_chunkSubject(e){return`$O.${this.name}.C.${e}`}_metaSubject(e){return`$O.${this.name}.M.${Uo.encode(e)}`}_metaSubjectAll(){return`$O.${this.name}.M.>`}init(e={}){var n=this;return R(function*(){try{n.stream=function oL(t){return du(t),`OBJ_${t}`}(n.name)}catch(s){return Promise.reject(s)}const r=Object.assign({},e);r.name=n.stream,r.allow_rollup_hdrs=!0,r.discard=hi.New,r.subjects=[`$O.${n.name}.C.>`,`$O.${n.name}.M.>`],e.placement&&(r.placement=e.placement);try{yield n.jsm.streams.info(r.name)}catch(s){"stream not found"===s.message&&(yield n.jsm.streams.add(r))}})()}static create(e,n,r={}){return R(function*(){var d;if("function"!=typeof(null==(d=null==crypto?void 0:crypto.subtle)?void 0:d.digest))return Promise.reject(new Error("objectstore: unable to calculate hashes - crypto.subtle.digest with sha256 support is required"));const s=e,{ok:i,min:o}=s.nc.features.get(St.JS_OBJECTSTORE);if(!i)return Promise.reject(new Error(`objectstore is only supported on servers ${o} or better`));let a=s.opts||{};a=Object.assign(a,{timeout:a.timeout||2e3});const u=yield s.nc.jetstreamManager(a),l=new Vo(n,u,e);return yield l.init(r),Promise.resolve(l)})()}}class fL{constructor(e){g(this,"js"),this.js=e}kv(e,n={}){return n.bindOnly?Ho.bind(this.js,e):Ho.create(this.js,e,n)}os(e,n={}){return DL(this.js.nc),Vo.create(this.js,e,n)}}class xh extends Lo{constructor(e,n){super(e,n),g(this,"api"),this.api=new vw(e,n)}get apiPrefix(){return this.prefix}get views(){return new fL(this)}publish(e,n=at,r){var s=this;return R(function*(){(r=r||{}).expect=r.expect||{};const i=(null==r?void 0:r.headers)||ar();r&&(r.msgID&&i.set(kr.MsgIdHdr,r.msgID),r.expect.lastMsgID&&i.set(kr.ExpectedLastMsgIdHdr,r.expect.lastMsgID),r.expect.streamName&&i.set(kr.ExpectedStreamHdr,r.expect.streamName),"number"==typeof r.expect.lastSequence&&i.set(kr.ExpectedLastSeqHdr,`${r.expect.lastSequence}`),"number"==typeof r.expect.lastSubjectSequence&&i.set(kr.ExpectedLastSubjectSequenceHdr,`${r.expect.lastSubjectSequence}`));const o=r.timeout||s.timeout,a={};o&&(a.timeout=o),r&&(a.headers=i);let l,{retries:c,retry_delay:u}=r;c=c||1,u=u||250;for(let f=0;f<c;f++)try{l=yield s.nc.request(e,n,a);break}catch(h){if(!("503"===h.code&&f+1<c))throw h;yield lh(u)}const d=s.parseJsResponse(l);if(""===d.stream)throw j.errorForCode(O.JetStreamInvalidAck);return d.duplicate=!!d.duplicate&&d.duplicate,d})()}pull(e,n,r=0){var s=this;return R(function*(){xt(e),pi(n);let i=s.timeout;r>i&&(i=r);const o={batch:1,no_wait:0===(r=r<0?0:ze(r)),expires:r},a=yield s.nc.request(`${s.prefix}.CONSUMER.MSG.NEXT.${e}.${n}`,s.jc.encode(o),{noMux:!0,timeout:i}),c=gi(a);if(c)throw c;return ru(a)})()}fetch(e,n,r={}){var S;xt(e),pi(n);let s=null;const i=(null!=(S=r.max_bytes)?S:0)>0;let o=0;const a=i?r.max_bytes:0;let c=null;const u={};if(u.batch=r.batch||1,a){const C=this.nc.features.get(St.JS_PULL_MAX_BYTES);if(!C.ok)throw new Error(`max_bytes is only supported on servers ${C.min} or better`);u.max_bytes=a}u.no_wait=r.no_wait||!1,u.no_wait&&u.expires&&(u.expires=0);const l=r.expires||0;if(l&&(u.expires=ze(l)),0===l&&!1===u.no_wait)throw new Error("expires or no_wait is required");const d=r.idle_heartbeat||0;d&&(u.idle_heartbeat=ze(d),!0===r.delay_heartbeat&&(u.idle_heartbeat=ze(4*d)));const f=new Et,h=u.batch;let y=0;f.protocolFilterFn=(C,P=!1)=>!gw(C.msg)||(null==c||c.work(),!1),f.dispatchedFn=C=>{if(C){if(i&&(o+=C.data.length),y++,s&&0===C.info.pending)return;(1===f.getPending()&&0===C.info.pending||h===y||a>0&&o>=a)&&f.stop()}};const _=Or(this.nc.options.inboxPrefix),E=this.nc.subscribe(_,{max:r.batch,callback:(C,P)=>{null===C&&(C=gi(P)),null!==C?(s&&(s.cancel(),s=null),function yk(t){return"string"==typeof t.code}(C)?f.stop(null===Kw(C)?void 0:C):f.stop(C)):(null==c||c.work(),f.received++,f.push(ru(P)))}});return l&&(s=Zc(l),s.catch(()=>{E.isClosed()||(E.drain().catch(()=>{}),s=null),c&&c.cancel()})),R(function*(){try{d&&(c=new Ow(d,C=>(f.push(()=>{f.err=new j(`${Bt.IdleHeartbeatMissed}: ${C}`,O.JetStreamIdleHeartBeat)}),!0)))}catch(C){}yield E.closed,null!==s&&(s.cancel(),s=null),c&&c.cancel(),f.stop()})().catch(),this.nc.publish(`${this.prefix}.CONSUMER.MSG.NEXT.${e}.${n}`,this.jc.encode(u),{reply:_}),f}pullSubscribe(e,n=Rr()){var r=this;return R(function*(){const s=yield r._processOptions(e,n);if(s.ordered)throw new Error("pull subscribers cannot be be ordered");if(s.attached||(s.config.filter_subject=e),s.config.deliver_subject)throw new Error("consumer info specifies deliver_subject - pull consumers cannot have deliver_subject set");const i=s.config.ack_policy;if(i===Je.None||i===Je.All)throw new Error("ack policy for pull consumers must be explicit");const o=r._buildTypedSubscriptionOpts(s),a=new yL(r,s.deliver,o);a.info=s;try{yield r._maybeCreateConsumer(s)}catch(c){throw a.unsubscribe(),c}return a})()}subscribe(e,n=Rr()){var r=this;return R(function*(){const s=yield r._processOptions(e,n);if(!s.isBind&&!s.config.deliver_subject)throw new Error("push consumer requires deliver_subject");const i=r._buildTypedSubscriptionOpts(s),o=new Ww(r,s.deliver,i);o.info=s;try{yield r._maybeCreateConsumer(s)}catch(a){throw o.unsubscribe(),a}return o._maybeSetupHbMonitoring(),o})()}_processOptions(e,n=Rr()){var r=this;return R(function*(){var i,o;const s=Pw(n)?n.getOpts():n;if(s.isBind=!!Pw(n)&&n.isBind,s.flow_control={heartbeat_count:0,fc_count:0,consumer_restarts:0},s.ordered){if(s.ordered_consumer_sequence={stream_seq:0,delivery_seq:0},s.config.ack_policy!==Je.NotSet&&s.config.ack_policy!==Je.None)throw new j("ordered consumer: ack_policy can only be set to 'none'",O.ApiError);if(s.config.durable_name&&s.config.durable_name.length>0)throw new j("ordered consumer: durable_name cannot be set",O.ApiError);if(s.config.deliver_subject&&s.config.deliver_subject.length>0)throw new j("ordered consumer: deliver_subject cannot be set",O.ApiError);if(void 0!==s.config.max_deliver&&s.config.max_deliver>1)throw new j("ordered consumer: max_deliver cannot be set",O.ApiError);if(s.config.deliver_group&&s.config.deliver_group.length>0)throw new j("ordered consumer: deliver_group cannot be set",O.ApiError);s.config.deliver_subject=Or(r.nc.options.inboxPrefix),s.config.ack_policy=Je.None,s.config.max_deliver=1,s.config.flow_control=!0,s.config.idle_heartbeat=s.config.idle_heartbeat||ze(5e3),s.config.ack_wait=ze(792e5),s.config.mem_storage=!0,s.config.num_replicas=1}if(s.config.ack_policy===Je.NotSet&&(s.config.ack_policy=Je.All),s.api=r,s.config=s.config||{},s.stream=s.stream?s.stream:yield r.findStream(e),s.attached=!1,s.config.durable_name)try{const a=yield r.api.info(s.stream,s.config.durable_name);if(a){if(a.config.filter_subject&&a.config.filter_subject!==e)throw new Error("subject does not match consumer");const c=null!=(i=s.config.deliver_group)?i:"";if(""===c&&!0===a.push_bound)throw new Error("duplicate subscription");const u=null!=(o=a.config.deliver_group)?o:"";if(c!==u)throw""===u?new Error("durable requires no queue group"):new Error(`durable requires queue group '${u}'`);s.last=a,s.config=a.config,s.attached=!0,s.config.durable_name||(s.name=a.name)}}catch(a){if("404"!==a.code)throw a}return s.attached||(s.config.filter_subject=e),s.deliver=s.config.deliver_subject||Or(r.nc.options.inboxPrefix),s})()}_buildTypedSubscriptionOpts(e){const n={};return n.adapter=function vL(t){return t?_L:bL}(void 0===e.callbackFn),n.ingestionFilterFn=xh.ingestionFn(e.ordered),n.protocolFilterFn=(r,s=!1)=>{const i=r;return!hh(i.msg)||(s||i.msg.respond(),!1)},!e.mack&&e.config.ack_policy!==Je.None&&(n.dispatchedFn=wL),e.callbackFn&&(n.callback=e.callbackFn),n.max=e.max||0,n.queue=e.queue,n}_maybeCreateConsumer(e){var n=this;return R(function*(){if(e.attached)return;if(e.isBind)throw new Error(`unable to bind - durable consumer ${e.config.durable_name} doesn't exist in ${e.stream}`);e.config=Object.assign({deliver_policy:Ct.All,ack_policy:Je.Explicit,ack_wait:ze(3e4),replay_policy:is.Instant},e.config);const r=yield n.api.add(e.stream,e.config);e.name=r.name,e.config=r.config,e.last=r})()}static ingestionFn(e){return(n,r)=>{var a;const s=r;if(!n)return{ingest:!1,protocol:!1};const i=n;if(gi(i.msg)||null==(a=s.monitor)||a.work(),gw(i.msg)){const c=!e||s._checkHbOrderConsumer(i.msg);return e||s.info.flow_control.heartbeat_count++,{ingest:c,protocol:!0}}return hh(i.msg)?(s.info.flow_control.fc_count++,{ingest:!0,protocol:!0}):{ingest:!e||s._checkOrderedConsumer(n),protocol:!1}}}}class Sh{constructor(e){g(this,"options"),g(this,"protocol"),g(this,"draining"),g(this,"listeners"),g(this,"_services"),this.draining=!1,this.options=function XF(t){const e=`${uh}:${Dw()}`;if((t=t||{servers:[e]}).servers=t.servers||[],"string"==typeof t.servers&&(t.servers=[t.servers]),t.servers.length>0&&t.port)throw new j("port and servers options are mutually exclusive",O.InvalidOption);0===t.servers.length&&t.port&&(t.servers=[`${uh}:${t.port}`]),t.servers&&0===t.servers.length&&(t.servers=[e]);const n=Yc({maxPingOut:2,maxReconnectAttempts:10,noRandomize:!1,pedantic:!1,pingInterval:12e4,reconnect:!0,reconnectJitter:100,reconnectJitterTLS:1e3,reconnectTimeWait:2e3,tls:void 0,verbose:!1,waitOnFirstConnect:!1,ignoreAuthErrorAbort:!1},t);if(t.user&&t.token||t.authenticator&&(t.token||t.user||t.pass))throw j.errorForCode(O.BadAuthentication);if(n.authenticator=function VF(t){return t.authenticator?t.authenticator:t.token?function GF(t){return()=>({auth_token:"function"==typeof t?t():t})}(t.token):t.user?function zF(t,e){return()=>({user:"function"==typeof t?t():t,pass:"function"==typeof e?e():e})}(t.user,t.pass):()=>{}}(n),["reconnectDelayHandler","authenticator"].forEach(r=>{if(n[r]&&"function"!=typeof n[r])throw new j(`${r} option should be a function`,O.NotFunction)}),n.reconnectDelayHandler||(n.reconnectDelayHandler=()=>{let r=n.tls?n.reconnectJitterTLS:n.reconnectJitter;return r&&(r++,r=Math.floor(Math.random()*r)),n.reconnectTimeWait+r}),n.inboxPrefix)try{Or(n.inboxPrefix)}catch(r){throw new j(r.message,O.ApiError)}if(n.resolve&&"function"!=typeof Cw())throw new j("'resolve' is not supported on this client",O.InvalidOption);return n}(e),this.listeners=[]}static connect(e={}){return new Promise((n,r)=>{const s=new Sh(e);iu.connect(s.options,s).then(i=>{s.protocol=i,R(function*(){var c,o=!1,a=!1;try{for(var l,u=Ir(i.status());o=!(l=yield u.next()).done;o=!1){const d=l.value;s.listeners.forEach(f=>{f.push(d)})}}catch(d){a=!0,c=d}finally{try{o&&null!=u.return&&(yield u.return())}finally{if(a)throw c}}})(),n(s)}).catch(i=>{r(i)})})}closed(){return this.protocol.closed}close(){var e=this;return R(function*(){yield e.protocol.close()})()}_check(e,n,r){if(this.isClosed())throw j.errorForCode(O.ConnectionClosed);if(n&&this.isDraining()||r&&this.protocol.noMorePublishing)throw j.errorForCode(O.ConnectionDraining);if(0===(e=e||"").length)throw j.errorForCode(O.BadSubject)}publish(e,n=at,r){if(this._check(e,!1,!0),n&&!function Dk(t){return t instanceof Uint8Array}(n))throw j.errorForCode(O.BadPayload);this.protocol.publish(e,n,r)}subscribe(e,n={}){this._check(e,!0,!1);const r=new Sw(this.protocol,e,n);return this.protocol.subscribe(r),r}_resub(e,n,r){this._check(n,!0,!1);const s=e;s.max=r,r&&(s.max=r+s.received),this.protocol.resub(s,n)}requestMany(e,n=at,r={maxWait:1e3,maxMessages:-1}){try{this._check(e,!0,!0)}catch(a){return Promise.reject(a)}if(r.strategy=r.strategy||vn.Timer,r.maxWait=r.maxWait||1e3,r.maxWait<1)return Promise.reject(new j("timeout",O.InvalidOption));const s=new Et;function i(a){s.push(()=>{s.stop(a)})}function o(a,c){a||null===c?i(null===a?void 0:a):s.push(c)}if(r.noMux){const a=(new Error).stack;let c="number"==typeof r.maxMessages&&r.maxMessages>0?r.maxMessages:-1;const u=this.subscribe(Or(this.options.inboxPrefix),{callback:(h,y)=>{var _,E;if(0===(null==(_=null==y?void 0:y.data)?void 0:_.length)&&(null==(E=null==y?void 0:y.headers)?void 0:E.status)===O.NoResponders&&(h=j.errorForCode(O.NoResponders)),h)return h.stack+=`\n\n${a}`,void l(h);o(null,y),r.strategy===vn.Count&&(c--,0===c&&l()),r.strategy===vn.JitterTimer&&(f(),d=setTimeout(()=>{l()},300)),r.strategy===vn.SentinelMsg&&y&&0===y.data.length&&l()}});u.closed.then(()=>{i()}).catch(h=>{s.stop(h)});const l=h=>{h&&s.push(()=>{throw h}),f(),u.drain().then(()=>{i()}).catch(y=>{i()})};s.iterClosed.then(()=>{f(),null==u||u.unsubscribe()}).catch(h=>{f(),null==u||u.unsubscribe()});try{this.publish(e,at,{reply:u.getSubject()})}catch(h){l(h)}let d=setTimeout(()=>{l()},r.maxWait);const f=()=>{d&&clearTimeout(d)}}else{const a=r;a.callback=o,s.iterClosed.then(()=>{c.cancel()}).catch(u=>{c.cancel(u)});const c=new Hk(this.protocol.muxSubscriptions,e,a);this.protocol.request(c);try{this.publish(e,n,{reply:`${this.protocol.muxSubscriptions.baseInbox}${c.token}`,headers:r.headers})}catch(u){c.cancel(u)}}return Promise.resolve(s)}request(e,n=at,r={timeout:1e3,noMux:!1}){try{this._check(e,!0,!0)}catch(s){return Promise.reject(s)}if(r.timeout=r.timeout||1e3,r.timeout<1)return Promise.reject(new j("timeout",O.InvalidOption));if(!r.noMux&&r.reply)return Promise.reject(new j("reply can only be used with noMux",O.InvalidOption));if(r.noMux){const s=r.reply?r.reply:Or(this.options.inboxPrefix),i=xe(),o=new Error;return this.subscribe(s,{max:1,timeout:r.timeout,callback:(c,u)=>{c?(c.code!==O.Timeout&&(c.stack+=`\n\n${o.stack}`),i.reject(c)):(c=dw(u))?(c.stack+=`\n\n${o.stack}`,i.reject(c)):i.resolve(u)}}).requestSubject=e,this.protocol.publish(e,n,{reply:s,headers:r.headers}),i}{const s=new _w(this.protocol.muxSubscriptions,e,r);this.protocol.request(s);try{this.publish(e,n,{reply:`${this.protocol.muxSubscriptions.baseInbox}${s.token}`,headers:r.headers})}catch(o){s.cancel(o)}const i=Promise.race([s.timer,s.deferred]);return i.catch(()=>{s.cancel()}),i}}flush(){return this.isClosed()?Promise.reject(j.errorForCode(O.ConnectionClosed)):this.protocol.flush()}drain(){return this.isClosed()?Promise.reject(j.errorForCode(O.ConnectionClosed)):this.isDraining()?Promise.reject(j.errorForCode(O.ConnectionDraining)):(this.draining=!0,this.protocol.drain())}isClosed(){return this.protocol.isClosed()}isDraining(){return this.draining}getServer(){const e=this.protocol.getServer();return e?e.listen:""}status(){const e=new Et;return this.listeners.push(e),e}get info(){return this.protocol.isClosed()?void 0:this.protocol.info}stats(){return{inBytes:this.protocol.inBytes,outBytes:this.protocol.outBytes,inMsgs:this.protocol.inMsgs,outMsgs:this.protocol.outMsgs}}jetstreamManager(e={}){var n=this;return R(function*(){const r=new uL(n,e);try{yield r.getAccountInfo()}catch(s){const i=s;throw i.code===O.NoResponders&&(i.code=O.JetStreamNotEnabled),i}return r})()}jetstream(e={}){return new xh(this,e)}getServerVersion(){const e=this.info;return e?as(e.version):void 0}rtt(){var e=this;return R(function*(){if(!e.protocol._closed&&!e.protocol.connected)throw j.errorForCode(O.Disconnect);const n=Date.now();return yield e.flush(),Date.now()-n})()}get features(){return this.protocol.features}get services(){return this._services||(this._services=new gL(this)),this._services}}class hL{constructor(e,n={strategy:vn.JitterTimer,maxWait:2e3},r){g(this,"nc"),g(this,"prefix"),g(this,"opts"),this.nc=e,this.prefix=r,this.opts=n}ping(e="",n=""){return this.q(_n.PING,e,n)}stats(e="",n=""){return this.q(_n.STATS,e,n)}schema(e="",n=""){return this.q(_n.SCHEMA,e,n)}info(e="",n=""){return this.q(_n.INFO,e,n)}q(e,n="",r=""){var s=this;return R(function*(){const i=new Et,o=Hn(),a=Fo.controlSubject(e,n,r,s.prefix),c=yield s.nc.requestMany(a,at,s.opts);return R(function*(){var d,u=!1,l=!1;try{for(var h,f=Ir(c);u=!(h=yield f.next()).done;u=!1){const y=h.value;try{const _=o.decode(y.data);i.push(_)}catch(_){i.push(()=>{i.stop(_)})}}}catch(y){l=!0,d=y}finally{try{u&&null!=f.return&&(yield f.return())}finally{if(l)throw d}}i.push(()=>{i.stop()})})().catch(u=>{i.stop(u)}),i})()}}class gL{constructor(e){g(this,"nc"),this.nc=e,console.log("\x1b[33m >> service framework is beta functionality \x1b[0m")}add(e){try{return new Fo(this.nc,e).start()}catch(n){return Promise.reject(n)}}client(e,n){return new hL(this.nc,e,n)}}class mL{constructor(e){if(g(this,"subject"),g(this,"seq"),g(this,"data"),g(this,"time"),g(this,"header"),this.subject=e.message.subject,this.seq=e.message.seq,this.time=new Date(Date.parse(e.message.time)),this.data=e.message.data?this._parse(e.message.data):at,e.message.hdrs){const n=this._parse(e.message.hdrs);this.header=Pr.decode(n)}else this.header=ar()}_parse(e){const n=atob(e),r=n.length,s=new Uint8Array(r);for(let i=0;i<r;i++)s[i]=n.charCodeAt(i);return s}}class Ww extends Jk{constructor(e,n,r){super(e.nc,n,r),g(this,"js"),g(this,"monitor"),this.js=e,this.monitor=null,this.sub.closed.then(()=>{this.monitor&&this.monitor.cancel()})}set info(e){this.sub.info=e}get info(){return this.sub.info}_resetOrderedConsumer(e){if(null===this.info||this.sub.isClosed())return;const n=Or(this.js.nc.options.inboxPrefix);this.js.nc._resub(this.sub,n);const s=this.info;s.ordered_consumer_sequence.delivery_seq=0,s.flow_control.heartbeat_count=0,s.flow_control.fc_count=0,s.flow_control.consumer_restarts++,s.deliver=n,s.config.deliver_subject=n,s.config.deliver_policy=Ct.StartSequence,s.config.opt_start_seq=e;const i={};i.stream_name=this.info.stream,i.config=s.config,this.js._request(`${s.api.prefix}.CONSUMER.CREATE.${s.stream}`,i).then(a=>{const c=a;this.info.config=c.config,this.info.name=c.name}).catch(a=>{const c=new j(`unable to recreate ordered consumer ${s.stream} at seq ${e}`,O.RequestError,a);this.sub.callback(c,{})})}_maybeSetupHbMonitoring(){var n,r;const e=(null==(r=null==(n=this.info)?void 0:n.config)?void 0:r.idle_heartbeat)||0;e&&this._setupHbMonitoring(fh(e))}_setupHbMonitoring(e,n=0){const r={cancelAfter:0,maxOut:2};n&&(r.cancelAfter=n);const s=this.sub;this.monitor=new Ow(e,o=>{var u,l,d;const a=function Ok(t,e,n){const r=ar(t,e),i=new fw({hdr:1,sid:0,size:0},at,{});return i._headers=r,i._subject=n,i}(409,`${Bt.IdleHeartbeatMissed}: ${o}`,this.sub.subject);if(null==(u=this.info)?void 0:u.ordered){if(!this.js.nc.protocol.connected)return!1;const f=(null==(d=null==(l=this.info)?void 0:l.ordered_consumer_sequence)?void 0:d.stream_seq)||0;return this._resetOrderedConsumer(f+1),!1}return this.sub.callback(null,a),!s.noIterator},r)}_checkHbOrderConsumer(e){const n=e.headers.get(Zt.ConsumerStalledHdr);""!==n&&this.js.nc.publish(n);const r=parseInt(e.headers.get(Zt.LastConsumerSeqHdr),10),s=this.info.ordered_consumer_sequence;return this.info.flow_control.heartbeat_count++,r!==s.delivery_seq&&this._resetOrderedConsumer(s.stream_seq+1),!1}_checkOrderedConsumer(e){const n=this.info.ordered_consumer_sequence,r=e.info.streamSequence,s=e.info.deliverySequence;return s!=n.delivery_seq+1?(this._resetOrderedConsumer(n.stream_seq+1),!1):(n.delivery_seq=s,n.stream_seq=r,!0)}destroy(){var e=this;return R(function*(){e.isClosed()||(yield e.drain());const n=e.sub.info,s=`${n.api.prefix}.CONSUMER.DELETE.${n.stream}.${n.config.durable_name||n.name}`;yield n.api._request(s)})()}consumerInfo(){var e=this;return R(function*(){const n=e.sub.info,s=`${n.api.prefix}.CONSUMER.INFO.${n.stream}.${n.config.durable_name||n.name}`,i=yield n.api._request(s);return n.last=i,i})()}}class yL extends Ww{constructor(e,n,r){super(e,n,r)}pull(e={batch:1}){var u,l;const{stream:n,config:r,name:s}=this.sub.info,i=null!=(u=r.durable_name)?u:s,o={};if(o.batch=e.batch||1,o.no_wait=e.no_wait||!1,(null!=(l=e.max_bytes)?l:0)>0){const d=this.js.nc.features.get(St.JS_PULL_MAX_BYTES);if(!d.ok)throw new Error(`max_bytes is only supported on servers ${d.min} or better`);o.max_bytes=e.max_bytes}let a=0;e.expires&&e.expires>0&&(a=e.expires,o.expires=ze(a));let c=0;if(e.idle_heartbeat&&e.idle_heartbeat>0&&(c=e.idle_heartbeat,o.idle_heartbeat=ze(c)),c&&0===a)throw new Error("idle_heartbeat requires expires");if(c>a)throw new Error("expires must be greater than idle_heartbeat");if(this.info){this.monitor&&this.monitor.cancel(),a&&c&&(this.monitor?this.monitor._change(c,a):this._setupHbMonitoring(c,a));const d=this.info.api,h=this.sub.subject;d.nc.publish(`${d.prefix}.CONSUMER.MSG.NEXT.${n}.${i}`,d.jc.encode(o),{reply:h})}}}function bL(t,e){return t||(t=gi(e))?[t,null]:[null,ru(e)]}function _L(t,e){if(t)return[t,null];const n=gi(e);return null!==n?[Kw(n),null]:[null,ru(e)]}function Kw(t){if(null!==t)switch(t.code){case O.JetStream404NoMessages:case O.JetStream408RequestTimeout:return null;case O.JetStream409:return function Nk(t){return t.code===O.JetStream409&&void 0!==[Bt.MaxBatchExceeded,Bt.MaxExpiresExceeded,Bt.MaxBytesExceeded,Bt.MaxMessageSizeExceeded,Bt.PushConsumer,Bt.IdleHeartbeatMissed].find(n=>-1!==t.message.indexOf(n))}(t)?t:null;default:return t}return null}function wL(t){t&&t.ack()}const DL=(()=>{let t=!1;return e=>{var n;if(!t){t=!0;const{lang:r}=null==(n=null==e?void 0:e.protocol)?void 0:n.transport;console.log(r?`\x1b[33m >> jetstream's materialized views object store functionality in ${r} is beta functionality \x1b[0m`:"\x1b[33m >> jetstream's materialized views object store functionality is beta functionality \x1b[0m")}}})();class xL{constructor(){g(this,"version"),g(this,"lang"),g(this,"closeError"),g(this,"connected"),g(this,"done"),g(this,"socket"),g(this,"options"),g(this,"socketClosed"),g(this,"encrypted"),g(this,"peeked"),g(this,"yields"),g(this,"signal"),g(this,"closedNotification"),this.version="1.14.0",this.lang="nats.ws",this.connected=!1,this.done=!1,this.socketClosed=!1,this.encrypted=!1,this.peeked=!1,this.yields=[],this.signal=xe(),this.closedNotification=xe()}connect(e,n){var r=this;return R(function*(){const i=xe();if(n.tls)return i.reject(new j("tls",O.InvalidOption)),i;r.options=n;const o=e.src;if(n.wsFactory){const{socket:a,encrypted:c}=yield n.wsFactory(e.src,n);r.socket=a,r.encrypted=c}else r.encrypted=0===o.indexOf("wss://"),r.socket=new WebSocket(o);return r.socket.binaryType="arraybuffer",r.socket.onopen=()=>{},r.socket.onmessage=a=>{if(r.yields.push(new Uint8Array(a.data)),r.peeked)return void r.signal.resolve();const c=Ro.concat(...r.yields),u=function Ek(t){const e=function Ck(t){for(let e=0;e<t.length;e++){const n=e+1;if(t.byteLength>n&&t[e]===_k&&t[n]===wk)return n+1}return 0}(t);if(e>0){const r=new Uint8Array(t).slice(0,e);return bn.decode(r)}return""}(c);if(""!==u){const l=gF.exec(u);if(!l)return n.debug&&console.error("!!!",Qc(c)),void i.reject(new Error("unexpected response from server"));try{(function pL(t,e){const{proto:n,tls_required:r,tls_available:s}=t;if((void 0===n||n<1)&&e.noEcho)throw new j("noEcho",O.ServerOptionNotAvailable);if(e.tls&&!r&&!s)throw new j("tls",O.ServerOptionNotAvailable)})(JSON.parse(l[1]),r.options),r.peeked=!0,r.connected=!0,r.signal.resolve(),i.resolve()}catch(d){return void i.reject(d)}}},r.socket.onclose=a=>{let c;r.socketClosed=!0,r.done||(a.wasClean||(c=new Error(a.reason)),r._closed(c))},r.socket.onerror=a=>{const u=new j(a.message,O.Unknown,new Error(a.error));i.reject(u)},i})()}disconnect(){this._closed(void 0,!0)}_closed(e,n=!0){var r=this;return R(function*(){if(r.connected&&!r.done){if(r.closeError=e,!e)for(;!r.socketClosed&&r.socket.bufferedAmount>0;)console.log(r.socket.bufferedAmount),yield lh(100);r.done=!0;try{r.socket.close(e?1002:1e3,e?e.message:void 0)}catch(s){}n&&r.closedNotification.resolve(e)}})()}get isClosed(){return this.done}[Symbol.asyncIterator](){return this.iterate()}iterate(){var e=this;return ch(function*(){for(;;){0===e.yields.length&&(yield Gc(e.signal));const n=e.yields;e.yields=[];for(let r=0;r<n.length;r++)e.options.debug&&console.info(`> ${Qc(n[r])}`),yield n[r];if(e.done)break;0===e.yields.length&&(n.length=0,e.yields=n,e.signal=xe())}})()}isEncrypted(){return this.connected&&this.encrypted}send(e){if(!this.done)try{return this.socket.send(e.buffer),void(this.options.debug&&console.info(`< ${Qc(e)}`))}catch(n){this.options.debug&&console.error(`!!! ${Qc(e)}: ${n}`)}}close(e){return this._closed(e,!1)}closed(){return this.closedNotification}}function SL(t){/^(.*:\/\/)(.*)/.test(t)||(t=`https://${t}`);let n=new URL(t);const r=n.protocol.toLowerCase();let s,i;"https:"!==r&&"http"!==r&&(t=t.replace(/^(.*:\/\/)(.*)/gm,"$2"),n=new URL(`http://${t}`));const o=n.hostname,a=n.pathname,c=n.search||"";switch(r){case"http:":case"ws:":case"nats:":i=n.port||"80",s="ws:";break;default:i=n.port||"443",s="wss:"}return`${s}//${o}:${i}${a}${c}`}let AL=(()=>{class t{constructor(){this.nc=this.establishConnection(),this.sc=ow(),this._subject=new In,this.board$=this._subject.asObservable()}start(n){var r=this;this.nc.then(s=>{const i=s.subscribe(`games.${n}.moves.*`);R(function*(){var o,a;try{for(var u,c=pk(i);!(u=yield c.next()).done;){const d=JSON.parse(r.sc.decode(u.value.data));r._subject.next(d)}}catch(l){o={error:l}}finally{try{u&&!u.done&&(a=c.return)&&(yield a.call(c))}finally{if(o)throw o.error}}console.log("subscription closed")})()})}establishConnection(){return R(function*(){return yield function IL(t={}){return function Yk(t){$t=t}({defaultPort:443,urlParseFn:SL,factory:()=>new xL}),Sh.connect(t)}({servers:["ws://localhost:8080/nats"]})})()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ML=(()=>{class t{constructor(n,r,s){this._route=n,this._gameService=r,this._natsService=s,this.klass=!0,this.board={},this.gameId=0,this.playerId=0}ngOnInit(){this._route.queryParams.subscribe(n=>{this.gameId=n.gameId,this.playerId=n.playerId;const r=this._gameService.getGame(this.gameId);this._gameSubscription=r.subscribe({next:i=>this.board=i,error:i=>console.error(i)}),this._bdSubscription=this._natsService.board$.subscribe({next:i=>this.board=i}),this._natsService.start(this.gameId)})}onCellClick(n){this.board[n]||this.makeMove(n)}makeMove(n){const s=this._gameService.makeMove(this.gameId,this.playerId,{coordinate:n});this._boardSubscription=s.subscribe({error:i=>console.error(i)})}}return t.\u0275fac=function(n){return new(n||t)($(ns),$(K_),$(AL))},t.\u0275cmp=ps({type:t,selectors:[["app-board"]],hostVars:2,hostBindings:function(n,r){2&n&&Wa("board-page",r.klass)},decls:22,vars:12,consts:[[1,"board"],[1,"cell",3,"click"],[1,"state"]],template:function(n,r){1&n&&(Ne(0,"div",0),Ne(1,"div",1),ot("click",function(){return r.onCellClick("a1")}),ht(2),ke(),Ne(3,"div",1),ot("click",function(){return r.onCellClick("a2")}),ht(4),ke(),Ne(5,"div",1),ot("click",function(){return r.onCellClick("a3")}),ht(6),ke(),Ne(7,"div",1),ot("click",function(){return r.onCellClick("b1")}),ht(8),ke(),Ne(9,"div",1),ot("click",function(){return r.onCellClick("b2")}),ht(10),ke(),Ne(11,"div",1),ot("click",function(){return r.onCellClick("b3")}),ht(12),ke(),Ne(13,"div",1),ot("click",function(){return r.onCellClick("c1")}),ht(14),ke(),Ne(15,"div",1),ot("click",function(){return r.onCellClick("c2")}),ht(16),ke(),Ne(17,"div",1),ot("click",function(){return r.onCellClick("c3")}),ht(18),ke(),ke(),Ne(19,"div",2),ht(20),function Yv(t,e){const n=ce();let r;const s=t+20;n.firstCreatePass?(r=function G1(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[s]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(s,r.onDestroy)):r=n.data[s];const i=r.factory||(r.factory=zr(r.type)),o=dr($);try{const a=ba(!1),c=i();return ba(a),function iI(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,M(),s,c),c}finally{dr(o)}}(21,"titlecase"),ke()),2&n&&(Ke(2),kt(r.board.a1),Ke(2),kt(r.board.a2),Ke(2),kt(r.board.a3),Ke(2),kt(r.board.b1),Ke(2),kt(r.board.b2),Ke(2),kt(r.board.b3),Ke(2),kt(r.board.c1),Ke(2),kt(r.board.c2),Ke(2),kt(r.board.c3),Ke(2),Ja("Game State: ",Qv(21,10,r.board.state),""))},pipes:[pb],styles:[".board-page .board{display:grid;grid-template-columns:1fr 1fr 1fr;width:300px}.board-page .board .cell{display:flex;height:98px;background-color:#d3d3d3;justify-content:center;align-items:center;border:solid 1px black;cursor:pointer}.board-page .state{margin-top:29px}\n"],encapsulation:2}),t})(),TL=(()=>{class t{constructor(n){this._httpClient=n,this._httpOptions={headers:new mn({"Content-Type":"application/json"})}}getUsers(){return this._httpClient.get("/api/users",this._httpOptions)}}return t.\u0275fac=function(n){return new(n||t)(H(Nf))},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function PL(t,e){if(1&t&&(Va(0),Ne(1,"option",3),ht(2),ke(),qa()),2&t){const n=e.$implicit;Ke(1),Ga("value",n.id),Ke(1),kt(n.name)}}function OL(t,e){if(1&t&&(Va(0),Ne(1,"option",3),ht(2),ke(),qa()),2&t){const n=e.$implicit;Ke(1),Ga("value",n.id),Ke(1),kt(n.name)}}const RL=[{path:"",redirectTo:"/lobby",pathMatch:"full"},{path:"lobby",component:(()=>{class t{constructor(n,r,s){this._userService=n,this._gameService=r,this._router=s,this.klass=!0,this.allUsers=[],this.humans=[],this.opponents=[]}ngOnInit(){const n=this._userService.getUsers();this._userSubscription=n.subscribe({next:r=>{this.allUsers=r.map(s=>("Human"===s.player_type||(s.name=`${s.player_type} ${s.name}`),s)),this.humans=this.allUsers.filter(s=>"Human"===s.player_type),this.humans.unshift({name:"Select User..."}),this.opponents=[]},error:r=>console.error(r)})}onUserChange(n){var r;const s=n.target.value;this.user=this.humans.find(i=>i.id===+s),this.opponents=this.allUsers.filter(i=>{var o;return(null===(o=this.user)||void 0===o?void 0:o.name)!==i.name}),this.opponents.unshift({name:"Select Opponent..."}),(null===(r=this.user)||void 0===r?void 0:r.id)?this.opponent=this.opponents.find(i=>i.id===+s):(this.opponents=[],this.opponent=void 0)}onOpponentChange(n){const r=n.target.value;this.opponent=this.opponents.find(s=>s.id===+r)}onCreateGame(){if(this.user&&this.opponent){const n=this._gameService.create({player_name:this.user.name,opponent_type:this.opponent.player_type});this._gameSubscription=n.subscribe({next:r=>{var s;this._router.navigate(["/board"],{queryParams:{gameId:r.id,playerId:null===(s=this.user)||void 0===s?void 0:s.id}})},error:r=>console.error(r)})}}}return t.\u0275fac=function(n){return new(n||t)($(TL),$(K_),$(Dt))},t.\u0275cmp=ps({type:t,selectors:[["app-lobby"]],hostVars:2,hostBindings:function(n,r){2&n&&Wa("lobby",r.klass)},decls:6,vars:3,consts:[[3,"change"],[4,"ngFor","ngForOf"],[1,"button",3,"disabled","click"],[3,"value"]],template:function(n,r){1&n&&(Ne(0,"select",0),ot("change",function(i){return r.onUserChange(i)}),pd(1,PL,3,2,"ng-container",1),ke(),Ne(2,"select",0),ot("change",function(i){return r.onOpponentChange(i)}),pd(3,OL,3,2,"ng-container",1),ke(),Ne(4,"button",2),ot("click",function(){return r.onCreateGame()}),ht(5,"Start Game"),ke()),2&n&&(Ke(1),to("ngForOf",r.humans),Ke(2),to("ngForOf",r.opponents),Ke(1),to("disabled",!r.opponent))},directives:[lb],styles:[".lobby{display:flex;flex-direction:column;gap:20px;width:300px}.lobby select,.lobby .button{cursor:pointer}\n"],encapsulation:2}),t})()},{path:"board",component:ML}];let NL=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yn({type:t}),t.\u0275inj=An({imports:[[z_.forRoot(RL)],z_]}),t})(),kL=(()=>{class t{constructor(){this.title="tic-tac-toe-v2-front-end"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=ps({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"header"],[1,"content"]],template:function(n,r){1&n&&(Ne(0,"div",0),ht(1,"Tic Tac Toe"),ke(),Ne(2,"div",1),wd(3,"router-outlet"),ke())},directives:[Zf],styles:[".header[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}"]}),t})(),FL=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yn({type:t,bootstrap:[kL]}),t.\u0275inj=An({providers:[],imports:[[bO,NL,VO]]}),t})();(function JM(){L0=!1})(),yO().bootstrapModule(FL).catch(t=>console.error(t))}},ue=>{ue(ue.s=719)}]);