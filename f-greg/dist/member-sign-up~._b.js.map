{"version":3,"sources":["webpack:///./bundles/member-sign-up sync .*\\.tpl\\.html$","webpack:///./bundles/member-sign-up sync \\..+\\/.+\\.js$","webpack:///./bundles/member-sign-up/index.js","webpack:///./bundles/member-sign-up/steps/01-landing.controller.js","webpack:///./bundles/member-sign-up/steps/01-landing.tpl.html","webpack:///./bundles/member-sign-up/steps/01-membership.controller.js","webpack:///./bundles/member-sign-up/steps/01-membership.tpl.html","webpack:///./bundles/member-sign-up/steps/02-profile.controller.js","webpack:///./bundles/member-sign-up/steps/03-purchase.controller.js","webpack:///./bundles/member-sign-up/steps/03-purchase.tpl.html","webpack:///./bundles/member-sign-up/steps/04-complete.controller.js","webpack:///./bundles/member-sign-up/steps/04-complete.tpl.html","webpack:///./bundles/member-sign-up/steps/no-plan-billing.controller.js","webpack:///./bundles/member-sign-up/steps/no-plan-complete.controller.js","webpack:///./shared/dw-invoice/dw-invoice-payment-processing-fee.directive.js","webpack:///./shared/need-help/need-help.directive.js","webpack:///./shared/new-billing-profile/new-billing-profile.directive.js","webpack:///./shared/new-billing-profile/new-billing-profile.tpl.html","webpack:///./shared/staff-help/staff-help.controller.js","webpack:///./shared/staff-help/staff-help.tpl.html","webpack:///./shared/templates/new-billing-profile.tpl.html","webpack:///./shared/templates/new-user-profile.tpl.html"],"names":["index","$injector","importAll","r","js","require","loadNewModules","m","default","name","invoke","$templateCache","ctx","forEach","key","put","replace","staffHelpTpl","userProfileTpl","billingProfileTpl","angular","module","controller","$scope","$translate","$filter","dwAlerts","state","helper","center","product","$ctrl","membershipStartDate","getParam","moment","setPageTitle","instant","centerName","next","setParam","setPath","getCurrentUserId","$route","$timeout","reg","data","membershipService","vm","centers","settings","skipPlanMemberSignUp","stepCount","getCurrentCenterId","length","loadMembershipCategories","updating","query","id","catch","err","error","finally","then","result","membershipCategories","cat","products","membershipProduct","some","membershipCategory","membershipCategoryChange","pointFirstInvalid","setCurrentCenterId","getPath","$q","userProfile","userProfileService","purchaseService","optsMembershipStatus","schema","membershipStatus","new","userName","fullNameCompany","bindTestUserGenerator","when","registerNewUser","login","password","createPurchase","back","newBillingProfile","needHelp","dwInvoice","dwInvoicePaymentProcessingFee","$window","session","purchase","affiliatly","user","spin","saveBillingProfile","_","balance","createPayment","markPurchase","orderId","total","email","location","href","resetCache","get","current","params","userId","role","$emit","purchaseId","staffHelp","createStaffHelp","notice","updateInvoice","applyDiscountCode","form","createDiscountCode","centerId","code","discountCode","$setPristine","info","deskworksConfig","template","subject","$on","event","newUrl","indexOf","preventDefault","home","origin","logout","resetParams","getDefaultRoute","join","firstName","lastName","creditCardTypes","ccType","enable","creditCards","cc","type","eChecks","creditCard","push","bindTestBillingGenerator","complete","directive","restrict","scope","bindToController","invoice","$onChanges","enablePaymentProcessingCharges","rate","paymentProcessingRates","ach","prevIdx","items","i","fee","round","item","addedBy","amount","billedAt","createdAt","description","price","quantity","isUndefined","chargesTotalInitial","chargesTotal","balanceInitial","controllerAs","phone","$onInit","$watchCollection","methods","paymentMethodId","billingMethod","isSingleMode","eCheck","isNew","$$route"],"mappings":"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","file":"member-sign-up~._b.js?_rev=aebf175ce47ced81d910","sourcesContent":["var map = {\n\t\"./steps/01-landing.tpl.html\": \"./bundles/member-sign-up/steps/01-landing.tpl.html\",\n\t\"./steps/01-membership.tpl.html\": \"./bundles/member-sign-up/steps/01-membership.tpl.html\",\n\t\"./steps/03-purchase.tpl.html\": \"./bundles/member-sign-up/steps/03-purchase.tpl.html\",\n\t\"./steps/04-complete.tpl.html\": \"./bundles/member-sign-up/steps/04-complete.tpl.html\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/member-sign-up sync recursive .*\\\\.tpl\\\\.html$\";","var map = {\n\t\"./steps/01-landing.controller.js\": \"./bundles/member-sign-up/steps/01-landing.controller.js\",\n\t\"./steps/01-membership.controller.js\": \"./bundles/member-sign-up/steps/01-membership.controller.js\",\n\t\"./steps/02-profile.controller.js\": \"./bundles/member-sign-up/steps/02-profile.controller.js\",\n\t\"./steps/03-purchase.controller.js\": \"./bundles/member-sign-up/steps/03-purchase.controller.js\",\n\t\"./steps/04-complete.controller.js\": \"./bundles/member-sign-up/steps/04-complete.controller.js\",\n\t\"./steps/no-plan-billing.controller.js\": \"./bundles/member-sign-up/steps/no-plan-billing.controller.js\",\n\t\"./steps/no-plan-complete.controller.js\": \"./bundles/member-sign-up/steps/no-plan-complete.controller.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/member-sign-up sync recursive \\\\..+\\\\/.+\\\\.js$\";","import 'shared/need-help/need-help.directive';\nimport 'shared/staff-help/staff-help.controller';\nimport staffHelpTpl from 'shared/staff-help/staff-help.tpl.html';\nimport userProfileTpl from 'shared/templates/new-user-profile.tpl.html';\nimport billingProfileTpl from 'shared/templates/new-billing-profile.tpl.html';\n\nconst index = ['$injector', function index($injector) {\n  // JS\n  const importAll = r => r.keys().map(r);\n  const js = importAll(require.context('./', true, /\\..+\\/.+\\.js$/));\n  $injector.loadNewModules(js.map(m => m.default.name));\n\n  // Templates\n  $injector.invoke(['$templateCache', function($templateCache) {\n    const ctx = require.context('./', true, /.*\\.tpl\\.html$/);\n    ctx.keys().forEach(key => $templateCache.put(key.replace(/^\\.\\//, ''), ctx(key)));\n\n    $templateCache.put('staff-help/staff-help.tpl.html', staffHelpTpl);\n    $templateCache.put('templates/new-user-profile.tpl.html', userProfileTpl);\n    $templateCache.put('templates/new-billing-profile.tpl.html', billingProfileTpl);\n  }]);\n}];\n\nexport default index;\n","export default angular.module('deskworks.MemberSignUpLandingCtrl', [\n  'ngRoute',\n  'deskworks.helper',\n  'needHelp',\n])\n\n  .controller('MemberSignUpLandingCtrl', function($scope, $translate, $filter, dwAlerts, state, helper, center, product) {\n    const $ctrl = this;\n\n    $ctrl.center = center;\n    $ctrl.product = product;\n\n    $ctrl.membershipStartDate = state.getParam('membershipStartDate');\n    $ctrl.membershipStartDate = $ctrl.membershipStartDate ? $filter('toDate')($ctrl.membershipStartDate) : moment();\n\n    state.setPageTitle($translate.instant('MEMBER_SIGN_UP.LANDING.PAGE_TITLE', { centerName: $ctrl.center.name }));\n\n    /**\n     * Next button click handler\n     */\n    $ctrl.next = () => {\n      state.setParam('membershipStartDate', $filter('date')($ctrl.membershipStartDate, 'yyyy-MM-dd'));\n      return state.setPath('/member-sign-up' + '/' + (state.getCurrentUserId() || 'new'));\n    };\n  });\n","// Module\nvar code = \"<form id=\\\"memberSignUpLanding\\\" novalidate> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <h1 class=\\\"page-title\\\" translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.CENTER.AT\\\" translate-values=\\\"{center: $ctrl.center.name}\\\"></h1> <ff-board> <ff-panel style=\\\"max-width:480px;margin:0 auto\\\"> <ff-panel-header> <span translate=\\\"GLOBAL.STEP_X_OF_Y\\\" translate-values=\\\"$resolve.reg\\\"></span> </ff-panel-header> <div class=\\\"gutter-v-half\\\"> <ff-header class=\\\"ff-grid\\\"> <span flex=\\\"0 1 auto\\\">{{::$ctrl.product.name}}&nbsp;</span> <span flex=\\\"none\\\" class=\\\"text-brand\\\">{{::($ctrl.product.price || 0) | ncurrency}}</span> </ff-header> <div ng-if=\\\"::$ctrl.product.description\\\" style=\\\"white-space:pre-wrap;line-height:1.4\\\">{{::$ctrl.product.description}}</div> <label class=\\\"ff-row\\\" style=\\\"max-width:220px;margin-left:auto\\\"> <ff-label flex=\\\"0 0 90px\\\"> <span translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.START_DATE\\\"></span> </ff-label> <ff-date ff-model=\\\"$ctrl.membershipStartDate\\\" name=\\\"membershipStartDate\\\" ff-validate-alert=\\\"{{'MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.START_DATE' | translate}}\\\"></ff-date> </label> </div> </ff-panel> </ff-board> <ff-btn-group> <ff-btn sense=\\\"next\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.next()\\\"><span translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.BTN_PROCEED\\\"></span></ff-btn> </ff-btn-group> </form> \";\n// Exports\nmodule.exports = code;","import 'shared/need-help/need-help.directive.js';\n\nexport default angular.module('deskworks.MemberSignUpMembershipCtrl', [\n  'ngRoute',\n  'deskworks.center.service',\n  'deskworks.membership.service',\n  'deskworks.helper',\n  'needHelp',\n])\n\n  .controller('MemberSignUpMembershipCtrl', function($scope, $route, $timeout, $translate, $filter, dwAlerts,\n                                                     state, helper, reg, data, membershipService) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('MEMBER_SIGN_UP.MEMBERSHIP.PAGE_TITLE'));\n\n    vm.centers = data.centers;\n    vm.reg = reg;\n    vm.settings = data.settings;\n\n    if (vm.settings.skipPlanMemberSignUp) vm.reg.stepCount -= 1;\n\n    vm.center = helper.find(vm.centers, state.getCurrentCenterId());\n\n    // auto-select if one center available\n    if (!vm.center && vm.centers.length === 1) vm.center = vm.centers[0];\n\n    /**\n     * Center change handler, updates membership categories, resets membershipCategory and membershipProduct\n     */\n    vm.loadMembershipCategories = function() {\n      if (!vm.center || vm.settings.skipPlanMemberSignUp) return;\n\n      vm.updating = true;\n      membershipService.query(vm.center.id)\n        .catch(err => dwAlerts.error(err, 'Failed to query membership categories.'))\n        .finally(() => vm.updating = false)\n        .then(result => {\n          vm.membershipCategories = result.filter(cat => cat.products.length > 0);\n          delete vm.membershipProduct;\n          vm.updating = false;\n\n          vm.membershipStartDate = state.getParam('membershipStartDate');\n          vm.membershipStartDate = vm.membershipStartDate ? $filter('toDate')(vm.membershipStartDate) : moment();\n\n          // Find membershipCategory and membershipProduct from route params\n          vm.membershipCategories.some(cat => {\n            var product = helper.find(cat.products, state.getParam('productId'));\n            if (product) {\n              vm.membershipCategory = cat;\n              vm.membershipProduct = product;\n            } else {\n              delete vm.membershipCategory;\n            }\n            return !!product;\n          });\n        });\n    };\n\n    vm.loadMembershipCategories(); // load membership categories at startup\n\n    /**\n     * Membership Category change handler, resets membershipProduct\n     */\n    vm.membershipCategoryChange = function() {\n      delete vm.membershipProduct;\n    };\n\n    /**\n     * Next button click handler\n     */\n    vm.next = function() {\n      if (helper.pointFirstInvalid('#memberSignUpMembership')) return;\n\n      if (!vm.settings.skipPlanMemberSignUp && !vm.membershipProduct) return dwAlerts.error('No plan selected.');\n\n      state.replace();\n      state.setCurrentCenterId(vm.center.id);\n      if (!vm.settings.skipPlanMemberSignUp) state.setParam('productId', vm.membershipProduct.id);\n      // state.setLoggedUserCenter(vm.center.id, vm.center.name);\n      state.setParam('membershipStartDate', $filter('date')(vm.membershipStartDate, 'yyyy-MM-dd'));\n\n      return $timeout(() => state.setPath(state.getPath() + '/' + (state.getCurrentUserId() || 'new')));\n    };\n  });\n","// Module\nvar code = \"<form name=\\\"vm.form\\\" id=\\\"memberSignUpMembership\\\"> <h1 class=\\\"page-title flex\\\"> <span>{{state.getPageTitle()}} - <small translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.THANKS\\\"></small></span> <need-help phone=\\\"vm.center.phone\\\"></need-help> </h1> <ff-board class=\\\"ff-no-frame\\\"> <div class=\\\"ff-grid ff-gutter-v ff-gutter-h\\\"> <ff-panel ng-hide=\\\"state.getParam('origin') || state.getParam('redirect')\\\" flex=\\\"{md: '0 0 50%'}\\\" role=\\\"article\\\" aria-label=\\\"{{'MEMBER_SIGN_UP.MEMBERSHIP.CENTER.HEADER' | translate}}\\\"> <ff-panel-header> <span translate=\\\"GLOBAL.STEP_X_OF_Y\\\" translate-values=\\\"vm.reg\\\"></span> </ff-panel-header> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"1 0 124px\\\" class=\\\"em\\\"> <span translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.CENTER.HEADER\\\"></span> </ff-label> <ff-select flex=\\\"1 1 70%\\\" ff-model=\\\"vm.center\\\" ff-options=\\\"center.name for center in vm.centers\\\" name=\\\"center\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'MEMBER_SIGN_UP.MEMBERSHIP.CENTER.CENTER' | translate}}\\\" ff-change=\\\"vm.loadMembershipCategories()\\\"></ff-select> </label> </ff-panel> <div flex=\\\"{md: '0 0 50%'}\\\" class=\\\"no-margin\\\"></div> <ff-panel ng-show=\\\"vm.center\\\" flex=\\\"{md: '0 0 50%'}\\\" ng-if=\\\"!vm.settings.skipPlanMemberSignUp\\\"> <ff-panel-header><span translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.CATEGORY.HEADER\\\"></span></ff-panel-header> <ff-col ff-dim=\\\"vm.updating\\\" role=\\\"radiogroup\\\" aria-label=\\\"{{'MEMBER_SIGN_UP.MEMBERSHIP.CATEGORY.HEADER' | translate}}\\\"> <ff-info ng-if=\\\"!vm.membershipCategories.length\\\" translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.CATEGORY.EMPTY\\\"></ff-info> <label ng-repeat=\\\"cat in vm.membershipCategories\\\"> <ff-label> <ff-radio flex=\\\"0 0 26px\\\" ff-model=\\\"vm.membershipCategory\\\" ff-value=\\\"cat\\\" name=\\\"membershipCategory\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'MEMBER_SIGN_UP.MEMBERSHIP.CATEGORY.MEMB_CATEGORY' | translate}}\\\" ff-change=\\\"vm.membershipCategoryChange()\\\"></ff-radio> {{cat.name}} </ff-label> </label> </ff-col> </ff-panel> <ff-panel ng-show=\\\"vm.center\\\" flex=\\\"{md: '0 0 50%'}\\\" ng-if=\\\"!vm.settings.skipPlanMemberSignUp && vm.membershipCategories.length\\\"> <ff-panel-header><span translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.CATEGORY.DESCRIPTION\\\"></span></ff-panel-header> <ff-col ff-dim=\\\"vm.updating\\\"> <ff-static class=\\\"pre-description\\\"> <span translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.CATEGORY.HINT\\\" ng-if=\\\"!vm.membershipCategory\\\"></span> <span translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.CATEGORY.NO_DESCRIPTION\\\" ng-if=\\\"vm.membershipCategory && !vm.membershipCategory.note\\\"></span> <span ng-bind=\\\"vm.membershipCategory.note\\\" ng-if=\\\"vm.membershipCategory && vm.membershipCategory.note\\\"></span> </ff-static> </ff-col> </ff-panel> <ff-panel ng-show=\\\"vm.membershipCategory.products.length > 0\\\" flex=\\\"{md: '0 0 50%'}\\\" ng-if=\\\"!vm.settings.skipPlanMemberSignUp\\\"> <ff-panel-header><span translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.HEADER\\\"></span></ff-panel-header> <ff-col ff-dim=\\\"vm.updating\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\" class=\\\"em\\\"> <span translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.SELECT_PLAN\\\"></span> </ff-label> <ff-select ff-model=\\\"vm.membershipProduct\\\" ff-options=\\\"product.name for product in vm.membershipCategory.products\\\" ff-required=\\\"vm.membershipCategory.products.length > 0\\\" name=\\\"plan\\\" ff-validate-alert=\\\"{{'MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.PLAN' | translate}}\\\"></ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\" class=\\\"em\\\"> <span translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.PRICE\\\"></span> </ff-label> <ff-static ff-bind=\\\"vm.membershipProduct.price | nd | ncurrency\\\" name=\\\"price\\\"></ff-static> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\" class=\\\"em\\\"> <span translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.START_DATE\\\"></span> </ff-label> <ff-date ff-model=\\\"vm.membershipStartDate\\\" name=\\\"membershipStartDate\\\" ff-validate-alert=\\\"{{'MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.START_DATE' | translate}}\\\"></ff-date> </label> </ff-col> </ff-panel> <ff-panel flex=\\\"{md: '0 0 50%'}\\\" ng-if=\\\"!vm.settings.skipPlanMemberSignUp && vm.membershipProduct && vm.membershipProduct.description\\\"> <ff-panel-header><span translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.DESCRIPTION\\\"></span></ff-panel-header> <ff-col ff-dim=\\\"vm.updating\\\"> <ff-static class=\\\"pre-description\\\">{{vm.membershipProduct.description}}</ff-static> </ff-col> </ff-panel> </div> </ff-board> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"next\\\" type=\\\"submit\\\" ff-click=\\\"vm.next()\\\"><span translate=\\\"MEMBER_SIGN_UP.MEMBERSHIP.BTN_PROCEED\\\"></span></ff-btn> </ff-btn-group> </form> \";\n// Exports\nmodule.exports = code;","import 'shared/need-help/need-help.directive.js';\n\nexport default angular.module('deskworks.MemberSignUpProfileCtrl', [\n  'ngRoute',\n  'deskworks.routeHelper',\n  'deskworks.helper',\n  'deskworks.userProfile.service',\n  'deskworks.userProfile.optsMembershipStatus',\n  'needHelp',\n])\n\n  .controller('MemberSignUpProfileCtrl', function($scope, $timeout, $q, $translate, dwAlerts, helper, state,\n                                                  userProfile, reg, userProfileService, purchaseService, settings,\n                                                  optsMembershipStatus) {\n    const vm = this;\n\n    vm.reg = reg;\n    vm.schema = userProfile.schema;\n    vm.userProfile = userProfile;\n    vm.settings = settings;\n\n    if (!state.getParam('productId')) {\n      vm.reg.stepCount -= 1;\n      vm.userProfile.membershipStatus = optsMembershipStatus[0];\n    }\n\n    state.setPageTitle($translate.instant(vm.reg.new ? 'MEMBER_SIGN_UP.PROFILE.PAGE_TITLE' : 'USER_PROFILE.PAGE_TITLE', { userName: vm.userProfile.fullNameCompany }));\n\n    /**\n     * Bind test user data generator\n     */\n    userProfileService.bindTestUserGenerator($scope, vm.userProfile, vm.reg);\n\n    /**\n     * Next button handler\n     */\n    vm.next = function() {\n      if (helper.pointFirstInvalid('#userProfile')) return;\n\n      return $q.when()\n        .then(() => {\n          if (vm.reg.new) {\n            return userProfileService.registerNewUser(state.getCurrentCenterId(), vm.userProfile, true);\n          }\n        })\n        .then(() => {\n          if (vm.reg.new) { // Need to login under just created user\n            return state.login(vm.userProfile.login, vm.userProfile.password)\n              .catch(err => dwAlerts.error(err, 'Failed to login under created user.'));\n          }\n        })\n        .then(() => {\n          if (vm.reg.new) {\n            state.replace();\n            state.setPath(state.getPath().replace(/\\/new/, '/' + vm.userProfile.id));\n            return $timeout();\n          }\n        })\n        .then(() => {\n          if (!state.getParam('productId')) return; // no product -> settings.skipPlanMemberSignUp=true -> skip purchase\n          return purchaseService.createPurchase(state.getCurrentCenterId(), vm.userProfile.id, true, state.getParam('productId'), null, state.getParam('membershipStartDate'))\n            .catch(err => dwAlerts.error(err, 'Failed to create purchase.'));\n        })\n        .then(result => {\n          if (!state.getParam('productId')) { // no product -> settings.skipPlanMemberSignUp=true -> skip purchase\n            return state.setPath(state.getPath() + '/billing');\n          }\n          return state.setPath(state.getPath() + '/purchases/' + result.id);\n        });\n    };\n\n    /**\n     * Back button handler\n     */\n    vm.back = state.back;\n  });\n","import newBillingProfile from 'shared/new-billing-profile/new-billing-profile.directive';\nimport needHelp from 'shared/need-help/need-help.directive';\nimport dwInvoice from 'shared/dw-invoice/dw-invoice.directive';\nimport dwInvoicePaymentProcessingFee from 'shared/dw-invoice/dw-invoice-payment-processing-fee.directive';\n\nexport default angular.module('deskworks.MemberSignUpPurchaseCtrl', [\n  'ngRoute',\n  'deskworks.helper',\n  'deskworks.dwAddCharges',\n  'deskworks.userProfile.service',\n  'deskworks.purchase.service',\n  'deskworks.StaffHelpCtrl',\n  newBillingProfile.name,\n  needHelp.name,\n  dwInvoice.name,\n  dwInvoicePaymentProcessingFee.name,\n])\n\n  .controller('MemberSignUpPurchaseCtrl', function($scope, $route, $translate, $timeout, $window, dwAlerts,\n                                                   helper, state, session, reg, center, settings, purchase,\n                                                   purchaseService, userProfileService, userProfile, affiliatly) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('MEMBER_SIGN_UP.PURCHASE.PAGE_TITLE', { centerName: center.name }));\n\n    vm.reg = reg;\n    vm.center = center;\n    vm.settings = settings;\n    vm.user = userProfile;\n    vm.purchase = purchase;\n\n    /**\n     * Next button handler\n     */\n    vm.next = () => {\n      if (helper.pointFirstInvalid('#memberSignUpPurchaseValidation')) return;\n\n      vm.spin = true;\n      return userProfileService.saveBillingProfile(state.getCurrentCenterId(), vm.user)\n        .then(_ => +vm.purchase.balance > 0 ? vm.createPayment() : null)\n        .then(_ => affiliatly.markPurchase({ orderId: vm.purchase.orderId, total: vm.purchase.balance, email: vm.user.email }))\n        .then(_ => {\n          if (state.getParam('redirect')) { // redirect to splash page from Buy A Pass flow\n            $window.location.href = state.getParam('redirect') + '&login=' + vm.user.login;\n            return $timeout(15000);\n          }\n\n          // Update current user role and emit LOGIN to refresh sidebar, centers, etc. Then proceed to complete.\n          userProfileService.resetCache();\n          return userProfileService.get(state.getCurrentCenterId(), $route.current.params.userId)\n            .catch(err => dwAlerts.error(err, 'Failed to get user profile.'))\n            .then(result => {\n              session.user.role = result.role;\n              $scope.$emit('LOGIN');\n              return state.setPath(state.getPath() + '/complete');\n            });\n\n        })\n        .finally(_ => { vm.spin = false; });\n    };\n\n    /**\n     * Create Payment which activates nonMember -> member, creates recurring billing, etc.\n     */\n    vm.createPayment = _ => purchaseService.createPayment(\n      state.getCurrentCenterId(),\n      $route.current.params.userId,\n      $route.current.params.purchaseId,\n      {},\n      true,\n      state.getParam('productId'),\n      state.getParam('membershipStartDate')\n    )\n      .catch(err => dwAlerts.error(err, 'Failed to make payment.'));\n\n    /**\n     * Back button handler\n     */\n    vm.back = state.back;\n\n    /**\n     * Staff Help button handler\n     */\n    vm.staffHelp = () => {\n      return purchaseService.createStaffHelp(vm.center.id, $route.current.params.userId, $route.current.params.purchaseId, true, state.getParam('productId'))\n        .catch(err => dwAlerts.error(err, 'Failed to create staff help.'))\n          .then(staffHelp => {\n          // update current user role and emit LOGIN to refresh sidebar, centers, etc. Then proceed to complete.\n          userProfileService.resetCache();\n          return userProfileService.get(state.getCurrentCenterId(), $route.current.params.userId)\n            .catch(err => dwAlerts.error(err, 'Failed to get user profile.'))\n            .then(result => {\n              session.user.role = result.role;\n              $scope.$emit('LOGIN');\n              state.setParam('notice', staffHelp.notice);\n              return state.setPath(state.getPath() + '/staff-help');\n            });\n        });\n    };\n\n    /**\n     * Gets updated invoice data from server and refreshes the invoice\n     */\n    vm.updateInvoice = () =>\n      purchaseService.get(state.getCurrentCenterId(), state.getCurrentUserId(), vm.purchase.id)\n        .catch(err => dwAlerts.error(err, 'Failed to update invoice.'))\n        .then(result => { vm.purchase = result; });\n\n    /**\n     * Apply discount code\n     */\n    vm.applyDiscountCode = (form) => {\n      if (helper.pointFirstInvalid('#applyDiscountCode')) return;\n\n      return purchaseService.createDiscountCode({\n        centerId: state.getCurrentCenterId(),\n        userId: state.getCurrentUserId(),\n        purchaseId: vm.purchase.id,\n        code: vm.discountCode,\n      })\n        .catch(err => dwAlerts.error(err, 'Failed to apply discount code.'))\n        .then(() => {\n          vm.discountCode = null;\n          form.$setPristine();\n          dwAlerts.info('Discount code applied.');\n          return vm.updateInvoice();\n        });\n    }\n  });\n","// Module\nvar code = \"<div id=\\\"memberSignUpPurchase\\\"> <h1 class=\\\"page-title flex\\\"> <span>{{state.getPageTitle()}}</span> <need-help phone=\\\"vm.center.phone\\\"></need-help> </h1> <ff-board ff-dim=\\\"vm.spin\\\"> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <ff-panel role=\\\"article\\\" aria-label=\\\"{{'PURCHASE.INVOICE.HEADER' | translate: { orderId: vm.purchase.orderId } }}\\\"> <ff-panel-header> <span translate=\\\"GLOBAL.STEP_X_OF_Y\\\" translate-values=\\\"vm.reg\\\"></span> </ff-panel-header> <div class=\\\"em\\\" translate=\\\"PURCHASE.INVOICE.HEADER\\\" translate-values=\\\"{ orderId: vm.purchase.orderId }\\\" style=\\\"margin-bottom:.25rem\\\"></div> <dw-invoice invoice=\\\"vm.purchase\\\" center=\\\"vm.center\\\" update-invoice=\\\"vm.updateInvoice()\\\" dw-invoice-payment-processing-fee settings=\\\"$resolve.settings\\\" credit-cards=\\\"$resolve.userProfile.creditCards\\\" e-checks=\\\"$resolve.userProfile.eChecks\\\"></dw-invoice> </ff-panel> <ff-panel class=\\\"ff-bmargin\\\" flex=\\\"{sm: '0 0 85%', md: '0 0 70%', lg: '0 0 50%'}\\\"> <form name=\\\"form\\\" class=\\\"ff-row\\\" id=\\\"applyDiscountCode\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 120px\\\"><span translate=\\\"PURCHASE.DISCOUNT_CODE\\\"></span></ff-label> <ff-text ff-model=\\\"vm.discountCode\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'PURCHASE.DISCOUNT_CODE' | translate}}\\\"></ff-text> </label> <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row\\\"> <ff-btn type=\\\"submit\\\" size=\\\"sm\\\" sense=\\\"save\\\" ff-disabled=\\\"form.$pristine\\\" ff-click=\\\"vm.applyDiscountCode(form)\\\"> <span translate=\\\"PURCHASE.DISCOUNT_CODE.BTN_APPLY\\\"></span> </ff-btn> </ff-btn-group> </form> </ff-panel> <div> <ff-header style=\\\"border:0;padding:0 1rem .5rem 1rem\\\"> <div translate=\\\"BILLING_PROFILE.PAGE_TITLE\\\" translate-values=\\\"{ userName: vm.user.fullNameCompany }\\\"></div> <small translate=\\\"GLOBAL.REQUIRED_FIELDS_MARKED_WITH\\\"></small> </ff-header> <new-billing-profile user=\\\"vm.user\\\" settings=\\\"vm.settings\\\" id=\\\"memberSignUpPurchaseValidation\\\" class=\\\"ff-grid gutter-v\\\"></new-billing-profile> </div> </div> </ff-board> <ff-header style=\\\"border:0\\\" ng-if=\\\"$resolve.settings.enableAddOnProductsAtRegistration\\\"> <small translate=\\\"MEMBER_SIGN_UP.PURCHASE.ADD_ON_PRODUCTS.HINT\\\"></small> </ff-header> <ff-board ff-dim=\\\"vm.spin\\\" ng-if=\\\"$resolve.settings.enableAddOnProductsAtRegistration\\\"> <dw-add-charges purchase=\\\"vm.purchase\\\" update-invoice=\\\"vm.updateInvoice()\\\" no-collapse=\\\"true\\\"></dw-add-charges> </ff-board> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"help\\\" ff-click=\\\"vm.staffHelp()\\\"><span translate=\\\"GLOBAL.BTN_STAFF_HELP\\\"></span></ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> <ff-btn sense=\\\"next\\\" type=\\\"submit\\\" ff-click=\\\"vm.next()\\\"><span translate=\\\"SIMPLE_RES.BILLING.BTN_PURCHASE\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","import dwInvoice from 'shared/dw-invoice/dw-invoice.directive';\n\nexport default angular.module('deskworks.MemberSignUpCompleteCtrl', [\n  dwInvoice.name,\n])\n\n  .controller('MemberSignUpCompleteCtrl', function($scope, $q, $timeout, $translate, dwAlerts, state, helper,\n                                                   deskworksConfig, center, purchase, template) {\n    const vm = this;\n\n    vm.center = center;\n    vm.purchase = purchase;\n    vm.template = template;\n\n    state.setPageTitle(vm.template.subject || $translate.instant('MEMBER_SIGN_UP.COMPLETE.PAGE_TITLE'));\n\n    /**\n     * Prevent using Back button\n     */\n    $scope.$on('$locationChangeStart', (event, newUrl) => {\n      if (newUrl && newUrl.indexOf('/member-sign-up') >= 0) {\n        event.preventDefault();\n        dwAlerts.error($translate.instant('MEMBER_SIGN_UP.COMPLETE.BACK_ERROR'));\n      }\n    });\n\n    /**\n     * Back to Home Page button handler\n     */\n    vm.home = function() {\n      const origin = state.getParam('origin');\n      const centerId = state.getCurrentCenterId();\n      (origin ? state.logout() : $q.when()).finally(() => { // If origin presents, log out\n        state.resetParams();\n        state.setPath(origin || deskworksConfig.getDefaultRoute());\n        if (origin) state.setCurrentCenterId(centerId);\n      });\n      return $timeout(15000);\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"memberSignUpComplete\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div style=\\\"white-space:pre-wrap\\\" class=\\\"ff-bmargin\\\" ng-if=\\\"vm.template.content\\\">{{vm.template.content}}</div> <ff-info class=\\\"ff-center ff-bmargin\\\" ng-if=\\\"vm.accessCode && vm.settings.enableAccessCodes\\\" translate=\\\"SIMPLE_RES.COMPLETE.ACCESS_CODE\\\" translate-values=\\\"{ accessCode: vm.accessCode }\\\"></ff-info> <ff-board> <ff-panel ng-if=\\\"vm.purchase\\\"> <ff-panel-header> <span translate=\\\"SIMPLE_RES.COMPLETE.ORDER.HEADER\\\" translate-values=\\\"{ orderId: vm.purchase.orderId }\\\"></span> </ff-panel-header> <dw-invoice invoice=\\\"vm.purchase\\\" center=\\\"vm.center\\\" allow-remove=\\\"false\\\"></dw-invoice> </ff-panel> <ff-panel ng-if=\\\"!vm.purchase && !vm.accessCode\\\"> <ff-info class=\\\"ff-center\\\" translate=\\\"MEMBER_SIGN_UP.COMPLETE.SUCCESS\\\"></ff-info> </ff-panel> </ff-board> <ff-btn-group class=\\\"buttons-bottom\\\" ng-class=\\\"{'ff-center': !vm.purchase}\\\"> <ff-btn sense=\\\"home\\\" type=\\\"submit\\\" ff-click=\\\"vm.home()\\\"><span translate=\\\"GLOBAL.BTN_HOME\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","import newBillingProfile from 'shared/new-billing-profile/new-billing-profile.directive';\n\nexport default angular.module('deskworks.MemberSignUpNoPlanBillingCtrl', [\n  'ngRoute',\n  'deskworks.userProfile.service',\n  'deskworks.routeHelper',\n  'deskworks.helper',\n  'needHelp',\n  'deskworks.StaffHelpCtrl',\n  newBillingProfile.name,\n])\n\n  .controller('MemberSignUpNoPlanBillingCtrl', function($scope, $translate, helper, state, userProfile, reg, settings,\n                                                        userProfileService) {\n    const vm = this;\n\n    vm.userProfile = userProfile;\n    vm.reg = reg;\n    vm.settings = settings;\n\n    state.setPageTitle($translate.instant('BILLING_PROFILE.PAGE_TITLE',\n      { userName: helper.join([vm.userProfile.firstName, vm.userProfile.lastName], ' ') }));\n\n    // filter credit card types according to settings\n    settings.creditCardTypes = settings.creditCardTypes.filter(ccType => ccType.enable);\n\n    vm.userProfile.creditCards.forEach(cc => {\n      cc.type = helper.find(settings.creditCardTypes, cc.type) || cc.type || {};\n    });\n\n    // Require at least one CC or ACH\n    vm.userProfile.creditCards = vm.userProfile.creditCards || [];\n    if (!vm.userProfile.creditCards.length && !vm.userProfile.eChecks.length) {\n      const cc = userProfileService.creditCard.new(vm.userProfile);\n      cc.type = settings.creditCardTypes[0];\n      vm.userProfile.creditCards.push(cc);\n    }\n\n    /**\n     * Bind test user data generator\n     */\n    userProfileService.bindTestBillingGenerator($scope, vm.userProfile, vm.reg);\n\n    /**\n     * Complete Registration button handler\n     */\n    vm.complete = function() {\n      if (helper.pointFirstInvalid('#newBillingProfile')) return;\n\n      return userProfileService.saveBillingProfile(0, vm.userProfile)\n        .then(() => state.setPath(state.getPath() + '/complete'));\n    };\n\n    /**\n     * Back button handler\n     */\n    vm.back = state.back;\n  });\n","export default angular.module('deskworks.MemberSignUpNoPlanCompleteCtrl', [])\n\n  .controller('MemberSignUpNoPlanCompleteCtrl', function($scope, $q, $timeout, $translate, state, helper,\n                                                         deskworksConfig) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('MEMBER_SIGN_UP.COMPLETE.PAGE_TITLE'));\n\n    /**\n     * Back to Home Page button handler\n     */\n    vm.home = function() {\n      var origin = state.getParam('origin');\n      var centerId = state.getCurrentCenterId();\n      (origin ? state.logout() : $q.when()).finally(() => { // If origin presents, log out\n        state.resetParams();\n        state.setPath(origin || deskworksConfig.getDefaultRoute());\n        if (origin) state.setCurrentCenterId(centerId);\n      });\n      return $timeout(10000);\n    };\n  });\n","/**\n * dwInvoicePaymentProcessingFee directive -\n */\nexport default angular.module('deskworks.dwInvoicePaymentProcessingFee', [\n  'deskworks.state',\n  'deskworks.helper',\n])\n\n  .directive('dwInvoicePaymentProcessingFee', function() {\n    return {\n      restrict: 'A',\n      scope: true,\n      controller: 'DwInvoicePaymentProcessingFeeCtrl as $ctrl',\n      bindToController: {\n        invoice: '<',\n        settings: '<',\n        creditCards: '<',\n        eChecks: '<',\n      },\n    };\n  })\n\n  .controller('DwInvoicePaymentProcessingFeeCtrl', function($scope, $timeout, state, helper) {\n    const $ctrl = this;\n\n    $ctrl.$onChanges = () => $timeout(() => {\n      if (!$ctrl.invoice || !$ctrl.settings || !$ctrl.creditCards || !$ctrl.eChecks) return;\n      if (!$ctrl.settings.enablePaymentProcessingCharges) return;\n\n      let rate = 0;\n\n      if ($ctrl.creditCards.length) rate = $ctrl.settings.paymentProcessingRates.cc || 0;\n      else if ($ctrl.eChecks.length) rate = $ctrl.settings.paymentProcessingRates.ach || 0;\n\n      const prevIdx = $ctrl.invoice.items.findIndex(i => i.id === 'fake-payment-processing-fee');\n      if (prevIdx >= 0) $ctrl.invoice.items.splice(prevIdx, 1); // remove exiting fake-payment-processing-fee\n\n      if (!rate || !+$ctrl.invoice.balance) return;\n\n      const fee = helper.round(rate * +$ctrl.invoice.balance / 100);\n\n      const item = {\n        addedBy: 'system',\n        amount: fee,\n        billedAt: moment(),\n        createdAt: moment(),\n        description: \"Payment processing fee\",\n        id: \"fake-payment-processing-fee\",\n        name: \"Payment Fee\",\n        price: fee,\n        quantity: 1,\n      };\n\n      $ctrl.invoice.items.push(item);\n\n      if (angular.isUndefined($ctrl.invoice.chargesTotalInitial)) {\n        $ctrl.invoice.chargesTotalInitial = +$ctrl.invoice.chargesTotal;\n      }\n      if (angular.isUndefined($ctrl.invoice.balanceInitial)) {\n        $ctrl.invoice.balanceInitial = +$ctrl.invoice.balance;\n      }\n\n      $ctrl.invoice.chargesTotal = helper.round($ctrl.invoice.chargesTotalInitial + fee);\n      $ctrl.invoice.balance = helper.round($ctrl.invoice.balanceInitial + fee);\n    });\n  });\n\n","/**\n * Need help? Phone 1-800-000-000.\n */\nexport default angular.module('needHelp', [])\n  .directive('needHelp', function() {\n    return {\n      restrict: 'E',\n      scope: true,\n      controller: function() {},\n      controllerAs: '$ctrl',\n      template: '<span translate=\"GLOBAL.NEED_HELP\" class=\"need-help\" ng-if=\"$ctrl.phone\" ' +\n        'translate-values=\"{ phone: \\'<a href=&quot;tel:\\' + $ctrl.phone + \\'&quot;>\\' + $ctrl.phone + \\'</a>\\' }\"></span>',\n      bindToController: {\n        phone: '<',\n      },\n    };\n  });\n","import template from './new-billing-profile.tpl.html';\n\n/**\n * New Billing Profile\n */\nexport default angular.module('newBillingProfile', [])\n\n  .directive('newBillingProfile', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'NewBillingProfileCtrl as $ctrl',\n      bindToController: {\n        settings: '<',\n        user: '<',\n      },\n    };\n  })\n\n  .controller('NewBillingProfileCtrl', function($scope, userProfileService) {\n    const $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = () => {\n      // filter credit card types according to settings\n      $ctrl.settings.creditCardTypes = $ctrl.settings.creditCardTypes.filter(ccType => ccType.enable);\n\n      $ctrl.user.creditCards.forEach(cc => {\n        cc.type = $ctrl.settings.creditCardTypes.find(type => type.id === cc.type) || cc.type || {};\n      });\n\n      // add one CC if no payment methods\n      $ctrl.user.creditCards = $ctrl.user.creditCards || [];\n      if (!$ctrl.user.creditCards.length && !$ctrl.user.eChecks.length) {\n        const cc = userProfileService.creditCard.new($ctrl.user);\n        cc.type = $ctrl.settings.creditCardTypes[0];\n        $ctrl.user.creditCards.push(cc);\n      }\n\n      $scope.$watchCollection(_ => $ctrl.user.creditCards.concat($ctrl.user.eChecks), methods => {\n        if (methods && $ctrl.user.paymentMethodId && !methods.find(m => m.id === $ctrl.user.paymentMethodId)) {\n          $ctrl.user.billingMethod = null; // reset billing/payment method when payment method deleted\n          $ctrl.user.paymentMethodId = null;\n        }\n      });\n\n      userProfileService.bindTestBillingGenerator($scope, $ctrl.user); // Bind test user data generator\n    };\n\n    $ctrl.isSingleMode = () => {\n      const { creditCards, eChecks } = $ctrl.user;\n      return !creditCards.length && (!eChecks.length || userProfileService.eCheck.isNew(eChecks[0])) ||\n        !eChecks.length && (!creditCards.length || userProfileService.creditCard.isNew(creditCards[0]));\n    };\n  });\n","// Module\nvar code = \"<span translate=\\\"BILLING_PROFILE.PAYMENT_METHOD.EMPTY\\\" ng-if=\\\"$ctrl.showSwitchCC() && $ctrl.showSwitchACH()\\\"></span> <up-billing-method user=\\\"$ctrl.user\\\" settings=\\\"$ctrl.settings\\\" ng-if=\\\"!$ctrl.isSingleMode()\\\"></up-billing-method> <up-credit-cards user-profile=\\\"$ctrl.user\\\" settings=\\\"$ctrl.settings\\\" single=\\\"$ctrl.isSingleMode()\\\" ng-if=\\\"$ctrl.user.creditCards.length || !$ctrl.isSingleMode()\\\"></up-credit-cards> <up-e-checks user-profile=\\\"$ctrl.user\\\" single=\\\"$ctrl.isSingleMode()\\\" ng-if=\\\"$ctrl.settings.enableEChecks && ($ctrl.user.eChecks.length || !$ctrl.isSingleMode())\\\"></up-e-checks> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.StaffHelpCtrl', [\n  'ngRoute',\n  'deskworks.helper',\n  'deskworks.config',\n])\n\n  .controller('StaffHelpCtrl', function($scope, $timeout, $q, $route, $window, $translate, dwAlerts,\n                                        helper, state, deskworksConfig) { 'use strict';\n    const vm = this;\n\n    vm.notice = state.getParam('notice');\n\n    state.setPageTitle($translate.instant('SIMPLE_RES.STAFF_HELP.PAGE_TITLE'));\n\n    /**\n     * Prevent using Back button\n     */\n    $scope.$on('$routeChangeStart', (event, next, current) => {\n      if (next.$$route && (\n          next.$$route.controller === 'MemberSignUpBillingCtrl' || next.$$route.controller === 'MemberSignUpPurchaseCtrl' ||\n          next.$$route.controller === 'SimpleReservationBillingCtrl' || next.$$route.controller === 'SimpleReservationPurchaseCtrl' ||\n          next.$$route.controller === 'BuyPassBillingCtrl' || next.$$route.controller === 'BuyPassPurchaseCtrl')\n      ) {\n        dwAlerts.error($translate.instant('SIMPLE_RES.STAFF_HELP.BACK_ERROR'));\n        event.preventDefault();\n      }\n    });\n\n    /**\n     * Next button handler\n     */\n    vm.home = function() {\n      if (state.getParam('redirect')) { // redirect to splash page from Buy A Pass flow\n        $window.location.href = state.getParam('redirect');\n      } else {\n        const origin = state.getParam('origin');\n        const centerId = state.getCurrentCenterId();\n        (origin ? state.logout() : $q.when())\n          .finally(() => { // If origin presents, log out\n            state.resetParams();\n            if (origin) state.setCurrentCenterId(centerId);\n            return state.setPath(origin || deskworksConfig.getDefaultRoute());\n          });\n      }\n\n      return $timeout(10000);\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"staffHelp\\\" class=\\\"ff-tmargin\\\"> <ff-board> <ff-panel> <span ng-bind=\\\"::vm.notice\\\"></span> </ff-panel> </ff-board> <ff-btn-group class=\\\"buttons-bottom ff-center\\\"> <ff-btn sense=\\\"home\\\" type=\\\"submit\\\" ff-click=\\\"vm.home()\\\"><span translate=\\\"GLOBAL.BTN_HOME\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div> <h1 class=\\\"page-title flex\\\"> <span>{{state.getPageTitle()}}</span> <need-help phone=\\\"$resolve.center.phone || vm.reg.phone\\\"></need-help> </h1> <ff-board> <div class=\\\"ff-panel-header\\\"> <span translate=\\\"GLOBAL.STEP_X_OF_Y\\\" translate-values=\\\"vm.reg\\\" ng-if=\\\"vm.reg.stepCount\\\"></span> <span ng-if=\\\"vm.reg.stepCount\\\">&nbsp;</span> <small translate=\\\"GLOBAL.REQUIRED_FIELDS_MARKED_WITH\\\"></small> </div> <new-billing-profile user=\\\"vm.userProfile\\\" settings=\\\"vm.settings\\\" id=\\\"newBillingProfile\\\" class=\\\"ff-grid gutter-v\\\"></new-billing-profile> </ff-board> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"help\\\" ff-click=\\\"vm.staffHelp()\\\" ng-if=\\\"vm.staffHelp\\\"><span translate=\\\"GLOBAL.BTN_STAFF_HELP\\\"></span></ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> <ff-btn sense=\\\"next\\\" ff-click=\\\"vm.next()\\\" ng-if=\\\"vm.next\\\"><span translate=\\\"SIMPLE_RES.BILLING.BTN_PURCHASE\\\"></span></ff-btn> <ff-btn sense=\\\"next\\\" ff-click=\\\"vm.complete()\\\" ng-if=\\\"vm.complete\\\"><span translate=\\\"MEMBER_SIGN_UP.BILLING.BTN_COMPLETE\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"user-profile\\\" id=\\\"userProfile\\\"> <h1 class=\\\"page-title flex\\\"> <span> {{state.getPageTitle()}} <span ng-if=\\\"vm.reg.member && !vm.reg.selfRegistration\\\" ng-style=\\\"{ color: vm.center.color }\\\">{{vm.center.name}}</span> </span> <need-help phone=\\\"vm.reg.phone\\\"></need-help> </h1> <ff-board> <ff-panel role=\\\"article\\\" aria-label=\\\"{{'USER_PROFILE.USER_PROFILE' | translate}}\\\"> <ff-panel-header ng-if=\\\"vm.reg\\\"> <span translate=\\\"GLOBAL.STEP_X_OF_Y\\\" translate-values=\\\"vm.reg\\\" ng-if=\\\"vm.reg.stepCount\\\"></span> <small translate=\\\"GLOBAL.REQUIRED_FIELDS_MARKED_WITH\\\"></small> </ff-panel-header> <div class=\\\"ff-grid ff-gutter-v ff-gutter-h\\\"> <up-personal-info user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\"></up-personal-info> <up-addresses flex=\\\"{md: '0 0 50%'}\\\" user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" center=\\\"vm.center\\\" single=\\\"true\\\"></up-addresses> <div flex=\\\"{md: '0 0 50%'}\\\"> <div class=\\\"ff-grid ff-gutter-v\\\"> <up-login-info user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" member-directory-url=\\\"wlLinks.memberDirectoryUrl\\\"></up-login-info> <up-phones user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" single=\\\"true\\\"></up-phones> </div> </div> <up-photo flex=\\\"{md: '0 0 50%'}\\\" user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\"></up-photo> <div flex=\\\"{md: '0 0 50%'}\\\"> <div class=\\\"ff-grid ff-gutter-v\\\"> <up-lead-source user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\"></up-lead-source> <up-terms-of-service user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\"></up-terms-of-service> </div> </div> </div> </ff-panel> </ff-board> <ff-btn-group class=\\\"buttons-bottom\\\" ng-if=\\\"vm.reg\\\"> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\" ng-if=\\\"vm.back\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> <ff-btn sense=\\\"next\\\" ff-click=\\\"vm.next()\\\"><span translate=\\\"GLOBAL.BTN_NEXT\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}