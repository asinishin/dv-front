{"version":3,"sources":["webpack:///./bundles/reports sync .*\\.tpl\\.html$","webpack:///./bundles/reports sync \\..+\\/.+\\.js$","webpack:///./bundles/reports/accounts-receivable-report/accounts-receivable-report-columns.service.js","webpack:///./bundles/reports/accounts-receivable-report/accounts-receivable-report.controller.js","webpack:///./bundles/reports/accounts-receivable-report/accounts-receivable-report.service.js","webpack:///./bundles/reports/accounts-receivable-report/accounts-receivable-report.tpl.html","webpack:///./bundles/reports/availability-report/availability-report-columns.service.js","webpack:///./bundles/reports/availability-report/availability-report.controller.js","webpack:///./bundles/reports/availability-report/availability-report.service.js","webpack:///./bundles/reports/availability-report/availability-report.tpl.html","webpack:///./bundles/reports/check-in-report/check-in-report-bar-chart.service.js","webpack:///./bundles/reports/check-in-report/check-in-report-columns.service.js","webpack:///./bundles/reports/check-in-report/check-in-report-totals-columns.service.js","webpack:///./bundles/reports/check-in-report/check-in-report.controller.js","webpack:///./bundles/reports/check-in-report/check-in-report.service.js","webpack:///./bundles/reports/check-in-report/check-in-report.tpl.html","webpack:///./bundles/reports/credit-balance-report/credit-balance-report-columns.service.js","webpack:///./bundles/reports/credit-balance-report/credit-balance-report.controller.js","webpack:///./bundles/reports/credit-balance-report/credit-balance-report.service.js","webpack:///./bundles/reports/credit-balance-report/credit-balance-report.tpl.html","webpack:///./bundles/reports/deposit-and-tax-report/deposit-and-tax-report-columns.service.js","webpack:///./bundles/reports/deposit-and-tax-report/deposit-and-tax-report.controller.js","webpack:///./bundles/reports/deposit-and-tax-report/deposit-and-tax-report.service.js","webpack:///./bundles/reports/deposit-and-tax-report/deposit-and-tax-report.tpl.html","webpack:///./bundles/reports/deposit-transaction-report/deposit-transaction-report-columns.service.js","webpack:///./bundles/reports/deposit-transaction-report/deposit-transaction-report.controller.js","webpack:///./bundles/reports/deposit-transaction-report/deposit-transaction-report.service.js","webpack:///./bundles/reports/deposit-transaction-report/deposit-transaction-report.tpl.html","webpack:///./bundles/reports/directives/report-columns.directive.js","webpack:///./bundles/reports/directives/report-columns.tpl.html","webpack:///./bundles/reports/directives/report-dates.directive.js","webpack:///./bundles/reports/directives/report-dates.tpl.html","webpack:///./bundles/reports/directives/report-order-by.directive.js","webpack:///./bundles/reports/directives/report-order-by.tpl.html","webpack:///./bundles/reports/directives/report-owner-region.directive.js","webpack:///./bundles/reports/directives/report-owner-region.tpl.html","webpack:///./bundles/reports/income-by-item-report/income-by-item-report-chart.service.js","webpack:///./bundles/reports/income-by-item-report/income-by-item-report-columns.service.js","webpack:///./bundles/reports/income-by-item-report/income-by-item-report-data.service.js","webpack:///./bundles/reports/income-by-item-report/income-by-item-report.controller.js","webpack:///./bundles/reports/income-by-item-report/income-by-item-report.tpl.html","webpack:///./bundles/reports/income-by-item-report/income-by-member-report-columns.service.js","webpack:///./bundles/reports/income-by-item-report/income-by-member-report-data.service.js","webpack:///./bundles/reports/income-by-item-report/income-by-order-report-columns.service.js","webpack:///./bundles/reports/income-by-item-report/income-by-order-report-data.service.js","webpack:///./bundles/reports/income-report/income-report-columns.service.js","webpack:///./bundles/reports/income-report/income-report.controller.js","webpack:///./bundles/reports/income-report/income-report.service.js","webpack:///./bundles/reports/income-report/income-report.tpl.html","webpack:///./bundles/reports/index.js"],"names":["angular","module","factory","$rootScope","$filter","$translate","cols","dataKey","_title","include","styles","minCellWidth","defaultOrder","cellWidth","halign","pdf","v","csv","translate","$on","forEach","col","title","instant","pdfPreview","name","reportHelper","reportStyles","reportOptions","controller","$scope","$timeout","$location","state","helper","ReportBuilder","AccountsReceivableReport","accountsReceivableReportColumns","vm","config","reportName","reportOwnerRegion","reportColumns","columns","copy","reportDates","fromDate","toDate","moment","getReportData","get","centerId","date","ownerId","regionId","$promise","setPageTitle","$watch","search","credits","val","replace","reportBuilder","debounceTimeout","_","orderBy","newVal","oldVal","cancel","isUndefined","newDate","oldDate","isMoment","isSame","reportData","buildPdf","reportDataCallback","then","blob","downloadPdf","download","fileName","getReportFileName","downloadCsv","buildCsv","result","item","rows","payments","i","amountDue","totalAmount","round","reduce","sum","p","avgDaysLate","length","daysLate","payment","idx","push","rowOdd","arr","Array","apply","c","content","colSpan","h3","$resource","datesDeserializer","deserializeNumbers","deskworksConfig","desDates","numbersDeserializer","url","getApiAbsUrl","method","transformResponse","fromJson","vacant","occupied","jsPDF","AvailabilityReport","availabilityReportColumns","$ctrl","columnStyles1","columnStyles2","merged","query","reportDataCallbackMerged","columnStyles","doc","paperLayout","paperSize","startY","pageMargins","setFontSize","setFont","getFont","fontName","autoTableText","generatePdf","reportDataCallbackVacant","previousAutoTable","finalY","reportDataCallbackOccupied","output","totalVacant","resType","index","resUnits","reservationUnits","unit","attachedUser","h2","resUnit","basePrice","h1","totalNet","netPrice","totalNetOccupied","totalPriceVacant","dsNumbers","dsDates","res","isArray","params","categories","cat","isNumber","discount","whitelabel","getChartConfig","chartData","chartDataConfig","labels","data","value","backgroundColor","getProperty","options","legend","display","tooltips","callbacks","label","tooltipItem","scales","xAxes","maxBarThickness","type","chartDirective","reportGroupBy","CheckInReport","checkInReportBarChart","checkInReportColumns","checkInReportTotalsColumns","tableMargin","totalsDataCallback","bar","getBarChartData","groups","group","total","duration","colsFilter","userName","userCompany","checkInTime","indexOf","checkOutTime","diff","CreditBalanceReport","creditBalanceReportColumns","getToday","watchToDate","isAfter","credit","DepositAndTaxReport","depositAndTaxReportColumns","subtract","ncurrency","amountTaxableIndex","daily","day","billingMethods","orders","order","isDefined","items","totalRowKeys","key","totalsByProductType","totalsTyProductType","readonly","DepositTransactionReport","depositTransactionReportColumns","banks","centers","bankId","center","unshift","id","findByKeyValue","setParam","dateTotal","Math","max","billingMethod","subtotal","sortData","directive","$compile","$templateCache","templateUrl","restrict","scope","transclude","priority","bindToController","model","link","$element","$attrs","$transclude","after","$onInit","watchColumns","split","colId","$watchCollection","leftColCount","rightColCount","floor","join","embed","clone","newScope","tpl","element","querySelector","append","watchFromDate","levelsCount","template","initLevels","levels","level","watchOrderBy","exclude","$q","dwAlerts","Owner","Region","setupService","getLoggedUser","role","fetchData","watchOwnerId","watchRegionId","getSetupSettings","catch","err","settings","isFranchise","all","owners","regions","onChange","reportSort","dataToChart","onClick","multiLevelProductCategory","productCategories","productType","converters","pieByCategories","pieByProducts","pieByUsers","pieBySupCategories","list","codes","code","datasets","position","category","supCode","pc","catsCount","cats","products","product","toNumber","amount","rangeCategories","categoryCode","productCode","ranged","incomeByItemReportColumns","dataToReport","typeTotal","categoryTotal","orderNo","qty","categoryTotalName","IncomeByItemReport","incomeByItemReportData","incomeByMemberReportData","incomeByOrderReportData","incomeByItemReportChart","debounce","ProductCategory","paramsChanged","loadResources","getParam","startOf","endOf","resources","byOrder","member","chartLevels","np","op","report","pointFirstInvalid","error","buildChart","chartOnClick","event","$apply","_index","chart","chartBack","pop","extension","incomeByMemberReportColumns","users","user","u","userTotal","incomeByOrderReportColumns","o","orderTotal","IncomeReport","incomeReportColumns","add","$injector","importAll","r","js","require","loadNewModules","m","default","invoke","ctx","put"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wE;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wE;;;;;;;;;;;;;;;;;ACjIA;AACA;AACA;AACeA,sEAAO,CAACC,MAAR,CAAe,mDAAf,EAAoE,EAApE,EAEZC,OAFY,CAEJ,iCAFI,0CAE+B,UAASC,UAAT,EAAqBC,OAArB,EAA8BC,UAA9B,EAA0C;AACpF,MAAMC,IAAI,GAAG,CACX;AACEC,WAAO,EAAE,aADX;AAC0BC,UAAM,EAAE,4CADlC;AACgFC,WAAO,EAAE,IADzF;AAEEC,UAAM,EAAE;AAAEC,kBAAY,EA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","file":"reports~._bundles_reports .js?_rev=4543ee651deaf4cdb7c8","sourcesContent":["var map = {\n\t\"./accounts-receivable-report/accounts-receivable-report.tpl.html\": \"./bundles/reports/accounts-receivable-report/accounts-receivable-report.tpl.html\",\n\t\"./availability-report/availability-report.tpl.html\": \"./bundles/reports/availability-report/availability-report.tpl.html\",\n\t\"./check-in-report/check-in-report.tpl.html\": \"./bundles/reports/check-in-report/check-in-report.tpl.html\",\n\t\"./credit-balance-report/credit-balance-report.tpl.html\": \"./bundles/reports/credit-balance-report/credit-balance-report.tpl.html\",\n\t\"./deposit-and-tax-report/deposit-and-tax-report.tpl.html\": \"./bundles/reports/deposit-and-tax-report/deposit-and-tax-report.tpl.html\",\n\t\"./deposit-transaction-report/deposit-transaction-report.tpl.html\": \"./bundles/reports/deposit-transaction-report/deposit-transaction-report.tpl.html\",\n\t\"./directives/report-columns.tpl.html\": \"./bundles/reports/directives/report-columns.tpl.html\",\n\t\"./directives/report-dates.tpl.html\": \"./bundles/reports/directives/report-dates.tpl.html\",\n\t\"./directives/report-order-by.tpl.html\": \"./bundles/reports/directives/report-order-by.tpl.html\",\n\t\"./directives/report-owner-region.tpl.html\": \"./bundles/reports/directives/report-owner-region.tpl.html\",\n\t\"./income-by-item-report/income-by-item-report.tpl.html\": \"./bundles/reports/income-by-item-report/income-by-item-report.tpl.html\",\n\t\"./income-report/income-report.tpl.html\": \"./bundles/reports/income-report/income-report.tpl.html\",\n\t\"./mailbox-report/mailbox-report.tpl.html\": \"./bundles/reports/mailbox-report/mailbox-report.tpl.html\",\n\t\"./member-statement/member-statement.tpl.html\": \"./bundles/reports/member-statement/member-statement.tpl.html\",\n\t\"./member-usage-report/member-usage-report.tpl.html\": \"./bundles/reports/member-usage-report/member-usage-report.tpl.html\",\n\t\"./membership-report/membership-report.tpl.html\": \"./bundles/reports/membership-report/membership-report.tpl.html\",\n\t\"./pass-usage-report/pass-usage-report.tpl.html\": \"./bundles/reports/pass-usage-report/pass-usage-report.tpl.html\",\n\t\"./passport-reservation-usage-report/passport-reservation-usage-report.tpl.html\": \"./bundles/reports/passport-reservation-usage-report/passport-reservation-usage-report.tpl.html\",\n\t\"./payment-reconciliation-report/payment-reconciliation-report.tpl.html\": \"./bundles/reports/payment-reconciliation-report/payment-reconciliation-report.tpl.html\",\n\t\"./price-list-report/price-list-report.tpl.html\": \"./bundles/reports/price-list-report/price-list-report.tpl.html\",\n\t\"./product-report/product-report.tpl.html\": \"./bundles/reports/product-report/product-report.tpl.html\",\n\t\"./recurring-billing-change-report/recurring-billing-change-report.tpl.html\": \"./bundles/reports/recurring-billing-change-report/recurring-billing-change-report.tpl.html\",\n\t\"./recurring-billing-churn-report/recurring-billing-churn-report.tpl.html\": \"./bundles/reports/recurring-billing-churn-report/recurring-billing-churn-report.tpl.html\",\n\t\"./recurring-billing-report/recurring-billing-report.tpl.html\": \"./bundles/reports/recurring-billing-report/recurring-billing-report.tpl.html\",\n\t\"./rent-roll-report/rent-roll-report.tpl.html\": \"./bundles/reports/rent-roll-report/rent-roll-report.tpl.html\",\n\t\"./reservation-report/reservation-report.tpl.html\": \"./bundles/reports/reservation-report/reservation-report.tpl.html\",\n\t\"./reservation-usage-report/reservation-usage-report.tpl.html\": \"./bundles/reports/reservation-usage-report/reservation-usage-report.tpl.html\",\n\t\"./reservation-utilization-report/reservation-utilization-report.tpl.html\": \"./bundles/reports/reservation-utilization-report/reservation-utilization-report.tpl.html\",\n\t\"./revenue-forecast-report/revenue-forecast-report.tpl.html\": \"./bundles/reports/revenue-forecast-report/revenue-forecast-report.tpl.html\",\n\t\"./security-deposit-report/security-deposit-report.tpl.html\": \"./bundles/reports/security-deposit-report/security-deposit-report.tpl.html\",\n\t\"./write-off-report/write-off-report.tpl.html\": \"./bundles/reports/write-off-report/write-off-report.tpl.html\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/reports sync recursive .*\\\\.tpl\\\\.html$\";","var map = {\n\t\"./accounts-receivable-report/accounts-receivable-report-columns.service.js\": \"./bundles/reports/accounts-receivable-report/accounts-receivable-report-columns.service.js\",\n\t\"./accounts-receivable-report/accounts-receivable-report.controller.js\": \"./bundles/reports/accounts-receivable-report/accounts-receivable-report.controller.js\",\n\t\"./accounts-receivable-report/accounts-receivable-report.service.js\": \"./bundles/reports/accounts-receivable-report/accounts-receivable-report.service.js\",\n\t\"./availability-report/availability-report-columns.service.js\": \"./bundles/reports/availability-report/availability-report-columns.service.js\",\n\t\"./availability-report/availability-report.controller.js\": \"./bundles/reports/availability-report/availability-report.controller.js\",\n\t\"./availability-report/availability-report.service.js\": \"./bundles/reports/availability-report/availability-report.service.js\",\n\t\"./check-in-report/check-in-report-bar-chart.service.js\": \"./bundles/reports/check-in-report/check-in-report-bar-chart.service.js\",\n\t\"./check-in-report/check-in-report-columns.service.js\": \"./bundles/reports/check-in-report/check-in-report-columns.service.js\",\n\t\"./check-in-report/check-in-report-totals-columns.service.js\": \"./bundles/reports/check-in-report/check-in-report-totals-columns.service.js\",\n\t\"./check-in-report/check-in-report.controller.js\": \"./bundles/reports/check-in-report/check-in-report.controller.js\",\n\t\"./check-in-report/check-in-report.service.js\": \"./bundles/reports/check-in-report/check-in-report.service.js\",\n\t\"./credit-balance-report/credit-balance-report-columns.service.js\": \"./bundles/reports/credit-balance-report/credit-balance-report-columns.service.js\",\n\t\"./credit-balance-report/credit-balance-report.controller.js\": \"./bundles/reports/credit-balance-report/credit-balance-report.controller.js\",\n\t\"./credit-balance-report/credit-balance-report.service.js\": \"./bundles/reports/credit-balance-report/credit-balance-report.service.js\",\n\t\"./deposit-and-tax-report/deposit-and-tax-report-columns.service.js\": \"./bundles/reports/deposit-and-tax-report/deposit-and-tax-report-columns.service.js\",\n\t\"./deposit-and-tax-report/deposit-and-tax-report.controller.js\": \"./bundles/reports/deposit-and-tax-report/deposit-and-tax-report.controller.js\",\n\t\"./deposit-and-tax-report/deposit-and-tax-report.service.js\": \"./bundles/reports/deposit-and-tax-report/deposit-and-tax-report.service.js\",\n\t\"./deposit-transaction-report/deposit-transaction-report-columns.service.js\": \"./bundles/reports/deposit-transaction-report/deposit-transaction-report-columns.service.js\",\n\t\"./deposit-transaction-report/deposit-transaction-report.controller.js\": \"./bundles/reports/deposit-transaction-report/deposit-transaction-report.controller.js\",\n\t\"./deposit-transaction-report/deposit-transaction-report.service.js\": \"./bundles/reports/deposit-transaction-report/deposit-transaction-report.service.js\",\n\t\"./directives/report-columns.directive.js\": \"./bundles/reports/directives/report-columns.directive.js\",\n\t\"./directives/report-dates.directive.js\": \"./bundles/reports/directives/report-dates.directive.js\",\n\t\"./directives/report-order-by.directive.js\": \"./bundles/reports/directives/report-order-by.directive.js\",\n\t\"./directives/report-owner-region.directive.js\": \"./bundles/reports/directives/report-owner-region.directive.js\",\n\t\"./income-by-item-report/income-by-item-report-chart.service.js\": \"./bundles/reports/income-by-item-report/income-by-item-report-chart.service.js\",\n\t\"./income-by-item-report/income-by-item-report-columns.service.js\": \"./bundles/reports/income-by-item-report/income-by-item-report-columns.service.js\",\n\t\"./income-by-item-report/income-by-item-report-data.service.js\": \"./bundles/reports/income-by-item-report/income-by-item-report-data.service.js\",\n\t\"./income-by-item-report/income-by-item-report.controller.js\": \"./bundles/reports/income-by-item-report/income-by-item-report.controller.js\",\n\t\"./income-by-item-report/income-by-member-report-columns.service.js\": \"./bundles/reports/income-by-item-report/income-by-member-report-columns.service.js\",\n\t\"./income-by-item-report/income-by-member-report-data.service.js\": \"./bundles/reports/income-by-item-report/income-by-member-report-data.service.js\",\n\t\"./income-by-item-report/income-by-order-report-columns.service.js\": \"./bundles/reports/income-by-item-report/income-by-order-report-columns.service.js\",\n\t\"./income-by-item-report/income-by-order-report-data.service.js\": \"./bundles/reports/income-by-item-report/income-by-order-report-data.service.js\",\n\t\"./income-report/income-report-columns.service.js\": \"./bundles/reports/income-report/income-report-columns.service.js\",\n\t\"./income-report/income-report.controller.js\": \"./bundles/reports/income-report/income-report.controller.js\",\n\t\"./income-report/income-report.service.js\": \"./bundles/reports/income-report/income-report.service.js\",\n\t\"./mailbox-report/mailbox-report-columns.service.js\": \"./bundles/reports/mailbox-report/mailbox-report-columns.service.js\",\n\t\"./mailbox-report/mailbox-report.controller.js\": \"./bundles/reports/mailbox-report/mailbox-report.controller.js\",\n\t\"./mailbox-report/mailbox-report.service.js\": \"./bundles/reports/mailbox-report/mailbox-report.service.js\",\n\t\"./member-statement/member-statement-columns.service.js\": \"./bundles/reports/member-statement/member-statement-columns.service.js\",\n\t\"./member-statement/member-statement.controller.js\": \"./bundles/reports/member-statement/member-statement.controller.js\",\n\t\"./member-statement/member-statement.service.js\": \"./bundles/reports/member-statement/member-statement.service.js\",\n\t\"./member-usage-report/member-usage-report-columns.service.js\": \"./bundles/reports/member-usage-report/member-usage-report-columns.service.js\",\n\t\"./member-usage-report/member-usage-report.controller.js\": \"./bundles/reports/member-usage-report/member-usage-report.controller.js\",\n\t\"./member-usage-report/member-usage-report.service.js\": \"./bundles/reports/member-usage-report/member-usage-report.service.js\",\n\t\"./membership-report/membership-report-columns.service.js\": \"./bundles/reports/membership-report/membership-report-columns.service.js\",\n\t\"./membership-report/membership-report.controller.js\": \"./bundles/reports/membership-report/membership-report.controller.js\",\n\t\"./membership-report/membership-report.service.js\": \"./bundles/reports/membership-report/membership-report.service.js\",\n\t\"./pass-usage-report/pass-usage-report-columns.service.js\": \"./bundles/reports/pass-usage-report/pass-usage-report-columns.service.js\",\n\t\"./pass-usage-report/pass-usage-report.controller.js\": \"./bundles/reports/pass-usage-report/pass-usage-report.controller.js\",\n\t\"./pass-usage-report/pass-usage-report.service.js\": \"./bundles/reports/pass-usage-report/pass-usage-report.service.js\",\n\t\"./passport-reservation-usage-report/passport-reservation-usage-report-columns.service.js\": \"./bundles/reports/passport-reservation-usage-report/passport-reservation-usage-report-columns.service.js\",\n\t\"./passport-reservation-usage-report/passport-reservation-usage-report.controller.js\": \"./bundles/reports/passport-reservation-usage-report/passport-reservation-usage-report.controller.js\",\n\t\"./passport-reservation-usage-report/passport-reservation-usage-report.service.js\": \"./bundles/reports/passport-reservation-usage-report/passport-reservation-usage-report.service.js\",\n\t\"./payment-reconciliation-report/payment-reconciliation-report-columns.service.js\": \"./bundles/reports/payment-reconciliation-report/payment-reconciliation-report-columns.service.js\",\n\t\"./payment-reconciliation-report/payment-reconciliation-report.controller.js\": \"./bundles/reports/payment-reconciliation-report/payment-reconciliation-report.controller.js\",\n\t\"./payment-reconciliation-report/payment-reconciliation-report.service.js\": \"./bundles/reports/payment-reconciliation-report/payment-reconciliation-report.service.js\",\n\t\"./price-list-report/price-list-report-columns.service.js\": \"./bundles/reports/price-list-report/price-list-report-columns.service.js\",\n\t\"./price-list-report/price-list-report.controller.js\": \"./bundles/reports/price-list-report/price-list-report.controller.js\",\n\t\"./price-list-report/price-list-report.service.js\": \"./bundles/reports/price-list-report/price-list-report.service.js\",\n\t\"./product-report/product-report-columns.service.js\": \"./bundles/reports/product-report/product-report-columns.service.js\",\n\t\"./product-report/product-report-data.service.js\": \"./bundles/reports/product-report/product-report-data.service.js\",\n\t\"./product-report/product-report.controller.js\": \"./bundles/reports/product-report/product-report.controller.js\",\n\t\"./product-report/product-report.service.js\": \"./bundles/reports/product-report/product-report.service.js\",\n\t\"./recurring-billing-change-report/opts-rbc-report-by-period.service.js\": \"./bundles/reports/recurring-billing-change-report/opts-rbc-report-by-period.service.js\",\n\t\"./recurring-billing-change-report/recurring-billing-change-chart.service.js\": \"./bundles/reports/recurring-billing-change-report/recurring-billing-change-chart.service.js\",\n\t\"./recurring-billing-change-report/recurring-billing-change-data.service.js\": \"./bundles/reports/recurring-billing-change-report/recurring-billing-change-data.service.js\",\n\t\"./recurring-billing-change-report/recurring-billing-change-report-columns.service.js\": \"./bundles/reports/recurring-billing-change-report/recurring-billing-change-report-columns.service.js\",\n\t\"./recurring-billing-change-report/recurring-billing-change-report.controller.js\": \"./bundles/reports/recurring-billing-change-report/recurring-billing-change-report.controller.js\",\n\t\"./recurring-billing-change-report/recurring-billing-change-report.service.js\": \"./bundles/reports/recurring-billing-change-report/recurring-billing-change-report.service.js\",\n\t\"./recurring-billing-churn-report/recurring-billing-churn-report-columns.service.js\": \"./bundles/reports/recurring-billing-churn-report/recurring-billing-churn-report-columns.service.js\",\n\t\"./recurring-billing-churn-report/recurring-billing-churn-report.controller.js\": \"./bundles/reports/recurring-billing-churn-report/recurring-billing-churn-report.controller.js\",\n\t\"./recurring-billing-churn-report/recurring-billing-churn-report.service.js\": \"./bundles/reports/recurring-billing-churn-report/recurring-billing-churn-report.service.js\",\n\t\"./recurring-billing-report/recurring-billing-report-columns.service.js\": \"./bundles/reports/recurring-billing-report/recurring-billing-report-columns.service.js\",\n\t\"./recurring-billing-report/recurring-billing-report.controller.js\": \"./bundles/reports/recurring-billing-report/recurring-billing-report.controller.js\",\n\t\"./recurring-billing-report/recurring-billing-report.service.js\": \"./bundles/reports/recurring-billing-report/recurring-billing-report.service.js\",\n\t\"./rent-roll-report/rent-roll-report-columns.service.js\": \"./bundles/reports/rent-roll-report/rent-roll-report-columns.service.js\",\n\t\"./rent-roll-report/rent-roll-report.controller.js\": \"./bundles/reports/rent-roll-report/rent-roll-report.controller.js\",\n\t\"./rent-roll-report/rent-roll-report.service.js\": \"./bundles/reports/rent-roll-report/rent-roll-report.service.js\",\n\t\"./reservation-report/reservation-report-columns.service.js\": \"./bundles/reports/reservation-report/reservation-report-columns.service.js\",\n\t\"./reservation-report/reservation-report.controller.js\": \"./bundles/reports/reservation-report/reservation-report.controller.js\",\n\t\"./reservation-report/reservation-report.service.js\": \"./bundles/reports/reservation-report/reservation-report.service.js\",\n\t\"./reservation-usage-report/reservation-usage-report-columns.service.js\": \"./bundles/reports/reservation-usage-report/reservation-usage-report-columns.service.js\",\n\t\"./reservation-usage-report/reservation-usage-report.controller.js\": \"./bundles/reports/reservation-usage-report/reservation-usage-report.controller.js\",\n\t\"./reservation-usage-report/reservation-usage-report.service.js\": \"./bundles/reports/reservation-usage-report/reservation-usage-report.service.js\",\n\t\"./reservation-utilization-report/reservation-utilization-actual-expected-aggregate.service.js\": \"./bundles/reports/reservation-utilization-report/reservation-utilization-actual-expected-aggregate.service.js\",\n\t\"./reservation-utilization-report/reservation-utilization-actual-expected-chart.service.js\": \"./bundles/reports/reservation-utilization-report/reservation-utilization-actual-expected-chart.service.js\",\n\t\"./reservation-utilization-report/reservation-utilization-actual-expected-columns.service.js\": \"./bundles/reports/reservation-utilization-report/reservation-utilization-actual-expected-columns.service.js\",\n\t\"./reservation-utilization-report/reservation-utilization-actual-expected-report.service.js\": \"./bundles/reports/reservation-utilization-report/reservation-utilization-actual-expected-report.service.js\",\n\t\"./reservation-utilization-report/reservation-utilization-detailed-actual-aggregate.service.js\": \"./bundles/reports/reservation-utilization-report/reservation-utilization-detailed-actual-aggregate.service.js\",\n\t\"./reservation-utilization-report/reservation-utilization-detailed-actual-chart.service.js\": \"./bundles/reports/reservation-utilization-report/reservation-utilization-detailed-actual-chart.service.js\",\n\t\"./reservation-utilization-report/reservation-utilization-detailed-actual-columns.service.js\": \"./bundles/reports/reservation-utilization-report/reservation-utilization-detailed-actual-columns.service.js\",\n\t\"./reservation-utilization-report/reservation-utilization-detailed-actual-report.service.js\": \"./bundles/reports/reservation-utilization-report/reservation-utilization-detailed-actual-report.service.js\",\n\t\"./reservation-utilization-report/reservation-utilization-report.controller.js\": \"./bundles/reports/reservation-utilization-report/reservation-utilization-report.controller.js\",\n\t\"./reservation-utilization-report/reservation-utilization-report.service.js\": \"./bundles/reports/reservation-utilization-report/reservation-utilization-report.service.js\",\n\t\"./revenue-forecast-report/revenue-forecast-chart.service.js\": \"./bundles/reports/revenue-forecast-report/revenue-forecast-chart.service.js\",\n\t\"./revenue-forecast-report/revenue-forecast-data.service.js\": \"./bundles/reports/revenue-forecast-report/revenue-forecast-data.service.js\",\n\t\"./revenue-forecast-report/revenue-forecast-report-columns.service.js\": \"./bundles/reports/revenue-forecast-report/revenue-forecast-report-columns.service.js\",\n\t\"./revenue-forecast-report/revenue-forecast-report.controller.js\": \"./bundles/reports/revenue-forecast-report/revenue-forecast-report.controller.js\",\n\t\"./revenue-forecast-report/revenue-forecast-report.service.js\": \"./bundles/reports/revenue-forecast-report/revenue-forecast-report.service.js\",\n\t\"./security-deposit-report/security-deposit-report-columns.service.js\": \"./bundles/reports/security-deposit-report/security-deposit-report-columns.service.js\",\n\t\"./security-deposit-report/security-deposit-report.controller.js\": \"./bundles/reports/security-deposit-report/security-deposit-report.controller.js\",\n\t\"./security-deposit-report/security-deposit-report.service.js\": \"./bundles/reports/security-deposit-report/security-deposit-report.service.js\",\n\t\"./services/b64.service.js\": \"./bundles/reports/services/b64.service.js\",\n\t\"./services/report-builder.service.js\": \"./bundles/reports/services/report-builder.service.js\",\n\t\"./services/report-group-by.service.js\": \"./bundles/reports/services/report-group-by.service.js\",\n\t\"./write-off-report/write-off-report-columns.service.js\": \"./bundles/reports/write-off-report/write-off-report-columns.service.js\",\n\t\"./write-off-report/write-off-report.controller.js\": \"./bundles/reports/write-off-report/write-off-report.controller.js\",\n\t\"./write-off-report/write-off-report.service.js\": \"./bundles/reports/write-off-report/write-off-report.service.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/reports sync recursive \\\\..+\\\\/.+\\\\.js$\";","/**\n * Columns for Accounts Receivable Report\n */\nexport default angular.module('deskworks.reports.accountsReceivableReportColumns', [])\n\n  .factory('accountsReceivableReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'userCompany', _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.COMPANY', include: true,\n        styles: { minCellWidth: 130 },\n      },\n      {\n        dataKey: 'userName', _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.USER_NAME', include: true,\n        styles: { minCellWidth: 120 },\n      },\n      {\n        dataKey: 'date', _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.BILL_DATE', include: true, defaultOrder: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'amount', _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.AMOUNT', include: true,\n        styles: { minCellWidth: 60, halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'dateDue', _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.DUE_DATE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'amountDue', _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.AMOUNT_DUE', include: true,\n        styles: { minCellWidth: 65, halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'daysLate', _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.DAYS_LATE', include: true,\n        styles: { halign: 'right' },\n      },\n      {\n        dataKey: 'comment', _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.COMMENT', include: true,\n        styles: { minCellWidth: 120 },\n      },\n      {\n        dataKey: 'orderId', _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.ORDER_ID', include: false,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n      }\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.reports.accountsReceivableReport', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportDates',\n  'deskworks.reports.reportOwnerRegion',\n  'deskworks.reports.accountsReceivableReport.service',\n  'deskworks.reports.accountsReceivableReportColumns'\n])\n  .controller('AccountsReceivableReportCtrl', function($scope, $timeout, $filter, $translate, $location, state, helper,\n                                                       reportStyles, ReportBuilder, reportHelper,\n                                                       AccountsReceivableReport, accountsReceivableReportColumns) {\n    const vm = this;\n\n    vm.config = {\n      reportName: $translate.instant('ACCOUNTS_RECEIVABLE_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportOwnerRegion: {},\n      reportColumns: { columns: angular.copy(accountsReceivableReportColumns) },\n      reportDates: { fromDate: false, toDate: moment() },\n      getReportData: function() {\n        return AccountsReceivableReport.get({\n          centerId: vm.config.reportOptions.centerId,\n          date: $filter('date')(vm.config.reportDates.toDate, 'yyyy-MM-dd'),\n          ownerId: vm.config.reportOwnerRegion.ownerId,\n          regionId: vm.config.reportOwnerRegion.regionId,\n        }).$promise;\n      },\n    };\n\n    state.setPageTitle(vm.config.reportName);\n\n    /**\n     * Map pastDueOnly to URL search param\n     */\n    $scope.$watch(() => $location.search().credits, val => {\n      vm.config.credits = !!val && val !== 'false';\n    });\n    $scope.$watch('vm.config.credits', val => {\n      $location.search('credits', val).replace();\n    });\n\n    vm.reportBuilder = new ReportBuilder(vm.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    let debounceTimeout;\n    $scope.$watch(_ => ({\n      reportOptions: vm.config.reportOptions,\n      reportDates: vm.config.reportDates,\n      reportColumns: vm.config.reportColumns,\n      reportOwnerRegion: vm.config.reportOwnerRegion,\n      credits: vm.config.credits,\n      orderBy: vm.config.orderBy,\n    }), (newVal, oldVal) => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(_ => {\n        vm.pdf = null;\n        if (angular.isUndefined(vm.config.reportOptions.centerId)) return;\n\n        let newDate = newVal.reportDates.fromDate, oldDate = oldVal.reportDates.fromDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;\n        newDate = newVal.reportDates.toDate; oldDate = oldVal.reportDates.toDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;\n\n        vm.reportBuilder.buildPdf(reportDataCallback).then(blob => { vm.pdf = blob; });\n      }, 100);\n    }, true);\n    \n    /**\n     * Download generated PDF report\n     */\n    vm.downloadPdf = function() {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.pdf, fileName: vm.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n    * Generate and download CSV report\n    */\n    vm.downloadCsv = function() {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.reportBuilder.buildCsv(reportDataCallback), fileName: vm.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns.columns.filter(item => item.include),\n        rows: config.reportData.payments.filter(i => vm.config.credits || i.amountDue >= 0),\n        styles: [],\n      };\n\n      result.rows = reportHelper.sort(result.rows, config.orderBy);\n\n      const totalAmount = helper.round(result.rows.reduce((sum, p) => sum + (p.amountDue ? +p.amountDue : 0), 0));\n      const avgDaysLate = result.rows.length && helper.round(result.rows.reduce((sum, p) => sum + (p.daysLate ? +p.daysLate : 0), 0) / result.rows.length);\n\n      result.rows = result.rows.map((payment, idx) => {\n        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        return result.columns.map(col => payment[col.dataKey]);\n      });\n\n      let idx, arr = Array.apply(null, new Array(result.columns.length)).map(_ => false);\n\n      result.rows.push(arr);\n      result.styles.push(null);\n\n      idx = result.columns.findIndex(c => c.dataKey === 'daysLate');\n      if (idx >= 0) {\n        result.rows.push([\n          { content: $translate.instant('ACCOUNTS_RECEIVABLE_REPORT.TOTALS.AVG_DAYS_LATE') + ':', colSpan: idx, styles: { halign: 'right' } },\n          { content: avgDaysLate },\n          { content: false, colSpan: result.columns.length - idx - 1 },\n        ]);\n        result.styles.push(reportStyles.h3);\n      }\n\n      idx = result.columns.findIndex(c => c.dataKey === 'amountDue');\n      if (idx >= 0) {\n        result.rows.push([\n          { content: $translate.instant('ACCOUNTS_RECEIVABLE_REPORT.TOTALS.TOTAL_DUE') + ':', colSpan: idx, styles: { halign: 'right' } },\n          { content: $filter('ncurrency')(totalAmount) },\n          { content: false, colSpan: result.columns.length - idx - 1 },\n        ]);\n        result.styles.push(reportStyles.h3);\n      }\n\n      return result;\n    }\n  });\n","/**\n * AccountsReceivableReport service\n */\nexport default angular.module('deskworks.reports.accountsReceivableReport.service', [\n  'ngResource',\n  'datesDeserializer',\n  'deserializeNumbers',\n  'deskworks.config'\n])\n\n  .factory('AccountsReceivableReport', function($resource, datesDeserializer, deserializeNumbers, deskworksConfig) {\n    const desDates = datesDeserializer(['payments.date', 'payments.dateDue']);\n    const numbersDeserializer = deserializeNumbers(['payments.amountDue', 'payments.amount']);\n\n    const url = deskworksConfig.getApiAbsUrl('/centers/:centerId/accounts-receivable-reports');\n\n    return $resource(url, { centerId: '@centerId', date: '@date' }, {\n      get: { method: 'GET', transformResponse: [angular.fromJson, desDates, numbersDeserializer] }\n    });\n  });\n","// Module\nvar code = \"<div id=\\\"accountsReceivableReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formAccountsReceivableReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 65%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-dates model=\\\"vm.config.reportDates\\\"></report-dates> <report-columns model=\\\"vm.config.reportColumns\\\"></report-columns> </div> </div> <div flex=\\\"{lg: '0 0 35%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-options model=\\\"vm.config.reportOptions\\\"> <report-order-by model=\\\"vm.config.orderBy\\\" report-columns=\\\"vm.config.reportColumns.columns\\\"></report-order-by> <ff-static> <label> <ff-checkbox ff-model=\\\"vm.config.credits\\\"><span translate=\\\"ACCOUNTS_RECEIVABLE_REPORT.DISPLAY_CREDITS\\\"></span></ff-checkbox> </label> </ff-static> </report-options> <report-owner-region model=\\\"vm.config.reportOwnerRegion\\\" report-data=\\\"vm.config.reportData\\\"></report-owner-region> </div> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadPdf()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadCsv()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"vm.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Availability Report\n */\nexport default angular.module('deskworks.reports.availabilityReportColumns', [])\n\n  .factory('availabilityReportColumns', function($rootScope, $filter, $translate) {\n    const cols = {\n      vacant: [\n        {\n          dataKey: 'name', _title: 'AVAILABILITY_REPORT.COLUMNS.UNIT', include: true,\n        },\n        {\n          dataKey: 'basePrice', _title: 'AVAILABILITY_REPORT.COLUMNS.PRICE', include: true,\n          styles: { halign: 'right', cellWidth: 'wrap' },\n          pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n        },\n        {\n          dataKey: 'description', _title: 'AVAILABILITY_REPORT.COLUMNS.DESCRIPTION', include: true,\n        }\n      ],\n      occupied: [\n        {\n          dataKey: 'name', _title: 'AVAILABILITY_REPORT.COLUMNS.UNIT', include: true,\n        },\n        {\n          dataKey: 'attachedUser', _title: 'AVAILABILITY_REPORT.COLUMNS.CLIENT', include: true,\n        },\n        {\n          dataKey: 'basePrice', _title: 'AVAILABILITY_REPORT.COLUMNS.PRICE', include: true,\n          styles: { halign: 'right' },\n          pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n        },\n        {\n          dataKey: 'discount', _title: 'AVAILABILITY_REPORT.COLUMNS.DISCOUNT', include: true,\n          styles: { halign: 'right' },\n          pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n        },\n        {\n          dataKey: 'netPrice', _title: 'AVAILABILITY_REPORT.COLUMNS.NET_PRICE', include: true,\n          styles: { halign: 'right' },\n          pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n        },\n        {\n          dataKey: 'startDate', _title: 'AVAILABILITY_REPORT.COLUMNS.START_DATE', include: true,\n          styles: { halign: 'right' },\n          pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n        },\n        {\n          dataKey: 'terminationDate', _title: 'AVAILABILITY_REPORT.COLUMNS.TERMINATION_DATE', include: true,\n          styles: { halign: 'right' },\n          pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n        }\n      ]\n    };\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() {\n      cols.vacant.forEach(col => { col.title = $translate.instant(col._title); });\n      cols.occupied.forEach(col => { col.title = $translate.instant(col._title); });\n    }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport jsPDF from 'shared/reports/services/jspdf.service';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.reports.availabilityReport', [\n  pdfPreview.name,\n  reportHelper.name,\n  jsPDF.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportDates',\n  'deskworks.reports.availabilityReport.service',\n  'deskworks.reports.availabilityReportColumns'\n])\n  .controller('AvailabilityReportCtrl', function($scope, $timeout, $filter, $translate, $location, state, helper,\n                                                 jsPDF, reportStyles, ReportBuilder, reportHelper, AvailabilityReport,\n                                                 availabilityReportColumns) {\n    const $ctrl = this;\n\n    const columnStyles1 = { 0: { cellWidth: 230 }, 1: { cellWidth: 60 } };\n    const columnStyles2 = {\n      0: { cellWidth: 230 }, 1: { cellWidth: 'wrap' }, 2: { cellWidth: 60 }, 3: { cellWidth: 60 },\n      4: { cellWidth: 60 }, 5: { cellWidth: 80 }, 6: { cellWidth: 80 }\n    };\n\n    $ctrl.config = {\n      reportName: $translate.instant('AVAILABILITY_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      merged: false,\n      getReportData: function() {\n        return AvailabilityReport.query({ centerId: $ctrl.config.reportOptions.centerId });\n      },\n    };\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    /**\n     * Map showDetails to URL search param\n     */\n    $scope.$watch(_ => $location.search().merged, val => { $ctrl.config.merged = val; });\n    $scope.$watch('$ctrl.config.merged', val => { $location.search('merged', val || null).replace(); });\n\n    $ctrl.reportBuilder = new ReportBuilder($ctrl.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    let debounceTimeout;\n    $scope.$watch(_ => ({ reportOptions: $ctrl.config.reportOptions, reportColumns: $ctrl.config.reportColumns, merged: $ctrl.config.merged, }), (newVal, oldVal) => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(function() {\n        $ctrl.pdf = null;\n        if (angular.isUndefined($ctrl.config.reportOptions.centerId)) return;\n\n        if ($ctrl.config.merged) {\n          $ctrl.reportBuilder.buildPdf(reportDataCallbackMerged, { columnStyles: columnStyles2, ...reportStyles }).then(blob => { $ctrl.pdf = blob; });\n        } else {\n          const doc = new jsPDF($ctrl.config.reportOptions.paperLayout, 'pt', $ctrl.config.reportOptions.paperSize);\n          const startY = reportStyles.pageMargins[0];\n          doc.setFontSize(11);\n          doc.setFont(doc.getFont().fontName, 'bold');\n          doc.autoTableText($translate.instant('AVAILABILITY_REPORT.VACANT') + ':', reportStyles.pageMargins[3], startY, {});\n          const styles = Object.assign({ startY: startY + 15, columnStyles: columnStyles1 }, reportStyles);\n\n          $ctrl.reportBuilder.generatePdf(reportDataCallbackVacant, styles, doc) // generate 1st part\n            .then(doc => {\n              const startY = doc.previousAutoTable.finalY + 20;\n              doc.setFontSize(11);\n              doc.setFont(doc.getFont().fontName, 'bold');\n              doc.autoTableText($translate.instant('AVAILABILITY_REPORT.OCCUPIED') + ':', reportStyles.pageMargins[3], startY, { /*halign: columns[data.column.dataKey].halign, valign: cell.styles.valign*/ });\n              const styles = Object.assign({ startY: startY + 15, columnStyles: columnStyles2 }, reportStyles);\n              $ctrl.reportBuilder.generatePdf(reportDataCallbackOccupied, styles, doc) // generate 2nd part\n                .then(doc => {\n                  $ctrl.pdf = doc.output('blob');\n                });\n            });\n        }\n      }, 100);\n    }, true);\n\n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = function() {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.pdf, fileName: $ctrl.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n    * Generate and download CSV report\n    */\n    $ctrl.downloadCsv = function() {\n      if (!$ctrl.pdf) return;\n      if ($ctrl.config.merged) {\n        reportHelper.download({ blob: $ctrl.reportBuilder.buildCsv(reportDataCallbackMerged), fileName: $ctrl.reportBuilder.getReportFileName('csv') });\n      } else {\n        reportHelper.download({ blob: $ctrl.reportBuilder.buildCsv(reportDataCallbackVacant), fileName: $ctrl.reportBuilder.getReportFileName('csv', '-vacant') });\n        reportHelper.download({ blob: $ctrl.reportBuilder.buildCsv(reportDataCallbackOccupied), fileName: $ctrl.reportBuilder.getReportFileName('csv', '-occupied') });\n      }\n    };\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallbackVacant(config) {\n      const result = {\n        columns: availabilityReportColumns.vacant,\n        rows: [],\n        styles: [],\n      };\n\n      let idx, arr = Array.apply(null, new Array(result.columns.length)).map(function(val) { return false; });\n\n      // Finally, convert to matrix\n      let totalVacant = 0;\n      config.reportData.forEach(function(resType, index) {\n        const resUnits = resType.reservationUnits.filter(unit => !unit.attachedUser);\n        if (!resUnits.length) return; // skip empty reservation types\n\n        // Reservation Type name\n        result.rows.push([resType.name].concat(arr.slice(0, arr.length - 1)));\n        result.styles.push(reportStyles.h2);\n\n        resUnits.forEach(function(resUnit, idx) {\n          totalVacant += resUnit.basePrice || 0;\n          result.rows.push(result.columns.map(function(col) { return resUnit[col.dataKey]; }));\n          result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        });\n      });\n\n      result.rows.push([$translate.instant('AVAILABILITY_REPORT.TOTALS.VACANT'), totalVacant].concat(arr.slice(0, arr.length - 2)));\n      result.styles.push(reportStyles.h1);\n\n      return result;\n    }\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallbackOccupied(config) {\n      const result = {\n        columns: availabilityReportColumns.occupied,\n        rows: [],\n        styles: [],\n      };\n\n      let idx, arr = Array.apply(null, new Array(result.columns.length)).map(_ => false);\n\n      // Finally, convert to matrix\n      let totalNet = 0;\n      config.reportData.forEach((resType) => {\n        const resUnits = resType.reservationUnits.filter(unit => !!unit.attachedUser);\n        if (!resUnits.length) return; // skip empty reservation types\n\n        // Reservation Type name\n        result.rows.push([resType.name].concat(arr.slice(0, arr.length - 1)));\n        result.styles.push(reportStyles.h2);\n\n        resUnits.forEach((resUnit, idx) => {\n          totalNet += resUnit.netPrice || 0;\n          result.rows.push(result.columns.map(col => resUnit[col.dataKey]));\n          result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        });\n      });\n\n      result.rows.push([$translate.instant('AVAILABILITY_REPORT.TOTALS.OCCUPIED'), false, false, false, totalNet].concat(arr.slice(0, arr.length - 5)));\n      result.styles.push(reportStyles.h1);\n\n      return result;\n    }\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallbackMerged(config) {\n      const result = {\n        columns: availabilityReportColumns.occupied,\n        rows: [],\n        styles: [],\n      };\n\n      let arr = Array.apply(null, new Array(result.columns.length)).map(_ => false);\n\n      let totalNetOccupied = 0, totalPriceVacant = 0;\n      config.reportData.forEach(resType => {\n        const resUnits = resType.reservationUnits;\n        if (!resUnits.length) return; // skip empty reservation types\n\n        // Reservation Type name\n        result.rows.push([resType.name].concat(arr.slice(0, arr.length - 1)));\n        result.styles.push(reportStyles.h2);\n\n        resUnits.forEach((unit, idx) => {\n          if (unit.attachedUser) {\n            totalNetOccupied += unit.netPrice || 0;\n          } else {\n            totalPriceVacant += unit.basePrice || 0;\n          }\n          result.rows.push(result.columns.map(col => unit[col.dataKey]));\n          result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        });\n      });\n\n      result.rows.push([$translate.instant('AVAILABILITY_REPORT.TOTALS.OCCUPIED'), false, false, false, totalNetOccupied].concat(arr.slice(0, arr.length - 5)));\n      result.styles.push(reportStyles.h1);\n      result.rows.push([$translate.instant('AVAILABILITY_REPORT.TOTALS.VACANT'), false, totalPriceVacant].concat(arr.slice(0, arr.length - 3)));\n      result.styles.push(reportStyles.h1);\n\n      return result;\n    }\n  });\n","/**\n * AvailabilityReport service\n */\nexport default angular.module('deskworks.reports.availabilityReport.service', [\n  'ngResource',\n  'deserializeNumbers',\n  'datesDeserializer',\n  'deskworks.config'\n])\n  .factory('AvailabilityReport', function($resource, deserializeNumbers, datesDeserializer, deskworksConfig) {\n    const url = deskworksConfig.getApiAbsUrl('/centers/:centerId/availability-reports');\n\n    const dsNumbers = deserializeNumbers(['reservationUnits.basePrice', 'reservationUnits.netPrice', 'reservationUnits.discount']);\n    const dsDates = datesDeserializer(['reservationUnits.startDate', 'reservationUnits.terminationDate']);\n\n    const res = $resource(url, { centerId: '@centerId' }, {\n      query: { method: 'GET', isArray: true, transformResponse: [angular.fromJson, dsDates, dsNumbers] }\n    });\n\n    return {\n      query: params => res.query(params).$promise\n        .then(categories => {\n          categories.forEach(cat => {\n            cat.reservationUnits.forEach(unit => {\n              unit.netPrice = unit.basePrice;\n              if (angular.isNumber(unit.netPrice)) unit.netPrice -= unit.discount || 0;\n            });\n          });\n          return categories;\n        }),\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"availabilityReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formAvailabilityReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\" style=\\\"margin-left:auto\\\"> <report-options model=\\\"$ctrl.config.reportOptions\\\" all-centers=\\\"false\\\"> <ff-row> <ff-label flex=\\\"0 0 100px\\\"><span translate=\\\"AVAILABILITY_REPORT.MERGED\\\"></span></ff-label> <ff-static><ff-checkbox ff-model=\\\"$ctrl.config.merged\\\"></ff-checkbox></ff-static> </ff-row> </report-options> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Bar chart for Check-In Report\n */\nexport default angular.module('deskworks.reports.checkInReportBarChart', [])\n  .factory('checkInReportBarChart', function($translate, $filter, helper, whitelabel) {\n\n    return {\n      getChartConfig: (chartData, orderBy) => {\n        const chartDataConfig = {\n          labels: chartData.map(item => item.name || '-'),\n          data: [\n            {\n              data: chartData.map(item => item.value / 3600000),\n              backgroundColor: whitelabel.getProperty('--brand-color'),\n            },\n          ],\n          options: {\n            legend: { display: false },\n            tooltips: {\n              callbacks: {\n                label: (tooltipItem, data) => $filter('hoursMinutes')(chartData[tooltipItem.index].value),\n              },\n            },\n            scales: {\n              xAxes: [{ maxBarThickness: 100 }],\n            },\n          },\n        };\n\n        if (orderBy === 'checkInTime') {\n          chartDataConfig.type = 'bar';\n        } else {\n          chartDataConfig.type = 'horizontalBar';\n        }\n\n        return chartDataConfig;\n      },\n    };\n  });\n","/**\n * Columns for Check In Report\n */\nexport default angular.module('deskworks.checkInReportColumns', [])\n\n  .factory('checkInReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'userName', _title: 'CHECK_IN_REPORT.COLUMNS.NAME',\n      },\n      {\n        dataKey: 'userCompany', _title: 'CHECK_IN_REPORT.COLUMNS.COMPANY',\n      },\n      {\n        dataKey: 'checkInTime', _title: 'CHECK_IN_REPORT.COLUMNS.DATE',\n        styles: { halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'checkInTime', _title: 'CHECK_IN_REPORT.COLUMNS.CHECK_IN',\n        styles: { halign: 'right' },\n        pdf: v => $filter('date')(v, 'shortTime'), csv: v => $filter('date')(v, 'shortTime'),\n      },\n      {\n        dataKey: 'checkOutTime', _title: 'CHECK_IN_REPORT.COLUMNS.CHECK_OUT',\n        styles: { halign: 'right' },\n        pdf: v => $filter('date')(v, 'shortTime'), csv: v => $filter('date')(v, 'shortTime'),\n      },\n      {\n        dataKey: 'duration', _title: 'CHECK_IN_REPORT.COLUMNS.USAGE_HOURS',\n        styles: { halign: 'right' },\n        pdf: v => $filter('hoursMinutes')(v), csv: v => $filter('hoursMinutes')(v),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","/**\n * Totals Columns for Check In Report\n */\nexport default angular.module('deskworks.checkInReportTotalsColumns', [])\n\n  .factory('checkInReportTotalsColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      { dataKey: 'userName', _title: 'CHECK_IN_REPORT.COLUMNS.NAME' },\n      { dataKey: 'userCompany', _title: 'CHECK_IN_REPORT.COLUMNS.COMPANY' },\n      { dataKey: 'totalHoursTimeRange', _title: 'CHECK_IN_REPORT.COLUMNS.TOTAL_HOURS_TIME_RANGE', halign: 'right',\n        pdf: val => $filter('hoursMinutes')(val), csv: val => $filter('hoursMinutes')(val),\n      },\n      { dataKey: 'date', _title: 'CHECK_IN_REPORT.COLUMNS.DATE', halign: 'right',\n        pdf: val => $filter('date')(val, 'mediumDate'), csv: val => $filter('date')(val, 'shortDate'),\n      },\n      { dataKey: 'totalHoursDay', _title: 'CHECK_IN_REPORT.COLUMNS.TOTAL_HOURS_DAY', halign: 'right',\n        pdf: val => $filter('hoursMinutes')(val), csv: val => $filter('hoursMinutes')(val),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(function(col) { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport chartDirective from 'shared/charts/chart.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\nimport reportGroupBy from '../services/report-group-by.service';\n\nexport default angular.module('deskworks.CheckInReportCtrl', [\n  pdfPreview.name,\n  chartDirective.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportDates',\n  'deskworks.CheckInReport',\n  'deskworks.checkInReportColumns',\n  'deskworks.checkInReportTotalsColumns',\n  'deskworks.reports.checkInReportBarChart',\n  reportGroupBy.name,\n])\n\n  .controller('CheckInReportCtrl', function($scope, $location, $timeout, $translate, $filter, state,\n                                            reportStyles, ReportBuilder, reportHelper, CheckInReport, checkInReportBarChart,\n                                            checkInReportColumns, checkInReportTotalsColumns, reportGroupBy) {\n\n    const $ctrl = this;\n\n    $ctrl.config = {\n      reportName: $translate.instant('CHECK_IN_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      orderBy: 'checkInTime',\n      reportColumns: { columns: checkInReportColumns },\n      reportDates: { fromDate: moment(), toDate: moment() },\n      getReportData: () => {\n        return CheckInReport.query({\n          centerId: $ctrl.config.reportOptions.centerId,\n          fromDate: $filter('date')($ctrl.config.reportDates.fromDate, 'yyyy-MM-dd'),\n          toDate: $filter('date')($ctrl.config.reportDates.toDate, 'yyyy-MM-dd'),\n        });\n      },\n    };\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    $ctrl.config.reportDates.fromDate.date(1);\n\n    /**\n     * Map orderBy to URL search param\n     */\n    if ($ctrl.config.orderBy !== false) {\n      $scope.$watch(() => $location.search().orderBy, val => { $ctrl.config.orderBy = val || 'checkInTime'; });\n      $scope.$watch('$ctrl.config.orderBy', val => { $location.search('orderBy', val).replace(); });\n    }\n\n    $ctrl.reportBuilder = new ReportBuilder($ctrl.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    let debounceTimeout;\n    $scope.$watch(() => {\n      return { reportOptions: $ctrl.config.reportOptions, reportDates: $ctrl.config.reportDates, orderBy: $ctrl.config.orderBy };\n    }, (newVal, oldVal) => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(() => {\n        $ctrl.pdf = null;\n\n        if (!$ctrl.config.reportDates.fromDate || !$ctrl.config.reportDates.toDate) return;\n\n        let newDate = newVal.reportDates.fromDate, oldDate = oldVal.reportDates.fromDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) $ctrl.config.reportData = null;\n\n        newDate = newVal.reportDates.toDate; oldDate = oldVal.reportDates.toDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) $ctrl.config.reportData = null;\n\n        const doc = new jsPDF($ctrl.config.reportOptions.paperLayout, 'pt', $ctrl.config.reportOptions.paperSize);\n\n        $ctrl.reportBuilder.generatePdf(reportDataCallback) // generate 1st part\n          .then(doc => {\n            const styles = angular.copy(reportStyles);\n            styles.startY = doc.previousAutoTable.finalY + 40;\n            styles.tableMargin = reportStyles.pageMargins.slice();\n            styles.tableMargin[3] = 340; // limit 2nd table width\n            $ctrl.reportBuilder.generatePdf(totalsDataCallback, styles, doc) // generate 2nd part\n              .then(doc => {\n                $ctrl.pdf = doc.output('blob');\n              })\n              .then(() => {\n                $ctrl.bar = getBarChartData($ctrl.config);\n              });\n          });\n      }, 100);\n    }, true);\n\n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = () => {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.pdf, fileName: $ctrl.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    $ctrl.downloadCsv = () => {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.reportBuilder.buildCsv(reportDataCallback), fileName: $ctrl.reportBuilder.getReportFileName('csv', '-main') });\n      reportHelper.download({ blob: $ctrl.reportBuilder.buildCsv(totalsDataCallback), fileName: $ctrl.reportBuilder.getReportFileName('csv', '-totals') });\n    };\n\n    /**\n     * Report data callback\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: checkInReportColumns,\n        rows: [],\n        styles: [],\n      };\n\n      const groups = reportGroupBy(config.reportData, config.orderBy);\n      const arr = Array.apply(null, new Array(result.columns.length)).map(() => false);\n      groups.forEach(group => {\n        let total = 0;\n        group.forEach((item, idx) => {\n          result.rows.push(result.columns.map(col => item[col.dataKey]));\n          result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n          total += item.duration;\n        });\n        result.rows.push(arr.slice(0, result.columns.length - 2).concat([$translate.instant('CHECK_IN_REPORT.COLUMNS.SUBTOTAL') + ':', total]));\n        result.styles.push(reportStyles.h2);\n      });\n\n      return result;\n    }\n\n    /**\n     * Totals data callback\n     */\n    function totalsDataCallback(config) {\n      const colsFilter = {\n        userName: ['userName', 'totalHoursTimeRange'],\n        userCompany: ['userCompany', 'totalHoursTimeRange'],\n        checkInTime: ['date', 'totalHoursDay'],\n      };\n      const result = {\n        columns: checkInReportTotalsColumns.filter(col => colsFilter[config.orderBy].indexOf(col.dataKey) >= 0),\n        rows: [],\n        styles: [],\n      };\n\n      const groups = reportGroupBy(config.reportData, config.orderBy);\n      groups.forEach((group, idx) => {\n        const total = group.reduce((total, item) => total + item.duration, 0);\n        result.rows.push([group[0][config.orderBy], total]);\n        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n      });\n\n      return result;\n    }\n\n    /**\n     * Create chart\n     */\n    function getBarChartData(config) {\n      const groups = reportGroupBy(config.reportData, config.orderBy);\n      const chartData = groups.map(group => {\n        const total = group.reduce((total, item) => total + item.duration, 0);\n        return {\n          name: config.orderBy === 'checkInTime' ? $filter('date')(group[0][config.orderBy]) : group[0][config.orderBy],\n          value: total, // ms\n        };\n      });\n\n      return checkInReportBarChart.getChartConfig(chartData, config.orderBy);\n    }\n  });\n","/**\n * CheckInReport service\n */\nexport default angular.module('deskworks.CheckInReport', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config',\n])\n\n  .factory('CheckInReport', function($resource, datesDeserializer, deskworksConfig) {\n    const desDates = datesDeserializer(['checkInTime', 'checkOutTime']);\n    const url = deskworksConfig.getApiAbsUrl('/check-in-report');\n\n    const res = $resource(url, { centerId: '@centerId', fromDate: '@fromDate', toDate: '@toDate' }, {\n      query: { method: 'GET', isArray: true, transformResponse: [angular.fromJson, desDates] }\n    });\n\n    return {\n      query: params => res.query(params).$promise\n        .then(result => {\n          result.forEach(item => {\n            item.duration = item.checkOutTime.diff(item.checkInTime);\n          });\n          return result;\n        }),\n    };\n\n  });\n","// Module\nvar code = \"<div id=\\\"checkInReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formCheckInReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <report-dates model=\\\"$ctrl.config.reportDates\\\"></report-dates> </div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-options model=\\\"$ctrl.config.reportOptions\\\"> <ff-row> <ff-label flex=\\\"0 0 100px\\\"><span translate=\\\"CHECK_IN_REPORT.ORDER_BY\\\"></span></ff-label> <ff-static> <div class=\\\"ff-grid gutter-h-half\\\"> <label flex=\\\"none\\\"> <ff-radio ff-model=\\\"$ctrl.config.orderBy\\\" ff-value=\\\"'userName'\\\"> <span translate=\\\"CHECK_IN_REPORT.ORDER_BY.NAME\\\"></span> </ff-radio> </label> <label flex=\\\"none\\\"> <ff-radio ff-model=\\\"$ctrl.config.orderBy\\\" ff-value=\\\"'userCompany'\\\"> <span translate=\\\"CHECK_IN_REPORT.ORDER_BY.COMPANY\\\"></span> </ff-radio> </label> <label flex=\\\"none\\\"> <ff-radio ff-model=\\\"$ctrl.config.orderBy\\\" ff-value=\\\"'checkInTime'\\\"> <span translate=\\\"CHECK_IN_REPORT.ORDER_BY.DATE\\\"></span> </ff-radio> </label> </div> </ff-static> </ff-row> </report-options> </div> </div> <ff-panel flex=\\\"auto\\\"> <ff-panel-header> <span ng-if=\\\"$ctrl.config.orderBy === 'checkInTime'\\\" translate=\\\"CHECK_IN_REPORT.BAR_CHART.USAGE_PER_DAY\\\"></span> <span ng-if=\\\"$ctrl.config.orderBy === 'userName'\\\" translate=\\\"CHECK_IN_REPORT.BAR_CHART.USAGE_BY_MEMBER\\\"></span> <span ng-if=\\\"$ctrl.config.orderBy === 'userCompany'\\\" translate=\\\"CHECK_IN_REPORT.BAR_CHART.USAGE_BY_COMPANY\\\"></span> </ff-panel-header> <div ff-dim=\\\"!$ctrl.pdf\\\" ng-init=\\\"$c = $ctrl\\\"> <chart chart-type=\\\"{{$ctrl.bar.type}}\\\" chart-labels=\\\"$ctrl.bar.labels\\\" chart-data=\\\"$ctrl.bar.data\\\" chart-options=\\\"$ctrl.bar.options\\\" ng-style=\\\"{ 'max-height': $c.config.orderBy === 'checkInTime' ? null : 'none', 'height': $c.config.orderBy === 'checkInTime' ? null : $c.bar.labels.length * 25 + 'px' }\\\"></chart> </div> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </div> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Credit Balance Report\n */\nexport default angular.module('deskworks.reports.creditBalanceReportColumns', [])\n  .factory('creditBalanceReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'centerName', _title: 'CREDIT_BALANCE_REPORT.COLUMNS.CENTER', include: true\n      },\n      {\n        dataKey: 'userName', _title: 'CREDIT_BALANCE_REPORT.COLUMNS.USER_NAME', include: true\n      },\n      {\n        dataKey: 'date', _title: 'CREDIT_BALANCE_REPORT.COLUMNS.DATE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'order', _title: 'CREDIT_BALANCE_REPORT.COLUMNS.ORDER_ID', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n      },\n      {\n        dataKey: 'amount', _title: 'CREDIT_BALANCE_REPORT.COLUMNS.BALANCE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      }\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.reports.creditBalanceReport', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportDates',\n  'deskworks.reports.reportOwnerRegion',\n  'deskworks.reports.creditBalanceReport.service',\n  'deskworks.reports.creditBalanceReportColumns'\n])\n  .controller('CreditBalanceReportCtrl', function($scope, $timeout, $filter, $translate, $location, state, helper,\n                                                  reportStyles, ReportBuilder, reportHelper, CreditBalanceReport,\n                                                  creditBalanceReportColumns) {\n    const vm = this;\n\n    vm.config = {\n      reportName: $translate.instant('CREDIT_BALANCE_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportOwnerRegion: {},\n      reportColumns: { columns: creditBalanceReportColumns },\n      toDate: moment(),\n      getReportData: function() {\n        return CreditBalanceReport.get({\n          centerId: vm.config.reportOptions.centerId,\n          ownerId: vm.config.reportOwnerRegion.ownerId,\n          regionId: vm.config.reportOwnerRegion.regionId,\n          toDate: $filter('date')(vm.config.toDate, 'yyyy-MM-dd'),\n        }).$promise;\n      },\n    };\n\n    state.setPageTitle(vm.config.reportName);\n\n    vm.reportBuilder = new ReportBuilder(vm.config);\n    vm.getToday = () => moment();\n\n    watchToDate();\n\n    /**\n     * Watch for report options, generate new report (or rebuild old) on changes, watch for 'toDate' url param\n     */\n    let debounceTimeout;\n    $scope.$watch(_ => ({ reportOptions: vm.config.reportOptions, reportOwnerRegion: vm.config.reportOwnerRegion, toDate: vm.config.toDate }), (newVal, oldVal) => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(function() {\n        if (moment.isMoment(newVal.toDate) && newVal.toDate.isAfter(moment(), 'day')) return;\n\n        vm.pdf = null;\n        if (angular.isUndefined(vm.config.reportOptions.centerId)) return;\n\n        let newDate = newVal.toDate, oldDate = oldVal.toDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;\n\n        vm.reportBuilder.buildPdf(reportDataCallback).then(function(blob) { vm.pdf = blob; });\n      }, 100);\n    }, true);\n    \n    /**\n     * Download generated PDF report\n     */\n    vm.downloadPdf = function() {\n      if (!vm.pdf) { return; }\n      reportHelper.download({ blob: vm.pdf, fileName: vm.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n    * Generate and download CSV report\n    */\n    vm.downloadCsv = function() {\n      if (!vm.pdf) { return; }\n      reportHelper.download({ blob: vm.reportBuilder.buildCsv(reportDataCallback), fileName: vm.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns.columns,\n        rows: [],\n        styles: [],\n      };\n\n      // Finally, convert to matrix\n      result.rows = config.reportData.credits.map((credit, idx) => {\n        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        return result.columns.map(col => credit[col.dataKey]);\n      });\n\n      result.rows.push([false, false, false, false, false]);\n      result.styles.push(null);\n      result.rows.push([false, false, false, $translate.instant('CREDIT_BALANCE_REPORT.TOTALS.CREDIT') + ':', config.reportData.total]);\n      result.styles.push(reportStyles.h3);\n\n      return result;\n    }\n\n    /**\n     * Map toDate to URL search param\n     */\n    function watchToDate() {\n      $scope.$watch(() => $location.search().toDate, val => {\n        const date = $filter('toDate')(val);\n        vm.config.toDate = moment.isMoment(date) && !vm.config.toDate.isSame(date) ? date : vm.config.toDate;\n      });\n      $scope.$watch('vm.config.toDate', val => {\n        if (!moment.isMoment(val)) return;\n        $location.search('toDate', $filter('date')(val, 'yyyy-MM-dd')).replace();\n      });\n    }\n  });\n","/**\n * CreditBalanceReport service\n */\nexport default angular.module('deskworks.reports.creditBalanceReport.service', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config'\n])\n\n  .factory('CreditBalanceReport', function($resource, datesDeserializer, deskworksConfig) {\n    const desDates = datesDeserializer(['credits.date']);\n    const url = deskworksConfig.getApiAbsUrl('/reports/credit-balance');\n\n    return $resource(url, { centerId: '@centerId' }, {\n      get: { method: 'GET', transformResponse: [angular.fromJson, desDates] }\n    });\n  });\n","// Module\nvar code = \"<div id=\\\"creditBalanceReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formCreditBalanceReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\" style=\\\"margin-left:auto\\\"> <div class=\\\"gutter-v\\\"> <report-options model=\\\"vm.config.reportOptions\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\" ff-required=\\\"true\\\"><span translate=\\\"REPORTS.PERIOD.TO_DATE\\\"></span></ff-label> <ff-date flex=\\\"0 0 124px\\\" name=\\\"toDate\\\" ff-model=\\\"vm.config.toDate\\\" ff-date-order=\\\"{ early: vm.config.toDate, late: vm.getToday() }\\\" ff-validate-alert=\\\"{ field: 'Selected date', late: 'or equal to today' }\\\"></ff-date> <span class=\\\"ff-label\\\"></span> </label> </report-options> <report-owner-region model=\\\"vm.config.reportOwnerRegion\\\" report-data=\\\"vm.config.reportData\\\"></report-owner-region> </div> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadPdf()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadCsv()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"vm.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Deposit And Tax Report\n */\nexport default angular.module('deskworks.depositAndTaxReportColumns', [])\n  .factory('depositAndTaxReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'userName', _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.NAME', include: true, defaultOrder: true,\n      },\n      {\n        dataKey: 'userCompany', _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.COMPANY', include: true,\n      },\n      {\n        dataKey: 'orderId', _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.ORDER_ID', include: true,\n        styles: { halign: 'right' },\n      },\n      {\n        dataKey: 'productName', _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.ITEM', include: true,\n      },\n      {\n        dataKey: 'productCode', _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.ITEM_CODE', include: true,\n        styles: { halign: 'right' },\n      },\n      {\n        dataKey: 'amountTaxable', _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.TAXABLE_AMOUNT', include: true,\n        styles: { halign: 'right' },\n        pdf: val => $filter('ncurrency')(val), csv: val => $filter('ncurrency')(val)\n      },\n      {\n        dataKey: 'amountNonTaxable', _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.NON_TAXABLE_AMOUNT', include: true,\n        styles: { halign: 'right' },\n        pdf: val => $filter('ncurrency')(val), csv: val => $filter('ncurrency')(val)\n      },\n      {\n        dataKey: 'subtotal', _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.SUBTOTAL', include: true,\n        styles: { halign: 'right', cellWidth: 'wrap' },\n        pdf: val => $filter('ncurrency')(val), csv: val => $filter('ncurrency')(val)\n      },\n      {\n        dataKey: 'tax', _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.TAX', include: true,\n        styles: { halign: 'right', cellWidth: 'wrap' },\n        pdf: val => $filter('ncurrency')(val), csv: val => $filter('ncurrency')(val)\n      },\n      {\n        dataKey: 'total', _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.TOTAL', include: true,\n        styles: { halign: 'right', cellWidth: 'wrap' },\n        pdf: val => $filter('ncurrency')(val), csv: val => $filter('ncurrency')(val)\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.DepositAndTaxReportCtrl', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.reportDates',\n  'deskworks.reports.reportColumns',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reportOrderBy',\n  'deskworks.DepositAndTaxReport',\n  'deskworks.depositAndTaxReportColumns',\n])\n\n  .controller('DepositAndTaxReportCtrl', function($scope, $timeout, $translate, $filter, state, reportHelper,\n                                             ReportBuilder, reportStyles, DepositAndTaxReport, depositAndTaxReportColumns) {\n\n    const $ctrl = this;\n\n    $ctrl.config = {\n      reportName: $translate.instant('DEPOSIT_AND_TAX_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportColumns: angular.copy(depositAndTaxReportColumns),\n      reportDates: { fromDate: moment(), toDate: moment() },\n      getReportData: () => DepositAndTaxReport.get({\n        centerId: $ctrl.config.reportOptions.centerId || null,\n        fromDate: $filter('date')($ctrl.config.reportDates.fromDate, 'yyyy-MM-dd'),\n        toDate: $filter('date')($ctrl.config.reportDates.toDate, 'yyyy-MM-dd'),\n      }),\n    };\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    $ctrl.config.reportDates.fromDate.subtract(1, 'M').date(1); // set fromDate to first day of previous month\n    $ctrl.config.reportDates.toDate.date(0); // set toDate to last day of previous month\n\n    $ctrl.reportBuilder = new ReportBuilder($ctrl.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    let debounceTimeout;\n    $scope.$watch(() => ({ reportOptions: $ctrl.config.reportOptions, reportDates: $ctrl.config.reportDates, orderBy: $ctrl.config.orderBy }), (newVal, oldVal) => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(() => {\n        $ctrl.pdf = null;\n\n        let newDate = newVal.reportDates.fromDate, oldDate = oldVal.reportDates.fromDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) $ctrl.config.reportData = null;\n\n        newDate = newVal.reportDates.toDate; oldDate = oldVal.reportDates.toDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) $ctrl.config.reportData = null;\n\n        $ctrl.reportBuilder.buildPdf(reportDataCallback).then(blob => { $ctrl.pdf = blob; });\n      }, 100);\n    }, true);\n\n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = () => {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.pdf, fileName: $ctrl.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    $ctrl.downloadCsv = () => {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.reportBuilder.buildCsv(reportDataCallback), fileName: $ctrl.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback\n     */\n    function reportDataCallback(config) {\n      const ncurrency = $filter('ncurrency');\n\n      const result = {\n        columns: config.reportColumns.filter(item => item.include),\n        rows: [],\n        styles: [],\n      };\n\n      const amountTaxableIndex = result.columns.findIndex(col => col.dataKey === 'amountTaxable');\n\n      config.reportData.daily.forEach(day => {\n        result.rows.push([ // daily total\n          { content: $filter('date')(day.date, 'mediumDate'), colSpan: amountTaxableIndex },\n          { content: $translate.instant(`DEPOSIT_AND_TAX_REPORT.TOTAL_DAILY`) + ':', colSpan: result.columns.length - amountTaxableIndex - 1 },\n          { content: ncurrency(day.total) },\n        ]);\n        result.styles.push(reportStyles.h1);\n\n        day.billingMethods.forEach(method => {\n          result.rows.push([ // billing method total\n            { content: method.name, colSpan: amountTaxableIndex },\n            { content: $translate.instant(`DEPOSIT_AND_TAX_REPORT.TOTAL_PAYMENT_METHOD`) + ':', colSpan: result.columns.length - amountTaxableIndex - 1 },\n            { content: ncurrency(method.total) },\n          ]);\n          result.styles.push(reportStyles.h2);\n\n          method.orders.forEach(order => {\n            result.rows.push(result.columns.map(col => angular.isDefined(order[col.dataKey]) ? order[col.dataKey] : false));\n            result.styles.push(reportStyles.h3);\n\n            order.items.forEach((item, idx) => {\n              result.rows.push(result.columns.map(col => angular.isDefined(item[col.dataKey]) ? item[col.dataKey] : false));\n              result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n            });\n          });\n        });\n      });\n\n      // Add empty row\n      result.rows.push(Array(result.columns.length).fill(false));\n      result.styles.push(null);\n\n      // Add total rows\n      const totalRowKeys = [\n        { name: 'TOTAL_TAXABLE_AMOUNT', data: 'totalTaxableAmount' },\n        { name: 'TOTAL_NON_TAXABLE_AMOUNT', data: 'totalNonTaxableAmount' },\n        { name: 'TOTAL_CHARGES', data: 'totalCharges' },\n        { name: 'TOTAL_TAX', data: 'totalTax' },\n        { name: 'GRAND_TOTAL', data: 'grandTotal' },\n        { name: 'TOTAL_MEMBERSHIP', data: 'membership' },\n        { name: 'TOTAL_REGISTRATION', data: 'registration' },\n        { name: 'TOTAL_RENTAL', data: 'rental' },\n        { name: 'TOTAL_PRINT', data: 'print' },\n        { name: 'TOTAL_SERVICES', data: 'services' },\n      ];\n\n      totalRowKeys.forEach((key, idx) => {\n        result.rows.push([\n          {\n            content: $translate.instant(`DEPOSIT_AND_TAX_REPORT.${key.name}`) + ':',\n            colSpan: result.columns.length - 1, styles: { halign: 'right' },\n          },\n          {\n            content: ncurrency((idx < 5 ? config.reportData[key.data] : config.reportData.totalsByProductType[key.data] || 0)),\n          }\n        ]);\n        result.styles.push(reportStyles.h3);\n      });\n\n      return result;\n    }\n  });\n","/**\n * DepositAndTaxReport service\n */\nexport default angular.module('deskworks.DepositAndTaxReport', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config',\n])\n\n  .factory('DepositAndTaxReport', function($resource, datesDeserializer, deskworksConfig) {\n    const desDates = datesDeserializer('daily.date');\n    const url = deskworksConfig.getApiAbsUrl('/reports/deposit-and-tax');\n\n    const res = $resource(url, { centerId: '@centerId', fromDate: '@fromDate', toDate: '@toDate' }, {\n      get: { method: 'GET', isArray: false, transformResponse: [angular.fromJson, desDates] },\n    });\n\n    return {\n      get: params => res.get(params).$promise\n      // TODO: remove after fixing API\n        .then(data => (data.totalsByProductType = data.totalsByProductType || data.totalsTyProductType, data)),\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"depositAndTaxReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formDepositAndTaxReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-dates model=\\\"$ctrl.config.reportDates\\\"></report-dates> </div> </div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <report-options model=\\\"$ctrl.config.reportOptions\\\"> </report-options> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Deposit Transaction Report\n */\nexport default angular.module('deskworks.reports.depositTransactionReportColumns', ['deskworks.helper'])\n\n  .factory('depositTransactionReportColumns', function($rootScope, $filter, $translate, helper) {\n    const cols = [\n      {\n        dataKey: 'reference', _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.REFERENCE', include: true,\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'userName', _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.USER_NAME', include: true, defaultOrder: true,\n      },\n      {\n        dataKey: 'payorName', _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.PAYOR', include: true,\n      },\n      {\n        dataKey: 'userCompany', _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.COMPANY', include: true,\n      },\n      {\n        dataKey: 'amount', _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.AMOUNT', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'subtotal', _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.SUBTOTAL', include: true, readonly: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'total', _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.TOTAL', include: true, readonly: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'orderId', _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.ORDER_ID', include: false,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n      }\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.reports.depositTransactionReport', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportDates',\n  'deskworks.reports.reportOwnerRegion',\n  'deskworks.reports.depositTransactionReport.service',\n  'deskworks.reports.depositTransactionReportColumns'\n])\n  .controller('DepositTransactionReportCtrl', function($scope, $timeout, $filter, $translate, state, helper,\n                                                       reportStyles, ReportBuilder, reportHelper, DepositTransactionReport,\n                                                       depositTransactionReportColumns, banks, centers) {\n    const vm = this;\n\n    vm.config = {\n      reportName: $translate.instant('DEPOSIT_TRANSACTION_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportOwnerRegion: {},\n      reportColumns: { columns: depositTransactionReportColumns },\n      reportDates: { fromDate: moment(), toDate: moment() },\n      getReportData: function() {\n        return DepositTransactionReport.query({\n          bankId: vm.config.reportOptions.bankId,\n          centerId: vm.config.reportOptions.centerId || null,\n          fromDate: $filter('date')(vm.config.reportDates.fromDate, 'yyyy-MM-dd'),\n          toDate: $filter('date')(vm.config.reportDates.toDate, 'yyyy-MM-dd'),\n          ownerId: vm.config.reportOwnerRegion.ownerId,\n          regionId: vm.config.reportOwnerRegion.regionId,\n        }).$promise;\n      },\n    };\n\n    state.setPageTitle(vm.config.reportName);\n\n    vm.config.reportDates.fromDate.subtract(1, 'M').date(1); // set fromDate to first day of previous month\n    vm.config.reportDates.toDate.date(0); // set toDate to last day of previous month\n\n    vm.reportBuilder = new ReportBuilder(vm.config);\n\n    /**\n     * Filter centers list depending on bankId\n     */\n    $scope.$watch('vm.config.reportOptions.bankId', function(bankId) {\n      if(!bankId) return;\n      vm.centers = centers.filter(function(center) { return center.bankId === bankId; });\n      vm.centers.unshift({ id: 0, name: 'All Centers' });\n      if(!helper.findByKeyValue(vm.centers, 'id', vm.config.reportOptions.centerId)) {\n        vm.config.reportOptions.centerId = vm.centers[0].id;\n        state.setParam('centerId', vm.config.reportOptions.centerId);\n        state.replace();\n      }\n    });\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    var debounceTimeout;\n    $scope.$watch(function() {\n        return {\n          reportOptions: vm.config.reportOptions,\n          reportDates: vm.config.reportDates,\n          reportColumns: vm.config.reportColumns,\n          reportOwnerRegion: vm.config.reportOwnerRegion,\n          orderBy: vm.config.orderBy,\n        };\n      }, function(newVal, oldVal) {\n      if(debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(function() {\n        vm.pdf = null;\n        if(angular.isUndefined(vm.config.reportOptions.bankId)) return;\n\n        var newDate = newVal.reportDates.fromDate, oldDate = oldVal.reportDates.fromDate;\n        if(moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;\n        newDate = newVal.reportDates.toDate; oldDate = oldVal.reportDates.toDate;\n        if(moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;\n\n        if(newVal.reportOptions.bankId !== oldVal.reportOptions.bankId) vm.config.reportData = null;\n\n        vm.reportBuilder.buildPdf(reportDataCallback).then(function(blob) { vm.pdf = blob; });\n      }, 100);\n    }, true);\n    \n    /**\n     * Download generated PDF report\n     */\n    vm.downloadPdf = function() {\n      if (!vm.pdf) { return; }\n      reportHelper.download({ blob: vm.pdf, fileName: vm.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n    * Generate and download CSV report\n    */\n    vm.downloadCsv = function() {\n      if (!vm.pdf) { return; }\n      reportHelper.download({ blob: vm.reportBuilder.buildCsv(reportDataCallback), fileName: vm.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns.columns.filter(c => c.include),\n        rows: [],\n        styles: [],\n      };\n\n      let idx, arr = Array.apply(null, new Array(result.columns.length)).map(_ => false);\n\n      config.reportData.forEach((dateTotal, index) => {\n        idx = result.columns.findIndex(c => c.dataKey === 'total');\n        if (idx >= 0) {\n          result.rows.push([dateTotal.date]\n            .concat(arr.slice(0, Math.max(idx - 2, 0)))\n            .concat(idx > 1 ? [$translate.instant('DEPOSIT_TRANSACTION_REPORT.TOTALS.DAILY') + ':', dateTotal.total] : [dateTotal.total])\n            .concat(arr.slice(0, arr.length - idx - 1))\n          );\n          result.styles.push(reportStyles.h1);\n        }\n\n        dateTotal.billingMethods.forEach(billingMethod => {\n          idx = result.columns.findIndex(c => c.dataKey === 'subtotal');\n          if (idx >= 0) {\n            result.rows.push(idx === 0 ? [billingMethod.subtotal] : [billingMethod.name + ' ' + $translate.instant('DEPOSIT_TRANSACTION_REPORT.TOTALS.DEPOSITS')]\n              .concat(arr.slice(0, Math.max(idx - 3, 0)))\n              .concat(idx > 2 ? [billingMethod.name + ' ' + $translate.instant('DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL') + ':', false, billingMethod.subtotal] : (idx === 2 ? [billingMethod.name + ' ' + $translate.instant('DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL') + ':', billingMethod.subtotal] : (idx === 1 ? [billingMethod.subtotal] : [])))\n              .concat(arr.slice(0, arr.length - idx - 1))\n            );\n            result.styles.push(reportStyles.h2);\n          }\n\n          const payments = vm.reportBuilder.sortData([].concat.apply([], billingMethod.centers.map(center => center.payments)), config.orderBy);\n\n          payments.forEach((payment, idx) => {\n            result.rows.push(result.columns.map(col => col.dataKey === 'subtotal' || col.dataKey === 'total' ? false : payment[col.dataKey]));\n            result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n          });\n\n          billingMethod.centers.forEach(center => {\n            idx = result.columns.findIndex(c => c.dataKey === 'subtotal');\n            if (idx >= 0) {\n              result.rows.push(arr.slice(0, Math.max(idx - 2, 0))\n                  .concat(idx > 2 ? [center.name + ' ' + $translate.instant('DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL') + ':', false, center.subtotal] : (idx > 0 ? [center.name + ' ' + $translate.instant('DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL') + ':', center.subtotal] : [center.subtotal]))\n                  .concat(arr.slice(0, arr.length - idx - 1))\n              );\n            }\n            result.styles.push(reportStyles.h3);\n          });\n\n          result.rows.push(arr.slice());\n          result.styles.push(null);\n        });\n      });\n\n      return result;\n    }\n  });\n","/**\n * DepositTransactionReport service\n */\nexport default angular.module('deskworks.reports.depositTransactionReport.service', [\n  'ngResource',\n  'deserializeNumbers',\n  'datesDeserializer',\n  'deskworks.config'\n])\n  .factory('DepositTransactionReport', function($resource, datesDeserializer, deserializeNumbers, deskworksConfig) {\n    const url = deskworksConfig.getApiAbsUrl('/banks/:bankId/deposit-transaction-reports');\n    const desDates = datesDeserializer(['date', 'billingMethods.centers.payments.date']);\n    const numbersDeserializer = deserializeNumbers(['billingMethods.centers.payments.amount']);\n\n    return $resource(url, { bankId: '@bankId', centerId: '@centerId', fromDate: '@fromDate', toDate: '@toDate' }, {\n      query: { method: 'GET', isArray: true, transformResponse: [angular.fromJson, desDates, numbersDeserializer] }\n    });\n  });\n","// Module\nvar code = \"<div id=\\\"depositTransactionReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formDepositTransactionReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-dates model=\\\"vm.config.reportDates\\\"></report-dates> <report-columns model=\\\"vm.config.reportColumns\\\"></report-columns> </div> </div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-options model=\\\"vm.config.reportOptions\\\" banks=\\\"$resolve.banks\\\" centers=\\\"vm.centers\\\"> <report-order-by model=\\\"vm.config.orderBy\\\" report-columns=\\\"vm.config.reportColumns.columns\\\"></report-order-by> </report-options> <report-owner-region model=\\\"vm.config.reportOwnerRegion\\\" report-data=\\\"vm.config.reportData\\\"></report-owner-region> </div> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadPdf()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadCsv()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"vm.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * reportColumns directive - wraps report columns including and sorting\n */\nexport default angular.module('deskworks.reports.reportColumns', [\n  'deskworks.helper'\n])\n\n  .directive('reportColumns', function($compile, $templateCache) {\n    const templateUrl = 'directives/report-columns.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      transclude: 'element',\n      priority: 2, // To be higher than ngModel directive with priority: 1\n      controller: 'ReportColumnsCtrl as $ctrl',\n      bindToController: {\n        model: '<',\n      },\n\n      link: function($scope, $element, $attrs, $ctrl, $transclude) {\n        $transclude(() => { $element.after($compile($templateCache.get(templateUrl))($scope)); });\n      },\n    };\n  })\n\n  .controller('ReportColumnsCtrl', function($scope, $location, helper) {\n    const $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = function() {\n      watchColumns();\n    };\n\n    /**\n     * Map columns to URL search param\n     */\n    function watchColumns() {\n      $scope.$watch(() => $location.search().columns, val => {\n        if (val) {\n          $ctrl.model.columns.forEach(col => { col.include = false; });\n          val.split(',').forEach(colId => {\n            (helper.findByKeyValue($ctrl.model.columns, 'dataKey', colId) || {}).include = true;\n          });\n        }\n      });\n      $scope.$watchCollection(() => $ctrl.model.columns.map(col => !!col.include), function() {\n\n        // Calculate left column items count\n        $ctrl.leftColCount = $ctrl.rightColCount = Math.floor($ctrl.model.columns.length / 2);\n        if ($ctrl.leftColCount + $ctrl.rightColCount < $ctrl.model.columns.length) {\n          $ctrl.leftColCount++;\n        }\n\n        const columns = $ctrl.model.columns\n          .filter(col => col.include)\n          .map(col => col.dataKey)\n          .join(',');\n        $location.search('columns', columns).replace();\n      });\n    }\n  });\n","// Module\nvar code = \"<ff-panel> <ff-panel-header><span translate=\\\"REPORTS.COLUMNS.HEADER\\\"></span></ff-panel-header> <div class=\\\"ff-grid\\\"> <ff-header flex=\\\"{lg: '0 0 50%'}\\\"> <ff-row> <cell flex=\\\"0 0 32px\\\" class=\\\"ff-center\\\" title=\\\"{{'GLOBAL.INCLUDE' | translate}}\\\"> <ff-icon sense=\\\"check\\\"></ff-icon> </cell> <cell translate=\\\"REPORTS.COLUMNS.COLUMN\\\"></cell> </ff-row> </ff-header> <ff-header flex=\\\"{lg: '0 0 50%'}\\\" class=\\\"show-lg\\\"> <ff-row> <cell flex=\\\"0 0 32px\\\" class=\\\"ff-center\\\" title=\\\"{{'GLOBAL.INCLUDE' | translate}}\\\"> <ff-icon sense=\\\"check\\\"></ff-icon> </cell> <cell translate=\\\"REPORTS.COLUMNS.COLUMN\\\"></cell> </ff-row> </ff-header> </div> <div class=\\\"ff-grid\\\"> <ff-col flex=\\\"{lg: '0 0 50%'}\\\"> <ff-row ng-repeat=\\\"column in $ctrl.model.columns | limitTo: $ctrl.leftColCount\\\"> <ff-checkbox class=\\\"ff-center ff-control\\\" flex=\\\"0 0 32px\\\" ff-model=\\\"column.include\\\" ff-disabled=\\\"column.readonly\\\"></ff-checkbox> <ff-static ff-bind=\\\"column.title\\\"></ff-static> </ff-row> </ff-col> <ff-col flex=\\\"{lg: '0 0 50%'}\\\"> <ff-row ng-repeat=\\\"column in $ctrl.model.columns | limitTo: $ctrl.rightColCount : $ctrl.leftColCount\\\"> <ff-checkbox class=\\\"ff-center ff-control\\\" flex=\\\"0 0 32px\\\" ff-model=\\\"column.include\\\" ff-disabled=\\\"column.readonly\\\"></ff-checkbox> <ff-static ff-bind=\\\"column.title\\\"></ff-static> </ff-row> </ff-col> </div> </ff-panel> \";\n// Exports\nmodule.exports = code;","/**\n * reportDates directive - wraps report 'From Date' and 'To Date'\n */\nexport default angular.module('deskworks.reports.reportDates', [\n  'deskworks.helper'\n])\n\n  .directive('reportDates', function($compile, $templateCache) {\n    var templateUrl = 'directives/report-dates.tpl.html';\n\n    return {\n      restrict: 'EAC',\n      scope: true,\n      transclude: 'element',\n      priority: 2, // To be higher than ngModel directive with priority: 1\n      controller: 'ReportDatesCtrl as $ctrl',\n      bindToController: {\n        model: '<',\n        embed: '@', // if presents, flexForm and ffTwoColumns wrapping is disabled and attribute flex={{embed}}\n      },\n\n      link: function($scope, $element, $attrs, $ctrl, $transclude) {\n        $transclude(function(clone, newScope) {\n          var tpl = $compile($templateCache.get(templateUrl))($scope);\n          angular.element(tpl[0].querySelector ? tpl[0].querySelector('.ff-panel-body') : tpl).append(clone); // append custom content before compilation\n          $element.after(tpl);\n        });\n      },\n    };\n  })\n\n  .controller('ReportDatesCtrl', function($scope, $location, $filter, state, helper) {\n    var $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = function() {\n      if($ctrl.model.fromDate !== false) watchFromDate();\n      if($ctrl.model.toDate !== false) watchToDate();\n    };\n\n    /**\n     * Map fromDate to URL search param\n     */\n    function watchFromDate() {\n      $scope.$watch(function() { return $location.search().fromDate; }, function(val) {\n        var date = $filter('toDate')(val);\n        $ctrl.model.fromDate = moment.isMoment(date) && !$ctrl.model.fromDate.isSame(date) ? date : $ctrl.model.fromDate;\n      });\n      $scope.$watch('$ctrl.model.fromDate', function(val) {\n        if(!moment.isMoment(val)) return;\n        $location.search('fromDate', $filter('date')(val, 'yyyy-MM-dd')).replace();\n      });\n    }\n\n    /**\n     * Map toDate to URL search param\n     */\n    function watchToDate() {\n      $scope.$watch(function() { return $location.search().toDate; }, function(val) {\n        var date = $filter('toDate')(val);\n        $ctrl.model.toDate = moment.isMoment(date) && !$ctrl.model.toDate.isSame(date) ? date : $ctrl.model.toDate;\n      });\n      $scope.$watch('$ctrl.model.toDate', function(val) {\n        if(!moment.isMoment(val)) return;\n        $location.search('toDate', $filter('date')(val, 'yyyy-MM-dd')).replace();\n      });\n    }\n  });\n","// Module\nvar code = \"<ff-panel ng-hide=\\\"$ctrl.embed\\\"> <ff-panel-header><span translate=\\\"REPORTS.PERIOD.HEADER\\\"></span></ff-panel-header> <div class=\\\"ff-grid\\\"> <label class=\\\"ff-row\\\" flex=\\\"{lg: '0 0 50%'}\\\" ng-if=\\\"$ctrl.model.fromDate !== false\\\"> <ff-label flex=\\\"{lg: '0 0 90px', xs: '0 0 100px'}\\\" ff-required=\\\"true\\\"><span translate=\\\"REPORTS.PERIOD.FROM_DATE\\\"></span></ff-label> <ff-date flex=\\\"0 0 124px\\\" ff-model=\\\"$ctrl.model.fromDate\\\" ff-required=\\\"true\\\" ff-date-order=\\\"{ early: $ctrl.model.fromDate, late: $ctrl.model.toDate }\\\" ff-validate-alert=\\\"{ field: '{{'REPORTS.PERIOD.FROM_DATE' | translate}}', late: '{{'REPORTS.PERIOD.TO_DATE' | translate}}' }\\\"></ff-date> <span class=\\\"ff-label\\\"></span> </label> <label class=\\\"ff-row\\\" flex=\\\"{lg: $ctrl.model.fromDate === false ? 'auto' : '0 0 50%'}\\\"> <ff-label flex=\\\"{lg: '0 0 72px', xs: '0 0 100px'}\\\" ff-required=\\\"true\\\"><span translate=\\\"REPORTS.PERIOD.TO_DATE\\\"></span></ff-label> <ff-date flex=\\\"0 0 124px\\\" ff-model=\\\"$ctrl.model.toDate\\\" ff-required=\\\"true\\\" ff-date-order=\\\"{ early: $ctrl.model.fromDate, late: $ctrl.model.toDate }\\\" ff-validate-alert=\\\"{ field: '{{'REPORTS.PERIOD.TO_DATE' | translate}}', early: '{{'REPORTS.PERIOD.FROM_DATE' | translate}}' }\\\"></ff-date> <span class=\\\"ff-label\\\"></span> </label> </div> </ff-panel> <label class=\\\"ff-row\\\" ng-if=\\\"$ctrl.embed && $ctrl.model.fromDate !== false\\\"> <ff-label flex=\\\"{{$ctrl.embed}}\\\" ff-required=\\\"true\\\"><span translate=\\\"REPORTS.PERIOD.FROM_DATE\\\"></span></ff-label> <ff-date flex=\\\"0 0 124px\\\" ff-model=\\\"$ctrl.model.fromDate\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'REPORTS.PERIOD.FROM_DATE' | translate}}\\\"></ff-date> <span class=\\\"ff-label\\\"></span> </label> <label class=\\\"ff-row\\\" ng-if=\\\"$ctrl.embed\\\"> <ff-label flex=\\\"{{$ctrl.embed}}\\\" ff-required=\\\"true\\\"><span translate=\\\"REPORTS.PERIOD.TO_DATE\\\"></span></ff-label> <ff-date flex=\\\"0 0 124px\\\" ff-model=\\\"$ctrl.model.toDate\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'REPORTS.PERIOD.TO_DATE' | translate}}\\\"></ff-date> <span class=\\\"ff-label\\\"></span> </label> \";\n// Exports\nmodule.exports = code;","import template from './report-order-by.tpl.html';\n\n/**\n * reportOrderBy directive - sorting report control\n */\nexport default angular.module('deskworks.reportOrderBy', [])\n\n  .directive('reportOrderBy', function($compile) {\n    return {\n      restrict: 'E',\n      scope: true,\n      transclude: 'element',\n      priority: 2, // To be higher than ngModel directive with priority: 1\n      controller: 'ReportOrderByCtrl as $ctrl',\n      bindToController: {\n        model: '=',\n        reportColumns: '<',\n        levelsCount: '<levels',\n      },\n\n      link: ($scope, $element, $attrs, $ctrl, $transclude) => {\n        $transclude((clone, newScope) => {\n          const tpl = $compile(template)($scope);\n          angular.element(tpl[0].querySelector ? tpl[0].querySelector('.ff-panel-body') : tpl).append(clone); // append custom content before compilation\n          $element.after(tpl);\n        });\n      },\n    };\n  })\n\n  .controller('ReportOrderByCtrl', function($scope, $location) {\n    const $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = () => {\n      initLevels();\n\n      const orders = ($location.search().orderBy || '').split(',');\n      $ctrl.levels.forEach((level, idx) => {\n        level.order = (orders[idx] ?\n            level.cols.find(c => c.dataKey === orders[idx]) :\n            level.cols.find(c => c.defaultOrder === true) || level.cols[0]\n        ).dataKey;\n      });\n\n      watchOrderBy();\n    };\n\n    /**\n     * Init levels\n     */\n    function initLevels() {\n      if (!$ctrl.levels) $ctrl.levels = (new Array($ctrl.levelsCount || 1)).fill(null).map(() => ({}));\n\n      const exclude = [];\n\n      $ctrl.levels.forEach((level, index) => {\n        level.cols = $ctrl.reportColumns.filter(col => {\n          if (exclude.indexOf(col.dataKey) < 0) {\n            return true;\n          } else {\n            if (col.dataKey === level.order) level.order = null;\n          }\n        });\n\n        if (index) level.cols.unshift({ dataKey: null, title: '-' });\n\n        if (level.order) exclude.push(level.order);\n      });\n    }\n\n    /**\n     * Map orderBy to URL search param\n     */\n    function watchOrderBy() {\n      $scope.$watchCollection(() => $ctrl.levels.filter(level => !!level.order).map(level => level.order), val => {\n        initLevels();\n\n        const orders = $ctrl.levels\n          .map(level => level.order)\n          .filter(order => !!order);\n\n        $location.search('orderBy', orders.join(',')).replace();\n\n        $ctrl.model = $ctrl.levelsCount > 1 ? orders : orders[0];\n      });\n    }\n  });\n","// Module\nvar code = \"<label class=\\\"ff-row\\\" ng-repeat=\\\"level in $ctrl.levels track by $index\\\"> <ff-label flex=\\\"0 0 100px\\\"> <span translate=\\\"REPORTS.COLUMNS.ORDER_BY\\\" ng-if=\\\"!$index\\\"></span> <span translate=\\\"REPORTS.COLUMNS.THEN_ORDER_BY\\\" ng-if=\\\"$index\\\" style=\\\"font-size:.925em\\\"></span> </ff-label> <ff-select ff-model=\\\"level.order\\\" ff-options=\\\"col.dataKey as col.title for col in level.cols\\\"></ff-select> </label> \";\n// Exports\nmodule.exports = code;","/**\n * reportOwnerRegion directive - wraps report filters: owner, region\n */\nexport default angular.module('deskworks.reports.reportOwnerRegion', [\n  'deskworks.Owner',\n  'deskworks.Region',\n  'deskworks.setup.service',\n])\n\n  .directive('reportOwnerRegion', function($compile, $templateCache) {\n    const templateUrl = 'directives/report-owner-region.tpl.html';\n\n    return {\n      restrict: 'EAC',\n      scope: true,\n      transclude: 'element',\n      priority: 2, // To be higher than ngModel directive with priority: 1\n      controller: 'ReportOwnerRegionCtrl as $ctrl',\n      bindToController: {\n        model: '<',\n        reportData: '=',\n      },\n\n      link: ($scope, $element, $attrs, $ctrl, $transclude) => {\n        $transclude((clone, newScope) => {\n          const tpl = $compile($templateCache.get(templateUrl))($scope);\n          angular.element(tpl[0].querySelector ? tpl[0].querySelector('.ff-panel-body') : tpl).append(clone); // append custom content before compilation\n          $element.after(tpl);\n        });\n      },\n    };\n  })\n\n  .controller('ReportOwnerRegionCtrl', function($scope, $location, $translate, $q, dwAlerts,\n                                                Owner, Region, setupService, state) {\n    const $ctrl = this;\n\n    if (state.getLoggedUser().role !== 'master') return;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = () => {\n      fetchData();\n      if ($ctrl.model.ownerId !== false) watchOwnerId();\n      if ($ctrl.model.regionId !== false) watchRegionId();\n    };\n\n    function fetchData() {\n      return setupService.getSetupSettings()\n        .catch(err => dwAlerts(err, 'Failed to get setup settings.'))\n        .then(settings => {\n          if (settings.isFranchise) {\n            return $q.all([\n              Owner.query()\n                .catch(err => dwAlerts(err, 'Failed to query owners.'))\n                .then(owners => {\n                  $ctrl.owners = owners;\n                  $ctrl.owners.unshift({ name: $translate.instant('REPORTS.OWNER_REGION.OWNER.ALL') });\n                }),\n              Region.query()\n                .catch(err => dwAlerts(err, 'Failed to query regions.'))\n                .then(regions => {\n                  $ctrl.regions = regions;\n                  $ctrl.regions.unshift({ name: $translate.instant('REPORTS.OWNER_REGION.REGION.ALL') });\n                })\n            ]);\n          }\n        });\n    }\n\n    /**\n     * Map ownerId to URL search param\n     */\n    function watchOwnerId() {\n      $scope.$watch(() => $location.search().ownerId, (newVal, oldVal) => {\n        $ctrl.model.ownerId = newVal || newVal === 0 ? +newVal : $ctrl.owners && $ctrl.owners[0] && $ctrl.owners[0].id;\n        if (newVal !== oldVal) $ctrl.reportData = null;\n      });\n      $scope.$watch('$ctrl.model.ownerId', val => {\n        $location.search('ownerId', val).replace();\n      });\n    }\n\n    /**\n     * Map regionId to URL search param\n     */\n    function watchRegionId() {\n      $scope.$watch(() => $location.search().regionId, (newVal, oldVal) => {\n        $ctrl.model.regionId = newVal || newVal === 0 ? +newVal : $ctrl.regions && $ctrl.regions[0] && $ctrl.regions[0].id;\n        if (newVal !== oldVal) $ctrl.reportData = null;\n      });\n      $scope.$watch('$ctrl.model.regionId', val => {\n        $location.search('regionId', val).replace();\n      });\n    }\n\n    $ctrl.onChange = () => {\n      if ($ctrl.model.ownerId || $ctrl.model.regionId) $scope.vm.config.reportOptions.centerId = 0;\n    };\n  });\n","// Module\nvar code = \"<ff-panel ng-if=\\\"$ctrl.owners && $ctrl.regions\\\"> <ff-panel-header><span translate=\\\"REPORTS.OWNER_REGION.HEADER\\\"></span></ff-panel-header> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><span translate=\\\"REPORTS.OWNER_REGION.OWNER\\\"></span></ff-label> <ff-select ff-model=\\\"$ctrl.model.ownerId\\\" ff-options=\\\"owner.id as owner.name for owner in $ctrl.owners\\\" ff-change=\\\"$ctrl.onChange()\\\"></ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><span translate=\\\"REPORTS.OWNER_REGION.REGION\\\"></span></ff-label> <ff-select ff-model=\\\"$ctrl.model.regionId\\\" ff-options=\\\"region.id as region.name for region in $ctrl.regions\\\" ff-change=\\\"$ctrl.onChange()\\\"></ff-select> </label> </ff-panel> \";\n// Exports\nmodule.exports = code;","import reportSort from 'shared/reports/services/report-sort.service';\n\n/**\n * Pie chart for Income by Item Report\n */\nexport default angular.module('deskworks.reports.incomeByItemReportChart', [\n  reportSort.name,\n])\n  .factory('incomeByItemReportChart', function($filter, helper, reportSort) {\n\n    return dataToChart;\n\n    function dataToChart({ data, onClick, levels, multiLevelProductCategory, productCategories }) {\n      let categories = [];\n      data.forEach(productType => { categories = categories.concat(productType.productCategories); });\n\n      const converters = [pieByCategories, pieByProducts, pieByUsers];\n      if (multiLevelProductCategory) converters.unshift(pieBySupCategories);\n      const list = converters[levels.length](categories, levels, productCategories);\n\n      return {\n        type: 'pie',\n        data: {\n          codes: list.map(i => i.code),\n          labels: list.map(i => i.name),\n          datasets: [\n            {\n              data: list.map(i => helper.round(i.value)),\n            },\n          ],\n        },\n        options: {\n          tooltips: {\n            callbacks: {\n              label: (tooltipItem, data) => data.labels[tooltipItem.index] + ': ' + $filter('ncurrency')(data.datasets[0].data[tooltipItem.index]),\n            },\n          },\n          legend: {\n            display: true,\n            position: 'right',\n          },\n          onClick,\n        },\n      };\n    }\n\n    /**\n     * By Super Categories\n     */\n    function pieBySupCategories(categories, levels, productCategories) {\n      let list = [];\n\n      categories.forEach(category => {\n        const supCode = category.code.split('-')[0];\n        let item = list.find(i => i.code === supCode);\n        const pc = productCategories.find(i => {\n          const arr = i.code.split('-');\n          return supCode === arr[0] && (!arr[1] || arr[1].replace(/0/g, '').length === 0);\n        }) || {};\n        if (!item) {\n          item = {\n            code: supCode,\n            name: helper.join([pc.name || category.name, '[' + supCode + ']'], ' '),\n            value: 0,\n            catsCount: 0,\n            cats: [],\n          };\n          list.push(item);\n        }\n\n        item.catsCount++;\n        item.cats.push(category);\n\n        category.products.forEach(product => {\n          item.value += helper.toNumber(product.amount);\n        });\n      });\n\n      list = reportSort(list, 'value', true);\n      // const others = list.slice(10);\n      // list = list.slice(0, 10);\n\n      // if (others.length) {\n      //   const total = Math.max(others.reduce((total, item) => total + item.value, 0), 0);\n      //   list.push({ name: 'Others', value: total });\n      // }\n\n      return list;\n    }\n\n    /**\n     * By Categories\n     */\n    function pieByCategories(categories, levels) {\n\n      if (levels.length) {\n        const code = levels[levels.length - 1].code;\n        categories = categories.filter(cat => cat.code.indexOf(code) === 0);\n      }\n\n      return rangeCategories(categories)\n        // .slice(0, 10)\n        .map(cat => ({\n          code: cat.code,\n          name: helper.join([cat.name, '[' + cat.code + ']'], ' '),\n          value: cat.total,\n        }));\n    }\n\n    /**\n     * By Products\n     */\n    function pieByProducts(categories, levels) {\n      const categoryCode = levels[levels.length - 1].code;\n      const category = rangeCategories(categories).find(cat => cat.code === categoryCode);\n\n      let list = [];\n\n      category.products.forEach(product => {\n        let item = list.find(item => item.code === product.code);\n        if (!item) {\n          item = { code: product.code, name: helper.join([product.name, '[' + product.code + ']'], ' '), value: 0 };\n          list.push(item);\n        }\n        item.value += helper.toNumber(product.amount);\n      });\n\n      list = reportSort(list, 'value', true);\n\n      return list;\n    }\n\n    /**\n     * By Users\n     */\n    function pieByUsers(categories, levels) {\n      const categoryCode = levels[levels.length - 2].code;\n      const productCode = levels[levels.length - 1].code;\n      const category = rangeCategories(categories).find(cat => cat.code === categoryCode);\n\n      let list = [];\n\n      category.products.forEach(product => {\n        if (product.code !== productCode) return;\n        let item = list.find(item => item.name === product.userName);\n        if (!item) {\n          item = { code: product.code, name: product.userName, value: 0 };\n          list.push(item);\n        }\n        item.value += helper.toNumber(product.amount);\n      });\n\n      list = reportSort(list, 'value', true);\n\n      return list;\n    }\n\n\n    /**\n     * Merge products from different categories, calculate totals, sort\n     */\n    function rangeCategories(categories) {\n      let ranged = [];\n\n      categories.forEach(category => { // merge categories with same code\n        let cat = ranged.find(cat => cat.code === category.code);\n        if (cat) {\n          cat.products = cat.products.concat(category.products); // merge products\n        } else {\n          cat = angular.copy(category);\n          cat.total = 0;\n          ranged.push(cat);\n        }\n      });\n\n      ranged.forEach(category => { // calculate totals\n        category.products.forEach(product => {\n          category.total += helper.toNumber(product.amount);\n        });\n      });\n\n      return reportSort(ranged, 'total', true);\n    }\n  });\n","/**\n * Columns for Income By Item Report\n */\nexport default angular.module('deskworks.reports.incomeByItemReportColumns', [])\n  .factory('incomeByItemReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'productCode', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE', include: true,\n        styles: { cellWidth: 'wrap' },\n      },\n      {\n        dataKey: 'productName', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME', include: true,\n      },\n      {\n        dataKey: 'userName', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME', include: true,\n      },\n      {\n        dataKey: 'orderNo', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n      },\n      {\n        dataKey: 'date', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.DATE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'qty', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n      },\n      {\n        dataKey: 'amount', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'subtotal', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.SUBTOTAL', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'total', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import incomeByItemReportColumns from './income-by-item-report-columns.service';\n\n/**\n * Data to report converter for Income By Item Report\n */\nexport default angular.module('deskworks.reports.incomeByItemReportData', [\n  incomeByItemReportColumns.name,\n])\n  .factory('incomeByItemReportData', function($filter, $translate, helper, reportStyles, incomeByItemReportColumns) {\n\n    return dataToReport;\n\n    /**\n     * @param params\n     * @param data\n     * @returns {{columns: Array, styles: Array, rows: Array}}\n     */\n    function dataToReport(params, data) {\n      const result = {\n        columns: incomeByItemReportColumns,\n        rows: [],\n        styles: [],\n      };\n\n      let total = 0;\n\n      data.forEach((productType) => {\n        let typeTotal = 0;\n        result.rows.push([false, $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.ITEM_TYPE') + ': ' + productType.name, false, false, false, false, false, false, false]);\n        result.styles.push(reportStyles.h1);\n\n        productType.productCategories.forEach(category => {\n          let categoryTotal = 0;\n\n          category.products.forEach((product, idx) => {\n            result.rows.push([product.code, product.name, product.userName, product.orderNo, product.date, product.qty, product.amount, false, false]);\n            result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n            categoryTotal += helper.toNumber(product.amount);\n          });\n\n          typeTotal += categoryTotal;\n\n          const categoryTotalName = helper.join([category.name, '[' + category.code + ']', $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.TOTAL')], ' ');\n          result.rows.push([false, categoryTotalName, false, false, false, false, false, helper.round(categoryTotal), false]);\n          result.styles.push(reportStyles.h2);\n        });\n\n        total += typeTotal;\n\n        result.rows.push([false, false, $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.TOTAL') + ' ' + productType.name, false, false, false, false, false, helper.round(typeTotal)]);\n        result.styles.push(reportStyles.h3);\n\n        result.rows.push([false, false, false, false, false, false, false, false, false]);\n        result.styles.push(null);\n      });\n\n      result.rows.push([false, false, false, false, false, false, false, $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.INCOME') + ':', helper.round(total)]);\n      result.styles.push(reportStyles.h3);\n\n      return result;\n    }\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport chartDirective from 'shared/charts/chart.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nimport IncomeByItemReport from 'shared/reports/api/income-by-item-report.service';\nimport incomeByItemReportData from './income-by-item-report-data.service';\nimport incomeByMemberReportData from './income-by-member-report-data.service';\nimport incomeByOrderReportData from './income-by-order-report-data.service';\nimport incomeByItemReportChart from './income-by-item-report-chart.service';\n\nexport default angular.module('deskworks.reports.incomeByItemReport', [\n  pdfPreview.name,\n  chartDirective.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  reportHelper.name,\n  IncomeByItemReport.name,\n  incomeByItemReportData.name,\n  incomeByMemberReportData.name,\n  incomeByOrderReportData.name,\n  incomeByItemReportChart.name,\n  'deskworks.state',\n  'deskworks.reports.reportDates',\n  'deskworks.ProductCategory',\n])\n  .controller('IncomeByItemReportCtrl', function($scope, $q, $timeout, $filter, $translate, $location, state, helper,\n                                                 debounce, dwAlerts, reportStyles, reportHelper, ProductCategory,\n                                                 setupService, IncomeByItemReport, incomeByItemReportChart,\n                                                 incomeByItemReportData, incomeByMemberReportData, incomeByOrderReportData) {\n    const $ctrl = this;\n\n    const { paramsChanged, loadResources } = reportHelper;\n\n    $ctrl.config = {\n      reportName: $translate.instant('INCOME_BY_ITEM_REPORT.REPORT_NAME'),\n    };\n    $ctrl.params = {\n      fromDate: state.getParam('fromDate') ? $filter('toDate')(state.getParam('fromDate')) : moment().subtract(1, 'month').startOf('month'),\n      toDate: state.getParam('toDate') ? $filter('toDate')(state.getParam('toDate')) : moment().subtract(1, 'month').endOf('month'),\n      orderBy: state.getParam('orderBy') || 'item',\n    };\n    $ctrl.resources = null;\n    $ctrl.data = null;\n    $ctrl.byOrder = {\n      item: { dataToReport: incomeByItemReportData },\n      member: { dataToReport: incomeByMemberReportData },\n      order: { dataToReport: incomeByOrderReportData },\n    };\n    $ctrl.chartLevels = [];\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    /**\n     * Watch report params and generate new report\n     */\n    $scope.$watch('$ctrl.params', debounce((np, op) => {\n      state.setParam('orderBy', $ctrl.params.orderBy);\n\n      $ctrl.pdf = null;\n      $ctrl.report = null;\n\n      if (helper.pointFirstInvalid('#incomeByItemReport')) return;\n      if (!$ctrl.params.fromDate || !$ctrl.params.toDate) return;\n\n      if (paramsChanged(np, op, ['fromDate', 'toDate', 'centerId'])) {\n        $ctrl.data = null;\n        $ctrl.chartLevels = [];\n      }\n\n      $q.all({\n        resources: $ctrl.resources || loadResources(() => ({\n          settings: setupService.getSetupSettings()\n            .catch(err => dwAlerts.error(err, 'Failed to get setup settings.')),\n          productCategories: ProductCategory.query()\n            .catch(err => dwAlerts.error(err, 'Failed to query product categories.')),\n        })),\n        data: $ctrl.data || IncomeByItemReport.query($ctrl.params)\n          .catch(err => dwAlerts.error(err, 'Failed to query report.')),\n      })\n        .then(result => {\n          $ctrl.resources = result.resources;\n          $ctrl.data = result.data;\n        })\n        .then(() => {\n          const { dataToReport } = $ctrl.byOrder[$ctrl.params.orderBy];\n          $ctrl.report = dataToReport($ctrl.params, $ctrl.data);\n          const doc = reportHelper.buildPdf({ config: { ...$ctrl.config, ...$ctrl.params }, report: $ctrl.report, resources: $ctrl.resources });\n          $ctrl.pdf = doc.output('blob');\n          buildChart();\n        });\n    }, 100), true);\n\n    /**\n     * Chart click handler\n     * @param event\n     * @param items\n     */\n    function chartOnClick(event, items) {\n      $scope.$apply(_ => {\n        const idx = items[0] && items[0]._index;\n        if (!angular.isNumber(idx)) return;\n        const { multiLevelProductCategory } = $ctrl.resources.settings;\n        if ($ctrl.chartLevels.length >= (multiLevelProductCategory ? 3 : 2)) return;\n        $ctrl.chartLevels.push({ code: $ctrl.chart.data.codes[idx], name: $ctrl.chart.data.labels[idx] });\n        $timeout(() => buildChart());\n      });\n    }\n\n    /**\n     * Chart back button handler\n     */\n    $ctrl.chartBack = () => {\n      $ctrl.chartLevels.pop();\n      buildChart();\n    };\n\n    function buildChart() {\n      $ctrl.chart = incomeByItemReportChart({\n        data: $ctrl.data,\n        onClick: chartOnClick,\n        levels: $ctrl.chartLevels,\n        multiLevelProductCategory: $ctrl.resources.settings.multiLevelProductCategory,\n        productCategories: $ctrl.resources.productCategories,\n      });\n    }\n\n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = () => {\n      if (!$ctrl.pdf) return;\n      const fileName = reportHelper.getReportFileName({ extension: 'pdf', config: { ...$ctrl.config, ...$ctrl.params }, resources: $ctrl.resources });\n      reportHelper.download({ blob: $ctrl.pdf, fileName });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    $ctrl.downloadCsv = () => {\n      if (!$ctrl.pdf) return;\n      const fileName = reportHelper.getReportFileName({ extension: 'csv', config: { ...$ctrl.config, ...$ctrl.params }, resources: $ctrl.resources });\n      const csv = reportHelper.buildCsv({ report: $ctrl.report });\n      reportHelper.download({ blob: csv, fileName });\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"incomeByItemReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formIncomeByItemReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <report-dates model=\\\"$ctrl.params\\\"></report-dates> </div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-options model=\\\"$ctrl.params\\\"> <ff-row> <ff-label flex=\\\"0 0 100px\\\"><span translate=\\\"INCOME_BY_ITEM_REPORT.ORDER_BY\\\"></span></ff-label> <ff-static> <div class=\\\"ff-grid gutter-h-half\\\"> <label flex=\\\"0 0 auto\\\"> <ff-radio ff-model=\\\"$ctrl.params.orderBy\\\" ff-value=\\\"'item'\\\"> <span translate=\\\"INCOME_BY_ITEM_REPORT.ORDER_BY.ITEM\\\"></span> </ff-radio> </label> <label flex=\\\"0 0 auto\\\"> <ff-radio ff-model=\\\"$ctrl.params.orderBy\\\" ff-value=\\\"'member'\\\"> <span translate=\\\"INCOME_BY_ITEM_REPORT.ORDER_BY.MEMBER\\\"></span> </ff-radio> </label> <label flex=\\\"0 0 auto\\\"> <ff-radio ff-model=\\\"$ctrl.params.orderBy\\\" ff-value=\\\"'order'\\\"> <span translate=\\\"INCOME_BY_ITEM_REPORT.ORDER_BY.ORDER\\\"></span> </ff-radio> </label> </div> </ff-static> </ff-row> </report-options> </div> </div> <ff-panel flex=\\\"1 1 auto\\\"> <ff-panel-header> <ff-row class=\\\"gutter-h-half\\\"> <div> <span ng-if=\\\"!$ctrl.chartLevels.length\\\" translate=\\\"INCOME_BY_ITEM_REPORT.PRODUCT_CATEGORIES_PIE_CHART.HEADER\\\"></span> <span ng-if=\\\"$ctrl.chartLevels.length\\\" ng-bind=\\\"$ctrl.chartLevels[$ctrl.chartLevels.length - 1].name\\\"></span> </div> <div flex=\\\"0 0 auto\\\" style=\\\"align-items:center\\\"> <ff-btn ng-if=\\\"$ctrl.chartLevels.length\\\" size=\\\"sm\\\" sense=\\\"back\\\" style=\\\"margin:-.5rem 0\\\" title=\\\"{{'GLOBAL.BTN_BACK' | translate}}\\\" ff-click=\\\"$ctrl.chartBack()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </div> </ff-row> </ff-panel-header> <div ff-dim=\\\"!$ctrl.pdf\\\"> <chart config=\\\"$ctrl.chart\\\"></chart> </div> </ff-panel> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Income By Member Report\n */\nexport default angular.module('deskworks.reports.incomeByMemberReportColumns', [])\n  .factory('incomeByMemberReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'userName', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME', include: true,\n      },\n      {\n        dataKey: 'productCode', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n      },\n      {\n        dataKey: 'productName', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME', include: true,\n      },\n      {\n        dataKey: 'orderNo', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n      },\n      {\n        dataKey: 'date', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.DATE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'qty', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n      },\n      {\n        dataKey: 'amount', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'total', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import reportSort from 'shared/reports/services/report-sort.service';\nimport incomeByMemberReportColumns from './income-by-member-report-columns.service';\n\n/**\n * Data to report converter for Income By Member Report\n */\nexport default angular.module('deskworks.reports.incomeByMemberReportData', [\n  reportSort.name,\n  incomeByMemberReportColumns.name,\n])\n  .factory('incomeByMemberReportData', function($filter, $translate, helper, reportStyles, reportSort, incomeByMemberReportColumns) {\n\n    return dataToReport;\n\n    /**\n     * @param params\n     * @param data\n     * @returns {{columns: Array, styles: Array, rows: Array}}\n     */\n    function dataToReport(params, data) {\n      const result = {\n        columns: incomeByMemberReportColumns,\n        rows: [],\n        styles: [],\n      };\n\n      let users = [];\n      data.forEach(productType => {\n        productType.productCategories.forEach(category => {\n          category.products.forEach(product => {\n            let user = users.find(u => u.name === product.userName);\n            if (!user) {\n              user = { name: product.userName, products: [] };\n              users.push(user);\n            }\n            user.products.push(product);\n          });\n        });\n      });\n      users = reportSort(users, 'name');\n\n      let total = 0;\n\n      users.forEach(user => {\n        let userTotal = 0;\n\n        reportSort(user.products, 'date').forEach((product, idx) => {\n          result.rows.push([product.userName, product.code, product.name, product.orderNo, product.date, product.qty, product.amount, false]);\n          result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n          userTotal += helper.toNumber(product.amount);\n        });\n\n        total += userTotal;\n\n        result.rows.push([user.name + ' ' + $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.TOTAL'), false, false, false, false, false, false, helper.round(userTotal)]);\n        result.styles.push(reportStyles.h2);\n      });\n\n      result.rows.push([false, false, false, false, false, false, false, false]);\n      result.styles.push(null);\n      result.rows.push([false, false, false, false, false, false, $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.INCOME') + ':', helper.round(total)]);\n      result.styles.push(reportStyles.h3);\n\n      return result;\n    }\n  });\n","/**\n * Columns for Income By Order ID Report\n */\nexport default angular.module('deskworks.reports.incomeByOrderReportColumns', [])\n  .factory('incomeByOrderReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'orderNo', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n      },\n      {\n        dataKey: 'userName', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME', include: true,\n      },\n      {\n        dataKey: 'productCode', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n      },\n      {\n        dataKey: 'productName', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME', include: true,\n      },\n      {\n        dataKey: 'date', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.DATE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'qty', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n      },\n      {\n        dataKey: 'amount', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'total', _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import reportSort from 'shared/reports/services/report-sort.service';\nimport incomeByOrderReportColumns from './income-by-order-report-columns.service';\n\n/**\n * Data to report converter for Income By Order Report\n */\nexport default angular.module('deskworks.reports.incomeByOrderReportData', [\n  reportSort.name,\n  incomeByOrderReportColumns.name,\n])\n  .factory('incomeByOrderReportData', function($filter, $translate, helper, reportStyles, reportSort, incomeByOrderReportColumns) {\n\n    return dataToReport;\n\n    /**\n     * @param params\n     * @param data\n     * @returns {{columns: Array, styles: Array, rows: Array}}\n     */\n    function dataToReport(params, data) {\n      const result = {\n        columns: incomeByOrderReportColumns,\n        rows: [],\n        styles: [],\n      };\n\n      let orders = [];\n      data.forEach(productType => {\n        productType.productCategories.forEach(category => {\n          category.products.forEach(product => {\n            let order = orders.find(o => o.orderNo === product.orderNo);\n            if (!order) {\n              order = { orderNo: product.orderNo, products: [] };\n              orders.push(order);\n            }\n            order.products.push(product);\n          });\n        });\n      });\n      orders = reportSort(orders, 'name');\n\n      let total = 0;\n\n      orders.forEach(order => {\n        let orderTotal = 0;\n\n        reportSort(order.products, 'date').forEach((product, idx) => {\n          result.rows.push([product.orderNo, product.userName, product.code, product.name, product.date, product.qty, product.amount, false]);\n          result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n          orderTotal += helper.toNumber(product.amount);\n        });\n\n        total += orderTotal;\n\n        result.rows.push([false, $translate.instant('INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO')  + ' #' + order.orderNo + ' ' + $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.TOTAL'), false, false, false, false, false, helper.round(orderTotal)]);\n        result.styles.push(reportStyles.h2);\n      });\n\n      result.rows.push([false, false, false, false, false, false, false, false]);\n      result.styles.push(null);\n      result.rows.push([false, false, false, false, false, false, $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.INCOME') + ':', helper.round(total)]);\n      result.styles.push(reportStyles.h3);\n\n      return result;\n    }\n  });\n","/**\n * Columns for Income Report\n */\nexport default angular.module('deskworks.reports.incomeReportColumns', [])\n  .factory('incomeReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'userCompany', _title: 'INCOME_REPORT.COLUMNS.COMPANY', include: true,\n        styles: { minCellWidth: 250 },\n      },\n      {\n        dataKey: 'userName', _title: 'INCOME_REPORT.COLUMNS.NAME', include: true,\n        styles: { minCellWidth: 200 },\n      },\n      {\n        dataKey: 'date', _title: 'INCOME_REPORT.COLUMNS.DATE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'method', _title: 'INCOME_REPORT.COLUMNS.METHOD', include: true,\n        styles: { cellWidth: 'wrap' },\n      },\n      {\n        dataKey: 'amount', _title: 'INCOME_REPORT.COLUMNS.AMOUNT', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.reports.incomeReport', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportDates',\n  'deskworks.reports.reportOwnerRegion',\n  'deskworks.reports.incomeReport.service',\n  'deskworks.reports.incomeReportColumns'\n])\n  .controller('IncomeReportCtrl', function($scope, $timeout, $filter, $translate, state, helper, reportHelper,\n                                           reportStyles, ReportBuilder, IncomeReport, incomeReportColumns) {\n    const vm = this;\n\n    vm.config = {\n      reportName: $translate.instant('INCOME_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportOwnerRegion: {},\n      reportColumns: { columns: incomeReportColumns },\n      reportDates: { fromDate: moment(), toDate: moment() },\n      getReportData: function() {\n        return IncomeReport.get({\n          centerId: vm.config.reportOptions.centerId,\n          fromDate: $filter('date')(vm.config.reportDates.fromDate, 'yyyy-MM-dd'),\n          toDate: $filter('date')(vm.config.reportDates.toDate, 'yyyy-MM-dd'),\n          ownerId: vm.config.reportOwnerRegion.ownerId,\n          regionId: vm.config.reportOwnerRegion.regionId,\n        }).$promise;\n      },\n    };\n\n    state.setPageTitle($translate.instant('INCOME_REPORT.PAGE_TITLE'));\n\n    vm.config.reportDates.fromDate.date(1); // set fromDate to first day of current month\n    vm.config.reportDates.toDate.add(1, 'M').date(0); // set toDate to last day of current month\n\n    vm.reportBuilder = new ReportBuilder(vm.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    let debounceTimeout;\n    $scope.$watch(_ => ({ reportOptions: vm.config.reportOptions, reportDates: vm.config.reportDates, reportOwnerRegion: vm.config.reportOwnerRegion }), (newVal, oldVal) => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(_ => {\n        vm.pdf = null;\n        if (angular.isUndefined(vm.config.reportOptions.centerId)) return;\n\n        let newDate = newVal.reportDates.fromDate, oldDate = oldVal.reportDates.fromDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;\n\n        newDate = newVal.reportDates.toDate; oldDate = oldVal.reportDates.toDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;\n\n        vm.reportBuilder.buildPdf(reportDataCallback).then(function(blob) { vm.pdf = blob; });\n      }, 100);\n    }, true);\n    \n    /**\n     * Download generated PDF report\n     */\n    vm.downloadPdf = function() {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.pdf, fileName: vm.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n    * Generate and download CSV report\n    */\n    vm.downloadCsv = function() {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.reportBuilder.buildCsv(reportDataCallback), fileName: vm.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns.columns,\n        rows: [],\n        styles: [],\n      };\n\n      // Finally, convert to matrix\n      result.rows = config.reportData.payments.map((payment, idx) => {\n        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        return result.columns.map(col => payment[col.dataKey]);\n      });\n\n      result.rows.push([false, false, false, false, false]);\n      result.styles.push(null);\n      result.rows.push([false, false, false, $translate.instant('INCOME_REPORT.TOTAL_INCOME') + ':', config.reportData.total]);\n      result.styles.push(reportStyles.h3);\n\n      return result;\n    }\n  });\n","/**\n * IncomeReport service\n */\nexport default angular.module('deskworks.reports.incomeReport.service', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config'\n])\n  .factory('IncomeReport', function($resource, datesDeserializer, deskworksConfig) {\n    const desDates = datesDeserializer(['payments.date']);\n\n    const url = deskworksConfig.getApiAbsUrl('/centers/:centerId/income-reports');\n\n    return $resource(url, { centerId: '@centerId', fromDate: '@fromDate', toDate: '@toDate' }, {\n      get: { method: 'GET', transformResponse: [angular.fromJson, desDates] }\n    });\n\n  });\n","// Module\nvar code = \"<div id=\\\"incomeReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formIncomeReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <report-dates model=\\\"vm.config.reportDates\\\"></report-dates> </div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-options model=\\\"vm.config.reportOptions\\\"></report-options> <report-owner-region model=\\\"vm.config.reportOwnerRegion\\\" report-data=\\\"vm.config.reportData\\\"></report-owner-region> </div> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadPdf()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadCsv()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"vm.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","const index = ['$injector', function index($injector) {\n  // JS\n  const importAll = r => r.keys().map(r);\n  const js = importAll(require.context('./', true, /\\..+\\/.+\\.js$/));\n  $injector.loadNewModules(js.map(m => m.default.name));\n\n  // Templates\n  $injector.invoke(['$templateCache', function($templateCache) {\n    const ctx = require.context('./', true, /.*\\.tpl\\.html$/);\n    ctx.keys().forEach(key => $templateCache.put(key.replace(/^\\.\\//, ''), ctx(key)));\n  }]);\n}];\n\nexport default index;\n"],"sourceRoot":""}