{"version":3,"sources":["webpack:///./bundles/accounting sync .*\\.tpl\\.html$","webpack:///./bundles/accounting sync \\..+\\/.+\\.js$","webpack:///./bundles/accounting/accounting-periods/accounting-periods-audit.directive.js","webpack:///./bundles/accounting/accounting-periods/accounting-periods-audit.service.js","webpack:///./bundles/accounting/accounting-periods/accounting-periods-audit.tpl.html","webpack:///./bundles/accounting/accounting-periods/accounting-periods.controller.js","webpack:///./bundles/accounting/accounting-periods/accounting-periods.service.js","webpack:///./bundles/accounting/accounting-periods/accounting-periods.tpl.html","webpack:///./bundles/accounting/bulk-charges/bulk-charges.controller.js","webpack:///./bundles/accounting/bulk-charges/bulk-charges.tpl.html","webpack:///./bundles/accounting/bulk-invoicing/bulk-invoicing.controller.js","webpack:///./bundles/accounting/bulk-invoicing/bulk-invoicing.tpl.html","webpack:///./bundles/accounting/index.js","webpack:///./bundles/accounting/invoice-log/invoice-log.controller.js","webpack:///./bundles/accounting/invoice-log/invoice-log.service.js","webpack:///./bundles/accounting/invoice-log/invoice-log.tpl.html","webpack:///./shared/dw-invoice/dw-invoice-small.directive.js","webpack:///./shared/dw-invoice/dw-invoice-small.tpl.html"],"names":["angular","module","AccountingPeriodsAudit","name","directive","templateUrl","restrict","scope","controller","bindToController","periods","$scope","state","dwAlerts","$ctrl","$onInit","queryAudit","$on","_","query","getCurrentCenterId","catch","err","error","then","audit","forEach","rec","date","p","periodId","id","factory","$resource","$timeout","datesDeserializer","deskworksConfig","desDates","url","getApiAbsUrl","res","method","isArray","transformResponse","fromJson","centerId","$promise","AccountingPeriods","accountingPeriodsAuditDirective","$translate","debounce","setPageTitle","instant","queryPeriods","savePeriod","period","$$spin","save","result","closedAt","closedBy","$broadcast","finally","update","data","dwInvoiceSmall","$route","helper","invoices","bulkInvoicingService","vm","invoice","collapsed","chargeCards","include","push","length","billPurchases","info","reload","items","item","description","join","sendInvoices","sendEmails","index","$injector","importAll","r","js","require","loadNewModules","m","default","invoke","$templateCache","ctx","key","put","replace","InvoiceLog","purchases","params","offset","limit","sort","getParam","order","q","$watchCollection","setParam","fetch","init","fetching","eof","$$init","fetchDebounced","edit","resetParams","setCurrentUserId","userId","setPath","view","template","compile","tElement","tAttrs","addClass","link"],"mappings":"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","file":"accounting~._b.js?_rev=68c61102da45fdebfd7e","sourcesContent":["var map = {\n\t\"./accounting-periods/accounting-periods-audit.tpl.html\": \"./bundles/accounting/accounting-periods/accounting-periods-audit.tpl.html\",\n\t\"./accounting-periods/accounting-periods.tpl.html\": \"./bundles/accounting/accounting-periods/accounting-periods.tpl.html\",\n\t\"./bulk-charges/bulk-charges.tpl.html\": \"./bundles/accounting/bulk-charges/bulk-charges.tpl.html\",\n\t\"./bulk-invoicing/bulk-invoicing.tpl.html\": \"./bundles/accounting/bulk-invoicing/bulk-invoicing.tpl.html\",\n\t\"./invoice-log/invoice-log.tpl.html\": \"./bundles/accounting/invoice-log/invoice-log.tpl.html\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/accounting sync recursive .*\\\\.tpl\\\\.html$\";","var map = {\n\t\"./accounting-periods/accounting-periods-audit.directive.js\": \"./bundles/accounting/accounting-periods/accounting-periods-audit.directive.js\",\n\t\"./accounting-periods/accounting-periods-audit.service.js\": \"./bundles/accounting/accounting-periods/accounting-periods-audit.service.js\",\n\t\"./accounting-periods/accounting-periods.controller.js\": \"./bundles/accounting/accounting-periods/accounting-periods.controller.js\",\n\t\"./accounting-periods/accounting-periods.service.js\": \"./bundles/accounting/accounting-periods/accounting-periods.service.js\",\n\t\"./bulk-charges/bulk-charges.controller.js\": \"./bundles/accounting/bulk-charges/bulk-charges.controller.js\",\n\t\"./bulk-invoicing/bulk-invoicing.controller.js\": \"./bundles/accounting/bulk-invoicing/bulk-invoicing.controller.js\",\n\t\"./invoice-log/invoice-log.controller.js\": \"./bundles/accounting/invoice-log/invoice-log.controller.js\",\n\t\"./invoice-log/invoice-log.service.js\": \"./bundles/accounting/invoice-log/invoice-log.service.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/accounting sync recursive \\\\..+\\\\/.+\\\\.js$\";","import AccountingPeriodsAudit from './accounting-periods-audit.service';\n\nexport default angular.module('deskworks.accountingPeriodsAuditDirective', [\n  'deskworks.helper',\n  AccountingPeriodsAudit.name,\n])\n\n  .directive('accountingPeriodsAudit', function() {\n    const templateUrl = 'accounting-periods/accounting-periods-audit.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'AccountingPeriodsAuditDirectiveCtrl as $ctrl',\n      bindToController: {\n        periods: '<',\n      },\n    };\n  })\n\n  .controller('AccountingPeriodsAuditDirectiveCtrl', function($scope, state, dwAlerts, AccountingPeriodsAudit) {\n    const $ctrl = this;\n\n    $ctrl.$onInit = () => {\n      queryAudit();\n\n      $scope.$on('AccountingPeriods.update', _ => queryAudit());\n    };\n\n    function queryAudit() {\n      return AccountingPeriodsAudit.query(state.getCurrentCenterId())\n        .catch(err => dwAlerts.error(err, 'Failed to query accounting periods audit'))\n        .then(audit => {\n          $ctrl.audit = audit;\n          $ctrl.audit.forEach(rec => { rec.date = ($ctrl.periods.find(p => rec.periodId === p.id) || {}).date });\n        });\n    }\n  });\n","/**\n * AccountingPeriodsAudit service\n */\nexport default angular.module('deskworks.AccountingPeriodsAudit', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config',\n])\n\n  .factory('AccountingPeriodsAudit', function($resource, $timeout, datesDeserializer, deskworksConfig) {\n    const desDates = datesDeserializer(['createdAt']);\n    const url = deskworksConfig.getApiAbsUrl('/centers/:centerId/accounting-periods/audit');\n\n    const res = $resource(url, {}, {\n      query: { method: 'GET', isArray: true, transformResponse: [angular.fromJson, desDates] },\n    });\n\n    return {\n      query: (centerId) => res.query({ centerId }).$promise,\n    };\n  });\n","// Module\nvar code = \"<ff-panel> <ff-panel-header><span translate=\\\"ACCOUNTING_PERIODS.AUDIT.HEADER\\\"></span></ff-panel-header> <ff-row ng-if=\\\"!$ctrl.audit\\\"><ff-spin class=\\\"ff-spin-placeholder\\\"></ff-spin></ff-row> <ff-header ng-if=\\\"$ctrl.audit && $ctrl.audit.length\\\"> <ff-row> <cell flex=\\\"0 1 150px\\\" class=\\\"ff-right\\\"><span translate=\\\"ACCOUNTING_PERIODS.AUDIT.DATE\\\"></span></cell> <cell flex=\\\"0 1 180px\\\"><span translate=\\\"ACCOUNTING_PERIODS.AUDIT.BY\\\"></span></cell> <cell flex=\\\"1 1 100px\\\"><span translate=\\\"ACCOUNTING_PERIODS.AUDIT.DESCRIPTION\\\"></span></cell> </ff-row> </ff-header> <span ng-if=\\\"$ctrl.audit && !$ctrl.audit.length\\\" translate=\\\"GLOBAL.NONE\\\"></span> <ff-row ng-repeat=\\\"rec in $ctrl.audit\\\"> <ff-static flex=\\\"0 1 150px\\\" class=\\\"ff-right\\\">{{::rec.createdAt | date: 'mediumDate'}}</ff-static> <ff-static flex=\\\"0 1 180px\\\">{{::rec.createdBy}}</ff-static> <ff-static flex=\\\"1 1 100px\\\"> <span translate=\\\"ACCOUNTING_PERIODS.AUDIT.{{rec.closed ? 'CLOSED' : 'REOPENED'}}\\\" translate-values=\\\"{ period: (rec.date | date: 'MMMM yyyy') }\\\"></span> </ff-static> </ff-row> </ff-panel> \";\n// Exports\nmodule.exports = code;","import AccountingPeriods from './accounting-periods.service';\nimport accountingPeriodsAuditDirective from './accounting-periods-audit.directive';\n\nexport default angular.module('deskworks.AccountingPeriodsCtrl', [\n  'debounce',\n  AccountingPeriods.name,\n  accountingPeriodsAuditDirective.name,\n])\n\n  .controller('AccountingPeriodsCtrl', function($scope, $translate, dwAlerts, state, debounce, AccountingPeriods) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('ACCOUNTING_PERIODS.PAGE_TITLE'));\n\n    queryPeriods();\n\n    function queryPeriods() {\n      return AccountingPeriods.query(state.getCurrentCenterId())\n        .catch(err => dwAlerts.error(err, 'Failed to query accounting periods'))\n        .then(periods => { $ctrl.periods = periods; });\n    }\n\n    $ctrl.savePeriod = debounce(savePeriod, 500);\n    function savePeriod(period) {\n      period.$$spin = true;\n      return AccountingPeriods.save(state.getCurrentCenterId(), period.id, period)\n        .catch(err => dwAlerts.error(err, 'Failed to query accounting periods'))\n        .then(result => { period.closedAt = result.closedAt; period.closedBy = result.closedBy; })\n        .then(_ => $scope.$broadcast('AccountingPeriods.update'))\n        .finally(_ => { period.$$spin = false; });\n    }\n\n  });\n","/**\n * AccountingPeriods service\n */\nexport default angular.module('deskworks.AccountingPeriods', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config',\n])\n\n  .factory('AccountingPeriods', function($resource, $timeout, datesDeserializer, deskworksConfig) {\n    const desDates = datesDeserializer(['date', 'closedAt']);\n    const url = deskworksConfig.getApiAbsUrl('/centers/:centerId/accounting-periods/:id');\n\n    const res = $resource(url, {}, {\n      query: { method: 'GET', isArray: true, transformResponse: [angular.fromJson, desDates] },\n      update: { method: 'PUT', transformResponse: [angular.fromJson, desDates] }\n    });\n\n    return {\n      query: (centerId) => res.query({ centerId }).$promise,\n      save: (centerId, id, data) => res.update({ centerId, id }, data).$promise,\n    };\n  });\n","// Module\nvar code = \"<div ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\" style=\\\"max-width:640px\\\"> <ff-panel> <ff-panel-header><span translate=\\\"ACCOUNTING_PERIODS.CLOSE_PERIODS.HEADER\\\"></span></ff-panel-header> <ff-row ng-if=\\\"!$ctrl.periods\\\"><ff-spin class=\\\"ff-spin-placeholder\\\"></ff-spin></ff-row> <ff-header ng-if=\\\"$ctrl.periods\\\" class=\\\"animate-collapse\\\"> <ff-row> <cell flex=\\\"0 1 150px\\\" class=\\\"ff-right\\\"><span translate=\\\"ACCOUNTING_PERIODS.PERIOD\\\"></span></cell> <cell flex=\\\"0 1 70px\\\" class=\\\"ff-center\\\"><span translate=\\\"ACCOUNTING_PERIODS.CLOSED\\\"></span></cell> <cell flex=\\\"0 1 120px\\\" class=\\\"ff-right\\\"><span translate=\\\"ACCOUNTING_PERIODS.CLOSED_AT\\\"></span></cell> <cell flex=\\\"1 1 100px\\\"><span translate=\\\"ACCOUNTING_PERIODS.CLOSED_BY\\\"></span></cell> </ff-row> </ff-header> <ff-row ng-repeat=\\\"period in $ctrl.periods\\\" class=\\\"animate-collapse\\\"> <ff-static flex=\\\"0 1 150px\\\" class=\\\"ff-right\\\">{{period.date | date: 'MMMM yyyy'}}</ff-static> <ff-static flex=\\\"0 1 70px\\\" class=\\\"ff-center\\\"> <div ff-dim=\\\"period.$$spin\\\"><ff-checkbox ff-model=\\\"period.closed\\\" ff-change=\\\"$ctrl.savePeriod(period)\\\"></ff-checkbox></div> </ff-static> <ff-static flex=\\\"0 1 120px\\\" class=\\\"ff-right\\\">{{period.closedAt | date: 'mediumDate' | nd}}</ff-static> <ff-static flex=\\\"1 1 100px\\\">{{period.closedBy | nd}}</ff-static> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"collapse\\\" ff-click=\\\"$ctrl.showAudit = !$ctrl.showAudit\\\" ng-class=\\\"{ collapsed: !$ctrl.showAudit }\\\"> <span translate=\\\"GLOBAL.BTN_AUDIT\\\"></span> </ff-btn> </ff-btn-group> <div ng-if=\\\"$ctrl.showAudit\\\" class=\\\"animate-collapse\\\"> <accounting-periods-audit periods=\\\"$ctrl.periods\\\"></accounting-periods-audit> </div> </div> </div> \";\n// Exports\nmodule.exports = code;","import dwInvoiceSmall from 'shared/dw-invoice/dw-invoice-small.directive';\n\nexport default angular.module('deskworks.AccountingBulkChargesCtrl', [\n  'deskworks.accounting.bulkInvoicing.service',\n  dwInvoiceSmall.name,\n])\n\n  .controller('AccountingBulkChargesCtrl', function($scope, $route, $translate, dwAlerts, state, helper,\n                                                    invoices, bulkInvoicingService) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('BULK_CHARGES.PAGE_TITLE'));\n\n    vm.invoices = invoices;\n    vm.invoices.forEach(invoice => { invoice.collapsed = true; });\n\n    /**\n     * Charge Cards handler\n     */\n    vm.chargeCards = function() {\n      const data = { invoices: [] };\n\n      vm.invoices.forEach(invoice => {\n        if (invoice.include) data.invoices.push(invoice.id);\n      });\n\n      if (!data.invoices.length) return dwAlerts.error($translate.instant('BULK_CHARGES.NOTHING_SELECTED'));\n\n      return bulkInvoicingService.billPurchases(state.getCurrentCenterId(), data)\n        .catch(err => dwAlerts.error(err, 'Failed to charge credit cards.'))\n        .then(() => {\n          dwAlerts.info($translate.instant('BULK_CHARGES.SUCCESS'));\n          $route.reload();\n        });\n    };\n  });\n","// Module\nvar code = \"<div class=\\\"bulk-invoicing\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel> <ff-panel-header><span translate=\\\"BULK_CHARGES.HEADER\\\"></span></ff-panel-header> <span ng-if=\\\"!vm.invoices.length\\\"><span translate=\\\"GLOBAL.NONE\\\"></span></span> <ff-row ng-if=\\\"ffBlock.editMode && vm.invoices.length > 0\\\"> <label flex=\\\"none\\\"><ff-include-all flex=\\\"0 0 30px\\\" items=\\\"vm.invoices\\\"></ff-include-all></label> </ff-row> <ff-header ng-show=\\\"vm.invoices.length > 0\\\"> <ff-row> <span flex=\\\"0 0 30px\\\" class=\\\"ff-center\\\" title=\\\"{{'GLOBAL.INCLUDE' | translate}}\\\" ng-if=\\\"ffBlock.editMode\\\"><ff-icon sense=\\\"check\\\"></ff-icon></span> <cell flex=\\\"1 1 150px\\\"><span translate=\\\"BULK_CHARGES.COMPANY\\\"></span></cell> <cell flex=\\\"1 1 150px\\\"><span translate=\\\"BULK_CHARGES.USER\\\"></span></cell> <cell flex=\\\"1 0 60px\\\" class=\\\"ff-center\\\"><span translate=\\\"BULK_CHARGES.ORDER_ID\\\"></span></cell> <cell flex=\\\"3 0 45px\\\" class=\\\"ff-center\\\"><span translate=\\\"BULK_CHARGES.DATE\\\"></span></cell> <cell flex=\\\"1 2 300px\\\"><span translate=\\\"BULK_CHARGES.COMMENTS\\\"></span></cell> <cell flex=\\\"1 0 94px\\\" class=\\\"ff-right\\\"><span translate=\\\"BULK_CHARGES.TOTAL\\\"></span></cell> <ff-btn flex=\\\"none\\\" sense=\\\"collapse\\\" size=\\\"xs\\\" class=\\\"buttons-row zero-height\\\"></ff-btn> </ff-row> </ff-header> <ff-col ng-repeat=\\\"invoice in ::vm.invoices\\\"> <ff-row class=\\\"invoice-head\\\" ng-class=\\\"{ active: !invoice.collapsed }\\\" ff-click=\\\"invoice.collapsed = !invoice.collapsed\\\"> <ff-checkbox flex=\\\"0 0 30px\\\" class=\\\"ff-center\\\" ff-model=\\\"invoice.include\\\" ng-if=\\\"ffBlock.editMode\\\"></ff-checkbox> <ff-static flex=\\\"1 1 150px\\\" ff-bind=\\\"::invoice.userCompany\\\"></ff-static> <ff-static flex=\\\"1 1 150px\\\" ff-bind=\\\"::invoice.userName\\\"></ff-static> <ff-static flex=\\\"1 0 60px\\\" class=\\\"ff-center\\\" ff-bind=\\\"::invoice.orderId\\\"></ff-static> <ff-static flex=\\\"3 0 45px\\\" class=\\\"ff-center\\\" ff-bind=\\\"::invoice.date | date:'mediumDate'\\\"></ff-static> <ff-static flex=\\\"1 2 300px\\\" ff-bind=\\\"::invoice.comments\\\"></ff-static> <ff-static flex=\\\"1 0 94px\\\" class=\\\"ff-right\\\" ff-bind=\\\"::invoice.total | ncurrency\\\"></ff-static> <ff-btn-group flex=\\\"0 0 auto\\\"> <ff-btn sense=\\\"collapse\\\" size=\\\"xs\\\" class=\\\"buttons-row\\\" title=\\\"{{'GLOBAL.BTN_VIEW' | translate}}\\\" ff-click=\\\"invoice.collapsed = !invoice.collapsed\\\" ng-class=\\\"{ collapsed: invoice.collapsed }\\\"></ff-btn> </ff-btn-group> </ff-row> <ff-row ng-collapse=\\\"invoice.collapsed\\\"> <ff-label flex=\\\"0 0 30px\\\" class=\\\"invisible\\\"></ff-label> <dw-invoice-small invoice=\\\"invoice\\\"></dw-invoice-small> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"invisible\\\"> <ff-btn sense=\\\"collapse\\\" size=\\\"xs\\\"> <span translate=\\\"GLOBAL.BTN_VIEW\\\"></span> </ff-btn> </ff-btn-group> </ff-row> </ff-col> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"save\\\" ff-click=\\\"vm.chargeCards()\\\"><span translate=\\\"BULK_CHARGES.BTN_CHARGE\\\"></span></ff-btn> </ff-btn-group> </div> </div> \";\n// Exports\nmodule.exports = code;","import dwInvoiceSmall from 'shared/dw-invoice/dw-invoice-small.directive';\n\nexport default angular.module('deskworks.AccountingBulkInvoicingCtrl', [\n  'deskworks.accounting.bulkInvoicing.service',\n  dwInvoiceSmall.name,\n])\n\n  .controller('AccountingBulkInvoicingCtrl', function($scope, $route, $translate, dwAlerts, state, helper,\n                                                      invoices, bulkInvoicingService) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('BULK_INVOICING.PAGE_TITLE'));\n\n    vm.invoices = invoices;\n    vm.invoices.forEach(invoice => {\n      invoice.collapsed = true;\n      if (angular.isArray(invoice.items)) {\n        invoice.items.forEach(item => {\n          item.description = [item.name || '', item.description || ''].join(' ');\n        });\n      }\n    });\n\n    /**\n     * Send Invoices handler\n     */\n    vm.sendInvoices = () => {\n      const data = { invoices: [] };\n\n      vm.invoices.forEach(invoice => {\n        if (invoice.include) {\n          data.invoices.push(invoice.id);\n        }\n      });\n\n      if (!data.invoices.length) return dwAlerts.error($translate.instant('BULK_INVOICING.NOTHING_SELECTED'));\n\n      return bulkInvoicingService.sendEmails(state.getCurrentCenterId(), data)\n        .catch(err => dwAlerts.error(err, 'Failed to send invoices.'))\n        .then(() => {\n          dwAlerts.info($translate.instant('BULK_INVOICING.SUCCESS'));\n          $route.reload();\n        });\n    };\n  });\n","// Module\nvar code = \"<div class=\\\"bulk-invoicing\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel> <ff-panel-header><span translate=\\\"BULK_INVOICING.HEADER\\\"></span></ff-panel-header> <span ng-if=\\\"!vm.invoices.length\\\"><span translate=\\\"GLOBAL.NONE\\\"></span></span> <ff-row ng-if=\\\"ffBlock.editMode && vm.invoices.length > 0\\\"> <label flex=\\\"none\\\"><ff-include-all flex=\\\"0 0 30px\\\" items=\\\"vm.invoices\\\"></ff-include-all></label> </ff-row> <ff-header ng-show=\\\"vm.invoices.length > 0\\\"> <ff-row> <span flex=\\\"0 0 30px\\\" class=\\\"ff-center\\\" title=\\\"{{'GLOBAL.INCLUDE' | translate}}\\\" ng-if=\\\"ffBlock.editMode\\\"><ff-icon sense=\\\"check\\\"></ff-icon></span> <cell flex=\\\"1 1 150px\\\"><span translate=\\\"BULK_INVOICING.COMPANY\\\"></span></cell> <cell flex=\\\"1 1 150px\\\"><span translate=\\\"BULK_INVOICING.USER\\\"></span></cell> <cell flex=\\\"1 0 60px\\\" class=\\\"ff-center show-sm\\\"><span translate=\\\"BULK_INVOICING.ORDER_ID\\\"></span></cell> <cell flex=\\\"3 0 45px\\\" class=\\\"ff-center show-sm\\\"><span translate=\\\"BULK_INVOICING.DATE\\\"></span></cell> <cell flex=\\\"1 2 300px\\\" class=\\\"show-md\\\"><span translate=\\\"BULK_INVOICING.COMMENTS\\\"></span></cell> <cell flex=\\\"1 0 94px\\\" class=\\\"ff-right\\\"><span translate=\\\"BULK_INVOICING.BALANCE\\\"></span></cell> <ff-btn flex=\\\"none\\\" sense=\\\"collapse\\\" size=\\\"xs\\\" class=\\\"buttons-row zero-height\\\"></ff-btn> </ff-row> </ff-header> <ff-col ng-repeat=\\\"invoice in ::vm.invoices\\\"> <ff-row class=\\\"invoice-head\\\" ng-class=\\\"{ active: !invoice.collapsed }\\\" ff-click=\\\"invoice.collapsed = !invoice.collapsed\\\"> <ff-checkbox flex=\\\"0 0 30px\\\" class=\\\"ff-center\\\" ff-model=\\\"invoice.include\\\" ng-if=\\\"ffBlock.editMode\\\"></ff-checkbox> <ff-static flex=\\\"1 1 150px\\\" ff-bind=\\\"::invoice.userCompany\\\"></ff-static> <ff-static flex=\\\"1 1 150px\\\" ff-bind=\\\"::invoice.userName\\\"></ff-static> <ff-static flex=\\\"1 0 60px\\\" class=\\\"ff-center show-sm\\\" ff-bind=\\\"::invoice.orderId\\\"></ff-static> <ff-static flex=\\\"3 0 45px\\\" class=\\\"ff-center show-sm\\\" ff-bind=\\\"::invoice.date | date:'mediumDate'\\\"></ff-static> <ff-static flex=\\\"1 2 300px\\\" class=\\\"show-md\\\" ff-bind=\\\"::invoice.comments\\\"></ff-static> <ff-static flex=\\\"1 0 94px\\\" class=\\\"ff-right\\\" ff-bind=\\\"::invoice.balance | ncurrency\\\"></ff-static> <ff-btn flex=\\\"none\\\" sense=\\\"collapse\\\" size=\\\"xs\\\" class=\\\"buttons-row\\\" title=\\\"{{'GLOBAL.BTN_VIEW' | translate}}\\\" ff-click=\\\"invoice.collapsed = !invoice.collapsed\\\" ng-class=\\\"{ collapsed: invoice.collapsed }\\\"></ff-btn> </ff-row> <ff-row ng-collapse=\\\"invoice.collapsed\\\"> <span flex=\\\"0 0 30px\\\" class=\\\"invisible\\\"></span> <dw-invoice-small invoice=\\\"invoice\\\"></dw-invoice-small> <ff-btn sense=\\\"collapse\\\" size=\\\"xs\\\" flex=\\\"none\\\" class=\\\"buttons-row zero-height\\\"></ff-btn> </ff-row> </ff-col> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"save\\\" ff-click=\\\"vm.sendInvoices()\\\"><span translate=\\\"BULK_INVOICING.BTN_SEND\\\"></span></ff-btn> </ff-btn-group> </div> </div> \";\n// Exports\nmodule.exports = code;","const index = ['$injector', function index($injector) {\n  // JS\n  const importAll = r => r.keys().map(r);\n  const js = importAll(require.context('./', true, /\\..+\\/.+\\.js$/));\n  $injector.loadNewModules(js.map(m => m.default.name));\n\n  // Templates\n  $injector.invoke(['$templateCache', function($templateCache) {\n    const ctx = require.context('./', true, /.*\\.tpl\\.html$/);\n    ctx.keys().forEach(key => $templateCache.put(key.replace(/^\\.\\//, ''), ctx(key)));\n  }]);\n}];\n\nexport default index;\n","import InvoiceLog from './invoice-log.service';\n\nexport default angular.module('deskworks.InvoiceLogCtrl', [\n  'debounce',\n  InvoiceLog.name,\n])\n\n  .controller('InvoiceLogCtrl', function($scope, $translate, dwAlerts, state, InvoiceLog, debounce) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('INVOICE_LOG.PAGE_TITLE'));\n\n    $ctrl.purchases = [];\n    $ctrl.params = {\n      centerId: state.getCurrentCenterId(),\n      offset: 0,\n      limit: 50,\n      sort: state.getParam('sort') || 'orderId',\n      order: state.getParam('order') || -1,\n      q: state.getParam('q') ||  null,\n    };\n\n    $scope.$watchCollection(() => [$ctrl.params.sort, $ctrl.params.order, $ctrl.params.q], () => {\n      state.replace();\n      state.setParam('sort', $ctrl.params.sort);\n      state.setParam('order', $ctrl.params.order);\n      state.setParam('q', $ctrl.params.q);\n    });\n\n    $ctrl.fetch = (init) => {\n      if (init) {\n        $ctrl.fetching = null;\n        $ctrl.eof = null;\n        $ctrl.params.offset = 0;\n        $ctrl.params.limit = 50;\n      }\n\n      if ($ctrl.eof || $ctrl.fetching) return $ctrl.fetching;\n      $ctrl.fetching = InvoiceLog.query($ctrl.params)\n        .catch(err => dwAlerts.error(err, 'Failed to query invoice log.'))\n        .finally(() => { $ctrl.fetching = null; })\n        .then(purchases => {\n          if (init) $ctrl.purchases = [];\n          $ctrl.purchases = $ctrl.purchases.concat(purchases);\n          $ctrl.params.offset = $ctrl.purchases.length;\n          $ctrl.eof = purchases.length < $ctrl.params.limit;\n        });\n\n      $ctrl.fetching.$$init = init;\n\n      return $ctrl.fetching;\n    };\n\n    $ctrl.fetchDebounced = debounce($ctrl.fetch, 1000);\n\n    $ctrl.edit = order => {\n      state.resetParams();\n      state.setCurrentUserId(order.userId);\n      return state.setPath('/purchases/' + order.id + '/edit');\n    };\n\n    $ctrl.view = order => {\n      state.resetParams();\n      state.setCurrentUserId(order.userId);\n      return state.setPath('/purchases/' + order.id + '/view');\n    };\n  });\n","export default angular.module('deskworks.InvoiceLog', [\n  'ngResource',\n  'deskworks.config',\n  'datesDeserializer',\n])\n\n  .factory('InvoiceLog', function($resource, $timeout, deskworksConfig, datesDeserializer) {\n    const desDates = datesDeserializer(['billDate', 'dueDate']);\n\n    const res = $resource(deskworksConfig.getApiAbsUrl('/invoice-log'), {}, {\n      query: { method: 'GET', isArray: true, transformResponse: [angular.fromJson, desDates] },\n    });\n\n    return {\n      query: (params) => res.query(params).$promise,\n    };\n  });\n","// Module\nvar code = \"<div ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v-half\\\"> <ff-panel style=\\\"max-width:320px\\\"> <ff-spin ng-if=\\\"$ctrl.fetching.$$init === 'search'\\\"></ff-spin> <ff-row> <ff-label flex=\\\"0 0 70px\\\"><span translate=\\\"GLOBAL.SEARCH\\\"></span></ff-label> <ff-text name=\\\"search\\\" ff-model=\\\"$ctrl.params.q\\\" ff-change=\\\"$ctrl.fetchDebounced('search')\\\" placeholder=\\\"order #, company, user name\\\"></ff-text> </ff-row> </ff-panel> <ff-panel> <ff-header ng-if=\\\"$ctrl.purchases.length\\\"> <ff-row> <cell flex=\\\"0 1 96px\\\"> <span translate=\\\"INVOICE_LOG.ORDER_ID\\\"></span> <ff-sort props=\\\"$ctrl.params\\\" col-id=\\\"'orderId'\\\" ff-click=\\\"$ctrl.fetch('sort')\\\"></ff-sort> </cell> <cell flex=\\\"1 1 15%\\\" class=\\\"show-sm\\\"> <span translate=\\\"INVOICE_LOG.COMPANY\\\"></span> <ff-sort props=\\\"$ctrl.params\\\" col-id=\\\"'userCompany'\\\" ff-click=\\\"$ctrl.fetch('sort')\\\"></ff-sort> </cell> <cell flex=\\\"1 1 15%\\\" class=\\\"show-md\\\"> <span translate=\\\"INVOICE_LOG.USER\\\"></span> <ff-sort props=\\\"$ctrl.params\\\" col-id=\\\"'userName'\\\" ff-click=\\\"$ctrl.fetch('sort')\\\"></ff-sort> </cell> <cell flex=\\\"0 1 110px\\\" class=\\\"ff-right\\\"> <span translate=\\\"INVOICE_LOG.DATE\\\"></span> <ff-sort props=\\\"$ctrl.params\\\" col-id=\\\"'billDate'\\\" ff-click=\\\"$ctrl.fetch('sort')\\\"></ff-sort> </cell> <cell flex=\\\"0 1 90px\\\" class=\\\"ff-right\\\"> <span translate=\\\"INVOICE_LOG.AMOUNT\\\"></span> <ff-sort props=\\\"$ctrl.params\\\" col-id=\\\"'chargesTotal'\\\" ff-click=\\\"$ctrl.fetch('sort')\\\"></ff-sort> </cell> <cell flex=\\\"0 1 90px\\\" class=\\\"ff-right\\\"> <span translate=\\\"INVOICE_LOG.BALANCE\\\"></span> <ff-sort props=\\\"$ctrl.params\\\" col-id=\\\"'balance'\\\" ff-click=\\\"$ctrl.fetch('sort')\\\"></ff-sort> </cell> <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row zero-height\\\"> <ff-btn sense=\\\"view\\\" size=\\\"xs\\\"></ff-btn> <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\"></ff-btn> </ff-btn-group> </ff-row> </ff-header> <ff-col infinite-scroll=\\\"$ctrl.fetch()\\\" infinite-scroll-distance=\\\"2\\\" infinite-scroll-container=\\\"'.snap-content-scroller'\\\"> <ff-row ng-repeat=\\\"purchase in $ctrl.purchases\\\"> <ff-static flex=\\\"0 1 96px\\\">{{::purchase.orderId}}</ff-static> <ff-static flex=\\\"1 1 15%\\\" class=\\\"show-sm\\\">{{::purchase.userCompany | nd}}</ff-static> <ff-static flex=\\\"1 1 15%\\\" class=\\\"show-md\\\">{{::purchase.userName | nd}}</ff-static> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-right\\\">{{::purchase.billDate | date:'mediumDate' | nd}}</ff-static> <ff-static flex=\\\"0 1 90px\\\" class=\\\"ff-right\\\">{{::purchase.chargesTotal | ncurrency}}</ff-static> <ff-static flex=\\\"0 1 90px\\\" class=\\\"ff-right\\\">{{::purchase.balance | ncurrency}}</ff-static> <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row\\\"> <ff-btn sense=\\\"view\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.view(purchase)\\\" title=\\\"{{'GLOBAL.BTN_VIEW' | translate}}\\\"></ff-btn> <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.edit(purchase)\\\" title=\\\"{{'GLOBAL.BTN_EDIT' | translate}}\\\"></ff-btn> </ff-btn-group> </ff-row> <div class=\\\"ff-spin ff-spin-placeholder\\\" ng-if=\\\"$ctrl.fetching && !$ctrl.fetching.$$init\\\"></div> </ff-col> <ff-row ng-if=\\\"!$ctrl.purchases.length && !$ctrl.fetching\\\" class=\\\"ff-no-frame\\\"> <ff-label>{{'GLOBAL.NONE' | translate}}</ff-label> </ff-row> </ff-panel> </div> </div> \";\n// Exports\nmodule.exports = code;","import template from './dw-invoice-small.tpl.html';\n\n/**\n * dwInvoiceSmall directive - component for displaying Deskworks specific small invoices\n */\nexport default angular.module('deskworks.dwInvoice.small', [\n  'deskworks.state',\n  'flexForms',\n  'deskworks.helper',\n])\n\n  .directive('dwInvoiceSmall', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'dwInvoiceSmallCtrl as dwInvoice',\n      bindToController: {\n        invoice: '=*',\n      },\n\n      compile: function(tElement, tAttrs) {\n        tElement.addClass('dw-invoice');\n        return function link() {};\n      }\n    };\n  })\n\n  .controller('dwInvoiceSmallCtrl', function() {\n  });\n","// Module\nvar code = \"<ff-header> <ff-row> <cell flex=\\\"10 0 50%\\\"><span translate=\\\"PURCHASE.INVOICE.DESCRIPTION\\\"></span></cell> <cell flex=\\\"3 0 45px\\\" class=\\\"ff-center show-sm\\\"><span translate=\\\"PURCHASE.INVOICE.DATE\\\"></span></cell> <cell flex=\\\"1 0 64px\\\" class=\\\"ff-right show-md\\\"><span translate=\\\"PURCHASE.INVOICE.PRICE\\\"></span></cell> <cell flex=\\\"1 0 36px\\\" class=\\\"ff-center\\\"><span translate=\\\"PURCHASE.INVOICE.QUANTITY\\\"></span></cell> <cell flex=\\\"0 0 94px\\\" class=\\\"ff-right\\\"><span translate=\\\"PURCHASE.INVOICE.AMOUNT\\\"></span></cell> </ff-row> </ff-header> <ff-row ng-repeat=\\\"item in ::dwInvoice.invoice.items\\\"> <ff-static flex=\\\"10 0 50%\\\" ff-bind=\\\"::item.description\\\"></ff-static> <ff-static flex=\\\"3 0 45px\\\" class=\\\"ff-center show-sm\\\" ff-bind=\\\"::item.date | date:'mediumDate'\\\"></ff-static> <ff-static flex=\\\"1 0 64px\\\" class=\\\"ff-right show-md\\\" ff-bind=\\\"::item.price | ncurrency\\\"></ff-static> <ff-static flex=\\\"1 0 36px\\\" class=\\\"ff-center\\\" ff-bind=\\\"::item.quantity\\\"></ff-static> <ff-static flex=\\\"0 0 94px\\\" class=\\\"ff-right\\\" ff-bind=\\\"::item.amount | ncurrency\\\"></ff-static> </ff-row> <ff-row class=\\\"invoice-charges\\\"> <ff-label><span translate=\\\"PURCHASE.INVOICE.CHARGES\\\"></span></ff-label> <ff-static flex=\\\"0 0 94px\\\" class=\\\"ff-right\\\" ff-bind=\\\"::dwInvoice.invoice.total | ncurrency\\\"></ff-static> </ff-row> <ff-row class=\\\"invoice-tax\\\" ng-repeat=\\\"tax in dwInvoice.invoice.taxes\\\"> <ff-label>{{tax.taxName}}</ff-label> <ff-static flex=\\\"0 0 94px\\\" class=\\\"ff-right\\\" ff-bind=\\\"tax.taxAmount | ncurrency\\\"></ff-static> </ff-row> <ff-row class=\\\"invoice-payment\\\"> <ff-label><span translate=\\\"PURCHASE.INVOICE.PAYMENT\\\"></span></ff-label> <ff-static flex=\\\"0 0 94px\\\" class=\\\"ff-right\\\" ff-bind=\\\"::dwInvoice.invoice.payment | ncurrency\\\"></ff-static> </ff-row> <ff-row class=\\\"invoice-balance\\\"> <ff-label><span translate=\\\"PURCHASE.INVOICE.BALANCE\\\"></span></ff-label> <ff-static flex=\\\"0 0 94px\\\" class=\\\"ff-right\\\" ff-bind=\\\"::dwInvoice.invoice.balance | ncurrency\\\"></ff-static> </ff-row> \";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}