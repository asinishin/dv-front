{"version":3,"sources":["webpack:///./bundles/reports/services/b64.service.js","webpack:///./bundles/reports/services/report-builder.service.js","webpack:///./bundles/reports/services/report-group-by.service.js","webpack:///./bundles/reports/write-off-report/write-off-report-columns.service.js","webpack:///./bundles/reports/write-off-report/write-off-report.controller.js","webpack:///./bundles/reports/write-off-report/write-off-report.service.js","webpack:///./bundles/reports/write-off-report/write-off-report.tpl.html"],"names":["angular","module","factory","$window","lookup","revLookup","Arr","Uint8Array","Array","init","code","i","len","length","charCodeAt","toByteArray","fromByteArray","b64","j","l","tmp","placeHolders","arr","Error","L","tripletToBase64","num","encodeChunk","uint8","start","end","output","push","join","extraBytes","parts","maxChunkLength","len2","reportSort","name","csvMake","jsPDF","logo","reportStyles","reportHeader","reportFooter","$rootScope","$q","$timeout","$filter","$http","state","centerService","ReportBuilder","config","self","$watch","reportOptions","centerId","newVal","oldVal","reportData","center","resolve","all","getReportData","catch","result","showError","get","getCurrentCenterId","getSiteLogo","then","buildPdf","reportDataCallback","customReportStyles","generatePdf","doc","jsPdfDoc","_","paperLayout","paperSize","data","rows","forEach","row","columns","col","idx","isUndefined","content","obj","pdf","options","title","toUpperCase","body","headStyles","bodyStyles","columnStyles","tableMargin","pageMargins","startY","didParseCell","stylesInjector","didDrawCell","hd","drawCell","didDrawPage","table","margin","autoTable","cell","column","section","defaultStyles","minCellWidth","fillColor","extend","styles","index","buildCsv","charset","isDefined","csv","unshift","Blob","generate","type","getReportFileName","reportType","postfix","centerName","shortName","reportName","toLowerCase","replace","moment","sortData","borderColor","borderWidth","setLineWidth","setDrawColor","rect","settings","left","y","getWidth","internal","pageSize","width","height","groupBy","reduce","groups","item","group","prev","isMoment","isSame","$translate","cols","dataKey","_title","defaultOrder","halign","v","translate","$on","instant","pdfPreview","reportHelper","controller","$scope","$location","helper","WriteOffReport","writeOffReportColumns","$ctrl","reportColumns","reportDates","fromDate","date","toDate","query","setPageTitle","reportBuilder","debounceTimeout","orderBy","orderSort","cancel","newDate","oldDate","blob","downloadPdf","download","fileName","downloadCsv","total","rowOdd","amount","apply","Boolean","prototype","valueOf","round","h3","$resource","datesDeserializer","deserializeNumbers","deskworksConfig","desDates","desNumbers","url","getApiAbsUrl","res","method","isArray","transformResponse","fromJson","params","$promise"],"mappings":"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","file":"reports~._bundles_reports_s.js?_rev=27d0132641694cbd1f61","sourcesContent":["/**\n * b64 service - b64.js implementation (https://github.com/beatgammit/base64-js)\n * for base64 encoding/decoding binary data (standard atob/btoa only for strings)\n */\nexport default angular.module('b64', [])\n  .factory('b64', function($window) {\n\n    var lookup = [];\n    var revLookup = [];\n    var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\n\n    function init() {\n      var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n      for(var i = 0, len = code.length; i < len; ++i) {\n        lookup[i] = code[i];\n        revLookup[code.charCodeAt(i)] = i;\n      }\n\n      revLookup['-'.charCodeAt(0)] = 62;\n      revLookup['_'.charCodeAt(0)] = 63;\n    }\n\n    init();\n\n    return {\n      toByteArray: toByteArray,\n      fromByteArray: fromByteArray\n    };\n\n    function toByteArray(b64) {\n      var i, j, l, tmp, placeHolders, arr;\n      var len = b64.length;\n\n      if(len % 4 > 0) {\n        throw new Error('Invalid string. Length must be a multiple of 4');\n      }\n\n      // the number of equal signs (place holders)\n      // if there are two placeholders, than the two characters before it\n      // represent one byte\n      // if there is only one, then the three characters before it represent 2 bytes\n      // this is just a cheap hack to not do indexOf twice\n      placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0;\n\n      // base64 is 4/3 + up to two characters of the original data\n      arr = new Arr(len * 3 / 4 - placeHolders);\n\n      // if there are placeholders, only get up to the last complete 4 chars\n      l = placeHolders > 0 ? len - 4 : len;\n\n      var L = 0;\n\n      for (i = 0, j = 0; i < l; i += 4, j += 3) {\n        tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)];\n        arr[L++] = (tmp >> 16) & 0xFF;\n        arr[L++] = (tmp >> 8) & 0xFF;\n        arr[L++] = tmp & 0xFF;\n      }\n\n      if (placeHolders === 2) {\n        tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4);\n        arr[L++] = tmp & 0xFF;\n      } else if (placeHolders === 1) {\n        tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2);\n        arr[L++] = (tmp >> 8) & 0xFF;\n        arr[L++] = tmp & 0xFF;\n      }\n\n      return arr;\n    }\n\n    function tripletToBase64(num) {\n      return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];\n    }\n\n    function encodeChunk(uint8, start, end) {\n      var tmp;\n      var output = [];\n      for(var i = start; i < end; i += 3) {\n        tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2]);\n        output.push(tripletToBase64(tmp));\n      }\n      return output.join('');\n    }\n\n    function fromByteArray(uint8) {\n      var tmp;\n      var len = uint8.length;\n      var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n      var output = '';\n      var parts = [];\n      var maxChunkLength = 16383; // must be multiple of 3\n\n      // go through the array every three bytes, we'll deal with trailing stuff later\n      for(var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n        parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)));\n      }\n\n      // pad the end with zeros, but make sure to not forget the extra bytes\n      if(extraBytes === 1) {\n        tmp = uint8[len - 1];\n        output += lookup[tmp >> 2];\n        output += lookup[(tmp << 4) & 0x3F];\n        output += '==';\n      } else if(extraBytes === 2) {\n        tmp = (uint8[len - 2] << 8) + (uint8[len - 1]);\n        output += lookup[tmp >> 10];\n        output += lookup[(tmp >> 4) & 0x3F];\n        output += lookup[(tmp << 2) & 0x3F];\n        output += '=';\n      }\n\n      parts.push(output);\n\n      return parts.join('');\n    }\n\n  });\n","import reportSort from 'shared/reports/services/report-sort.service';\nimport csvMake from 'shared/reports/services/csv-make.service';\nimport jsPDF from 'shared/reports/services/jspdf.service';\nimport logo from 'shared/reports/services/logo.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportHeader from 'shared/reports/services/report-header.service';\nimport reportFooter from 'shared/reports/services/report-footer.service';\n\n/**\n * Report generator service - creates report configuration from report data to create PDF via pdfMake\n */\nexport default angular.module('deskworks.reports.ReportBuilder', [\n  reportSort.name,\n  csvMake.name,\n  jsPDF.name,\n  logo.name,\n  reportStyles.name,\n  reportHeader.name,\n  reportFooter.name,\n  'deskworks.center.service'\n])\n  .factory('ReportBuilder', function($rootScope, $q, $timeout, $window, $filter, $http,\n                                     state, logo, jsPDF, csvMake, centerService, reportStyles, reportHeader,\n                                     reportFooter, reportSort) {\n\n    return ReportBuilder;\n\n    /**\n     * Report builder class.\n     * @constructor\n     */\n    function ReportBuilder(config) {\n      var self = this;\n\n      /**\n       * Watch for center change and invalidate config.reportData and config.center cache\n       */\n      $rootScope.$watch(function() { return config.reportOptions.centerId; }, function(newVal, oldVal) {\n        if(newVal !== oldVal) {\n          config.reportData = null;\n          config.center = null;\n        }\n      });\n\n      /**\n       * Resolve report dependencies before building like reportData, center, logoDataUrl\n       */\n      self.resolve = function() {\n        return $q.all({\n          reportData: config.reportData || config.getReportData().catch(function(result) { return $rootScope.showError(result, 'Failed to load report data.'); }),\n          center: config.center || centerService.get(+config.reportOptions.centerId || state.getCurrentCenterId()).catch(function(result) { return $rootScope.showError(result, 'Failed to load center data.'); }),\n          logo: config.logo || logo.getSiteLogo()\n        })\n          .then(function(result) {\n            config.reportData = result.reportData;\n            config.center = result.center;\n            config.logo = result.logo;\n            return config;\n          });\n      };\n\n      /**\n       * Build PDF report\n       */\n      self.buildPdf = function(reportDataCallback, customReportStyles) {\n        return self.generatePdf(reportDataCallback, customReportStyles)\n          .then(function(doc) {\n            return doc.output('blob');\n          });\n      };\n\n      /**\n       * Generate PDF report\n       */\n      self.generatePdf = function(reportDataCallback, customReportStyles, jsPdfDoc) {\n        return self.resolve().then(_ => {\n          const doc = jsPdfDoc || new jsPDF(config.reportOptions.paperLayout, 'pt', config.reportOptions.paperSize);\n          const data = reportDataCallback(config);\n\n          // Format data\n          data.rows.forEach(row => {\n            data.columns.forEach((col, idx) => {\n              if (!row[idx] || angular.isUndefined(row[idx].content)) row[idx] = { content: row[idx] };\n              const obj = row[idx];\n              if (obj.content === false) {\n                obj.content = '';\n              } else {\n                if (col.pdf) { obj.content = col.pdf(obj.content); } // pdf formatter\n                obj.content = angular.isUndefined(obj.content) || obj.content === null || obj.content === '' ? '-' : obj.content;\n              }\n            });\n          });\n\n          const options = {\n            columns: data.columns.map(col => col.title.toUpperCase()),\n            body: data.rows,\n            headStyles: (customReportStyles || reportStyles).headStyles,\n            bodyStyles: (customReportStyles || reportStyles).bodyStyles,\n            columnStyles: (customReportStyles || reportStyles).columnStyles,\n            tableMargin: customReportStyles && customReportStyles.tableMargin || (customReportStyles || reportStyles).pageMargins,\n            startY: config.startY || (customReportStyles || reportStyles).startY || false,\n            didParseCell: stylesInjector,\n            didDrawCell: hd => drawCell(hd, data.columns),\n            didDrawPage: data => {\n              (config.reportHeader || reportHeader)(data.table, doc, config);\n              (config.reportFooter || reportFooter)(data.table, doc, config);\n            },\n          };\n\n          options.margin = options.tableMargin || (customReportStyles || reportStyles).pageMargins;\n\n          doc.autoTable(options);\n\n          return doc;\n\n          function stylesInjector(hd) { // Hook for individual row/cell styling\n            const { row, cell, column, section } = hd;\n            if (section === 'body') {\n              const defaultStyles = { minCellWidth: 50, fillColor: false };\n              angular.extend(cell.styles, defaultStyles, data.styles[row.index], data.columns[column.index].styles);\n            } else {\n              angular.extend(cell.styles, data.columns[column.index].styles);\n            }\n          }\n        });\n      };\n\n      /**\n       * Build CSV report\n       */\n      self.buildCsv = function(reportDataCallback) {\n        const options = { charset: 'utf-8' };\n        const data = reportDataCallback(config);\n\n        // Format data\n        data.rows.forEach(row=> {\n          data.columns.forEach((col, idx) => {\n            // TODO: generate colSpan\n            if (row[idx] && angular.isDefined(row[idx].content)) row[idx] = row[idx].content;\n            if (col.csv) { row[idx] = col.csv(row[idx]); } // csv formatter\n            row[idx] = angular.isUndefined(row[idx]) || row[idx] === null || row[idx] === false || row[idx] === '' ? '' : row[idx];\n          });\n        });\n\n        data.rows.unshift(data.columns.map(col => col.title.toUpperCase()));\n\n        return new Blob([csvMake.generate(data.rows, options)], { type: 'text/csv;charset=' + options.charset + ';' });\n      };\n\n      /**\n       * Builds report file name: report-name_center-name_yyyy-MM-dd_HH-mm-ss.type\n       */\n      self.getReportFileName = function(reportType, postfix) {\n        var centerName = (config.reportOptions.centerId === false || +config.reportOptions.centerId ? config.center.shortName : 'all-centers');\n        var reportName = config.reportName;\n        centerName = (centerName || '').toLowerCase().replace(/\\s+/g, '-');\n        reportName = (reportName || '').toLowerCase().replace(/\\s+/g, '-');\n        reportType = (reportType || 'pdf').toLowerCase();\n        return reportName + '-' + centerName + '-' + $filter('date')(moment(), 'yyyyMMdd-HHmmss') + (postfix || '') + '.' + reportType;\n      };\n\n      /**\n       * Sort reportData by order.\n       * Filter unsortable data (undefined/null/'') and concatenate it to the end of sorted list.\n       */\n      self.sortData = reportSort;\n\n      /**\n       * Custom Cell Renderer\n       */\n      function drawCell(data, columns) {\n        const { cell, doc } = data;\n        // Border\n        if (data.column.index === 0 && cell.styles.borderColor && cell.styles.borderWidth) {\n          // if(data.row.index < 0) data.row.y = data.settings.margin.top; // for border in headerRow\n          doc.setLineWidth(cell.styles.borderWidth);\n          doc.setDrawColor(cell.styles.borderColor[0], cell.styles.borderColor[1], cell.styles.borderColor[2]);\n          doc.rect(\n            data.settings.margin.left + cell.styles.borderWidth / 2,\n            cell.y + cell.styles.borderWidth / 2,\n            data.table.getWidth(doc.internal.pageSize.width) - cell.styles.borderWidth,\n            data.row.height - cell.styles.borderWidth * 2,\n            'S'\n          );\n        }\n\n        return false;\n      }\n    }\n  });\n","import reportSort from '../../../shared/reports/services/report-sort.service';\n\nexport default angular.module('deskworks.reportGroupBy', [\n  reportSort.name,\n])\n\n  .factory('reportGroupBy', (reportSort) => (reportData, groupBy) => {\n    return reportSort(reportData, groupBy)\n      .reduce((groups, item) => {\n        let group = groups[groups.length - 1] || [];\n        const prev = group[0] || {};\n\n        if (prev[groupBy] !== item[groupBy] && (!moment.isMoment(prev[groupBy]) || !moment.isMoment(item[groupBy]) || !prev[groupBy].isSame(item[groupBy], 'day'))) {\n          group = []; // new group\n          groups.push(group);\n        }\n        group.push(item);\n\n        return groups;\n      }, []);\n  });\n","/**\n * Columns for Write Off Report\n */\nexport default angular.module('deskworks.writeOffReportColumns', [])\n\n  .factory('writeOffReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'userCompany', _title: 'WRITE_OFF_REPORT.COLUMNS.COMPANY',\n      },\n      {\n        dataKey: 'userName', _title: 'WRITE_OFF_REPORT.COLUMNS.NAME', defaultOrder: true,\n      },\n      {\n        dataKey: 'orderId', _title: 'WRITE_OFF_REPORT.COLUMNS.ORDER_ID',\n        styles: { halign: 'right' },\n      },\n      {\n        dataKey: 'date', _title: 'WRITE_OFF_REPORT.COLUMNS.DATE',\n        styles: { halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'amount', _title: 'WRITE_OFF_REPORT.COLUMNS.AMOUNT',\n        styles: { halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.WriteOffReportCtrl', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportDates',\n  'deskworks.WriteOffReport',\n  'deskworks.writeOffReportColumns',\n  'deskworks.reportOrderBy',\n])\n\n  .controller('WriteOffReportCtrl', function($scope, $timeout, $translate, $filter, $location, helper, state, reportHelper,\n                                             reportStyles, ReportBuilder, WriteOffReport, writeOffReportColumns) {\n\n    const $ctrl = this;\n\n    $ctrl.config = {\n      reportName: $translate.instant('WRITE_OFF_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportColumns: writeOffReportColumns,\n      reportDates: { fromDate: moment().date(1), toDate: moment() },\n      getReportData: () => {\n        return WriteOffReport.query({\n          centerId: $ctrl.config.reportOptions.centerId || null,\n          fromDate: $filter('date')($ctrl.config.reportDates.fromDate, 'yyyy-MM-dd'),\n          toDate: $filter('date')($ctrl.config.reportDates.toDate, 'yyyy-MM-dd'),\n        });\n      },\n    };\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    $ctrl.reportBuilder = new ReportBuilder($ctrl.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    let debounceTimeout;\n    $scope.$watch(() => {\n      return { reportOptions: $ctrl.config.reportOptions, reportDates: $ctrl.config.reportDates, orderBy: $ctrl.config.orderBy, orderSort: $ctrl.config.orderSort };\n    }, (newVal, oldVal) => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(() => {\n        $ctrl.pdf = null;\n        if (angular.isUndefined($ctrl.config.reportOptions.centerId)) return;\n\n        if (!$ctrl.config.reportDates.fromDate || !$ctrl.config.reportDates.toDate) return;\n\n        let newDate = newVal.reportDates.fromDate, oldDate = oldVal.reportDates.fromDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) $ctrl.config.reportData = null;\n\n        newDate = newVal.reportDates.toDate; oldDate = oldVal.reportDates.toDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) $ctrl.config.reportData = null;\n\n        $ctrl.reportBuilder.buildPdf(reportDataCallback)\n          .then(blob => { $ctrl.pdf = blob; });\n      }, 100);\n    }, true);\n\n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = () => {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.pdf, fileName: $ctrl.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    $ctrl.downloadCsv = () => {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.reportBuilder.buildCsv(reportDataCallback), fileName: $ctrl.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns,\n        rows: [],\n        styles: [],\n      };\n\n      let total = 0;\n\n      result.rows = reportHelper.sort(config.reportData, config.orderBy)\n        .map((data, idx) => {\n          result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n          total += data.amount;\n          return result.columns.map(col => data[col.dataKey]);\n        });\n\n      result.rows.push(Array.apply(null, Array(result.columns.length - 2)).map(Boolean.prototype.valueOf, false)\n        .concat([$translate.instant('REPORTS.TOTAL') + ':', helper.round(total)]));\n      result.styles.push(reportStyles.h3);\n\n      return result;\n    }\n  });\n","/**\n * WriteOffReport service\n */\nexport default angular.module('deskworks.WriteOffReport', [\n  'ngResource',\n  'datesDeserializer',\n  'deserializeNumbers',\n  'deskworks.config',\n])\n\n  .factory('WriteOffReport', function($resource, datesDeserializer, deserializeNumbers, deskworksConfig) {\n    const desDates = datesDeserializer(['date']);\n    const desNumbers = deserializeNumbers(['amount']);\n    const url = deskworksConfig.getApiAbsUrl('/write-off-report');\n\n    const res = $resource(url, { centerId: '@centerId', fromDate: '@fromDate', toDate: '@toDate' }, {\n      query: { method: 'GET', isArray: true, transformResponse: [angular.fromJson, desDates, desNumbers] },\n    });\n\n    return {\n      query: params => res.query(params).$promise,\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"writeOffReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formWriteOffReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <report-dates model=\\\"$ctrl.config.reportDates\\\"></report-dates> </div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <report-options model=\\\"$ctrl.config.reportOptions\\\"> <report-order-by model=\\\"$ctrl.config.orderBy\\\" report-columns=\\\"$ctrl.config.reportColumns\\\"></report-order-by> </report-options> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}