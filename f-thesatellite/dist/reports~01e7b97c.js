(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{"//ZJ":function(e,t,r){"use strict";r.r(t);r("Muwe"),r("X5mX"),r("y89P");var n=r("pEUA"),o=r.n(n);t.default=angular.module("deskworks.reports.reportDates",["deskworks.helper"]).directive("reportDates",["$compile","$templateCache",function(e,t){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportDatesCtrl as $ctrl",bindToController:{model:"<",embed:"@"},link:function(t,r,n,a,l){l((function(n,a){var l=e(o.a)(t);angular.element(l[0].querySelector?l[0].querySelector(".ff-panel-body"):l).append(n),r.after(l)}))}}}]).controller("ReportDatesCtrl",["$scope","$location","$filter","state","helper",function(e,t,r,n,o){var a=this;a.$onInit=function(){!1!==a.model.fromDate&&(e.$watch((function(){return t.search().fromDate}),(function(e){var t=r("toDate")(e);a.model.fromDate=moment.isMoment(t)&&!a.model.fromDate.isSame(t)?t:a.model.fromDate})),e.$watch("$ctrl.model.fromDate",(function(e){moment.isMoment(e)&&t.search("fromDate",r("date")(e,"yyyy-MM-dd")).replace()}))),!1!==a.model.toDate&&(e.$watch((function(){return t.search().toDate}),(function(e){var t=r("toDate")(e);a.model.toDate=moment.isMoment(t)&&!a.model.toDate.isSame(t)?t:a.model.toDate})),e.$watch("$ctrl.model.toDate",(function(e){moment.isMoment(e)&&t.search("toDate",r("date")(e,"yyyy-MM-dd")).replace()})))}}])},"/MGB":function(e,t,r){var n={"./accounts-receivable-report/accounts-receivable-report.tpl.html":"/cev","./availability-report/availability-report.tpl.html":"ZfFK","./check-in-report/check-in-report.tpl.html":"TVyk","./credit-balance-report/credit-balance-report.tpl.html":"lfjW","./deposit-and-tax-report/deposit-and-tax-report.tpl.html":"AOdW","./deposit-transaction-report/deposit-transaction-report.tpl.html":"HIxv","./directives/report-columns.tpl.html":"LLH2","./directives/report-dates.tpl.html":"pEUA","./directives/report-order-by.tpl.html":"73rf","./directives/report-owner-region.tpl.html":"U+0Z","./income-by-item-report/income-by-item-report.tpl.html":"UUPn","./income-report/income-report.tpl.html":"pvmN","./mailbox-report/mailbox-report.tpl.html":"iTQj","./member-statement/member-statement.tpl.html":"C/0G","./member-usage-report/member-usage-report.tpl.html":"lKYt","./membership-report/membership-report.tpl.html":"EKM0","./pass-usage-report/pass-usage-report.tpl.html":"r4Q0","./passport-reservation-usage-report/passport-reservation-usage-report.tpl.html":"UxRA","./payment-reconciliation-report/payment-reconciliation-report.tpl.html":"Cv9t","./price-list-report/price-list-report.tpl.html":"CR4+","./product-report/product-report.tpl.html":"fVm0","./recurring-billing-change-report/recurring-billing-change-report.tpl.html":"2Xc8","./recurring-billing-churn-report/recurring-billing-churn-report.tpl.html":"nabW","./recurring-billing-report/recurring-billing-report.tpl.html":"GGg2","./rent-roll-report/rent-roll-report.tpl.html":"tmk0","./reservation-income-report/reservation-income-report.tpl.html":"exTJ","./reservation-report/reservation-report.tpl.html":"+1+s","./reservation-usage-report/reservation-usage-report.tpl.html":"BEjt","./reservation-utilization-report/reservation-utilization-report.tpl.html":"nJHl","./revenue-forecast-report/revenue-forecast-report.tpl.html":"nUUl","./royalty-report/royalty-report.tpl.html":"L8do","./security-deposit-report/security-deposit-report.tpl.html":"kJoc","./write-off-report/write-off-report.tpl.html":"aHVT"};function o(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id="/MGB"},"/cev":function(e,t){e.exports='<div id="accountsReceivableReport" class="gutter-v"> <form name="formAccountsReceivableReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 65%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-dates model="vm.config.reportDates"></report-dates> <report-columns model="vm.config.reportColumns"></report-columns> </div> </div> <div flex="{lg: \'0 0 35%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="vm.config.reportOptions"> <report-order-by model="vm.config.orderBy" report-columns="vm.config.reportColumns.columns"></report-order-by> <ff-static> <label> <ff-checkbox ff-model="vm.config.credits"><span translate="ACCOUNTS_RECEIVABLE_REPORT.DISPLAY_CREDITS"></span></ff-checkbox> </label> </ff-static> </report-options> <report-owner-region model="vm.config.reportOwnerRegion" report-data="vm.config.reportData"></report-owner-region> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="vm.downloadPdf()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="vm.downloadCsv()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="vm.pdf"></div> </ff-panel> </div> '},"2+c3":function(e,t,r){"use strict";r.r(t);var n=r("03wM"),o=r.n(n),a=r("Ekwr"),l=r.n(a),i=r("lvz6"),s=r.n(i),c=r("yKah"),u=r.n(c),d=r("fzuT"),f=r.n(d),p=(r("Muwe"),r("y89P"),r("3dw1"),r("hsT8")),m=r.n(p),g=r("yCd9"),h=r.n(g),R=r("NOor"),v=r.n(R),y=r("6RpP"),O=r.n(y),E=r("ipr/"),T=r.n(E),C=r("WgSX"),_=r("G6E5"),b=r("5/DJ"),w=r("LTMe");function D(e,t){var r=o()(e);if(l.a){var n=l()(e);t&&(n=m()(n).call(n,(function(t){return s()(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){f()(e,t,r[t])})):u.a?Object.defineProperties(e,u()(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,s()(r,t))}))}return e}t.default=angular.module("deskworks.reports.depositTransactionReport",[C.a.name,_.a.name,b.a.name,w.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOwnerRegion","deskworks.reports.depositTransactionReport.service","deskworks.reports.depositTransactionReportColumns"]).controller("DepositTransactionReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","reportStyles","ReportBuilder","reportHelper","DepositTransactionReport","depositTransactionReportColumns","banks","centers",function(e,t,r,n,o,a,l,i,s,c,u,d,f){var p,g=this;function R(e){var t,r,o,a={columns:m()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:[],styles:[]},i=h()(r=Array.apply(null,new Array(a.columns.length))).call(r,(function(e){return!1}));return e.reportData.forEach((function(t,r){var s,c,u,d;(o=v()(s=a.columns).call(s,(function(e){return"total"===e.dataKey})))>=0&&(a.rows.push(O()(c=O()(u=O()(d=[t.date]).call(d,T()(i).call(i,0,Math.max(o-2,0)))).call(u,o>1?[n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.DAILY")+":",t.total]:[t.total])).call(c,T()(i).call(i,0,i.length-o-1))),a.styles.push(l.h1));t.billingMethods.forEach((function(t){var r,s,c,u,d;(o=v()(r=a.columns).call(r,(function(e){return"subtotal"===e.dataKey})))>=0&&(a.rows.push(0===o?[t.subtotal]:O()(c=O()(u=O()(d=[t.name+" "+n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.DEPOSITS")]).call(d,T()(i).call(i,0,Math.max(o-3,0)))).call(u,o>2?[t.name+" "+n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",!1,t.subtotal]:2===o?[t.name+" "+n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",t.subtotal]:1===o?[t.subtotal]:[])).call(c,T()(i).call(i,0,i.length-o-1))),a.styles.push(l.h2));g.reportBuilder.sortData(O()([]).apply([],h()(s=t.centers).call(s,(function(e){return e.payments}))),e.orderBy).forEach((function(e,t){var r;a.rows.push(h()(r=a.columns).call(r,(function(t){return"subtotal"!==t.dataKey&&"total"!==t.dataKey&&e[t.dataKey]}))),a.styles.push(t%2?null:l.rowOdd)})),t.centers.forEach((function(e){var t,r,s;(o=v()(t=a.columns).call(t,(function(e){return"subtotal"===e.dataKey})))>=0&&a.rows.push(O()(r=O()(s=T()(i).call(i,0,Math.max(o-2,0))).call(s,o>2?[e.name+" "+n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",!1,e.subtotal]:o>0?[e.name+" "+n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",e.subtotal]:[e.subtotal])).call(r,T()(i).call(i,0,i.length-o-1)));a.styles.push(l.h3)})),a.rows.push(T()(i).call(i)),a.styles.push(null)}))})),a}g.config={reportName:n.instant("DEPOSIT_TRANSACTION_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:u},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return c.query({bankId:g.config.reportOptions.bankId,centerId:g.config.reportOptions.centerId||null,fromDate:r("date")(g.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(g.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:g.config.reportOwnerRegion.ownerId,regionId:g.config.reportOwnerRegion.regionId})}},o.setPageTitle(g.config.reportName),g.config.reportDates.fromDate.subtract(1,"M").date(1),g.config.reportDates.toDate.date(0),g.reportBuilder=new i(g.config),e.$watch("vm.config.reportOptions.bankId",(function(e){e&&(g.centers=m()(f).call(f,(function(t){return t.bankId===e})),g.centers.unshift({id:0,name:"All Centers"}),a.findByKeyValue(g.centers,"id",g.config.reportOptions.centerId)||(g.config.reportOptions.centerId=g.centers[0].id,o.setParam("centerId",g.config.reportOptions.centerId),o.replace()))})),e.$watch((function(){return{reportOptions:g.config.reportOptions,reportDates:g.config.reportDates,reportColumns:g.config.reportColumns,reportOwnerRegion:g.config.reportOwnerRegion,orderBy:g.config.orderBy}}),(function(e,r){p&&(t.cancel(p),p=null),p=t((function(){if(g.pdf=null,!angular.isUndefined(g.config.reportOptions.bankId)){var t=e.reportDates.fromDate,n=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(g.config.reportData=null),t=e.reportDates.toDate,n=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(g.config.reportData=null),e.reportOptions.bankId!==r.reportOptions.bankId&&(g.config.reportData=null),g.reportBuilder.buildPdf(R,null,I(I({},g.config),{},{reportDates:I({},g.config.reportDates)})).then((function(e){g.pdf=e}))}}),100)}),!0),g.downloadPdf=function(){g.pdf&&s.download({blob:g.pdf,fileName:g.reportBuilder.getReportFileName("pdf")})},g.downloadCsv=function(){g.pdf&&s.download({blob:g.reportBuilder.buildCsv(R),fileName:g.reportBuilder.getReportFileName("csv")})}}])},"7/Y1":function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.checkInReportTotalsColumns",[]).factory("checkInReportTotalsColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userName",_title:"CHECK_IN_REPORT.COLUMNS.NAME"},{dataKey:"userCompany",_title:"CHECK_IN_REPORT.COLUMNS.COMPANY"},{dataKey:"totalHoursTimeRange",_title:"CHECK_IN_REPORT.COLUMNS.TOTAL_HOURS_TIME_RANGE",halign:"right",pdf:function(e){return t("hoursMinutes")(e)},csv:function(e){return t("hoursMinutes")(e)}},{dataKey:"date",_title:"CHECK_IN_REPORT.COLUMNS.DATE",halign:"right",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"totalHoursDay",_title:"CHECK_IN_REPORT.COLUMNS.TOTAL_HOURS_DAY",halign:"right",pdf:function(e){return t("hoursMinutes")(e)},csv:function(e){return t("hoursMinutes")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},"73rf":function(e,t){e.exports='<label class="ff-row" ng-repeat="level in $ctrl.levels track by $index"> <ff-label flex="0 0 100px"> <span translate="REPORTS.COLUMNS.ORDER_BY" ng-if="!$index"></span> <span translate="REPORTS.COLUMNS.THEN_ORDER_BY" ng-if="$index" style="font-size:.925em"></span> </ff-label> <ff-select ff-model="level.order" ff-options="col.dataKey as col.title for col in level.cols"></ff-select> </label> '},"76E7":function(e,t,r){"use strict";t.a=r.p+"./assets/lato-regular.ttf?_rev=1a161b4d22d2947c3d3e35d012305208"},"8g2Y":function(e,t,r){var n={"./accounts-receivable-report/accounts-receivable-report-columns.service.js":"QU59","./accounts-receivable-report/accounts-receivable-report.controller.js":"Ytnt","./accounts-receivable-report/accounts-receivable-report.service.js":"xU/f","./availability-report/availability-report-columns.service.js":"vopJ","./availability-report/availability-report.controller.js":"TGNl","./availability-report/availability-report.service.js":"nkhl","./check-in-report/check-in-report-bar-chart.service.js":"cjYI","./check-in-report/check-in-report-columns.service.js":"U+9+","./check-in-report/check-in-report-totals-columns.service.js":"7/Y1","./check-in-report/check-in-report.controller.js":"ynEu","./check-in-report/check-in-report.service.js":"Gago","./credit-balance-report/credit-balance-report-columns.service.js":"h5Ea","./credit-balance-report/credit-balance-report.controller.js":"kCKf","./credit-balance-report/credit-balance-report.service.js":"Iitq","./deposit-and-tax-report/deposit-and-tax-report-columns.service.js":"9Ui5","./deposit-and-tax-report/deposit-and-tax-report.controller.js":"WCm8","./deposit-and-tax-report/deposit-and-tax-report.service.js":"R1ro","./deposit-transaction-report/deposit-transaction-report-columns.service.js":"xWoj","./deposit-transaction-report/deposit-transaction-report.controller.js":"2+c3","./deposit-transaction-report/deposit-transaction-report.service.js":"ukw3","./directives/report-columns.directive.js":"MKNM","./directives/report-dates.directive.js":"//ZJ","./directives/report-order-by.directive.js":"ZimX","./directives/report-owner-region.directive.js":"OeSc","./income-by-item-report/income-by-item-report-chart.service.js":"UQFN","./income-by-item-report/income-by-item-report-columns.service.js":"sSbM","./income-by-item-report/income-by-item-report-data.service.js":"F6ya","./income-by-item-report/income-by-item-report.controller.js":"MmAi","./income-by-item-report/income-by-member-report-columns.service.js":"kUla","./income-by-item-report/income-by-member-report-data.service.js":"uFJl","./income-by-item-report/income-by-order-report-columns.service.js":"UMDU","./income-by-item-report/income-by-order-report-data.service.js":"Grkc","./income-report/income-report-columns.service.js":"Du13","./income-report/income-report.controller.js":"vtWt","./income-report/income-report.service.js":"Mvrh","./mailbox-report/mailbox-report-columns.service.js":"IWno","./mailbox-report/mailbox-report.controller.js":"HFgu","./mailbox-report/mailbox-report.service.js":"L+wq","./member-statement/member-statement-columns.service.js":"haNf","./member-statement/member-statement.controller.js":"SeF/","./member-statement/member-statement.service.js":"aRIa","./member-usage-report/member-usage-report-columns.service.js":"rlfb","./member-usage-report/member-usage-report.controller.js":"U9c4","./member-usage-report/member-usage-report.service.js":"PjE5","./membership-report/membership-report-columns.service.js":"3DDD","./membership-report/membership-report.controller.js":"2S09","./membership-report/membership-report.service.js":"8scq","./pass-usage-report/pass-usage-report-columns.service.js":"wASb","./pass-usage-report/pass-usage-report.controller.js":"KMep","./pass-usage-report/pass-usage-report.service.js":"xl4I","./passport-reservation-usage-report/passport-reservation-usage-report-columns.service.js":"o/Kf","./passport-reservation-usage-report/passport-reservation-usage-report.controller.js":"Iy44","./passport-reservation-usage-report/passport-reservation-usage-report.service.js":"iEZ8","./payment-reconciliation-report/payment-reconciliation-report-columns.service.js":"4c/s","./payment-reconciliation-report/payment-reconciliation-report.controller.js":"Evl7","./payment-reconciliation-report/payment-reconciliation-report.service.js":"cavp","./price-list-report/price-list-report-columns.service.js":"Mmgn","./price-list-report/price-list-report.controller.js":"6avE","./price-list-report/price-list-report.service.js":"SoPU","./product-report/product-report-columns.service.js":"iYz6","./product-report/product-report-data.service.js":"ID+u","./product-report/product-report.controller.js":"FxCl","./product-report/product-report.service.js":"C1lC","./recurring-billing-change-report/opts-rbc-report-by-period.service.js":"0o3Q","./recurring-billing-change-report/recurring-billing-change-chart.service.js":"VHZd","./recurring-billing-change-report/recurring-billing-change-data.service.js":"SeLF","./recurring-billing-change-report/recurring-billing-change-report-columns.service.js":"ogb4","./recurring-billing-change-report/recurring-billing-change-report.controller.js":"EMP2","./recurring-billing-change-report/recurring-billing-change-report.service.js":"yvW+","./recurring-billing-churn-report/recurring-billing-churn-report-columns.service.js":"b2oW","./recurring-billing-churn-report/recurring-billing-churn-report.controller.js":"UbAC","./recurring-billing-churn-report/recurring-billing-churn-report.service.js":"liLb","./recurring-billing-report/recurring-billing-report-columns.service.js":"LM7I","./recurring-billing-report/recurring-billing-report.controller.js":"ZfRm","./recurring-billing-report/recurring-billing-report.service.js":"dd2W","./rent-roll-report/rent-roll-report-columns.service.js":"VbF8","./rent-roll-report/rent-roll-report.controller.js":"+aob","./rent-roll-report/rent-roll-report.service.js":"Afy5","./reservation-income-report/reservation-income-report-columns.service.js":"KYoW","./reservation-income-report/reservation-income-report.controller.js":"iLQO","./reservation-income-report/reservation-income-report.service.js":"yeBZ","./reservation-report/reservation-report-columns.service.js":"vRPl","./reservation-report/reservation-report.controller.js":"LJmX","./reservation-report/reservation-report.service.js":"IWz8","./reservation-usage-report/reservation-usage-report-columns.service.js":"KkfT","./reservation-usage-report/reservation-usage-report.controller.js":"qctg","./reservation-usage-report/reservation-usage-report.service.js":"piGw","./reservation-utilization-report/reservation-utilization-actual-expected-aggregate.service.js":"7ZQE","./reservation-utilization-report/reservation-utilization-actual-expected-chart.service.js":"vRjO","./reservation-utilization-report/reservation-utilization-actual-expected-columns.service.js":"5q+n","./reservation-utilization-report/reservation-utilization-actual-expected-report.service.js":"3Ei7","./reservation-utilization-report/reservation-utilization-detailed-actual-aggregate.service.js":"Amco","./reservation-utilization-report/reservation-utilization-detailed-actual-chart.service.js":"Tx5W","./reservation-utilization-report/reservation-utilization-detailed-actual-columns.service.js":"oMHk","./reservation-utilization-report/reservation-utilization-detailed-actual-report.service.js":"ycie","./reservation-utilization-report/reservation-utilization-report.controller.js":"1THZ","./reservation-utilization-report/reservation-utilization-report.service.js":"qhd7","./revenue-forecast-report/revenue-forecast-chart.service.js":"4DcZ","./revenue-forecast-report/revenue-forecast-data.service.js":"Jqji","./revenue-forecast-report/revenue-forecast-report-columns.service.js":"rrwk","./revenue-forecast-report/revenue-forecast-report.controller.js":"hUWN","./revenue-forecast-report/revenue-forecast-report.service.js":"Zdj5","./royalty-report/royalty-report-columns.service.js":"uH5N","./royalty-report/royalty-report-data.service.js":"HoW3","./royalty-report/royalty-report.controller.js":"lfjC","./security-deposit-report/security-deposit-report-columns.service.js":"UUql","./security-deposit-report/security-deposit-report.controller.js":"hlyU","./security-deposit-report/security-deposit-report.service.js":"JAJz","./services/b64.service.js":"zvMh","./services/report-builder.service.js":"5+k5","./services/report-group-by.service.js":"92Gs","./write-off-report/write-off-report-columns.service.js":"h0ZB","./write-off-report/write-off-report.controller.js":"5ual","./write-off-report/write-off-report.service.js":"fKuI"};function o(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id="8g2Y"},"9Ui5":function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.depositAndTaxReportColumns",[]).factory("depositAndTaxReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userName",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.NAME",include:!0,defaultOrder:!0},{dataKey:"userCompany",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.COMPANY",include:!0},{dataKey:"orderId",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.ORDER_ID",include:!0,styles:{halign:"right"}},{dataKey:"productName",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.ITEM",include:!0},{dataKey:"productCode",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.ITEM_CODE",include:!0,styles:{halign:"right"}},{dataKey:"amountTaxable",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.TAXABLE_AMOUNT",include:!0,styles:{halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"amountNonTaxable",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.NON_TAXABLE_AMOUNT",include:!0,styles:{halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"subtotal",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.SUBTOTAL",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"tax",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.TAX",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.TOTAL",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},AOdW:function(e,t){e.exports='<div id="depositAndTaxReport" class="gutter-v"> <form name="formDepositAndTaxReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-dates model="$ctrl.config.reportDates"></report-dates> </div> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <report-options model="$ctrl.config.reportOptions"> </report-options> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},Du13:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.incomeReportColumns",[]).factory("incomeReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userCompany",_title:"INCOME_REPORT.COLUMNS.COMPANY",include:!0,styles:{minCellWidth:250}},{dataKey:"userName",_title:"INCOME_REPORT.COLUMNS.NAME",include:!0,styles:{minCellWidth:200}},{dataKey:"date",_title:"INCOME_REPORT.COLUMNS.DATE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"method",_title:"INCOME_REPORT.COLUMNS.METHOD",include:!0,styles:{cellWidth:"wrap"}},{dataKey:"amount",_title:"INCOME_REPORT.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},F6ya:function(e,t,r){"use strict";r.r(t);r("3dw1"),r("8cZI");var n=r("hsT8"),o=r.n(n),a=r("yCd9"),l=r.n(a);t.default=angular.module("deskworks.reports.incomeByItemReportData",[]).factory("incomeByItemReportData",["$filter","$translate","helper","reportStyles",function(e,t,r,n){return function(e,a){var i,s={columns:o()(i=e.columns).call(i,(function(e){return e.include})),rows:[],styles:[]},c=0;return a.forEach((function(e){var o=0;s.rows.push([{content:t.instant("INCOME_BY_ITEM_REPORT.TOTALS.ITEM_TYPE")+": "+e.name,colSpan:s.columns.length}]),s.styles.push(n.h1),e.productCategories.forEach((function(e){var a=0;e.products.forEach((function(e,t){var o,i=l()(o=s.columns).call(o,(function(t){return e[t.dataKey]}));i[i.length-1]=i[i.length-2]=!1,s.rows.push(i),s.styles.push(t%2?null:n.rowOdd),a+=r.toNumber(e.amount)})),o+=a;var i=r.join([t.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL"),e.name,"["+e.code+"]"]," ")+":";s.rows.push([{content:i,colSpan:s.columns.length-2,styles:{halign:"right"}},r.round(a),!1]),s.styles.push(n.h2)})),c+=o,s.rows.push([{content:t.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL")+" "+e.name+":",colSpan:s.columns.length-1,styles:{halign:"right"}},r.round(o)]),s.styles.push(n.h3),s.rows.push([{content:!1,colSpan:s.columns.length}]),s.styles.push(null)})),s.rows.push([{content:t.instant("INCOME_BY_ITEM_REPORT.TOTALS.INCOME")+":",colSpan:s.columns.length-1,styles:{halign:"right"}},r.round(c)]),s.styles.push(n.h3),s}}])},Gago:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.CheckInReport",["ngResource","datesDeserializer","deskworks.config"]).factory("CheckInReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["checkInTime","checkOutTime"]),o=e(r.getApiAbsUrl("/check-in-report"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,cancellable:!0,transformResponse:[angular.fromJson,n]}}),a=null;return{query:function(e){return a&&a.$cancelRequest&&a.$cancelRequest(),(a=o.query(e)).$promise.then((function(e){return a=null,e.forEach((function(e){e.duration=e.checkOutTime.diff(e.checkInTime)})),e}))}}}])},Grkc:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("hsT8"),o=r.n(n),a=r("nbuU"),l=r.n(a),i=r("yCd9"),s=r.n(i),c=r("29E8");t.default=angular.module("deskworks.reports.incomeByOrderReportData",[c.a.name]).factory("incomeByOrderReportData",["$filter","$translate","helper","reportStyles","reportSort",function(e,t,r,n,a){return function(e,i){var c,u={columns:o()(c=e.columns).call(c,(function(e){return e.include})),rows:[],styles:[]},d=[];i.forEach((function(e){e.productCategories.forEach((function(e){e.products.forEach((function(e){var t=l()(d).call(d,(function(t){return t.orderNo===e.orderNo}));t||(t={orderNo:e.orderNo,products:[]},d.push(t)),t.products.push(e)}))}))})),d=a(d,"name");var f=0;return d.forEach((function(e){var o=0;a(e.products,"date").forEach((function(e,t){var a,l=s()(a=u.columns).call(a,(function(t){return e[t.dataKey]}));l[l.length-1]=!1,u.rows.push(l),u.styles.push(t%2?null:n.rowOdd),o+=r.toNumber(e.amount)})),f+=o,u.rows.push([{content:t.instant("INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO")+" #"+e.orderNo+" "+t.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL")+":",colSpan:u.columns.length-1,styles:{halign:"right"}},r.round(o)]),u.styles.push(n.h2)})),u.rows.push([{content:!1,colSpan:u.columns.length}]),u.styles.push(null),u.rows.push([{content:t.instant("INCOME_BY_ITEM_REPORT.TOTALS.INCOME")+":",colSpan:u.columns.length-1,styles:{halign:"right"}},r.round(f)]),u.styles.push(n.h3),u}}])},HIxv:function(e,t){e.exports='<div id="depositTransactionReport" class="gutter-v"> <form name="formDepositTransactionReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-dates model="vm.config.reportDates"></report-dates> <report-columns model="vm.config.reportColumns"></report-columns> </div> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="vm.config.reportOptions" banks="$resolve.banks" centers="vm.centers"> <report-order-by model="vm.config.orderBy" report-columns="vm.config.reportColumns.columns"></report-order-by> </report-options> <report-owner-region model="vm.config.reportOwnerRegion" report-data="vm.config.reportData"></report-owner-region> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="vm.downloadPdf()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="vm.downloadCsv()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="vm.pdf"></div> </ff-panel> </div> '},Iitq:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.creditBalanceReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("CreditBalanceReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["credits.date"]),o=e(r.getApiAbsUrl("/reports/credit-balance"),{centerId:"@centerId"},{get:{method:"GET",cancellable:!0,transformResponse:[angular.fromJson,n]}}),a=null;return{get:function(e){return a&&a.$cancelRequest&&a.$cancelRequest(),(a=o.get(e)).$promise.then((function(e){return a=null,e}))}}}])},LLH2:function(e,t){e.exports='<ff-panel> <ff-panel-header><span translate="REPORTS.COLUMNS.HEADER"></span></ff-panel-header> <div class="ff-grid"> <ff-header flex="{lg: \'0 0 50%\'}"> <ff-row> <cell flex="0 0 32px" class="ff-center" title="{{\'GLOBAL.INCLUDE\' | translate}}"> <ff-icon sense="check"></ff-icon> </cell> <cell translate="REPORTS.COLUMNS.COLUMN"></cell> </ff-row> </ff-header> <ff-header flex="{lg: \'0 0 50%\'}" class="show-lg"> <ff-row> <cell flex="0 0 32px" class="ff-center" title="{{\'GLOBAL.INCLUDE\' | translate}}"> <ff-icon sense="check"></ff-icon> </cell> <cell translate="REPORTS.COLUMNS.COLUMN"></cell> </ff-row> </ff-header> </div> <div class="ff-grid"> <ff-col flex="{lg: \'0 0 50%\'}"> <ff-row ng-repeat="column in $ctrl.model.columns | limitTo: $ctrl.leftColCount"> <ff-checkbox class="ff-center ff-control" flex="0 0 32px" ff-model="column.include" ff-disabled="column.readonly"></ff-checkbox> <ff-static ff-bind="column.title"></ff-static> </ff-row> </ff-col> <ff-col flex="{lg: \'0 0 50%\'}"> <ff-row ng-repeat="column in $ctrl.model.columns | limitTo: $ctrl.rightColCount : $ctrl.leftColCount"> <ff-checkbox class="ff-center ff-control" flex="0 0 32px" ff-model="column.include" ff-disabled="column.readonly"></ff-checkbox> <ff-static ff-bind="column.title"></ff-static> </ff-row> </ff-col> </div> </ff-panel> '},MKNM:function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n),a=r("hsT8"),l=r.n(a);r("Muwe"),r("X5mX"),r("3dw1"),r("aZFp"),r("8cZI"),r("y89P");t.default=angular.module("deskworks.reports.reportColumns",["deskworks.helper"]).directive("reportColumns",["$compile","$templateCache",function(e,t){return{restrict:"E",scope:!0,transclude:"element",priority:2,controller:"ReportColumnsCtrl as $ctrl",bindToController:{model:"<"},link:function(r,n,o,a,l){l((function(){n.after(e(t.get("directives/report-columns.tpl.html"))(r))}))}}}]).controller("ReportColumnsCtrl",["$scope","$location","helper",function(e,t,r){var n=this;n.$onInit=function(){e.$watch((function(){return t.search().columns}),(function(e){e&&(n.model.columns.forEach((function(e){e.include=!1})),e.split(",").forEach((function(e){(r.findByKeyValue(n.model.columns,"dataKey",e)||{}).include=!0})))})),e.$watchCollection((function(){var e;return o()(e=n.model.columns).call(e,(function(e){return!!e.include}))}),(function(){var e,r;n.leftColCount=n.rightColCount=Math.floor(n.model.columns.length/2),n.leftColCount+n.rightColCount<n.model.columns.length&&n.leftColCount++;var a=o()(e=l()(r=n.model.columns).call(r,(function(e){return e.include}))).call(e,(function(e){return e.dataKey})).join(",");t.search("columns",a).replace()}))}}])},MmAi:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("03wM"),o=r.n(n),a=r("Ekwr"),l=r.n(a),i=r("hsT8"),s=r.n(i),c=r("lvz6"),u=r.n(c),d=r("yKah"),f=r.n(d),p=r("fzuT"),m=r.n(p),g=r("WgSX"),h=r("CLLE"),R=r("G6E5"),v=r("5/DJ"),y=r("LTMe"),O=r("Vl1O"),E=r("F6ya"),T=r("uFJl"),C=r("Grkc"),_=r("UQFN"),b=r("sSbM"),w=r("kUla"),D=r("UMDU");function I(e,t){var r=o()(e);if(l.a){var n=l()(e);t&&(n=s()(n).call(n,(function(t){return u()(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):f.a?Object.defineProperties(e,f()(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,u()(r,t))}))}return e}t.default=angular.module("deskworks.reports.incomeByItemReport",[g.a.name,h.a.name,R.a.name,v.a.name,y.a.name,R.a.name,O.a.name,E.default.name,T.default.name,C.default.name,_.default.name,b.default.name,w.default.name,D.default.name,"deskworks.state","deskworks.reports.reportDates","deskworks.ProductCategory"]).controller("IncomeByItemReportCtrl",["$scope","$q","$timeout","$filter","$translate","$location","$route","state","helper","debounce","dwAlerts","reportStyles","reportHelper","ProductCategory","setupService","IncomeByItemReport","incomeByItemReportChart","incomeByItemReportColumns","incomeByMemberReportColumns","incomeByOrderReportColumns","incomeByItemReportData","incomeByMemberReportData","incomeByOrderReportData",function(e,t,r,n,o,a,l,i,s,c,u,d,f,p,m,g,h,R,v,y,O,E,T){var C=this,_=f.paramsChanged,b=f.loadResources;function w(t,n){e.$apply((function(e){var t=n[0]&&n[0]._index;if(angular.isNumber(t)){var o=C.resources.settings.multiLevelProductCategory;C.chartLevels.length>=(o?3:2)||(C.chartLevels.push({code:C.chart.data.codes[t],name:C.chart.data.labels[t]}),r((function(){return D()})))}}))}function D(){C.chart=h({data:C.data,onClick:w,levels:C.chartLevels,multiLevelProductCategory:C.resources.settings.multiLevelProductCategory,productCategories:C.resources.productCategories})}C.config={reportName:o.instant("INCOME_BY_ITEM_REPORT.REPORT_NAME")},C.byOrder={item:{dataToReport:O,columns:R},member:{dataToReport:E,columns:v},order:{dataToReport:T,columns:y}},C.params={orderBy:i.getParam("orderBy")||"item",columns:C.byOrder[i.getParam("orderBy")||"item"].columns},l.current.params.snapshotDate?C.params.snapshotDate=l.current.params.snapshotDate:(C.params.fromDate=i.getParam("fromDate")?n("toDate")(i.getParam("fromDate")):moment().subtract(1,"month").startOf("month"),C.params.toDate=i.getParam("toDate")?n("toDate")(i.getParam("toDate")):moment().subtract(1,"month").endOf("month")),C.resources=null,C.data=null,C.chartLevels=[],i.setPageTitle(C.config.reportName),e.$watch("$ctrl.params.orderBy",(function(){C.params.columns=C.byOrder[C.params.orderBy||"item"].columns})),e.$watch("$ctrl.params",c((function(e,r){i.setParam("orderBy",e.orderBy);var n=N({},e);C.pdf=null,C.report=null,s.pointFirstInvalid("#incomeByItemReport")||(n.fromDate&&n.toDate||n.snapshotDate)&&(_(e,r,["fromDate","toDate","snapshotDate","centerId"])&&(C.data=C.prevData=null,C.chartLevels=[]),t.all({resources:C.resources||b((function(){return{settings:m.getSetupSettings().catch((function(e){return u.error(e,"Failed to get setup settings.")})),productCategories:p.query().catch((function(e){return u.error(e,"Failed to query product categories.")}))}})),data:C.data||g.query(n).catch((function(e){return u.error(e,"Failed to query report.")}))}).then((function(e){C.resources=e.resources,C.data=e.data})).then((function(){var e=C.byOrder[n.orderBy].dataToReport;C.report=e(n,C.data);var t=f.buildPdf({config:N(N({},C.config),n),report:C.report,resources:C.resources});C.pdf=t.output("blob"),C.prevData!==C.data&&(D(),C.prevData=C.data)})))}),100),!0),C.chartBack=function(){C.chartLevels.pop(),D()},C.downloadPdf=function(){if(C.pdf){var e=f.getReportFileName({extension:"pdf",config:N(N({},C.config),C.params),resources:C.resources});f.download({blob:C.pdf,fileName:e})}},C.downloadCsv=function(){if(C.pdf){var e=f.getReportFileName({extension:"csv",config:N(N({},C.config),C.params),resources:C.resources}),t=f.buildCsv({report:C.report});f.download({blob:t,fileName:e})}}}])},Mvrh:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.incomeReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("IncomeReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["payments.date"]),o=e(r.getApiAbsUrl("/centers/:centerId/income-reports"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{get:{method:"GET",cancellable:!0,transformResponse:[angular.fromJson,n]}}),a=null;return{get:function(e){return a&&a.$cancelRequest&&a.$cancelRequest(),(a=o.get(e)).$promise.then((function(e){return a=null,e}))}}}])},OeSc:function(e,t,r){"use strict";r.r(t);r("Muwe"),r("X5mX"),r("y89P");t.default=angular.module("deskworks.reports.reportOwnerRegion",["deskworks.Owner","deskworks.Region","deskworks.setup.service"]).directive("reportOwnerRegion",["$compile","$templateCache",function(e,t){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportOwnerRegionCtrl as $ctrl",bindToController:{model:"<",reportData:"="},link:function(r,n,o,a,l){l((function(o,a){var l=e(t.get("directives/report-owner-region.tpl.html"))(r);angular.element(l[0].querySelector?l[0].querySelector(".ff-panel-body"):l).append(o),n.after(l)}))}}}]).controller("ReportOwnerRegionCtrl",["$scope","$location","$translate","$q","dwAlerts","Owner","Region","setupService","state",function(e,t,r,n,o,a,l,i,s){var c=this;"master"===s.getLoggedUser().role&&(c.$onInit=function(){i.getSetupSettings().catch((function(e){return o(e,"Failed to get setup settings.")})).then((function(e){if(e.isFranchise)return n.all([a.query().catch((function(e){return o(e,"Failed to query owners.")})).then((function(e){c.owners=e,c.owners.unshift({name:r.instant("REPORTS.OWNER_REGION.OWNER.ALL")})})),l.query().catch((function(e){return o(e,"Failed to query regions.")})).then((function(e){c.regions=e,c.regions.unshift({name:r.instant("REPORTS.OWNER_REGION.REGION.ALL")})}))])})),!1!==c.model.ownerId&&(e.$watch((function(){return t.search().ownerId}),(function(e,t){c.model.ownerId=e||0===e?+e:c.owners&&c.owners[0]&&c.owners[0].id,e!==t&&(c.reportData=null)})),e.$watch("$ctrl.model.ownerId",(function(e){t.search("ownerId",e).replace()}))),!1!==c.model.regionId&&(e.$watch((function(){return t.search().regionId}),(function(e,t){c.model.regionId=e||0===e?+e:c.regions&&c.regions[0]&&c.regions[0].id,e!==t&&(c.reportData=null)})),e.$watch("$ctrl.model.regionId",(function(e){t.search("regionId",e).replace()})))},c.onChange=function(){(c.model.ownerId||c.model.regionId)&&(e.vm.config.reportOptions.centerId=0)})}])},PKSF:function(e,t,r){"use strict";t.a=r.p+"./assets/lato-bold.ttf?_rev=1d93f0f9bf99c82f3cbe55f17d016939"},QU59:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.accountsReceivableReportColumns",[]).factory("accountsReceivableReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userCompany",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.COMPANY",include:!0,styles:{minCellWidth:130}},{dataKey:"userName",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.USER_NAME",include:!0,styles:{minCellWidth:120}},{dataKey:"date",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.BILL_DATE",include:!0,defaultOrder:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"amount",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.AMOUNT",include:!0,styles:{minCellWidth:60,halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"dateDue",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.DUE_DATE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"amountDue",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.AMOUNT_DUE",include:!0,styles:{minCellWidth:65,halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"daysLate",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.DAYS_LATE",include:!0,styles:{halign:"right"}},{dataKey:"comment",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.COMMENT",include:!0,styles:{minCellWidth:120}},{dataKey:"orderId",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.ORDER_ID",include:!1,styles:{cellWidth:"wrap",halign:"right"}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},R1ro:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.DepositAndTaxReport",["ngResource","datesDeserializer","deskworks.config"]).factory("DepositAndTaxReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t("daily.date"),o=e(r.getApiAbsUrl("/reports/deposit-and-tax"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{get:{method:"GET",isArray:!1,cancellable:!0,transformResponse:[angular.fromJson,n]}}),a=null;return{get:function(e){return a&&a.$cancelRequest&&a.$cancelRequest(),(a=o.get(e)).$promise.then((function(e){return a=null,e.totalsByProductType=e.totalsByProductType||e.totalsTyProductType,e}))}}}])},TGNl:function(e,t,r){"use strict";r.r(t);var n=r("03wM"),o=r.n(n),a=r("Ekwr"),l=r.n(a),i=r("lvz6"),s=r.n(i),c=r("yKah"),u=r.n(c),d=r("fzuT"),f=r.n(d),p=r("1PCL"),m=r.n(p),g=r("yCd9"),h=r.n(g),R=r("hsT8"),v=r.n(R),y=r("6RpP"),O=r.n(y),E=r("ipr/"),T=r.n(E),C=(r("Muwe"),r("X5mX"),r("y89P"),r("3dw1"),r("WgSX")),_=r("UDUI"),b=r("G6E5"),w=r("5/DJ"),D=r("LTMe"),I=r("9ux4");function N(e,t){var r=o()(e);if(l.a){var n=l()(e);t&&(n=v()(n).call(n,(function(t){return s()(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){f()(e,t,r[t])})):u.a?Object.defineProperties(e,u()(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,s()(r,t))}))}return e}t.default=angular.module("deskworks.reports.availabilityReport",[C.a.name,b.a.name,_.a.name,w.a.name,D.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.availabilityReport.service","deskworks.reports.availabilityReportColumns",I.a.name]).controller("AvailabilityReportCtrl",["$scope","$timeout","$filter","$translate","$location","$route","state","helper","jsPDF","reportStyles","ReportBuilder","reportHelper","AvailabilityReport","availabilityReportColumns","reportFontInit",function(e,t,r,n,o,a,l,i,s,c,u,d,f,p,g){var R,y=this,E={0:{cellWidth:230},1:{cellWidth:"wrap"},2:{cellWidth:"wrap"},3:{cellWidth:60}},C={0:{minCellWidth:100},1:{cellWidth:"wrap"},2:{cellWidth:"wrap"},3:{minCellWidth:100},4:{minCellWidth:100},5:{cellWidth:60},6:{cellWidth:60},7:{cellWidth:60},8:{cellWidth:80},9:{cellWidth:80}};function _(e){var t,r={columns:p.vacant,rows:[],styles:[]},n=h()(t=Array.apply(null,new Array(r.columns.length))).call(t,(function(e){return!1}));return e.reportData.forEach((function(e,t){var o,a,l=v()(o=e.reservationUnits).call(o,(function(e){return!e.attachedUser}));l.length&&(r.rows.push(O()(a=[e.name]).call(a,T()(n).call(n,0,n.length-1))),r.styles.push(c.h2),l.forEach((function(e,t){var n;r.rows.push(h()(n=r.columns).call(n,(function(t){return e[t.dataKey]}))),r.styles.push(t%2?null:c.rowOdd)})))})),r}function b(e){var t,r={columns:p.occupied,rows:[],styles:[]},n=h()(t=Array.apply(null,new Array(r.columns.length))).call(t,(function(e){return!1}));return e.reportData.forEach((function(e){var t,o,a=v()(t=e.reservationUnits).call(t,(function(e){return!!e.attachedUser}));a.length&&(r.rows.push(O()(o=[e.name]).call(o,T()(n).call(n,0,n.length-1))),r.styles.push(c.h2),a.forEach((function(e,t){var n;r.rows.push(h()(n=r.columns).call(n,(function(t){return e[t.dataKey]}))),r.styles.push(t%2?null:c.rowOdd)})))})),r}function w(e){var t,r={columns:p.occupied,rows:[],styles:[]},n=h()(t=Array.apply(null,new Array(r.columns.length))).call(t,(function(e){return!1}));return e.reportData.forEach((function(e){var t,o=e.reservationUnits;o.length&&(r.rows.push(O()(t=[e.name]).call(t,T()(n).call(n,0,n.length-1))),r.styles.push(c.h2),o.forEach((function(e,t){var n;r.rows.push(h()(n=r.columns).call(n,(function(t){return e[t.dataKey]}))),r.styles.push(t%2?null:c.rowOdd)})))})),r}function D(e){var t,r={columns:p.summary,rows:[],styles:[]},o=h()(t=[{name:n.instant("AVAILABILITY_REPORT.TOTAL_OCCUPIED")},{name:n.instant("AVAILABILITY_REPORT.TOTAL_VACANT")}]).call(t,(function(e){return A(A({},e),{},{count:0,capacity:0,area:0,revenue:0})}));return e.reportData.reduce((function(e,t){return O()(e).call(e,t.reservationUnits)}),[]).forEach((function(e){if(e.basePrice){var t=o[e.attachedUser?0:1];t.count++,t.capacity+=e.capacity||0,t.area+=e.area||0,t.revenue+=e.attachedUser?e.netPrice||0:e.basePrice||0}})),o[0].countPercent=i.round(o[0].count/(o[0].count+o[1].count)*100,1),o[1].countPercent=i.round(o[1].count/(o[0].count+o[1].count)*100,1),o[0].capacityPercent=i.round(o[0].capacity/(o[0].capacity+o[1].capacity)*100,1),o[1].capacityPercent=i.round(o[1].capacity/(o[0].capacity+o[1].capacity)*100,1),o[0].areaPercent=i.round(o[0].area/(o[0].area+o[1].area)*100,1),o[1].areaPercent=i.round(o[1].area/(o[0].area+o[1].area)*100,1),o[0].revenuePercent=i.round(o[0].revenue/(o[0].revenue+o[1].revenue)*100,1),o[1].revenuePercent=i.round(o[1].revenue/(o[0].revenue+o[1].revenue)*100,1),o.forEach((function(e){r.rows.push([e.name,e.count,e.countPercent,e.capacity,e.capacityPercent,e.area,e.areaPercent,e.revenue,e.revenuePercent]),r.styles.push(null)})),r}y.config={reportName:n.instant("AVAILABILITY_REPORT.REPORT_NAME"),reportOptions:{},merged:!1,getReportData:function(){return f.query({centerId:y.config.reportOptions.centerId,snapshotDate:a.current.params.snapshotDate})}},l.setPageTitle(y.config.reportName),e.$watch((function(e){return o.search().merged}),(function(e){y.config.merged=e})),e.$watch("$ctrl.config.merged",(function(e){o.search("merged",e||null).replace()})),y.reportBuilder=new u(y.config),e.$watch((function(e){return{reportOptions:y.config.reportOptions,reportColumns:y.config.reportColumns,merged:y.config.merged}}),(function(e,r){R&&(t.cancel(R),R=null),R=t((function(){if(y.pdf=null,!angular.isUndefined(y.config.reportOptions.centerId)){var e,t=new s(y.config.reportOptions.paperLayout,"pt",y.config.reportOptions.paperSize),r=c.pageMargins[0]+5;if(g(t),y.config.merged)e=y.reportBuilder.generatePdf(w,A({columnStyles:C},c),t);else{t.setFontSize(11),t.setFont(t.getFont().fontName,"bold"),t.autoTableText(n.instant("AVAILABILITY_REPORT.VACANT").toUpperCase(),c.pageMargins[3],r,{});var o=m()({startY:r+20,columnStyles:E},c);e=y.reportBuilder.generatePdf(_,o,t).then((function(e){var t=e.previousAutoTable.finalY+30;e.setFontSize(11),e.setFont(e.getFont().fontName,"bold"),e.autoTableText(n.instant("AVAILABILITY_REPORT.OCCUPIED").toUpperCase(),c.pageMargins[3],t,{});var r=m()({startY:t+20,columnStyles:C},c);return y.reportBuilder.generatePdf(b,r,e)}))}e.then((function(e){var t=e.previousAutoTable.finalY+30;return e.setFontSize(11),e.setFont(e.getFont().fontName,"bold"),e.autoTableText(n.instant("AVAILABILITY_REPORT.SUMMARY").toUpperCase(),c.pageMargins[3],t,{}),y.reportBuilder.generatePdf(D,A(A({startY:t+20},c),{},{tableWidth:480}),e)})).then((function(e){y.pdf=e.output("blob")}))}}),100)}),!0),y.downloadPdf=function(){y.pdf&&d.download({blob:y.pdf,fileName:y.reportBuilder.getReportFileName("pdf")})},y.downloadCsv=function(){y.pdf&&(y.config.merged?d.download({blob:y.reportBuilder.buildCsv(w),fileName:y.reportBuilder.getReportFileName("csv")}):(d.download({blob:y.reportBuilder.buildCsv(_),fileName:y.reportBuilder.getReportFileName("csv","-vacant")}),d.download({blob:y.reportBuilder.buildCsv(b),fileName:y.reportBuilder.getReportFileName("csv","-occupied")})),d.download({blob:y.reportBuilder.buildCsv(D),fileName:y.reportBuilder.getReportFileName("csv","-summary")}))}}])},TVyk:function(e,t){e.exports='<div id="checkInReport" class="gutter-v"> <form name="formCheckInReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <report-dates model="$ctrl.config.reportDates"></report-dates> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="$ctrl.config.reportOptions"> <ff-row> <ff-label flex="0 0 100px"><span translate="CHECK_IN_REPORT.ORDER_BY"></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half"> <label flex="none"> <ff-radio ff-model="$ctrl.config.orderBy" ff-value="\'userName\'"> <span translate="CHECK_IN_REPORT.ORDER_BY.NAME"></span> </ff-radio> </label> <label flex="none"> <ff-radio ff-model="$ctrl.config.orderBy" ff-value="\'userCompany\'"> <span translate="CHECK_IN_REPORT.ORDER_BY.COMPANY"></span> </ff-radio> </label> <label flex="none"> <ff-radio ff-model="$ctrl.config.orderBy" ff-value="\'checkInTime\'"> <span translate="CHECK_IN_REPORT.ORDER_BY.DATE"></span> </ff-radio> </label> </div> </ff-static> </ff-row> </report-options> </div> </div> <ff-panel flex="auto"> <ff-panel-header> <span ng-if="$ctrl.config.orderBy === \'checkInTime\'" translate="CHECK_IN_REPORT.BAR_CHART.USAGE_PER_DAY"></span> <span ng-if="$ctrl.config.orderBy === \'userName\'" translate="CHECK_IN_REPORT.BAR_CHART.USAGE_BY_MEMBER"></span> <span ng-if="$ctrl.config.orderBy === \'userCompany\'" translate="CHECK_IN_REPORT.BAR_CHART.USAGE_BY_COMPANY"></span> </ff-panel-header> <div ff-dim="!$ctrl.pdf" ng-init="$c = $ctrl"> <chart chart-type="{{$ctrl.bar.type}}" chart-labels="$ctrl.bar.labels" chart-data="$ctrl.bar.data" chart-options="$ctrl.bar.options" ng-style="{ \'max-height\': $c.config.orderBy === \'checkInTime\' ? null : \'none\', \'height\': $c.config.orderBy === \'checkInTime\' ? null : $c.bar.labels.length * 25 + \'px\' }"></chart> </div> </ff-panel> <ff-btn-group> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </div> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},Tbc7:function(e,t,r){"use strict";r.r(t);r("3dw1"),r("Muwe"),r("y89P");var n=r("yCd9"),o=r.n(n),a=r("lRNC"),l=r.n(a),i=["$injector",function(e){var t,n,a=(t=r("8g2Y"),o()(n=l()(t).call(t)).call(n,t));e.loadNewModules(o()(a).call(a,(function(e){return e.default.name}))),e.invoke(["$templateCache",function(e){var t=r("/MGB");l()(t).call(t).forEach((function(r){return e.put(r.replace(/^\.\//,""),t(r))}))}])}];t.default=i},"U+0Z":function(e,t){e.exports='<ff-panel ng-if="$ctrl.owners && $ctrl.regions"> <ff-panel-header><span translate="REPORTS.OWNER_REGION.HEADER"></span></ff-panel-header> <label class="ff-row"> <ff-label flex="0 0 100px"><span translate="REPORTS.OWNER_REGION.OWNER"></span></ff-label> <ff-select ff-model="$ctrl.model.ownerId" ff-options="owner.id as owner.name for owner in $ctrl.owners" ff-change="$ctrl.onChange()"></ff-select> </label> <label class="ff-row"> <ff-label flex="0 0 100px"><span translate="REPORTS.OWNER_REGION.REGION"></span></ff-label> <ff-select ff-model="$ctrl.model.regionId" ff-options="region.id as region.name for region in $ctrl.regions" ff-change="$ctrl.onChange()"></ff-select> </label> </ff-panel> '},"U+9+":function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.checkInReportColumns",[]).factory("checkInReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userName",_title:"CHECK_IN_REPORT.COLUMNS.NAME"},{dataKey:"userCompany",_title:"CHECK_IN_REPORT.COLUMNS.COMPANY"},{dataKey:"checkInTime",_title:"CHECK_IN_REPORT.COLUMNS.DATE",styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"checkInTime",_title:"CHECK_IN_REPORT.COLUMNS.CHECK_IN",styles:{halign:"right"},pdf:function(e){return t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortTime")}},{dataKey:"checkOutTime",_title:"CHECK_IN_REPORT.COLUMNS.CHECK_OUT",styles:{halign:"right"},pdf:function(e){return t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortTime")}},{dataKey:"duration",_title:"CHECK_IN_REPORT.COLUMNS.USAGE_HOURS",styles:{halign:"right"},pdf:function(e){return t("hoursMinutes")(e)},csv:function(e){return t("hoursMinutes")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},UMDU:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.incomeByOrderReportColumns",[]).factory("incomeByOrderReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"orderNo",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"userCompany",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.USER_COMPANY",include:!0},{dataKey:"userName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"code",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"name",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME",include:!0},{dataKey:"date",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.DATE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"qty",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"amount",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL",include:!0,readonly:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},UQFN:function(e,t,r){"use strict";r.r(t);var n=r("6RpP"),o=r.n(n),a=r("yCd9"),l=r.n(a),i=r("nbuU"),s=r.n(i),c=r("hsT8"),u=r.n(c),d=(r("3dw1"),r("Muwe"),r("aZFp"),r("y89P"),r("8cZI"),r("29E8"));t.default=angular.module("deskworks.reports.incomeByItemReportChart",[d.a.name]).factory("incomeByItemReportChart",["$filter","helper","reportSort",function(e,t,r){return function(r){var s=r.data,u=r.onClick,d=r.levels,f=r.multiLevelProductCategory,p=r.productCategories,m=[];s.forEach((function(e){m=o()(m).call(m,e.productCategories)}));var g=[a,i,c];f&&g.unshift(n);var h=g[d.length](m,d,p);return{type:"pie",data:{codes:l()(h).call(h,(function(e){return e.code})),labels:l()(h).call(h,(function(e){return e.name})),datasets:[{data:l()(h).call(h,(function(e){return t.round(e.value)}))}]},options:{tooltips:{callbacks:{label:function(t,r){return r.labels[t.index]+": "+e("ncurrency")(r.datasets[0].data[t.index])}}},legend:{display:!0,position:"right"},onClick:u}}};function n(e,n,o){var a=[];return e.forEach((function(e){var r=e.code.split("-")[0],n=s()(a).call(a,(function(e){return e.code===r})),l=s()(o).call(o,(function(e){var t=e.code.split("-");return r===t[0]&&(!t[1]||0===t[1].replace(/0/g,"").length)}))||{};n||(n={code:r,name:t.join([l.name||e.name,"["+r+"]"]," "),value:0,catsCount:0,cats:[]},a.push(n)),n.catsCount++,n.cats.push(e),e.products.forEach((function(e){n.value+=t.toNumber(e.amount)}))})),a=r(a,"value",!0)}function a(e,r){var n;if(r.length){var o=r[r.length-1].code;e=u()(e).call(e,(function(e){return 0===e.code.indexOf(o)}))}return l()(n=d(e)).call(n,(function(e){return{code:e.code,name:t.join([e.name,"["+e.code+"]"]," "),value:e.total}}))}function i(e,n){var o,a=n[n.length-1].code,l=s()(o=d(e)).call(o,(function(e){return e.code===a})),i=[];return l.products.forEach((function(e){var r=s()(i).call(i,(function(t){return t.code===e.code}));r||(r={code:e.code,name:t.join([e.name,"["+e.code+"]"]," "),value:0},i.push(r)),r.value+=t.toNumber(e.amount)})),i=r(i,"value",!0)}function c(e,n){var o,a=n[n.length-2].code,l=n[n.length-1].code,i=s()(o=d(e)).call(o,(function(e){return e.code===a})),c=[];return i.products.forEach((function(e){if(e.code===l){var r=s()(c).call(c,(function(t){return t.name===e.userName}));r||(r={code:e.code,name:e.userName,value:0},c.push(r)),r.value+=t.toNumber(e.amount)}})),c=r(c,"value",!0)}function d(e){var n=[];return e.forEach((function(e){var t,r=s()(n).call(n,(function(t){return t.code===e.code}));r?r.products=o()(t=r.products).call(t,e.products):((r=angular.copy(e)).total=0,n.push(r))})),n.forEach((function(e){e.products.forEach((function(r){e.total+=t.toNumber(r.amount)}))})),r(n,"total",!0)}}])},UUPn:function(e,t){e.exports='<div id="incomeByItemReport" class="gutter-v"> <form name="formIncomeByItemReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-columns model="$ctrl.params"></report-columns> </div> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="$ctrl.params"> <report-dates model="$ctrl.params" embed="0 0 100px" ng-if="!$ctrl.params.snapshotDate"></report-dates> <ff-row> <ff-label flex="0 0 100px"><span translate="INCOME_BY_ITEM_REPORT.ORDER_BY"></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half"> <label flex="0 0 auto"> <ff-radio ff-model="$ctrl.params.orderBy" ff-value="\'item\'"> <span translate="INCOME_BY_ITEM_REPORT.ORDER_BY.ITEM"></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio ff-model="$ctrl.params.orderBy" ff-value="\'member\'"> <span translate="INCOME_BY_ITEM_REPORT.ORDER_BY.MEMBER"></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio ff-model="$ctrl.params.orderBy" ff-value="\'order\'"> <span translate="INCOME_BY_ITEM_REPORT.ORDER_BY.ORDER"></span> </ff-radio> </label> </div> </ff-static> </ff-row> </report-options> </div> </div> <ff-panel flex="1 1 auto"> <ff-panel-header> <ff-row class="gutter-h-half"> <div> <span ng-if="!$ctrl.chartLevels.length" translate="INCOME_BY_ITEM_REPORT.PRODUCT_CATEGORIES_PIE_CHART.HEADER"></span> <span ng-if="$ctrl.chartLevels.length" ng-bind="$ctrl.chartLevels[$ctrl.chartLevels.length - 1].name"></span> </div> <div flex="0 0 auto" style="align-items:center"> <ff-btn ng-if="$ctrl.chartLevels.length" size="sm" sense="back" style="margin:-.5rem 0" title="{{\'GLOBAL.BTN_BACK\' | translate}}" ff-click="$ctrl.chartBack()"><span translate="GLOBAL.BTN_BACK"></span></ff-btn> </div> </ff-row> </ff-panel-header> <div ff-dim="!$ctrl.pdf"> <chart config="$ctrl.chart"></chart> </div> </ff-panel> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},WCm8:function(e,t,r){"use strict";r.r(t);var n=r("03wM"),o=r.n(n),a=r("Ekwr"),l=r.n(a),i=r("lvz6"),s=r.n(i),c=r("yKah"),u=r.n(c),d=r("fzuT"),f=r.n(d),p=(r("3dw1"),r("hsT8")),m=r.n(p),g=r("NOor"),h=r.n(g),R=r("yCd9"),v=r.n(R),y=r("G0Vy"),O=r.n(y),E=r("WgSX"),T=r("G6E5"),C=r("5/DJ"),_=r("LTMe");function b(e,t){var r=o()(e);if(l.a){var n=l()(e);t&&(n=m()(n).call(n,(function(t){return s()(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){f()(e,t,r[t])})):u.a?Object.defineProperties(e,u()(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,s()(r,t))}))}return e}t.default=angular.module("deskworks.DepositAndTaxReportCtrl",[E.a.name,T.a.name,C.a.name,_.a.name,"deskworks.state","deskworks.reports.reportDates","deskworks.reports.reportColumns","deskworks.reports.ReportBuilder","deskworks.reportOrderBy","deskworks.DepositAndTaxReport","deskworks.depositAndTaxReportColumns"]).controller("DepositAndTaxReportCtrl",["$scope","$timeout","$translate","$filter","state","reportHelper","ReportBuilder","reportStyles","DepositAndTaxReport","depositAndTaxReportColumns",function(e,t,r,n,o,a,l,i,s,c){var u,d=this;function f(e){var t,o,a,l=n("ncurrency"),s={columns:m()(t=e.reportColumns).call(t,(function(e){return e.include})),rows:[],styles:[]},c=h()(o=s.columns).call(o,(function(e){return"amountTaxable"===e.dataKey}));e.reportData.daily.forEach((function(e){s.rows.push([{content:n("date")(e.date,"mediumDate"),colSpan:c},{content:r.instant("DEPOSIT_AND_TAX_REPORT.TOTAL_DAILY")+":",colSpan:s.columns.length-c-1},{content:l(e.total)}]),s.styles.push(i.h1),e.billingMethods.forEach((function(e){s.rows.push([{content:e.name,colSpan:c},{content:r.instant("DEPOSIT_AND_TAX_REPORT.TOTAL_PAYMENT_METHOD")+":",colSpan:s.columns.length-c-1},{content:l(e.total)}]),s.styles.push(i.h2),e.orders.forEach((function(e){var t;s.rows.push(v()(t=s.columns).call(t,(function(t){return!!angular.isDefined(e[t.dataKey])&&e[t.dataKey]}))),s.styles.push(i.h3),e.items.forEach((function(e,t){var r;s.rows.push(v()(r=s.columns).call(r,(function(t){return!!angular.isDefined(e[t.dataKey])&&e[t.dataKey]}))),s.styles.push(t%2?null:i.rowOdd)}))}))}))})),s.rows.push(O()(a=Array(s.columns.length)).call(a,!1)),s.styles.push(null);return[{name:"TOTAL_TAXABLE_AMOUNT",data:"totalTaxableAmount"},{name:"TOTAL_NON_TAXABLE_AMOUNT",data:"totalNonTaxableAmount"},{name:"TOTAL_CHARGES",data:"totalCharges"},{name:"TOTAL_TAX",data:"totalTax"},{name:"GRAND_TOTAL",data:"grandTotal"},{name:"TOTAL_MEMBERSHIP",data:"membership"},{name:"TOTAL_REGISTRATION",data:"registration"},{name:"TOTAL_RENTAL",data:"rental"},{name:"TOTAL_PRINT",data:"print"},{name:"TOTAL_SERVICES",data:"services"}].forEach((function(t,n){s.rows.push([{content:r.instant("DEPOSIT_AND_TAX_REPORT.".concat(t.name))+":",colSpan:s.columns.length-1,styles:{halign:"right"}},{content:l(n<5?e.reportData[t.data]:e.reportData.totalsByProductType[t.data]||0)}]),s.styles.push(i.h3)})),s}d.config={reportName:r.instant("DEPOSIT_AND_TAX_REPORT.REPORT_NAME"),reportOptions:{},reportColumns:angular.copy(c),reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return s.get({centerId:d.config.reportOptions.centerId||null,fromDate:n("date")(d.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:n("date")(d.config.reportDates.toDate,"yyyy-MM-dd")})}},o.setPageTitle(d.config.reportName),d.config.reportDates.fromDate.subtract(1,"M").date(1),d.config.reportDates.toDate.date(0),d.reportBuilder=new l(d.config),e.$watch((function(){return{reportOptions:d.config.reportOptions,reportDates:d.config.reportDates,orderBy:d.config.orderBy}}),(function(e,r){u&&(t.cancel(u),u=null),u=t((function(){d.pdf=null;var t=e.reportDates.fromDate,n=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(d.config.reportData=null),t=e.reportDates.toDate,n=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(d.config.reportData=null),d.reportBuilder.buildPdf(f,null,w(w({},d.config),{},{reportDates:w({},d.config.reportDates)})).then((function(e){d.pdf=e}))}),100)}),!0),d.downloadPdf=function(){d.pdf&&a.download({blob:d.pdf,fileName:d.reportBuilder.getReportFileName("pdf")})},d.downloadCsv=function(){d.pdf&&a.download({blob:d.reportBuilder.buildCsv(f),fileName:d.reportBuilder.getReportFileName("csv")})}}])},Ytnt:function(e,t,r){"use strict";r.r(t);var n=r("03wM"),o=r.n(n),a=r("Ekwr"),l=r.n(a),i=r("lvz6"),s=r.n(i),c=r("yKah"),u=r.n(c),d=r("fzuT"),f=r.n(d),p=r("hsT8"),m=r.n(p),g=r("KK/u"),h=r.n(g),R=r("yCd9"),v=r.n(R),y=r("NOor"),O=r.n(y),E=(r("Muwe"),r("X5mX"),r("y89P"),r("3dw1"),r("WgSX")),T=r("G6E5"),C=r("5/DJ"),_=r("LTMe");function b(e,t){var r=o()(e);if(l.a){var n=l()(e);t&&(n=m()(n).call(n,(function(t){return s()(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){f()(e,t,r[t])})):u.a?Object.defineProperties(e,u()(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,s()(r,t))}))}return e}t.default=angular.module("deskworks.reports.accountsReceivableReport",[E.a.name,T.a.name,C.a.name,_.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOwnerRegion","deskworks.reports.accountsReceivableReport.service","deskworks.reports.accountsReceivableReportColumns"]).controller("AccountsReceivableReportCtrl",["$scope","$timeout","$filter","$translate","$location","state","helper","reportStyles","ReportBuilder","reportHelper","AccountsReceivableReport","accountsReceivableReportColumns",function(e,t,r,n,o,a,l,i,s,c,u,d){var f,p=this;function g(e){var t,o,a,s,u,d,f={columns:m()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:m()(o=e.reportData.payments).call(o,(function(e){return p.config.credits||e.amountDue>=0})),styles:[]};f.rows=h()(c).call(c,f.rows,e.orderBy);var g=l.round(f.rows.reduce((function(e,t){return e+(t.amountDue?+t.amountDue:0)}),0)),R=f.rows.length&&l.round(f.rows.reduce((function(e,t){return e+(t.daysLate?+t.daysLate:0)}),0)/f.rows.length);f.rows=v()(a=f.rows).call(a,(function(e,t){var r;return f.styles.push(t%2?null:i.rowOdd),v()(r=f.columns).call(r,(function(t){return e[t.dataKey]}))}));var y,E=v()(s=Array.apply(null,new Array(f.columns.length))).call(s,(function(e){return!1}));return f.rows.push(E),f.styles.push(null),(y=O()(u=f.columns).call(u,(function(e){return"daysLate"===e.dataKey})))>=0&&(f.rows.push([{content:n.instant("ACCOUNTS_RECEIVABLE_REPORT.TOTALS.AVG_DAYS_LATE")+":",colSpan:y,styles:{halign:"right"}},{content:R},{content:!1,colSpan:f.columns.length-y-1}]),f.styles.push(i.h3)),(y=O()(d=f.columns).call(d,(function(e){return"amountDue"===e.dataKey})))>=0&&(f.rows.push([{content:n.instant("ACCOUNTS_RECEIVABLE_REPORT.TOTALS.TOTAL_DUE")+":",colSpan:y,styles:{halign:"right"}},{content:r("ncurrency")(g)},{content:!1,colSpan:f.columns.length-y-1}]),f.styles.push(i.h3)),f}p.config={reportName:n.instant("ACCOUNTS_RECEIVABLE_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:angular.copy(d)},reportDates:{fromDate:!1,toDate:moment()},getReportData:function(){return u.get({centerId:p.config.reportOptions.centerId,date:r("date")(p.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:p.config.reportOwnerRegion.ownerId,regionId:p.config.reportOwnerRegion.regionId})}},a.setPageTitle(p.config.reportName),e.$watch((function(){return o.search().credits}),(function(e){p.config.credits=!!e&&"false"!==e})),e.$watch("vm.config.credits",(function(e){o.search("credits",e).replace()})),p.reportBuilder=new s(p.config),e.$watch((function(e){return{reportOptions:p.config.reportOptions,reportDates:p.config.reportDates,reportColumns:p.config.reportColumns,reportOwnerRegion:p.config.reportOwnerRegion,credits:p.config.credits,orderBy:p.config.orderBy}}),(function(e,r){f&&(t.cancel(f),f=null),f=t((function(t){if(p.pdf=null,!angular.isUndefined(p.config.reportOptions.centerId)){var n=e.reportDates.fromDate,o=r.reportDates.fromDate;!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(p.config.reportData=null),n=e.reportDates.toDate,o=r.reportDates.toDate,!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(p.config.reportData=null),p.reportBuilder.buildPdf(g,null,w(w({},p.config),{},{reportDates:w({},p.config.reportDates)})).then((function(e){p.pdf=e}))}}),100)}),!0),p.downloadPdf=function(){p.pdf&&c.download({blob:p.pdf,fileName:p.reportBuilder.getReportFileName("pdf")})},p.downloadCsv=function(){p.pdf&&c.download({blob:p.reportBuilder.buildCsv(g),fileName:p.reportBuilder.getReportFileName("csv")})}}])},ZfFK:function(e,t){e.exports='<div id="availabilityReport" class="gutter-v"> <form name="formAvailabilityReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}" style="margin-left:auto"> <report-options model="$ctrl.config.reportOptions" all-centers="false"> <ff-row> <ff-label flex="0 0 100px"><span translate="AVAILABILITY_REPORT.MERGED"></span></ff-label> <ff-static><ff-checkbox ff-model="$ctrl.config.merged"></ff-checkbox></ff-static> </ff-row> </report-options> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},ZimX:function(e,t,r){"use strict";r.r(t);var n=r("nbuU"),o=r.n(n),a=r("yCd9"),l=r.n(a),i=r("G0Vy"),s=r.n(i),c=r("hsT8"),u=r.n(c),d=(r("Muwe"),r("aZFp"),r("X5mX"),r("3dw1"),r("y89P"),r("8cZI"),r("73rf")),f=r.n(d);t.default=angular.module("deskworks.reportOrderBy",[]).directive("reportOrderBy",["$compile",function(e){return{restrict:"E",scope:!0,transclude:"element",priority:2,controller:"ReportOrderByCtrl as $ctrl",bindToController:{model:"=",reportColumns:"<",levelsCount:"<levels"},link:function(t,r,n,o,a){a((function(n,o){var a=e(f.a)(t);angular.element(a[0].querySelector?a[0].querySelector(".ff-panel-body"):a).append(n),r.after(a)}))}}}]).controller("ReportOrderByCtrl",["$scope","$location",function(e,t){var r=this;function n(){var e,t;r.levels||(r.levels=l()(e=s()(t=new Array(r.levelsCount||1)).call(t,null)).call(e,(function(){return{}})));var n=[];r.levels.forEach((function(e,t){var o;e.cols=u()(o=r.reportColumns).call(o,(function(t){if(n.indexOf(t.dataKey)<0)return!0;t.dataKey===e.order&&(e.order=null)})),t&&e.cols.unshift({dataKey:null,title:"-"}),e.order&&n.push(e.order)}))}r.$onInit=function(){n();var a=(t.search().orderBy||"").split(",");r.levels.forEach((function(e,t){var r,n;e.order=(a[t]?o()(r=e.cols).call(r,(function(e){return e.dataKey===a[t]})):o()(n=e.cols).call(n,(function(e){return!0===e.defaultOrder}))||e.cols[0]).dataKey})),e.$watchCollection((function(){var e,t;return l()(e=u()(t=r.levels).call(t,(function(e){return!!e.order}))).call(e,(function(e){return e.order}))}),(function(e){var o,a;n();var i=u()(o=l()(a=r.levels).call(a,(function(e){return e.order}))).call(o,(function(e){return!!e}));t.search("orderBy",i.join(",")).replace(),r.model=r.levelsCount>1?i:i[0]}))}}])},cjYI:function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n),a=r("6RpP"),l=r.n(a);t.default=angular.module("deskworks.reports.checkInReportBarChart",[]).factory("checkInReportBarChart",["$translate","$filter","helper","whitelabel",function(e,t,r,n){return{getChartConfig:function(r,a){var i={labels:o()(r).call(r,(function(e){return e.name||"-"})),data:[{data:o()(r).call(r,(function(e){return e.value/36e5})),backgroundColor:n.getProperty("--brand-color")}],options:{legend:{display:!1},tooltips:{callbacks:{label:function(e,n){return t("hoursMinutes")(r[e.index].value)}}},scales:{xAxes:[{maxBarThickness:100}]}}};if("checkInTime"===a){i.type="bar";var s=e.instant("CHECK_IN_REPORT.BAR_CHART.PEOPLE");i.options.tooltips.callbacks.label=function(e,n){var o;return t("hoursMinutes")(r[e.index].value)+l()(o=" / ".concat(r[e.index].people," ")).call(o,s)}}else i.type="horizontalBar";return i}}}])},h5Ea:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.creditBalanceReportColumns",[]).factory("creditBalanceReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"centerName",_title:"CREDIT_BALANCE_REPORT.COLUMNS.CENTER",include:!0},{dataKey:"userName",_title:"CREDIT_BALANCE_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"date",_title:"CREDIT_BALANCE_REPORT.COLUMNS.DATE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"order",_title:"CREDIT_BALANCE_REPORT.COLUMNS.ORDER_ID",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"amount",_title:"CREDIT_BALANCE_REPORT.COLUMNS.BALANCE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},kCKf:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("03wM"),o=r.n(n),a=r("Ekwr"),l=r.n(a),i=r("hsT8"),s=r.n(i),c=r("lvz6"),u=r.n(c),d=r("yKah"),f=r.n(d),p=r("fzuT"),m=r.n(p),g=(r("Muwe"),r("X5mX"),r("y89P"),r("yCd9")),h=r.n(g),R=r("WgSX"),v=r("G6E5"),y=r("5/DJ"),O=r("LTMe");function E(e,t){var r=o()(e);if(l.a){var n=l()(e);t&&(n=s()(n).call(n,(function(t){return u()(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):f.a?Object.defineProperties(e,f()(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,u()(r,t))}))}return e}t.default=angular.module("deskworks.reports.creditBalanceReport",[R.a.name,v.a.name,y.a.name,O.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOwnerRegion","deskworks.reports.creditBalanceReport.service","deskworks.reports.creditBalanceReportColumns"]).controller("CreditBalanceReportCtrl",["$scope","$timeout","$filter","$translate","$location","state","helper","reportStyles","ReportBuilder","reportHelper","CreditBalanceReport","creditBalanceReportColumns",function(e,t,r,n,o,a,l,i,s,c,u,d){var f,p=this;function m(e){var t,r={columns:e.reportColumns.columns,rows:[],styles:[]};return r.rows=h()(t=e.reportData.credits).call(t,(function(e,t){var n;return r.styles.push(t%2?null:i.rowOdd),h()(n=r.columns).call(n,(function(t){return e[t.dataKey]}))})),r.rows.push([!1,!1,!1,!1,!1]),r.styles.push(null),r.rows.push([!1,!1,!1,n.instant("CREDIT_BALANCE_REPORT.TOTALS.CREDIT")+":",e.reportData.total]),r.styles.push(i.h3),r}p.config={reportName:n.instant("CREDIT_BALANCE_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:d},toDate:moment(),getReportData:function(){return u.get({centerId:p.config.reportOptions.centerId,ownerId:p.config.reportOwnerRegion.ownerId,regionId:p.config.reportOwnerRegion.regionId,toDate:r("date")(p.config.toDate,"yyyy-MM-dd")})}},a.setPageTitle(p.config.reportName),p.reportBuilder=new s(p.config),p.getToday=function(){return moment()},e.$watch((function(){return o.search().toDate}),(function(e){var t=r("toDate")(e);p.config.toDate=moment.isMoment(t)&&!p.config.toDate.isSame(t)?t:p.config.toDate})),e.$watch("vm.config.toDate",(function(e){moment.isMoment(e)&&o.search("toDate",r("date")(e,"yyyy-MM-dd")).replace()})),e.$watch((function(e){return{reportOptions:p.config.reportOptions,reportOwnerRegion:p.config.reportOwnerRegion,toDate:p.config.toDate}}),(function(e,r){f&&(t.cancel(f),f=null),f=t((function(){if(!(moment.isMoment(e.toDate)&&e.toDate.isAfter(moment(),"day")||(p.pdf=null,angular.isUndefined(p.config.reportOptions.centerId)))){var t=e.toDate,n=r.toDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(p.config.reportData=null),p.reportBuilder.buildPdf(m,null,T(T({},p.config),{},{reportDates:T({},p.config)})).then((function(e){p.pdf=e}))}}),100)}),!0),p.downloadPdf=function(){p.pdf&&c.download({blob:p.pdf,fileName:p.reportBuilder.getReportFileName("pdf")})},p.downloadCsv=function(){p.pdf&&c.download({blob:p.reportBuilder.buildCsv(m),fileName:p.reportBuilder.getReportFileName("csv")})}}])},kUla:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.incomeByMemberReportColumns",[]).factory("incomeByMemberReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userCompany",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.USER_COMPANY",include:!0},{dataKey:"userName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"code",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"name",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME",include:!0},{dataKey:"orderNo",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"date",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.DATE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"qty",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"amount",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL",include:!0,readonly:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},lfjW:function(e,t){e.exports='<div id="creditBalanceReport" class="gutter-v"> <form name="formCreditBalanceReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}" style="margin-left:auto"> <div class="gutter-v"> <report-options model="vm.config.reportOptions"> <label class="ff-row"> <ff-label flex="0 0 100px" ff-required="true"><span translate="REPORTS.PERIOD.TO_DATE"></span></ff-label> <ff-date flex="0 0 124px" name="toDate" ff-model="vm.config.toDate" ff-date-order="{ early: vm.config.toDate, late: vm.getToday() }" ff-validate-alert="{ field: \'Selected date\', late: \'or equal to today\' }"></ff-date> <span class="ff-label"></span> </label> </report-options> <report-owner-region model="vm.config.reportOwnerRegion" report-data="vm.config.reportData"></report-owner-region> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="vm.downloadPdf()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="vm.downloadCsv()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="vm.pdf"></div> </ff-panel> </div> '},nkhl:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.availabilityReport.service",["ngResource","deserializeNumbers","datesDeserializer","deskworks.config"]).factory("AvailabilityReport",["$resource","deserializeNumbers","datesDeserializer","deskworksConfig",function(e,t,r,n){var o=n.getApiAbsUrl("/centers/:centerId/availability-reports"),a=t(["reservationUnits.basePrice","reservationUnits.netPrice","reservationUnits.discount"]),l=r(["reservationUnits.startDate","reservationUnits.terminationDate"]),i=e(o,{centerId:"@centerId"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,l,a]}});return{query:function(e){return i.query(e).$promise.then((function(e){return e.forEach((function(e){e.reservationUnits.forEach((function(e){!angular.isNumber(e.netPrice)&&angular.isNumber(e.basePrice)&&(e.netPrice=e.basePrice-e.discount||0)}))})),e}))}}}])},pEUA:function(e,t){e.exports='<ff-panel ng-hide="$ctrl.embed"> <ff-panel-header><span translate="REPORTS.PERIOD.HEADER"></span></ff-panel-header> <div class="ff-grid"> <label class="ff-row" flex="{lg: \'0 0 50%\'}" ng-if="$ctrl.model.fromDate !== false"> <ff-label flex="{lg: \'0 0 90px\', xs: \'0 0 100px\'}" ff-required="true"><span translate="REPORTS.PERIOD.FROM_DATE"></span></ff-label> <ff-date flex="0 0 124px" ff-model="$ctrl.model.fromDate" ff-required="true" ff-date-order="{ early: $ctrl.model.fromDate, late: $ctrl.model.toDate }" ff-validate-alert="{ field: \'{{\'REPORTS.PERIOD.FROM_DATE\' | translate}}\', late: \'{{\'REPORTS.PERIOD.TO_DATE\' | translate}}\' }"></ff-date> <span class="ff-label"></span> </label> <label class="ff-row" flex="{lg: $ctrl.model.fromDate === false ? \'auto\' : \'0 0 50%\'}"> <ff-label flex="{lg: \'0 0 72px\', xs: \'0 0 100px\'}" ff-required="true"><span translate="REPORTS.PERIOD.TO_DATE"></span></ff-label> <ff-date flex="0 0 124px" ff-model="$ctrl.model.toDate" ff-required="true" ff-date-order="{ early: $ctrl.model.fromDate, late: $ctrl.model.toDate }" ff-validate-alert="{ field: \'{{\'REPORTS.PERIOD.TO_DATE\' | translate}}\', early: \'{{\'REPORTS.PERIOD.FROM_DATE\' | translate}}\' }"></ff-date> <span class="ff-label"></span> </label> </div> </ff-panel> <label class="ff-row" ng-if="$ctrl.embed && $ctrl.model.fromDate !== false"> <ff-label flex="{{$ctrl.embed}}" ff-required="true"><span translate="REPORTS.PERIOD.FROM_DATE"></span></ff-label> <ff-date flex="0 0 124px" ff-model="$ctrl.model.fromDate" ff-required="true" ff-validate-alert="{{\'REPORTS.PERIOD.FROM_DATE\' | translate}}"></ff-date> <span class="ff-label"></span> </label> <label class="ff-row" ng-if="$ctrl.embed"> <ff-label flex="{{$ctrl.embed}}" ff-required="true"><span translate="REPORTS.PERIOD.TO_DATE"></span></ff-label> <ff-date flex="0 0 124px" ff-model="$ctrl.model.toDate" ff-required="true" ff-validate-alert="{{\'REPORTS.PERIOD.TO_DATE\' | translate}}"></ff-date> <span class="ff-label"></span> </label> '},pvmN:function(e,t){e.exports='<div id="incomeReport" class="gutter-v"> <form name="formIncomeReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <report-dates model="vm.config.reportDates"></report-dates> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="vm.config.reportOptions"></report-options> <report-owner-region model="vm.config.reportOwnerRegion" report-data="vm.config.reportData"></report-owner-region> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="vm.downloadPdf()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="vm.downloadCsv()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="vm.pdf"></div> </ff-panel> </div> '},sSbM:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.incomeByItemReportColumns",[]).factory("incomeByItemReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"code",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE",include:!0,styles:{cellWidth:"wrap"}},{dataKey:"name",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME",include:!0},{dataKey:"userCompany",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.USER_COMPANY",include:!0},{dataKey:"userName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"orderNo",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"date",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.DATE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"qty",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"amount",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"subtotal",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.SUBTOTAL",include:!0,readonly:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL",include:!0,readonly:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},uFJl:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("hsT8"),o=r.n(n),a=r("nbuU"),l=r.n(a),i=r("yCd9"),s=r.n(i),c=r("29E8");t.default=angular.module("deskworks.reports.incomeByMemberReportData",[c.a.name]).factory("incomeByMemberReportData",["$filter","$translate","helper","reportStyles","reportSort",function(e,t,r,n,a){return function(e,i){var c,u={columns:o()(c=e.columns).call(c,(function(e){return e.include})),rows:[],styles:[]},d=[];i.forEach((function(e){e.productCategories.forEach((function(e){e.products.forEach((function(e){var t=l()(d).call(d,(function(t){return t.name===e.userName}));t||(t={name:e.userName,products:[]},d.push(t)),t.products.push(e)}))}))})),d=a(d,"name");var f=0;return d.forEach((function(e){var o=0;a(e.products,"date").forEach((function(e,t){var a,l=s()(a=u.columns).call(a,(function(t){return e[t.dataKey]}));l[l.length-1]=!1,u.rows.push(l),u.styles.push(t%2?null:n.rowOdd),o+=r.toNumber(e.amount)})),f+=o,u.rows.push([{content:e.name+" "+t.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL")+":",colSpan:u.columns.length-1,styles:{halign:"right"}},r.round(o)]),u.styles.push(n.h2)})),u.rows.push([{content:!1,colSpan:u.columns.length}]),u.styles.push(null),u.rows.push([{content:t.instant("INCOME_BY_ITEM_REPORT.TOTALS.INCOME")+":",colSpan:u.columns.length-1,styles:{halign:"right"}},r.round(f)]),u.styles.push(n.h3),u}}])},ukw3:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.depositTransactionReport.service",["ngResource","deserializeNumbers","datesDeserializer","deskworks.config"]).factory("DepositTransactionReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=n.getApiAbsUrl("/banks/:bankId/deposit-transaction-reports"),a=t(["date","billingMethods.centers.payments.date"]),l=r(["billingMethods.centers.payments.amount"]),i=e(o,{bankId:"@bankId",centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,cancellable:!0,transformResponse:[angular.fromJson,a,l]}}),s=null;return{query:function(e){return s&&s.$cancelRequest&&s.$cancelRequest(),(s=i.query(e)).$promise.then((function(e){return s=null,e}))}}}])},vopJ:function(e,t,r){"use strict";r.r(t);r("ZEAQ"),r("3dw1");t.default=angular.module("deskworks.reports.availabilityReportColumns",[]).factory("availabilityReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n={vacant:[{dataKey:"name",_title:"AVAILABILITY_REPORT.COLUMNS.UNIT",include:!0},{dataKey:"capacity",_title:"AVAILABILITY_REPORT.COLUMNS.CAPACITY",include:!0,styles:{halign:"right",cellWidth:"wrap"}},{dataKey:"area",_title:"AVAILABILITY_REPORT.COLUMNS.AREA",include:!0,styles:{halign:"right",cellWidth:"wrap"}},{dataKey:"basePrice",_title:"AVAILABILITY_REPORT.COLUMNS.PRICE",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"description",_title:"AVAILABILITY_REPORT.COLUMNS.DESCRIPTION",include:!0}],occupied:[{dataKey:"name",_title:"AVAILABILITY_REPORT.COLUMNS.UNIT",include:!0},{dataKey:"capacity",_title:"AVAILABILITY_REPORT.COLUMNS.CAPACITY",include:!0,styles:{halign:"right",cellWidth:"wrap"}},{dataKey:"area",_title:"AVAILABILITY_REPORT.COLUMNS.AREA",include:!0,styles:{halign:"right",cellWidth:"wrap"}},{dataKey:"attachedUserCompany",_title:"AVAILABILITY_REPORT.COLUMNS.COMPANY",include:!0},{dataKey:"attachedUser",_title:"AVAILABILITY_REPORT.COLUMNS.CLIENT",include:!0},{dataKey:"basePrice",_title:"AVAILABILITY_REPORT.COLUMNS.PRICE",include:!0,styles:{halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"discount",_title:"AVAILABILITY_REPORT.COLUMNS.DISCOUNT",include:!0,styles:{halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"netPrice",_title:"AVAILABILITY_REPORT.COLUMNS.NET_PRICE",include:!0,styles:{halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"startDate",_title:"AVAILABILITY_REPORT.COLUMNS.START_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"terminationDate",_title:"AVAILABILITY_REPORT.COLUMNS.TERMINATION_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}}],summary:[{dataKey:"name",_title:"",include:!0},{dataKey:"count",_title:"AVAILABILITY_REPORT.COLUMNS.COUNT",include:!0,styles:{halign:"right",cellWidth:"wrap"}},{dataKey:"countPercent",_title:"%",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return(e||0).toFixed(1)+"%"},csv:function(e){return(e||0).toFixed(1)+"%"}},{dataKey:"capacity",_title:"AVAILABILITY_REPORT.COLUMNS.CAPACITY",include:!0,styles:{halign:"right",cellWidth:"wrap"}},{dataKey:"capacityPercent",_title:"%",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return(e||0).toFixed(1)+"%"},csv:function(e){return(e||0).toFixed(1)+"%"}},{dataKey:"area",_title:"AVAILABILITY_REPORT.COLUMNS.AREA",include:!0,styles:{halign:"right",cellWidth:"wrap"}},{dataKey:"areaPercent",_title:"%",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return(e||0).toFixed(1)+"%"},csv:function(e){return(e||0).toFixed(1)+"%"}},{dataKey:"revenue",_title:"AVAILABILITY_REPORT.COLUMNS.REVENUE",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("currency")(e)},csv:function(e){return t("currency")(e)}},{dataKey:"revenuePercent",_title:"%",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return(e||0).toFixed(1)+"%"},csv:function(e){return(e||0).toFixed(1)+"%"}}]};function o(){n.vacant.forEach((function(e){e.title=r.instant(e._title)})),n.occupied.forEach((function(e){e.title=r.instant(e._title)})),n.summary.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},vtWt:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("03wM"),o=r.n(n),a=r("Ekwr"),l=r.n(a),i=r("hsT8"),s=r.n(i),c=r("lvz6"),u=r.n(c),d=r("yKah"),f=r.n(d),p=r("fzuT"),m=r.n(p),g=r("yCd9"),h=r.n(g),R=r("WgSX"),v=r("G6E5"),y=r("5/DJ"),O=r("LTMe");function E(e,t){var r=o()(e);if(l.a){var n=l()(e);t&&(n=s()(n).call(n,(function(t){return u()(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):f.a?Object.defineProperties(e,f()(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,u()(r,t))}))}return e}t.default=angular.module("deskworks.reports.incomeReport",[R.a.name,v.a.name,y.a.name,O.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOwnerRegion","deskworks.reports.incomeReport.service","deskworks.reports.incomeReportColumns"]).controller("IncomeReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","reportHelper","reportStyles","ReportBuilder","IncomeReport","incomeReportColumns",function(e,t,r,n,o,a,l,i,s,c,u){var d,f=this;function p(e){var t,r={columns:e.reportColumns.columns,rows:[],styles:[]};return r.rows=h()(t=e.reportData.payments).call(t,(function(e,t){var n;return r.styles.push(t%2?null:i.rowOdd),h()(n=r.columns).call(n,(function(t){return e[t.dataKey]}))})),r.rows.push([!1,!1,!1,!1,!1]),r.styles.push(null),r.rows.push([!1,!1,!1,n.instant("INCOME_REPORT.TOTAL_INCOME")+":",e.reportData.total]),r.styles.push(i.h3),r}f.config={reportName:n.instant("INCOME_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:u},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return c.get({centerId:f.config.reportOptions.centerId,fromDate:r("date")(f.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(f.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:f.config.reportOwnerRegion.ownerId,regionId:f.config.reportOwnerRegion.regionId})}},o.setPageTitle(n.instant("INCOME_REPORT.PAGE_TITLE")),f.config.reportDates.fromDate.date(1),f.config.reportDates.toDate.add(1,"M").date(0),f.reportBuilder=new s(f.config),e.$watch((function(e){return{reportOptions:f.config.reportOptions,reportDates:f.config.reportDates,reportOwnerRegion:f.config.reportOwnerRegion}}),(function(e,r){d&&(t.cancel(d),d=null),d=t((function(t){if(f.pdf=null,!angular.isUndefined(f.config.reportOptions.centerId)){var n=e.reportDates.fromDate,o=r.reportDates.fromDate;!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(f.config.reportData=null),n=e.reportDates.toDate,o=r.reportDates.toDate,!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(f.config.reportData=null),f.reportBuilder.buildPdf(p,null,T(T({},f.config),{},{reportDates:T({},f.config.reportDates)})).then((function(e){f.pdf=e}))}}),100)}),!0),f.downloadPdf=function(){f.pdf&&l.download({blob:f.pdf,fileName:f.reportBuilder.getReportFileName("pdf")})},f.downloadCsv=function(){f.pdf&&l.download({blob:f.reportBuilder.buildCsv(p),fileName:f.reportBuilder.getReportFileName("csv")})}}])},"xU/f":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.accountsReceivableReport.service",["ngResource","datesDeserializer","deserializeNumbers","deskworks.config"]).factory("AccountsReceivableReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=t(["payments.date","payments.dateDue"]),a=r(["payments.amountDue","payments.amount"]),l=e(n.getApiAbsUrl("/centers/:centerId/accounts-receivable-reports"),{centerId:"@centerId",date:"@date"},{get:{method:"GET",cancellable:!0,transformResponse:[angular.fromJson,o,a]}}),i=null;return{get:function(e){return i&&i.$cancelRequest&&i.$cancelRequest(),(i=l.get(e)).$promise.then((function(e){return i=null,e}))}}}])},xWoj:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.depositTransactionReportColumns",["deskworks.helper"]).factory("depositTransactionReportColumns",["$rootScope","$filter","$translate","helper",function(e,t,r,n){var o=[{dataKey:"reference",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.REFERENCE",include:!0,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"userName",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.USER_NAME",include:!0,defaultOrder:!0},{dataKey:"payorName",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.PAYOR",include:!0},{dataKey:"userCompany",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.COMPANY",include:!0},{dataKey:"amount",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"subtotal",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.SUBTOTAL",include:!0,readonly:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.TOTAL",include:!0,readonly:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"orderId",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.ORDER_ID",include:!1,styles:{cellWidth:"wrap",halign:"right"}}];function a(){o.forEach((function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),o}])},ynEu:function(e,t,r){"use strict";r.r(t);var n=r("Ekwr"),o=r.n(n),a=r("lvz6"),l=r.n(a),i=r("yKah"),s=r.n(i),c=r("fzuT"),u=r.n(c),d=r("ipr/"),f=r.n(d),p=r("yCd9"),m=r.n(p),g=r("6RpP"),h=r.n(g),R=r("hsT8"),v=r.n(R),y=r("03wM"),O=r.n(y),E=(r("Muwe"),r("X5mX"),r("y89P"),r("3dw1"),r("8cZI"),r("WgSX")),T=r("CLLE"),C=r("G6E5"),_=r("5/DJ"),b=r("LTMe"),w=r("92Gs");r("Ehlk");function D(e,t){var r=O()(e);if(o.a){var n=o()(e);t&&(n=v()(n).call(n,(function(t){return l()(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):s.a?Object.defineProperties(e,s()(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,l()(r,t))}))}return e}t.default=angular.module("deskworks.CheckInReportCtrl",[E.a.name,T.a.name,C.a.name,_.a.name,b.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.CheckInReport","deskworks.checkInReportColumns","deskworks.checkInReportTotalsColumns","deskworks.reports.checkInReportBarChart",w.default.name]).controller("CheckInReportCtrl",["$scope","$location","$timeout","$translate","$filter","state","helper","reportStyles","ReportBuilder","reportHelper","CheckInReport","checkInReportBarChart","checkInReportColumns","checkInReportTotalsColumns","reportGroupBy",function(e,t,r,n,o,a,l,i,s,c,u,d,p,g,R){var y,E=this;function T(e){var t,r={columns:p,rows:[],styles:[]},o=R(e.reportData,e.orderBy),a=m()(t=Array.apply(null,new Array(r.columns.length))).call(t,(function(){return!1}));return o.forEach((function(e){var t,o=0;e.forEach((function(e,t){var n;r.rows.push(m()(n=r.columns).call(n,(function(t){return e[t.dataKey]}))),r.styles.push(t%2?null:i.rowOdd),o+=e.duration})),r.rows.push(h()(t=f()(a).call(a,0,r.columns.length-2)).call(t,[n.instant("CHECK_IN_REPORT.COLUMNS.SUBTOTAL")+":",o])),r.styles.push(i.h2)})),r}function C(e){var t={userName:["userName","totalHoursTimeRange"],userCompany:["userCompany","totalHoursTimeRange"],checkInTime:["date","totalHoursDay"]},r={columns:v()(g).call(g,(function(r){return t[e.orderBy].indexOf(r.dataKey)>=0})),rows:[],styles:[]};return R(e.reportData,e.orderBy).forEach((function(t,n){var o=t.reduce((function(e,t){return e+t.duration}),0);r.rows.push([t[0][e.orderBy],o]),r.styles.push(n%2?null:i.rowOdd)})),r}E.config={reportName:n.instant("CHECK_IN_REPORT.REPORT_NAME"),reportOptions:{},orderBy:"checkInTime",reportColumns:{columns:p},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return u.query({centerId:E.config.reportOptions.centerId,fromDate:o("date")(E.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:o("date")(E.config.reportDates.toDate,"yyyy-MM-dd")})}},a.setPageTitle(E.config.reportName),E.config.reportDates.fromDate.date(1),!1!==E.config.orderBy&&(e.$watch((function(){return t.search().orderBy}),(function(e){E.config.orderBy=e||"checkInTime"})),e.$watch("$ctrl.config.orderBy",(function(e){t.search("orderBy",e).replace()}))),E.reportBuilder=new s(E.config),e.$watch((function(){return{reportOptions:E.config.reportOptions,reportDates:E.config.reportDates,orderBy:E.config.orderBy}}),(function(e,t){y&&(r.cancel(y),y=null),y=r((function(){if(E.pdf=null,E.config.reportDates.fromDate&&E.config.reportDates.toDate){var r=e.reportDates.fromDate,n=t.reportDates.fromDate;!moment.isMoment(r)||moment.isMoment(n)&&r.isSame(n)||(E.config.reportData=null),r=e.reportDates.toDate,n=t.reportDates.toDate,!moment.isMoment(r)||moment.isMoment(n)&&r.isSame(n)||(E.config.reportData=null);new jsPDF(E.config.reportOptions.paperLayout,"pt",E.config.reportOptions.paperSize);var a=I(I({},E.config),{},{reportDates:I({},E.config.reportDates)});E.reportBuilder.generatePdf(T,null,null,a).then((function(e){var t,r=angular.copy(i);r.startY=e.previousAutoTable.finalY+40,r.tableMargin=f()(t=i.pageMargins).call(t),r.tableMargin[3]=340,E.reportBuilder.generatePdf(C,r,e,a).then((function(e){E.pdf=e.output("blob")})).then((function(){var e,t,r;E.bar=(e=E.config,t=R(e.reportData,e.orderBy),r=m()(t).call(t,(function(t){var r={name:"checkInTime"===e.orderBy?o("date")(t[0][e.orderBy]):t[0][e.orderBy],value:t.reduce((function(e,t){return e+t.duration}),0)};return"checkInTime"===e.orderBy&&(r.people=O()(t.reduce((function(e,t){return e[l.join([t.userName,t.userCompany]," ")]=!0,e}),{})).length),r})),d.getChartConfig(r,e.orderBy))}))}))}}),100)}),!0),E.downloadPdf=function(){E.pdf&&c.download({blob:E.pdf,fileName:E.reportBuilder.getReportFileName("pdf")})},E.downloadCsv=function(){E.pdf&&(c.download({blob:E.reportBuilder.buildCsv(T),fileName:E.reportBuilder.getReportFileName("csv","-main")}),c.download({blob:E.reportBuilder.buildCsv(C),fileName:E.reportBuilder.getReportFileName("csv","-totals")}))}}])}}]);