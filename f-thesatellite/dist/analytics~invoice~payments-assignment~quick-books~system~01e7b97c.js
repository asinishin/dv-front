(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"29E8":function(e,t,n){"use strict";var r=n("yCd9"),o=n.n(r),a=n("6RpP"),i=n.n(a);t.a=angular.module("deskworks.reportSort",[]).factory("reportSort",["$filter",function(e){return function(t,n,r){return angular.isArray(n)||(n=[n]),n=o()(n).call(n,(function(e){var t,n;return i()(t=i()(n="".concat(e," || ")).call(n,e," === 0 ? ")).call(t,e,' : "~~~"')})),e("orderBy")(t,n,r)}}])},"5/DJ":function(e,t,n){"use strict";t.a=angular.module("deskworks.reports.reportStyles",["deskworks.helper"]).factory("reportStyles",["helper",function(e){return{pageMargins:[60,25,50,25],headStyles:{font:"Font",fontSize:9,fontStyle:"normal",valign:"middle",fillColor:e.hex2rgbArr("#444444"),textColor:255,textTransform:"uppercase"},bodyStyles:{font:"Font",overflow:"linebreak",textColor:0},header:{textColor:"#949594"},footer:{textColor:"#949594"},rowOdd:{fillColor:[245,245,245]},h1:{fontStyle:"bold",fillColor:e.hex2rgbArr("#949594"),textColor:[255,255,255]},h2:{fontStyle:"bold",textColor:e.hex2rgbArr("#444444"),borderWidth:1,borderColor:e.hex2rgbArr("#444444")},h3:{fontStyle:"bold"}}}])},"5bca":function(e,t,n){"use strict";t.a=angular.module("deskworks.logo",[]).factory("logo",["$window","$http","$q","deskworksConfig",function(e,t,n,r){var o,a;return{getSiteLogo:function(){return o=o||n((function(e){var t=new Image;t.crossOrigin="anonymous",t.src=r.getApiAbsUrl("/white-label/images/logo-print.png"),t.onerror=function(){console.warn("Report failed to load site logo."),e(null),t=null},t.onload=function(){e(t),t=null}})).then(i)},getSiteLogoInv:function(){return a=a||n((function(e){var t=document.querySelector(".sidebar-logo a img");t||console.warn("Report failed to load site logo."),e(t)})).then(i)},resetSiteLogo:function(){o=null},resetSiteLogoInv:function(){a=null}};function i(e){if(!e)return null;var t=e.width/480,n=e.height/171,r=t>n?t:n,o=Math.round(e.width/r),a=Math.round(e.height/r),i=document.createElement("canvas");document.body.appendChild(i),i.width=o,i.height=a,i.getContext("2d").drawImage(e,0,0,o,a);var l=i.toDataURL("image/png");return document.body.removeChild(i),{width:o,height:a,data:l}}}])},"76E7":function(e,t,n){"use strict";t.a=n.p+"./assets/lato-regular.ttf?_rev=1a161b4d22d2947c3d3e35d012305208"},"81mT":function(e,t,n){"use strict";n("8cZI");var r=n("nbuU"),o=n.n(r),a=n("5/DJ");t.a=angular.module("deskworks.reports.reportHeader",[a.a.name]).factory("reportHeader",["$filter","$translate","reportStyles",function(e,t,n){return function(){return 3===arguments.length?a.apply(void 0,arguments):r.apply(void 0,arguments)};function r(r){var a,i,l,s,c=r.config,u=r.doc,d=r.data,f=r.resources,p=o()(a=f.centers).call(a,(function(e){return e.id===+c.centerId})),g=u.internal.pageSize.width;u.setFont(u.getFont().fontName,"normal"),u.setTextColor(n.header.textColor),l=n.pageMargins[3],s=40,u.setFontSize(14),i=c.reportName.toUpperCase(),u.text(i,l,s),l+=u.getTextWidth(i)+3,(c.fromDate||c.toDate)&&(u.setFontSize(7),i=t.instant("REPORTS.HEADER.FOR_PERIOD").toUpperCase(),c.fromDate&&(i+=" "+t.instant("REPORTS.HEADER.FROM").toUpperCase()+":"),u.text(i,l,s),l+=u.getTextWidth(i)+3,c.fromDate&&(u.setFontSize(9),i=e("date")(c.fromDate,"mediumDate")||"",u.text(i,l,s),l+=u.getTextWidth(i)+3),u.setFontSize(7),i=t.instant("REPORTS.HEADER.THROUGH").toUpperCase()+":",u.text(i,l,s),l+=u.getTextWidth(i)+3,u.setFontSize(9),i=e("date")(c.toDate,"mediumDate")||"",u.text(i,l,s),l+=u.getTextWidth(i)+3),l=g-n.pageMargins[1],u.setFontSize(9),i=""+d.pageCount,l-=u.getTextWidth(i),u.text(i,l,s),u.setFontSize(7),i=t.instant("REPORTS.HEADER.PAGE").toUpperCase()+":",l-=u.getTextWidth(i+" "),u.text(i,l,s-.6),l=n.pageMargins[3],s+=11,u.setFontSize(7),i=t.instant("REPORTS.HEADER.REPORT_FOR").toUpperCase()+":",u.text(i,l,s-.6),l+=u.getTextWidth(i+" "),u.setFontSize(9),i=c.reportFor||(p?[p.name,p.city,p.state].join(", "):"All Centers"),u.text(i,l,s),l+=u.getTextWidth(i+" "),l=g-n.pageMargins[1],u.setFontSize(9),i=e("date")(moment(),"mediumDate"),l-=u.getTextWidth(i),u.text(i,l,s),u.setFontSize(7),i=t.instant("REPORTS.HEADER.REPORT_DATE").toUpperCase()+":",l-=u.getTextWidth(i+" "),u.text(i,l,s-.6)}function a(r,o,a){var i,l,s,c=o.internal.pageSize.width;o.setFont(o.getFont().fontName,"normal"),o.setTextColor(n.header.textColor),l=n.pageMargins[3],s=40,o.setFontSize(14),i=a.reportName.toUpperCase(),o.text(i,l,s),l+=o.getTextWidth(i)+3,a.reportDates&&(o.setFontSize(7),i=t.instant("REPORTS.HEADER.FOR_PERIOD").toUpperCase(),a.reportDates.fromDate&&(i+=" "+t.instant("REPORTS.HEADER.FROM").toUpperCase()+":"),o.text(i,l,s),l+=o.getTextWidth(i)+3,a.reportDates.fromDate&&(o.setFontSize(9),i=e("date")(a.reportDates.fromDate,"mediumDate")||"",o.text(i,l,s),l+=o.getTextWidth(i)+3),o.setFontSize(7),i=t.instant("REPORTS.HEADER.THROUGH").toUpperCase()+":",o.text(i,l,s),l+=o.getTextWidth(i)+3,o.setFontSize(9),i=e("date")(a.reportDates.toDate,"mediumDate")||"",o.text(i,l,s),l+=o.getTextWidth(i)+3),l=c-n.pageMargins[1],o.setFontSize(9),i=""+r.pageCount,l-=o.getTextWidth(i),o.text(i,l,s),o.setFontSize(7),i=t.instant("REPORTS.HEADER.PAGE").toUpperCase()+":",l-=o.getTextWidth(i+" "),o.text(i,l,s-.6),l=n.pageMargins[3],s+=11,o.setFontSize(7),i=t.instant("REPORTS.HEADER.REPORT_FOR").toUpperCase()+":",o.text(i,l,s-.6),l+=o.getTextWidth(i+" "),o.setFontSize(9),i=a.reportFor||(!1===a.reportOptions.centerId||+a.reportOptions.centerId)&&[a.center.name,a.center.city,a.center.state.name].join(", ")||"All Centers",o.text(i,l,s),l+=o.getTextWidth(i+" "),l=c-n.pageMargins[1],o.setFontSize(9),i=e("date")(moment(),"mediumDate"),l-=o.getTextWidth(i),o.text(i,l,s),o.setFontSize(7),i=t.instant("REPORTS.HEADER.REPORT_DATE").toUpperCase()+":",l-=o.getTextWidth(i+" "),o.text(i,l,s-.6)}}])},"9ux4":function(e,t,n){"use strict";(function(e){n("JBxO");var r=n("yCd9"),o=n.n(r),a=n("76E7"),i=n("PKSF");t.a=angular.module("deskworks.reportFontInit",[]).factory("reportFontInit",["$q","$http",function(t,n){var r,l;return t.all(o()(r=[a.a,i.a]).call(r,(function(t){return n.get(t,{responseType:"arraybuffer"}).then((function(t){return e.from(t.data).toString("base64")}))}))).then((function(e){return l=e})),function(e){l?(e.getFontList().Font||(e.addFileToVFS("font-regular.ttf",l[0]),e.addFileToVFS("font-bold.ttf",l[1]),e.addFont("font-regular.ttf","Font","normal"),e.addFont("font-bold.ttf","Font","bold")),e.setFont("Font")):console.warn("Report fonts are not loaded yet.")}}])}).call(this,n("zkTx").Buffer)},G6E5:function(e,t,n){"use strict";var r=n("03wM"),o=n.n(r),a=n("Ekwr"),i=n.n(a),l=n("hsT8"),s=n.n(l),c=n("lvz6"),u=n.n(c),d=n("yKah"),f=n.n(d),p=n("fzuT"),g=n.n(p),h=n("yCd9"),m=n.n(h),y=n("6RpP"),S=n.n(y),v=n("G0Vy"),x=n.n(v),F=n("nbuU"),b=n.n(F),E=n("Z9wY"),w=n.n(E),R=(n("3dw1"),n("Muwe"),n("y89P"),n("29E8")),D=n("IE1r"),C=n("UDUI"),T=(n("RKBc"),angular.module("fileSaver",[]).factory("fileSaver",["$window",function(e){return function(t,n,r,o){if(e.cordova&&e.cordova.InAppBrowser&&"ios"===e.cordova.platformId){var a=new FileReader;return a.onloadend=function(){var t=a.result;return e.cordova.InAppBrowser.open(t,"_blank","hidenavigationbuttons=yes,hideurlbar=yes,enableViewportScale=yes,location=no")},void a.readAsDataURL(t)}return e.saveAs(t,n,r,o)}}])),O=n("5bca"),z=n("5/DJ"),W=n("81mT"),P=n("Xjih"),A=n("9ux4");function U(e,t){var n=o()(e);if(i.a){var r=i()(e);t&&(r=s()(r).call(r,(function(t){return u()(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):f.a?Object.defineProperties(e,f()(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,u()(n,t))}))}return e}t.a=angular.module("deskworks.reportHelper",[R.a.name,D.a.name,C.a.name,T.name,O.a.name,z.a.name,W.a.name,P.a.name,A.a.name]).factory("reportHelper",["$rootScope","$q","$timeout","$window","$filter","$http","dwAlerts","state","logo","jsPDF","csvMake","centerService","reportStyles","reportHeader","reportFooter","reportSort","fileSaver","reportFontInit",function(e,t,n,r,o,a,i,l,s,c,u,d,f,p,g,h,y,v){return{sort:h,paramsChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.some((function(n){return moment.isMoment(e[n])?!moment.isMoment(t[n])||!e[n].isSame(t[n]):e[n]!==t[n]}))},loadResources:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return{}};return t.all(M(M({},e()),{},{centers:d.query().catch((function(e){return i.error(e,"Failed to query centers.")})),logo:s.getSiteLogo()}))},buildPdf:function(e){var t,n=e.config,r=e.report,o=e.resources,a=e.doc,i=void 0===a?new c(n.paperLayout,"pt",n.paperSize):a,l=e.startY;v(i);var s=angular.copy(r.rows);s.forEach((function(e){var t=0;e.forEach((function(n,o){n&&!angular.isUndefined(n.content)||(e[o]=n={content:n});var a=r.columns[t];if(!1===n.content)n.content="";else{if(a.pdf){var i=a.pdf(n.content);n.content=""===i?n.content:i}n.content=angular.isUndefined(n.content)||null===n.content||""===n.content?"-":n.content}t+=n.colSpan||1}))}));var u={columns:m()(t=r.columns).call(t,(function(e){return n.styles&&"uppercase"!==n.styles.headStyles.textTransform?e.title:e.title.toUpperCase()})),body:s,headStyles:(n.styles||f).headStyles,bodyStyles:(n.styles||f).bodyStyles,columnStyles:(n.styles||f).columnStyles,tableMargin:n.styles&&n.styles.tableMargin||(n.styles||f).pageMargins,startY:l||(n.styles||f).startY||!1,didParseCell:function(e){var t=e.row,n=e.cell,o=e.column;if("body"===e.section){angular.extend(n.styles,{minCellWidth:50,fillColor:!1},r.styles[t.index],r.columns[o.index].styles,s[t.index][o.index]?s[t.index][o.index].styles:null)}else angular.extend(n.styles,r.columns[o.index].styles)},didDrawCell:function(e){return function(e,t){var n=e.cell,r=e.doc;0===e.column.index&&n.styles.borderColor&&n.styles.borderWidth&&(r.setLineWidth(n.styles.borderWidth),r.setDrawColor(n.styles.borderColor[0],n.styles.borderColor[1],n.styles.borderColor[2]),r.rect(e.settings.margin.left+n.styles.borderWidth/2,n.y+n.styles.borderWidth/2,e.table.getWidth(r.internal.pageSize.width)-n.styles.borderWidth,e.row.height-2*n.styles.borderWidth,"S"));return!1}(e,r.columns)},didDrawPage:function(e){(n.header||p)({config:n,doc:i,data:e.table,resources:o}),(n.footer||g)({config:n,doc:i,data:e.table,resources:o})}};return u.margin=u.tableMargin||(n.styles||f).pageMargins,i.autoTable(u),i},buildCsv:function(e){var t,n,r=e.report,o={charset:"utf-8"},a=m()(t=r.rows).call(t,(function(e){return e.reduce((function(e,t){var n;return e.push(t),S()(e).call(e,x()(n=new Array((t&&t.colSpan?t.colSpan:1)-1)).call(n,null))}),[])}));return a.forEach((function(e){e.forEach((function(t,n){e[n]&&angular.isDefined(e[n].content)&&(e[n]=e[n].content);var o=r.columns[n];if(o.csv){var a=o.csv(e[n]);e[n]=""===a?e[n]:a}e[n]=angular.isUndefined(e[n])||null===e[n]||!1===e[n]||""===e[n]?"":e[n]}))})),a.unshift(m()(n=r.columns).call(n,(function(e){return e.title.toUpperCase()}))),new Blob([u.generate(a,o)],{type:"text/csv;charset="+o.charset+";"})},getReportFileName:function(e){var t,n=e.extension,r=void 0===n?"pdf":n,a=e.postfix,i=void 0===a?"":a,l=e.config,s=e.resources,c=l.reportName.toLowerCase().replace(/\s+/g,"-"),u=(b()(t=s.centers).call(t,(function(e){return e.id===+l.centerId}))||{name:"all-centers"}).name.toLowerCase().replace(/\s+/g,"-");return c+"-"+u+"-"+o("date")(moment(),"yyyyMMdd-HHmmss")+i+"."+r.toLowerCase()},download:function(e){var t=e.blob,n=e.fileName;if(!t)return;var o=r.cordova;o&&"android"===o.platformId&&o.plugins.fileOpener2?r.resolveLocalFileSystemURL(o.file.externalDataDirectory,(function(e){e.getFile(n,{create:!0,exclusive:!1},(function(e){e.createWriter((function(n){n.onwrite=function(){return t=e.nativeURL,void r.cordova.plugins.fileOpener2.showOpenWithDialog(t,w()(t).call(t,".csv")?"text/csv":"application/pdf",{error:function(e){return console.error("showOpenWithDialog error:",e)},success:function(){return null},position:[0,0]});var t},n.write(t)}))}),(function(e){return console.error("SAVE FILE ERROR:",e)}))})):y(t,n)}}}])},IE1r:function(e,t,n){"use strict";n("Muwe"),n("y89P"),n("JBxO"),n("3dw1"),n("8cZI");t.a=angular.module("csvMake",[]).service("csvMake",["$q",function(e){this.generate=function(e,t){return t.txtDelim=t.txtDelim||'"',t.decimalSep=t.decimalSep||".",t.fieldSep=t.fieldSep||",",t.charset=t.charset||"utf-8",t.fieldSep=this.isSpecialChar(t.fieldSep)?this.getSpecialChar(t.fieldSep):t.fieldSep,this.stringify(e,t)};var t={"\\t":"\t","\\b":"\b","\\v":"\v","\\f":"\f","\\r":"\r"};this.stringifyField=function(e,t){return"locale"===t.decimalSep&&this.isFloat(e)?e.toLocaleString():"."!==t.decimalSep&&this.isFloat(e)?e.toString().replace(".",t.decimalSep):"string"==typeof e?(e=e.replace(/"/g,'""'),(t.quoteStrings||e.indexOf(",")>-1||e.indexOf("\n")>-1||e.indexOf("\r")>-1)&&(e=t.txtDelim+e+t.txtDelim),e):"boolean"==typeof e?e?"TRUE":"FALSE":e},this.isFloat=function(e){return+e===e&&(!isFinite(e)||Boolean(e%1))},this.stringifyAsync=function(t,n){var r=e.defer(),o=this,a="",i="",l=e.when(t).then((function(e){var t,l;angular.isDefined(n.header)&&n.header&&(t=[],angular.forEach(n.header,(function(e,t){this.push(o.stringifyField(e,n))}),t),l=t.join(n.fieldSep?n.fieldSep:","),i+=l+"\r\n");var s,c,u=[];(angular.isArray(e)?u=e:angular.isFunction(e)&&(u=e()),angular.isDefined(n.label)&&n.label&&"boolean"==typeof n.label)&&(s=[],angular.forEach(u[0],(function(e,t){this.push(o.stringifyField(t,n))}),s),c=s.join(n.fieldSep?n.fieldSep:","),i+=c+"\r\n");angular.forEach(u,(function(e,t){var r,a,l=angular.copy(u[t]);a=[];var s=n.columnOrder?n.columnOrder:l;angular.forEach(s,(function(e,t){var r=n.columnOrder?l[e]:e;this.push(o.stringifyField(r,n))}),a),r=a.join(n.fieldSep?n.fieldSep:","),i+=t<u.length?r+"\r\n":r})),n.addByteOrderMarker&&(a+="\ufeff"),a+=i,r.resolve(a)}));return"function"==typeof l.catch&&l.catch((function(e){r.reject(e)})),r.promise},this.stringify=function(e,t){var n,r,o=this,a="",i="";angular.isDefined(t.header)&&t.header&&(n=[],angular.forEach(t.header,(function(e,n){this.push(o.stringifyField(e,t))}),n),r=n.join(t.fieldSep?t.fieldSep:","),i+=r+"\r\n");var l,s,c=e;angular.isDefined(t.label)&&t.label&&"boolean"==typeof t.label&&(l=[],angular.forEach(c[0],(function(e,n){this.push(o.stringifyField(n,t))}),l),s=l.join(t.fieldSep?t.fieldSep:","),i+=s+"\r\n");return angular.forEach(c,(function(e,n){var r,a,l=angular.copy(c[n]);a=[];var s=t.columnOrder?t.columnOrder:l;angular.forEach(s,(function(e,n){var r=t.columnOrder?l[e]:e;this.push(o.stringifyField(r,t))}),a),r=a.join(t.fieldSep?t.fieldSep:","),i+=n<c.length?r+"\r\n":r})),t.addByteOrderMarker&&(a+="\ufeff"),a+=i},this.isSpecialChar=function(e){return void 0!==t[e]},this.getSpecialChar=function(e){return t[e]}}])},PKSF:function(e,t,n){"use strict";t.a=n.p+"./assets/lato-bold.ttf?_rev=1d93f0f9bf99c82f3cbe55f17d016939"},UDUI:function(e,t,n){"use strict";var r=n("cgBC");n("dbsv");t.a=angular.module("jsPDF",[]).factory("jsPDF",["$window",function(e){return e.jsPDF=r.default,e.jsPDF}])},Xjih:function(e,t,n){"use strict";n("8cZI");var r=n("nbuU"),o=n.n(r),a=n("5/DJ");t.a=angular.module("deskworks.reports.reportFooter",[a.a.name]).factory("reportFooter",["$filter","reportStyles",function(e,t){return function(){return 3===arguments.length?r.apply(void 0,arguments):n.apply(void 0,arguments)};function n(e){var n,r=e.config,a=e.doc,i=(e.data,e.resources),l=o()(n=i.centers).call(n,(function(e){return e.id===+r.centerId}));if(l){var s,c=a.internal.pageSize.width,u=a.internal.pageSize.height;a.setFont(a.getFont().fontName,"normal"),a.setTextColor(t.footer.textColor),a.setFontSize(9),s=[l.name,l.phone,l.street1],l.street2&&s.push(l.street2),s.push(l.city),s.push(l.state.name||l.state),s.push(l.zip),s=s.join(" / "),a.text(s,(c-a.getTextWidth(s))/2,u-30)}}function r(e,n,r){var o,a=n.internal.pageSize.width,i=n.internal.pageSize.height;n.setFont(n.getFont().fontName,"normal"),n.setTextColor(t.footer.textColor),n.setFontSize(9),o=[r.center.name,r.center.phone,r.center.street1],r.center.street2&&o.push(r.center.street2),o.push(r.center.city),o.push(r.center.state.name||r.center.state),o.push(r.center.zip),o=o.join(" / "),n.text(o,(a-n.getTextWidth(o))/2,i-30)}}])}}]);