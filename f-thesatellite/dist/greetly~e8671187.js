(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"/kd0":function(e,t,n){"use strict";n.r(t);n("3dw1"),n("Muwe"),n("y89P");var r=n("yCd9"),o=n.n(r),a=n("lRNC"),l=n.n(a),f=["$injector",function(e){var t,r,a=(t=n("oA+D"),o()(r=l()(t).call(t)).call(r,t));e.loadNewModules(o()(a).call(a,(function(e){return e.default.name}))),e.invoke(["$templateCache",function(e){var t=n("609E");l()(t).call(t).forEach((function(n){return e.put(n.replace(/^\.\//,""),t(n))}))}])}];t.default=f},"5tkp":function(e,t,n){"use strict";n.r(t),t.default=angular.module("deskworks.GreetlySettings",["ngResource","deskworks.config"]).factory("GreetlySettings",["$resource","deskworksConfig",function(e,t){var n=e(t.getApiAbsUrl("/greetly/settings"),{},{update:{method:"PUT"}});return{get:function(){return n.get().$promise},save:function(e){return n.update({},e).$promise}}}])},"609E":function(e,t,n){var r={"./settings/greetly-settings.tpl.html":"KFAT"};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id="609E"},"9nkd":function(e,t,n){"use strict";n.r(t),t.default=angular.module("deskworks.GreetlyCenter",["ngResource","deskworks.config"]).factory("GreetlyCenter",["$resource","deskworksConfig",function(e,t){var n=e(t.getApiAbsUrl("/greetly/centers/:centerId"),{},{update:{method:"PUT"}});return{query:function(){return n.query().$promise},save:function(e){return n.update({centerId:e.id},e).$promise}}}])},KFAT:function(e,t){e.exports='<ff-panel> <ff-panel-header ff-spin="$ctrl.spin" class="ff-spin-right"> <span translate="INTEGRATIONS_SETUP.GREETLY.HEADER"></span> </ff-panel-header> <form name="form" novalidate> <label class="ff-row"> <ff-label flex="0 0 120px"><span translate="INTEGRATIONS_SETUP.API_KEY"></span></ff-label> <ff-text ff-model="$ctrl.settings.apiKey" ff-change="$ctrl.saveSettings(form)" ff-validate-alert="{{\'INTEGRATIONS_SETUP.API_KEY\' | translate}}"></ff-text> </label> </form> <ff-header style="padding-top:.6rem" ng-if="$ctrl.centers"> <ff-row> <cell flex="0 0 50%"><span translate="INTEGRATIONS_SETUP.GREETLY.CENTER"></span></cell> <cell flex="0 0 50%"><span translate="INTEGRATIONS_SETUP.GREETLY.LOCATION"></span></cell> </ff-row> </ff-header> <div ng-repeat="center in $ctrl.centers"> <form name="form" novalidate> <ff-row> <ff-static flex="0 0 50%"> <ff-row> <label> <ff-checkbox name="enabled" ff-model="center.enabled" ff-change="$ctrl.saveCenter(center, form)"> <span style="vertical-align:initial">{{center.name}}</span> </ff-checkbox> </label> </ff-row> </ff-static> <ff-select flex="0 0 50%" name="greetlyLocationId" ff-model="center.greetlyLocationId" ff-required="true" ff-options="location.id as location.name for location in $ctrl.locations" ff-change="$ctrl.saveCenter(center, form)" ff-validate-alert="{{\'INTEGRATIONS_SETUP.GREETLY.LOCATION\' | translate}}"></ff-select> </ff-row> <ff-static ng-if="center.enabled"> <ff-col> <label> <ff-checkbox name="notificationByEmail" ff-model="center.notificationByEmail" ff-change="$ctrl.saveCenter(center, form)"> <span translate="INTEGRATIONS_SETUP.GREETLY.NOTIFICATION.BY_EMAIL"></span> </ff-checkbox> </label> <label> <ff-checkbox name="notificationBySlack" ff-model="center.notificationBySlack" ff-change="$ctrl.saveCenter(center, form)"> <span translate="INTEGRATIONS_SETUP.GREETLY.NOTIFICATION.BY_SLACK"></span> </ff-checkbox> </label> <label> <ff-checkbox name="notificationBySms" ff-model="center.notificationBySms" ff-change="$ctrl.saveCenter(center, form)"> <span translate="INTEGRATIONS_SETUP.GREETLY.NOTIFICATION.BY_SMS"></span> </ff-checkbox> </label> <label> <ff-checkbox name="notificationByVoice" ff-model="center.notificationByVoice" ff-change="$ctrl.saveCenter(center, form)"> <span translate="INTEGRATIONS_SETUP.GREETLY.NOTIFICATION.BY_VOICE"></span> </ff-checkbox> </label> </ff-col> </ff-static> </form> </div> </ff-panel> '},e1Ru:function(e,t,n){"use strict";n.r(t);n("JBxO"),n("FdtR");t.default=angular.module("deskworks.greetlySettingsDirective",["debounce","deskworks.GreetlySettings","deskworks.GreetlyCenter","deskworks.GreetlyLocation"]).directive("greetlySettings",(function(){return{templateUrl:"settings/greetly-settings.tpl.html",restrict:"E",scope:!0,controller:"GreetlySettingsCtrl as $ctrl"}})).controller("GreetlySettingsCtrl",["$q","dwAlerts","debounce","GreetlySettings","GreetlyCenter","GreetlyLocation",function(e,t,n,r,o,a){var l=this;l.$onInit=function(){l.spin=!0,l.loadSettings().then((function(e){if(e.apiKey)return l.loadGreetlyData()})).finally((function(){l.spin=!1}))},l.loadSettings=function(){return r.get().catch((function(e){return t.error(e,"Failed to load Greetly settings.")})).then((function(e){return l.settings=e,e}))},l.loadGreetlyData=function(){var n=[o.query().catch((function(e){return t.error(e,"Failed to query Greetly centers.")})).then((function(e){l.centers=e})),a.query().catch((function(e){return t.error(e,"Failed to query Greetly locations.")})).then((function(e){l.locations=e}))];return e.all(n)},l.saveCenter=n((function(e,n){if(n.$invalid)return;return l.spin=!0,o.save(e).catch((function(e){return t.error(e,"Failed to save Greetly center.")})).finally((function(){l.spin=!1}))}),1e3),l.saveSettings=n((function(e){if(e.$invalid)return;return l.spin=!0,r.save(l.settings).catch((function(e){return t.error(e,"Failed to save Greetly settings.")})).then((function(){if(l.settings.apiKey)return l.loadGreetlyData();l.centers=null,l.locations=null})).finally((function(){l.spin=!1}))}),1e3)}])},fPKE:function(e,t,n){"use strict";n.r(t),t.default=angular.module("deskworks.GreetlyLocation",["ngResource","deskworks.config"]).factory("GreetlyLocation",["$resource","deskworksConfig",function(e,t){var n=e(t.getApiAbsUrl("/greetly/greetly-locations"));return{query:function(){return n.query().$promise}}}])},"oA+D":function(e,t,n){var r={"./services/greetly-center.service.js":"9nkd","./services/greetly-locations.service.js":"fPKE","./services/greetly-settings.service.js":"5tkp","./settings/greetly-settings.directive.js":"e1Ru"};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id="oA+D"}}]);