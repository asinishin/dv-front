(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{"5icx":function(e,t,r){"use strict";r.r(t);r("JBxO"),r("FdtR");var n=r("kKKl"),a=r.n(n),s=r("cnK8"),i=r("ZICq"),u=r("I3LT");t.default=angular.module("deskworks.paperCutSettingsDirective",["debounce",s.default.name,i.default.name,u.default.name]).directive("paperCutSettings",(function(){return{template:a.a,restrict:"E",scope:!0,controller:"PaperCutSettingsCtrl as $ctrl"}})).controller("PaperCutSettingsCtrl",["dwAlerts","$q","debounce","helper","PaperCutSettings","PaperCutCenter","PaperCutPrinter",function(e,t,r,n,a,s,i){var u=this;u.$onInit=function(){u.load()},u.load=function(){var r={paperCutSettings:a.get().catch((function(t){return e.error(t,"Failed to load PaperCut settings.")})),paperCutCenters:s.query().catch((function(t){return e.error(t,"Failed to query PaperCut centers.")})),paperCutPrinters:i.query().catch((function(t){return e.error(t,"Failed to query PaperCut printers.")}))};return u.spin=!0,t.all(r).then((function(e){return u.paperCutSettings=e.paperCutSettings,u.paperCutCenters=e.paperCutCenters,u.paperCutPrinters=e.paperCutPrinters,e})).finally((function(){u.spin=!1}))},u.saveSettings=r((function(t){if(t&&t.$invalid)return;return u.spin=!0,a.save(u.paperCutSettings).catch((function(t){return e.error(t,"Failed to save PaperCut settings.")})).finally((function(){u.spin=!1})).then((function(){return delete u.paperCutCenters,u.load()}))}),1e3),u.saveCenter=r((function(t,r){if(r&&r.$invalid)return;return t.$$spin=!0,s.save(t).finally((function(){t.$$spin=!1})).catch((function(t){return e.error(t,"Failed to save PaperCut center.")}))}),500)}])},"7vs/":function(e,t,r){var n={"./services/paper-cut-center.service.js":"ZICq","./services/paper-cut-printer.service.js":"I3LT","./services/paper-cut-settings.service.js":"cnK8","./settings/paper-cut-settings.directive.js":"5icx"};function a(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id="7vs/"},I3LT:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.PaperCutPrinter",["ngResource","deskworks.config"]).factory("PaperCutPrinter",["$resource","$q","deskworksConfig",function(e,t,r){var n=e(r.getApiAbsUrl("/paper-cut/paper-cut-printers"));return{query:function(){return n.query().$promise}}}])},PRKl:function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),a=r.n(n),s=r("lRNC"),i=r.n(s),u=["$injector",function(e){var t,n,s=(t=r("7vs/"),a()(n=i()(t).call(t)).call(n,t));e.loadNewModules(a()(s).call(s,(function(e){return e.default.name})))}];t.default=u},ZICq:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.PaperCutCenter",["ngResource","deskworks.config"]).factory("PaperCutCenter",["$resource","$q","deskworksConfig",function(e,t,r){var n=e(r.getApiAbsUrl("/paper-cut/centers/:centerId"),{},{update:{method:"PUT"}});return{query:function(){return n.query().$promise},save:function(e){return n.update({centerId:e.id},e).$promise}}}])},cnK8:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.PaperCutSettings",["ngResource","deskworks.config"]).factory("PaperCutSettings",["$resource","$q","deskworksConfig",function(e,t,r){var n=e(r.getApiAbsUrl("/paper-cut/settings"),{},{update:{method:"PUT"}});return{get:function(){return n.get().$promise},save:function(e){return n.update({},e).$promise}}}])},kKKl:function(e,t){e.exports='<ff-panel> <ff-panel-header ff-spin="$ctrl.spin" class="ff-spin-right"> <span translate="INTEGRATIONS_SETUP.PAPER_CUT.HEADER"></span> </ff-panel-header> <form name="form" novalidate> <label class="ff-row"> <ff-label flex="0 0 120px"><span translate="INTEGRATIONS_SETUP.API_KEY"></span></ff-label> <ff-text ff-model="$ctrl.paperCutSettings.apiKey" ff-change="$ctrl.saveSettings(form)" ff-validate-alert="{{\'INTEGRATIONS_SETUP.API_KEY\' | translate}}"></ff-text> </label> <label class="ff-row"> <ff-label flex="0 0 120px"><span translate="INTEGRATIONS_SETUP.PAPER_CUT.SERVER_DOMAIN"></span></ff-label> <ff-text ff-model="$ctrl.paperCutSettings.serverDomain" ff-change="$ctrl.saveSettings(form)" ff-validate-alert="{{\'INTEGRATIONS_SETUP.PAPER_CUT.SERVER_DOMAIN\' | translate}}"></ff-text> </label> </form> <form name="form" novalidate ng-repeat="center in $ctrl.paperCutCenters" class="animate-collapse"> <ff-header ff-dim="center.$$spin" style="padding-top:.6rem"><cell>{{center.name}}</cell></ff-header> <label class="ff-row"> <ff-label flex="0 0 120px"><span translate="INTEGRATIONS_SETUP.PAPER_CUT.PRINTER"></span></ff-label> <ff-select name="paperCutPrinterId" ff-model="center.paperCutPrinterId" ff-options="printer.id as printer.name for printer in $ctrl.paperCutPrinters" ff-change="$ctrl.saveCenter(center, form)" ff-validate-alert="{{\'INTEGRATIONS_SETUP.PAPER_CUT.PRINTER\' | translate}}"> <option value="">-</option> </ff-select> </label> </form> </ff-panel> '}}]);