(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{COLo:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(((e,t)=>t.isPrototypeOf(e))(o=e,(n=String).prototype)||(null===(r=o.constructor)||void 0===r?void 0:r.name)===n.name)?"string":t;var o,n,r})(t)===e,o=e=>t=>typeof t===e,n=t("string"),r=t("array"),l=o("boolean"),a=(s=void 0,e=>s===e);var s;const i=e=>!(e=>null==e)(e),c=o("function"),d=o("number"),m=()=>{},u=e=>()=>e,p=e=>e,g=(e,t)=>e===t;function b(e,...t){return(...o)=>{const n=t.concat(o);return e.apply(null,n)}}const h=e=>{e()},f=u(!1),y=u(!0);class v{constructor(e,t){this.tag=e,this.value=t}static some(e){return new v(!0,e)}static none(){return v.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?v.some(e(this.value)):v.none()}bind(e){return this.tag?e(this.value):v.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:v.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return i(e)?v.some(e):v.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}v.singletonNone=new v(!1);const w=Object.keys,S=Object.hasOwnProperty,C=(e,t)=>{const o=w(e);for(let n=0,r=o.length;n<r;n++){const r=o[n];t(e[r],r)}},x=(e,t)=>{const o={};var n;return((e,t,o,n)=>{C(e,(e,r)=>{(t(e,r)?o:n)(e,r)})})(e,t,(n=o,(e,t)=>{n[t]=e}),m),o},T=e=>((e,t)=>{const o=[];return C(e,(e,n)=>{o.push(t(e,n))}),o})(e,p),k=e=>w(e).length,N=(e,t)=>A(e,t)?v.from(e[t]):v.none(),A=(e,t)=>S.call(e,t),O=(e,t)=>A(e,t)&&void 0!==e[t]&&null!==e[t],D=Array.prototype.indexOf,_=Array.prototype.push,E=(e,t)=>((e,t)=>D.call(e,t))(e,t)>-1,R=(e,t)=>{for(let o=0,n=e.length;o<n;o++){if(t(e[o],o))return!0}return!1},L=(e,t)=>{const o=[];for(let n=0;n<e;n++)o.push(t(n));return o},M=(e,t)=>{const o=e.length,n=new Array(o);for(let r=0;r<o;r++){const o=e[r];n[r]=t(o,r)}return n},I=(e,t)=>{for(let o=0,n=e.length;o<n;o++){t(e[o],o)}},P=(e,t)=>{const o=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t(r,n)&&o.push(r)}return o},B=(e,t,o)=>(I(e,(e,n)=>{o=t(o,e,n)}),o),U=(e,t)=>((e,t,o)=>{for(let n=0,r=e.length;n<r;n++){const r=e[n];if(t(r,n))return v.some(r);if(o(r,n))break}return v.none()})(e,t,f),F=(e,t)=>(e=>{const t=[];for(let o=0,n=e.length;o<n;++o){if(!r(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);_.apply(t,e[o])}return t})(M(e,t)),H=(e,t)=>{for(let o=0,n=e.length;o<n;++o){if(!0!==t(e[o],o))return!1}return!0},j=(e,t)=>t>=0&&t<e.length?v.some(e[t]):v.none(),q=(e,t)=>{for(let o=0;o<e.length;o++){const n=t(e[o],o);if(n.isSome())return n}return v.none()},$=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},V={fromHtml:(e,t)=>{const o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return $(o.childNodes[0])},fromTag:(e,t)=>{const o=(t||document).createElement(e);return $(o)},fromText:(e,t)=>{const o=(t||document).createTextNode(e);return $(o)},fromDom:$,fromPoint:(e,t,o)=>v.from(e.dom.elementFromPoint(t,o)).map($)},z=(e,t)=>{const o=e.dom;if(1!==o.nodeType)return!1;{const e=o;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},K=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,W=(e,t)=>e.dom===t.dom,G=z;"undefined"!=typeof window?window:Function("return this;")();const Q=e=>e.dom.nodeName.toLowerCase(),J=e=>e.dom.nodeType,Z=e=>t=>J(t)===e,X=e=>8===J(e)||"#comment"===Q(e),Y=Z(1),ee=Z(3),te=Z(9),oe=Z(11),ne=e=>t=>Y(t)&&Q(t)===e,re=e=>{return te(e)?e:(t=e,V.fromDom(t.dom.ownerDocument));var t},le=e=>v.from(e.dom.parentNode).map(V.fromDom),ae=(e,t)=>{const o=c(t)?t:f;let n=e.dom;const r=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,t=V.fromDom(e);if(r.push(t),!0===o(t))break;n=e}return r},se=e=>v.from(e.dom.previousSibling).map(V.fromDom),ie=e=>v.from(e.dom.nextSibling).map(V.fromDom),ce=e=>M(e.dom.childNodes,V.fromDom),de=e=>((e,t)=>{const o=e.dom.childNodes;return v.from(o[t]).map(V.fromDom)})(e,0),me=e=>{const t=(e=>V.fromDom(e.dom.getRootNode()))(e);return oe(o=t)&&i(o.dom.host)?v.some(t):v.none();var o},ue=e=>V.fromDom(e.dom.host),pe=e=>{const t=ee(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const o=t.ownerDocument;return me(V.fromDom(t)).fold(()=>o.body.contains(t),(n=pe,r=ue,e=>n(r(e))));var n,r};var ge=(e,t,o,n,r)=>e(o,n)?v.some(o):c(r)&&r(o)?v.none():t(o,n,r);const be=(e,t,o)=>{let n=e.dom;const r=c(o)?o:f;for(;n.parentNode;){n=n.parentNode;const e=V.fromDom(n);if(t(e))return v.some(e);if(r(e))break}return v.none()},he=(e,t,o)=>be(e,e=>z(e,t),o),fe=(e,t)=>((e,t)=>U(e.dom.childNodes,e=>t(V.fromDom(e))).map(V.fromDom))(e,e=>z(e,t)),ye=(e,t)=>((e,t)=>{const o=void 0===t?document:t.dom;return K(o)?v.none():v.from(o.querySelector(e)).map(V.fromDom)})(t,e),ve=(e,t,o)=>ge((e,t)=>z(e,t),he,e,t,o),we=(e,t=!1)=>{return pe(e)?e.dom.isContentEditable:(o=e,ve(o,"[contenteditable]")).fold(u(t),e=>"true"===Se(e));var o},Se=e=>e.dom.contentEditable,Ce=e=>t=>W(t,(e=>V.fromDom(e.getBody()))(e)),xe=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,Te=e=>V.fromDom(e.selection.getStart()),ke=e=>{return(t=e,o=ne("table"),ge((e,t)=>t(e),be,t,o,n)).forall(we);var t,o,n},Ne=(e,t)=>{let o=[];return I(ce(e),e=>{t(e)&&(o=o.concat([e])),o=o.concat(Ne(e,t))}),o},Ae=(e,t)=>((e,t)=>P(ce(e),t))(e,e=>z(e,t)),Oe=(e,t)=>((e,t)=>{const o=void 0===t?document:t.dom;return K(o)?[]:M(o.querySelectorAll(e),V.fromDom)})(t,e),De=(e,t,o)=>{if(!(n(o)||l(o)||d(o)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,o+"")},_e=(e,t,o)=>{De(e.dom,t,o)},Ee=(e,t)=>{const o=e.dom.getAttribute(t);return null===o?void 0:o},Re=(e,t)=>v.from(Ee(e,t)),Le=(e,t)=>{e.dom.removeAttribute(t)},Me=(e,t,o=g)=>e.exists(e=>o(e,t)),Ie=(e,t,o)=>e.isSome()&&t.isSome()?v.some(o(e.getOrDie(),t.getOrDie())):v.none(),Pe=(e,t)=>((e,t,o)=>""===t||e.length>=t.length&&e.substr(o,o+t.length)===t)(e,t,0),Be=(Ue=/^\s+|\s+$/g,e=>e.replace(Ue,""));var Ue;const Fe=e=>e.length>0,He=(e,t=10)=>{const o=parseInt(e,t);return isNaN(o)?v.none():v.some(o)},je=e=>void 0!==e.style&&c(e.style.getPropertyValue),qe=(e,t,o)=>{((e,t,o)=>{if(!n(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);je(e)&&e.style.setProperty(t,o)})(e.dom,t,o)},$e=(e,t)=>{const o=e.dom,n=window.getComputedStyle(o).getPropertyValue(t);return""!==n||pe(e)?n:Ve(o,t)},Ve=(e,t)=>je(e)?e.style.getPropertyValue(t):"",ze=(e,t)=>{const o=e.dom,n=Ve(o,t);return v.from(n).filter(e=>e.length>0)},Ke=(e,t)=>{((e,t)=>{je(e)&&e.style.removeProperty(t)})(e.dom,t),Me(Re(e,"style").map(Be),"")&&Le(e,"style")},We=(e,t,o=0)=>Re(e,t).map(e=>parseInt(e,10)).getOr(o),Ge=(e,t)=>Qe(e,t,y),Qe=(e,t,o)=>F(ce(e),e=>z(e,t)?o(e)?[e]:[]:Qe(e,t,o)),Je=["tfoot","thead","tbody","colgroup"],Ze=(e,t,o)=>({element:e,rowspan:t,colspan:o}),Xe=(e,t,o)=>({element:e,cells:t,section:o}),Ye=(e,t)=>((e,t,o=f)=>{if(o(t))return v.none();if(E(e,Q(t)))return v.some(t);return he(t,e.join(","),e=>z(e,"table")||o(e))})(["td","th"],e,t),et=(e,t)=>ve(e,"table",t),tt=e=>Ge(e,"tr"),ot=e=>et(e).fold(u([]),e=>Ae(e,"colgroup")),nt=(e,t)=>M(e,e=>{if("colgroup"===Q(e)){const t=M((e=>z(e,"colgroup")?Ae(e,"col"):F(ot(e),e=>Ae(e,"col")))(e),e=>{const t=We(e,"span",1);return Ze(e,1,t)});return Xe(e,t,"colgroup")}{const o=M((e=>Ge(e,"th,td"))(e),e=>{const t=We(e,"rowspan",1),o=We(e,"colspan",1);return Ze(e,t,o)});return Xe(e,o,t(e))}}),rt=e=>le(e).map(e=>{const t=Q(e);return(e=>E(Je,e))(t)?t:"tbody"}).getOr("tbody"),lt=e=>Re(e,"data-snooker-locked-cols").bind(e=>v.from(e.match(/\d+/g))).map(e=>((e,t)=>{const o={};for(let n=0,r=e.length;n<r;n++){const r=e[n];o[String(r)]=t(r,n)}return o})(e,y)),at=(e,t)=>e+","+t,st=(e,t)=>{const o=F(e.all,e=>e.cells);return P(o,t)},it=e=>{const t={},o=[];var n;const r=(n=e,j(n,0)).map(e=>e.element).bind(et).bind(lt).getOr({});let l=0,a=0,s=0;const{pass:i,fail:c}=((e,t)=>{const o=[],n=[];for(let r=0,l=e.length;r<l;r++){const l=e[r];(t(l,r)?o:n).push(l)}return{pass:o,fail:n}})(e,e=>"colgroup"===e.section);I(c,e=>{const n=[];I(e.cells,e=>{let o=0;for(;void 0!==t[at(s,o)];)o++;const l=O(r,o.toString()),i=((e,t,o,n,r,l)=>({element:e,rowspan:t,colspan:o,row:n,column:r,isLocked:l}))(e.element,e.rowspan,e.colspan,s,o,l);for(let n=0;n<e.colspan;n++)for(let r=0;r<e.rowspan;r++){const e=o+n,l=at(s+r,e);t[l]=i,a=Math.max(a,e+1)}n.push(i)}),l++,o.push(Xe(e.element,n,e.section)),s++});const{columns:d,colgroups:m}=(e=>j(e,e.length-1))(i).map(e=>{const t=(e=>{const t={};let o=0;return I(e.cells,e=>{const n=e.colspan;L(n,r=>{const l=o+r;t[l]=((e,t,o)=>({element:e,colspan:t,column:o}))(e.element,n,l)}),o+=n}),t})(e);return{colgroups:[((e,t)=>({element:e,columns:t}))(e.element,T(t))],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:((e,t)=>({rows:e,columns:t}))(l,a),access:t,all:o,columns:d,colgroups:m}},ct=e=>{const t=(e=>{const t=tt(e),o=[...ot(e),...t];return nt(o,rt)})(e);return it(t)},dt=(e,t,o)=>v.from(e.access[at(t,o)]),mt=(e,t,o)=>{const n=st(e,e=>o(t,e.element));return n.length>0?v.some(n[0]):v.none()},ut=e=>F(e.all,e=>e.cells),pt=(e,t)=>v.from(e.columns[t]);var gt=tinymce.util.Tools.resolve("tinymce.util.Tools");const bt=(e,t,o)=>{const n=e.select("td,th",t);let r;for(let t=0;t<n.length;t++){const l=e.getStyle(n[t],o);if(a(r)&&(r=l),r!==l)return""}return r},ht=(e,t,o)=>{gt.each("left center right".split(" "),n=>{n!==o&&e.formatter.remove("align"+n,{},t)}),o&&e.formatter.apply("align"+o,{},t)},ft=(e,t,o)=>{e.dispatch("TableModified",{...o,table:t})},yt=(e,t)=>(e=>{const t=parseFloat(e);return isNaN(t)?v.none():v.some(t)})(e).getOr(t),vt=(e,t,o)=>yt($e(e,t),o),wt=(e,t)=>{const o=e.dom,n=o.getBoundingClientRect().width||o.offsetWidth;return"border-box"===t?n:((e,t,o,n)=>t-vt(e,"padding-"+o,0)-vt(e,"padding-"+n,0)-vt(e,`border-${o}-width`,0)-vt(e,`border-${n}-width`,0))(e,n,"left","right")},St=e=>wt(e,"content-box");var Ct=tinymce.util.Tools.resolve("tinymce.Env");const xt=L(5,e=>{const t=e+1+"px";return{title:t,value:t}}),Tt=M(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],e=>({title:e,value:e.toLowerCase()})),kt=e=>{var t;const o=e.dom,n=null!==(t=o.getParent(e.selection.getStart(),o.isBlock))&&void 0!==t?t:e.getBody();return St(V.fromDom(n))+"px"},Nt=e=>t=>t.options.get(e),At=Nt("table_sizing_mode"),Ot=Nt("table_border_widths"),Dt=Nt("table_border_styles"),_t=Nt("table_cell_advtab"),Et=Nt("table_row_advtab"),Rt=Nt("table_advtab"),Lt=Nt("table_appearance_options"),Mt=Nt("table_grid"),It=Nt("table_style_by_css"),Pt=Nt("table_cell_class_list"),Bt=Nt("table_row_class_list"),Ut=Nt("table_class_list"),Ft=Nt("table_toolbar"),Ht=Nt("table_background_color_map"),jt=Nt("table_border_color_map"),qt=e=>"fixed"===At(e),$t=e=>"responsive"===At(e),Vt=e=>{const t=e.options,o=t.get("table_default_styles");return t.isSet("table_default_styles")?o:((e,t)=>$t(e)||!It(e)?t:qt(e)?{...t,width:kt(e)}:{...t,width:"100%"})(e,o)},zt=e=>{const t=e.options,o=t.get("table_default_attributes");return t.isSet("table_default_attributes")?o:((e,t)=>$t(e)||It(e)?t:qt(e)?{...t,width:kt(e)}:{...t,width:"100%"})(e,o)},Kt=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Wt=(e,t,o)=>{const n=mt(e,t,W),r=mt(e,o,W);return n.bind(e=>r.map(t=>{return o=e,n=t,r=Math.min(o.row,n.row),l=Math.min(o.column,n.column),a=Math.max(o.row+o.rowspan-1,n.row+n.rowspan-1),s=Math.max(o.column+o.colspan-1,n.column+n.colspan-1),{startRow:r,startCol:l,finishRow:a,finishCol:s};var o,n,r,l,a,s}))},Gt=(e,t,o)=>Wt(e,t,o).bind(t=>((e,t)=>{let o=!0;const n=b(Kt,t);for(let r=t.startRow;r<=t.finishRow;r++)for(let l=t.startCol;l<=t.finishCol;l++)o=o&&dt(e,r,l).exists(n);return o?v.some(t):v.none()})(e,t)),Qt=ct,Jt=(e,t)=>{le(e).each(o=>{o.dom.insertBefore(t.dom,e.dom)})},Zt=(e,t)=>{ie(e).fold(()=>{le(e).each(e=>{Yt(e,t)})},e=>{Jt(e,t)})},Xt=(e,t)=>{de(e).fold(()=>{Yt(e,t)},o=>{e.dom.insertBefore(t.dom,o.dom)})},Yt=(e,t)=>{e.dom.appendChild(t.dom)},eo=(e,t)=>{Jt(e,t),Yt(t,e)},to=(e,t)=>{I(t,(o,n)=>{const r=0===n?e:t[n-1];Zt(r,o)})},oo=(e,t)=>{I(t,t=>{Yt(e,t)})},no=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},ro=e=>{const t=ce(e);t.length>0&&to(e,t),no(e)},lo=((e,t)=>{const o=t=>e(t)?v.from(t.dom.nodeValue):v.none();return{get:n=>{if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return o(n).getOr("")},getOption:o,set:(o,n)=>{if(!e(o))throw new Error("Can only set raw "+t+" value of a "+t+" node");o.dom.nodeValue=n}}})(ee,"text"),ao=e=>lo.get(e),so=(e,t)=>lo.set(e,t);var io=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const co=(e,t,o,n)=>{const r=t(e,o);return l=(o,n)=>{const r=t(e,n);return mo(e,o,r)},a=r,((e,t)=>{for(let o=e.length-1;o>=0;o--)t(e[o],o)})(n,(e,t)=>{a=l(a,e,t)}),a;var l,a},mo=(e,t,o)=>t.bind(t=>o.filter(b(e.eq,t))),uo=(e,t,o)=>o.length>0?((e,t,o,n)=>n(e,t,o[0],o.slice(1)))(e,t,o,co):v.none(),po={up:u({selector:he,closest:ve,predicate:be,all:ae}),down:u({selector:Oe,predicate:Ne}),styles:u({get:$e,getRaw:ze,set:qe,remove:Ke}),attrs:u({get:Ee,set:_e,remove:Le,copyTo:(e,t)=>{((e,t)=>{const o=e.dom;C(t,(e,t)=>{De(o,t,e)})})(t,B(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}))}}),insert:u({before:Jt,after:Zt,afterAll:to,append:Yt,appendAll:oo,prepend:Xt,wrap:eo}),remove:u({unwrap:ro,remove:no}),create:u({nu:V.fromTag,clone:e=>V.fromDom(e.dom.cloneNode(!1)),text:V.fromText}),query:u({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:se,nextSibling:ie}),property:u({children:ce,name:Q,parent:le,document:e=>re(e).dom,isText:ee,isComment:X,isElement:Y,isSpecial:e=>{const t=Q(e);return E(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>Y(e)?Re(e,"lang"):v.none(),getText:ao,setText:so,isBoundary:e=>!!Y(e)&&("body"===Q(e)||E(io,Q(e))),isEmptyTag:e=>!!Y(e)&&E(["br","img","hr","input"],Q(e)),isNonEditable:e=>Y(e)&&"false"===Ee(e,"contenteditable")}),eq:W,is:G},go=e=>he(e,"table"),bo=(e,t,o)=>ye(e,t).bind(t=>ye(e,o).bind(e=>{return(o=go,n=[t,e],uo(po,(e,t)=>o(t),n)).map(o=>({first:t,last:e,table:o}));var o,n})),ho=(e,t)=>((e,t)=>{const o=Oe(e,t);return o.length>0?v.some(o):v.none()})(e,t),fo=(e,t,o)=>bo(e,t,o).bind(t=>{const o=t=>W(e,t),n=he(t.first,"thead,tfoot,tbody,table",o),r=he(t.last,"thead,tfoot,tbody,table",o);return n.bind(e=>r.bind(o=>W(e,o)?((e,t,o)=>{const n=Qt(e);return Gt(n,t,o)})(t.table,t.first,t.last):v.none()))}),yo=e=>M(e,V.fromDom),vo={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},wo=e=>(t,o)=>{const n=Q(t),r="col"===n||"colgroup"===n?et(l=t).bind(e=>ho(e,vo.firstSelectedSelector)).fold(u(l),e=>e[0]):t;var l;return ve(r,e,o)},So=wo("th,td,caption"),Co=wo("th,td"),xo=e=>yo(e.model.table.getSelectedCells()),To=(e,t)=>{const o=Co(e),n=o.bind(e=>et(e)).map(e=>tt(e));return Ie(o,n,(e,o)=>P(o,o=>R(yo(o.dom.cells),o=>"1"===Ee(o,t)||W(o,e)))).getOr([])},ko=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],No=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Ao=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Oo=e=>{return(t=e,o="#",Pe(t,o)?((e,t)=>e.substring(t))(t,o.length):t).toUpperCase();var t,o},Do=e=>(e=>No.test(e)||Ao.test(e))(e)?v.some({value:Oo(e)}):v.none(),_o=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},Eo=e=>(e=>({value:Oo(e)}))(_o(e.red)+_o(e.green)+_o(e.blue)),Ro=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Lo=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Mo=(e,t,o,n)=>({red:e,green:t,blue:o,alpha:n}),Io=(e,t,o,n)=>{const r=parseInt(e,10),l=parseInt(t,10),a=parseInt(o,10),s=parseFloat(n);return Mo(r,l,a,s)},Po=e=>{const t=Ro.exec(e);if(null!==t)return v.some(Io(t[1],t[2],t[3],"1"));const o=Lo.exec(e);return null!==o?v.some(Io(o[1],o[2],o[3],o[4])):v.none()},Bo=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Uo=()=>(e=>{const t=Bo(v.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(v.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{o(),t.set(v.some(e))}}})(e=>e.unbind()),Fo=(e,t,o)=>n=>{const r=Uo(),l=!Fe(o);const a=()=>{const a=xo(e),s=n=>e.formatter.match(t,{value:o},n.dom,l);l?(n.setActive(!R(a,s)),r.set(e.formatter.formatChanged(t,e=>n.setActive(!e),!0))):(n.setActive(H(a,s)),r.set(e.formatter.formatChanged(t,n.setActive,!1,{value:o})))};return e.initialized?a():e.on("init",a),r.clear},Ho=e=>O(e,"menu"),jo=e=>M(e,e=>{const t=e.text||e.title||"";return Ho(e)?{text:t,items:jo(e.menu)}:{text:t,value:e.value}}),qo=e=>e.length?v.some(jo([{text:"Select...",value:"mce-no-match"},...e])):v.none(),$o=(e,t,o,n)=>M(t,t=>{const r=t.text||t.title;return Ho(t)?{type:"nestedmenuitem",text:r,getSubmenuItems:()=>$o(e,t.menu,o,n)}:{text:r,type:"togglemenuitem",onAction:()=>n(t.value),onSetup:Fo(e,o,t.value)}}),Vo=(e,t)=>o=>{e.execCommand("mceTableApplyCellStyle",!1,{[t]:o})},zo=e=>F(e,e=>Ho(e)?[{...e,menu:zo(e.menu)}]:Fe(e.value)?[e]:[]),Ko=(e,t,o,n)=>r=>r($o(e,t,o,n)),Wo=(e,t,o)=>{const n=M(t,e=>{return{text:e.title,value:"#"+(t=e.value,Do(t).orThunk(()=>Po(t).map(Eo)).getOrThunk(()=>{const e=document.createElement("canvas");e.height=1,e.width=1;const o=e.getContext("2d");o.clearRect(0,0,e.width,e.height),o.fillStyle="#FFFFFF",o.fillStyle=t,o.fillRect(0,0,1,1);const n=o.getImageData(0,0,1,1).data,r=n[0],l=n[1],a=n[2],s=n[3];return Eo(Mo(r,l,a,s))})).value,type:"choiceitem"};var t});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:n.length>0?n:void 0,allowCustomColors:!1},onAction:t=>{const n="remove"===t.value?"":t.value;e.execCommand("mceTableApplyCellStyle",!1,{[o]:n})}}]},Go=e=>()=>{const t="header"===e.queryCommandValue("mceTableRowType")?"body":"header";e.execCommand("mceTableRowType",!1,{type:t})},Qo=e=>()=>{const t="th"===e.queryCommandValue("mceTableColType")?"td":"th";e.execCommand("mceTableColType",!1,{type:t})},Jo=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:ko}],Zo=e=>Jo.concat((e=>qo(Pt(e)).map(e=>({name:"class",type:"listbox",label:"Class",items:e})))(e).toArray()),Xo=(e,t)=>{const o=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(jo(Dt(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(o):o}},Yo=(e,t)=>{const o=e.dom;return{setAttrib:(e,n)=>{o.setAttrib(t,e,n)},setStyle:(e,n)=>{o.setStyle(t,e,n)},setFormat:(o,n)=>{""===n?e.formatter.remove(o,{value:null},t,!0):e.formatter.apply(o,{value:n},t)}}},en=ne("th"),tn=(e,t)=>e&&t?"sectionCells":e?"section":"cells",on=e=>{const t=P(e,e=>en(e.element));return 0===t.length?v.some("td"):t.length===e.length?v.some("th"):v.none()},nn=e=>{const t=M(e,e=>(e=>{const t="thead"===e.section,o=Me(on(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||o?{type:"header",subType:tn(t,o)}:{type:"body"}})(e).type),o=E(t,"header"),n=E(t,"footer");if(o||n){const e=E(t,"body");return!o||e||n?o||e||!n?v.none():v.some("footer"):v.some("header")}return v.some("body")},rn=(e,t)=>q(e.all,e=>U(e.cells,e=>W(t,e.element))),ln=(e,t,o)=>{const n=(e=>{const t=[],o=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(o);return t})(M(t.selection,t=>Ye(t).bind(t=>rn(e,t)).filter(o)));return r=n.length>0,l=n,r?v.some(l):v.none();var r,l},an=(e,t)=>ln(e,t,y),sn=(e,t)=>H(t,t=>((e,t)=>rn(e,t).exists(e=>!e.isLocked))(e,t)),cn=(e,t)=>((e,t)=>t.mergable)(0,t).filter(t=>sn(e,t.cells)),dn=(e,t)=>((e,t)=>t.unmergable)(0,t).filter(t=>sn(e,t)),mn=((e=>{if(!r(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],o={};I(e,(n,l)=>{const a=w(n);if(1!==a.length)throw new Error("one and only one name per case");const s=a[0],i=n[s];if(void 0!==o[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!r(i))throw new Error("case arguments must be an array");t.push(s),o[s]=(...o)=>{const n=o.length;if(n!==i.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+i.length+" ("+i+"), got "+n);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[l].apply(null,o)},match:e=>{const n=w(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!H(t,e=>E(n,e)))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[s].apply(null,o)},log:e=>{console.log(e,{constructors:t,constructor:s,params:o})}}}})})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),(e,t)=>{const o=ct(e);return an(o,t).bind(e=>{const t=e[e.length-1],n=e[0].row,r=t.row+t.rowspan,l=o.all.slice(n,r);return nn(l)}).getOr("")}),un=e=>{return Pe(e,"rgb")?Po(t=e).map(Eo).map(e=>"#"+e.value).getOr(t):e;var t},pn=e=>{const t=V.fromDom(e);return{borderwidth:ze(t,"border-width").getOr(""),borderstyle:ze(t,"border-style").getOr(""),bordercolor:ze(t,"border-color").map(un).getOr(""),backgroundcolor:ze(t,"background-color").map(un).getOr("")}},gn=e=>{const t=e[0],o=e.slice(1);return I(o,e=>{I(w(t),o=>{C(e,(e,n)=>{const r=t[o];""!==r&&o===n&&r!==e&&(t[o]="class"===o?"mce-no-match":"")})})}),t},bn=(e,t,o,n)=>U(e,e=>!a(o.formatter.matchNode(n,t+e))).getOr(""),hn=b(bn,["left","center","right"],"align"),fn=b(bn,["top","middle","bottom"],"valign"),yn=e=>et(V.fromDom(e)).map(t=>{const o={selection:yo(e.cells)};return mn(t,o)}).getOr(""),vn=(e,t)=>{const o=ct(e),n=ut(o),r=P(n,e=>R(t,t=>W(e.element,t)));return M(r,e=>({element:e.element.dom,column:pt(o,e.column).map(e=>e.element.dom)}))},wn=(e,t,o,n)=>{const r=1===t.length;I(t,t=>{const l=t.element,a=r?y:n,s=Yo(e,l);((e,t,o,n)=>{n("scope")&&e.setAttrib("scope",o.scope),n("class")&&"mce-no-match"!==o.class&&e.setAttrib("class",o.class),n("width")&&t.setStyle("width",xe(o.width))})(s,t.column.map(t=>Yo(e,t)).getOr(s),o,a),_t(e)&&((e,t,o)=>{o("backgroundcolor")&&e.setFormat("tablecellbackgroundcolor",t.backgroundcolor),o("bordercolor")&&e.setFormat("tablecellbordercolor",t.bordercolor),o("borderstyle")&&e.setFormat("tablecellborderstyle",t.borderstyle),o("borderwidth")&&e.setFormat("tablecellborderwidth",xe(t.borderwidth))})(s,o,a),n("halign")&&ht(e,l,o.halign),n("valign")&&((e,t,o)=>{gt.each("top middle bottom".split(" "),n=>{n!==o&&e.formatter.remove("valign"+n,{},t)}),o&&e.formatter.apply("valign"+o,{},t)})(e,l,o.valign)})},Sn=(e,t,o,n)=>{const r=n.getData();n.close(),e.undoManager.transact(()=>{((e,t,o,n)=>{const r=x(n,(e,t)=>o[t]!==e);k(r)>0&&t.length>=1&&et(t[0]).each(o=>{const l=vn(o,t),a=k(x(r,(e,t)=>"scope"!==t&&"celltype"!==t))>0,s=A(r,"celltype");(a||A(r,"scope"))&&wn(e,l,n,b(A,r)),s&&((e,t)=>{e.execCommand("mceTableCellType",!1,{type:t.celltype,no_events:!0})})(e,n),ft(e,o.dom,{structure:s,style:a})})})(e,t,o,r),e.focus()})},Cn=(e,t)=>{const o=et(t[0]).map(o=>M(vn(o,t),t=>((e,t,o,n)=>{const r=e.dom,l=n.getOr(t);return{width:(s=l,i="width",r.getStyle(s,i)||r.getAttrib(s,i)),scope:r.getAttrib(t,"scope"),celltype:(a=t,a.nodeName.toLowerCase()),class:r.getAttrib(t,"class",""),halign:hn(e,t),valign:fn(e,t),...o?pn(t):{}};var a,s,i})(e,t.element,_t(e),t.column)));return gn(o.getOrDie())},xn=e=>{const t=xo(e);if(0===t.length)return;const o=Cn(e,t),n={type:"tabpanel",tabs:[{title:"General",name:"general",items:Zo(e)},Xo(e,"cell")]},r={type:"panel",items:[{type:"grid",columns:2,items:Zo(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:_t(e)?n:r,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:b(Sn,e,t,o)})},Tn=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],kn=e=>Tn.concat((e=>qo(Bt(e)).map(e=>({name:"class",type:"listbox",label:"Class",items:e})))(e).toArray()),Nn=(e,t,o,n)=>{const r=1===t.length?y:n;I(t,t=>{const l=Ae(V.fromDom(t),"td,th"),a=Yo(e,t);((e,t,o)=>{o("class")&&"mce-no-match"!==t.class&&e.setAttrib("class",t.class),o("height")&&e.setStyle("height",xe(t.height))})(a,o,r),Et(e)&&((e,t,o)=>{o("backgroundcolor")&&e.setStyle("background-color",t.backgroundcolor),o("bordercolor")&&e.setStyle("border-color",t.bordercolor),o("borderstyle")&&e.setStyle("border-style",t.borderstyle)})(a,o,r),n("height")&&I(l,t=>{e.dom.setStyle(t.dom,"height",null)}),n("align")&&ht(e,t,o.align)})},An=(e,t,o,n)=>{const r=n.getData();n.close(),e.undoManager.transact(()=>{((e,t,o,n)=>{const r=x(n,(e,t)=>o[t]!==e);if(k(r)>0){const o=A(r,"type"),l=!o||k(r)>1;l&&Nn(e,t,n,b(A,r)),o&&((e,t)=>{e.execCommand("mceTableRowType",!1,{type:t.type,no_events:!0})})(e,n),et(V.fromDom(t[0])).each(t=>ft(e,t.dom,{structure:o,style:l}))}})(e,t,o,r),e.focus()})},On=e=>{const t=To(Te(e),vo.selected);if(0===t.length)return;const o=M(t,t=>((e,t,o)=>{const n=e.dom;return{height:n.getStyle(t,"height")||n.getAttrib(t,"height"),class:n.getAttrib(t,"class",""),type:yn(t),align:hn(e,t),...o?pn(t):{}}})(e,t.dom,Et(e))),n=gn(o),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:kn(e)},Xo(e,"row")]},l={type:"panel",items:[{type:"grid",columns:2,items:kn(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:Et(e)?r:l,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:n,onSubmit:b(An,e,M(t,e=>e.dom),n)})},Dn=(e,t,o)=>{const n=o?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],r=Lt(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],l=t.length>0?[{name:"class",type:"listbox",label:"Class",items:t}]:[];return n.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(r).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(l)},_n=(e,t,o,r)=>{if("TD"===t.tagName||"TH"===t.tagName)n(o)&&i(r)?e.setStyle(t,o,r):e.setStyles(t,o);else if(t.children)for(let n=0;n<t.children.length;n++)_n(e,t.children[n],o,r)},En=(e,t,o,n)=>{const r=e.dom,l={},s={},i=It(e),c=Rt(e),d=0===parseFloat(o.border);if(a(o.class)||"mce-no-match"===o.class||(l.class=o.class),s.height=xe(o.height),i?s.width=xe(o.width):r.getAttrib(t,"width")&&(l.width=(e=>e?e.replace(/px$/,""):"")(o.width)),i?(d?(l.border=0,s["border-width"]=""):(s["border-width"]=xe(o.border),l.border=1),s["border-spacing"]=xe(o.cellspacing)):(l.border=d?0:o.border,l.cellpadding=o.cellpadding,l.cellspacing=o.cellspacing),i&&t.children){const e={};if(d?e["border-width"]="":n.border&&(e["border-width"]=xe(o.border)),n.cellpadding&&(e.padding=xe(o.cellpadding)),c&&n.bordercolor&&(e["border-color"]=o.bordercolor),!(e=>{for(const t in e)if(S.call(e,t))return!1;return!0})(e))for(let o=0;o<t.children.length;o++)_n(r,t.children[o],e)}if(c){const e=o;s["background-color"]=e.backgroundcolor,s["border-color"]=e.bordercolor,s["border-style"]=e.borderstyle}r.setStyles(t,{...Vt(e),...s}),r.setAttribs(t,{...zt(e),...l})},Rn=(e,t,o,n)=>{const r=e.dom,l=n.getData(),a=x(l,(e,t)=>o[t]!==e);n.close(),e.undoManager.transact(()=>{if(!t){const o=He(l.cols).getOr(1),n=He(l.rows).getOr(1);e.execCommand("mceInsertTable",!1,{rows:n,columns:o}),t=Co(Te(e),Ce(e)).bind(t=>et(t,Ce(e))).map(e=>e.dom).getOrDie()}if(k(a)>0){const o={border:A(a,"border"),bordercolor:A(a,"bordercolor"),cellpadding:A(a,"cellpadding")};En(e,t,l,o);const n=r.select("caption",t)[0];(n&&!l.caption||!n&&l.caption)&&e.execCommand("mceTableToggleCaption"),ht(e,t,l.align)}if(e.focus(),e.addVisual(),k(a)>0){const o=A(a,"caption"),n=!o||k(a)>1;ft(e,t,{structure:o,style:n})}})},Ln=(e,t)=>{const o=e.dom;let n,r=((e,t)=>{const o=Vt(e),n=zt(e),r=t?{borderstyle:N(o,"border-style").getOr(""),bordercolor:un(N(o,"border-color").getOr("")),backgroundcolor:un(N(o,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...o,...n,...r,...(()=>{const t=o["border-width"];return It(e)&&t?{border:t}:N(n,"border").fold(()=>({}),e=>({border:e}))})(),...N(o,"border-spacing").or(N(n,"cellspacing")).fold(()=>({}),e=>({cellspacing:e})),...N(o,"border-padding").or(N(n,"cellpadding")).fold(()=>({}),e=>({cellpadding:e}))}})(e,Rt(e));t?(r.cols="1",r.rows="1",Rt(e)&&(r.borderstyle="",r.bordercolor="",r.backgroundcolor="")):(n=o.getParent(e.selection.getStart(),"table",e.getBody()),n?r=((e,t,o)=>{const n=e.dom,r=It(e)?n.getStyle(t,"border-spacing")||n.getAttrib(t,"cellspacing"):n.getAttrib(t,"cellspacing")||n.getStyle(t,"border-spacing"),l=It(e)?bt(n,t,"padding")||n.getAttrib(t,"cellpadding"):n.getAttrib(t,"cellpadding")||bt(n,t,"padding");return{width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),cellspacing:null!=r?r:"",cellpadding:null!=l?l:"",border:((t,o)=>{const n=ze(V.fromDom(o),"border-width");return It(e)&&n.isSome()?n.getOr(""):t.getAttrib(o,"border")||bt(e.dom,o,"border-width")||bt(e.dom,o,"border")||""})(n,t),caption:!!n.select("caption",t)[0],class:n.getAttrib(t,"class",""),align:hn(e,t),...o?pn(t):{}}})(e,n,Rt(e)):Rt(e)&&(r.borderstyle="",r.bordercolor="",r.backgroundcolor=""));const l=qo(Ut(e));l.isSome()&&r.class&&(r.class=r.class.replace(/\s*mce\-item\-table\s*/g,""));const a={type:"grid",columns:2,items:Dn(e,l.getOr([]),t)},s=Rt(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[a]},Xo(e,"table")]}:{type:"panel",items:[a]};e.windowManager.open({title:"Table Properties",size:"normal",body:s,onSubmit:b(Rn,e,n,r),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r})},Mn=e=>{C({mceTableProps:b(Ln,e,!1),mceTableRowProps:b(On,e),mceTableCellProps:b(xn,e),mceInsertTableDialog:b(Ln,e,!0)},(t,o)=>e.addCommand(o,()=>{return o=t,void(ke(Te(e))&&o());var o}))},In=p,Pn=e=>{const t=(e,t)=>Re(e,t).exists(e=>parseInt(e,10)>1);return e.length>0&&H(e,e=>t(e,"rowspan")||t(e,"colspan"))?v.some(e):v.none()},Bn=(e,t,o)=>t.length<=1?v.none():fo(e,o.firstSelectedSelector,o.lastSelectedSelector).map(e=>({bounds:e,cells:t})),Un=e=>{const t=Bo(v.none()),o=Bo([]);let n=v.none();const r=ne("caption"),l=e=>n.forall(t=>!t[e]),a=()=>So((e=>V.fromDom(e.selection.getEnd()))(e),Ce(e)),s=()=>So(Te(e),Ce(e)).bind(t=>Ie(et(t),a().bind(et),(o,n)=>W(o,n)?r(t)?v.some((e=>({element:e,mergable:v.none(),unmergable:v.none(),selection:[e]}))(t)):v.some(((e,t,o)=>({element:o,mergable:Bn(t,e,vo),unmergable:Pn(e),selection:In(e)}))(xo(e),o,t)):v.none()).bind(p)),i=e=>et(e.element).map(t=>{const o=ct(t),n=an(o,e).getOr([]),r=B(n,(e,t)=>(t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=o.grid.columns&&(e.onLast=!0)),e),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:cn(o,e).isSome(),unmergeable:dn(o,e).isSome(),locked:r}}),c=()=>{t.set((e=>{let t,o=!1;return(...n)=>(o||(o=!0,t=e.apply(null,n)),t)})(s)()),n=t.get().bind(i),I(o.get(),h)},d=e=>(e(),o.set(o.get().concat([e])),()=>{o.set(P(o.get(),t=>t!==e))}),m=(o,n)=>d(()=>t.get().fold(()=>{o.setEnabled(!1)},t=>{o.setEnabled(!n(t)&&e.selection.isEditable())})),u=(o,n,r)=>d(()=>t.get().fold(()=>{o.setEnabled(!1),o.setActive(!1)},t=>{o.setEnabled(!n(t)&&e.selection.isEditable()),o.setActive(r(t))})),g=e=>n.exists(t=>t.locked[e]),b=(t,o)=>n=>u(n,e=>r(e.element),()=>e.queryCommandValue(t)===o),y=b("mceTableRowType","header"),w=b("mceTableColType","th");return e.on("NodeChange ExecCommand TableSelectorChange",c),{onSetupTable:e=>m(e,e=>!1),onSetupCellOrRow:e=>m(e,e=>r(e.element)),onSetupColumn:e=>t=>m(t,t=>r(t.element)||g(e)),onSetupPasteable:e=>t=>m(t,t=>r(t.element)||e().isNone()),onSetupPasteableColumn:(e,t)=>o=>m(o,o=>r(o.element)||e().isNone()||g(t)),onSetupMergeable:e=>m(e,e=>l("mergeable")),onSetupUnmergeable:e=>m(e,e=>l("unmergeable")),resetTargets:c,onSetupTableWithCaption:t=>u(t,f,t=>et(t.element,Ce(e)).exists(e=>fe(e,"caption").isSome())),onSetupTableRowHeaders:y,onSetupTableColumnHeaders:w,targets:t.get}};var Fn=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Hn=e=>{var t;const o=null!==(t=Fn.read())&&void 0!==t?t:[];return q(o,t=>v.from(t.getType(e)))},jn=()=>Hn("x-tinymce/dom-table-rows"),qn=()=>Hn("x-tinymce/dom-table-columns"),$n=e=>t=>{const o=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",o),o(),()=>{e.off("NodeChange",o)}},Vn=e=>t=>{const o=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",o),o(),()=>{e.off("NodeChange",o)}},zn=e=>{const t=Un(e);(e=>{const t=e.options.register;t("table_border_widths",{processor:"object[]",default:xt}),t("table_border_styles",{processor:"object[]",default:Tt}),t("table_cell_advtab",{processor:"boolean",default:!0}),t("table_row_advtab",{processor:"boolean",default:!0}),t("table_advtab",{processor:"boolean",default:!0}),t("table_appearance_options",{processor:"boolean",default:!0}),t("table_grid",{processor:"boolean",default:!Ct.deviceType.isTouch()}),t("table_cell_class_list",{processor:"object[]",default:[]}),t("table_row_class_list",{processor:"object[]",default:[]}),t("table_class_list",{processor:"object[]",default:[]}),t("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),t("table_background_color_map",{processor:"object[]",default:[]}),t("table_border_color_map",{processor:"object[]",default:[]})})(e),Mn(e),((e,t)=>{const o=t=>()=>e.execCommand(t),n=(t,n)=>!!e.queryCommandSupported(n.command)&&(e.ui.registry.addMenuItem(t,{...n,onAction:c(n.onAction)?n.onAction:o(n.command)}),!0),r=(t,n)=>{e.queryCommandSupported(n.command)&&e.ui.registry.addToggleMenuItem(t,{...n,onAction:c(n.onAction)?n.onAction:o(n.command)})},l=t=>{e.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},a=[n("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:t.onSetupCellOrRow}),n("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:t.onSetupCellOrRow}),n("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:t.onSetupCellOrRow}),n("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:t.onSetupCellOrRow}),n("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:t.onSetupCellOrRow}),n("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:t.onSetupCellOrRow}),n("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:t.onSetupPasteable(jn)}),n("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:t.onSetupPasteable(jn)})],s=[n("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:t.onSetupColumn("onFirst")}),n("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:t.onSetupColumn("onLast")}),n("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:t.onSetupColumn("onAny")}),n("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:t.onSetupColumn("onAny")}),n("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:t.onSetupColumn("onAny")}),n("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:t.onSetupPasteableColumn(qn,"onFirst")}),n("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:t.onSetupPasteableColumn(qn,"onLast")})],i=[n("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:t.onSetupCellOrRow}),n("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:t.onSetupMergeable}),n("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:t.onSetupUnmergeable})];Mt(e)?e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:l}],onSetup:Vn(e)}):e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTableDialog"),onSetup:Vn(e)}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTableDialog"),onSetup:Vn(e)}),n("tableprops",{text:"Table properties",onSetup:t.onSetupTable,command:"mceTableProps"}),n("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,command:"mceTableDelete"}),E(a,!0)&&e.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:u("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),E(s,!0)&&e.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:u("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),E(i,!0)&&e.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:u("tablecellprops tablemergecells tablesplitcells")}),e.ui.registry.addContextMenu("table",{update:()=>(t.resetTargets(),t.targets().fold(u(""),e=>"caption"===Q(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const d=zo(Ut(e));0!==d.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>$o(e,d,"tableclass",t=>e.execCommand("mceTableToggleClass",!1,t)),onSetup:t.onSetupTable});const m=zo(Pt(e));0!==m.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>$o(e,m,"tablecellclass",t=>e.execCommand("mceTableCellToggleClass",!1,t)),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>$o(e,ko,"tablecellverticalalign",Vo(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>$o(e,Ot(e),"tablecellborderwidth",Vo(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>$o(e,Dt(e),"tablecellborderstyle",Vo(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Wo(e,Ht(e),"background-color"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Wo(e,jt(e),"border-color"),onSetup:t.onSetupCellOrRow})),r("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),r("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Go(e),onSetup:t.onSetupTableRowHeaders}),r("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Qo(e),onSetup:t.onSetupTableRowHeaders})})(e,t),((e,t)=>{e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:$n(e),fetch:e=>e("inserttable | cell row column | advtablesort | tableprops deletetable")});const o=t=>()=>e.execCommand(t),n=(t,n)=>{e.queryCommandSupported(n.command)&&e.ui.registry.addButton(t,{...n,onAction:c(n.onAction)?n.onAction:o(n.command)})},r=(t,n)=>{e.queryCommandSupported(n.command)&&e.ui.registry.addToggleButton(t,{...n,onAction:c(n.onAction)?n.onAction:o(n.command)})};n("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:t.onSetupTable}),n("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:t.onSetupTable}),n("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),n("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:t.onSetupMergeable}),n("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),n("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),n("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),n("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),n("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),n("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),n("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),n("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),n("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:t.onSetupCellOrRow}),n("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:t.onSetupCellOrRow}),n("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:t.onSetupPasteable(jn)}),n("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:t.onSetupPasteable(jn)}),n("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:t.onSetupColumn("onAny")}),n("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:t.onSetupColumn("onAny")}),n("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:t.onSetupPasteableColumn(qn,"onFirst")}),n("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:t.onSetupPasteableColumn(qn,"onLast")}),n("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:$n(e)});const l=zo(Ut(e));0!==l.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Ko(e,l,"tableclass",t=>e.execCommand("mceTableToggleClass",!1,t)),onSetup:t.onSetupTable});const a=zo(Pt(e));0!==a.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Ko(e,a,"tablecellclass",t=>e.execCommand("mceTableCellToggleClass",!1,t)),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Ko(e,ko,"tablecellverticalalign",Vo(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Ko(e,Ot(e),"tablecellborderwidth",Vo(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Ko(e,Dt(e),"tablecellborderstyle",Vo(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:t=>t(Wo(e,Ht(e),"background-color")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:t=>t(Wo(e,jt(e),"border-color")),onSetup:t.onSetupCellOrRow})),r("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),r("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Go(e),onSetup:t.onSetupTableRowHeaders}),r("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Qo(e),onSetup:t.onSetupTableColumnHeaders})})(e,t),(e=>{const t=t=>e.dom.is(t,"table")&&e.getBody().contains(t)&&e.dom.isEditable(t.parentNode),o=Ft(e);o.length>0&&e.ui.registry.addContextToolbar("table",{predicate:t,items:o,scope:"node",position:"node"})})(e)};e.add("table",zn)}()},HJ8U:function(e,t,o){o("UqOZ")},IwuQ:function(e,t,o){o("COLo")},UqOZ:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(((e,t)=>t.isPrototypeOf(e))(o=e,(n=String).prototype)||(null===(r=o.constructor)||void 0===r?void 0:r.name)===n.name)?"string":t;var o,n,r})(t)===e,o=e=>t=>typeof t===e,n=t("string"),r=t("object"),l=t("array"),a=o("boolean"),s=e=>!(e=>null==e)(e),i=o("function"),c=o("number"),d=()=>{},m=e=>()=>e,u=(e,t)=>e===t;const p=e=>t=>!e(t),g=m(!1);class b{constructor(e,t){this.tag=e,this.value=t}static some(e){return new b(!0,e)}static none(){return b.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?b.some(e(this.value)):b.none()}bind(e){return this.tag?e(this.value):b.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:b.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return s(e)?b.some(e):b.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}b.singletonNone=new b(!1);const h=Array.prototype.slice,f=Array.prototype.indexOf,y=Array.prototype.push,v=(e,t)=>{return o=e,n=t,f.call(o,n)>-1;var o,n},w=(e,t)=>{for(let o=0,n=e.length;o<n;o++){if(t(e[o],o))return!0}return!1},S=(e,t)=>{const o=e.length,n=new Array(o);for(let r=0;r<o;r++){const o=e[r];n[r]=t(o,r)}return n},C=(e,t)=>{for(let o=0,n=e.length;o<n;o++){t(e[o],o)}},x=(e,t)=>{const o=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t(r,n)&&o.push(r)}return o},T=(e,t,o)=>(C(e,(e,n)=>{o=t(o,e,n)}),o),k=(e,t,o)=>{for(let n=0,r=e.length;n<r;n++){const r=e[n];if(t(r,n))return b.some(r);if(o(r,n))break}return b.none()},N=(e,t)=>k(e,t,g),A=(e,t)=>(e=>{const t=[];for(let o=0,n=e.length;o<n;++o){if(!l(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);y.apply(t,e[o])}return t})(S(e,t)),O=e=>{const t=h.call(e,0);return t.reverse(),t},D=(e,t)=>t>=0&&t<e.length?b.some(e[t]):b.none(),_=e=>D(e,0),E=e=>D(e,e.length-1),R=(e,t)=>{const o=[],n=i(t)?e=>w(o,o=>t(o,e)):e=>v(o,e);for(let t=0,r=e.length;t<r;t++){const r=e[t];n(r)||o.push(r)}return o},L=(e,t,o=u)=>e.exists(e=>o(e,t)),M=(e,t,o)=>e.isSome()&&t.isSome()?b.some(o(e.getOrDie(),t.getOrDie())):b.none(),I=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},P={fromHtml:(e,t)=>{const o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return I(o.childNodes[0])},fromTag:(e,t)=>{const o=(t||document).createElement(e);return I(o)},fromText:(e,t)=>{const o=(t||document).createTextNode(e);return I(o)},fromDom:I,fromPoint:(e,t,o)=>b.from(e.dom.elementFromPoint(t,o)).map(I)},B=(e,t)=>{const o=e.dom;if(1!==o.nodeType)return!1;{const e=o;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},U=(e,t)=>e.dom===t.dom,F=B,H="undefined"!=typeof window?window:Function("return this;")(),j=(e,t)=>((e,t)=>{let o=null!=t?t:H;for(let t=0;t<e.length&&null!=o;++t)o=o[e[t]];return o})(e.split("."),t),q=(e,t)=>{const o=((e,t)=>j(e,t))(e,t);if(null==o)throw new Error(e+" not available on this browser");return o},$=Object.getPrototypeOf,V=e=>{const t=j("ownerDocument.defaultView",e);return r(e)&&((e=>q("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test($(e).constructor.name))},z=e=>e.dom.nodeName.toLowerCase(),K=e=>e.dom.nodeType,W=e=>t=>K(t)===e,G=e=>Q(e)&&V(e.dom),Q=W(1),J=W(3),Z=W(11),X=e=>t=>Q(t)&&z(t)===e,Y=e=>b.from(e.dom.parentNode).map(P.fromDom),ee=e=>S(e.dom.childNodes,P.fromDom),te=(e,t)=>{const o=e.dom.childNodes;return b.from(o[t]).map(P.fromDom)},oe=e=>te(e,0),ne=e=>te(e,e.dom.childNodes.length-1),re=e=>{const t=(e=>P.fromDom(e.dom.getRootNode()))(e);return Z(o=t)&&s(o.dom.host)?b.some(t):b.none();var o},le=e=>P.fromDom(e.dom.host),ae=e=>{const t=J(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const o=t.ownerDocument;return re(P.fromDom(t)).fold(()=>o.body.contains(t),(n=ae,r=le,e=>n(r(e))));var n,r};var se=(e,t,o,n,r)=>e(o,n)?b.some(o):i(r)&&r(o)?b.none():t(o,n,r);const ie=(e,t,o)=>{let n=e.dom;const r=i(o)?o:g;for(;n.parentNode;){n=n.parentNode;const e=P.fromDom(n);if(t(e))return b.some(e);if(r(e))break}return b.none()},ce=(e,t,o)=>se((e,t)=>t(e),ie,e,t,o),de=(e,t,o)=>ie(e,e=>B(e,t),o),me=e=>{return se((e,t)=>B(e,t),de,e,"[contenteditable]",t);var t},ue=e=>e.dom.contentEditable,pe=(e,t)=>{Y(e).each(o=>{o.dom.insertBefore(t.dom,e.dom)})},ge=(e,t)=>{(e=>b.from(e.dom.nextSibling).map(P.fromDom))(e).fold(()=>{Y(e).each(e=>{be(e,t)})},e=>{pe(e,t)})},be=(e,t)=>{e.dom.appendChild(t.dom)},he=(e,t)=>{C(t,t=>{be(e,t)})},fe=e=>{e.dom.textContent="",C(ee(e),e=>{ye(e)})},ye=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)};var ve=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),we=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Se=tinymce.util.Tools.resolve("tinymce.util.VK");const Ce=e=>S(e,P.fromDom),xe=Object.keys,Te=(e,t)=>{const o=xe(e);for(let n=0,r=o.length;n<r;n++){const r=o[n];t(e[r],r)}},ke=(e,t)=>{const o={};var n;return((e,t,o,n)=>{Te(e,(e,r)=>{(t(e,r)?o:n)(e,r)})})(e,t,(n=o,(e,t)=>{n[t]=e}),d),o},Ne=(e,t)=>{const o=e.dom;Te(t,(e,t)=>{((e,t,o)=>{if(!(n(o)||a(o)||c(o)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,o+"")})(o,t,e)})},Ae=e=>T(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),Oe=e=>((e,t)=>P.fromDom(e.dom.cloneNode(t)))(e,!0),De=(e,t)=>{const o=((e,t)=>{const o=P.fromTag(t),n=Ae(e);return Ne(o,n),o})(e,t);ge(e,o);const n=ee(e);return he(o,n),ye(e),o};var _e=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ee=tinymce.util.Tools.resolve("tinymce.util.Tools");const Re=e=>t=>s(t)&&t.nodeName.toLowerCase()===e,Le=e=>t=>s(t)&&e.test(t.nodeName),Me=e=>s(e)&&3===e.nodeType,Ie=e=>s(e)&&1===e.nodeType,Pe=Le(/^(OL|UL|DL)$/),Be=Le(/^(OL|UL)$/),Ue=Re("ol"),Fe=Le(/^(LI|DT|DD)$/),He=Le(/^(DT|DD)$/),je=Le(/^(TH|TD)$/),qe=Re("br"),$e=(e,t)=>s(t)&&t.nodeName in e.schema.getTextBlockElements(),Ve=(e,t)=>s(e)&&e.nodeName in t,ze=(e,t)=>s(t)&&t.nodeName in e.schema.getVoidElements(),Ke=(e,t,o)=>{const n=e.isEmpty(t);return!(o&&e.select("span[data-mce-type=bookmark]",t).length>0)&&n},We=(e,t)=>e.isChildOf(t,e.getRoot()),Ge=e=>t=>t.options.get(e),Qe=Ge("lists_indent_on_tab"),Je=Ge("forced_root_block"),Ze=Ge("forced_root_block_attrs"),Xe=(e,t,o={})=>{const n=e.dom,r=e.schema.getBlockElements(),l=n.createFragment(),a=Je(e),s=Ze(e);let i,c,d=!1;for(c=n.create(a,{...s,...o.style?{style:o.style}:{}}),Ve(t.firstChild,r)||l.appendChild(c);i=t.firstChild;){const e=i.nodeName;d||"SPAN"===e&&"bookmark"===i.getAttribute("data-mce-type")||(d=!0),Ve(i,r)?(l.appendChild(i),c=null):(c||(c=n.create(a,s),l.appendChild(c)),c.appendChild(i))}return!d&&c&&c.appendChild(n.create("br",{"data-mce-bogus":"1"})),l},Ye=_e.DOM,et=(e,t,o)=>{const n=Ye.select('span[data-mce-type="bookmark"]',t),r=Xe(e,o),l=Ye.createRng();l.setStartAfter(o),l.setEndAfter(t);const a=l.extractContents();for(let t=a.firstChild;t;t=t.firstChild)if("LI"===t.nodeName&&e.dom.isEmpty(t)){Ye.remove(t);break}e.dom.isEmpty(a)||Ye.insertAfter(a,t),Ye.insertAfter(r,t);const s=o.parentElement;s&&Ke(e.dom,s)&&(e=>{const t=e.parentNode;t&&Ee.each(n,e=>{t.insertBefore(e,o.parentNode)}),Ye.remove(e)})(s),Ye.remove(o),Ke(e.dom,t)&&Ye.remove(t)},tt=X("dd"),ot=X("dt"),nt=(e,t)=>{var o;tt(t)?De(t,"dt"):ot(t)&&(o=t,b.from(o.dom.parentElement).map(P.fromDom)).each(o=>et(e,o.dom,t.dom))},rt=e=>{ot(e)&&De(e,"dd")},lt=(e,t)=>{if(Me(e))return{container:e,offset:t};const o=ve.getNode(e,t);return Me(o)?{container:o,offset:t>=e.childNodes.length?o.data.length:0}:o.previousSibling&&Me(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&Me(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:t}},at=e=>{const t=e.cloneRange(),o=lt(e.startContainer,e.startOffset);t.setStart(o.container,o.offset);const n=lt(e.endContainer,e.endOffset);return t.setEnd(n.container,n.offset),t},st=["OL","UL","DL"],it=st.join(","),ct=(e,t)=>{const o=t||e.selection.getStart(!0);return e.dom.getParent(o,it,pt(e,o))},dt=e=>{const t=ct(e),o=e.selection.getSelectedBlocks();return((e,t)=>s(e)&&1===t.length&&t[0]===e)(t,o)?(e=>x(e.querySelectorAll(it),Pe))(t):x(o,e=>Pe(e)&&t!==e)},mt=e=>{const t=e.selection.getSelectedBlocks();return x(((e,t)=>{const o=Ee.map(t,t=>{const o=e.dom.getParent(t,"li,dd,dt",pt(e,t));return o||t});return R(o)})(e,t),Fe)},ut=(e,t)=>{const o=e.dom.getParents(t,"TD,TH");return o.length>0?o[0]:e.getBody()},pt=(e,t)=>{const o=e.dom.getParents(t,e.dom.isBlock);return N(o,t=>{return(t=>t.nodeName.toLowerCase()!==Je(e))(t)&&(o=e.schema,!Pe(n=t)&&!Fe(n)&&w(st,e=>o.isValidChild(n.nodeName,e)));var o,n}).getOr(e.getBody())},gt=(e,t)=>{const o=e.dom.getParents(t,"ol,ul",pt(e,t));return E(o)},bt=e=>{const t=(e=>{const t=gt(e,e.selection.getStart()),o=x(e.selection.getSelectedBlocks(),Be);return t.toArray().concat(o)})(e),o=(e=>{const t=e.selection.getStart();return e.dom.getParents(t,"ol,ul",pt(e,t))})(e);return N(o,e=>{return t=P.fromDom(e),Y(t).exists(e=>Fe(e.dom)&&oe(e).exists(e=>!Pe(e.dom))&&ne(e).exists(e=>!Pe(e.dom)));var t}).fold(()=>ht(e,t),e=>[e])},ht=(e,t)=>{const o=S(t,t=>gt(e,t).getOr(t));return R(o)},ft=e=>/\btox\-/.test(e.className),yt=(e,t)=>k(e,Pe,je).exists(e=>e.nodeName===t&&!ft(e)),vt=(e,t)=>null!==t&&!e.dom.isEditable(t),wt=(e,t)=>{const o=e.dom.getParent(t,"ol,ul,dl");return vt(e,o)||!e.selection.isEditable()},St=(e,t)=>{const o=e.selection.getNode();return t({parents:e.dom.getParents(o),element:o}),e.on("NodeChange",t),()=>e.off("NodeChange",t)},Ct=(e,t)=>{const o=(t||document).createDocumentFragment();return C(e,e=>{o.appendChild(e.dom)}),P.fromDom(o)},xt=(e,t,o)=>e.dispatch("ListMutation",{action:t,element:o}),Tt=(kt=/^\s+|\s+$/g,e=>e.replace(kt,""));var kt;const Nt=(e,t,o)=>{if(!n(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);(e=>void 0!==e.style&&i(e.style.getPropertyValue))(e)&&e.style.setProperty(t,o)},At=(e,t,o)=>{const n=e.dom;Nt(n,t,o)},Ot=e=>F(e,"OL,UL"),Dt=e=>oe(e).exists(Ot),_t=e=>"listAttributes"in e,Et=e=>"isComment"in e,Rt=e=>e.depth>0,Lt=e=>e.isSelected,Mt=e=>{const t=ee(e),o=ne(e).exists(Ot)?t.slice(0,-1):t;return S(o,Oe)},It=(e,t)=>{be(e.item,t.list)},Pt=(e,t)=>{const o={list:P.fromTag(t,e),item:P.fromTag("li",e)};return be(o.list,o.item),o},Bt=(e,t,o)=>{const n=t.slice(0,o.depth);return E(n).each(t=>{if(_t(o)){((e,t)=>{be(e.list,t),e.item=t})(t,((e,t,o)=>{const n=P.fromTag("li",e);return Ne(n,t),he(n,o),n})(e,o.itemAttributes,o.content)),((e,t)=>{z(e.list)!==t.listType&&(e.list=De(e.list,t.listType)),Ne(e.list,t.listAttributes)})(t,o)}else if((e=>"isFragment"in e)(o))he(t.item,o.content);else{const e=P.fromHtml(`\x3c!--${o.content}--\x3e`);be(t.list,e)}}),n},Ut=(e,t,o)=>{const n=((e,t,o)=>{const n=[];for(let r=0;r<o;r++)n.push(Pt(e,_t(t)?t.listType:t.parentListType));return n})(e,o,o.depth-t.length);var r;return(e=>{for(let t=1;t<e.length;t++)It(e[t-1],e[t])})(n),((e,t)=>{for(let t=0;t<e.length-1;t++)At(e[t].item,"list-style-type","none");E(e).each(e=>{_t(t)&&(Ne(e.list,t.listAttributes),Ne(e.item,t.itemAttributes)),he(e.item,t.content)})})(n,o),r=n,M(E(t),_(r),It),t.concat(n)},Ft=(e,t)=>{let o=b.none();const n=T(t,(t,n,r)=>Et(n)?0===r?(o=b.some(n),t):Bt(e,t,n):n.depth>t.length?Ut(e,t,n):Bt(e,t,n),[]);return o.each(e=>{const t=P.fromHtml(`\x3c!--${e.content}--\x3e`);_(n).each(e=>{((e,t)=>{oe(e).fold(()=>{be(e,t)},o=>{e.dom.insertBefore(t.dom,o.dom)})})(e.list,t)})}),_(n).map(e=>e.list)},Ht=e=>(C(e,(t,o)=>{((e,t)=>{const o=e[t].depth,n=e=>e.depth===o&&!e.dirty,r=e=>e.depth<o;return k(O(e.slice(0,t)),n,r).orThunk(()=>k(e.slice(t+1),n,r))})(e,o).fold(()=>{t.dirty&&_t(t)&&(e=>{e.listAttributes=ke(e.listAttributes,(e,t)=>"start"!==t)})(t)},e=>{return n=e,void(_t(o=t)&&_t(n)&&(o.listType=n.listType,o.listAttributes={...n.listAttributes}));var o,n})}),e),jt=(e,t,o,n)=>{var r,l;if(8===K(l=n)||"#comment"===z(l))return[{depth:e+1,content:null!==(r=n.dom.nodeValue)&&void 0!==r?r:"",dirty:!1,isSelected:!1,isComment:!0}];t.each(e=>{U(e.start,n)&&o.set(!0)});const a=((e,t,o)=>Y(e).filter(Q).map(n=>({depth:t,dirty:!1,isSelected:o,content:Mt(e),itemAttributes:Ae(e),listAttributes:Ae(n),listType:z(n),isInPreviousLi:!1})))(n,e,o.get());t.each(e=>{U(e.end,n)&&o.set(!1)});const s=ne(n).filter(Ot).map(n=>$t(e,t,o,n)).getOr([]);return a.toArray().concat(s)},qt=(e,t,o,n)=>oe(n).filter(Ot).fold(()=>jt(e,t,o,n),r=>{const l=T(ee(n),(n,l,a)=>{if(0===a)return n;if(F(l,"LI"))return n.concat(jt(e,t,o,l));{const t={isFragment:!0,depth:e,content:[l],isSelected:!1,dirty:!1,parentListType:z(r)};return n.concat(t)}},[]);return $t(e,t,o,r).concat(l)}),$t=(e,t,o,n)=>A(ee(n),n=>(Ot(n)?$t:qt)(e+1,t,o,n)),Vt=(e,t)=>A(((e,t)=>{if(0===e.length)return[];{let o=t(e[0]);const n=[];let r=[];for(let l=0,a=e.length;l<a;l++){const a=e[l],s=t(a);s!==o&&(n.push(r),r=[]),o=s,r.push(a)}return 0!==r.length&&n.push(r),n}})(t,Rt),t=>_(t).exists(Rt)?((e,t)=>{const o=Ht(t);return Ft(e.contentDocument,o).toArray()})(e,t):((e,t)=>{const o=Ht(t);return S(o,t=>{const o=Et(t)?Ct([P.fromHtml(`\x3c!--${t.content}--\x3e`)]):Ct(t.content),n=_t(t)?t.itemAttributes:{};return P.fromDom(Xe(e,o.dom,n))})})(e,t)),zt=(e,t,o)=>{const n=((e,t)=>{const o=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})(!1);return S(e,e=>({sourceList:e,entries:$t(0,t,o,e)}))})(t,(e=>{const t=S(mt(e),P.fromDom);return M(N(t,p(Dt)),N(O(t),p(Dt)),(e,t)=>({start:e,end:t}))})(e));C(n,t=>{((e,t)=>{C(x(e,Lt),e=>((e,t)=>{switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0})(t,e))})(t.entries,o);const n=Vt(e,t.entries);var r;C(n,t=>{xt(e,"Indent"===o?"IndentList":"OutdentList",t.dom)}),r=t.sourceList,C(n,e=>{pe(r,e)}),ye(t.sourceList)})},Kt=(e,t)=>{const o=Ce(bt(e)),n=Ce((e=>x(mt(e),He))(e));let r=!1;if(o.length||n.length){const l=e.selection.getBookmark();zt(e,o,t),((e,t,o)=>{C(o,"Indent"===t?rt:t=>nt(e,t))})(e,t,n),e.selection.moveToBookmark(l),e.selection.setRng(at(e.selection.getRng())),e.nodeChanged(),r=!0}return r},Wt=(e,t)=>!(e=>{const t=ct(e);return vt(e,t)||!e.selection.isEditable()})(e)&&Kt(e,t),Gt=e=>Wt(e,"Indent"),Qt=e=>Wt(e,"Outdent"),Jt=e=>Wt(e,"Flatten"),Zt=e=>"\ufeff"===e,Xt=(e,t)=>{return o=e,n=function(e,...t){return(...o)=>{const n=t.concat(o);return e.apply(null,n)}}(U,t),ie(o,n,r).isSome();var o,n,r};var Yt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const eo=_e.DOM,to=e=>{const t={},o=o=>{let n=e[o?"startContainer":"endContainer"],r=e[o?"startOffset":"endOffset"];if(Ie(n)){const e=eo.create("span",{"data-mce-type":"bookmark"});n.hasChildNodes()?(r=Math.min(r,n.childNodes.length-1),o?n.insertBefore(e,n.childNodes[r]):eo.insertAfter(e,n.childNodes[r])):n.appendChild(e),n=e,r=0}t[o?"startContainer":"endContainer"]=n,t[o?"startOffset":"endOffset"]=r};return o(!0),e.collapsed||o(),t},oo=e=>{const t=t=>{let o=e[t?"startContainer":"endContainer"],n=e[t?"startOffset":"endOffset"];if(o){if(Ie(o)&&o.parentNode){const e=o;n=(e=>{var t;let o=null===(t=e.parentNode)||void 0===t?void 0:t.firstChild,n=0;for(;o;){if(o===e)return n;Ie(o)&&"bookmark"===o.getAttribute("data-mce-type")||n++,o=o.nextSibling}return-1})(o),o=o.parentNode,eo.remove(e),!o.hasChildNodes()&&eo.isBlock(o)&&o.appendChild(eo.create("br"))}e[t?"startContainer":"endContainer"]=o,e[t?"startOffset":"endOffset"]=n}};t(!0),t();const o=eo.createRng();return o.setStart(e.startContainer,e.startOffset),e.endContainer&&o.setEnd(e.endContainer,e.endOffset),at(o)},no=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},ro=(e,t)=>{Ee.each(t,(t,o)=>{e.setAttribute(o,t)})},lo=(e,t,o)=>{((e,t,o)=>{const n=o["list-style-type"]?o["list-style-type"]:null;e.setStyle(t,"list-style-type",n)})(e,t,o),((e,t,o)=>{ro(t,o["list-attributes"]),Ee.each(e.select("li",t),e=>{ro(e,o["list-item-attributes"])})})(e,t,o)},ao=(e,t)=>s(t)&&!Ve(t,e.schema.getBlockElements()),so=(e,t,o,n)=>{let r=t[o?"startContainer":"endContainer"];const l=t[o?"startOffset":"endOffset"];Ie(r)&&(r=r.childNodes[Math.min(l,r.childNodes.length-1)]||r),!o&&qe(r.nextSibling)&&(r=r.nextSibling);const a=(t,o)=>{var r;const l=new we(t,(t=>{for(;!e.dom.isBlock(t)&&t.parentNode&&n!==t;)t=t.parentNode;return t})(t)),a=o?"next":"prev";let s;for(;s=l[a]();)if(!ze(e,s)&&!Zt(s.textContent)&&0!==(null===(r=s.textContent)||void 0===r?void 0:r.length))return b.some(s);return b.none()};if(o&&Me(r))if(Zt(r.textContent))r=a(r,!1).getOr(r);else for(null!==r.parentNode&&ao(e,r.parentNode)&&(r=r.parentNode);null!==r.previousSibling&&(ao(e,r.previousSibling)||Me(r.previousSibling));)r=r.previousSibling;if(!o&&Me(r))if(Zt(r.textContent))r=a(r,!0).getOr(r);else for(null!==r.parentNode&&ao(e,r.parentNode)&&(r=r.parentNode);null!==r.nextSibling&&(ao(e,r.nextSibling)||Me(r.nextSibling));)r=r.nextSibling;for(;r.parentNode!==n;){const t=r.parentNode;if($e(e,r))return r;if(/^(TD|TH)$/.test(t.nodeName))return r;r=t}return r},io=(e,t,o)=>{const n=e.selection.getRng();let r="LI";const l=pt(e,((e,t)=>{const o=e.selection.getStart(!0),n=so(e,t,!0,e.getBody());return Xt(P.fromDom(n),P.fromDom(t.commonAncestorContainer))?t.commonAncestorContainer:o})(e,n)),a=e.dom;if("false"===a.getContentEditable(e.selection.getNode()))return;"DL"===(t=t.toUpperCase())&&(r="DT");const s=to(n),i=x(((e,t,o)=>{const n=[],r=e.dom,l=so(e,t,!0,o),a=so(e,t,!1,o);let s;const i=[];for(let e=l;e&&(i.push(e),e!==a);e=e.nextSibling);return Ee.each(i,t=>{var l;if($e(e,t))return n.push(t),void(s=null);if(r.isBlock(t)||qe(t))return qe(t)&&r.remove(t),void(s=null);const a=t.nextSibling;Yt.isBookmarkNode(t)&&(Pe(a)||$e(e,a)||!a&&t.parentNode===o)?s=null:(s||(s=r.create("p"),null===(l=t.parentNode)||void 0===l||l.insertBefore(s,t),n.push(s)),s.appendChild(t))}),n})(e,n,l),e.dom.isEditable);Ee.each(i,n=>{let l;const s=n.previousSibling,i=n.parentNode;Fe(i)||(s&&Pe(s)&&s.nodeName===t&&((e,t,o)=>{const n=e.getStyle(t,"list-style-type");let r=o?o["list-style-type"]:"";return r=null===r?"":r,n===r})(a,s,o)?(l=s,n=a.rename(n,r),s.appendChild(n)):(l=a.create(t),i.insertBefore(l,n),l.appendChild(n),n=a.rename(n,r)),((e,t,o)=>{Ee.each(o,o=>e.setStyle(t,o,""))})(a,n,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),lo(a,l,o),mo(e.dom,l))}),e.selection.setRng(oo(s))},co=(e,t,o)=>{return((e,t)=>Pe(e)&&e.nodeName===(null==t?void 0:t.nodeName))(t,o)&&((e,t,o)=>e.getStyle(t,"list-style-type",!0)===e.getStyle(o,"list-style-type",!0))(e,t,o)&&(n=o,t.className===n.className);var n},mo=(e,t)=>{let o,n=t.nextSibling;if(co(e,t,n)){const r=n;for(;o=r.firstChild;)t.appendChild(o);e.remove(r)}if(n=t.previousSibling,co(e,t,n)){const r=n;for(;o=r.lastChild;)t.insertBefore(o,t.firstChild);e.remove(r)}},uo=(e,t,o,n)=>{if(t.nodeName!==o){const r=e.dom.rename(t,o);lo(e.dom,r,n),xt(e,no(o),r)}else lo(e.dom,t,n),xt(e,no(o),t)},po=(e,t,o,n)=>{if(t.classList.forEach((e,o,n)=>{e.startsWith("tox-")&&(n.remove(e),0===n.length&&t.removeAttribute("class"))}),t.nodeName!==o){const r=e.dom.rename(t,o);lo(e.dom,r,n),xt(e,no(o),r)}else lo(e.dom,t,n),xt(e,no(o),t)},go=e=>"list-style-type"in e,bo=(e,t,o)=>{const n=ct(e);if(wt(e,n))return;const l=dt(e),a=r(o)?o:{};l.length>0?((e,t,o,n,r)=>{const l=Pe(t);if(!l||t.nodeName!==n||go(r)||ft(t)){io(e,n,r);const a=to(e.selection.getRng()),s=l?[t,...o]:o,i=l&&ft(t)?po:uo;Ee.each(s,t=>{i(e,t,n,r)}),e.selection.setRng(oo(a))}else Jt(e)})(e,n,l,t,a):((e,t,o,n)=>{if(t!==e.getBody())if(t)if(t.nodeName!==o||go(n)||ft(t)){const r=to(e.selection.getRng());ft(t)&&t.classList.forEach((e,o,n)=>{e.startsWith("tox-")&&(n.remove(e),0===n.length&&t.removeAttribute("class"))}),lo(e.dom,t,n);const l=e.dom.rename(t,o);mo(e.dom,l),e.selection.setRng(oo(r)),io(e,o,n),xt(e,no(o),l)}else Jt(e);else io(e,o,n),xt(e,no(o),t)})(e,n,t,a)},ho=_e.DOM,fo=(e,t)=>{const o=Ee.grep(e.select("ol,ul",t));Ee.each(o,t=>{((e,t)=>{const o=t.parentElement;if(o&&"LI"===o.nodeName&&o.firstChild===t){const n=o.previousSibling;n&&"LI"===n.nodeName?(n.appendChild(t),Ke(e,o)&&ho.remove(o)):ho.setStyle(o,"listStyleType","none")}if(Pe(o)){const e=o.previousSibling;e&&"LI"===e.nodeName&&e.appendChild(t)}})(e,t)})},yo=(e,t,o,n)=>{let r=t.startContainer;const l=t.startOffset;if(Me(r)&&(o?l<r.data.length:l>0))return r;const a=e.schema.getNonEmptyElements();Ie(r)&&(r=ve.getNode(r,l));const s=new we(r,n);o&&((e,t)=>!!qe(t)&&(e.isBlock(t.nextSibling)&&!qe(t.previousSibling)))(e.dom,r)&&s.next();const i=o?s.next.bind(s):s.prev2.bind(s);for(;r=i();){if("LI"===r.nodeName&&!r.hasChildNodes())return r;if(a[r.nodeName])return r;if(Me(r)&&r.data.length>0)return r}return null},vo=(e,t)=>{const o=t.childNodes;return 1===o.length&&!Pe(o[0])&&e.isBlock(o[0])},wo=e=>b.from(e).map(P.fromDom).filter(G).exists(e=>((e,t=!1)=>ae(e)?e.dom.isContentEditable:me(e).fold(m(t),e=>"true"===ue(e)))(e)&&!v(["details"],z(e))),So=(e,t,o)=>{let n;const r=vo(e,o)?o.firstChild:o;if(((e,t)=>{vo(e,t)&&wo(t.firstChild)&&e.remove(t.firstChild,!0)})(e,t),!Ke(e,t,!0))for(;n=t.firstChild;)r.appendChild(n)},Co=(e,t,o)=>{let n;const r=t.parentNode;if(!We(e,t)||!We(e,o))return;Pe(o.lastChild)&&(n=o.lastChild),r===o.lastChild&&qe(r.previousSibling)&&e.remove(r.previousSibling);const l=o.lastChild;l&&qe(l)&&t.hasChildNodes()&&e.remove(l),Ke(e,o,!0)&&fe(P.fromDom(o)),So(e,t,o),n&&o.appendChild(n);const a=((e,t)=>{const o=e.dom,n=t.dom;return o!==n&&o.contains(n)})(P.fromDom(o),P.fromDom(t))?e.getParents(t,Pe,o):[];e.remove(t),C(a,t=>{Ke(e,t)&&t!==e.getRoot()&&e.remove(t)})},xo=(e,t,o,n)=>{const r=e.dom;if(r.isEmpty(n))((e,t,o)=>{fe(P.fromDom(o)),Co(e.dom,t,o),e.selection.setCursorLocation(o,0)})(e,o,n);else{const l=to(t);Co(r,o,n),e.selection.setRng(oo(l))}},To=(e,t)=>{const o=e.dom,n=e.selection,r=n.getStart(),l=ut(e,r),a=o.getParent(n.getStart(),"LI",l);if(a){const r=a.parentElement;if(r===e.getBody()&&Ke(o,r))return!0;const s=at(n.getRng()),i=o.getParent(yo(e,s,t,l),"LI",l),c=i&&(t?o.isChildOf(a,i):o.isChildOf(i,a));if(i&&i!==a&&!c)return e.undoManager.transact(()=>{var o,n;t?xo(e,s,i,a):(null===(n=(o=a).parentNode)||void 0===n?void 0:n.firstChild)===o?Qt(e):((e,t,o,n)=>{const r=to(t);Co(e.dom,o,n);const l=oo(r);e.selection.setRng(l)})(e,s,a,i)}),!0;if(c&&!t&&i!==a)return e.undoManager.transact(()=>{if(s.commonAncestorContainer.parentElement){const t=to(s),n=s.commonAncestorContainer.parentElement;So(o,s.commonAncestorContainer.parentElement,i),n.remove();const r=oo(t);e.selection.setRng(r)}}),!0;if(!i&&!t&&0===s.startOffset&&0===s.endOffset)return e.undoManager.transact(()=>{Jt(e)}),!0}return!1},ko=(e,t)=>{const o=e.dom,n=e.selection.getStart(),r=ut(e,n),l=o.getParent(n,o.isBlock,r);if(l&&o.isEmpty(l,void 0,{checkRootAsContent:!0})){const n=at(e.selection.getRng()),a=o.getParent(yo(e,n,t,r),"LI",r);if(a){const s=e=>v(["td","th","caption"],z(e)),i=e=>e.dom===r;return!!((e,t,o=u)=>M(e,t,o).getOr(e.isNone()&&t.isNone()))(ce(P.fromDom(a),s,i),ce(P.fromDom(n.startContainer),s,i),U)&&(e.undoManager.transact(()=>{const n=a.parentNode;((e,t,o)=>{const n=e.getParent(t.parentNode,e.isBlock,o);e.remove(t),n&&e.isEmpty(n)&&e.remove(n)})(o,l,r),mo(o,n),e.selection.select(a,!0),e.selection.collapse(t)}),!0)}}return!1},No=e=>{const t=e.selection.getStart(),o=ut(e,t);return e.dom.getParent(t,"LI,DT,DD",o)||mt(e).length>0},Ao=(e,t)=>{const o=e.selection;return!wt(e,o.getNode())&&(o.isCollapsed()?((e,t)=>To(e,t)||ko(e,t))(e,t):(e=>!!No(e)&&(e.undoManager.transact(()=>{let t=!0;const o=()=>t=!1;e.on("input",o),e.execCommand("Delete"),e.off("input",o),t&&e.dispatch("input"),fo(e.dom,e.getBody())}),!0))(e))},Oo=e=>{const t=O(Tt(e).split("")),o=S(t,(e,t)=>{const o=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*o});return T(o,(e,t)=>e+t,0)},Do=e=>{if(--e<0)return"";{const t=e%26,o=Math.floor(e/26);return Do(o)+String.fromCharCode("A".charCodeAt(0)+t)}},_o=e=>{const t=parseInt(e.start,10);return L(e.listStyleType,"upper-alpha")?Do(t):L(e.listStyleType,"lower-alpha")?Do(t).toLowerCase():e.start},Eo=e=>{const t=ct(e);Ue(t)&&!wt(e,t)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:_o({start:e.dom.getAttrib(t,"start","1"),listStyleType:b.from(e.dom.getStyle(t,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{(e=>{switch((e=>/^[0-9]+$/.test(e)?2:(e=>/^[A-Z]+$/.test(e))(e)?0:(e=>/^[a-z]+$/.test(e))(e)?1:(e=>e.length>0)(e)?4:3)(e)){case 2:return b.some({listStyleType:b.none(),start:e});case 0:return b.some({listStyleType:b.some("upper-alpha"),start:Oo(e).toString()});case 1:return b.some({listStyleType:b.some("lower-alpha"),start:Oo(e).toString()});case 3:return b.some({listStyleType:b.none(),start:""});case 4:return b.none()}})(t.getData().start).each(t=>{e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})}),t.close()}})},Ro=(e,t)=>()=>{const o=ct(e);return s(o)&&o.nodeName===t},Lo=e=>{e.addCommand("mceListProps",()=>{Eo(e)})},Mo=e=>{e.on("BeforeExecCommand",t=>{const o=t.command.toLowerCase();"indent"===o?Gt(e):"outdent"===o&&Qt(e)}),e.addCommand("InsertUnorderedList",(t,o)=>{bo(e,"UL",o)}),e.addCommand("InsertOrderedList",(t,o)=>{bo(e,"OL",o)}),e.addCommand("InsertDefinitionList",(t,o)=>{bo(e,"DL",o)}),e.addCommand("RemoveList",()=>{Jt(e)}),Lo(e),e.addCommand("mceListUpdate",(t,o)=>{r(o)&&((e,t)=>{const o=ct(e);null===o||wt(e,o)||e.undoManager.transact(()=>{r(t.styles)&&e.dom.setStyles(o,t.styles),r(t.attrs)&&Te(t.attrs,(t,n)=>e.dom.setAttrib(o,n,t))})})(e,o)}),e.addQueryStateHandler("InsertUnorderedList",Ro(e,"UL")),e.addQueryStateHandler("InsertOrderedList",Ro(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",Ro(e,"DL"))};var Io=tinymce.util.Tools.resolve("tinymce.html.Node");const Po=e=>3===e.type,Bo=e=>0===e.length,Uo=e=>{const t=(t,o)=>{const n=Io.create("li");C(t,e=>n.append(e)),o?e.insert(n,o,!0):e.append(n)},o=T(e.children(),(e,o)=>Po(o)?[...e,o]:Bo(e)||Po(o)?e:(t(e,o),[]),[]);Bo(o)||t(o)},Fo=e=>{Qe(e)&&(e=>{e.on("keydown",t=>{t.keyCode!==Se.TAB||Se.metaKeyPressed(t)||e.undoManager.transact(()=>{(t.shiftKey?Qt(e):Gt(e))&&t.preventDefault()})})})(e),(e=>{e.on("ExecCommand",t=>{const o=t.command.toLowerCase();"delete"!==o&&"forwarddelete"!==o||!No(e)||fo(e.dom,e.getBody())}),e.on("keydown",t=>{t.keyCode===Se.BACKSPACE?Ao(e,!1)&&t.preventDefault():t.keyCode===Se.DELETE&&Ao(e,!0)&&t.preventDefault()})})(e)},Ho=(e,t)=>o=>(o.setEnabled(e.selection.isEditable()),St(e,n=>{o.setActive(yt(n.parents,t)),o.setEnabled(!wt(e,n.element)&&e.selection.isEditable())})),jo=(e,t)=>o=>St(e,n=>o.setEnabled(yt(n.parents,t)&&!wt(e,n.element)));e.add("lists",e=>((e=>{(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0})})(e),(e=>{e.on("PreInit",()=>{const{parser:t}=e;t.addNodeFilter("ul,ol",e=>C(e,Uo))})})(e),e.hasPlugin("rtc",!0)?Lo(e):(Fo(e),Mo(e)),(e=>{const t=t=>()=>e.execCommand(t);e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:Ho(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:Ho(e,"UL")}))})(e),(e=>{const t={text:"List properties...",icon:"ordered-list",onAction:()=>e.execCommand("mceListProps"),onSetup:jo(e,"OL")};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:t=>{const o=ct(e,t);return Ue(o)?["listprops"]:[]}})})(e),(e=>({backspaceDelete:t=>{Ao(e,t)}}))(e)))}()},cE1G:function(e,t,o){(function(e){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(((e,t)=>t.isPrototypeOf(e))(o=e,(n=String).prototype)||(null===(r=o.constructor)||void 0===r?void 0:r.name)===n.name)?"string":t;var o,n,r})(t)===e,n=e=>t=>typeof t===e,r=o("string"),l=o("object"),a=o("array"),s=(i=null,e=>i===e);var i;const c=n("boolean"),d=e=>!(e=>null==e)(e),m=n("function"),u=(e,t)=>{if(a(e)){for(let o=0,n=e.length;o<n;++o)if(!t(e[o]))return!1;return!0}return!1},p=()=>{},g=(e,t)=>e===t;class b{constructor(e,t){this.tag=e,this.value=t}static some(e){return new b(!0,e)}static none(){return b.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?b.some(e(this.value)):b.none()}bind(e){return this.tag?e(this.value):b.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:b.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return d(e)?b.some(e):b.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}b.singletonNone=new b(!1);const h=Array.prototype.indexOf,f=Array.prototype.push,y=(e,t)=>((e,t)=>h.call(e,t))(e,t)>-1,v=e=>{const t=[];for(let o=0,n=e.length;o<n;++o){if(!a(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);f.apply(t,e[o])}return t},w=(e,t)=>v(((e,t)=>{const o=e.length,n=new Array(o);for(let r=0;r<o;r++){const o=e[r];n[r]=t(o,r)}return n})(e,t)),S=(e,t)=>{for(let o=0;o<e.length;o++){const n=t(e[o],o);if(n.isSome())return n}return b.none()},C=(e,t,o=g)=>e.exists(e=>o(e,t)),x=e=>{const t=[],o=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(o);return t},T=(e,t)=>e?b.some(t):b.none(),k=e=>t=>t.options.get(e),N=k("link_assume_external_targets"),A=k("link_context_toolbar"),O=k("link_list"),D=k("link_default_target"),_=k("link_default_protocol"),E=k("link_target_list"),R=k("link_rel_list"),L=k("link_class_list"),M=k("link_title"),I=k("allow_unsafe_link_target"),P=k("link_quicklink"),B=Object.keys,U=Object.hasOwnProperty,F=(e,t,o,n)=>{((e,t)=>{const o=B(e);for(let n=0,r=o.length;n<r;n++){const r=o[n];t(e[r],r)}})(e,(e,r)=>{(t(e,r)?o:n)(e,r)})},H=(e,t)=>U.call(e,t);var j=tinymce.util.Tools.resolve("tinymce.util.URI"),q=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),$=tinymce.util.Tools.resolve("tinymce.util.Tools");const V=e=>d(e)&&"a"===e.nodeName.toLowerCase(),z=e=>V(e)&&!!G(e),K=(e,t)=>{if(e.collapsed)return[];{const o=e.cloneContents(),n=o.firstChild,r=new q(n,o),l=[];let a=n;do{t(a)&&l.push(a)}while(a=r.next());return l}},W=e=>/^\w+:/i.test(e),G=e=>{var t,o;return null!==(o=null!==(t=e.getAttribute("data-mce-href"))&&void 0!==t?t:e.getAttribute("href"))&&void 0!==o?o:""},Q=(e,t)=>{const o=["noopener"],n=e?e.split(/\s+/):[],r=e=>e.filter(e=>-1===$.inArray(o,e)),l=t?(e=>(e=r(e)).length>0?e.concat(o):o)(n):r(n);return l.length>0?(e=>$.trim(e.sort().join(" ")))(l):""},J=(e,t)=>(t=t||Y(e.selection.getRng())[0]||e.selection.getNode(),ne(t)?b.from(e.dom.select("a[href]",t)[0]):b.from(e.dom.getParent(t,"a[href]"))),Z=(e,t)=>J(e,t).isSome(),X=(e,t)=>(e=>e.replace(/\uFEFF/g,""))(t.fold(()=>e.getContent({format:"text"}),e=>e.innerText||e.textContent||"")),Y=e=>K(e,z),ee=e=>$.grep(e,z),te=e=>ee(e).length>0,oe=e=>{const t=e.schema.getTextInlineElements(),o=e=>1===e.nodeType&&!V(e)&&!H(t,e.nodeName.toLowerCase());if(J(e).exists(e=>e.hasAttribute("data-mce-block")))return!1;const n=e.selection.getRng();if(n.collapsed)return!0;return 0===K(n,o).length},ne=e=>d(e)&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className),re=(e,t)=>{const o={...t};if(0===R(e).length&&!I(e)){const e=Q(o.rel,"_blank"===o.target);o.rel=e||null}return b.from(o.target).isNone()&&!1===E(e)&&(o.target=D(e)),o.href=((e,t)=>"http"!==t&&"https"!==t||W(e)?e:t+"://"+e)(o.href,N(e)),o},le=(e,t,o)=>{const n=e.selection.getNode(),r=J(e,n),l=re(e,(e=>((e,t,o)=>(((e,t)=>{for(let o=0,n=e.length;o<n;o++){t(e[o],o)}})(e,(e,n)=>{o=t(o,e,n)}),o))(["title","rel","class","target"],(t,o)=>(e[o].each(e=>{t[o]=e.length>0?e:null}),t),{href:e.href}))(o));e.undoManager.transact(()=>{o.href===t.href&&t.attach(),r.fold(()=>{((e,t,o,n)=>{const r=e.dom;ne(t)?de(r,t,n):o.fold(()=>{e.execCommand("mceInsertLink",!1,n)},t=>{e.insertContent(r.createHTML("a",n,r.encode(t)))})})(e,n,o.text,l)},t=>{e.focus(),((e,t,o,n)=>{o.each(e=>{H(t,"innerText")?t.innerText=e:t.textContent=e}),e.dom.setAttribs(t,n),e.selection.select(t)})(e,t,o.text,l)})})},ae=e=>{const{class:t,href:o,rel:n,target:r,text:l,title:a}=e;return((e,t)=>{const o={};var n;return F(e,t,(n=o,(e,t)=>{n[t]=e}),p),o})({class:t.getOrNull(),href:o,rel:n.getOrNull(),target:r.getOrNull(),text:l.getOrNull(),title:a.getOrNull()},(e,t)=>!1===s(e))},se=(e,t,o)=>{const n=((e,t)=>{const o=e.options.get,n={allow_html_data_urls:o("allow_html_data_urls"),allow_script_urls:o("allow_script_urls"),allow_svg_data_urls:o("allow_svg_data_urls")},r=t.href;return{...t,href:j.isDomSafe(r,"a",n)?r:""}})(e,o);e.hasPlugin("rtc",!0)?e.execCommand("createlink",!1,ae(n)):le(e,t,n)},ie=e=>{e.hasPlugin("rtc",!0)?e.execCommand("unlink"):(e=>{e.undoManager.transact(()=>{const t=e.selection.getNode();ne(t)?ce(e,t):(e=>{const t=e.dom,o=e.selection,n=o.getBookmark(),r=o.getRng().cloneRange(),l=t.getParent(r.startContainer,"a[href]",e.getBody()),a=t.getParent(r.endContainer,"a[href]",e.getBody());l&&r.setStartBefore(l),a&&r.setEndAfter(a),o.setRng(r),e.execCommand("unlink"),o.moveToBookmark(n)})(e),e.focus()})})(e)},ce=(e,t)=>{var o;const n=e.dom.select("img",t)[0];if(n){const r=e.dom.getParents(n,"a[href]",t)[0];r&&(null===(o=r.parentNode)||void 0===o||o.insertBefore(n,r),e.dom.remove(r))}},de=(e,t,o)=>{var n;const r=e.select("img",t)[0];if(r){const t=e.create("a",o);null===(n=r.parentNode)||void 0===n||n.insertBefore(t,r),t.appendChild(r)}},me=e=>r(e.value)?e.value:"",ue=(e,t)=>{const o=[];return $.each(e,e=>{const n=(e=>r(e.text)?e.text:r(e.title)?e.title:"")(e);if(void 0!==e.menu){const r=ue(e.menu,t);o.push({text:n,items:r})}else{const r=t(e);o.push({text:n,value:r})}}),o},pe=(e=me)=>t=>b.from(t).map(t=>ue(t,e)),ge={sanitize:e=>pe(me)(e),sanitizeWith:pe,createUi:(e,t)=>o=>({name:e,type:"listbox",label:t,items:o}),getValue:me},be=e=>{return H(t=e,o="items")&&void 0!==t[o]&&null!==t[o];var t,o},he=(e,t)=>S(t,t=>be(t)?he(e,t.items):T(t.value===e,t)),fe=(e,t,o,n)=>{const r=n[t],l=e.length>0;return void 0!==r?he(r,o).map(t=>({url:{value:t.value,meta:{text:l?e:t.text,attach:p}},text:l?e:t.text})):b.none()},ye=(e,t)=>{const o={text:e.text,title:e.title},n=e=>{const t=(n=e.url,T(o.text.length<=0,b.from(null===(r=n.meta)||void 0===r?void 0:r.text).getOr(n.value)));var n,r;const l=(e=>{var t;return T(o.title.length<=0,b.from(null===(t=e.meta)||void 0===t?void 0:t.title).getOr(""))})(e.url);return t.isSome()||l.isSome()?b.some({...t.map(e=>({text:e})).getOr({}),...l.map(e=>({title:e})).getOr({})}):b.none()},r=(e,n)=>{const r=(l=t,a=n,"link"===a?l.link:"anchor"===a?l.anchor:b.none()).getOr([]);var l,a;return fe(o.text,n,r,e)};return{onChange:(e,t)=>{const l=t.name;return"url"===l?n(e()):y(["anchor","link"],l)?r(e(),l):"text"===l||"title"===l?(o[l]=e()[l],b.none()):b.none()}}};var ve=tinymce.util.Tools.resolve("tinymce.util.Delay");const we=e=>{const t=e.href;return t.indexOf("@")>0&&-1===t.indexOf("/")&&-1===t.indexOf("mailto:")?b.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:e=>({...e,href:"mailto:"+t})}):b.none()},Se=(e,t)=>o=>{const n=o.href;return 1===e&&!W(n)||0===e&&/^\s*www(\.|\d\.)/i.test(n)?b.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${t}:// prefix?`,preprocess:e=>({...e,href:t+"://"+n})}):b.none()},Ce=(t,o)=>S([we,Se(N(t),_(t))],e=>e(o)).fold(()=>e.resolve(o),n=>new e(e=>{((e,t,o)=>{const n=e.selection.getRng();ve.setEditorTimeout(e,()=>{e.windowManager.confirm(t,t=>{e.selection.setRng(n),o(t)})})})(t,n.message,t=>{e(t?n.preprocess(o):o)})})),xe=e=>{const t=e.dom.select("a:not([href])"),o=w(t,e=>{const t=e.name||e.id;return t?[{text:t,value:"#"+t}]:[]});return o.length>0?b.some([{text:"None",value:""}].concat(o)):b.none()},Te=e=>{const t=L(e);return t.length>0?ge.sanitize(t):b.none()},ke=e=>{try{return b.some(JSON.parse(e))}catch(e){return b.none()}},Ne=t=>{const o=e=>t.convertURL(e.value||e.url||"","href"),n=O(t);return new e(t=>{r(n)?fetch(n).then(t=>t.ok?t.text().then(ke):e.reject()).then(t,()=>t(b.none())):m(n)?n(e=>t(b.some(e))):t(b.from(n))}).then(e=>e.bind(ge.sanitizeWith(o)).map(e=>{if(e.length>0){return[{text:"None",value:""}].concat(e)}return e}))},Ae=(e,t)=>{const o=R(e);if(o.length>0){const n=C(t,"_blank"),r=e=>Q(ge.getValue(e),n);return(!1===I(e)?ge.sanitizeWith(r):ge.sanitize)(o)}return b.none()},Oe=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],De=e=>{const t=E(e);return a(t)?ge.sanitize(t).orThunk(()=>b.some(Oe)):!1===t?b.none():b.some(Oe)},_e=(e,t,o)=>{const n=e.getAttrib(t,o);return null!==n&&n.length>0?b.some(n):b.none()},Ee=(e,t)=>Ne(e).then(o=>{const n=((e,t)=>{const o=e.dom,n=oe(e)?b.some(X(e.selection,t)):b.none(),r=t.bind(e=>b.from(o.getAttrib(e,"href"))),l=t.bind(e=>b.from(o.getAttrib(e,"target"))),a=t.bind(e=>_e(o,e,"rel")),s=t.bind(e=>_e(o,e,"class"));return{url:r,text:n,title:t.bind(e=>_e(o,e,"title")),target:l,rel:a,linkClass:s}})(e,t);return{anchor:n,catalogs:{targets:De(e),rels:Ae(e,n.target),classes:Te(e),anchor:xe(e),link:o},optNode:t,flags:{titleEnabled:M(e)}}}),Re=e=>{(e=>{const t=J(e);return Ee(e,t)})(e).then(t=>((e,t,o)=>{const n=e.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),r=e.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],l=((e,t)=>{const o=e.anchor,n=o.url.getOr("");return{url:{value:n,meta:{original:{value:n}}},text:o.text.getOr(""),title:o.title.getOr(""),anchor:n,link:n,rel:o.rel.getOr(""),target:o.target.or(t).getOr(""),linkClass:o.linkClass.getOr("")}})(e,b.from(D(o))),a=e.catalogs,s=ye(l,a);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:v([[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],n,r,x([a.anchor.map(ge.createUi("anchor","Anchors")),a.rels.map(ge.createUi("rel","Rel")),a.targets.map(ge.createUi("target","Open link in...")),a.link.map(ge.createUi("link","Link list")),a.classes.map(ge.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:l,onChange:(e,{name:t})=>{s.onChange(e.getData,{name:t}).each(t=>{e.setData(t)})},onSubmit:t}})(t,((e,t)=>o=>{const n=o.getData();if(!n.url.value)return ie(e),void o.close();const r=e=>b.from(n[e]).filter(o=>!C(t.anchor[e],o)),l={href:n.url.value,text:r("text"),target:r("target"),rel:r("rel"),class:r("linkClass"),title:r("title")},a={href:n.url.value,attach:void 0!==n.url.meta&&n.url.meta.attach?n.url.meta.attach:p};Ce(e,l).then(t=>{se(e,a,t)}),o.close()})(e,t),e)).then(t=>{e.windowManager.open(t)})},Le=()=>{const e=(e=>{const t=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})(b.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(b.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{o(),t.set(b.some(e))}}})(p);return{...e,on:t=>e.get().each(t)}},Me=(e,t)=>((e,t,o)=>""===t||e.length>=t.length&&e.substr(o,o+t.length)===t)(e,t,0);var Ie=tinymce.util.Tools.resolve("tinymce.util.VK");const Pe=e=>{const t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";const o=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(o),((e,t)=>{document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)})(t,o)},Be=(e,t)=>{if(t){const r=G(t);if(/^#/.test(r)){const t=e.dom.select(`${r},[name="${o=r,n="#",Me(o,n)?((e,t)=>e.substring(t))(o,n.length):o}"]`);t.length&&e.selection.scrollIntoView(t[0],!0)}else Pe(t.href)}var o,n},Ue=(e,t)=>{const o=ee(e.dom.getParents(t));return T(1===o.length,o[0])},Fe=e=>e.selection.isCollapsed()||(e=>{const t=e.selection.getRng(),o=t.startContainer;return z(o)&&t.startContainer===t.endContainer&&1===e.dom.select("img",o).length})(e)?Ue(e,e.selection.getStart()):(e=>{const t=Y(e.selection.getRng());return T(t.length>0,t[0]).or(Ue(e,e.selection.getNode()))})(e),He=e=>()=>{e.execCommand("mceLink",!1,{dialog:!0})},je=(e,t)=>(e.on("NodeChange",t),()=>e.off("NodeChange",t)),qe=e=>t=>{const o=()=>{t.setActive(!e.mode.isReadOnly()&&Z(e,e.selection.getNode())),t.setEnabled(e.selection.isEditable())};return o(),je(e,o)},$e=e=>t=>{const o=()=>{t.setEnabled(e.selection.isEditable())};return o(),je(e,o)},Ve=e=>t=>{const o=t=>{return te(t)||(o=e.selection.getRng(),Y(o).length>0);var o},n=e.dom.getParents(e.selection.getStart()),r=n=>{t.setEnabled(o(n)&&e.selection.isEditable())};return r(n),je(e,e=>r(e.parents))},ze=(e,t)=>{const o=t=>{const o=e.selection.getNode();return t.setEnabled(Z(e,o)&&e.selection.isEditable()),p};e.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:qe(e)},label:"Link",predicate:t=>A(e)&&Z(e,t),initValue:()=>J(e).fold((e=>()=>e)(""),G),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:t=>{const o=e.selection.getNode();return t.setActive(Z(e,o)),qe(e)(t)},onAction:t=>{const o=t.getValue(),n=(t=>{const o=J(e),n=oe(e);if(o.isNone()&&n){const n=X(e.selection,o);return T(0===n.length,t)}return b.none()})(o);se(e,{href:o,attach:p},{href:o,text:n,title:b.none(),rel:b.none(),target:b.from(D(e)),class:b.none()}),(e=>{e.selection.collapse(!1)})(e),t.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:o,onAction:t=>{ie(e),t.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:o,onAction:e=>{t.gotoSelectedLink(),e.hide()}}]})},Ke=e=>{const t=(e=>{const t=Le(),o=()=>t.get().or(Fe(e));return e.on("contextmenu",o=>{Ue(e,o.target).each(t.set)}),e.on("SelectionChange",()=>{t.isSet()||Fe(e).each(t.set)}),e.on("click",o=>{t.clear();const n=ee(e.dom.getParents(o.target));1===n.length&&Ie.metaKeyPressed(o)&&(o.preventDefault(),Be(e,n[0]))}),e.on("keydown",n=>{t.clear(),!n.isDefaultPrevented()&&13===n.keyCode&&(e=>!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey)(n)&&o().each(t=>{n.preventDefault(),Be(e,t)})}),{gotoSelectedLink:()=>o().each(t=>Be(e,t))}})(e);((e,t)=>{e.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:He(e),onSetup:qe(e)}),e.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:t.gotoSelectedLink,onSetup:Ve(e)}),e.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>ie(e),onSetup:Ve(e)})})(e,t),((e,t)=>{e.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:t.gotoSelectedLink,onSetup:Ve(e)}),e.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:He(e),onSetup:$e(e)}),e.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>ie(e),onSetup:Ve(e)})})(e,t),(e=>{e.ui.registry.addContextMenu("link",{update:t=>e.dom.isEditable(t)?te(e.dom.getParents(t,"a"))?"link unlink openlink":"link":""})})(e),ze(e,t)};t.add("link",e=>{(e=>{const t=e.options.register;t("link_assume_external_targets",{processor:e=>{const t=r(e)||c(e);return t?!0===e?{value:1,valid:t}:"http"===e||"https"===e?{value:e,valid:t}:{value:0,valid:t}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),t("link_context_toolbar",{processor:"boolean",default:!1}),t("link_list",{processor:e=>r(e)||m(e)||u(e,l)}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"}),t("link_target_list",{processor:e=>c(e)||u(e,l),default:!0}),t("link_rel_list",{processor:"object[]",default:[]}),t("link_class_list",{processor:"object[]",default:[]}),t("link_title",{processor:"boolean",default:!0}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("link_quicklink",{processor:"boolean",default:!1})})(e),(e=>{e.addCommand("mceLink",(t,o)=>{!0!==(null==o?void 0:o.dialog)&&P(e)?e.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):Re(e)})})(e),Ke(e),(e=>{e.addShortcut("Meta+K","",()=>{e.execCommand("mceLink")})})(e)})}()}).call(this,o("vN7P"))},mQgz:function(e,t,o){o("cE1G")}}]);