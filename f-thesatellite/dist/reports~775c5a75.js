(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{"29E8":function(e,t,r){"use strict";var n=r("yCd9"),o=r.n(n),a=r("6RpP"),i=r.n(a);t.a=angular.module("deskworks.reportSort",[]).factory("reportSort",["$filter",function(e){return function(t,r,n){return angular.isArray(r)||(r=[r]),r=o()(r).call(r,(function(e){var t,r;return i()(t=i()(r="".concat(e," || ")).call(r,e," === 0 ? ")).call(t,e,' : "~~~"')})),e("orderBy")(t,r,n)}}])},"5/DJ":function(e,t,r){"use strict";t.a=angular.module("deskworks.reports.reportStyles",["deskworks.helper"]).factory("reportStyles",["helper",function(e){return{pageMargins:[60,25,50,25],headStyles:{font:"Font",fontSize:9,fontStyle:"normal",valign:"middle",fillColor:e.hex2rgbArr("#444444"),textColor:255,textTransform:"uppercase"},bodyStyles:{font:"Font",overflow:"linebreak",textColor:0},header:{textColor:"#949594"},footer:{textColor:"#949594"},rowOdd:{fillColor:[245,245,245]},h1:{fontStyle:"bold",fillColor:e.hex2rgbArr("#949594"),textColor:[255,255,255]},h2:{fontStyle:"bold",textColor:e.hex2rgbArr("#444444"),borderWidth:1,borderColor:e.hex2rgbArr("#444444")},h3:{fontStyle:"bold"}}}])},"5bca":function(e,t,r){"use strict";t.a=angular.module("deskworks.logo",[]).factory("logo",["$window","$http","$q","deskworksConfig",function(e,t,r,n){var o,a;return{getSiteLogo:function(){return o=o||r((function(e){var t=new Image;t.crossOrigin="anonymous",t.src=n.getApiAbsUrl("/white-label/images/logo-print.png"),t.onerror=function(){console.warn("Report failed to load site logo."),e(null),t=null},t.onload=function(){e(t),t=null}})).then(i)},getSiteLogoInv:function(){return a=a||r((function(e){var t=document.querySelector(".sidebar-logo a img");t||console.warn("Report failed to load site logo."),e(t)})).then(i)},resetSiteLogo:function(){o=null},resetSiteLogoInv:function(){a=null}};function i(e){if(!e)return null;var t=e.width/480,r=e.height/171,n=t>r?t:r,o=Math.round(e.width/n),a=Math.round(e.height/n),i=document.createElement("canvas");document.body.appendChild(i),i.width=o,i.height=a,i.getContext("2d").drawImage(e,0,0,o,a);var l=i.toDataURL("image/png");return document.body.removeChild(i),{width:o,height:a,data:l}}}])},"81mT":function(e,t,r){"use strict";r("8cZI");var n=r("nbuU"),o=r.n(n),a=r("5/DJ");t.a=angular.module("deskworks.reports.reportHeader",[a.a.name]).factory("reportHeader",["$filter","$translate","reportStyles",function(e,t,r){return function(){return 3===arguments.length?a.apply(void 0,arguments):n.apply(void 0,arguments)};function n(n){var a,i,l,s,c=n.config,d=n.doc,f=n.data,u=n.resources,p=o()(a=u.centers).call(a,(function(e){return e.id===+c.centerId})),h=d.internal.pageSize.width;d.setFont(d.getFont().fontName,"normal"),d.setTextColor(r.header.textColor),l=r.pageMargins[3],s=40,d.setFontSize(14),i=c.reportName.toUpperCase(),d.text(i,l,s),l+=d.getTextWidth(i)+3,(c.fromDate||c.toDate)&&(d.setFontSize(7),i=t.instant("REPORTS.HEADER.FOR_PERIOD").toUpperCase(),c.fromDate&&(i+=" "+t.instant("REPORTS.HEADER.FROM").toUpperCase()+":"),d.text(i,l,s),l+=d.getTextWidth(i)+3,c.fromDate&&(d.setFontSize(9),i=e("date")(c.fromDate,"mediumDate")||"",d.text(i,l,s),l+=d.getTextWidth(i)+3),d.setFontSize(7),i=t.instant("REPORTS.HEADER.THROUGH").toUpperCase()+":",d.text(i,l,s),l+=d.getTextWidth(i)+3,d.setFontSize(9),i=e("date")(c.toDate,"mediumDate")||"",d.text(i,l,s),l+=d.getTextWidth(i)+3),l=h-r.pageMargins[1],d.setFontSize(9),i=""+f.pageCount,l-=d.getTextWidth(i),d.text(i,l,s),d.setFontSize(7),i=t.instant("REPORTS.HEADER.PAGE").toUpperCase()+":",l-=d.getTextWidth(i+" "),d.text(i,l,s-.6),l=r.pageMargins[3],s+=11,d.setFontSize(7),i=t.instant("REPORTS.HEADER.REPORT_FOR").toUpperCase()+":",d.text(i,l,s-.6),l+=d.getTextWidth(i+" "),d.setFontSize(9),i=c.reportFor||(p?[p.name,p.city,p.state].join(", "):"All Centers"),d.text(i,l,s),l+=d.getTextWidth(i+" "),l=h-r.pageMargins[1],d.setFontSize(9),i=e("date")(moment(),"mediumDate"),l-=d.getTextWidth(i),d.text(i,l,s),d.setFontSize(7),i=t.instant("REPORTS.HEADER.REPORT_DATE").toUpperCase()+":",l-=d.getTextWidth(i+" "),d.text(i,l,s-.6)}function a(n,o,a){var i,l,s,c=o.internal.pageSize.width;o.setFont(o.getFont().fontName,"normal"),o.setTextColor(r.header.textColor),l=r.pageMargins[3],s=40,o.setFontSize(14),i=a.reportName.toUpperCase(),o.text(i,l,s),l+=o.getTextWidth(i)+3,a.reportDates&&(o.setFontSize(7),i=t.instant("REPORTS.HEADER.FOR_PERIOD").toUpperCase(),a.reportDates.fromDate&&(i+=" "+t.instant("REPORTS.HEADER.FROM").toUpperCase()+":"),o.text(i,l,s),l+=o.getTextWidth(i)+3,a.reportDates.fromDate&&(o.setFontSize(9),i=e("date")(a.reportDates.fromDate,"mediumDate")||"",o.text(i,l,s),l+=o.getTextWidth(i)+3),o.setFontSize(7),i=t.instant("REPORTS.HEADER.THROUGH").toUpperCase()+":",o.text(i,l,s),l+=o.getTextWidth(i)+3,o.setFontSize(9),i=e("date")(a.reportDates.toDate,"mediumDate")||"",o.text(i,l,s),l+=o.getTextWidth(i)+3),l=c-r.pageMargins[1],o.setFontSize(9),i=""+n.pageCount,l-=o.getTextWidth(i),o.text(i,l,s),o.setFontSize(7),i=t.instant("REPORTS.HEADER.PAGE").toUpperCase()+":",l-=o.getTextWidth(i+" "),o.text(i,l,s-.6),l=r.pageMargins[3],s+=11,o.setFontSize(7),i=t.instant("REPORTS.HEADER.REPORT_FOR").toUpperCase()+":",o.text(i,l,s-.6),l+=o.getTextWidth(i+" "),o.setFontSize(9),i=a.reportFor||(!1===a.reportOptions.centerId||+a.reportOptions.centerId)&&[a.center.name,a.center.city,a.center.state.name].join(", ")||"All Centers",o.text(i,l,s),l+=o.getTextWidth(i+" "),l=c-r.pageMargins[1],o.setFontSize(9),i=e("date")(moment(),"mediumDate"),l-=o.getTextWidth(i),o.text(i,l,s),o.setFontSize(7),i=t.instant("REPORTS.HEADER.REPORT_DATE").toUpperCase()+":",l-=o.getTextWidth(i+" "),o.text(i,l,s-.6)}}])},"8Xq/":function(e,t,r){"use strict";r("3dw1");t.a=angular.module("deskworks.reports.optsReportByPeriod",[]).factory("optsReportByPeriod",["$rootScope","$translate","$filter",function(e,t,r){var n=r("date"),o=[{id:"week",_name:"REPORTS.BY_PERIOD.WEEK",format:function(e,t){return n(e,"MMM d")+" - "+n(t,"MMM d")}},{id:"month",_name:"REPORTS.BY_PERIOD.MONTH",format:function(e,t){return n(e,"MMM")}},{id:"quarter",_name:"REPORTS.BY_PERIOD.QUARTER",format:function(e,t){return n(e,"MMM")+" - "+n(t,"MMM")}},{id:"year",_name:"REPORTS.BY_PERIOD.YEAR",format:function(e,t){return n(e,"yyyy")}}];function a(){o.forEach((function(e){e.name=t.instant(e._name)}))}return a(),e.$on("$setTranslationsSuccess",a),o}])},"9ux4":function(e,t,r){"use strict";(function(e){r("JBxO");var n=r("yCd9"),o=r.n(n),a=r("76E7"),i=r("PKSF");t.a=angular.module("deskworks.reportFontInit",[]).factory("reportFontInit",["$q","$http",function(t,r){var n,l;return t.all(o()(n=[a.a,i.a]).call(n,(function(t){return r.get(t,{responseType:"arraybuffer"}).then((function(t){return e.from(t.data).toString("base64")}))}))).then((function(e){return l=e})),function(e){l?(e.getFontList().Font||(e.addFileToVFS("font-regular.ttf",l[0]),e.addFileToVFS("font-bold.ttf",l[1]),e.addFont("font-regular.ttf","Font","normal"),e.addFont("font-bold.ttf","Font","bold")),e.setFont("Font")):console.warn("Report fonts are not loaded yet.")}}])}).call(this,r("zkTx").Buffer)},CLLE:function(e,t,r){"use strict";r("3dw1");var n=r("03wM"),o=r.n(n),a=r("Ekwr"),i=r.n(a),l=r("hsT8"),s=r.n(l),c=r("lvz6"),d=r.n(c),f=r("yKah"),u=r.n(f),p=r("fzuT"),h=r.n(p),g=r("yCd9"),m=r.n(g),y=r("ipr/"),v=r.n(y),S=(r("S2gh"),r("bG+q"),r("pl6f")),b=r("aGVL"),R=r("bU+R"),w=r.n(R);function x(e,t){var r=o()(e);if(i.a){var n=i()(e);t&&(n=s()(n).call(n,(function(t){return d()(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){h()(e,t,r[t])})):u.a?Object.defineProperties(e,u()(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,d()(r,t))}))}return e}t.a=angular.module("chartDirective",["deskworks.helper",S.a.name,b.a.name]).directive("chart",["$window","systemColors",function(e,t){return e.Chart.defaults.global.legend.labels.boxWidth=12,e.Chart.defaults.global.tooltips.cornerRadius=3,e.Chart.defaults.global.tooltips.displayColors=!1,e.Chart.defaults.global.tooltips.backgroundColor="rgba(0,0,0,0.65)",e.Chart.defaults.global.elements.rectangle.borderWidth=1,e.Chart.defaults.global.elements.rectangle.backgroundColor=t.primary,e.Chart.defaults.global.elements.arc.borderWidth=1,e.Chart.plugins.unregister(w.a),{restrict:"E",scope:!0,controller:"ChartCtrl as $ctrl",bindToController:{type:"@chartType",labels:"<chartLabels",data:"<chartData",options:"<chartOptions",config:"<"},template:"<canvas></canvas>"}}]).controller("ChartCtrl",["$scope","$element","$window","chartColors",function(e,t,r,n){var o,a=this,i={maintainAspectRatio:!1},l={backgroundColor:n,hoverBorderWidth:2,hoverBorderColor:"#fff"};a.$onDestroy=function(){o&&o.destroy()},a.$onChanges=function(e){var n;if(a.config){var s;o&&o.destroy();var c=C({},a.config);return c.options=C(C({},c.options),i),c.data=C({},c.data),c.data.datasets=m()(s=c.data.datasets).call(s,(function(e){return C(C({},l),e)})),void(o=new r.Chart(t.children(),c))}if(a.options){var d={labels:a.labels,datasets:v()(n=a.data).call(n)};d.datasets[0]=angular.extend({},l,d.datasets[0]),!o||e.type&&e.type.currentValue!==e.type.previousValue?(o&&o.destroy(),o=new r.Chart(t.children(),{type:a.type,data:d,options:angular.extend({},i,a.options)})):(angular.extend(o.data,d),angular.extend(o.options,i,a.options),o.update())}}}])},G6E5:function(e,t,r){"use strict";var n=r("03wM"),o=r.n(n),a=r("Ekwr"),i=r.n(a),l=r("hsT8"),s=r.n(l),c=r("lvz6"),d=r.n(c),f=r("yKah"),u=r.n(f),p=r("fzuT"),h=r.n(p),g=r("yCd9"),m=r.n(g),y=r("6RpP"),v=r.n(y),S=r("G0Vy"),b=r.n(S),R=r("nbuU"),w=r.n(R),x=r("Z9wY"),C=r.n(x),E=(r("3dw1"),r("Muwe"),r("y89P"),r("29E8")),O=r("IE1r"),T=r("UDUI"),P=(r("RKBc"),angular.module("fileSaver",[]).factory("fileSaver",["$window",function(e){return function(t,r,n,o){if(e.cordova&&e.cordova.InAppBrowser&&"ios"===e.cordova.platformId){var a=new FileReader;return a.onloadend=function(){var t=a.result;return e.cordova.InAppBrowser.open(t,"_blank","hidenavigationbuttons=yes,hideurlbar=yes,enableViewportScale=yes,location=no")},void a.readAsDataURL(t)}return e.saveAs(t,r,n,o)}}])),D=r("5bca"),F=r("5/DJ"),$=r("81mT"),k=r("Xjih"),I=r("9ux4");function A(e,t){var r=o()(e);if(i.a){var n=i()(e);t&&(n=s()(n).call(n,(function(t){return d()(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){h()(e,t,r[t])})):u.a?Object.defineProperties(e,u()(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,d()(r,t))}))}return e}t.a=angular.module("deskworks.reportHelper",[E.a.name,O.a.name,T.a.name,P.name,D.a.name,F.a.name,$.a.name,k.a.name,I.a.name]).factory("reportHelper",["$rootScope","$q","$timeout","$window","$filter","$http","dwAlerts","state","logo","jsPDF","csvMake","centerService","reportStyles","reportHeader","reportFooter","reportSort","fileSaver","reportFontInit",function(e,t,r,n,o,a,i,l,s,c,d,f,u,p,h,g,y,S){return{sort:g,paramsChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return r.some((function(r){return moment.isMoment(e[r])?!moment.isMoment(t[r])||!e[r].isSame(t[r]):e[r]!==t[r]}))},loadResources:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return{}};return t.all(z(z({},e()),{},{centers:f.query().catch((function(e){return i.error(e,"Failed to query centers.")})),logo:s.getSiteLogo()}))},buildPdf:function(e){var t,r=e.config,n=e.report,o=e.resources,a=e.doc,i=void 0===a?new c(r.paperLayout,"pt",r.paperSize):a,l=e.startY;S(i);var s=angular.copy(n.rows);s.forEach((function(e){var t=0;e.forEach((function(r,o){r&&!angular.isUndefined(r.content)||(e[o]=r={content:r});var a=n.columns[t];if(!1===r.content)r.content="";else{if(a.pdf){var i=a.pdf(r.content);r.content=""===i?r.content:i}r.content=angular.isUndefined(r.content)||null===r.content||""===r.content?"-":r.content}t+=r.colSpan||1}))}));var d={columns:m()(t=n.columns).call(t,(function(e){return r.styles&&"uppercase"!==r.styles.headStyles.textTransform?e.title:e.title.toUpperCase()})),body:s,headStyles:(r.styles||u).headStyles,bodyStyles:(r.styles||u).bodyStyles,columnStyles:(r.styles||u).columnStyles,tableMargin:r.styles&&r.styles.tableMargin||(r.styles||u).pageMargins,startY:l||(r.styles||u).startY||!1,didParseCell:function(e){var t=e.row,r=e.cell,o=e.column;if("body"===e.section){angular.extend(r.styles,{minCellWidth:50,fillColor:!1},n.styles[t.index],n.columns[o.index].styles,s[t.index][o.index]?s[t.index][o.index].styles:null)}else angular.extend(r.styles,n.columns[o.index].styles)},didDrawCell:function(e){return function(e,t){var r=e.cell,n=e.doc;0===e.column.index&&r.styles.borderColor&&r.styles.borderWidth&&(n.setLineWidth(r.styles.borderWidth),n.setDrawColor(r.styles.borderColor[0],r.styles.borderColor[1],r.styles.borderColor[2]),n.rect(e.settings.margin.left+r.styles.borderWidth/2,r.y+r.styles.borderWidth/2,e.table.getWidth(n.internal.pageSize.width)-r.styles.borderWidth,e.row.height-2*r.styles.borderWidth,"S"));return!1}(e,n.columns)},didDrawPage:function(e){(r.header||p)({config:r,doc:i,data:e.table,resources:o}),(r.footer||h)({config:r,doc:i,data:e.table,resources:o})}};return d.margin=d.tableMargin||(r.styles||u).pageMargins,i.autoTable(d),i},buildCsv:function(e){var t,r,n=e.report,o={charset:"utf-8"},a=m()(t=n.rows).call(t,(function(e){return e.reduce((function(e,t){var r;return e.push(t),v()(e).call(e,b()(r=new Array((t&&t.colSpan?t.colSpan:1)-1)).call(r,null))}),[])}));return a.forEach((function(e){e.forEach((function(t,r){e[r]&&angular.isDefined(e[r].content)&&(e[r]=e[r].content);var o=n.columns[r];if(o.csv){var a=o.csv(e[r]);e[r]=""===a?e[r]:a}e[r]=angular.isUndefined(e[r])||null===e[r]||!1===e[r]||""===e[r]?"":e[r]}))})),a.unshift(m()(r=n.columns).call(r,(function(e){return e.title.toUpperCase()}))),new Blob([d.generate(a,o)],{type:"text/csv;charset="+o.charset+";"})},getReportFileName:function(e){var t,r=e.extension,n=void 0===r?"pdf":r,a=e.postfix,i=void 0===a?"":a,l=e.config,s=e.resources,c=l.reportName.toLowerCase().replace(/\s+/g,"-"),d=(w()(t=s.centers).call(t,(function(e){return e.id===+l.centerId}))||{name:"all-centers"}).name.toLowerCase().replace(/\s+/g,"-");return c+"-"+d+"-"+o("date")(moment(),"yyyyMMdd-HHmmss")+i+"."+n.toLowerCase()},download:function(e){var t=e.blob,r=e.fileName;if(!t)return;var o=n.cordova;o&&"android"===o.platformId&&o.plugins.fileOpener2?n.resolveLocalFileSystemURL(o.file.externalDataDirectory,(function(e){e.getFile(r,{create:!0,exclusive:!1},(function(e){e.createWriter((function(r){r.onwrite=function(){return t=e.nativeURL,void n.cordova.plugins.fileOpener2.showOpenWithDialog(t,C()(t).call(t,".csv")?"text/csv":"application/pdf",{error:function(e){return console.error("showOpenWithDialog error:",e)},success:function(){return null},position:[0,0]});var t},r.write(t)}))}),(function(e){return console.error("SAVE FILE ERROR:",e)}))})):y(t,r)}}}])},IE1r:function(e,t,r){"use strict";r("Muwe"),r("y89P"),r("JBxO"),r("3dw1"),r("8cZI");t.a=angular.module("csvMake",[]).service("csvMake",["$q",function(e){this.generate=function(e,t){return t.txtDelim=t.txtDelim||'"',t.decimalSep=t.decimalSep||".",t.fieldSep=t.fieldSep||",",t.charset=t.charset||"utf-8",t.fieldSep=this.isSpecialChar(t.fieldSep)?this.getSpecialChar(t.fieldSep):t.fieldSep,this.stringify(e,t)};var t={"\\t":"\t","\\b":"\b","\\v":"\v","\\f":"\f","\\r":"\r"};this.stringifyField=function(e,t){return"locale"===t.decimalSep&&this.isFloat(e)?e.toLocaleString():"."!==t.decimalSep&&this.isFloat(e)?e.toString().replace(".",t.decimalSep):"string"==typeof e?(e=e.replace(/"/g,'""'),(t.quoteStrings||e.indexOf(",")>-1||e.indexOf("\n")>-1||e.indexOf("\r")>-1)&&(e=t.txtDelim+e+t.txtDelim),e):"boolean"==typeof e?e?"TRUE":"FALSE":e},this.isFloat=function(e){return+e===e&&(!isFinite(e)||Boolean(e%1))},this.stringifyAsync=function(t,r){var n=e.defer(),o=this,a="",i="",l=e.when(t).then((function(e){var t,l;angular.isDefined(r.header)&&r.header&&(t=[],angular.forEach(r.header,(function(e,t){this.push(o.stringifyField(e,r))}),t),l=t.join(r.fieldSep?r.fieldSep:","),i+=l+"\r\n");var s,c,d=[];(angular.isArray(e)?d=e:angular.isFunction(e)&&(d=e()),angular.isDefined(r.label)&&r.label&&"boolean"==typeof r.label)&&(s=[],angular.forEach(d[0],(function(e,t){this.push(o.stringifyField(t,r))}),s),c=s.join(r.fieldSep?r.fieldSep:","),i+=c+"\r\n");angular.forEach(d,(function(e,t){var n,a,l=angular.copy(d[t]);a=[];var s=r.columnOrder?r.columnOrder:l;angular.forEach(s,(function(e,t){var n=r.columnOrder?l[e]:e;this.push(o.stringifyField(n,r))}),a),n=a.join(r.fieldSep?r.fieldSep:","),i+=t<d.length?n+"\r\n":n})),r.addByteOrderMarker&&(a+="\ufeff"),a+=i,n.resolve(a)}));return"function"==typeof l.catch&&l.catch((function(e){n.reject(e)})),n.promise},this.stringify=function(e,t){var r,n,o=this,a="",i="";angular.isDefined(t.header)&&t.header&&(r=[],angular.forEach(t.header,(function(e,r){this.push(o.stringifyField(e,t))}),r),n=r.join(t.fieldSep?t.fieldSep:","),i+=n+"\r\n");var l,s,c=e;angular.isDefined(t.label)&&t.label&&"boolean"==typeof t.label&&(l=[],angular.forEach(c[0],(function(e,r){this.push(o.stringifyField(r,t))}),l),s=l.join(t.fieldSep?t.fieldSep:","),i+=s+"\r\n");return angular.forEach(c,(function(e,r){var n,a,l=angular.copy(c[r]);a=[];var s=t.columnOrder?t.columnOrder:l;angular.forEach(s,(function(e,r){var n=t.columnOrder?l[e]:e;this.push(o.stringifyField(n,t))}),a),n=a.join(t.fieldSep?t.fieldSep:","),i+=r<c.length?n+"\r\n":n})),t.addByteOrderMarker&&(a+="\ufeff"),a+=i},this.isSpecialChar=function(e){return void 0!==t[e]},this.getSpecialChar=function(e){return t[e]}}])},Kh2r:function(e,t,r){},Krgv:function(e,t){e.exports='<ff-panel> <ff-panel-header><span translate="REPORTS.OPTIONS.HEADER"></span></ff-panel-header> <label class="ff-row" ng-if="$ctrl.banks"> <ff-label flex="0 0 100px"><span translate="REPORTS.OPTIONS.BANK"></span></ff-label> <ff-select ff-model="$ctrl.model.bankId" ff-options="bank.id as bank.name for bank in $ctrl.banks"></ff-select> </label> <label class="ff-row" ng-if="$ctrl.model.centerId !== false && !$ctrl.noCenters && !$ctrl.centers" ng-show="state.getUserCenters().length > 1"> <ff-label flex="0 0 100px"><span translate="REPORTS.OPTIONS.CENTER"></span></ff-label> <dw-select-center ff-model="$ctrl.model.centerId" ff-option-all="{{$ctrl.allCenters !== false}}"></dw-select-center> </label> <label class="ff-row" ng-if="$ctrl.model.centerId !== false && !$ctrl.noCenters && $ctrl.centers" ng-show="state.getUserCenters().length > 1"> <ff-label flex="0 0 100px"><span translate="REPORTS.OPTIONS.CENTER"></span></ff-label> <ff-select ff-model="$ctrl.model.centerId" ff-options="center.id as center.name for center in $ctrl.centers"></ff-select> </label> <label class="ff-row"> <ff-label flex="0 0 100px"><span translate="REPORTS.OPTIONS.SIZE"></span></ff-label> <ff-select ff-model="$ctrl.model.paperSize"> <option ng-repeat="size in $ctrl.optsPaperSize" value="{{size.id}}">{{size.name}}</option> </ff-select> </label> <ff-row> <ff-label flex="0 0 100px"><span translate="REPORTS.OPTIONS.LAYOUT"></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half" role="radiogroup" aria-label="{{\'REPORTS.OPTIONS.LAYOUT\' | translate}}"> <label flex="0 0 auto"> <ff-radio name="paperLayout" ff-model="$ctrl.model.paperLayout" ff-value="\'p\'"> <span translate="REPORTS.OPTIONS.LAYOUT.PORTRAIT"></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio name="paperLayout" ff-model="$ctrl.model.paperLayout" ff-value="\'l\'"> <span translate="REPORTS.OPTIONS.LAYOUT.LANDSCAPE"></span> </ff-radio> </label> </div> </ff-static> </ff-row> </ff-panel> '},LTMe:function(e,t,r){"use strict";var n=r("nbuU"),o=r.n(n),a=(r("Muwe"),r("X5mX"),r("y89P"),r("9HME")),i=angular.module("deskworks.reports.optsPaperSize",[]).factory("optsPaperSize",(function(){return[{id:"letter",name:"Letter"},{id:"A4",name:"A4"},{id:"A3",name:"A3"},{id:"A2",name:"A2"},{id:"A1",name:"A1"},{id:"A0",name:"A0"}]})),l=r("Krgv"),s=r.n(l);t.a=angular.module("deskworks.reportOptions",["deskworks.helper",i.name,a.a.name]).directive("reportOptions",["$compile",function(e){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportOptionsCtrl as $ctrl",bindToController:{model:"<",centers:"<",allCenters:"<",banks:"<",noCenters:"<"},link:function(t,r,n,o,a){a((function(n,o){var a=e(s.a)(t);angular.element(a[0].querySelector?a[0].querySelector(".ff-panel-body"):a).append(n),r.after(a)}))}}}]).controller("ReportOptionsCtrl",["$scope","$location","state","helper","optsPaperSize",function(e,t,r,n,a){var i=this;i.optsPaperSize=a,i.$onInit=function(){!1===i.model.centerId||i.noCenters||(e.$watch((function(){return t.search().centerId}),(function(e){i.model.centerId=e||0===e?+e:r.getCurrentCenterId()})),e.$watch("$ctrl.model.centerId",(function(r){r&&e.vm&&e.vm.config&&e.vm.config.reportOwnerRegion&&(e.vm.config.reportOwnerRegion.ownerId=e.vm.config.reportOwnerRegion.regionId=void 0),t.search("centerId",r).replace()}))),i.banks&&(e.$watch((function(){return t.search().bankId}),(function(e){i.model.bankId=e||0===e?+e:i.banks&&i.banks[0]&&i.banks[0].id})),e.$watch("$ctrl.model.bankId",(function(e){t.search("bankId",e).replace()}))),e.$watch((function(){return t.search().paperSize}),(function(e){var t,r;i.model.paperSize=(o()(t=i.optsPaperSize).call(t,(function(t){return t.id===e}))||o()(r=i.optsPaperSize).call(r,(function(e){return e.id===i.model.paperSize}))||i.optsPaperSize[0]).id})),e.$watch("$ctrl.model.paperSize",(function(e){t.search("paperSize",e).replace()})),e.$watch((function(){return t.search().paperLayout}),(function(e){i.model.paperLayout=e||i.model.paperLayout||"l"})),e.$watch("$ctrl.model.paperLayout",(function(e){t.search("paperLayout",e).replace()}))}}])},Tqzu:function(e,t,r){"use strict";r("Muwe"),r("X5mX"),r("y89P");var n=r("8Xq/");t.a=angular.module("deskworks.reportByPeriodDirective",["deskworks.helper",n.a.name]).directive("reportByPeriod",["$compile","$templateCache",function(e,t){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportByPeriodCtrl as $ctrl",bindToController:{model:"=",opts:"<"},link:function(r,n,o,a,i){i((function(o,a){var i=e(t.get("directives/report-by-period.tpl.html"))(r);angular.element(i[0]&&i[0].querySelector?i[0].querySelector(".ff-panel-body"):i).append(o),n.after(i)}))}}}]).controller("ReportByPeriodCtrl",["$scope","$location","$filter","$translate","state","helper","optsReportByPeriod",function(e,t,r,n,o,a,i){var l=this;l.$onInit=function(){l.optsPeriod=l.opts||i,e.$watch((function(){return t.search().byPeriod}),(function(e){l.model=e||l.model||l.optsPeriod[0].id})),e.$watch("$ctrl.model",(function(e){t.search("byPeriod",e).replace()}))}}])},UDUI:function(e,t,r){"use strict";var n=r("cgBC");r("dbsv");t.a=angular.module("jsPDF",[]).factory("jsPDF",["$window",function(e){return e.jsPDF=n.default,e.jsPDF}])},Vl1O:function(e,t,r){"use strict";t.a=angular.module("deskworks.IncomeByItemReport",["ngResource","datesDeserializer","deskworks.config"]).factory("IncomeByItemReport",["$resource","$filter","datesDeserializer","deskworksConfig",function(e,t,r,n){var o=r(["productCategories.products.date"]),a=e(n.getApiAbsUrl("/centers/:centerId/income-by-item-reports"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,cancellable:!0,transformResponse:[angular.fromJson,o]}}),i=null;return{query:function(e){i&&i.$cancelRequest&&i.$cancelRequest();var r={centerId:e.centerId||0,excludeSecurityDeposits:e.excludeSecurityDeposits};return e.snapshotDate?r.snapshotDate=e.snapshotDate:(r.fromDate=t("date")(e.fromDate,"yyyy-MM-dd"),r.toDate=t("date")(e.toDate,"yyyy-MM-dd")),(i=a.query(r)).$promise.then((function(e){return i=null,e}))}}}])},WgSX:function(e,t,r){"use strict";r("Kh2r");t.a=angular.module("pdfPreview",["deskworks.helper"]).directive("pdfPreview",["$window","helper",function(e,t){return{restrict:"A",scope:!0,template:'<iframe ng-hide="ie" title="{{\'REPORTS.PREVIEW.HEADER\' | translate}}"></iframe><ff-info class="text-danger" ng-if="ie"><ff-icon sense="warning"></ff-icon> Microsoft Edge & Internet Explorer don\'t support live PDF preview. You can download the PDF or use another browser to have live preview, e.g. Chrome/Firefox/Opera/Safari.</ff-info>',compile:function(r,n){return e.cordova&&"android"===e.cordova.platformId&&r.parent().parent().hasClass("ff-panel")?(r.parent().parent().css("display","none"),function(){}):t.isIE()?function(e,t,r){e.ie=!0}:(r.addClass("pdf-preview"),function(t,r,n){var o,a=r.children(),i=angular.element('<div class="ff-dimmer ff-spin"></div>');i.on("click",(function(e){e.stopPropagation()})),a.on("load",(function(){angular.element(i).remove(),r.removeClass("ff-dim")})),t.$watch(n.pdfPreview,(function(t){r.append(i),r.addClass("ff-dim"),o&&(e.URL.revokeObjectURL(o),o=null),t&&(o=e.URL.createObjectURL(t),a[0].src=o)})),t.$on("$destroy",(function(){o&&(e.URL.revokeObjectURL(o),o=null)}))})}}}])},Xjih:function(e,t,r){"use strict";r("8cZI");var n=r("nbuU"),o=r.n(n),a=r("5/DJ");t.a=angular.module("deskworks.reports.reportFooter",[a.a.name]).factory("reportFooter",["$filter","reportStyles",function(e,t){return function(){return 3===arguments.length?n.apply(void 0,arguments):r.apply(void 0,arguments)};function r(e){var r,n=e.config,a=e.doc,i=(e.data,e.resources),l=o()(r=i.centers).call(r,(function(e){return e.id===+n.centerId}));if(l){var s,c=a.internal.pageSize.width,d=a.internal.pageSize.height;a.setFont(a.getFont().fontName,"normal"),a.setTextColor(t.footer.textColor),a.setFontSize(9),s=[l.name,l.phone,l.street1],l.street2&&s.push(l.street2),s.push(l.city),s.push(l.state.name||l.state),s.push(l.zip),s=s.join(" / "),a.text(s,(c-a.getTextWidth(s))/2,d-30)}}function n(e,r,n){var o,a=r.internal.pageSize.width,i=r.internal.pageSize.height;r.setFont(r.getFont().fontName,"normal"),r.setTextColor(t.footer.textColor),r.setFontSize(9),o=[n.center.name,n.center.phone,n.center.street1],n.center.street2&&o.push(n.center.street2),o.push(n.center.city),o.push(n.center.state.name||n.center.state),o.push(n.center.zip),o=o.join(" / "),r.text(o,(a-r.getTextWidth(o))/2,i-30)}}])},aGVL:function(e,t,r){"use strict";t.a=angular.module("chartColors",[]).factory("chartColors",(function(){return["#317da3","#e6194b","#3cb44b","#ffe119","#f58231","#911eb4","#aa6e28","#008080","#808080","#800000","#3244a1","#e64c19","#3db372","#d1ff1a","#f5c131","#b31e81","#a89728","#005580","#806659","#804000"]}))},"bG+q":function(e,t,r){},pl6f:function(e,t,r){"use strict";t.a=angular.module("systemColors",["deskworks.helper"]).factory("systemColors",["$window","helper",function(e,t){var r={},n=angular.element('<div style="display: none"></div>');return n.append('<div class="text-text"></div>'),n.append('<div class="text-brand"></div>'),n.append('<div class="text-brand"></div>'),n.append('<div class="text-danger"></div>'),n.append("<div></div>"),n.append('<div class="sidebar-group-header"></div>'),document.body.appendChild(n[0]),r.text=t.rgb2hex(e.getComputedStyle(n.children()[0]).getPropertyValue("color"))||"#444",r.info=t.rgb2hex(e.getComputedStyle(n.children()[4]).getPropertyValue("color"))||"#4d4e4c",r.primary=t.rgb2hex(e.getComputedStyle(n.children()[5]).getPropertyValue("background-color"))||"#949594",r.warning=t.rgb2hex(e.getComputedStyle(n.children()[3]).getPropertyValue("color"))||"#ff9b00",n.remove(),r}])}}]);