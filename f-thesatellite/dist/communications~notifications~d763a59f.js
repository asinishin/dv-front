(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"/l8F":function(t,e){t.exports='<ff-panel> <ff-panel-header><span> <span translate="SH_CODES.HEADER"></span> <ff-hint><span translate="SH_CODES.HINT"></span></ff-hint> </span></ff-panel-header> <ff-row ng-repeat="code in $ctrl.shortCodes"> <ff-label flex="1 0 140px" ff-bind-html="code.id"></ff-label> <ff-static flex="1 1 350px">{{code._name | translate}}</ff-static> </ff-row> </ff-panel> '},"8/89":function(t,e){t.exports='<ff-panel ngf-drop="$ctrl.attach($files)" ngf-multiple="true" ngf-drag-over-class="dragover"> <ff-panel-header><span translate="ATTACHMENTS.HEADER"></span></ff-panel-header> <ff-row ng-repeat="att in $ctrl.attachments" ff-dim="att.$$spin"> <ff-static name="attachment"><a href="{{att.url || att.$$url}}" target="_blank" rel="noopener">{{att.fileName}}</a></ff-static> <ff-btn sense="delete" size="xs" class="buttons-row" ff-click="$ctrl.detach($index)" flex="none" title="{{\'ATTACHMENTS.BTN_DELETE.HINT\' | translate}}"></ff-btn> </ff-row> <ff-btn-group class="ff-section-buttons"> <ff-btn sense="new" size="sm" ngf-select="$ctrl.attach($files)" ngf-multiple="true"> <span translate="ATTACHMENTS.BTN_ADD"></span> </ff-btn> </ff-btn-group> </ff-panel> '},GPfp:function(t,e,n){"use strict";n("3dw1");var r=n("6RpP"),a=n.n(r),o=n("0zKI"),i=n.n(o),l=n("8/89"),c=n.n(l),s=n("yCd9"),u=n.n(s),d=angular.module("deskworks.getAttachments.service",[]).factory("getAttachments",["$q","$timeout",function(t,e){return function(n){return t.all(u()(n).call(n,(function(n){return t((function(t){var r=new FileReader;r.onload=function(r){return e((function(){return t({fileName:n.name,fileData:r.target.result})}))},r.readAsDataURL(n)}))})))}}]);e.a=angular.module("deskworks.attachments",[d.name]).directive("attachments",(function(){return{template:c.a,restrict:"EAC",scope:!0,controller:"AttachmentsCtrl as $ctrl",bindToController:{attachments:"=",form:"<?",attacher:"<?",detacher:"<?"}}})).controller("AttachmentsCtrl",["$window","dwAlerts","getAttachments",function(t,e,n){var r=this;r.attach=function(o){return n(o).then((function(n){var l;r.attachments=a()(l=r.attachments).call(l,n),r.attacher?n.forEach((function(t,n){t.$$spin=!0,r.attacher(t).then((function(e){t.$$spin=!1,t.id=e.id,t.url=e.url,delete t.fileData})).catch((function(n){var a;return i()(a=r.attachments).call(a,r.attachments.indexOf(t),1),e.error(n,"Failed to attach file.")}))})):(n.forEach((function(e,n){e.$$url=t.URL.createObjectURL(o[n])})),r.form&&r.form.$setDirty())}))},r.detach=function(n){if(r.detacher){var a=r.attachments[n];return r.detacher(a).then((function(){var t;i()(t=r.attachments).call(t,r.attachments.indexOf(a),1)})).catch((function(t){return e.error(t,"Failed to detach file.")}))}var o;t.URL.revokeObjectURL(r.attachments[n].$$url),i()(o=r.attachments).call(o,n,1),r.form&&r.form.$setDirty()},r.$onDestroy=function(){r.attachments.forEach((function(e){return t.URL.revokeObjectURL(e.$$url)}))}}])},NhWh:function(t,e,n){"use strict";n("z6HB");var r=n("/l8F"),a=n.n(r);e.a=angular.module("deskworks.shortCodes",[]).directive("shortCodes",(function(){return{template:a.a,restrict:"EAC",scope:!0,controller:"ShortCodesCtrl as $ctrl",bindToController:{shortCodes:"<"}}})).controller("ShortCodesCtrl",(function(){}))},Vzov:function(t,e,n){},aJ1N:function(t,e,n){"use strict";var r=n("6RpP"),a=n.n(r),o=n("hsT8"),i=n.n(o),l=n("pnvM"),c=n.n(l),s=n("yCd9"),u=n.n(s),d=(n("8cZI"),n("jlzH"),n("9+31"),n("21jw"),n("z3no"),n("ttAN"),n("HJ8U"),n("JqvR"),n("mQgz"),n("IwuQ"),n("WGdK"),n("Lv1b"),n("a8hB")),f=n.n(d);angular.module("ui.tinymce",[]).value("uiTinymceConfig",{}).directive("uiTinymce",["$rootScope","$compile","$timeout","$window","$sce","uiTinymceConfig","uiTinymceService",function(t,e,n,r,a,o,i){return(o=o||{}).baseUrl&&(tinymce.baseURL=o.baseUrl),{require:["ngModel","^?form"],priority:599,link:function(l,c,s,u){if(r.tinymce){var d,h,g=u[0],m=u[1]||null,p={debounce:!0},b=function(e){var n,r=f()(n=e.getContent({format:p.format})).call(n);r=a.trustAsHtml(r),g.$setViewValue(r),t.$$phase||l.$digest()},y=i.getUniqueId();s.$set("id",y),d={},angular.extend(d,l.$eval(s.uiTinymce));var v,$=function(t){n.cancel(v),v=n((function(){return function(t){t.isDirty()&&(t.save(),b(t))}(t)}),400)},x={setup:function(e){e.on("init",(function(){g.$render(),g.$setPristine(),g.$setUntouched(),m&&m.$setPristine()})),e.on("ExecCommand change NodeChange ObjectResized",(function(){if(!p.debounce)return e.save(),void b(e);$(e)})),e.on("blur",(function(){c[0].blur(),g.$setTouched(),t.$$phase||l.$digest()})),e.on("remove",(function(){c.remove()})),o.setup&&o.setup(e,{updateView:b}),d.setup&&d.setup(e,{updateView:b})},format:d.format||"html",selector:"#"+s.id};angular.extend(p,o,d,x),n((function(){p.baseURL&&(tinymce.baseURL=p.baseURL);var t=tinymce.init(p);t&&"function"==typeof t.then?t.then((function(){C(l.$eval(s.ngDisabled))})):C(l.$eval(s.ngDisabled))})),g.$formatters.unshift((function(t){return t?a.trustAsHtml(t):""})),g.$parsers.unshift((function(t){return t?a.getTrustedHtml(t):""})),g.$render=function(){T();var t=g.$viewValue?a.getTrustedHtml(g.$viewValue):"";h&&h.getDoc()&&(h.setContent(t),h.fire("change"))},s.$observe("disabled",C);var w=l.$on("$tinymce:refresh",(function(t,n){var r=s.id;if(angular.isUndefined(n)||n===r){var a=c.parent(),o=c.clone();o.removeAttr("id"),o.removeAttr("style"),o.removeAttr("aria-hidden"),tinymce.execCommand("mceRemoveEditor",!1,r),a.append(e(o)(l)),w()}}));l.$on("$destroy",(function(){T(),h&&(h.remove(),h=null)}))}function C(t){t?(T(),h&&h.getBody().setAttribute("contenteditable",!1)):(T(),h&&!h.mode.isReadOnly()&&h.getDoc()&&h.getBody().setAttribute("contenteditable",!0))}function T(){h||(h=tinymce.get(s.id))}}}}]).service("uiTinymceService",[function(){return new function(){var t=0;return{getUniqueId:function(){return"ui-tinymce-"+ ++t}}}}]);n("Vzov"),e.a=angular.module("ffRichtext",["ui.tinymce"]).directive("ffRichtext",["ffHelper",function(t){return{restrict:"E",scope:!0,controller:"ffRichtextDirectiveCtrl as $rt",bindToController:{placeholders:"<",chargesTable:"<",chargesTableCreated:"=?",font:"@"},compile:function(e,n){var r=angular.element('<textarea ui-tinymce="$rt.tinymceOptions" ng-if="$rt.tinymceOptions"></textarea>');return t.copyInnerAttrs(e,n,r),e.append(r),this.link},link:function(t,e,n){}}}]).controller("ffRichtextDirectiveCtrl",["$scope","$timeout","dwAlerts",function(t,e,n){var r=this;r.$onInit=function(){var t,o,l,s=[r.font?a()(t="@import url('https://fonts.googleapis.com/css2?family=".concat(r.font,":wght@400;700'); body { font-family: ")).call(t,r.font,"; }"):"body { font-family: Helvetica, sans-serif; }","body { font-size: 15px } td { padding: 3px }",".mce-content-body .mce-offscreen-selection { left: -2000000px; max-width: 1000000px; position: absolute; }",".mce-content-body [contentEditable=false][data-mce-selected] { cursor: not-allowed; outline: 1px solid #b4d7ff; }",".mce-content-body .mce-mergetag:hover { background-color: rgba(0, 108, 231, .1); }",".ephox-snooker-resizer-cols { cursor: col-resize; }",".ephox-snooker-resizer-rows { cursor: ns-resize; }",".ephox-snooker-resizer-bar-dragging { outline: 2px solid #00f; outline-offset: -2px; }","a { color: #000 }"].join(" "),d=i()(o=["blocks","bold italic underline strikethrough","alignleft aligncenter alignright alignjustify","bullist numlist outdent indent","link image table","fontsize forecolor backcolor","code",r.chargesTable?"charges":null]).call(o,(function(t){return!!t})).join(" | "),f=i()(l=["lists link image","table autoresize code",r.chargesTable?"charges-table":null]).call(l,(function(t){return!!t})).join(" ");r.tinymceOptions={skin:!1,plugins:f,toolbar:d,toolbar_mode:"wrap",menubar:!1,promotion:!1,readonly:!1,license_key:"gpl",branding:!1,statusbar:!1,autoresize_bottom_margin:5,max_height:800,image_uploadtab:!0,images_upload_url:"test",automatic_uploads:!1,images_file_types:"jpeg,jpg,png",default_font_stack:["Helvetica","serif"],content_css:"",content_style:s,font_size_formats:"8px 10px 12px 14px 15px 16px 18px 20px 24px 36px",table_resize_bars:!0},r.placeholders&&r.placeholders.length&&(r.tinymceOptions.setup=function(t){t.ui.registry.addAutocompleter("placeholders",{trigger:"{{",minChars:0,columns:1,onAction:function(e,n,r){var o;t.selection.setRng(n),t.insertContent(a()(o='<span contentEditable="false" data-mce-cef-wrappable="true" data-mtag="'.concat(r,'" class="mce-mergetag">')).call(o,r,"</span>")),e.hide()},fetch:function(t){return new c.a((function(e){var n;e(u()(n=function(t){var e;return t=t.toLowerCase(),i()(e=r.placeholders).call(e,(function(e){return-1!==e.text.toLowerCase().indexOf(t)}))}(t)).call(n,(function(t){return{type:"autocompleteitem",value:t.value,text:t.text}})))}))}})}),tinymce.PluginManager.add("charges-table",(function(t,o){t.ui.registry.addButton("charges",{text:"Charges",onAction:function(o){var i,l,c,s,u,d,f,h,g,m,p=t.getContent();if((null==p?void 0:p.indexOf("charges-table"))>=0)return n.error("Charges table is already added to the template.");var b=['<table style="border-collapse: collapse; width: 100%; height: 72px; border-width: 1px;" border="1" class="charges-table">',"<tbody>",'<tr style="height: 2rem;"><td>ITEM</td><td>DESCRIPTION</td><td style="text-align: right;">QTY</td><td style="text-align: right;">PRICE</td><td style="text-align: right;">DISCOUNT</td><td style="text-align: right;">TOTAL</td></tr>',"</tbody>",'<tbody class="onetime-block">','<tr style="height: 2rem;"><td colspan="6" style="font-weight: bold; background-color: #ecf0f1;">One-time Charges</td></tr>',a()(i=a()(l=a()(c=a()(s=a()(u='<tr style="height: 2rem;" class="onetime-charge">\n<td>'.concat(y("{{product-name}}"),"</td>\n<td>")).call(u,y("{{product-description}}"),'</td>\n<td style="text-align: right;">')).call(s,y("{{qty}}"),'</td>\n<td style="text-align: right;">')).call(c,y("{{price}}"),'</td>\n<td style="text-align: right;">')).call(l,y("{{discount}}"),'</td>\n<td style="text-align: right;">')).call(i,y("{{total}}"),"</td>\n</tr>"),'<tr style="height: 2rem;" class="onetime-total"><td colspan="6" style="text-align: right; font-weight: bold;">Total One-time Charges: '.concat(y("{{total}}"),"</td></tr>"),"</tbody>",'<tbody class="recurring-block">','<tr style="height: 2rem;"><td colspan="6" style="font-weight: bold; background-color: #ecf0f1;">Recurring Charges</td></tr>',a()(d=a()(f=a()(h=a()(g=a()(m='<tr style="height: 2rem;" class="recurring-charge">\n<td>'.concat(y("{{product-name}}"),"</td>\n<td>")).call(m,y("{{product-description}}"),'</td>\n<td style="text-align: right;">')).call(g,y("{{qty}}"),'</td>\n<td style="text-align: right;">')).call(h,y("{{price}}"),'</td>\n<td style="text-align: right;">')).call(f,y("{{discount}}"),'</td>\n<td style="text-align: right;">')).call(d,y("{{total}}"),"</td>\n</tr>"),'<tr style="height: 2rem;" class="recurring-total"><td colspan="6" style="text-align: right; font-weight: bold;">Total Recurring Charges: '.concat(y("{{total}}"),"</td></tr>"),"</tbody>","</table>"];function y(t){var e;return a()(e='<span contentEditable="false" data-mce-cef-wrappable="true" data-mtag="'.concat(t,'" class="mce-mergetag">')).call(e,t,"</span>")}t.insertContent(b.join("")),e((function(){r.chargesTableCreated=Date.now()}))}})}))}}])},lV2o:function(t,e,n){"use strict";e.a=angular.module("deskworks.taToolbarEmail",[]).factory("taToolbarEmail",(function(){return[["h1","h2","h3","h4","p","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight"],["html","insertImage","insertLink","wordcount","charcount"]]}))},z6HB:function(t,e,n){}}]);