{"version":3,"sources":["webpack:///./bundles/check-in-form sync .*\\.tpl\\.html$","webpack:///./bundles/check-in-form sync \\..+\\/.+\\.js$","webpack:///./bundles/check-in-form/check-in/check-in.controller.js","webpack:///./bundles/check-in-form/check-in/check-in.scss?0409","webpack:///./bundles/check-in-form/check-in/check-in.tpl.html","webpack:///./bundles/check-in-form/check-in/kbw-access-card.directive.js","webpack:///./bundles/check-in-form/index.js"],"names":["angular","module","kbwAccessCardDirective","name","controller","$scope","$q","state","helper","center","checkInService","vm","setPageTitle","auth","checkOut","busy","error","pointFirstInvalid","accessCardNumber","login","password","id","checkIn","then","countdown","catch","err","data","finally","init","$on","$event","stopPropagation","signUpNonMember","setCurrentCenterId","setParam","setPath","signUpMember","directive","$timeout","signature","String","fromCharCode","signCount","cardData","timer","restrict","scope","link","document","addEventListener","listenKbw","removeEventListener","event","which","cancel","isString","$emit","$apply","charAt","length","index","$injector","importAll","r","js","require","loadNewModules","m","default","invoke","$templateCache","ctx","forEach","key","put","replace"],"mappings":"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","file":"check-in-form~._bundles_check-in-form .js?_rev=b2248ec93fa883fb4364","sourcesContent":["var map = {\n\t\"./check-in/check-in.tpl.html\": \"./bundles/check-in-form/check-in/check-in.tpl.html\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/check-in-form sync recursive .*\\\\.tpl\\\\.html$\";","var map = {\n\t\"./check-in/check-in.controller.js\": \"./bundles/check-in-form/check-in/check-in.controller.js\",\n\t\"./check-in/kbw-access-card.directive.js\": \"./bundles/check-in-form/check-in/kbw-access-card.directive.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/check-in-form sync recursive \\\\..+\\\\/.+\\\\.js$\";","import './check-in.scss';\nimport kbwAccessCardDirective from './kbw-access-card.directive';\n\nexport default angular.module('deskworks.checkInForm', [\n  'deskworks.center.service',\n  'deskworks.checkIn.service',\n  kbwAccessCardDirective.name,\n])\n\n  .controller('CheckInFormCtrl', function($scope, $q, state, helper, center, checkInService) {\n    const vm = this;\n\n    state.setPageTitle('Check-In');\n\n    vm.center = center;\n\n    /**\n     * Authenticates (and checks in) user by access card or login/password\n     */\n    vm.auth = function(checkOut) {\n      if (!vm.busy) {\n        delete vm.error;\n\n        if (helper.pointFirstInvalid('#checkIn')) return;\n\n        if (!vm.accessCardNumber && !vm.login && !vm.password) {\n          vm.error = 'Please use access number or login/password';\n          return;\n        }\n\n        vm.busy = true;\n        return (checkOut ? checkInService.checkOut(vm.center.id, vm) : checkInService.checkIn(vm.center.id, vm))\n          .then(() => { vm.countdown = 3; })\n          .catch(err => { vm.error = err.data.error || (checkOut ? 'Failed to check out.' : 'Failed to check in.'); })\n          .finally(() => { vm.busy = false; });\n      }\n    };\n\n    /**\n     * Back to initial Check-In screen after thanks\n     */\n    vm.init = function() {\n      delete vm.accessCardNumber;\n      delete vm.login;\n      delete vm.password;\n      delete vm.error;\n      delete vm.countdown;\n    };\n\n    /**\n     * Listen to access card data from KBW and automatically check in via access card\n     */\n    $scope.$on('kbw::accessCard', function($event, data) {\n      $event.stopPropagation();\n\n      if (!vm.busy) {\n        vm.accessCardNumber = data;\n        delete vm.login;\n        delete vm.password;\n        delete vm.error;\n        delete vm.countdown;\n        vm.auth();\n      }\n    });\n\n    /**\n     * Sign Up Non-Member button handler\n     */\n    vm.signUpNonMember = function() {\n      state.setCurrentCenterId(vm.center.id);\n      state.setParam('origin', '/check-in');\n      return state.setPath('/simple-reservation/centers/' + vm.center.id + '/types');\n    };\n\n    /**\n     * Sign Up as a Member button handler\n     */\n    vm.signUpMember = function() {\n      state.setCurrentCenterId(vm.center.id);\n      state.setParam('origin', '/check-in');\n      return state.setPath('/member-sign-up');\n    };\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div id=\\\"checkIn\\\" ng-if=\\\"!vm.countdown\\\"> <h1 class=\\\"page-title\\\">Welcome to {{vm.center.name}}!</h1> <form name=\\\"formCheckIn\\\" class=\\\"check-in\\\" novalidate ff-dim=\\\"vm.busy\\\"> <div class=\\\"gutter-v\\\"> <ff-board> <ff-panel> <ff-panel> <ff-panel-header> <span ng-if=\\\"!vm.error\\\">Please Check In / Out</span> <span ng-if=\\\"vm.error\\\" ng-bind=\\\"vm.error\\\" class=\\\"text-danger\\\"></span> </ff-panel-header> <ff-row> <label> <ff-label flex=\\\"0 0 120px\\\">Access Number</ff-label> <ff-text name=\\\"accessCardNumber\\\" ff-model=\\\"vm.accessCardNumber\\\"></ff-text> </label> </ff-row> <ff-row> <span flex=\\\"0 0 120px\\\" class=\\\"ff-center\\\" style=\\\"padding-top:.5rem;color:var(--brand-color)\\\">&mdash; or &mdash;</span> </ff-row> <ff-row> <label> <ff-label flex=\\\"0 0 120px\\\">Login</ff-label> <ff-login name=\\\"login\\\" ff-model=\\\"vm.login\\\" ff-required=\\\"vm.password\\\" ff-maxlength=\\\"256\\\" ff-validate-alert=\\\"{{'GLOBAL.LOGIN' | translate}}\\\"></ff-login> </label> </ff-row> <ff-row> <label> <ff-label flex=\\\"0 0 120px\\\">Password</ff-label> <ff-password name=\\\"password\\\" ff-model=\\\"vm.password\\\" ff-required=\\\"vm.login\\\" ff-maxlength=\\\"256\\\" ff-validate-alert=\\\"{{'GLOBAL.PASSWORD' | translate}}\\\"></ff-password> </label> </ff-row> </ff-panel> </ff-panel> </ff-board> <ff-btn-group> <ff-btn type=\\\"submit\\\" sense=\\\"checkIn\\\" ff-click=\\\"vm.auth()\\\">Check In</ff-btn> <ff-btn sense=\\\"checkOut\\\" ff-click=\\\"vm.auth(true)\\\">Check Out</ff-btn> </ff-btn-group> </div> </form> <kbw-access-card></kbw-access-card> </div> <div id=\\\"checkInSuccess\\\" ng-if=\\\"vm.countdown\\\" class=\\\"check-in\\\"> <h1 class=\\\"page-title\\\">Thank You!</h1> <ff-btn-group> <ff-btn sense=\\\"ok\\\" ff-click=\\\"vm.init()\\\" ff-countdown=\\\"vm.countdown\\\">OK</ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","/**\n * kbwAccessCard directive - keyboard wedge listener for Access Card data\n */\nexport default angular.module('deskworks.checkIn.kbwAccessCard', [])\n\n  .directive('kbwAccessCard', function($timeout) {\n    const signature = 'PACS' + String.fromCharCode(186); // ;\n    let signCount = 0;\n    let cardData;\n    let timer;\n\n    return {\n      restrict: 'EAC',\n      scope: true,\n\n      link: ($scope) => {\n        document.addEventListener('keydown', listenKbw);\n        $scope.$on('$destroy', () => { document.removeEventListener('keydown', listenKbw); });\n\n        /**\n         * KBW listener, collects card data between two signatures. Emits kbw::accessCard event.\n         */\n        function listenKbw(event) {\n          if (event.which === 16) return; // skip Shift key\n\n          // Timer for resetting signature recognition\n          $timeout.cancel(timer);\n          timer = $timeout(() => { cardData = null; signCount = 0; }, 1000);\n\n          if (angular.isString(cardData)) {\n            // Collecting card data\n            if (event.which === 13) {\n              $scope.$emit('kbw::accessCard', cardData);\n              $scope.$apply();\n              cardData = null;\n            } else {\n              cardData += String.fromCharCode(event.which);\n            }\n          } else {\n            // Looking for signature\n            if (String.fromCharCode(event.which) === signature.charAt(signCount)) {\n              if (++signCount === signature.length) { // signature complete\n                cardData = '';\n                signCount = 0;\n              }\n            } else {\n              signCount = 0;\n            }\n          }\n        }\n      },\n    };\n  });\n","const index = ['$injector', function index($injector) {\n  // JS\n  const importAll = r => r.keys().map(r);\n  const js = importAll(require.context('./', true, /\\..+\\/.+\\.js$/));\n  $injector.loadNewModules(js.map(m => m.default.name));\n\n  // Templates\n  $injector.invoke(['$templateCache', function($templateCache) {\n    const ctx = require.context('./', true, /.*\\.tpl\\.html$/);\n    ctx.keys().forEach(key => $templateCache.put(key.replace(/^\\.\\//, ''), ctx(key)));\n  }]);\n}];\n\nexport default index;\n"],"sourceRoot":""}