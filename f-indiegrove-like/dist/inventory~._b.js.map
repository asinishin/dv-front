{"version":3,"sources":["webpack:///./bundles/inventory sync .*\\.tpl\\.html$","webpack:///./bundles/inventory sync \\..+\\/.+\\.js$","webpack:///./bundles/inventory/discount-codes/discount-code-edit.controller.js","webpack:///./bundles/inventory/discount-codes/discount-code-edit.tpl.html","webpack:///./bundles/inventory/discount-codes/discount-code.service.js","webpack:///./bundles/inventory/discount-codes/discount-codes.controller.js","webpack:///./bundles/inventory/discount-codes/discount-codes.tpl.html","webpack:///./bundles/inventory/index.js","webpack:///./bundles/inventory/membership-category/membership-category-edit.controller.js","webpack:///./bundles/inventory/membership-category/membership-category-edit.tpl.html","webpack:///./bundles/inventory/membership-category/membership-category-list.controller.js","webpack:///./bundles/inventory/membership-category/membership-category-list.tpl.html","webpack:///./bundles/inventory/price-list/price-list-edit.controller.js","webpack:///./bundles/inventory/price-list/price-list-edit.tpl.html","webpack:///./bundles/inventory/price-list/price-list-list.controller.js","webpack:///./bundles/inventory/price-list/price-list-list.tpl.html","webpack:///./bundles/inventory/product-categories/product-categories.controller.js","webpack:///./bundles/inventory/product-categories/product-categories.tpl.html","webpack:///./bundles/inventory/product/product-edit.controller.js","webpack:///./bundles/inventory/product/product-edit.tpl.html","webpack:///./bundles/inventory/product/product-list.controller.js","webpack:///./bundles/inventory/product/product-list.scss?fbc8","webpack:///./bundles/inventory/product/product-list.tpl.html","webpack:///./bundles/inventory/reservation-category/reservation-category-edit.controller.js","webpack:///./bundles/inventory/reservation-category/reservation-category-edit.tpl.html","webpack:///./bundles/inventory/reservation-category/reservation-category-list.controller.js","webpack:///./bundles/inventory/reservation-category/reservation-category-list.tpl.html","webpack:///./bundles/inventory/reservation-category/reservation-category.scss?b17f","webpack:///./bundles/inventory/reservation-unit/reservation-unit-edit.controller.js","webpack:///./bundles/inventory/reservation-unit/reservation-unit-edit.tpl.html","webpack:///./bundles/inventory/reservation-unit/reservation-unit-list.controller.js","webpack:///./bundles/inventory/reservation-unit/reservation-unit-list.tpl.html","webpack:///./shared/autofocus/autofocus.directive.js","webpack:///./shared/ff-richtext/ff-richtext.directive.js","webpack:///./shared/ff-richtext/ff-richtext.scss?b1d6","webpack:///./shared/printer-usage-free-copies/printer-usage-free-copies.directive.js","webpack:///./shared/printer-usage-free-copies/printer-usage-free-copies.tpl.html"],"names":["angular","module","autofocusDirective","name","DiscountCode","controller","$scope","dwAlerts","helper","close","centerId","code","products","$ctrl","types","getProducts","prodId","p","productIds","id","add","push","form","$setDirty","delete","index","save","pointFirstInvalid","catch","err","error","then","$setPristine","factory","$resource","$timeout","$filter","datesDeserializer","deskworksConfig","desDates","datesSerializer","obj","keys","reduce","res","key","serDates","getApiAbsUrl","query","method","isArray","transformResponse","update","params","pick","$promise","data","result","dwModal","DiscountCodeEditCtrl","$translate","state","productService","setPageTitle","instant","codes","getCurrentCenterId","offset","limit","onInit","fetch","type","new","duration","startDate","moment","startOf","endDate","edit","unshift","sortCodes","copy","show","scope","template","discountCodeEditTpl","inputs","modal","extend","indexOf","eof","fetching","finally","length","today","endOf","active","isSameOrBefore","expired","isAfter","firstExpiredIdx","$injector","importAll","r","js","require","loadNewModules","m","default","invoke","$templateCache","ctx","forEach","put","replace","$route","keese","membershipCategories","membershipCategoryService","vm","category","current","membershipCategoryId","note","promise","order","generate","create","setPath","remove","confirm","back","dnd","onDrop","srcList","srcIndex","targetList","targetIndex","item","move","$spin","$rootScope","priceList","priceListService","optsProductType","useForOptions","useFor","productTypes","productType","options","product","console","warn","productId","price","isDefined","reservationCredit","passQty","deletePricelist","visibleForVisitors","isArchived","createPricelist","updatePricelist","date","addProduct","last","document","querySelector","focus","saveProduct","isCreditable","hasPasses","createProduct","updateProduct","removeProduct","deleteProduct","$watch","nv","ov","dwSelectCenterDirective","priceLists","centers","lazyLoadReports","dstCenterId","pl","include","editAfterCloning","printCollapsed","clone","cloning","clonePricelist","setCurrentCenterId","reload","togglePrint","$on","debounce","categories","ProductCategory","$invalid","$$spin","$q","$window","settings","optsPassMin","optsPassMax","optsCountCheckInsPer","productCategories","cat","fullName","join","passMinUnit","minPassInPercent","opt","passProducts","passProduct","passProductId","isNew","all","when","saveQuickBooks","saveDoorflow","saveDeskworksSweep","noop","addPriceList","uid","priceListsId","savePriceList","priceListId","isUid","createPriceList","updatePriceList","removePriceList","deletePriceList","getMemberSignUpUrl","origin","window","location","reservationCategories","optsBillingFrequency","collapsed","customProducts","membershipTypeId","c","membershipCategoryName","passProductName","reservationTypeId","reservationCategoryName","billingFrequency","o","custom","ffRichtextDirective","reservationCategory","reservationCategoryService","hours","cancellation","notice","hint","model","cancellationNonMemberNoticeHours","cancellationMemberNoticeHours","photos","photoPlaceholderIdx","description","uploadPhoto","$files","$invalidFiles","photo","updatePhoto","spin","createPhoto","spinAddPhoto","url","removePhoto","deletePhoto","idx","reservationType","reservationRulesDirective","ReservationUnit","unit","areaUnit","dwLocales","i","currentLocale","area","saveReservationUnit","capacity","expectedUsePerMonth","removeReservationUnit","spinUpload","thumbnail","Date","now","calSyncChange","syncWithCalendar","calendarId","calendarIdEnabled","reservationUnits","optsWhoCanReserve","whoCanReserve","reservationUnit","directive","restrict","link","$element","$attrs","autofocus","input","parentNode","ffHelper","compile","tElement","tAttrs","element","copyInnerAttrs","append","content","editMode","isUndefined","toggleClass","attr","bindToController","printerUsageTypeNames","$onInit","typeNames"],"mappings":"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","file":"inventory~._b.js?_rev=e57e497f074729f51626","sourcesContent":["var map = {\n\t\"./discount-codes/discount-code-edit.tpl.html\": \"./bundles/inventory/discount-codes/discount-code-edit.tpl.html\",\n\t\"./discount-codes/discount-codes.tpl.html\": \"./bundles/inventory/discount-codes/discount-codes.tpl.html\",\n\t\"./membership-category/membership-category-edit.tpl.html\": \"./bundles/inventory/membership-category/membership-category-edit.tpl.html\",\n\t\"./membership-category/membership-category-list.tpl.html\": \"./bundles/inventory/membership-category/membership-category-list.tpl.html\",\n\t\"./price-list/price-list-edit.tpl.html\": \"./bundles/inventory/price-list/price-list-edit.tpl.html\",\n\t\"./price-list/price-list-list.tpl.html\": \"./bundles/inventory/price-list/price-list-list.tpl.html\",\n\t\"./product-categories/product-categories.tpl.html\": \"./bundles/inventory/product-categories/product-categories.tpl.html\",\n\t\"./product/product-edit.tpl.html\": \"./bundles/inventory/product/product-edit.tpl.html\",\n\t\"./product/product-list.tpl.html\": \"./bundles/inventory/product/product-list.tpl.html\",\n\t\"./reservation-category/reservation-category-edit.tpl.html\": \"./bundles/inventory/reservation-category/reservation-category-edit.tpl.html\",\n\t\"./reservation-category/reservation-category-list.tpl.html\": \"./bundles/inventory/reservation-category/reservation-category-list.tpl.html\",\n\t\"./reservation-unit/reservation-unit-edit.tpl.html\": \"./bundles/inventory/reservation-unit/reservation-unit-edit.tpl.html\",\n\t\"./reservation-unit/reservation-unit-list.tpl.html\": \"./bundles/inventory/reservation-unit/reservation-unit-list.tpl.html\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/inventory sync recursive .*\\\\.tpl\\\\.html$\";","var map = {\n\t\"./discount-codes/discount-code-edit.controller.js\": \"./bundles/inventory/discount-codes/discount-code-edit.controller.js\",\n\t\"./discount-codes/discount-code.service.js\": \"./bundles/inventory/discount-codes/discount-code.service.js\",\n\t\"./discount-codes/discount-codes.controller.js\": \"./bundles/inventory/discount-codes/discount-codes.controller.js\",\n\t\"./membership-category/membership-category-edit.controller.js\": \"./bundles/inventory/membership-category/membership-category-edit.controller.js\",\n\t\"./membership-category/membership-category-list.controller.js\": \"./bundles/inventory/membership-category/membership-category-list.controller.js\",\n\t\"./price-list/price-list-edit.controller.js\": \"./bundles/inventory/price-list/price-list-edit.controller.js\",\n\t\"./price-list/price-list-list.controller.js\": \"./bundles/inventory/price-list/price-list-list.controller.js\",\n\t\"./product-categories/product-categories.controller.js\": \"./bundles/inventory/product-categories/product-categories.controller.js\",\n\t\"./product/product-edit.controller.js\": \"./bundles/inventory/product/product-edit.controller.js\",\n\t\"./product/product-list.controller.js\": \"./bundles/inventory/product/product-list.controller.js\",\n\t\"./reservation-category/reservation-category-edit.controller.js\": \"./bundles/inventory/reservation-category/reservation-category-edit.controller.js\",\n\t\"./reservation-category/reservation-category-list.controller.js\": \"./bundles/inventory/reservation-category/reservation-category-list.controller.js\",\n\t\"./reservation-unit/reservation-unit-edit.controller.js\": \"./bundles/inventory/reservation-unit/reservation-unit-edit.controller.js\",\n\t\"./reservation-unit/reservation-unit-list.controller.js\": \"./bundles/inventory/reservation-unit/reservation-unit-list.controller.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/inventory sync recursive \\\\..+\\\\/.+\\\\.js$\";","import autofocusDirective from 'shared/autofocus/autofocus.directive';\nimport DiscountCode from './discount-code.service';\n\nexport default angular.module('DiscountCodeEditCtrl', [\n  autofocusDirective.name,\n  DiscountCode.name,\n])\n\n  .controller('DiscountCodeEditCtrl', function($scope, dwAlerts, helper, close, centerId, code, products, DiscountCode) {\n    const $ctrl = this;\n\n    $scope.close = close;\n    $ctrl.code = code;\n    $ctrl.products = products;\n    $ctrl.types = ['$', '%'];\n\n    $ctrl.getProducts = (prodId) => $ctrl.products.filter(p => !$ctrl.code.productIds.find(id => id === p.id && id !== prodId));\n\n    /**\n     * Add product\n     */\n    $ctrl.add = () => {\n      $ctrl.code.productIds.push(null);\n      $scope.form.$setDirty();\n    };\n\n    /**\n     * Delete product\n     */\n    $ctrl.delete = (index) => {\n      $ctrl.code.productIds.splice(index, 1);\n      $scope.form.$setDirty();\n    };\n\n    /**\n     * Save discount code\n     */\n    $ctrl.save = () => {\n      if (helper.pointFirstInvalid('#discountCodeEdit')) return;\n\n      return DiscountCode.save($ctrl.code, centerId)\n        .catch(err => dwAlerts.error(err, 'Failed to save discount code.'))\n        .then(() => $scope.form.$setPristine())\n        .then(() => close(true));\n    };\n  });\n","// Module\nvar code = \"<div class=\\\"dw-modal\\\"> <div class=\\\"dw-modal-fade\\\" ng-click=\\\"close()\\\"></div> <form name=\\\"form\\\" class=\\\"dw-modal-dialog\\\" novalidate id=\\\"discountCodeEdit\\\" style=\\\"max-width:500px\\\"> <div class=\\\"ff-grid\\\"> <ff-header><span translate=\\\"DISCOUNT_CODES.EDIT.PAGE_TITLE\\\"></span></ff-header> <label flex=\\\"{sm: '1 0 50%'}\\\" class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"DISCOUNT_CODES.CODE\\\"></req></ff-label> <ff-text name=\\\"code\\\" ff-model=\\\"$ctrl.code.code\\\" autofocus ff-required=\\\"true\\\" ff-validate-alert=\\\"{{ 'DISCOUNT_CODES.CODE' | translate }}\\\"></ff-text> </label> <label flex=\\\"{sm: '0 0 100px'}\\\" class=\\\"ff-row\\\"> <ff-label flex=\\\"{xs: '0 0 90px', sm: '0 0 50px'}\\\"><span translate=\\\"DISCOUNT_CODES.TYPE\\\"></span></ff-label> <ff-select name=\\\"type\\\" ff-model=\\\"$ctrl.code.type\\\" ff-options=\\\"opt for opt in $ctrl.types\\\"></ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"DISCOUNT_CODES.DESCRIPTION\\\"></req></ff-label> <ff-text name=\\\"description\\\" ff-model=\\\"$ctrl.code.description\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{ 'DISCOUNT_CODES.DESCRIPTION' | translate }}\\\"></ff-text> </label> <label flex=\\\"{sm: '1 0 50%'}\\\" class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"> <span> <req translate=\\\"DISCOUNT_CODES.AMOUNT\\\"></req> <ff-hint><span translate=\\\"DISCOUNT_CODES.AMOUNT.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-price flex=\\\"0 0 50px\\\" name=\\\"amount\\\" ff-model=\\\"$ctrl.code.amount\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{ 'DISCOUNT_CODES.AMOUNT' | translate }}\\\"></ff-price> <ff-static></ff-static> </label> <label flex=\\\"{sm: '1 0 50%'}\\\" class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"> <span> <req translate=\\\"DISCOUNT_CODES.DURATION\\\"></req> <ff-hint><span translate=\\\"DISCOUNT_CODES.DURATION.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-number flex=\\\"0 0 50px\\\" name=\\\"duration\\\" ff-model=\\\"$ctrl.code.duration\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{ 'DISCOUNT_CODES.DURATION' | translate }}\\\"></ff-number> <ff-static></ff-static> </label> <label flex=\\\"{sm: '1 0 50%'}\\\" class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"> <span> <req translate=\\\"DISCOUNT_CODES.START_DATE\\\"></req> <ff-hint><span translate=\\\"DISCOUNT_CODES.START_DATE.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-date name=\\\"startDate\\\" ff-model=\\\"$ctrl.code.startDate\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{ 'DISCOUNT_CODES.START_DATE' | translate }}\\\"></ff-date> </label> <label flex=\\\"{sm: '1 0 50%'}\\\" class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"DISCOUNT_CODES.END_DATE\\\"></req></ff-label> <ff-date name=\\\"endDate\\\" ff-model=\\\"$ctrl.code.endDate\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{ 'DISCOUNT_CODES.END_DATE' | translate }}\\\"></ff-date> </label> <ff-row> <ff-label flex=\\\"0 0 100px\\\"><span translate=\\\"DISCOUNT_CODES.APPLY_TO\\\"></span></ff-label> <ff-static> <span ng-if=\\\"!$ctrl.code.productIds.length\\\" translate=\\\"DISCOUNT_CODES.ALL_MEMBERSHIPS\\\"></span> <span ng-if=\\\"$ctrl.code.productIds.length\\\" translate=\\\"DISCOUNT_CODES.SELECTED_MEMBERSHIPS\\\"></span> </ff-static> <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row\\\"> <ff-btn sense=\\\"new\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.add()\\\" title=\\\"{{'GLOBAL.BTN_NEW' | translate}}\\\"></ff-btn> </ff-btn-group> </ff-row> <ff-row ng-if=\\\"$ctrl.code.productIds.length\\\"> <ff-static flex=\\\"0 0 100px\\\"></ff-static> <ff-col> <ff-row ng-repeat=\\\"prodId in $ctrl.code.productIds track by $index\\\"> <ff-select ff-model=\\\"$ctrl.code.productIds[$index]\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'DISCOUNT_CODES.MEMBERSHIP' | translate}}\\\" ff-options=\\\"p.id as p.name for p in $ctrl.getProducts(prodId)\\\"></ff-select> <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row\\\"> <ff-btn sense=\\\"delete\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.delete($index)\\\" title=\\\"{{'GLOBAL.BTN_DELETE' | translate}}\\\"></ff-btn> </ff-btn-group> </ff-row> </ff-col> </ff-row> <ff-btn-group class=\\\"ff-tmargin\\\"> <ff-btn sense=\\\"cancel\\\" ff-click=\\\"close(false)\\\"><span translate=\\\"GLOBAL.BTN_CANCEL\\\"></span></ff-btn> <ff-btn type=\\\"submit\\\" sense=\\\"ok\\\" ff-click=\\\"$ctrl.save()\\\" ff-disabled=\\\"form.$pristine\\\"><span translate=\\\"GLOBAL.BTN_SAVE\\\"></span></ff-btn> </ff-btn-group> </div> </form> </div> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.DiscountCode', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config',\n  'deskworks.helper',\n])\n\n  .factory('DiscountCode', function($resource, $timeout, $filter, datesDeserializer, deskworksConfig, helper) {\n    const desDates = datesDeserializer(['startDate', 'endDate']);\n    const datesSerializer = (obj, keys) => keys.reduce((res, key) => (res[key] = $filter('date')(obj[key], 'yyyy-MM-dd'), res), {});\n    const serDates = obj => datesSerializer(obj, ['startDate', 'endDate']);\n\n    const res = $resource(deskworksConfig.getApiAbsUrl('/discount-codes/:id'), {}, {\n      query: { method: 'GET', isArray: true, transformResponse: [desDates] },\n      update: { method: 'PUT' },\n    });\n\n    return {\n      /**\n       * @param params.centerId\n       * @param params.offset\n       * @param params.limit\n       */\n      query: params => res.query(helper.pick(params, ['centerId', 'offset', 'limit'])).$promise,\n\n      save: (code, centerId) => {\n        const data = { ...code, ...serDates(code, serDates(code)) };\n        if (data.id) return res.update({ id: data.id }, data).$promise;\n        return res.save({ centerId }, data).$promise\n          .then(result => { code.id = result.id; });\n      },\n\n      delete: (id) => {\n        return res.delete({ id }).$promise;\n      }\n    };\n  });\n","import dwModal from 'shared/dw-modal/dw-modal.service';\nimport DiscountCode from './discount-code.service';\nimport DiscountCodeEditCtrl from './discount-code-edit.controller';\nimport discountCodeEditTpl from './discount-code-edit.tpl.html';\n\nexport default angular.module('deskworks.DiscountCodesCtrl', [\n  dwModal.name,\n  DiscountCode.name,\n  DiscountCodeEditCtrl.name,\n  'deskworks.inventory.product.service',\n])\n\n  .controller('DiscountCodesCtrl', function($scope, $translate, state, dwModal, dwAlerts, DiscountCode,\n                                            productService) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('DISCOUNT_CODES.PAGE_TITLE'));\n\n    $ctrl.codes = [];\n\n    $ctrl.params = {\n      centerId: state.getCurrentCenterId(),\n      offset: 0,\n      limit: 50,\n    };\n\n    /**\n     * onInit\n     */\n    $ctrl.onInit = () => {\n      $ctrl.fetch();\n      productService.getProducts()\n        .catch(err => dwAlerts.error(err, 'Failed to query products.'))\n        .then(products => {\n          $ctrl.products = products.filter(p => p.type === 'membership');\n        })\n    };\n\n    /**\n     * New discount code\n     */\n    $ctrl.new = () => {\n      const code = {\n        type: '$',\n        duration: 1,\n        startDate: moment().startOf('date'),\n        endDate: moment().startOf('date').add(1, 'month'),\n        productIds: [],\n      };\n\n      return $ctrl.edit(code)\n        .then(result => {\n          if (result) $ctrl.codes.unshift(code);\n          sortCodes();\n        });\n    };\n\n    /**\n     * Edit discount code\n     * @param code\n     */\n    $ctrl.edit = code => {\n      const copy = { ...code };\n\n      return dwModal.show({\n        scope: $scope,\n        template: discountCodeEditTpl,\n        controller: 'DiscountCodeEditCtrl as $ctrl',\n        inputs: { centerId: $ctrl.params.centerId, code: copy, products: $ctrl.products },\n      })\n        .then(modal => modal.close)\n        .then(result => {\n          if (result) {\n            angular.extend(code, copy);\n            sortCodes();\n          }\n          return result;\n        });\n    };\n\n    /**\n     * Delete discount code\n     * @param code\n     */\n    $ctrl.delete = code => DiscountCode.delete(code.id)\n      .catch(err => dwAlerts.error(err, 'Failed to delete discount code.'))\n      .then(() => $ctrl.codes.splice($ctrl.codes.indexOf(code), 1));\n\n    /**\n     * Fetch discount codes\n     */\n    $ctrl.fetch = () => {\n      if ($ctrl.eof || $ctrl.fetching) return $ctrl.fetching;\n\n      $ctrl.fetching = DiscountCode.query($ctrl.params)\n        .catch(err => dwAlerts.error(err, 'Failed to query discount codes.'))\n        .finally(() => { $ctrl.fetching = null; })\n        .then(codes => {\n          $ctrl.codes = $ctrl.codes.concat(codes);\n          sortCodes();\n          $ctrl.params.offset = $ctrl.codes.length;\n          $ctrl.eof = codes.length < $ctrl.params.limit;\n        });\n\n      return $ctrl.fetching;\n    };\n\n    /**\n     * Bubble up active codes\n     */\n    function sortCodes() {\n      const today = moment().endOf('day');\n      const active = $ctrl.codes.filter(code => today.isSameOrBefore(code.endDate));\n      const expired = $ctrl.codes.filter(code => today.isAfter(code.endDate));\n\n      $ctrl.codes = active.concat(expired);\n      $ctrl.firstExpiredIdx = active.length;\n    }\n\n    $ctrl.onInit();\n  });\n","// Module\nvar code = \"<div id=\\\"discountCodes\\\" ff-bulk-read-only> <h4 class=\\\"page-title\\\" ng-bind=\\\"state.getPageTitle()\\\"></h4> <div class=\\\"gutter-v\\\" style=\\\"max-width:1024px\\\"> <ff-panel> <ff-header ng-if=\\\"$ctrl.codes.length && $ctrl.firstExpiredIdx > 0\\\"> <ff-row> <cell flex=\\\"2 1 80px\\\"><span translate=\\\"DISCOUNT_CODES.ACTIVE_CODES\\\"></span></cell> <cell flex=\\\"2 1 100px\\\" class=\\\"show-sm\\\"><span translate=\\\"DISCOUNT_CODES.DESCRIPTION\\\"></span></cell> <cell flex=\\\"0 1 80px\\\" class=\\\"ff-right\\\"><span translate=\\\"DISCOUNT_CODES.AMOUNT\\\"></span></cell> <cell flex=\\\"0 1 75px\\\" class=\\\"ff-center\\\"><span translate=\\\"DISCOUNT_CODES.DURATION\\\"></span></cell> <cell flex=\\\"0 1 120px\\\" class=\\\"ff-right show-md\\\"><span translate=\\\"DISCOUNT_CODES.START_DATE\\\"></span></cell> <cell flex=\\\"0 1 120px\\\" class=\\\"ff-right show-md\\\"><span translate=\\\"DISCOUNT_CODES.END_DATE\\\"></span></cell> <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row zero-height\\\"> <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\"></ff-btn> <ff-btn sense=\\\"delete\\\" size=\\\"xs\\\"></ff-btn> </ff-btn-group> </ff-row> </ff-header> <ff-col infinite-scroll=\\\"$ctrl.fetch()\\\" infinite-scroll-distance=\\\"2\\\" infinite-scroll-container=\\\"'.snap-content-scroller'\\\"> <ff-header ng-repeat-start=\\\"code in $ctrl.codes\\\" ng-if=\\\"$index === $ctrl.firstExpiredIdx\\\" style=\\\"margin-top:.5rem\\\"> <ff-row> <cell flex=\\\"2 1 80px\\\"><span translate=\\\"DISCOUNT_CODES.EXPIRED_CODES\\\"></span></cell> <cell flex=\\\"2 1 100px\\\" class=\\\"show-sm\\\"><span translate=\\\"DISCOUNT_CODES.DESCRIPTION\\\"></span></cell> <cell flex=\\\"0 1 80px\\\" class=\\\"ff-right\\\"><span translate=\\\"DISCOUNT_CODES.AMOUNT\\\"></span></cell> <cell flex=\\\"0 1 75px\\\" class=\\\"ff-center\\\"><span translate=\\\"DISCOUNT_CODES.DURATION\\\"></span></cell> <cell flex=\\\"0 1 120px\\\" class=\\\"ff-right show-md\\\"><span translate=\\\"DISCOUNT_CODES.START_DATE\\\"></span></cell> <cell flex=\\\"0 1 120px\\\" class=\\\"ff-right show-md\\\"><span translate=\\\"DISCOUNT_CODES.END_DATE\\\"></span></cell> <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row zero-height\\\"> <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\"></ff-btn> <ff-btn sense=\\\"delete\\\" size=\\\"xs\\\"></ff-btn> </ff-btn-group> </ff-row> </ff-header> <ff-row ng-repeat-end> <ff-static flex=\\\"2 1 80px\\\">{{code.code}}</ff-static> <ff-static flex=\\\"2 1 100px\\\" class=\\\"show-sm\\\">{{code.description}}</ff-static> <ff-static flex=\\\"0 1 80px\\\" class=\\\"ff-right\\\">{{code.type === '%' ? code.amount + '%' : code.amount | ncurrency}}</ff-static> <ff-static flex=\\\"0 1 75px\\\" class=\\\"ff-center\\\">{{code.duration}}</ff-static> <ff-static flex=\\\"0 1 120px\\\" class=\\\"ff-right show-md\\\">{{code.startDate | date: 'mediumDate'}}</ff-static> <ff-static flex=\\\"0 1 120px\\\" class=\\\"ff-right show-md\\\">{{code.endDate | date: 'mediumDate'}}</ff-static> <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row\\\"> <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.edit(code)\\\" title=\\\"{{'GLOBAL.BTN_EDIT' | translate}}\\\"></ff-btn> <ff-btn sense=\\\"delete\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.delete(code)\\\" title=\\\"{{'GLOBAL.BTN_DELETE' | translate}}\\\"></ff-btn> </ff-btn-group> </ff-row> <div class=\\\"ff-spin ff-spin-placeholder\\\" ng-if=\\\"$ctrl.fetching\\\"></div> </ff-col> <ff-row ng-if=\\\"!$ctrl.codes.length && !$ctrl.fetching\\\" class=\\\"ff-no-frame\\\"> <ff-label>{{'GLOBAL.NONE' | translate}}</ff-label> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"new\\\" ff-click=\\\"$ctrl.new()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> </div> </div> \";\n// Exports\nmodule.exports = code;","const index = ['$injector', function index($injector) {\n  // JS\n  const importAll = r => r.keys().map(r);\n  const js = importAll(require.context('./', true, /\\..+\\/.+\\.js$/));\n  $injector.loadNewModules(js.map(m => m.default.name));\n\n  // Templates\n  $injector.invoke(['$templateCache', function($templateCache) {\n    const ctx = require.context('./', true, /.*\\.tpl\\.html$/);\n    ctx.keys().forEach(key => $templateCache.put(key.replace(/^\\.\\//, ''), ctx(key)));\n  }]);\n}];\n\nexport default index;\n","export default angular.module('deskworks.inventory.membershipCategory.edit', [\n  'keese',\n  'deskworks.inventory.membershipCategory.service',\n])\n\n  .controller('MembershipCategoryEditCtrl', function($scope, $route, $translate, dwAlerts, keese, state, helper,\n                                                     membershipCategories, membershipCategoryService) {\n    const vm = this;\n\n    vm.category = helper.find(membershipCategories, $route.current.params.membershipCategoryId) || {};\n    if ($route.current.params.membershipCategoryId === 'new') vm.category.id = 'new';\n\n    state.setPageTitle($translate.instant(\n      vm.category.id === 'new' ? 'MEMBERSHIP_CATEGORIES.NEW.PAGE_TITLE' : 'MEMBERSHIP_CATEGORIES.EDIT.PAGE_TITLE'\n    ));\n\n    /**\n     * Save membership category handler\n     */\n    vm.save = form => {\n      if (helper.pointFirstInvalid('#membershipCategory')) return;\n\n      const data = {\n        name: vm.category.name,\n        note: vm.category.note,\n      };\n\n      let promise;\n      if (vm.category.id === 'new') {\n        data.order = keese.generate(membershipCategories[membershipCategories.length - 1] && membershipCategories[membershipCategories.length - 1].order);\n        promise = membershipCategoryService.create(data);\n      } else {\n        promise = membershipCategoryService.update(vm.category.id, data);\n      }\n\n      return promise\n        .catch(err => dwAlerts.error(err, 'Failed to save membership category.'))\n        .then(result => {\n          form.$setPristine(true);\n          if (vm.category.id === 'new') {\n            return state.setPath('/membership-types/' + result.id);\n          }\n        });\n    };\n\n    /**\n     * Remove membership category handler\n     */\n    vm.remove = () => {\n      if (confirm($translate.instant('MEMBERSHIP_CATEGORIES.CONFIRM_DELETE'))) {\n        return membershipCategoryService.delete(vm.category.id)\n          .catch(err => dwAlerts.error(err, 'Failed to remove membership category.'))\n          .then(() => state.setPath('/membership-types'))\n      }\n    };\n\n    /**\n     * Back button handler\n     */\n    vm.back = () => state.setPath('/membership-types');\n  });\n","// Module\nvar code = \"<form name=\\\"formMembershipCategory\\\" id=\\\"membershipCategory\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel style=\\\"max-width:600px\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 62px\\\"><req translate=\\\"MEMBERSHIP_CATEGORIES.NAME\\\"></req></ff-label> <ff-text name=\\\"name\\\" ff-model=\\\"vm.category.name\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'MEMBERSHIP_CATEGORIES.NAME' | translate}}\\\"></ff-text> </label> <ff-row> <ff-textarea name=\\\"description\\\" ff-model=\\\"vm.category.note\\\" placeholder=\\\"{{'MEMBERSHIP_CATEGORIES.NAME' | translate}}\\\"></ff-textarea> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"save\\\" type=\\\"submit\\\" ff-click=\\\"vm.save(formMembershipCategory)\\\" ff-disabled=\\\"formMembershipCategory.$pristine\\\"> <span translate=\\\"GLOBAL.BTN_SAVE\\\"></span> </ff-btn> <ff-btn sense=\\\"remove\\\" ng-if=\\\"vm.category.id !== 'new'\\\" ff-click=\\\"vm.remove()\\\"> <span translate=\\\"GLOBAL.BTN_DELETE\\\"></span> </ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> </form> \";\n// Exports\nmodule.exports = code;","import dnd from 'shared/drag-n-drop/dnd.service';\n\nexport default angular.module('deskworks.inventory.membershipCategory.list', [\n  'deskworks.inventory.membershipCategory.service',\n  dnd.name,\n])\n\n  .controller('MembershipCategoryListCtrl', function($scope, $translate, state, dnd, helper, dwAlerts,\n                                                     membershipCategories, membershipCategoryService) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('MEMBERSHIP_CATEGORIES.PAGE_TITLE'));\n\n    vm.membershipCategories = membershipCategories;\n\n    /**\n     * Edit Membership Category handler\n     */\n    vm.edit = category => state.setPath('/membership-types/' + category.id);\n\n    /**\n     * New Membership Category handler\n     */\n    vm.new = () => state.setPath('/membership-types/new');\n\n    /**\n     * Drop handler\n     */\n    vm.onDrop = (srcList, srcIndex, targetList, targetIndex) => {\n      const item = dnd.move(srcList, srcIndex, targetList, targetIndex);\n\n      item.$spin = true;\n      membershipCategoryService.update(item.id, { order: item.order, })\n        .catch(err => dwAlerts.error(err, 'Failed to reorder membership category.'))\n        .finally(() => delete item.$spin);\n\n      return true; // true is required by dnd-callback of dnd-list\n    };\n  });\n","// Module\nvar code = \"<div class=\\\"membership-categories\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel style=\\\"max-width:600px\\\"> <ff-header> <ff-row> <cell><span translate=\\\"MEMBERSHIP_CATEGORIES.LIST.HEADER\\\"></span></cell> <ff-hint flex=\\\"none\\\" ng-if=\\\"ffBlock.editMode\\\"><span translate=\\\"MEMBERSHIP_CATEGORIES.LIST.HINT\\\"></span></ff-hint> </ff-row> </ff-header> <span ng-if=\\\"!vm.membershipCategories.length\\\" translate=\\\"MEMBERSHIP_CATEGORIES.LIST.EMPTY\\\"></span> <div ng-if=\\\"ffBlock.editMode\\\" dnd-list dnd-drop=\\\"callback({ targetList: vm.membershipCategories, targetIndex: index })\\\"> <ff-row ng-repeat=\\\"category in vm.membershipCategories\\\" dnd-draggable=\\\"null\\\" ff-dim=\\\"category.$spin\\\" dnd-callback=\\\"vm.onDrop(vm.membershipCategories, $index, targetList, targetIndex)\\\" ng-include=\\\"'membershipCategoryTpl'\\\"> </ff-row> </div> <div ng-if=\\\"!ffBlock.editMode\\\"> <ff-row ng-repeat=\\\"category in vm.membershipCategories\\\" ng-include=\\\"'membershipCategoryTpl'\\\"></ff-row> </div> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"new\\\" ff-click=\\\"vm.new()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> </div> </div> <script type=\\\"text/ng-template\\\" id=\\\"membershipCategoryTpl\\\"> <ff-static ff-bind=\\\"category.name\\\"></ff-static>\\n\\n  <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row\\\">\\n    <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" ff-click=\\\"vm.edit(category)\\\"><span translate=\\\"GLOBAL.BTN_EDIT\\\"></span></ff-btn>\\n  </ff-btn-group> </script> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.inventory.priceList.edit', [\n  'deskworks.inventory.priceList.service',\n])\n\n  .controller('PriceListEditCtrl', function($scope, $rootScope, $filter, $timeout, $translate, dwAlerts, state, helper,\n                                            priceList, priceListService, optsProductType) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant(\n      priceList.id === 'new' ? 'PRICE_LISTS.NEW.PAGE_TITLE' : 'PRICE_LISTS.EDIT.PAGE_TITLE'\n    ));\n\n    vm.priceList = priceList;\n\n    vm.useForOptions = [\n      { id: 'members', name: $translate.instant('PRICE_LISTS.USE_FOR.MEMBERS') },\n      { id: 'nonMembers', name: $translate.instant('PRICE_LISTS.USE_FOR.NON_MEMBERS') },\n      { id: 'none', name: $translate.instant('PRICE_LISTS.USE_FOR.NONE') },\n    ];\n\n    vm.priceList.useFor = helper.find(vm.useForOptions, vm.priceList.useFor);\n\n    // Need to deep-clone productTypes as we are going to modify it\n    vm.productTypes = angular.copy(optsProductType);\n    vm.productTypes.forEach(productType => {\n      productType.products = [];\n      productType.options = [];\n    });\n\n    vm.priceList.options.products.forEach(product => {\n      const type = helper.find(vm.productTypes, product.type);\n      if (type) type.options.push(product);\n      else console.warn('Product option of unknown type:', product);\n    });\n\n    // Transform product.productId to product.product reference to options.products elements, sort products by types\n    vm.priceList.products.forEach(product => {\n      product.product = helper.find(vm.priceList.options.products, product.productId);\n      product.price = $filter('price')(product.price);\n      if (angular.isDefined(product.reservationCredit)) {\n        product.reservationCredit = $filter('price')(product.reservationCredit);\n      }\n      if (product.passQty === null) {\n        product.passQty = 0;\n      }\n\n      const type = helper.find(vm.productTypes, product.product.type);\n      if (type) type.products.push(product);\n      else console.warn('Product of unknown type:', product);\n    });\n\n    /**\n     * Remove price list handler\n     */\n    vm.remove = () => {\n      if (confirm($translate.instant('PRICE_LISTS.CONFIRM_DELETE'))) {\n        return priceListService.deletePricelist(state.getCurrentCenterId(), vm.priceList.id)\n          .then(() => state.setPath('/pricelists'))\n          .catch(err => dwAlerts.error(err, 'Failed to remove price list.'));\n      }\n    };\n\n    /**\n     * Save price list handler\n     */\n    vm.save = () => {\n      if (helper.pointFirstInvalid('#priceListEdit')) return;\n\n      const data = {\n        name: vm.priceList.name,\n        visibleForVisitors: vm.priceList.visibleForVisitors,\n        useFor: vm.priceList.useFor ? vm.priceList.useFor.id : vm.priceList.useFor,\n        isArchived: vm.priceList.isArchived,\n      };\n\n      let promise;\n      if (vm.priceList.id === 'new') {\n        promise = priceListService.createPricelist(state.getCurrentCenterId(), data);\n      } else {\n        promise = priceListService.updatePricelist(state.getCurrentCenterId(), vm.priceList.id, data);\n      }\n\n      return promise\n        .then(result => {\n          vm.priceList.date = moment();\n          vm.form.$setPristine();\n          if (vm.priceList.id === 'new') return state.setPath('/pricelists/' + result.id);\n        })\n        .catch(err => dwAlerts.error(err, 'Failed to save price list.'));\n    };\n\n    /**\n     * Back button handler\n     */\n    vm.back = () => state.setPath('/pricelists');\n\n    /**\n     * Add Product handler\n     */\n    vm.addProduct = productType => {\n      if (!productType.options.length) return dwAlerts.error($translate.instant('PRICE_LISTS.NO_PRODUCTS_ERROR'));\n\n      const data = {\n        id: 'new',\n        productId: productType.options[0].id,\n        product: productType.options[0],\n        price: '',\n        passQty: 0,\n      };\n      productType.products.push(data);\n\n      // Focus on new product\n      $timeout(() => {\n        let last = document.querySelector('#productType-' + productType.id + ' form:last-of-type');\n        if (last) {\n          last = last.querySelector('select:first-of-type');\n          if (last) last.focus();\n        }\n      });\n    };\n\n    /**\n     * Save Product handler\n     */\n    vm.saveProduct = (product, form, index) => {\n      if (helper.pointFirstInvalid('#productForm-' + index)) return;\n\n      const data = {\n        productId: product.product.id,\n        price: product.price,\n      };\n\n      if (product.product.isCreditable) data.reservationCredit = product.reservationCredit;\n\n      if (product.product.hasPasses) data.passQty = product.passQty;\n\n      let promise;\n      if (product.id === 'new') {\n        promise = priceListService.createProduct(state.getCurrentCenterId(), vm.priceList.id, data);\n      } else {\n        promise = priceListService.updateProduct(state.getCurrentCenterId(), vm.priceList.id, product.id, data);\n      }\n\n      return promise\n        .then(result => {\n          if (product.id === 'new') product.id = result.id;\n          form.$setPristine();\n        })\n        .catch(err => dwAlerts.error(err, 'Failed to save product.'));\n    };\n\n    /**\n     * Remove product handler\n     */\n    vm.removeProduct = (product, index, productType) => {\n      if (product.id === 'new') {\n        productType.products.splice(index, 1);\n      } else {\n        if (confirm($translate.instant('PRICE_LISTS.PRODUCTS.CONFIRM_DELETE'))) {\n          return priceListService.deleteProduct(state.getCurrentCenterId(), vm.priceList.id, product.id)\n            .then(() => productType.products.splice(index, 1))\n            .catch(err => dwAlerts.error(err, 'Failed to remove product.'));\n        }\n      }\n    };\n\n    /**\n     * Redirect to list of price lists on changing current center\n     */\n    $scope.$watch('state.getCurrentCenterId()', (nv, ov) => { if (nv !== ov) state.setPath('/pricelists'); });\n  });\n","// Module\nvar code = \"<div class=\\\"gutter-v\\\"> <form name=\\\"vm.form\\\" id=\\\"priceListEdit\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <ff-panel flex=\\\"{lg: '0 0 50%'}\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 160px\\\"><req translate=\\\"PRICE_LISTS.NAME\\\"></req></ff-label> <ff-text flex=\\\"1 1 200px\\\" ff-model=\\\"vm.priceList.name\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'PRICE_LISTS.NAME' | translate}}\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 160px\\\"><req translate=\\\"PRICE_LISTS.USE_FOR\\\"></req></ff-label> <ff-select flex=\\\"1 1 200px\\\" ff-model=\\\"vm.priceList.useFor\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'PRICE_LISTS.USE_FOR' | translate}}\\\" ff-options=\\\"opt.name for opt in vm.useForOptions\\\"></ff-select> </label> <div class=\\\"ff-grid gutter-h-half\\\"> <label flex=\\\"none\\\"> <ff-checkbox ff-model=\\\"vm.priceList.visibleForVisitors\\\" ff-label=\\\"{{'PRICE_LISTS.VISIBLE_FOR_VISITORS_DURING_RESERVATION' | translate}}\\\"></ff-checkbox> </label> <ff-row flex=\\\"none\\\"> <label flex=\\\"none\\\"> <ff-checkbox ff-model=\\\"vm.priceList.isArchived\\\">{{'PRICE_LISTS.ARCHIVED' | translate}}</ff-checkbox> </label> <ff-static class=\\\"ff-no-frame\\\"><ff-hint>{{'PRICE_LISTS.ARCHIVED.HINT' | translate}}</ff-hint></ff-static> </ff-row> </div> </ff-panel> <ff-panel flex=\\\"{lg: '0 0 50%'}\\\" ng-if=\\\"vm.priceList.date\\\" class=\\\"ff-flex-start\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"PRICE_LISTS.LAST_UPDATE\\\"></span></ff-label> <ff-static ff-bind=\\\"vm.priceList.date | date:'mediumDate'\\\"></ff-static> </label> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"save\\\" type=\\\"submit\\\" ff-click=\\\"vm.save()\\\" ff-disabled=\\\"vm.form.$pristine\\\"> <span translate=\\\"GLOBAL.BTN_SAVE\\\"></span> </ff-btn> <ff-btn sense=\\\"remove\\\" ff-click=\\\"vm.remove()\\\" ng-if=\\\"vm.priceList.id !== 'new'\\\"> <span translate=\\\"GLOBAL.BTN_DELETE\\\"></span> </ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> </form> <ff-panel ng-repeat=\\\"productType in vm.productTypes\\\" id=\\\"productType-{{productType.id}}\\\" ff-bulk-read-only ng-if=\\\"vm.priceList.id !== 'new'\\\"> <ff-panel-header>{{productType.name}}</ff-panel-header> <span ng-if=\\\"!productType.products.length\\\" translate=\\\"GLOBAL.NONE\\\"></span> <ff-btn-group class=\\\"ff-section-buttons\\\"> <ff-btn sense=\\\"add\\\" size=\\\"sm\\\" ff-click=\\\"vm.addProduct(productType)\\\"> <span translate=\\\"PRICE_LISTS.PRODUCTS.BTN_ADD\\\"></span> </ff-btn> </ff-btn-group> <ff-header ng-show=\\\"productType.products.length > 0\\\"> <ff-row> <cell><req translate=\\\"PRICE_LISTS.PRODUCTS.PRODUCT\\\"></req></cell> <cell flex=\\\"0 0 60px\\\" class=\\\"ff-right\\\"><req translate=\\\"PRICE_LISTS.PRODUCTS.PRICE\\\"></req></cell> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"buttons-row zero-height\\\"> <ff-btn sense=\\\"save\\\" size=\\\"xs\\\"></ff-btn> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\"></ff-btn> </ff-btn-group> </ff-row> </ff-header> <form name=\\\"productForm\\\" id=\\\"productForm-{{$index}}\\\" ng-repeat=\\\"product in productType.products\\\"> <ff-row> <ff-select flex=\\\"1 1 80px\\\" ff-attr-name=\\\"{ 'product' }\\\" ff-model=\\\"product.product\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'PRICE_LISTS.PRODUCTS.PRODUCT' | translate}}\\\" ff-unique=\\\"{ array: productType.products, prop: 'product' }\\\" ff-model-options=\\\"{ allowInvalid: true }\\\" ff-options=\\\"product.name for product in productType.options\\\"> </ff-select> <label flex=\\\"{xs: '0 1 80px', md: '0 1 106px'}\\\" class=\\\"ff-row\\\" ng-if=\\\"product.product.hasPasses\\\"> <ff-label flex=\\\"none\\\"><req translate=\\\"PRICE_LISTS.PRODUCTS.PASSES\\\"></req></ff-label> <ff-number ff-model=\\\"product.passQty\\\" ff-required=\\\"true\\\" class=\\\"ff-right\\\" ff-validate-alert=\\\"{{'PRICE_LISTS.PRODUCTS.PASSES' | translate}}\\\"></ff-number> </label> <label flex=\\\"0 1 106px\\\" class=\\\"ff-row\\\" ng-if=\\\"product.product.isCreditable\\\"> <ff-label flex=\\\"0 0 48px\\\"><req translate=\\\"PRICE_LISTS.PRODUCTS.CREDIT\\\"></req></ff-label> <ff-price class=\\\"ff-right\\\" ff-model=\\\"product.reservationCredit\\\" ff-validate-alert=\\\"{{'PRICE_LISTS.PRODUCTS.CREDIT' | translate}}\\\"></ff-price> </label> <ff-price flex=\\\"0 0 60px\\\" class=\\\"ff-right\\\" ff-model=\\\"product.price\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'PRICE_LISTS.PRODUCTS.PRICE' | translate}}\\\"></ff-price> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"buttons-row\\\"> <ff-btn sense=\\\"save\\\" size=\\\"xs\\\" type=\\\"submit\\\" ff-click=\\\"vm.saveProduct(product, productForm, $index)\\\" ff-disabled=\\\"productForm.$pristine\\\" title=\\\"{{'GLOBAL.BTN_SAVE' | translate}}\\\"> </ff-btn> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\" ff-click=\\\"vm.removeProduct(product, $index, productType)\\\" title=\\\"{{'GLOBAL.BTN_DELETE' | translate}}\\\"></ff-btn> </ff-btn-group> </ff-row> </form> <ff-btn-group ng-show=\\\"productType.products.length > 0\\\" class=\\\"ff-section-buttons\\\"> <ff-btn sense=\\\"add\\\" size=\\\"sm\\\" ff-click=\\\"vm.addProduct(productType)\\\"> <span translate=\\\"PRICE_LISTS.PRODUCTS.BTN_ADD\\\"></span> </ff-btn> </ff-btn-group> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","import dwSelectCenterDirective from 'shared/dw-controls/dw-select-center/dw-select-center.directive';\n\nexport default angular.module('deskworks.inventory.priceList.list', [\n  'deskworks.inventory.priceList.service',\n  dwSelectCenterDirective.name,\n])\n\n  .controller('PriceListListCtrl', function($rootScope, $scope, $timeout, $route, $translate, dwAlerts, state,\n                                            helper, priceLists, centers, priceListService, lazyLoadReports) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('PRICE_LISTS.PAGE_TITLE'));\n\n    vm.centers = centers;\n    vm.dstCenterId = state.getCurrentCenterId();\n    vm.priceLists = priceLists;\n    vm.priceLists.forEach(pl => { pl.include = true; });\n    vm.editAfterCloning = true;\n    vm.printCollapsed = true;\n\n    /**\n     * Edit price list handler\n     */\n    vm.edit = pl => state.setPath('/pricelists/' + pl.id);\n\n    /**\n     * Clone price list handler\n     */\n    vm.clone = pl => {\n      if (vm.centers.length > 1 && !vm.cloning) {\n        vm.cloning = pl;\n        return;\n      }\n\n      return priceListService.clonePricelist(state.getCurrentCenterId(), pl.id, vm.dstCenterId)\n        .then(result => {\n          if (vm.editAfterCloning) {\n            state.setCurrentCenterId(vm.dstCenterId);\n            return state.setPath('/pricelists/' + result.id);\n          } else {\n            $route.reload();\n            return $timeout(5000);\n          }\n        })\n        .catch(err => dwAlerts.error(err, 'Failed to copy price list.'));\n    };\n\n    /**\n     * New price list handler\n     */\n    vm.new = () => state.setPath('/pricelists/new');\n\n    /**\n     * Toggle Print price lists collapse\n     */\n    vm.togglePrint = () => lazyLoadReports\n      .then(() => { vm.printCollapsed = !vm.printCollapsed; });\n\n    // Due to route.reloadOnSearch: false\n    $rootScope.$on('CHANGE-CENTER', () => {\n      $route.reload();\n    });\n  });\n","// Module\nvar code = \"<div id=\\\"inventoryPriceLists\\\" ng-if=\\\"!vm.cloning\\\" ff-bulk-read-only class=\\\"ff-bmargin\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel> <ff-header ng-if=\\\"vm.priceLists.length\\\"> <ff-row> <cell flex=\\\"0 0 36px\\\" ng-hide=\\\"vm.printCollapsed\\\" class=\\\"ff-center\\\" title=\\\"{{'PRICE_LISTS.LIST.PRINT' | translate}}\\\"> <ff-icon sense=\\\"print\\\"></ff-icon> </cell> <cell flex=\\\"1 1 70%\\\" translate=\\\"PRICE_LISTS.NAME\\\"></cell> <cell flex=\\\"0 0 15%\\\" class=\\\"ff-center\\\"><span translate=\\\"PRICE_LISTS.LAST_UPDATE\\\"></span></cell> <cell flex=\\\"0 0 15%\\\" class=\\\"ff-center\\\"><span translate=\\\"PRICE_LISTS.VISIBLE_FOR_VISITORS\\\"></span></cell> <cell flex=\\\"0 0 15%\\\" class=\\\"ff-center\\\"><span translate=\\\"PRICE_LISTS.ARCHIVED\\\"></span></cell> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"buttons-row zero-height\\\"> <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\"></ff-btn> <ff-btn sense=\\\"clone\\\" size=\\\"xs\\\"></ff-btn> </ff-btn-group> </ff-row> </ff-header> <span ng-if=\\\"!vm.priceLists.length\\\" translate=\\\"PRICE_LISTS.LIST.EMPTY\\\"></span> <ff-row ng-repeat=\\\"pl in vm.priceLists\\\"> <ff-static flex=\\\"0 0 36px\\\" class=\\\"ff-center\\\" ng-hide=\\\"vm.printCollapsed\\\"> <ff-checkbox class=\\\"ff-read-only-ignore\\\" ff-model=\\\"pl.include\\\"></ff-checkbox> </ff-static> <ff-static flex=\\\"1 1 70%\\\" ff-bind=\\\"pl.name\\\"></ff-static> <ff-static flex=\\\"0 0 15%\\\" class=\\\"ff-center\\\" ff-bind-html=\\\"pl.date | date:'mediumDate'\\\"></ff-static> <ff-static flex=\\\"0 0 15%\\\" class=\\\"ff-center\\\" ff-bind=\\\"pl.visibleForVisitors | yesno\\\"></ff-static> <ff-static flex=\\\"0 0 15%\\\" class=\\\"ff-center\\\" ff-bind=\\\"pl.isArchived | yesno\\\"></ff-static> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"buttons-row\\\"> <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" ff-click=\\\"vm.edit(pl)\\\" title=\\\"{{'GLOBAL.BTN_EDIT' | translate}}\\\"></ff-btn> <ff-btn sense=\\\"clone\\\" size=\\\"xs\\\" ff-click=\\\"vm.clone(pl)\\\" title=\\\"{{'PRICE_LISTS.LIST.BTN_CLONE' | translate}}\\\"></ff-btn> </ff-btn-group> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"new\\\" ff-click=\\\"vm.new()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> <ff-btn sense=\\\"collapseBtn\\\" ff-click=\\\"vm.togglePrint()\\\" ng-class=\\\"{ collapsed: vm.printCollapsed }\\\" ff-disabled=\\\"!vm.priceLists.length\\\"><span translate=\\\"PRICE_LISTS.LIST.BTN_PRINT\\\"></span></ff-btn> </ff-btn-group> </div> <div ng-collapse=\\\"vm.printCollapsed\\\" class=\\\"ff-grid\\\"> <ng-include src=\\\"'price-list-report/price-list-report.tpl.html'\\\" class=\\\"ff-tmargin\\\"></ng-include> </div> </div> <form name=\\\"formClonePriceList\\\" id=\\\"clonePriceList\\\" ng-if=\\\"vm.cloning\\\" ff-bulk-read-only style=\\\"max-width:600px\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel> <ff-panel-header> <span translate=\\\"PRICE_LISTS.CLONE.HEADER\\\" translate-values=\\\"{ priceList: vm.cloning.name }\\\"></span> </ff-panel-header> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 160px\\\"><span translate=\\\"PRICE_LISTS.CLONE.CENTER\\\"></span></ff-label> <dw-select-center flex=\\\"1 0 180px\\\" ff-model=\\\"vm.dstCenterId\\\"></dw-select-center> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 160px\\\" ff-model=\\\"vm.editAfterCloning\\\"><span translate=\\\"PRICE_LISTS.CLONE.EDIT\\\"></span></ff-label> <ff-static><ff-checkbox flex=\\\"0 0 30px\\\" ff-model=\\\"vm.editAfterCloning\\\"></ff-checkbox></ff-static> </label> </ff-panel> <ff-btn-group> <ff-btn type=\\\"submit\\\" sense=\\\"clone\\\" ff-click=\\\"vm.clone(vm.cloning)\\\"><span translate=\\\"PRICE_LISTS.LIST.BTN_CLONE\\\"></span></ff-btn> <ff-btn sense=\\\"cancel\\\" ff-click=\\\"vm.cloning = false\\\"><span translate=\\\"GLOBAL.BTN_CANCEL\\\"></span></ff-btn> </ff-btn-group> </div> </form> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.ProductCategoriesCtrl', [\n  'debounce',\n  'deskworks.ProductCategory',\n])\n\n  .controller('ProductCategoriesCtrl', function($scope, $translate, dwAlerts, state, helper, debounce,\n                                                categories, ProductCategory) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('PRODUCT_CATEGORIES.PAGE_TITLE'));\n\n    $ctrl.categories = categories;\n\n    /**\n     * Save handler\n     */\n    $ctrl.save = debounce(save, 1000);\n    function save(category, form, index) {\n      if (form.$invalid) return;\n\n      category.$$spin = true;\n      return ProductCategory.save(category)\n        .catch(err => dwAlerts.error(err, 'Failed to save product category.'))\n        .finally(() => { category.$$spin = false; });\n    }\n\n    /**\n     * New handler\n     */\n    $ctrl.new = () => $ctrl.categories.push({});\n\n    /**\n     * Delete handler\n     */\n    $ctrl.delete = (category, index) => {\n      if (category.id) { // existing category\n        if (!confirm($translate.instant('PRODUCT_CATEGORIES.CONFIRM_DELETE'))) return;\n        category.$$spin = true;\n        return ProductCategory.delete(category.id)\n          .catch(err => dwAlerts.error(err, 'Failed to delete product category.'))\n          .then(() => $ctrl.categories.splice(index, 1))\n          .finally(() => { category.$$spin = false; });\n      } else { // new category\n        $ctrl.categories.splice(index, 1);\n      }\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"productCategories\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <ff-panel style=\\\"max-width:600px\\\" class=\\\"ff-bmargin\\\"> <ff-header> <ff-row> <cell class=\\\"ff-right\\\" flex=\\\"0 0 60px\\\"><req translate=\\\"PRODUCT_CATEGORIES.CODE\\\"></req></cell> <cell><span translate=\\\"PRODUCT_CATEGORIES.NAME\\\"></span></cell> <ff-hint flex=\\\"none\\\"><span translate=\\\"PRODUCT_CATEGORIES.HINT\\\"></span></ff-hint> </ff-row> </ff-header> <form name=\\\"form\\\" ng-repeat=\\\"category in $ctrl.categories\\\" novalidate> <ff-row ff-dim=\\\"category.$$spin\\\"> <ff-text name=\\\"productCategoryCode\\\" ff-model=\\\"category.code\\\" flex=\\\"0 0 60px\\\" class=\\\"ff-right\\\" ff-change=\\\"$ctrl.save(category, form, $index)\\\" placeholder=\\\"1-05\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'PRODUCT_CATEGORIES.CODE' | translate}}\\\" ff-disabled=\\\"category.code === '0-00'\\\"></ff-text> <ff-text name=\\\"productCategoryName\\\" ff-model=\\\"category.name\\\" placeholder=\\\"Private Office\\\" ff-change=\\\"$ctrl.save(category, form, $index)\\\"></ff-text> <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row\\\"> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\" flex=\\\"0 0 auto\\\" ff-click=\\\"$ctrl.delete(category, $index)\\\" title=\\\"{{'GLOBAL.BTN_DELETE' | translate}}\\\" ff-disabled=\\\"category.code === '0-00'\\\"></ff-btn> </ff-btn-group> </ff-row> </form> <ff-btn-group class=\\\"ff-section-buttons\\\"> <ff-btn sense=\\\"new\\\" size=\\\"sm\\\" ff-click=\\\"$ctrl.new()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","import 'shared/printer-usage-free-copies/printer-usage-free-copies.directive';\n\nexport default angular.module('deskworks.inventory.product.edit', [\n  'deskworks.inventory.product.service',\n  'deskworks.inventory.optsCountCheckInsPer',\n  'deskworks.printerUsageFreeCopies',\n])\n\n  .controller('ProductEditCtrl', function($scope, $q, $timeout, $window, $translate, dwAlerts, state, helper,\n                                          product, settings, productService, optsPassMin, optsPassMax,\n                                          optsCountCheckInsPer, productCategories) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant(product.id ? 'PRODUCTS.EDIT.PAGE_TITLE' : 'PRODUCTS.NEW.PAGE_TITLE'));\n\n    vm.settings = settings;\n    vm.product = product;\n    vm.optsPassMin = optsPassMin;\n    vm.optsPassMax = optsPassMax;\n    vm.optsCountCheckInsPer = optsCountCheckInsPer;\n    vm.productCategories = productCategories.filter(cat => cat.code !== '0-00');\n    vm.productCategories.forEach(cat => { cat.fullName = helper.join([cat.name, '[' + cat.code + ']'], ' '); });\n\n    vm.passMinUnit = settings.minPassInPercent ? 'pass' : 'time';\n    if (!settings.minPassInPercent) {\n      vm.optsPassMin = angular.copy(vm.optsPassMin);\n      vm.optsPassMin.forEach(opt => { opt.name += ' hr'; });\n    }\n\n    // Init passProducts\n    vm.product.options.passProducts = [];\n    productService.getProducts().then(products => {\n      if (angular.isArray(products)) {\n        products.forEach(product => {\n          if (product.type === 'rental') {\n            vm.product.options.passProducts.push(product);\n          }\n        });\n        vm.product.passProduct = helper.find(vm.product.options.passProducts, vm.product.passProductId);\n      }\n    });\n\n    /**\n     * Save Product handler\n     */\n    vm.save = form => {\n      if (helper.pointFirstInvalid('#productEdit')) return;\n\n      let promise, isNew = false;\n      if (vm.product.id) {\n        promise = $q.all([\n          productService.updateProduct(vm.product)\n            .catch(err => dwAlerts.error(err, 'Failed to save product.')),\n          $q.when(vm.saveQuickBooks && vm.saveQuickBooks()),\n          $q.when(vm.saveDoorflow && vm.saveDoorflow()),\n          $q.when(vm.saveDeskworksSweep && vm.saveDeskworksSweep().catch(angular.noop)),\n        ]);\n      } else {\n        isNew = true;\n        promise = productService.createProduct(vm.product)\n          .catch(err => dwAlerts.error(err, 'Failed to save product.'))\n          .then(result => (vm.product.id = result.id, result))\n          .then(result => $timeout().then(() => result))\n          .then(result => $q.when(vm.saveDeskworksSweep && vm.saveDeskworksSweep().catch(angular.noop)).then(() => result));\n      }\n\n      return promise\n        .then(result => {\n          form.$setPristine(true);\n          if (isNew) return state.setPath('/products/' + result.id);\n        });\n    };\n\n    /**\n     * Remove Product handler\n     */\n    vm.remove = () => {\n      if (confirm($translate.instant('PRODUCTS.CONFIRM_DELETE'))) {\n        return productService.deleteProduct(vm.product.id)\n          .catch(err => dwAlerts.error(err, 'Failed to remove product.'))\n          .then(() => state.setPath('/products'));\n      }\n    };\n\n    /**\n     * Back button handler\n     */\n    vm.back = () => state.setPath('/products');\n\n    /**\n     * Add PriceList handler\n     */\n    vm.addPriceList = () => {\n      const id = helper.uid();\n      vm.product.priceLists.push({\n        id: id,\n        priceListsId: vm.product.options.priceLists[0].id,\n        priceList: vm.product.options.priceLists[0],\n        price: '',\n        passQty: 0,\n      });\n\n      helper.focus('#productPriceList-' + id + ' select:first-of-type');\n    };\n\n    /**\n     * Save PriceList handler\n     */\n    vm.savePriceList = (priceList, form) => {\n      if (helper.pointFirstInvalid('#productPriceList-' + priceList.id)) return;\n\n      const data = {\n        priceListId: priceList.priceList.id,\n        price: priceList.price,\n      };\n\n      if (vm.product.isCreditable) {\n        data.reservationCredit = priceList.reservationCredit;\n      }\n\n      if (vm.product.hasPasses) {\n        data.passQty = priceList.passQty;\n      }\n\n      return (helper.isUid(priceList.id) ? productService.createPriceList(vm.product.id, data) : productService.updatePriceList(vm.product.id, priceList.id, data))\n        .catch(err => dwAlerts.error(err, 'Failed to save price list.'))\n        .then(result => {\n          if (helper.isUid(priceList.id)) priceList.id = result.id;\n          form.$setPristine(true);\n          return result;\n        });\n    };\n\n    /**\n     * Remove PriceList handler\n     */\n    vm.removePriceList = (priceList, index) => {\n      if (helper.isUid(priceList.id)) {\n        vm.product.priceLists.splice(index, 1);\n      } else {\n        return productService.deletePriceList(vm.product.id, priceList.id)\n          .catch(err => dwAlerts.error(err, 'Failed to remove price list.'))\n          .then(result => {\n            vm.product.priceLists.splice(index, 1);\n            return result;\n          });\n      }\n    };\n\n    /**\n     * Get direct URL to Member Sign Up wizard\n     */\n    vm.getMemberSignUpUrl = () => {\n      const origin = window.location.origin;\n      const centerId = state.getCurrentCenterId();\n      const productId = vm.product.id;\n      return `${origin}/member-sign-up-landing?center=${centerId}&productId=${productId}`;\n    };\n  });\n","// Module\nvar code = \"<form name=\\\"formProduct\\\" id=\\\"productEdit\\\" novalidate ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h-half\\\"> <ff-panel flex=\\\"{lg: '0 0 50%'}\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 92px\\\"><req translate=\\\"PRODUCTS.NAME\\\"></req></ff-label> <ff-text name=\\\"name\\\" ff-model=\\\"vm.product.name\\\" ff-required=\\\"true\\\" ff-maxlength=\\\"128\\\" ff-validate-alert=\\\"{{'PRODUCTS.NAME' | translate}}\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 92px\\\"><span translate=\\\"PRODUCTS.DESCRIPTION\\\" style=\\\"margin-bottom:auto;padding:.3333rem 0\\\"></span></ff-label> <ff-textarea name=\\\"description\\\" ff-model=\\\"vm.product.description\\\" ff-maxlength=\\\"1024\\\" rowspan=\\\"3\\\" ff-validate-alert=\\\"{{'PRODUCTS.DESCRIPTION' | translate}}\\\"></ff-textarea> </label> <div class=\\\"ff-grid\\\"> <label flex=\\\"{sm: '0 0 65%'}\\\" class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 92px\\\"><req translate=\\\"PRODUCTS.ITEM_CATEGORY\\\"></req></ff-label> <ff-select name=\\\"productCategory\\\" ff-model=\\\"vm.product.productCategoryId\\\" ff-options=\\\"opt.id as opt.fullName for opt in vm.productCategories\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'PRODUCTS.ITEM_CATEGORY' | translate}}\\\"></ff-select> </label> <label flex=\\\"{sm: '0 0 35%'}\\\" class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 92px\\\"><req translate=\\\"PRODUCTS.ITEM_NUMBER\\\"></req></ff-label> <ff-number name=\\\"productNumber\\\" ff-model=\\\"vm.product.productNumber\\\" placeholder=\\\"01\\\" ff-required=\\\"true\\\" ff-gte=\\\"0\\\" ff-lt=\\\"1000\\\" ff-validate-alert=\\\"{{'PRODUCTS.ITEM_NUMBER' | translate}}\\\"></ff-number> </label> </div> <quick-books-account product-id=\\\"vm.product.id\\\" save=\\\"vm.saveQuickBooks\\\" ng-if=\\\"vm.product.id\\\"></quick-books-account> <doorflow-access-group></doorflow-access-group> <label class=\\\"ff-row\\\" ng-if=\\\"vm.product.type.id === 'membership' && vm.product.showInSelfRegistration && vm.product.id\\\"> <ff-label flex=\\\"0 0 92px\\\"> <span translate=\\\"PRODUCTS.WEBSITE_LINK\\\"></span> <ff-hint><span translate=\\\"PRODUCTS.WEBSITE_LINK.HINT\\\"></span></ff-hint> </ff-label> <ff-static> <a href=\\\"{{vm.getMemberSignUpUrl()}}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">{{vm.getMemberSignUpUrl()}}</a> </ff-static> </label> </ff-panel> <ff-panel flex=\\\"{lg: '0 0 50%'}\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 90px\\\"><req translate=\\\"PRODUCTS.PRODUCT_TYPE\\\"></req></ff-label> <ff-select name=\\\"productType\\\" ff-model=\\\"vm.product.type\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'PRODUCTS.PRODUCT_TYPE' | translate}}\\\" ff-options=\\\"type.name for type in vm.product.options.productTypes\\\" ng-if=\\\"vm.product.typeId !== 'discount'\\\"></ff-select> <ff-static ng-if=\\\"vm.product.typeId === 'discount'\\\" class=\\\"disabled\\\">Discount</ff-static> </label> <label class=\\\"ff-row\\\" flex=\\\"1 1 50%\\\" ng-if=\\\"vm.product.type.id === 'membership' || vm.product.type.id === 'services'\\\"> <ff-label flex=\\\"0 0 90px\\\" ng-if=\\\"vm.product.type.id === 'membership'\\\"> <req translate=\\\"PRODUCTS.MEMBERSHIP_CATEGORY\\\"></req> </ff-label> <ff-select name=\\\"membershipType\\\" ff-model=\\\"vm.product.membershipType\\\" ff-required=\\\"true\\\" ng-if=\\\"vm.product.type.id === 'membership'\\\" ff-validate-alert=\\\"{{'PRODUCTS.MEMBERSHIP_CATEGORY' | translate}}\\\" ff-options=\\\"type.name for type in vm.product.options.membershipTypes\\\"></ff-select> </label> <label class=\\\"ff-row\\\" flex=\\\"1 1 50%\\\" ng-if=\\\"vm.product.type.id === 'membership' || vm.product.type.id === 'services'\\\"> <ff-label flex=\\\"0 0 90px\\\"> <req translate=\\\"PRODUCTS.BILLING_FREQUENCY\\\"></req> </ff-label> <ff-select name=\\\"billingFrequency\\\" ff-model=\\\"vm.product.billingFrequency\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'PRODUCTS.BILLING_FREQUENCY' | translate}}\\\" ff-options=\\\"billingFrequency.name for billingFrequency in vm.product.options.billingFrequencies\\\"></ff-select> </label> <div class=\\\"ff-grid\\\" ng-if=\\\"vm.product.type.id === 'membership'\\\"> <label flex=\\\"{sm: '0 0 50%'}\\\" class=\\\"ff-row\\\"> <ff-checkbox name=\\\"isCreditable\\\" ff-model=\\\"vm.product.isCreditable\\\" class=\\\"ff-control\\\"> <span translate=\\\"PRODUCTS.IS_CREDITABLE\\\"></span> </ff-checkbox> </label> <label flex=\\\"{sm: '0 0 50%'}\\\" class=\\\"ff-row\\\"> <ff-checkbox name=\\\"hasPasses\\\" ff-model=\\\"vm.product.hasPasses\\\" class=\\\"ff-control\\\"> <span translate=\\\"PRODUCTS.HAS_PASSES\\\"></span> </ff-checkbox> </label> </div> <label class=\\\"ff-row\\\" ng-if=\\\"vm.product.type.id === 'membership'\\\"> <ff-label flex=\\\"1 0 50%\\\" ng-disabled=\\\"!vm.product.hasPasses\\\"> <req translate=\\\"PRODUCTS.PASS_PRODUCT\\\"></req> </ff-label> <ff-select flex=\\\"1 0 50%\\\" name=\\\"passProduct\\\" ff-model=\\\"vm.product.passProduct\\\" ff-disabled=\\\"!vm.product.hasPasses\\\" ff-required=\\\"vm.product.hasPasses\\\" ff-validate-alert=\\\"{{'PRODUCTS.PASS_PRODUCT' | translate}}\\\" ff-options=\\\"passProduct.name for passProduct in vm.product.options.passProducts\\\"></ff-select> </label> <div class=\\\"ff-grid\\\" ng-if=\\\"vm.product.type.id === 'membership'\\\"> <label flex=\\\"{sm: '0 0 50%'}\\\" class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 50%\\\" ng-disabled=\\\"!vm.product.hasPasses\\\"> <req translate=\\\"PRODUCTS.COUNT_CHECK_INS_PER\\\"></req> </ff-label> <ff-select flex=\\\"1 0 50%\\\" name=\\\"countCheckInsPer\\\" ff-model=\\\"vm.product.countCheckInsPer\\\" ff-disabled=\\\"!vm.product.hasPasses\\\" ff-required=\\\"vm.product.hasPasses\\\" ff-validate-alert=\\\"{{'PRODUCTS.COUNT_CHECK_INS_PER' | translate}}\\\"> <option value=\\\"{{opt.id}}\\\" ng-repeat=\\\"opt in vm.optsCountCheckInsPer\\\">{{opt.name}}</option> </ff-select> </label> <label flex=\\\"{sm: '0 0 50%'}\\\" class=\\\"ff-row\\\"> <ff-checkbox name=\\\"reserveWithNonMemberRules\\\" ff-model=\\\"vm.product.reserveWithNonMemberRules\\\" class=\\\"ff-control\\\"> <span translate=\\\"PRODUCTS.ONLY_NON_MEMBER_HOURS\\\"></span> </ff-checkbox> </label> </div> <div class=\\\"ff-grid\\\" ng-if=\\\"vm.product.type.id === 'rental'\\\"> <label flex=\\\"{sm: '0 0 50%'}\\\" class=\\\"ff-row\\\"> <ff-checkbox name=\\\"allowReservationCredits\\\" ff-model=\\\"vm.product.allowReservationCredits\\\" class=\\\"ff-control\\\"> <span translate=\\\"PRODUCTS.ALLOW_RESERVATION_CREDITS\\\"></span> </ff-checkbox> </label> <label flex=\\\"{sm: '0 0 50%'}\\\" class=\\\"ff-row\\\"> <ff-checkbox name=\\\"canBuyOnSplashPage\\\" ff-model=\\\"vm.product.canBuyOnSplashPage\\\" class=\\\"ff-control\\\"> <span translate=\\\"PRODUCTS.BUY_ON_SPLASH_PAGE\\\"></span> </ff-checkbox> </label> </div> <div class=\\\"ff-grid\\\"> <label flex=\\\"{sm: '1 0 50%'}\\\" class=\\\"ff-row\\\"> <ff-checkbox name=\\\"taxable\\\" ff-model=\\\"vm.product.taxable\\\" class=\\\"ff-control\\\"> <span translate=\\\"PRODUCTS.TAXABLE\\\"></span> </ff-checkbox> </label> <label flex=\\\"{sm: '0 0 50%'}\\\" class=\\\"ff-row\\\" ng-if=\\\"vm.product.type.id === 'membership' || vm.product.type.id === 'services'\\\"> <ff-checkbox name=\\\"showInSelfRegistration\\\" ff-model=\\\"vm.product.showInSelfRegistration\\\" class=\\\"ff-control\\\"> <span translate=\\\"PRODUCTS.SHOW_FOR_SIGN_UP\\\"></span> </ff-checkbox> </label> </div> <div class=\\\"ff-grid\\\" ng-if=\\\"vm.product.type.id === 'membership'\\\"> <label flex=\\\"{sm: '1 0 50%'}\\\" class=\\\"ff-row\\\"> <ff-checkbox name=\\\"hasRegistrationFee\\\" ff-model=\\\"vm.product.hasRegistrationFee\\\" class=\\\"ff-control\\\"> <span translate=\\\"PRODUCTS.HAS_REGISTRATION_FEE\\\"></span> </ff-checkbox> </label> <label flex=\\\"{sm: '1 0 50%'}\\\" class=\\\"ff-row\\\" ng-if=\\\"vm.settings.enableSecurityDepositInMembershipProducts\\\"> <ff-label flex=\\\"0 1 180px\\\"><req translate=\\\"PRODUCTS.SECURITY_DEPOSIT_AMOUNT\\\"></req></ff-label> <ff-number name=\\\"securityDepositAmount\\\" flex=\\\"1 0 50px\\\" ff-model=\\\"vm.product.securityDepositAmount\\\" ff-required=\\\"true\\\" ff-gte=\\\"0\\\" ff-validate-alert=\\\"{{'PRODUCTS.SECURITY_DEPOSIT_AMOUNT' | translate}}\\\"></ff-number> </label> <label flex=\\\"{sm: '0 0 50%'}\\\"> <ff-checkbox name=\\\"trackAcrossAllCenters\\\" ff-model=\\\"vm.product.trackAcrossAllCenters\\\" class=\\\"ff-control\\\" ff-disabled=\\\"!vm.product.hasPasses\\\"> <span translate=\\\"PRODUCTS.TRACK_ACROSS_ALL_CENTERS\\\"></span> </ff-checkbox> </label> <deskworks-sweep-product product-id=\\\"vm.product.id\\\" save=\\\"vm.saveDeskworksSweep\\\"></deskworks-sweep-product> </div> <ff-row ng-if=\\\"vm.product.type.id === 'rental'\\\"> <label flex=\\\"1 0 50%\\\" class=\\\"ff-row\\\"> <ff-label flex=\\\"3 0 60px\\\"><req translate=\\\"PRODUCTS.PASS_SIZE\\\"></req></ff-label> <ff-number flex=\\\"1 1 10px\\\" name=\\\"passSize\\\" ff-model=\\\"vm.product.passSize\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'PRODUCTS.PASS_SIZE' | translate}}\\\"></ff-number> </label> <ff-static flex=\\\"{xs: '0 0 0', sm: '0 0 50%'}\\\" ff-style=\\\"{'padding': 0}\\\"></ff-static> </ff-row> <div class=\\\"ff-grid\\\" ng-if=\\\"vm.product.type.id === 'rental'\\\"> <label flex=\\\"{sm: '0 0 50%'}\\\" class=\\\"ff-row\\\"> <ff-label flex=\\\"3 0 60px\\\"><req translate=\\\"PRODUCTS.MIN_PASS\\\" translate-values=\\\"{ minPassUnit: vm.passMinUnit }\\\"></req></ff-label> <ff-select flex=\\\"1 1 10px\\\" name=\\\"passMin\\\" ff-model=\\\"vm.product.passMin\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"Min {{vm.passMinUnit}}\\\" ff-options=\\\"opt.id as opt.name for opt in vm.optsPassMin\\\"></ff-select> </label> <label flex=\\\"{sm: '0 0 50%'}\\\" class=\\\"ff-row\\\"> <ff-label flex=\\\"3 0 60px\\\"><req translate=\\\"PRODUCTS.MAX_PASS\\\"></req></ff-label> <ff-select flex=\\\"1 1 10px\\\" name=\\\"passMax\\\" ff-model=\\\"vm.product.passMax\\\" ff-required=\\\"true\\\" ff-options=\\\"max.name for max in vm.optsPassMax\\\" ff-validate-alert=\\\"{{'PRODUCTS.MAX_PASS' | translate}}\\\"></ff-select> </label> </div> <label class=\\\"ff-row\\\" ng-if=\\\"vm.product.type.id === 'rental'\\\"> <ff-label flex=\\\"1 1 220px\\\"><span translate=\\\"PRODUCTS.RESERVATION_CATEGORY\\\"></span></ff-label> <ff-select flex=\\\"1 1 344px\\\" name=\\\"reservationType\\\" ff-model=\\\"vm.product.reservationTypeId\\\"> <option value=\\\"\\\" translate=\\\"PRODUCTS.NO_RESERVATION_CATEGORY\\\"></option> <option ng-repeat=\\\"resType in vm.product.options.reservationTypes\\\" value=\\\"{{resType.id}}\\\">{{resType.name}}</option> </ff-select> </label> </ff-panel> <printer-usage-free-copies flex=\\\"{md: '0 0 50%'}\\\" style=\\\"margin-left:auto\\\" free-copies-settings=\\\"vm.product.printerUsageFreeCopiesSettings\\\" ng-if=\\\"vm.product.type.id === 'membership' && vm.product.printerUsageFreeCopiesSettings.length > 0\\\"></printer-usage-free-copies> <ff-btn-group> <ff-btn sense=\\\"save\\\" type=\\\"submit\\\" ff-disabled=\\\"formProduct.$pristine\\\" ff-click=\\\"vm.save(formProduct)\\\"> <span translate=\\\"GLOBAL.BTN_SAVE\\\"></span> </ff-btn> <ff-btn sense=\\\"remove\\\" ng-if=\\\"vm.product.id\\\" ff-click=\\\"vm.remove()\\\"> <span translate=\\\"GLOBAL.BTN_DELETE\\\"></span> </ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> </form> <div id=\\\"productPriceLists\\\" ff-bulk-read-only style=\\\"margin:1.5rem 0\\\"> <ff-panel ng-if=\\\"vm.product.id\\\"> <ff-panel-header><span translate=\\\"PRODUCTS.PRICE_LISTS.HEADER\\\"></span></ff-panel-header> <ff-btn-group class=\\\"ff-section-buttons\\\"> <ff-btn sense=\\\"add\\\" size=\\\"sm\\\" ff-click=\\\"vm.addPriceList()\\\"><span translate=\\\"PRODUCTS.PRICE_LISTS.BTN_ADD\\\"></span></ff-btn> </ff-btn-group> <ff-header ng-show=\\\"vm.product.priceLists.length > 0\\\"> <ff-row> <cell><req translate=\\\"PRODUCTS.PRICE_LISTS.PRICE_LIST\\\"></req></cell> <cell flex=\\\"0 0 60px\\\" ng-if=\\\"vm.product.hasPasses\\\"><req translate=\\\"PRODUCTS.PRICE_LISTS.PASSES\\\"></req></cell> <cell flex=\\\"0 0 60px\\\" class=\\\"ff-right\\\" ng-if=\\\"vm.product.isCreditable\\\"><req translate=\\\"PRODUCTS.PRICE_LISTS.CREDIT\\\"></req></cell> <cell flex=\\\"0 0 60px\\\" class=\\\"ff-right\\\"><req translate=\\\"PRODUCTS.PRICE_LISTS.PRICE\\\"></req></cell> <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row zero-height\\\"> <ff-btn sense=\\\"save\\\" size=\\\"xs\\\" title=\\\"{{'GLOBAL.BTN_SAVE' | translate}}\\\"></ff-btn> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\" title=\\\"{{'GLOBAL.BTN_DELETE' | translate}}\\\"></ff-btn> </ff-btn-group> </ff-row> </ff-header> <form name=\\\"priceListForm\\\" id=\\\"productPriceList-{{priceList.id}}\\\" ng-repeat=\\\"priceList in vm.product.priceLists\\\" novalidate> <ff-row> <ff-select name=\\\"priceList\\\" ff-model=\\\"priceList.priceList\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'PRODUCTS.PRICE_LISTS.PRICE_LIST' | translate}}\\\" ff-unique=\\\"{ array: vm.product.priceLists, prop: 'priceList' }\\\" ff-model-options=\\\"{ allowInvalid: true }\\\" ff-options=\\\"priceList.name for priceList in vm.product.options.priceLists\\\"> </ff-select> <ff-number flex=\\\"0 0 60px\\\" name=\\\"passQty\\\" class=\\\"ff-center\\\" ff-model=\\\"priceList.passQty\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'PRODUCTS.PRICE_LISTS.PASSES' | translate}}\\\" ng-if=\\\"vm.product.hasPasses\\\"></ff-number> <ff-price flex=\\\"0 0 60px\\\" name=\\\"credit\\\" class=\\\"ff-right\\\" ff-model=\\\"priceList.reservationCredit\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'PRODUCTS.PRICE_LISTS.CREDIT' | translate}}\\\" ng-if=\\\"vm.product.isCreditable\\\"></ff-price> <ff-price flex=\\\"0 0 60px\\\" name=\\\"price\\\" class=\\\"ff-right\\\" ff-model=\\\"priceList.price\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'PRODUCTS.PRICE_LISTS.PRICE' | translate}}\\\"></ff-price> <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row\\\"> <ff-btn sense=\\\"save\\\" type=\\\"submit\\\" size=\\\"xs\\\" title=\\\"{{'GLOBAL.BTN_SAVE' | translate}}\\\" ff-click=\\\"vm.savePriceList(priceList, priceListForm)\\\" ff-disabled=\\\"priceListForm.$pristine\\\"></ff-btn> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\" title=\\\"{{'GLOBAL.BTN_DELETE' | translate}}\\\" ff-click=\\\"vm.removePriceList(priceList, $index)\\\"></ff-btn> </ff-btn-group> </ff-row> </form> <ff-btn-group ng-show=\\\"vm.product.priceLists.length > 0\\\" class=\\\"ff-section-buttons\\\"> <ff-btn sense=\\\"add\\\" size=\\\"sm\\\" ff-click=\\\"vm.addPriceList()\\\"> <span translate=\\\"PRODUCTS.PRICE_LISTS.BTN_ADD\\\"></span> </ff-btn> </ff-btn-group> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","import './product-list.scss';\n\nexport default angular.module('deskworks.inventory.product.list', [\n  'deskworks.inventory.product.service',\n  'deskworks.billing.optsBillingFrequency',\n])\n\n  .controller('ProductListCtrl', function($scope, $translate, $timeout, state, helper, lazyLoadReports,\n                                          products, membershipCategories, reservationCategories,\n                                          productService, optsProductType, optsBillingFrequency) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('PRODUCTS.PAGE_TITLE'));\n\n    vm.collapsed = true;\n    vm.printCollapsed = true;\n\n    vm.products = products;\n    vm.productTypes = angular.copy(optsProductType); // deep-clone productTypes as we are going to modify it\n    vm.productTypes.forEach(productType => { productType.products = []; });\n\n    vm.customProducts = {\n      id: 'custom',\n      name: $translate.instant('PRODUCTS.LIST.CUSTOM'),\n      products: [],\n    };\n\n    // Sort products by types\n    products.forEach(product => {\n      if (product.membershipTypeId) {\n        const category = membershipCategories.find(c => c.id === product.membershipTypeId) || { name: product.membershipTypeId };\n        product.membershipCategoryName = category.name;\n      }\n      if (product.passProductId) {\n        const passProduct = products.find(p => p.id === product.passProductId) || { name: product.passProductId };\n        product.passProductName = passProduct.name;\n      }\n      if (product.reservationTypeId) {\n        const category = reservationCategories.find(c => c.id === product.reservationTypeId) || { name: product.reservationTypeId };\n        product.reservationCategoryName = category.name;\n      }\n      if (product.billingFrequency) {\n        product.billingFrequency = optsBillingFrequency.find(o => o.id === product.billingFrequency) || { name: product.billingFrequency };\n      }\n\n      const type = helper.find(vm.productTypes, product.type);\n      if (product.custom) {\n        vm.customProducts.products.push(product);\n      } else if (type) {\n        type.products.push(product);\n      } else {\n        console.warn('Product of unknown type:', product);\n      }\n    });\n\n    /**\n     * Edit product handler\n     */\n    vm.edit = product => state.setPath('/products/' + product.id);\n\n    /**\n     * New product handler\n     */\n    vm.new = () => state.setPath('/products/new');\n\n    /**\n     * Toggle Print Inventory List collapse\n     */\n    vm.togglePrint = () => lazyLoadReports\n      .then(() => { vm.printCollapsed = !vm.printCollapsed; });\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div class=\\\"product-list\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-btn-group ng-show=\\\"vm.productTypes.length > 0\\\"> <ff-btn sense=\\\"new\\\" ff-click=\\\"vm.new()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> <div ng-include=\\\"'productListTpl'\\\" ng-repeat=\\\"productType in vm.productTypes\\\"></div> <div> <ff-btn sense=\\\"collapse\\\" ff-click=\\\"vm.collapsed = !vm.collapsed\\\" class=\\\"ff-bmargin\\\" ng-class=\\\"{ collapsed: vm.collapsed }\\\" ng-if=\\\"vm.customProducts.products.length > 0\\\"><span translate=\\\"PRODUCTS.LIST.CUSTOM\\\"></span></ff-btn> <div class=\\\"custom-products\\\" ng-collapse=\\\"vm.collapsed\\\" ng-if=\\\"vm.customProducts.products.length > 0\\\"> <div ng-include=\\\"'productListTpl'\\\" ng-init=\\\"productType = vm.customProducts\\\"></div> </div> </div> <ff-btn-group> <ff-btn sense=\\\"new\\\" ff-click=\\\"vm.new()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> <ff-btn sense=\\\"collapseBtn\\\" ff-click=\\\"vm.togglePrint()\\\" ng-class=\\\"{ collapsed: vm.printCollapsed }\\\" ff-disabled=\\\"!vm.products.length\\\"><span translate=\\\"PRODUCTS.BTN_PRINT\\\"></span></ff-btn> </ff-btn-group> </div> <div ng-collapse=\\\"vm.printCollapsed\\\" class=\\\"ff-grid\\\"> <ng-include src=\\\"'product-report/product-report.tpl.html'\\\" class=\\\"ff-tmargin\\\"></ng-include> </div> </div> <script type=\\\"text/ng-template\\\" id=\\\"productListTpl\\\"> <ff-panel>\\n    <ff-panel-header>{{productType.name}}</ff-panel-header>\\n    <div class=\\\"ff-grid\\\">\\n      <span ng-if=\\\"!productType.products.length\\\" translate=\\\"PRODUCTS.LIST.EMPTY\\\"></span>\\n\\n      <ff-header ng-if=\\\"productType.products.length\\\">\\n        <ff-row>\\n          <cell flex=\\\"0 0 80px\\\"><span translate=\\\"PRODUCTS.CODE\\\"></span></cell>\\n          <cell flex=\\\"1 2 400px\\\"><span translate=\\\"PRODUCTS.PRODUCT\\\"></span></cell>\\n          <cell flex=\\\"0 0 105px\\\" class=\\\"ff-center show-xl\\\" ng-if=\\\"productType.id === 'services'\\\"><span translate=\\\"PRODUCTS.BILLING_FREQUENCY\\\"></span></cell>\\n          <cell flex=\\\"0 0 115px\\\" class=\\\"ff-center show-xl\\\" ng-if=\\\"productType.id === 'services'\\\"><span translate=\\\"PRODUCTS.SHOW_FOR_SIGN_UP\\\"></span></cell>\\n          <cell flex=\\\"1 1 260px\\\" class=\\\"show-md\\\" ng-if=\\\"productType.id === 'membership'\\\"><span translate=\\\"PRODUCTS.MEMBERSHIP_CATEGORY\\\"></span></cell>\\n          <cell flex=\\\"0 0 110px\\\" class=\\\"ff-center show-lg\\\" ng-if=\\\"productType.id === 'membership'\\\"><span translate=\\\"PRODUCTS.IS_CREDITABLE\\\"></span></cell>\\n          <cell flex=\\\"1 3 330px\\\" class=\\\"show-xl\\\" ng-if=\\\"productType.id === 'membership'\\\"><span translate=\\\"PRODUCTS.PASS_PRODUCT\\\"></span></cell>\\n          <cell flex=\\\"0 0 90px\\\" class=\\\"ff-center show-md\\\" ng-if=\\\"['registration', 'print', 'services'].indexOf(productType.id) >= 0\\\"><span translate=\\\"PRODUCTS.TAXABLE\\\"></span></cell>\\n          <cell flex=\\\"1 2 600px\\\" class=\\\"show-lg\\\" ng-if=\\\"['registration', 'print', 'services'].indexOf(productType.id) >= 0\\\"><span translate=\\\"PRODUCTS.DESCRIPTION\\\"></span></cell>\\n          <cell flex=\\\"1 2 400px\\\" class=\\\"show-md\\\" ng-if=\\\"productType.id === 'rental'\\\"><span translate=\\\"PRODUCTS.RESERVATION_CATEGORY\\\"></span></cell>\\n          <cell flex=\\\"0 0 110px\\\" class=\\\"ff-center show-xl\\\" ng-if=\\\"productType.id === 'rental'\\\"><span translate=\\\"PRODUCTS.ALLOW_RESERVATION_CREDITS\\\"></span></cell>\\n          <cell flex=\\\"0 0 75px\\\" class=\\\"ff-center show-xl\\\" ng-if=\\\"productType.id === 'rental'\\\"><span translate=\\\"PRODUCTS.BUY_ON_SPLASH_PAGE\\\"></span></cell>\\n          <cell flex=\\\"0 0 75px\\\" class=\\\"ff-right show-xl\\\" ng-if=\\\"productType.id === 'rental'\\\"><span translate=\\\"PRODUCTS.PASS_SIZE\\\"></span></cell>\\n          <cell flex=\\\"0 0 80px\\\" class=\\\"ff-center show-lg\\\" ng-if=\\\"productType.id === 'rental'\\\"><span translate=\\\"PRODUCTS.TAXABLE\\\"></span></cell>\\n          <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" flex=\\\"none\\\" class=\\\"buttons-row zero-height\\\" title=\\\"{{'GLOBAL.BTN_EDIT' | translate }}\\\"></ff-btn>\\n        </ff-row>\\n      </ff-header>\\n\\n      <ff-row ng-repeat=\\\"product in productType.products\\\">\\n        <ff-static flex=\\\"0 0 80px\\\">{{::product.code}}</ff-static>\\n        <ff-static flex=\\\"1 2 400px\\\">{{::product.name}}</ff-static>\\n        <ff-static flex=\\\"0 0 105px\\\" class=\\\"ff-center show-xl\\\" ng-if=\\\"productType.id === 'services'\\\">{{::product.billingFrequency.name}}</ff-static>\\n        <ff-static flex=\\\"0 0 115px\\\" class=\\\"ff-center show-xl\\\" ng-if=\\\"productType.id === 'services'\\\">{{::!product.hideInSelfRegistration | yesno}}</ff-static>\\n        <ff-static flex=\\\"1 1 260px\\\" class=\\\"show-md\\\" ng-if=\\\"productType.id === 'membership'\\\">{{::product.membershipCategoryName | nd}}</ff-static>\\n        <ff-static flex=\\\"0 0 110px\\\" class=\\\"ff-center show-lg\\\" ng-if=\\\"productType.id === 'membership'\\\">{{::product.isCreditable | yesno}}</ff-static>\\n        <ff-static flex=\\\"1 3 330px\\\" class=\\\"show-xl\\\" ng-if=\\\"productType.id === 'membership'\\\">{{::product.passProductName | nd}}</ff-static>\\n        <ff-static flex=\\\"0 0 90px\\\" class=\\\"ff-center show-md\\\" ng-if=\\\"['registration', 'print', 'services'].indexOf(productType.id) >= 0\\\">{{::product.taxable | yesno}}</ff-static>\\n        <ff-static flex=\\\"1 2 600px\\\" class=\\\"show-lg\\\" ng-if=\\\"['registration', 'print', 'services'].indexOf(productType.id) >= 0\\\">{{::product.description | nd}}</ff-static>\\n        <ff-static flex=\\\"1 2 400px\\\" class=\\\"show-md\\\" ng-if=\\\"productType.id === 'rental'\\\">{{::product.reservationCategoryName}}</ff-static>\\n        <ff-static flex=\\\"0 0 110px\\\" class=\\\"ff-center show-xl\\\" ng-if=\\\"productType.id === 'rental'\\\">{{::product.allowReservationCredits | yesno}}</ff-static>\\n        <ff-static flex=\\\"0 0 75px\\\" class=\\\"ff-center show-xl\\\" ng-if=\\\"productType.id === 'rental'\\\">{{::product.canBuyOnSplashPage | yesno}}</ff-static>\\n        <ff-static flex=\\\"0 0 75px\\\" class=\\\"ff-right show-xl\\\" ng-if=\\\"productType.id === 'rental'\\\">{{::product.passSize}}</ff-static>\\n        <ff-static flex=\\\"0 0 80px\\\" class=\\\"ff-center show-lg\\\" ng-if=\\\"productType.id === 'rental'\\\">{{::product.taxable | yesno}}</ff-static>\\n        <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" flex=\\\"none\\\" class=\\\"buttons-row\\\" title=\\\"{{'GLOBAL.BTN_EDIT' | translate}}\\\" ff-click=\\\"vm.edit(product)\\\"></ff-btn>\\n      </ff-row>\\n    </div>\\n  </ff-panel> </script> \";\n// Exports\nmodule.exports = code;","import './reservation-category.scss';\nimport ffRichtextDirective from 'shared/ff-richtext/ff-richtext.directive';\nimport keese from 'shared/drag-n-drop/keese.service';\n\nexport default angular.module('deskworks.inventory.reservationCategory', [\n  ffRichtextDirective.name,\n  keese.name,\n  'deskworks.helper',\n  'deskworks.reservationCategory.service',\n])\n\n  .controller('InventoryReservationCategoryEditCtrl', function($window, $translate, keese, dwAlerts, state, helper,\n                                                               reservationCategory, reservationCategories,\n                                                               reservationCategoryService) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant(\n      reservationCategory.id === 'new' ? 'RESERVATION_CATEGORIES.NEW.PAGE_TITLE' : 'RESERVATION_CATEGORIES.EDIT.PAGE_TITLE'\n    ));\n\n    vm.category = reservationCategory;\n    vm.hours = [0, 1, 2, 12, 24, 48, 72, 120, 168];\n    vm.cancellation = [\n      { notice: 'RESERVATION_CATEGORIES.NOTICE_NON_MEMBER', hint: 'RESERVATION_CATEGORIES.NOTICE_NON_MEMBER.HINT', model: vm.category.cancellationNonMemberNoticeHours },\n      { notice: 'RESERVATION_CATEGORIES.NOTICE_MEMBER', hint: 'RESERVATION_CATEGORIES.NOTICE_MEMBER.HINT', model: vm.category.cancellationMemberNoticeHours },\n    ];\n\n    // Don't show photo placeholder\n    if (vm.category.photos) {\n      const photoPlaceholderIdx = helper.findIndex(vm.category.photos, null);\n      if (photoPlaceholderIdx >= 0) {\n        vm.category.photos.splice(photoPlaceholderIdx, 1);\n      }\n    }\n\n    /**\n     * Save Reservation Category handler\n     */\n    vm.save = form => {\n      if (helper.pointFirstInvalid('#reservationCategory')) return;\n\n      const data = {\n        name: vm.category.name,\n        description: vm.category.description,\n        cancellationNonMemberNoticeHours: vm.cancellation[0].model,\n        cancellationMemberNoticeHours: vm.cancellation[1].model,\n      };\n\n      let promise;\n      if (vm.category.id === 'new') {\n        data.order = keese.generate(reservationCategories[reservationCategories.length - 1] && reservationCategories[reservationCategories.length - 1].order);\n        promise = reservationCategoryService.create(state.getCurrentCenterId(), data);\n      } else {\n        promise = reservationCategoryService.update(state.getCurrentCenterId(), vm.category.id, data);\n      }\n\n      return promise\n        .then(result => {\n          form.$setPristine();\n          if (vm.category.id === 'new') return state.setPath('/reservation-types/' + result.id);\n        })\n        .catch(err => dwAlerts.error(err, 'Failed to save reservation category.'));\n    };\n\n    /**\n     * Remove Reservation Category handler\n     */\n    vm.remove = () => {\n      if ($window.confirm($translate.instant('RESERVATION_CATEGORIES.CONFIRM_DELETE'))) {\n        return reservationCategoryService.delete(state.getCurrentCenterId(), vm.category.id)\n          .then(() => state.setPath('/reservation-types'))\n          .catch(err => dwAlerts.error(err, 'Failed to remove reservation category.'));\n      }\n    };\n\n    /**\n     * Back button handler\n     */\n    vm.back = () => state.setPath('/reservation-types');\n\n    /**\n     * Add/Edit Photo handler\n     * @param $files - files to upload\n     * @param $invalidFiles - files rejected by ngfPattern directive\n     * @param photo - photo object, if missing - adding new photo, if present - updating existing photo\n     */\n    vm.uploadPhoto = ($files, $invalidFiles, photo) => {\n      if ($invalidFiles && $invalidFiles.length > 0)\n        return dwAlerts.error($translate.instant('RESERVATION_CATEGORIES.PHOTOS.INVALID_FORMAT'));\n\n      if ($files && $files.length > 0) {\n        let promise;\n\n        if (photo) { // Update photo\n          promise = reservationCategoryService.updatePhoto(state.getCurrentCenterId(), vm.category.id, photo.id, $files[0]);\n          photo.spin = true;\n        } else { // Create photo\n          promise = reservationCategoryService.createPhoto(state.getCurrentCenterId(), vm.category.id, $files[0]);\n          vm.spinAddPhoto = true;\n        }\n\n        return promise\n          .then(result => {\n            if (photo) { // Update photo\n              photo.url = result.data.url;\n            } else { // Create photo\n              vm.category.photos.push({\n                id: result.data.id,\n                url: result.data.url,\n              });\n            }\n          })\n          .catch(err => dwAlerts.error(err, 'Failed to upload reservation category photo.'))\n          .finally(() => {\n            vm.spinAddPhoto = false;\n            if (photo) photo.spin = false;\n          });\n      }\n    };\n\n    /**\n     * Remove Photo handler\n     */\n    vm.removePhoto = photo => {\n      if ($window.confirm($translate.instant('RESERVATION_CATEGORIES.PHOTOS.CONFIRM_DELETE'))) {\n        return reservationCategoryService.deletePhoto(state.getCurrentCenterId(), vm.category.id, photo.id)\n          .then(() => {\n            const idx = helper.findIndex(vm.category.photos, photo.id);\n            if (idx >= 0) vm.category.photos.splice(idx, 1);\n          })\n          .catch(err => dwAlerts.error(err, 'Failed to remove reservation category photo.'));\n      }\n    };\n  });\n","// Module\nvar code = \"<form name=\\\"formResType\\\" id=\\\"reservationCategory\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v\\\"> <ff-panel> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 200px\\\"><req translate=\\\"RESERVATION_CATEGORIES.NAME\\\"></req></ff-label> <ff-text flex=\\\"1 1 400px\\\" name=\\\"name\\\" ff-model=\\\"vm.category.name\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'RESERVATION_CATEGORIES.NAME' | translate}}\\\"></ff-text> </label> <ff-row> <ff-richtext ff-model=\\\"vm.category.description\\\"></ff-richtext> </ff-row> <label class=\\\"ff-row\\\" ng-repeat=\\\"customer in vm.cancellation\\\"> <ff-label flex=\\\"0 1 350px\\\"> <span> <span translate=\\\"{{customer.notice}}\\\"></span> <ff-hint><span translate=\\\"{{customer.hint}}\\\"></span></ff-hint> </span> </ff-label> <ff-select flex=\\\"0 0 52px\\\" ff-model=\\\"customer.model\\\" ff-options=\\\"hours for hours in vm.hours\\\"></ff-select> <ff-label><span translate=\\\"RESERVATION_CATEGORIES.HOURS\\\"></span></ff-label> </label> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"save\\\" type=\\\"submit\\\" ff-click=\\\"vm.save(formResType)\\\" ff-disabled=\\\"formResType.$pristine\\\"> <span translate=\\\"GLOBAL.BTN_SAVE\\\"></span> </ff-btn> <ff-btn sense=\\\"remove\\\" ng-if=\\\"vm.category.id !== 'new'\\\" ff-click=\\\"vm.remove()\\\"><span translate=\\\"GLOBAL.BTN_DELETE\\\"></span></ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> <ff-panel ng-if=\\\"vm.category.id !== 'new'\\\" ngf-drop=\\\"vm.uploadPhoto($files, $invalidFiles)\\\" ngf-pattern=\\\"'image/png,image/jpeg'\\\" ngf-drag-over-class=\\\"dragover\\\"> <ff-panel-header> <span translate=\\\"RESERVATION_CATEGORIES.PHOTOS.HEADER\\\"></span> <ff-hint><span translate=\\\"RESERVATION_CATEGORIES.PHOTOS.HINT\\\"></span></ff-hint> </ff-panel-header> <div class=\\\"ff-grid gutter-h-half\\\"> <ff-col flex=\\\"{md: '0 0 50%'}\\\" ng-repeat=\\\"photo in vm.category.photos\\\" class=\\\"res-cat-photos\\\"> <ff-img ff-src=\\\"{{photo.url}}\\\" ff-alt=\\\"{{vm.category.name}}\\\" img-placeholder=\\\"{{'GLOBAL.NO_PHOTO' | translate}}\\\"></ff-img> <ff-btn-group style=\\\"margin:.5rem 0\\\"> <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" title=\\\"{{'GLOBAL.BTN_EDIT' | translate}}\\\" ff-spin=\\\"photo.spin\\\" ngf-select=\\\"vm.uploadPhoto($files, $invalidFiles, photo)\\\" ngf-pattern=\\\"'image/png,image/jpeg'\\\" accept=\\\"image/png,image/jpeg\\\"></ff-btn> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\" title=\\\"{{'GLOBAL.BTN_DELETE' | translate}}\\\" ff-click=\\\"vm.removePhoto(photo)\\\"></ff-btn> </ff-btn-group> </ff-col> </div> <ff-btn-group> <ff-btn sense=\\\"add\\\" size=\\\"sm\\\" ngf-select=\\\"vm.uploadPhoto($files, $invalidFiles)\\\" ff-spin=\\\"vm.spinAddPhoto\\\" ngf-pattern=\\\"'image/png,image/jpeg'\\\" accept=\\\"image/png,image/jpeg\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> </ff-panel> </div> </form> \";\n// Exports\nmodule.exports = code;","import dnd from 'shared/drag-n-drop/dnd.service';\n\nexport default angular.module('deskworks.inventory.reservationCategories', [\n  'deskworks.state',\n  'deskworks.reservationCategory.service',\n  dnd.name,\n])\n\n  .controller('InventoryReservationCategoriesCtrl', function($scope, $translate, state, dnd, dwAlerts,\n                                                             reservationCategories, reservationCategoryService) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('RESERVATION_CATEGORIES.PAGE_TITLE'));\n\n    vm.categories = reservationCategories;\n\n    /**\n     * Edit Reservation Category handler\n     */\n    vm.edit = reservationType => state.setPath('/reservation-types/' + reservationType.id);\n\n    /**\n     * New Reservation Category handler\n     */\n    vm.new = () => state.setPath('/reservation-types/new');\n\n    /**\n     * Drop handler\n     */\n    vm.onDrop = (srcList, srcIndex, targetList, targetIndex) => {\n      const item = dnd.move(srcList, srcIndex, targetList, targetIndex);\n\n      item.$spin = true;\n      reservationCategoryService.update(state.getCurrentCenterId(), item.id, { order: item.order, })\n        .catch(err => dwAlerts.error(err, 'Failed to reorder reservation category.'))\n        .finally(() => delete item.$spin);\n\n      return true; // true is required by dnd-callback of dnd-list\n    };\n  });\n","// Module\nvar code = \"<div class=\\\"reservation-type-list\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel> <span ng-if=\\\"!vm.categories.length\\\" translate=\\\"RESERVATION_CATEGORIES.LIST.EMPTY\\\"></span> <ff-header ng-show=\\\"vm.categories.length\\\"> <ff-row> <cell flex=\\\"0 0 60%\\\"> <span> <span translate=\\\"RESERVATION_CATEGORIES.LIST.CATEGORY\\\"></span> <ff-hint ng-if=\\\"ffBlock.editMode\\\"><span translate=\\\"RESERVATION_CATEGORIES.LIST.HINT\\\"></span></ff-hint> </span> </cell> <cell flex=\\\"0 1 40%\\\" class=\\\"ff-center\\\"><span translate=\\\"RESERVATION_CATEGORIES.LIST.NOTICE\\\"></span></cell> <ff-btn size=\\\"xs\\\" flex=\\\"none\\\" class=\\\"buttons-row zero-height\\\"></ff-btn> </ff-row> </ff-header> <div ng-if=\\\"ffBlock.editMode\\\" dnd-list dnd-drop=\\\"callback({ targetList: vm.categories, targetIndex: index })\\\"> <ff-row ng-repeat=\\\"category in vm.categories\\\" dnd-draggable=\\\"null\\\" dnd-callback=\\\"vm.onDrop(vm.categories, $index, targetList, targetIndex)\\\" ff-dim=\\\"category.$spin\\\" ng-include=\\\"'reservationCategoryTpl'\\\"> </ff-row> </div> <div ng-if=\\\"!ffBlock.editMode\\\"> <ff-row ng-repeat=\\\"category in vm.categories\\\" ng-include=\\\"'reservationCategoryTpl'\\\"></ff-row> </div> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"new\\\" ff-click=\\\"vm.new()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> </div> </div> <script type=\\\"text/ng-template\\\" id=\\\"reservationCategoryTpl\\\"> <ff-static flex=\\\"0 0 60%\\\" ff-bind=\\\"category.name\\\"></ff-static>\\n  <ff-static flex=\\\"0 1 40%\\\" class=\\\"ff-center\\\">\\n    {{category.cancellationNonMemberNoticeHours | nd}} / {{category.cancellationMemberNoticeHours | nd}}\\n  </ff-static>\\n  <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" flex=\\\"none\\\" class=\\\"buttons-row\\\" title=\\\"{{'GLOBAL.BTN_EDIT' | translate}}\\\" ff-click=\\\"vm.edit(category)\\\"></ff-btn> </script> \";\n// Exports\nmodule.exports = code;","// extracted by extract-css-chunks-webpack-plugin","import reservationRulesDirective from 'shared/reservation-rules/reservation-rules.component';\nimport ReservationUnit from 'shared/services/inventory/reservation-unit.service';\n\nexport default angular.module('deskworks.inventory.reservationUnit.edit', [\n  'deskworks.reservationCategory.service',\n  reservationRulesDirective.name,\n  ReservationUnit.name,\n])\n\n  .controller('InventoryReservationUnitEditCtrl', function($scope, $route, $translate, $window, dwAlerts,\n                                                           state, helper, unit, categories, ReservationUnit) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant(\n      unit.id === 'new' ? 'RESERVATION_UNITS.NEW.PAGE_TITLE' : 'RESERVATION_UNITS.EDIT.PAGE_TITLE'\n    ));\n\n    $ctrl.unit = unit;\n    $ctrl.categories = categories;\n    $ctrl.areaUnit = (window.dwLocales.find(i => i.id === $scope.currentLocale) || {}).area || 'ft²';\n\n    /**\n     * Save Reservation Unit handler\n     */\n    $ctrl.saveReservationUnit = form => {\n      if (helper.pointFirstInvalid('#reservation-unit-edit')) return;\n\n      const data = helper.pick($ctrl.unit, [\n        'id',\n        'name',\n        'reservationTypeId',\n        'syncWithCalendar',\n        'calendarId',\n        'description',\n        'area',\n        'capacity',\n        'expectedUsePerMonth',\n      ]);\n      data.area = data.area ? +data.area : null;\n      data.capacity = data.capacity ? +data.capacity : null;\n      data.expectedUsePerMonth = data.expectedUsePerMonth ? +data.expectedUsePerMonth : null;\n\n      return ReservationUnit.save(state.getCurrentCenterId(), data)\n        .then(result => {\n          $ctrl.form.$setPristine();\n          if ($ctrl.unit.id === 'new') return state.setPath('/reservation-units/' + result.id);\n          $route.reload();\n        })\n        .catch(err => dwAlerts.error(err, 'Failed to save reservation unit.'));\n    };\n\n    /**\n     * Remove Reservation Unit handler\n     */\n    $ctrl.removeReservationUnit = () => {\n      if (confirm($translate.instant('RESERVATION_UNITS.CONFIRM_DELETE'))) {\n        return ReservationUnit.delete(state.getCurrentCenterId(), $ctrl.unit.id)\n          .then(() => state.setPath('/reservation-units'))\n          .catch(err => dwAlerts.error(err, 'Failed to remove reservation unit.'));\n      }\n    };\n\n    /**\n     * Upload Photo handler\n     */\n    $ctrl.uploadPhoto = function($files, $invalidFiles) {\n      if ($invalidFiles && $invalidFiles.length > 0) return dwAlerts.error($translate.instant('GLOBAL.PHOTO.INVALID_FORMAT'));\n      if ($files && $files.length > 0) {\n        $ctrl.spinUpload = true;\n        return ReservationUnit.uploadPhoto(state.getCurrentCenterId(), $ctrl.unit.id, $files[0])\n          .catch(err => dwAlerts.error(err, 'Failed to upload photo.'))\n          .finally(() => { $ctrl.spinUpload = false; })\n          .then(result => {\n            $ctrl.unit.thumbnail = result.data.thumbnail ? result.data.thumbnail  + '?' + Date.now() : $ctrl.unit.thumbnail;\n            $ctrl.unit.photo = result.data.photo + '?' + Date.now();\n          });\n      }\n    };\n\n    /**\n     * Delete photo\n     */\n    $ctrl.deletePhoto = () => {\n      if (!$window.confirm($translate.instant('GLOBAL.CONFIRM_DELETE_PHOTO'))) return;\n\n      return ReservationUnit.deletePhoto({ centerId: state.getCurrentCenterId(), id: $ctrl.unit.id })\n        .catch(err => dwAlerts.error(err, 'Failed to delete photo.'))\n        .then(() => {\n          $ctrl.unit.thumbnail = null;\n          $ctrl.unit.photo = null;\n        });\n    };\n\n    /**\n     * Back button handler\n     */\n    $ctrl.back = () => state.setPath('/reservation-units');\n\n    /**\n     * 'Sync With Calendar' change handler\n     */\n    $ctrl.calSyncChange = () => {\n      if (!$ctrl.unit.syncWithCalendar) $ctrl.unit.calendarId = null;\n      $ctrl.calendarIdEnabled = $ctrl.unit.syncWithCalendar;\n    };\n\n    $scope.$watch('state.getCurrentCenterId()', (nv, ov) => { if (nv !== ov) state.setPath('/reservation-units'); });\n  });\n","// Module\nvar code = \"<div class=\\\"ff-grid gutter-v\\\"> <form name=\\\"$ctrl.form\\\" id=\\\"reservation-unit-edit\\\" novalidate ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <ff-panel flex=\\\"{ md: '0 0 50%' }\\\"> <ff-panel-header> <span translate=\\\"RESERVATION_UNITS.GENERAL.HEADER\\\"></span> </ff-panel-header> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 170px\\\"><req translate=\\\"RESERVATION_UNITS.NAME\\\"></req></ff-label> <ff-text flex=\\\"1 1 300px\\\" name=\\\"name\\\" ff-model=\\\"$ctrl.unit.name\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'RESERVATION_UNITS.NAME' | translate}}\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 170px\\\"><req translate=\\\"RESERVATION_UNITS.CATEGORY\\\"></req></ff-label> <ff-select flex=\\\"1 1 300px\\\" ff-model=\\\"$ctrl.unit.reservationTypeId\\\" ff-options=\\\"cat.id as cat.name for cat in $ctrl.categories\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'RESERVATION_UNITS.CATEGORY' | translate}}\\\"></ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 170px\\\"><span translate=\\\"RESERVATION_UNITS.DESCRIPTION\\\"></span></ff-label> <ff-text flex=\\\"1 1 300px\\\" ff-model=\\\"$ctrl.unit.description\\\"></ff-text> </label> <ff-row> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 170px\\\"><span translate=\\\"RESERVATION_UNITS.AREA\\\" translate-values=\\\"{ areaUnit: $ctrl.areaUnit }\\\"></span></ff-label> <ff-number name=\\\"area\\\" flex=\\\"1 1 60px\\\" ff-model=\\\"$ctrl.unit.area\\\" ff-validate-alert=\\\"{{'RESERVATION_UNITS.AREA' | translate: { areaUnit: $ctrl.areaUnit } }}\\\"></ff-number> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 170px\\\"> <span> <span translate=\\\"RESERVATION_UNITS.CAPACITY\\\"></span> <ff-hint><span translate=\\\"RESERVATION_UNITS.CAPACITY.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-number name=\\\"area\\\" flex=\\\"1 1 60px\\\" ff-model=\\\"$ctrl.unit.capacity\\\" ff-validate-alert=\\\"{{'RESERVATION_UNITS.CAPACITY' | translate}}\\\"></ff-number> </label> </ff-row> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 170px\\\"> <span> <req translate=\\\"RESERVATION_UNITS.EXPECTED_USE_PER_MONTH\\\"></req> <ff-hint><span translate=\\\"RESERVATION_UNITS.EXPECTED_USE_PER_MONTH.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-number flex=\\\"1 1 300px\\\" ff-model=\\\"$ctrl.unit.expectedUsePerMonth\\\" ff-gte=\\\"0\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'RESERVATION_UNITS.EXPECTED_USE_PER_MONTH' | translate}}\\\"></ff-number> </label> <ff-static> <label> <ff-checkbox ff-model=\\\"$ctrl.unit.syncWithCalendar\\\" ff-label=\\\"{{'RESERVATION_UNITS.SYNC_WITH_CALENDAR' | translate}}\\\" ff-change=\\\"$ctrl.calSyncChange()\\\"></ff-checkbox> </label> </ff-static> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 170px\\\"> <span> <span translate=\\\"RESERVATION_UNITS.CALENDAR_ID\\\"></span> <ff-hint><span translate=\\\"RESERVATION_UNITS.CALENDAR_ID.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-text flex=\\\"1 1 300px\\\" name=\\\"calendarId\\\" ff-model=\\\"$ctrl.unit.calendarId\\\" ff-disabled=\\\"!$ctrl.calendarIdEnabled\\\" ff-validate-alert=\\\"{{'RESERVATION_UNITS.CALENDAR_ID' | translate}}\\\"></ff-text> </label> </ff-panel> <ff-panel flex=\\\"{ md: '0 0 50%' }\\\" ng-if=\\\"$ctrl.unit.id && $ctrl.unit.id !== 'new'\\\" ngf-drop=\\\"$ctrl.uploadPhoto($files, $invalidFiles)\\\" ngf-pattern=\\\"'image/png,image/jpeg'\\\" ngf-drag-over-class=\\\"dragover\\\"> <ff-panel-header> <span translate=\\\"GLOBAL.PHOTO\\\"></span> <ff-hint><span translate=\\\"RESERVATION_UNITS.PHOTO.HINT\\\"></span></ff-hint> </ff-panel-header> <ff-col style=\\\"height:100%\\\"> <ff-col flex=\\\"auto\\\"> <ff-img flex=\\\"auto\\\" ff-style=\\\"{ height: '100%', width: 'auto', 'object-fit': 'contain' }\\\" img-placeholder=\\\"1280 x 640\\\" ff-src=\\\"{{$ctrl.unit.thumbnail}}\\\" ff-src-hq=\\\"{{$ctrl.unit.photo}}\\\" ff-alt=\\\"{{$ctrl.unit.name}}\\\"></ff-img> </ff-col> <ff-btn-group flex=\\\"none\\\" class=\\\"ff-section-buttons\\\"> <ff-btn sense=\\\"upload\\\" size=\\\"sm\\\" ff-spin=\\\"$ctrl.spinUpload\\\" ngf-select=\\\"$ctrl.uploadPhoto($files, $invalidFiles)\\\" ngf-pattern=\\\"'image/png,image/jpeg'\\\" accept=\\\"image/png,image/jpeg\\\"> <span translate=\\\"GLOBAL.BTN_UPLOAD\\\"></span> </ff-btn> </ff-btn-group> </ff-col> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"save\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.saveReservationUnit()\\\" ff-disabled=\\\"$ctrl.form.$pristine\\\"> <span translate=\\\"GLOBAL.BTN_SAVE\\\"></span> </ff-btn> <ff-btn sense=\\\"remove\\\" ng-if=\\\"$ctrl.unit.id !== 'new'\\\" ff-click=\\\"$ctrl.removeReservationUnit()\\\"> <span translate=\\\"GLOBAL.BTN_DELETE\\\"></span> </ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> </form> <reservation-rules center-id=\\\"state.getCurrentCenterId()\\\" reservation-unit-id=\\\"$ctrl.unit.id\\\" ng-if=\\\"$ctrl.unit.id !== 'new'\\\" ff-bulk-read-only></reservation-rules> </div> \";\n// Exports\nmodule.exports = code;","import ReservationUnit from 'shared/services/inventory/reservation-unit.service';\n\nexport default angular.module('deskworks.inventory.reservationUnit.list', [\n  'deskworks.reservationRules.optsWhoCanReserve',\n  ReservationUnit.name,\n])\n\n  .controller('InventoryReservationUnitListCtrl', function($scope, $translate, state, helper,\n                                                           reservationUnits, optsWhoCanReserve) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('RESERVATION_UNITS.PAGE_TITLE'));\n\n    vm.reservationUnits = reservationUnits;\n\n    vm.reservationUnits.forEach(unit => {\n      unit.whoCanReserve = (helper.find(optsWhoCanReserve, unit.whoCanReserve) || {}).name;\n    });\n\n    /**\n     * Edit Reservation Unit handler\n     */\n    vm.edit = reservationUnit => state.setPath('/reservation-units/' + reservationUnit.id);\n\n    /**\n     * New Reservation Unit handler\n     */\n    vm.new = () => state.setPath('/reservation-units/new');\n  });\n","// Module\nvar code = \"<div class=\\\"reservation-unit-list\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel> <span ng-if=\\\"!vm.reservationUnits.length\\\" translate=\\\"RESERVATION_UNITS.LIST.EMPTY\\\"></span> <ff-header ng-show=\\\"vm.reservationUnits.length > 0\\\"> <ff-row> <cell flex=\\\"1 1 33%\\\"><span translate=\\\"RESERVATION_UNITS.UNIT\\\"></span></cell> <cell flex=\\\"1 1 33%\\\" class=\\\"show-sm\\\"><span translate=\\\"RESERVATION_UNITS.CATEGORY\\\"></span></cell> <cell flex=\\\"1 0 16%\\\" class=\\\"ff-center\\\"><span translate=\\\"RESERVATION_UNITS.WHO_CAN_RESERVE\\\"></span></cell> <cell flex=\\\"1 0 16%\\\" class=\\\"ff-center\\\"><span translate=\\\"RESERVATION_UNITS.SYNC_WITH_CALENDAR\\\"></span></cell> <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" flex=\\\"none\\\" class=\\\"buttons-row zero-height\\\" title=\\\"{{'GLOBAL.BTN_EDIT' | translate}}\\\"></ff-btn> </ff-row> </ff-header> <ff-row ng-repeat=\\\"unit in vm.reservationUnits\\\"> <ff-static flex=\\\"1 1 33%\\\" ff-bind=\\\"unit.name\\\"></ff-static> <ff-static flex=\\\"1 1 33%\\\" class=\\\"show-sm\\\" ff-bind=\\\"unit.reservationTypeName\\\"></ff-static> <ff-static flex=\\\"1 0 16%\\\" class=\\\"ff-center\\\" ff-bind=\\\"unit.whoCanReserve\\\"></ff-static> <ff-static flex=\\\"1 0 16%\\\" class=\\\"ff-center\\\" ff-bind=\\\"unit.syncWithCalendar | yesno\\\"></ff-static> <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" flex=\\\"none\\\" class=\\\"buttons-row\\\" ff-click=\\\"vm.edit(unit)\\\" title=\\\"{{'GLOBAL.BTN_EDIT' | translate}}\\\"></ff-btn> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"new\\\" ff-click=\\\"vm.new()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> </div> </div> \";\n// Exports\nmodule.exports = code;","/**\n * autofocus directive\n */\nexport default angular.module('autofocusDirective', [])\n\n  .directive('autofocus', function($timeout) {\n    return {\n      restrict: 'A',\n      link: ($scope, $element, $attrs) => {\n        if ($attrs.autofocus === 'false') return;\n        const input = $element[0].parentNode.querySelector('input') || $element[0].parentNode.querySelector('select') || $element[0].parentNode.querySelector('button');\n        if (input) $timeout(() => input.focus());\n      },\n    };\n  });\n","import 'textangularjs';\nimport 'textangularjs/dist/textAngular.css';\nimport './ff-richtext.scss';\n\n/**\n * ffRichtext directive - wrapper for 3rd party textAngular\n */\nexport default angular.module('ffRichtext', ['textAngular'])\n\n  .directive('ffRichtext', function(ffHelper) {\n    return {\n      restrict: 'E',\n      scope: true,\n\n      compile: function(tElement, tAttrs) {\n        const input = angular.element('<text-angular></text-angular>');\n        ffHelper.copyInnerAttrs(tElement, tAttrs, input);\n        tElement.append(input);\n\n        return this.link;\n      },\n\n      link: function($scope, $element, $attrs) {\n        const content = angular.element($element[0].querySelector('[contenteditable]'));\n\n        $scope.$watch('ffBlock.editMode', function(editMode) {\n          if (angular.isUndefined(editMode)) return;\n          $element.toggleClass('ff-read-only', !editMode);\n          content.attr('contenteditable', editMode);\n        });\n      },\n    };\n  });\n","// extracted by extract-css-chunks-webpack-plugin","import template from './printer-usage-free-copies.tpl.html';\n\n/**\n * printerUsageFreeCopies directive - free copies configuration for Membership Product -> Free Copies\n */\nexport default angular.module('deskworks.printerUsageFreeCopies', [\n  'deskworks.printerUsageTypeNames',\n])\n\n  .directive('printerUsageFreeCopies', function() {\n    return {\n      template,\n      restrict: 'EAC',\n      scope: true,\n      controller: 'PrinterUsageFreeCopiesCtrl as $ctrl',\n      bindToController: {\n        types: '<freeCopiesSettings',\n      },\n    };\n  })\n\n  .controller('PrinterUsageFreeCopiesCtrl', function(printerUsageTypeNames) {\n    const $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = () => {\n      $ctrl.typeNames = printerUsageTypeNames;\n    };\n  });\n","// Module\nvar code = \"<ff-panel> <ff-panel-header><span translate=\\\"PRINTER_USAGE_SETTINGS.FREE_COPIES.HEADER\\\"></span></ff-panel-header> <label class=\\\"ff-row\\\" ng-repeat=\\\"type in $ctrl.types\\\"> <ff-label flex=\\\"0 1 200px\\\"><req>{{$ctrl.typeNames[type.printerUsageType]}}</req></ff-label> <ff-number flex=\\\"0 0 50px\\\" ff-model=\\\"type.freeCount\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'PRINTER_USAGE_SETTINGS.FREE_COPIES.FOR' | translate:{ type: $ctrl.typeNames[type.printerUsageType] } }}\\\"></ff-number> <ff-static></ff-static> </label> </ff-panel> \";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}