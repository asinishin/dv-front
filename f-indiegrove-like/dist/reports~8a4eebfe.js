(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{"+1+s":function(e,t){e.exports='<div id="reservationReport" class="gutter-v"> <form name="formReservationReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <report-columns model="vm.config.reportColumns"></report-columns> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="vm.config.reportOptions"> <report-dates model="vm.config.reportDates" embed="0 0 100px"></report-dates> <report-order-by model="vm.config.orderBy" report-columns="vm.config.reportColumns.columns"></report-order-by> </report-options> <report-owner-region model="vm.config.reportOwnerRegion" report-data="vm.config.reportData"></report-owner-region> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="vm.downloadPdf()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="vm.downloadCsv()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="vm.pdf"></div> </ff-panel> </div> '},"+aob":function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("hsT8"),o=r.n(n),a=r("yCd9"),s=r.n(a),l=r("NOor"),i=r.n(l),u=r("G0Vy"),c=r.n(u),d=r("6RpP"),f=r.n(d),p=r("WgSX"),m=r("G6E5"),R=r("5/DJ"),g=r("LTMe");t.default=angular.module("deskworks.RentRollReportCtrl",[p.a.name,m.a.name,R.a.name,g.a.name,"deskworks.state","deskworks.reports.reportColumns","deskworks.reports.ReportBuilder","deskworks.RentRollReport","deskworks.rentRollReportColumns"]).controller("RentRollReportCtrl",["$scope","$timeout","$translate","$filter","helper","state","reportHelper","reportStyles","ReportBuilder","RentRollReport","rentRollReportColumns",function(e,t,r,n,a,l,u,d,p,m,R){var g,E=this;function y(e){var t,n,l={columns:o()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:[],styles:[]},u=s()(n=["area","amount","discount","total"]).call(n,(function(e){var t;return{dataKey:e,amount:0,colIndex:i()(t=l.columns).call(t,(function(t){return t.dataKey===e}))}})),p=-1;if(u.some((function(e){var t;return(p=i()(t=l.columns).call(t,(function(t){return t.dataKey===e.dataKey})))>=0})),e.reportData.forEach((function(t){var n,o=E.reportBuilder.sortData(t.recurringCharges,e.orderBy),i=s()(n=angular.copy(u)).call(n,(function(e){return e.amount=0,e}));if(o.forEach((function(e,t){var r;l.rows.push(s()(r=l.columns).call(r,(function(t){return e[t.dataKey]}))),l.styles.push(t%2?null:d.rowOdd),i.forEach((function(t){t.amount+=e[t.dataKey]||0}))})),p>=0){var m,R,g,y=c()(m=Array(l.columns.length)).call(m,!1);if(p>0)y[p-1]=f()(R=f()(g="".concat(t.productCategoryCode," ")).call(g,t.productCategoryName," ")).call(R,r.instant("REPORTS.TOTAL"),":");i.forEach((function(e){y[e.colIndex]=a.round(e.amount)})),l.rows.push(y),l.styles.push(d.h2)}u.forEach((function(e,t){e.amount+=i[t].amount}))})),p>=0){var m,R;l.rows.push(c()(m=Array(l.columns.length)).call(m,!1)),l.styles.push(d.h3);var g=c()(R=Array(l.columns.length)).call(R,!1);p>0&&(g[p-1]="".concat(r.instant("RENT_ROLL_REPORT.TOTAL_RENT_ROLL"),":")),u.forEach((function(e){g[e.colIndex]=a.round(e.amount)})),l.rows.push(g),l.styles.push(d.h3)}return l}E.config={reportName:r.instant("RENT_ROLL_REPORT.REPORT_NAME"),reportOptions:{},reportColumns:{columns:angular.copy(R)},getReportData:function(){return m.query({centerId:E.config.reportOptions.centerId||null})}},l.setPageTitle(E.config.reportName),E.reportBuilder=new p(E.config),e.$watch((function(){return{reportOptions:E.config.reportOptions,reportColumns:E.config.reportColumns,orderBy:E.config.orderBy}}),(function(){g&&(t.cancel(g),g=null),g=t((function(){E.pdf=null,angular.isUndefined(E.config.reportOptions.centerId)||E.reportBuilder.buildPdf(y).then((function(e){E.pdf=e}))}),100)}),!0),E.downloadPdf=function(){E.pdf&&u.download({blob:E.pdf,fileName:E.reportBuilder.getReportFileName("pdf")})},E.downloadCsv=function(){E.pdf&&u.download({blob:E.reportBuilder.buildCsv(y),fileName:E.reportBuilder.getReportFileName("csv")})}}])},"0o3Q":function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("6RpP"),o=r.n(n);t.default=angular.module("deskworks.reports.optsRbcReportByPeriod",["deskworks.reports.optsReportByPeriod"]).factory("optsRbcReportByPeriod",["$rootScope","$translate","$filter","optsReportByPeriod",function(e,t,r,n){var a,s=function(e){return r("date")(e,"mediumDate")},l=o()(a=[{id:"none",_name:"GLOBAL.NONE",format:function(e,t){var r;return o()(r="".concat(s(e)," - ")).call(r,s(t))}}]).call(a,n);function i(){l.forEach((function(e){e.name=t.instant(e._name)}))}return i(),e.$on("$setTranslationsSuccess",i),l}])},"1THZ":function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("03wM"),o=r.n(n),a=r("Ekwr"),s=r.n(a),l=r("hsT8"),i=r.n(l),u=r("lvz6"),c=r.n(u),d=r("yKah"),f=r.n(d),p=r("fzuT"),m=r.n(p),R=r("G6E5"),g=r("WgSX"),E=r("CLLE"),y=r("5/DJ"),h=r("LTMe"),T=r("Tqzu"),O=r("Amco"),v=r("ycie"),C=r("7ZQE"),N=r("3Ei7"),_=r("vRjO"),S=r("Tx5W");function w(e,t){var r=o()(e);if(s.a){var n=s()(e);t&&(n=i()(n).call(n,(function(t){return c()(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):f.a?Object.defineProperties(e,f()(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,c()(r,t))}))}return e}t.default=angular.module("deskworks.ReservationUtilizationReportCtrl",[g.a.name,E.a.name,"fileSaver",R.a.name,y.a.name,h.a.name,T.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.ReservationUtilizationReport","deskworks.reservationCategory.service",O.default.name,v.default.name,N.default.name,C.default.name,_.default.name,S.default.name]).controller("ReservationUtilizationReportCtrl",["$scope","$q","$location","$timeout","$translate","$filter","helper","dwAlerts","debounce","state","fileSaver","reportStyles","ReportBuilder","reportHelper","ReservationUtilizationReport","reservationUtilizationDetailedActualAggregate","reservationUtilizationDetailedActualReport","reservationUtilizationDetailedActualChart","reservationCategoryService","reservationUtilizationActualExpectedReport","reservationUtilizationActualExpectedAggregate","reservationUtilizationActualExpectedChart",function(e,t,r,n,o,a,s,l,i,u,c,d,f,p,m,R,g,E,y,h,T,O){var v=this,C=p.paramsChanged,N=p.loadResources;v.config={reportName:o.instant("RESERVATION_UTILIZATION_REPORT.REPORT_NAME")},v.params={fromDate:u.getParam("fromDate")?a("toDate")(u.getParam("fromDate")):moment().subtract(1,"month").startOf("month"),toDate:u.getParam("toDate")?a("toDate")(u.getParam("toDate")):moment().subtract(1,"month").endOf("month"),mode:u.getParam("mode")||"detailedActual"},v.resources=null,v.data=null,u.setPageTitle(v.config.reportName),e.$watch("$ctrl.params",i((function(e,r){u.setParam("mode",v.params.mode),v.pdf=null,v.report=null,s.pointFirstInvalid("#reservationUtilizationReport")||v.params.fromDate&&v.params.toDate&&(C(e,r,["fromDate","toDate","centerId"])&&(v.data=null),t.all({resources:v.resources||N((function(){return{categories:y.query(u.getCurrentCenterId()).catch((function(e){return l.error(e,"Failed to query reservation categories.")}))}})),data:v.data||m.query(v.params).catch((function(e){return l.error(e,"Failed to query report.")}))}).then((function(e){v.resources=e.resources,v.data=e.data})).then((function(){if("actualExpected"===v.params.mode){var e=T(v.data,v.resources.categories);v.report=h(v.params,e),v.chart=O(e)}else{var t=R(v.params,v.data);v.report=g(v.params,t),v.chart=E(t)}var r=p.buildPdf({config:P(P({},v.config),v.params),report:v.report,resources:v.resources});v.pdf=r.output("blob")})))}),100),!0),v.downloadPdf=function(){if(v.pdf){var e=p.getReportFileName({extension:"pdf",config:P(P({},v.config),v.params),resources:v.resources});p.download({blob:v.pdf,fileName:e})}},v.downloadCsv=function(){if(v.pdf){var e=p.getReportFileName({extension:"csv",config:P(P({},v.config),v.params),resources:v.resources}),t=p.buildCsv({report:v.report});p.download({blob:t,fileName:e})}}}])},"2S09":function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("yCd9"),o=r.n(n),a=r("hsT8"),s=r.n(a),l=r("KK/u"),i=r.n(l),u=r("Njxs"),c=r("WgSX"),d=r("G6E5"),f=r("5/DJ"),p=r("LTMe");t.default=angular.module("deskworks.reports.membershipReport",[c.a.name,d.a.name,f.a.name,p.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportColumns","deskworks.reports.reportOwnerRegion","deskworks.reports.membershipReport.service","deskworks.reports.membershipReportColumns",u.a.name]).controller("MembershipReportCtrl",["$scope","$timeout","$location","$translate","state","helper","reportHelper","ReportBuilder","MembershipReport","membershipReportColumns","fields","reportStyles",function(e,t,r,n,a,l,u,c,d,f,p,m){var R,g=this;function E(e){var t,r,n,a={columns:s()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:e.reportData,styles:[]};return a.rows=i()(u).call(u,a.rows,e.orderBy),a.rows=o()(r=a.rows).call(r,(function(e){var t;return o()(t=a.columns).call(t,(function(t){return e[t.dataKey]}))})),a.styles=o()(n=a.rows).call(n,(function(e,t){return t%2?null:m.rowOdd})),a}g.config={reportName:n.instant("MEMBERSHIP_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:angular.copy(f)},getReportData:function(){var e={centerId:g.config.reportOptions.centerId,ownerId:g.config.reportOwnerRegion.ownerId,regionId:g.config.reportOwnerRegion.regionId};return d.query(angular.extend(e,g.membershipFilter)).$promise.then((function(e){return o()(e).call(e,(function(e){return e.fields&&delete(e=angular.extend(e,e.fields)).fields,e}))}))}},a.setPageTitle(g.config.reportName),g.reportBuilder=new c(g.config),angular.forEach(p,(function(e){g.config.reportColumns.columns.push({dataKey:e.id,title:e.name,include:!1})})),e.$watch((function(){return{reportOptions:g.config.reportOptions,reportColumns:g.config.reportColumns,reportOwnerRegion:g.config.reportOwnerRegion,membershipFilter:g.membershipFilter,orderBy:g.config.orderBy}}),(function(e,r){R&&(t.cancel(R),R=null),R=t((function(){g.pdf=null,e&&r&&!angular.equals(e.membershipFilter,r.membershipFilter)&&(g.config.reportData=null),angular.isUndefined(g.config.reportOptions.centerId)||g.reportBuilder.buildPdf(E).then((function(e){g.pdf=e}))}),100)}),!0),g.downloadPdf=function(){g.pdf&&u.download({blob:g.pdf,fileName:g.reportBuilder.getReportFileName("pdf")})},g.downloadCsv=function(){g.pdf&&u.download({blob:g.reportBuilder.buildCsv(E),fileName:g.reportBuilder.getReportFileName("csv")})}}])},"2Xc8":function(e,t){e.exports='<div id="recurringBillingChangeReport" class="gutter-v"> <form> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-dates model="$ctrl.params"></report-dates> <report-columns model="$ctrl.params"></report-columns> </div> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <report-options model="$ctrl.params"> <report-by-period model="$ctrl.params.byPeriod" opts="$ctrl.optsByPeriod"></report-by-period> <report-order-by model="$ctrl.params.orderBy" report-columns="$ctrl.params.columns" levels="2"></report-order-by> </report-options> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <ff-panel-header><span translate="RECURRING_BILLING_CHANGE_REPORT.CHART.HEADER"></span></ff-panel-header> <div ff-dim="!$ctrl.pdf"> <chart config="$ctrl.chart" style="max-height:228px"></chart> </div> </ff-panel> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},"3DDD":function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.membershipReportColumns",[]).factory("membershipReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"company",_title:"MEMBERSHIP_REPORT.COLUMNS.COMPANY",include:!0,styles:{minCellWidth:150}},{dataKey:"name",_title:"MEMBERSHIP_REPORT.COLUMNS.NAME",include:!0,styles:{minCellWidth:150}},{dataKey:"address",_title:"MEMBERSHIP_REPORT.COLUMNS.ADDRESS",include:!1,styles:{minCellWidth:150}},{dataKey:"comments",_title:"MEMBERSHIP_REPORT.COLUMNS.COMMENTS",include:!1,styles:{minCellWidth:250}},{dataKey:"email",_title:"MEMBERSHIP_REPORT.COLUMNS.EMAIL",include:!1,styles:{minCellWidth:150}},{dataKey:"phone",_title:"MEMBERSHIP_REPORT.COLUMNS.PHONE",include:!1,styles:{minCellWidth:100}},{dataKey:"facility",_title:"MEMBERSHIP_REPORT.COLUMNS.FACILITY",include:!1,styles:{minCellWidth:150}},{dataKey:"joinDate",_title:"MEMBERSHIP_REPORT.COLUMNS.JOIN_DATE",include:!1,styles:{minCellWidth:100},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"occupation",_title:"MEMBERSHIP_REPORT.COLUMNS.OCCUPATION",include:!0,styles:{minCellWidth:150}},{dataKey:"pricelist",_title:"MEMBERSHIP_REPORT.COLUMNS.PRICE_LIST",include:!0,styles:{minCellWidth:160}},{dataKey:"status",_title:"MEMBERSHIP_REPORT.COLUMNS.STATUS",include:!0,styles:{cellWidth:"wrap"}},{dataKey:"printerCodes",_title:"MEMBERSHIP_REPORT.COLUMNS.PRINTER_CODES",include:!1},{dataKey:"leadSource",_title:"MEMBERSHIP_REPORT.COLUMNS.LEAD_SOURCE",include:!1}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},"3Ei7":function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n),a=(r("3dw1"),r("5/DJ")),s=r("5q+n");t.default=angular.module("deskworks.reports.reservationUtilizationActualExpectedReport",[a.a.name,s.default.name]).factory("reservationUtilizationActualExpectedReport",["$filter","$translate","helper","reportStyles","reservationUtilizationActualExpectedColumns",function(e,t,r,n,a){return function(e,r){var s={columns:a,rows:[],styles:[]},l=r.reduce((function(e,t){return e+t.expectedUse}),0),i=r.reduce((function(e,t){return e+t.actualUse}),0);return s.rows.push([t.instant("REPORTS.TOTALS").toUpperCase(),l,i,l?100*i/l:0]),s.styles.push(n.h1),r.forEach((function(e){var t;s.rows.push(o()(t=s.columns).call(t,(function(t){return e[t.dataKey]}))),s.styles.push(n.h2),e.units.forEach((function(e,t){var r;s.rows.push(o()(r=s.columns).call(r,(function(t){return e[t.dataKey]}))),s.styles.push(t%2?null:n.rowOdd)}))})),s}}])},"4DcZ":function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n);t.default=angular.module("deskworks.reports.revenueForecastChart",[]).factory("revenueForecastChart",["$translate","$filter","helper","whitelabel",function(e,t,r,n){return function(r){var a,s,l,i=o()(a=r[0].totals).call(a,(function(e){return t("date")(t("toDate")(e.month+"-01"),"MMM yyyy")})),u=o()(s=r[0].totals).call(s,(function(e,t){return r.reduce((function(e,r){return e+r.totals[t].committedAmount}),0)})),c=o()(l=r[0].totals).call(l,(function(e,t){return r.reduce((function(e,r){return e+r.totals[t].riskAmount}),0)}));return{type:"bar",data:{labels:i,datasets:[{name:e.instant("REVENUE_FORECAST_REPORT.COMMITTED_REVENUE"),data:u,backgroundColor:n.getProperty("--brand-color"),maxBarThickness:50},{name:e.instant("REVENUE_FORECAST_REPORT.AT_RISK_REVENUE"),data:c,backgroundColor:n.getProperty("--danger-color"),maxBarThickness:50}]},options:{tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(e,r){var n=r.datasets[e.datasetIndex];return n.name+": "+t("ncurrency")(n.data[e.index])}}},legend:{display:!1},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{min:0,callback:function(e){return t("ncurrency")(e,void 0,0)}}}]}}}}}])},"4c/s":function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.paymentReconciliationReportColumns",[]).factory("paymentReconciliationReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userName",_title:"REPORTS.COLUMNS.USER_NAME",include:!0,defaultOrder:!0,styles:{minCellWidth:100}},{dataKey:"userCompany",_title:"REPORTS.COLUMNS.USER_COMPANY",include:!0,styles:{cellWidth:150}},{dataKey:"orderId",_title:"REPORTS.COLUMNS.ORDER_ID",include:!0,styles:{halign:"right"}},{dataKey:"productName",_title:"REPORTS.COLUMNS.ITEM",include:!0},{dataKey:"productCode",_title:"REPORTS.COLUMNS.ITEM_CODE",include:!0,styles:{halign:"right"}},{dataKey:"quantity",_title:"REPORTS.COLUMNS.QUANTITY",include:!0,styles:{halign:"right"}},{dataKey:"amount",_title:"REPORTS.COLUMNS.AMOUNT",include:!0,styles:{halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"REPORTS.COLUMNS.TOTAL",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},"5q+n":function(e,t,r){"use strict";r.r(t);var n=r("03wM"),o=r.n(n),a=r("Ekwr"),s=r.n(a),l=r("hsT8"),i=r.n(l),u=r("lvz6"),c=r.n(u),d=r("yKah"),f=r.n(d),p=r("fzuT"),m=r.n(p);r("3dw1");function R(e,t){var r=o()(e);if(s.a){var n=s()(e);t&&(n=i()(n).call(n,(function(t){return c()(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):f.a?Object.defineProperties(e,f()(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,c()(r,t))}))}return e}t.default=angular.module("deskworks.reservationUtilizationActualExpectedColumns",[]).factory("reservationUtilizationActualExpectedColumns",["$rootScope","$translate","helper",function(e,t,r){var n=[{dataKey:"name",_title:"RESERVATION_UNITS.UNIT"},g({dataKey:"expectedUse",_title:"RESERVATION_UTILIZATION_REPORT.COLUMNS.EXPECTED_USAGE",styles:{halign:"right"}},o(1)),g({dataKey:"actualUse",_title:"RESERVATION_UTILIZATION_REPORT.COLUMNS.ACTUAL_USAGE",styles:{halign:"right"}},o(1)),{dataKey:"utilization",_title:"RESERVATION_UTILIZATION_REPORT.COLUMNS.UTILIZATION",styles:{halign:"right"},pdf:function(e){return r.round(e,1)+"%"},csv:function(e){return r.round(e,1)+"%"}}];function o(e){return{pdf:function(t){return r.round(t,e)},csv:function(t){return r.round(t,e)}}}function a(){n.forEach((function(e){e.title=t.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},"6avE":function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("yCd9"),o=r.n(n),a=r("hsT8"),s=r.n(a),l=r("WgSX"),i=r("G6E5"),u=r("5/DJ"),c=r("LTMe");t.default=angular.module("deskworks.reports.priceListReport",[l.a.name,i.a.name,u.a.name,c.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.priceListReport.service","deskworks.reports.priceListReportColumns"]).controller("PriceListReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","reportHelper","reportStyles","ReportBuilder","PriceListReport","priceListReportColumns",function(e,t,r,n,a,l,i,u,c,d,f){var p,m=this;function R(e){var t,a={columns:e.reportColumns.columns,rows:[],styles:[]};return angular.forEach(e.reportData.pricelists,(function(s){var l;e.plNames.indexOf(s.name)<0||((t=o()(l=Array.apply(null,Array(a.columns.length))).call(l,Boolean.prototype.valueOf,!1))[0]=n.instant("PRICE_LISTS.LIST.PRICE_LIST")+": "+s.name+" ("+n.instant("PRICE_LISTS.LAST_UPDATE")+": "+r("date")(s.updatedAt,"mediumDate")+")",a.rows.push(t),a.styles.push(u.h1),s.productTypes.forEach((function(e){var r;(t=o()(r=Array.apply(null,Array(a.columns.length))).call(r,Boolean.prototype.valueOf,!1))[0]=e.id,a.rows.push(t),a.styles.push(u.h2),e.products.forEach((function(e,t){var r;a.rows.push(o()(r=a.columns).call(r,(function(t){return e[t.dataKey]}))),a.styles.push(t%2?null:u.rowOdd)}))})))})),a}m.config={reportName:n.instant("PRICE_LISTS.LIST.HEADER"),reportOptions:{centerId:!1},reportColumns:{columns:angular.copy(f)},getReportData:function(){return d.get({centerId:a.getCurrentCenterId()}).$promise}},m.reportBuilder=new c(m.config),e.$watch((function(t){var r,n;return{reportOptions:m.config.reportOptions,plNames:o()(r=s()(n=e.vm.priceLists).call(n,(function(e){return e.include}))).call(r,(function(e){return e.name}))}}),(function(e){p&&(t.cancel(p),p=null),p=t((function(t){m.pdf=null,angular.isDefined(m.config.reportOptions.centerId)&&(m.config.plNames=e.plNames,m.reportBuilder.buildPdf(R).then((function(e){m.pdf=e})))}),100)}),!0),m.downloadPdf=function(){m.pdf&&i.download({blob:m.pdf,fileName:m.reportBuilder.getReportFileName("pdf")})},m.downloadCsv=function(){m.pdf&&i.download({blob:m.reportBuilder.buildCsv(R),fileName:m.reportBuilder.getReportFileName("csv")})}}])},"7ZQE":function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n),a=r("hsT8"),s=r.n(a),l=r("8Xq/");t.default=angular.module("deskworks.reservationUtilizationActualExpectedAggregate",[l.a.name]).factory("reservationUtilizationActualExpectedAggregate",["helper",function(e){return function(t,r){var n,a=o()(t).call(t,(function(e){var t=e.groups.reduce((function(e,t){return e+t.daily.reduce((function(e,t){return e+t.usage}),0)}),0)||0,r=e.unitName,n=e.expectedUse,o=void 0===n?0:n;return{name:r,categoryId:e.categoryId,expectedUse:o,actualUse:t,utilization:o?100*t/o:0}}));return s()(n=o()(r).call(r,(function(t){var r=s()(a).call(a,(function(e){return e.categoryId===t.id})),n=r.reduce((function(e,t){return e+t.expectedUse}),0),o=r.reduce((function(e,t){return e+t.actualUse}),0);return{name:t.name,expectedUse:n,actualUse:o,utilization:n?e.round(100*o/n):0,units:r}}))).call(n,(function(e){return e.units&&e.units.length}))}}])},"8scq":function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.membershipReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("MembershipReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["joinDate"]);return e(r.getApiAbsUrl("/centers/:centerId/membership-reports"),{centerId:"@centerId"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,n,function(e){return angular.forEach(e,(function(e){angular.forEach(e.fields,(function(t){e[t.id]=t.value})),delete e.fields})),e}]}})}])},Afy5:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.RentRollReport",["ngResource","datesDeserializer","deskworks.config"]).factory("RentRollReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["recurringCharges.startDate","recurringCharges.terminationDate"]),o=e(r.getApiAbsUrl("/reports/rent-roll"),{centerId:"@centerId"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,n]}});return{query:function(e){return o.query(e).$promise}}}])},Amco:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("yCd9"),o=r.n(n),a=r("G0Vy"),s=r.n(a),l=r("nbuU"),i=r.n(l),u=r("8Xq/");t.default=angular.module("deskworks.reservationUtilizationDetailedActualAggregate",[u.a.name]).factory("reservationUtilizationDetailedActualAggregate",["reservationUtilizationReportCreateGrid","helper",function(e,t){return function(r,n){var a={periods:e(r.fromDate,r.toDate,r.byPeriod)};return a.units=o()(n).call(n,(function(e){var r,n,l={name:e.unitName,totals:s()(r=Array(a.periods.length)).call(r,0),total:0};return l.groups=o()(n=e.groups).call(n,(function(e){var r;return{name:e.name,totals:e.daily.reduce((function(e,r){return a.periods.some((function(n,o){if(r.date.isSameOrAfter(n.fromDate)&&r.date.isSameOrBefore(n.toDate)){var a=angular.isNumber(r.usage)?r.usage:0;return e[o]+=a,e[o]=t.round(e[o]),l.totals[o]+=a,l.totals[o]=t.round(l.totals[o]),!0}})),e}),s()(r=Array(a.periods.length)).call(r,0))}})),l.groups.forEach((function(e){e.total=e.totals.reduce((function(e,t){return e+t}),0),l.total+=e.total,e.total=t.round(e.total)})),l.total=t.round(l.total),l})),a}}]).factory("reservationUtilizationReportCreateGrid",["$filter","optsReportByPeriod",function(e,t){return function(e,r,n){var o=[],a=i()(t).call(t,(function(e){return e.id===n})),s=e.clone().startOf(n);do{var l={fromDate:s.clone()};s.add(1,n+"s"),l.toDate=s.clone().subtract(1,"ms"),l.title=a.format(l.fromDate,l.toDate),o.push(l)}while(s.isSameOrBefore(r));return o}}])},BEjt:function(e,t){e.exports='<div id="reservationUsageReport" class="gutter-v"> <form name="formReservationUsageReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h" style="margin-bottom:-15px"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-dates model="$ctrl.config.reportDates"></report-dates> </div> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="$ctrl.config.reportOptions"> <report-order-by model="$ctrl.config.orderBy" report-columns="$ctrl.config.reportColumns"></report-order-by> </report-options> <report-owner-region model="$ctrl.config.reportOwnerRegion" report-data="$ctrl.config.reportData"></report-owner-region> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},"C/0G":function(e,t){e.exports='<div id="memberStatement" class="gutter-v"> <form name="formMemberStatement"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 65%\', md: \'0 0 50%\'}"> <report-dates model="vm.config.reportDates"></report-dates> </div> <div flex="{lg: \'0 0 35%\', md: \'0 0 50%\'}"> <report-options model="vm.config.reportOptions"></report-options> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="vm.downloadPdf()" ff-disabled="!vm.pdf"> <span translate="MEMBER_STATEMENT.BTN_PDF"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="MEMBER_STATEMENT.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="vm.pdf"></div> </ff-panel> </div> '},C1lC:function(e,t,r){"use strict";r.r(t);var n=r("nbuU"),o=r.n(n);r("3dw1");t.default=angular.module("deskworks.ProductReport",["deskworks.inventory.product.service","deskworks.inventory.membershipCategory.service","deskworks.reservationCategory.service","deskworks.billing.optsBillingFrequency","deskworks.inventory.optsCountCheckInsPer"]).factory("ProductReport",["$q","dwAlerts","productService","membershipCategoryService","reservationCategoryService","optsBillingFrequency","optsCountCheckInsPer",function(e,t,r,n,a,s,l){return{query:function(i){var u=i.centerId;return e.all({products:r.getProducts().catch((function(e){return t.error(e,"Failed to query products.")})),membershipCategories:n.query().catch((function(e){return t.error(e,"Failed to query membership categories.")})),reservationCategories:a.query(u).catch((function(e){return t.error(e,"Failed to query reservation categories.")}))}).then((function(e){var t=e.products,r=e.membershipCategories,n=e.reservationCategories;return t.forEach((function(e){if(e.membershipTypeId){var a=o()(r).call(r,(function(t){return t.id===e.membershipTypeId}))||{name:e.membershipTypeId};e.membershipCategory=a.name}if(e.passProductId){var i=o()(t).call(t,(function(t){return t.id===e.passProductId}))||{name:e.passProductId};e.passProduct=i.name}if(e.reservationTypeId){var u=o()(n).call(n,(function(t){return t.id===e.reservationTypeId}))||{name:e.reservationTypeId};e.reservationCategory=u.name}if(e.billingFrequency){var c=o()(s).call(s,(function(t){return t.id===e.billingFrequency}))||{name:e.billingFrequency};e.billingFrequency=c.name}if(e.countCheckInsPer){var d=o()(l).call(l,(function(t){return t.id===e.countCheckInsPer}))||{name:e.countCheckInsPer};e.countCheckInsPer=d.name}e.printerUsageFreeCopiesSettings&&e.printerUsageFreeCopiesSettings.forEach((function(t){e[t.printerUsageType]=t.freeCount||0})),e.showInSelfRegistration=!e.hideInSelfRegistration})),t}))}}}])},"CR4+":function(e,t){e.exports='<div ng-controller="PriceListReportCtrl as rep" class="gutter-v"> <div class="ff-grid"> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}" style="margin-left:auto"> <report-options model="rep.config.reportOptions"></report-options> </div> </div> <ff-btn-group> <ff-btn sense="download" ff-click="rep.downloadPdf()" ff-disabled="!rep.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="rep.downloadCsv()" ff-disabled="!rep.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="rep.pdf"></div> </ff-panel> </div> '},Cv9t:function(e,t){e.exports='<div id="paymentReconciliationReport" class="gutter-v"> <form name="formPaymentReconciliationReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <report-dates model="$ctrl.params"></report-dates> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <report-options model="$ctrl.params"> </report-options> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},EKM0:function(e,t){e.exports='<div id="membershipReport" class="gutter-v"> <form name="formMembershipReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 65%\', md: \'0 0 50%\'}"> <report-columns model="vm.config.reportColumns"></report-columns> </div> <div flex="{lg: \'0 0 35%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="vm.config.reportOptions"> <report-order-by model="vm.config.orderBy" report-columns="vm.config.reportColumns.columns"></report-order-by> </report-options> <report-owner-region model="vm.config.reportOwnerRegion" report-data="vm.config.reportData"></report-owner-region> <ff-panel> <ff-panel-header><span translate="MEMBERSHIP_REPORT.MEMBERSHIP.HEADER"></span></ff-panel-header> <membership-filter ff-model="vm.membershipFilter" layout="2col"></membership-filter> </ff-panel> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="vm.downloadPdf()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="vm.downloadCsv()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="vm.pdf"></div> </ff-panel> </div> '},EMP2:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("03wM"),o=r.n(n),a=r("Ekwr"),s=r.n(a),l=r("hsT8"),i=r.n(l),u=r("lvz6"),c=r.n(u),d=r("yKah"),f=r.n(d),p=r("fzuT"),m=r.n(p),R=r("G6E5"),g=r("WgSX"),E=r("5/DJ"),y=r("LTMe"),h=r("ZimX"),T=r("SeLF"),O=r("VHZd"),v=r("ogb4"),C=r("yvW+"),N=r("0o3Q");function _(e,t){var r=o()(e);if(s.a){var n=s()(e);t&&(n=i()(n).call(n,(function(t){return c()(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):f.a?Object.defineProperties(e,f()(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,c()(r,t))}))}return e}t.default=angular.module("deskworks.RecurringBillingChangeReportCtrl",["debounce","deskworks.state",g.a.name,R.a.name,E.a.name,y.a.name,h.default.name,T.default.name,O.default.name,v.default.name,C.default.name,N.default.name]).controller("RecurringBillingChangeReportCtrl",["$scope","$timeout","$filter","$translate","$q","systemColors","debounce","state","helper","reportStyles","reportHelper","dwAlerts","RecurringBillingChangeReport","recurringBillingChangeReportColumns","recurringBillingChangeData","recurringBillingChangeChart","optsRbcReportByPeriod",function(e,t,r,n,o,a,s,l,i,u,c,d,f,p,m,R,g){var E=this,y=c.paramsChanged,h=c.loadResources;E.config={reportName:n.instant("RECURRING_BILLING_CHANGE_REPORT.REPORT_NAME")},E.params={fromDate:l.getParam("fromDate")?r("toDate")(l.getParam("fromDate")):moment().subtract(1,"year"),toDate:l.getParam("toDate")?r("toDate")(l.getParam("toDate")):moment(),byPeriod:l.getParam("byPeriod")||"month",orderBy:l.getParam("orderBy")||"userCompany",columns:p},E.resources=null,E.data=null,E.optsByPeriod=g,l.setPageTitle(E.config.reportName),e.$watch("$ctrl.params",s((function(e,t){i.pointFirstInvalid("#recurringBillingChangeReport")||(E.pdf=null,E.report=null,y(e,t,["centerId","fromDate","toDate","byPeriod"])&&(E.data=null),o.all({resources:E.resources||h(),data:E.data||f.query(E.params).catch((function(e){return d.error(e,"Failed to query report.")}))}).then((function(e){E.resources=e.resources,E.data=e.data})).then((function(){E.report=m(E.params,E.data);var e=c.buildPdf({config:S(S({},E.config),E.params),report:E.report,resources:E.resources});E.pdf=e.output("blob"),E.chart=R(E.data)})))}),100),!0),E.downloadPdf=function(){if(E.pdf){var e=c.getReportFileName({extension:"pdf",config:S(S({},E.config),E.params),resources:E.resources});c.download({blob:E.pdf,fileName:e})}},E.downloadCsv=function(){if(E.pdf){var e=c.getReportFileName({extension:"csv",config:S(S({},E.config),E.params),resources:E.resources}),t=c.buildCsv({report:E.report});c.download({blob:t,fileName:e})}}}])},Evl7:function(e,t,r){"use strict";r.r(t);var n=r("03wM"),o=r.n(n),a=r("Ekwr"),s=r.n(a),l=r("hsT8"),i=r.n(l),u=r("lvz6"),c=r.n(u),d=r("yKah"),f=r.n(d),p=r("XX2w"),m=r.n(p),R=r("fzuT"),g=r.n(R),E=(r("3dw1"),r("NOor")),y=r.n(E),h=r("yCd9"),T=r.n(h),O=r("G0Vy"),v=r.n(O),C=r("6RpP"),N=r.n(C),_=r("WgSX"),S=r("G6E5"),w=r("5/DJ"),P=r("LTMe"),D=r("4c/s"),I=r("cavp");function b(e,t){var r=o()(e);if(s.a){var n=s()(e);t&&(n=i()(n).call(n,(function(t){return c()(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){g()(e,t,r[t])})):f.a?Object.defineProperties(e,f()(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,c()(r,t))}))}return e}t.default=angular.module("deskworks.PaymentReconciliationReportCtrl",["debounce",_.a.name,S.a.name,w.a.name,P.a.name,"deskworks.state","deskworks.reports.reportDates","deskworks.reports.reportColumns","deskworks.reports.ReportBuilder","deskworks.reportOrderBy",I.default.name,D.default.name]).controller("PaymentReconciliationReportCtrl",["$scope","$timeout","$translate","$filter","$q","state","helper","debounce","dwAlerts","reportHelper","reportStyles","PaymentReconciliationReport","paymentReconciliationReportColumns",function(e,t,r,n,o,a,s,l,i,u,c,d,f){var p=this,R=u.paramsChanged,g=u.loadResources;p.config={reportName:r.instant("PAYMENT_RECONCILIATION_REPORT.REPORT_NAME")},p.params={fromDate:a.getParam("fromDate")?n("toDate")(a.getParam("fromDate")):moment().subtract(1,"M").startOf("month"),toDate:a.getParam("toDate")?n("toDate")(a.getParam("toDate")):moment().subtract(1,"M").endOf("month")},p.resources=null,p.data=null,p.columns=f,a.setPageTitle(p.config.reportName),e.$watch("$ctrl.params",l((function(e,t){p.pdf=null,p.report=null,s.pointFirstInvalid("#paymentReconciliationReport")||p.params.fromDate&&p.params.toDate&&(R(e,t,["fromDate","toDate","centerId"])&&(p.data=null),o.all({resources:p.resources||g(),data:p.data||d.get(p.params).catch((function(e){return i.error(e,"Failed to query report.")}))}).then((function(e){p.resources=e.resources,p.data=e.data})).then((function(){p.report=function(e,t){var o,a,s,l,i,u={columns:p.columns,rows:[],styles:[]},d=y()(o=u.columns).call(o,(function(e){return"productCode"===e.dataKey}));t.daily.forEach((function(e){u.rows.push([{content:n("date")(e.date,"mediumDate"),colSpan:d},{content:r.instant("PAYMENT_RECONCILIATION_REPORT.TOTAL_DAILY")+":",colSpan:u.columns.length-d-1},{content:n("ncurrency")(e.total)}]),u.styles.push(c.h1),e.billingMethods.forEach((function(e){u.rows.push([{content:e.name,colSpan:d},{content:r.instant("PAYMENT_RECONCILIATION_REPORT.TOTAL_PAYMENT_METHOD")+":",colSpan:u.columns.length-d-1},{content:n("ncurrency")(e.total)}]),u.styles.push(c.h2),e.orders.forEach((function(e){var t;u.rows.push(T()(t=u.columns).call(t,(function(t){return!!angular.isDefined(e[t.dataKey])&&e[t.dataKey]}))),u.styles.push(c.h3),e.items.forEach((function(e,t){var r;u.rows.push(T()(r=u.columns).call(r,(function(t){return!!angular.isDefined(e[t.dataKey])&&e[t.dataKey]}))),u.styles.push(t%2?null:c.rowOdd)}))}))}))})),u.rows.push(v()(a=Array(u.columns.length)).call(a,!1)),u.styles.push(null);var f=[{name:"TOTAL_PAYMENT_FEES",key:"totalPaymentFees"},{name:"TOTAL_TAXES",key:"totalTaxes"},{name:"TOTAL_DEPOSITS",key:"totalDeposits"},{name:"TOTAL_UNDESIGNATED",key:"totalUndesignated"}],R=N()(s=[{name:"TOTAL_MEMBERSHIP",key:"membership"},{name:"TOTAL_REGISTRATION",key:"registration"},{name:"TOTAL_RENTAL",key:"rental"},{name:"TOTAL_PRINT",key:"print"},{name:"TOTAL_SERVICES",key:"services"},{name:"TOTAL_CUSTOM",key:"custom"},{name:"TOTAL_DISCOUNT",key:"discount"}]).call(s,f),g=T()(R).call(R,(function(e,o){return{data:[{content:r.instant("PAYMENT_RECONCILIATION_REPORT.".concat(e.name)),colSpan:1},{content:n("ncurrency")(o>6?t[e.key]:t.totalsByProductType[e.key]||0),styles:{halign:"right",fontStyle:"bold"}}],style:null}}));g.unshift({data:[{content:r.instant("PAYMENT_RECONCILIATION_REPORT.PRODUCT_TYPE_BREAKDOWN")+":",colSpan:2}],style:c.h1});var E=N()(l=T()(i=t.totalsByProductCategory).call(i,(function(e){return{data:[{content:e.name},{content:e.code},{content:n("ncurrency")(e.total),colSpan:2,styles:{fontStyle:"bold"}}],style:null}}))).call(l,T()(f).call(f,(function(e){return{data:[{content:r.instant("PAYMENT_RECONCILIATION_REPORT.".concat(e.name))},{content:!1},{content:n("ncurrency")(t[e.key]),styles:{halign:"right",fontStyle:"bold"},colSpan:2}],style:null}})));E.unshift({data:[{content:r.instant("PAYMENT_RECONCILIATION_REPORT.PRODUCT_CATEGORY_BREAKDOWN")+":",colSpan:4}],style:null});for(var h=0,O=Math.max(g.length,E.length);h<O;h++){var C;u.rows.push(N()(C=[]).call(C,m()((g[h]||{data:[{content:!1},{content:!1}]}).data),[{content:!1}],m()((E[h]||{data:[{content:!1},{content:!1},{content:!1},{content:!1}]}).data),[{content:!1}])),u.styles.push(g[h]&&g[h].style||E[h]&&E[h].style||null)}return u}(p.params,p.data);var e=u.buildPdf({config:A(A({},p.config),p.params),report:p.report,resources:p.resources});p.pdf=e.output("blob")})))}),100),!0),p.downloadPdf=function(){if(p.pdf){var e=u.getReportFileName({extension:"pdf",config:A(A({},p.config),p.params),resources:p.resources});u.download({blob:p.pdf,fileName:e})}},p.downloadCsv=function(){if(p.pdf){var e=u.getReportFileName({extension:"csv",config:A(A({},p.config),p.params),resources:p.resources}),t=u.buildCsv({report:p.report});u.download({blob:t,fileName:e})}}}])},FxCl:function(e,t,r){"use strict";r.r(t);var n=r("03wM"),o=r.n(n),a=r("Ekwr"),s=r.n(a),l=r("hsT8"),i=r.n(l),u=r("lvz6"),c=r.n(u),d=r("yKah"),f=r.n(d),p=r("fzuT"),m=r.n(p),R=r("6RpP"),g=r.n(R),E=(r("3dw1"),r("WgSX")),y=r("G6E5"),h=r("5/DJ"),T=r("LTMe"),O=r("C1lC"),v=r("iYz6"),C=r("ID+u");function N(e,t){var r=o()(e);if(s.a){var n=s()(e);t&&(n=i()(n).call(n,(function(t){return c()(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):f.a?Object.defineProperties(e,f()(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,c()(r,t))}))}return e}t.default=angular.module("deskworks.productReport",[E.a.name,y.a.name,h.a.name,T.a.name,"deskworks.state",O.default.name,v.default.name,C.default.name]).controller("ProductReportCtrl",["$scope","$q","$timeout","$filter","$translate","state","helper","debounce","dwAlerts","reportHelper","reportStyles","ProductReport","productReportColumns","productReportData",function(e,t,r,n,o,a,s,l,i,u,c,d,f,p){var m=this,R=(u.paramsChanged,u.loadResources);m.config={reportName:o.instant("PRODUCTS.INVENTORY_LIST")},m.params={centerId:!1,paperSize:"A2"},m.resources=null,m.data=null,a.setPageTitle(m.config.reportName),e.$watch("$ctrl.params",l((function(e,r){m.pdf=null,m.report=null,t.all({resources:m.resources||R(),data:m.data||d.query({centerId:a.getCurrentCenterId()})}).then((function(e){m.resources=e.resources,m.data=e.data})).then((function(){m.report=p(_(_({},m.params),{},{columns:f}),m.data);var e=new jsPDF(m.params.paperLayout,"pt",m.params.paperSize),t=c.pageMargins[0];m.report.forEach((function(r){var n;r.rows.length&&(n=r.name,e.setFontSize(11),e.setFont(e.getFont().fontName,"bold"),e.autoTableText(n,c.pageMargins[3],t,{}),t+=18,u.buildPdf({config:_(_({},m.config),m.params),report:r,resources:m.resources,doc:e,startY:t}),t=e.previousAutoTable.finalY+20)})),m.pdf=e.output("blob")}))}),100),!0),m.downloadPdf=function(){if(m.pdf){var e=u.getReportFileName({extension:"pdf",config:_(_({},m.config),m.params),resources:m.resources});u.download({blob:m.pdf,fileName:e})}},m.downloadCsv=function(){m.pdf&&m.report.forEach((function(e){var t,r=g()(t="".concat(m.config.reportName,"-")).call(t,e.name).toLowerCase(),n=u.getReportFileName({extension:"csv",config:_({reportName:r},m.params),resources:m.resources}),o=u.buildCsv({report:e});u.download({blob:o,fileName:n})}))}}])},GGg2:function(e,t){e.exports='<div id="recurringBillingReport" class="gutter-v"> <form name="formRecurringBillingReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 65%\', md: \'0 0 50%\'}"> <report-columns model="vm.config.reportColumns"></report-columns> </div> <div flex="{lg: \'0 0 35%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="vm.config.reportOptions"> <report-order-by model="vm.config.orderBy" report-columns="vm.config.reportColumns.columns" levels="2"></report-order-by> </report-options> <report-owner-region model="vm.config.reportOwnerRegion" report-data="vm.config.reportData"></report-owner-region> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="vm.downloadPdf()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="vm.downloadCsv()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="vm.pdf"></div> </ff-panel> </div> '},HFgu:function(e,t,r){"use strict";r.r(t);var n=r("hsT8"),o=r.n(n),a=r("KK/u"),s=r.n(a),l=r("yCd9"),i=r.n(l),u=r("WgSX"),c=r("G6E5"),d=r("5/DJ"),f=r("LTMe");t.default=angular.module("deskworks.reports.mailboxReport",[u.a.name,c.a.name,d.a.name,f.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportColumns","deskworks.reports.reportOwnerRegion","deskworks.reports.mailboxReport.service","deskworks.reports.mailboxReportColumns"]).controller("MailboxReportCtrl",["$scope","$timeout","$translate","state","helper","reportHelper","ReportBuilder","MailboxReport","mailboxReportColumns","reportStyles",function(e,t,r,n,a,l,u,c,d,f){var p,m=this;function R(e){var t,r,n,a={columns:o()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:e.reportData,styles:[]};return a.rows=s()(l).call(l,a.rows,e.orderBy),a.rows=i()(r=a.rows).call(r,(function(e){var t;return i()(t=a.columns).call(t,(function(t){return e[t.dataKey]}))})),a.styles=i()(n=a.rows).call(n,(function(e,t){return t%2?null:f.rowOdd})),a}m.config={reportName:r.instant("MAILBOX_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:angular.copy(d)},getReportData:function(){return c.query({centerId:m.config.reportOptions.centerId,ownerId:m.config.reportOwnerRegion.ownerId,regionId:m.config.reportOwnerRegion.regionId}).$promise}},n.setPageTitle(m.config.reportName),m.reportBuilder=new u(m.config),e.$watch((function(e){return{reportOptions:m.config.reportOptions,reportColumns:m.config.reportColumns,orderBy:m.config.orderBy,reportOwnerRegion:m.config.reportOwnerRegion}}),(function(e){p&&(t.cancel(p),p=null),p=t((function(){m.pdf=null,angular.isUndefined(m.config.reportOptions.centerId)||m.reportBuilder.buildPdf(R).then((function(e){m.pdf=e}))}),100)}),!0),m.downloadPdf=function(){m.pdf&&l.download({blob:m.pdf,fileName:m.reportBuilder.getReportFileName("pdf")})},m.downloadCsv=function(){m.pdf&&l.download({blob:m.reportBuilder.buildCsv(R),fileName:m.reportBuilder.getReportFileName("csv")})}}])},"ID+u":function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("yCd9"),o=r.n(n),a=r("hsT8"),s=r.n(a),l=r("5/DJ");t.default=angular.module("deskworks.productReportData",["deskworks.inventory.optsProductType",l.a.name]).factory("productReportData",["reportStyles","optsProductType",function(e,t){return function(r,n){return o()(t).call(t,(function(t){var a,l={id:t.id,name:t.name,columns:s()(a=r.columns[t.id]).call(a,(function(e){return e.include})),rows:[],styles:[]};return s()(n).call(n,(function(e){return e.type===t.id})).forEach((function(t,r){var n;l.rows.push(o()(n=l.columns).call(n,(function(e){return t[e.dataKey]}))),l.styles.push(r%2?null:e.rowOdd)})),l}))}}])},IWno:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.mailboxReportColumns",[]).factory("mailboxReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"number",_title:"MAILBOX_REPORT.COLUMNS.BOX_ID",include:!0},{dataKey:"company",_title:"MAILBOX_REPORT.COLUMNS.COMPANY",include:!0,styles:{minCellWidth:150}},{dataKey:"fullName",_title:"MAILBOX_REPORT.COLUMNS.USER_NAME",include:!0,styles:{minCellWidth:120}},{dataKey:"handling",_title:"MAILBOX_REPORT.COLUMNS.HANDLING",include:!0,styles:{cellWidth:"wrap"}},{dataKey:"key",_title:"MAILBOX_REPORT.COLUMNS.KEY_ID",include:!0,styles:{cellWidth:"wrap"}},{dataKey:"names",_title:"MAILBOX_REPORT.COLUMNS.OTHER_NAMES",include:!0}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},IWz8:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.reservationReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("ReservationReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["reservations.createdAt","reservations.startTime","reservations.endTime"]),o=e(r.getApiAbsUrl("/centers/:centerId/reservation-reports"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{get:{method:"GET",transformResponse:[angular.fromJson,n]}});return{get:function(e){return o.get(e).$promise}}}])},Iy44:function(e,t,r){"use strict";r.r(t);var n=r("nbuU"),o=r.n(n),a=r("G0Vy"),s=r.n(a),l=r("KK/u"),i=r.n(l),u=(r("3dw1"),r("8cZI"),r("WgSX")),c=r("G6E5"),d=r("5/DJ"),f=r("LTMe");t.default=angular.module("deskworks.PassportReservationUsageReportCtrl",[u.a.name,c.a.name,d.a.name,f.a.name,"deskworks.state","deskworks.reports.reportDates","deskworks.reports.ReportBuilder","deskworks.PassportReservationUsageReport","deskworks.passportReservationUsageReportColumns"]).controller("PassportReservationUsageReportCtrl",["$scope","$timeout","$translate","$filter","state","helper","reportHelper","reportStyles","ReportBuilder","PassportReservationUsageReport","passportReservationUsageReportColumns",function(e,t,r,n,a,l,u,c,d,f,p){var m,R=this;function g(e){var t={columns:e.reportColumns,rows:[],styles:[]},n=[];return e.reportData.forEach((function(e){var a,i=0;t.rows.push([{content:l.join([e.userCompany,e.userName]," - "),colSpan:4}]),t.styles.push(c.h2),e.usages.forEach((function(e,r){i+=e.duration||0;var a=o()(n).call(n,(function(t){return t.name===e.unitName}));a?a.total+=e.duration:n.push({name:e.unitName,total:e.duration||0}),t.rows.push([e.unitName,e.duration,e.startTime,e.endTime]),t.styles.push(r%2?null:c.rowOdd)})),t.rows.push([{content:r.instant("REPORTS.TOTAL")+":",styles:{halign:"right"}},i,!1,!1]),t.styles.push(c.h3),t.rows.push(s()(a=Array(4)).call(a,!1)),t.styles.push(null)})),e.reportData.length&&(t.rows.push([{content:r.instant("PASSPORT_RESERVATION_USAGE_REPORT.TOTALS_BY_RESERVATION_UNIT"),colSpan:4}]),t.styles.push(c.h2)),i()(u).call(u,n,"name").forEach((function(e){var r,n=s()(r=Array(4)).call(r,!1);n[0]=e.name,n[1]=e.total,t.rows.push(n),t.styles.push(c.h3)})),t}R.config={reportName:r.instant("PASSPORT_RESERVATION_USAGE_REPORT.REPORT_NAME"),reportOptions:{},reportColumns:p,reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return f.query({centerId:R.config.reportOptions.centerId||null,fromDate:n("date")(R.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:n("date")(R.config.reportDates.toDate,"yyyy-MM-dd")})}},a.setPageTitle(R.config.reportName),R.config.reportDates.fromDate.subtract(1,"M").date(1),R.config.reportDates.toDate.date(0),R.reportBuilder=new d(R.config),e.$watch((function(){return{reportOptions:R.config.reportOptions,reportDates:R.config.reportDates}}),(function(e,r){m&&(t.cancel(m),m=null),m=t((function(){R.pdf=null;var t=e.reportDates.fromDate,n=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(R.config.reportData=null),t=e.reportDates.toDate,n=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(R.config.reportData=null),R.reportBuilder.buildPdf(g).then((function(e){R.pdf=e}))}),100)}),!0),R.downloadPdf=function(){R.pdf&&u.download({blob:R.pdf,fileName:R.reportBuilder.getReportFileName("pdf")})},R.downloadCsv=function(){R.pdf&&u.download({blob:R.reportBuilder.buildCsv(g),fileName:R.reportBuilder.getReportFileName("csv")})}}])},JAJz:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.securityDepositReport.service",["ngResource","datesDeserializer","deserializeNumbers","deskworks.config"]).factory("SecurityDepositReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=t(["deposits.details.date"]),a=r(["deposits.balance","deposits.details.amount"]);return e(n.getApiAbsUrl("/reports/security-deposit"),{centerId:"@centerId"},{get:{method:"GET",transformResponse:[angular.fromJson,o,a]}})}])},Jqji:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("ipr/"),o=r.n(n),a=r("yCd9"),s=r.n(a),l=r("6RpP"),i=r.n(l),u=r("KK/u"),c=r.n(u),d=r("5/DJ"),f=r("G6E5"),p=r("rrwk");t.default=angular.module("deskworks.reports.revenueForecastData",[d.a.name,f.a.name,p.default.name]).factory("revenueForecastData",["$filter","$translate","helper","reportStyles","reportHelper","revenueForecastReportColumns",function(e,t,r,n,a,l){return function(r,u){var d,f,p,m,R,g={columns:o()(l).call(l),rows:[],styles:[]};if(!u||!u.length)return g;var E=s()(d=u[0].totals).call(d,(function(r,n){var o=n?e("date")(e("toDate")(r.month+"-01"),"MMM\nyyyy"):t.instant("REVENUE_FORECAST_REPORT.COLUMNS.CURRENT_MONTH");return g.columns.push({dataKey:r.month,title:o,styles:{halign:"right",cellWidth:"wrap"}}),u.reduce((function(e,t){return e+t.totals[n].committedAmount}),0)})),y=s()(f=u[0].totals).call(f,(function(e,t){return u.reduce((function(e,r){return e+r.totals[t].riskAmount}),0)})),h=t.instant("REVENUE_FORECAST_REPORT.COMMITTED_REVENUE");return g.styles.push(n.h3),g.rows.push(i()(p=[!1,h]).call(p,s()(E).call(E,(function(t){return e("ncurrency")(t)})))),h=t.instant("REVENUE_FORECAST_REPORT.AT_RISK_REVENUE"),g.styles.push(n.h3),g.rows.push(i()(m=[!1,h]).call(m,s()(y).call(y,(function(t){return e("ncurrency")(t)})))),h=t.instant("REVENUE_FORECAST_REPORT.PERCENT_OF_CURRENT_MONTH"),g.styles.push(n.h3),g.rows.push(i()(R=[!1,h]).call(R,s()(E).call(E,(function(t){return e("number")(t/E[0]*100,2)+"%"})))),c()(a).call(a,u,r.orderBy).forEach((function(t,r){var o,a;g.styles.push(r%2?null:n.rowOdd),g.rows.push(i()(o=[t.userCompany,t.userName]).call(o,s()(a=t.totals).call(a,(function(t){return e("ncurrency")(t.committedAmount)}))))})),g}}])},KMep:function(e,t,r){"use strict";r.r(t);var n=r("03wM"),o=r.n(n),a=r("Ekwr"),s=r.n(a),l=r("hsT8"),i=r.n(l),u=r("lvz6"),c=r.n(u),d=r("yKah"),f=r.n(d),p=r("fzuT"),m=r.n(p),R=(r("3dw1"),r("KK/u")),g=r.n(R),E=r("6RpP"),y=r.n(E),h=r("yCd9"),T=r.n(h),O=r("G6E5"),v=r("WgSX"),C=r("5/DJ"),N=r("LTMe");function _(e,t){var r=o()(e);if(s.a){var n=s()(e);t&&(n=i()(n).call(n,(function(t){return c()(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):f.a?Object.defineProperties(e,f()(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,c()(r,t))}))}return e}t.default=angular.module("deskworks.PassUsageReportCtrl",["debounce",v.a.name,C.a.name,N.a.name,"deskworks.state","deskworks.reports.reportDates","deskworks.reports.reportColumns","deskworks.reports.ReportBuilder","deskworks.PassUsageReport","deskworks.passUsageReportColumns",O.a.name]).controller("PassUsageReportCtrl",["$scope","$q","$filter","$translate","state","helper","dwAlerts","debounce","reportStyles","reportHelper","PassUsageReport","passUsageReportColumns",function(e,t,r,n,o,a,s,l,i,u,c,d){var f=this,p=u.paramsChanged,m=u.loadResources;f.config={reportName:n.instant("PASS_USAGE_REPORT.REPORT_NAME")},f.params={fromDate:o.getParam("fromDate")?r("toDate")(o.getParam("fromDate")):moment().startOf("month"),toDate:o.getParam("toDate")?r("toDate")(o.getParam("toDate")):moment().endOf("month"),orderBy:o.getParam("orderBy")||"memberName"},f.resources=null,f.data=null,f.columns=d,o.setPageTitle(f.config.reportName),e.$watch("$ctrl.params",l((function(e,r){f.pdf=null,f.report=null,a.pointFirstInvalid("#passUsageReport")||f.params.fromDate&&f.params.toDate&&(p(e,r,["fromDate","toDate","centerId"])&&(f.data=null),t.all({resources:f.resources||m(),data:f.data||c.query(f.params).catch((function(e){return s.error(e,"Failed to query report.")}))}).then((function(e){f.resources=e.resources,f.data=e.data})).then((function(){f.report=function(e,t){var r,o={columns:d,rows:[],styles:[]};t=g()(u).call(u,t,f.params.orderBy),o.rows=y()(r=o.rows).call(r,T()(t).call(t,(function(e,t){var r;return o.styles.push(t%2?null:i.rowOdd),T()(r=o.columns).call(r,(function(t){return e[t.dataKey]}))})));var s=0,l=0,c=0;t.forEach((function(e){s+=a.toNumber(e.passesUsedCost),l+=a.toNumber(e.passCreditAppliedCost),c+=a.toNumber(e.costBalance)})),s=a.round(s),l=a.round(l),c=a.round(c);var p={passesUsedCostTotal:s,passCreditAppliedCostTotal:l,costBalanceTotal:c},m=[],R={content:n.instant("PASS_USAGE_REPORT.TOTALS").toUpperCase()+":",styles:{halign:"left"}};o.columns.forEach((function(e){var t=p["".concat(e.dataKey,"Total")];(t||"number"==typeof t)&&m.push({content:t})})),"memberCompany"===o.columns[0].dataKey&&"memberName"===(o.columns[1]||{}).dataKey?(m.unshift({content:" "}),m.unshift(R)):"memberCompany"!==o.columns[0].dataKey&&"memberName"!==o.columns[0].dataKey||m.unshift(R);t.length&&(o.rows.unshift(m),o.styles.unshift(i.h2),o.rows.push(m),o.styles.push(i.h2));return o}(f.params,f.data);var e=u.buildPdf({config:S(S({},f.config),f.params),report:f.report,resources:f.resources});f.pdf=e.output("blob")})))}),100),!0),f.downloadPdf=function(){if(f.pdf){var e=u.getReportFileName({extension:"pdf",config:S(S({},f.config),f.params),resources:f.resources});u.download({blob:f.pdf,fileName:e})}},f.downloadCsv=function(){if(f.pdf){var e=u.getReportFileName({extension:"csv",config:S(S({},f.config),f.params),resources:f.resources}),t=u.buildCsv({report:f.report});u.download({blob:t,fileName:e})}}}])},KkfT:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reservationUsageReportColumns",[]).factory("reservationUsageReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"memberCompany",_title:"REPORTS.COLUMNS.USER_COMPANY"},{dataKey:"memberName",_title:"REPORTS.COLUMNS.USER_NAME",defaultOrder:!0},{dataKey:"reservationCost",_title:"RESERVATION_USAGE_REPORT.COLUMNS.RESERVATION_COST",styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"reservationCreditApplied",_title:"RESERVATION_USAGE_REPORT.COLUMNS.RES_CREDITS_APPLIED",styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"reservationCostBalance",_title:"RESERVATION_USAGE_REPORT.COLUMNS.RES_COST_BALANCE",styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},"L+wq":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.mailboxReport.service",["ngResource","deskworks.config"]).factory("MailboxReport",["$resource","deskworksConfig",function(e,t){return e(t.getApiAbsUrl("/centers/:centerId/mailbox-reports"),{centerId:"@centerId"},{query:{method:"GET",isArray:!0}})}])},LJmX:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("yCd9"),o=r.n(n),a=r("6RpP"),s=r.n(a),l=r("03wM"),i=r.n(l),u=r("nbuU"),c=r.n(u),d=r("hsT8"),f=r.n(d),p=r("KK/u"),m=r.n(p),R=r("WgSX"),g=r("G6E5"),E=r("5/DJ"),y=r("LTMe");t.default=angular.module("deskworks.reports.reservationReport",[R.a.name,g.a.name,E.a.name,y.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportColumns","deskworks.reports.reportOwnerRegion","deskworks.reports.reservationReport.service","deskworks.reports.reservationReportColumns"]).controller("ReservationReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","reportHelper","reportStyles","ReportBuilder","ReservationReport","reservationReportColumns","reservationFields",function(e,t,r,n,a,l,u,d,p,R,g,E){var y,h,T=this,O=o()(E).call(E,(function(e){return{dataKey:e.id,title:e.name,include:!1,pdf:function(t){return e.$$filter(e,t)},csv:function(t){return e.$$filter(e,t)}}}));function v(e){var t,r,n={columns:f()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:m()(u).call(u,e.reportData.reservations,e.orderBy),styles:[]};return n.rows=o()(r=n.rows).call(r,(function(e,t){var r;return n.styles.push(t%2?null:d.rowOdd),o()(r=n.columns).call(r,(function(t){return e[t.dataKey]}))})),n}T.config={reportName:n.instant("RESERVATION_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:s()(y=angular.copy(g)).call(y,O)},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return R.get({centerId:T.config.reportOptions.centerId,fromDate:r("date")(T.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(T.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:T.config.reportOwnerRegion.ownerId,regionId:T.config.reportOwnerRegion.regionId}).then((function(e){return e.reservations.forEach((function(e){i()(e.fields).forEach((function(t){var r=c()(E).call(E,(function(e){return e.id===+t}));e[t]=r.$$deserialize(r,e.fields[t])})),delete e.fields})),e}))}},T.config.reportDates.toDate.add(7,"d"),a.setPageTitle(T.config.reportName),T.reportBuilder=new p(T.config),e.$watch((function(e){return{reportOptions:T.config.reportOptions,reportColumns:T.config.reportColumns,orderBy:T.config.orderBy,reportDates:T.config.reportDates,reportOwnerRegion:T.config.reportOwnerRegion}}),(function(e,r){h&&(t.cancel(h),h=null),h=t((function(t){if(T.pdf=null,!angular.isUndefined(T.config.reportOptions.centerId)){var n=e.reportDates.fromDate,o=r.reportDates.fromDate;!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(T.config.reportData=null),n=e.reportDates.toDate,o=r.reportDates.toDate,!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(T.config.reportData=null),T.reportBuilder.buildPdf(v).then((function(e){T.pdf=e}))}}),100)}),!0),T.downloadPdf=function(){T.pdf&&u.download({blob:T.pdf,fileName:T.reportBuilder.getReportFileName("pdf")})},T.downloadCsv=function(){T.pdf&&u.download({blob:T.reportBuilder.buildCsv(v),fileName:T.reportBuilder.getReportFileName("csv")})}}])},LM7I:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.recurringBillingReportColumns",[]).factory("recurringBillingReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userCompany",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.COMPANY",include:!0},{dataKey:"userName",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.MEMBER",include:!0,styles:{minCellWidth:100}},{dataKey:"centerName",_title:"REPORTS.COLUMNS.CENTER",include:!1},{dataKey:"lastBillDate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.LAST_BILL_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"nextBillDate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.NEXT_BILL_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"amount",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"billingMethod",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.BILLING_METHOD",include:!0},{dataKey:"ccExpiry",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.CC_EXPIRY",include:!1,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"discount",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.DISCOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"productName",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.PRODUCT",include:!0,styles:{minCellWidth:120}},{dataKey:"description",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.DESCRIPTION",include:!1},{dataKey:"startDate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.START_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"noticeDate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.NOTICE_DATE",include:!1,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"noticePeriod",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.NOTICE_PERIOD",include:!1},{dataKey:"noticeRequiredBy",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.NOTICE_REQUIRED_BY",include:!1,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"terminate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.TERMINATION_DATE",include:!1,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"renewalDate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.RENEWAL_DATE",include:!1,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"renewalTerm",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.RENEWAL_TERM",include:!1},{dataKey:"renewalNoticePeriod",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.RENEWAL_REMINDER",include:!1},{dataKey:"useForCheckInBilling",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.USE_FOR_CHECK_IN_BILLING",include:!1,styles:{halign:"center"},pdf:function(e){return t("yesno")(e)},csv:function(e){return t("yesno")(e)}},{dataKey:"total",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.TOTAL",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},Mmgn:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.priceListReportColumns",[]).factory("priceListReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"name",_title:"PRICE_LISTS.PRODUCTS.PRODUCT",include:!0},{dataKey:"passQty",_title:"PRICE_LISTS.PRODUCTS.PASSES",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"reservationCredit",_title:"PRICE_LISTS.PRODUCTS.CREDIT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"price",_title:"PRICE_LISTS.PRODUCTS.PRICE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},PjE5:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.memberUsageReport.service",["ngResource","datesDeserializer","deserializeNumbers","deskworks.config"]).factory("MemberUsageReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=n.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/member-usage-reports"),a=t(["checkInTime","checkOutTime"]),s=r(["usageHours","usagePasses"]);return e(o,{centerId:"@centerId",userId:"@userId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,a,s]}})}])},"SeF/":function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n),a=r("6RpP"),s=r.n(a),l=r("WgSX"),i=r("G6E5"),u=r("5/DJ"),c=r("LTMe");t.default=angular.module("deskworks.reports.memberStatement",[l.a.name,i.a.name,u.a.name,c.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.memberStatement.service","deskworks.reports.memberStatementColumns"]).controller("MemberStatementCtrl",["$rootScope","$scope","$route","$timeout","$filter","$translate","state","helper","reportHelper","reportStyles","ReportBuilder","user","MemberStatement","memberStatementColumns",function(e,t,r,n,a,l,i,u,c,d,f,p,m,R){var g,E=this;function y(e){var t,r,n={columns:e.reportColumns.columns,rows:[],styles:[]};n.rows=o()(t=e.reportData.transactions).call(t,(function(e,t){var r;return n.styles.push(t%2?null:d.rowOdd),o()(r=n.columns).call(r,(function(t){return e[t.dataKey]}))})),n.rows.unshift([!1,l.instant("MEMBER_STATEMENT.BALANCE_FORWARD")+":",!1,!1,!1,!1,e.reportData.balanceForward]),n.styles.unshift(d.h2),n.rows.push([!1,l.instant("MEMBER_STATEMENT.TOTALS")+":",!1,!1,e.reportData.totals.amountBilled,e.reportData.totals.amountPaid,e.reportData.totals.balance]),n.styles.push(d.h2);var a=[],i=o()(r=e.reportData.depositTransactions).call(r,(function(e,t){var r;return a.push(t%2?null:d.rowOdd),o()(r=n.columns).call(r,(function(t){return e[t.dataKey]}))}));return i.length>0&&(i.unshift([!1,l.instant("MEMBER_STATEMENT.SECURITY_DEPOSITS")+":",!1,!1,e.reportData.depositTotals.amountBilled,e.reportData.depositTotals.amountPaid,e.reportData.depositTotals.balance]),a.unshift(d.h2),n.rows=s()(i).call(i,n.rows),n.styles=s()(a).call(a,n.styles)),n}E.config={reportName:l.instant("MEMBER_STATEMENT.REPORT_NAME"),reportOptions:{centerId:!1},reportColumns:{columns:R},reportDates:{fromDate:moment(),toDate:moment()},reportFor:p.fullNameCompany,getReportData:function(){return m.get({centerId:i.getCurrentCenterId(),userId:i.getCurrentUserId(),fromDate:a("date")(E.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:a("date")(E.config.reportDates.toDate,"yyyy-MM-dd")}).$promise}},i.setPageTitle(l.instant("MEMBER_STATEMENT.PAGE_TITLE",{userName:E.config.reportFor})),E.config.reportDates.fromDate.subtract(1,"M"),E.reportBuilder=new f(E.config),t.$watch((function(e){return{reportOptions:E.config.reportOptions,reportDates:E.config.reportDates}}),(function(e,t){g&&(n.cancel(g),g=null),g=n((function(r){if(E.pdf=null,angular.isDefined(E.config.reportOptions.centerId)){var n=e.reportDates.fromDate,o=t.reportDates.fromDate;!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(E.config.reportData=null),n=e.reportDates.toDate,o=t.reportDates.toDate,!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(E.config.reportData=null),E.reportBuilder.buildPdf(y).then((function(e){E.pdf=e}))}}),100)}),!0),E.downloadPdf=function(){E.pdf&&c.download({blob:E.pdf,fileName:E.reportBuilder.getReportFileName("pdf")})},e.$on("CHANGE-CENTER",r.reload)}])},SeLF:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("hsT8"),o=r.n(n),a=r("6RpP"),s=r.n(a),l=r("KK/u"),i=r.n(l),u=r("yCd9"),c=r.n(u),d=r("5/DJ"),f=r("G6E5");r("ogb4");t.default=angular.module("deskworks.reports.recurringBillingChangeData",[d.a.name,f.a.name]).factory("recurringBillingChangeData",["$filter","$translate","helper","reportStyles","reportHelper",function(e,t,r,n,a){return function(r,l){var u,d={columns:o()(u=r.columns).call(u,(function(e){return e.include})),rows:[],styles:[]};if(!l||!l.length)return d;var f=e("currency"),p=function(t){return e("date")(t,"mediumDate")};return l.forEach((function(e){var o,l,u,m,R,g=t.instant("RECURRING_BILLING_CHANGE_REPORT.REVENUE_AS_OF_DATE",{date:p(e.from)}),E=t.instant("RECURRING_BILLING_CHANGE_REPORT.TOTAL_NEW");d.rows.push([{content:s()(o="".concat(g,": ")).call(o,f(e.revenueFirstDay)),colSpan:Math.ceil(d.columns.length/2)},{content:s()(l="".concat(E,": ")).call(l,f(e.totalNew)),colSpan:Math.floor(d.columns.length/2)}]),d.styles.push(n.h3);var y=t.instant("RECURRING_BILLING_CHANGE_REPORT.REVENUE_AS_OF_DATE",{date:p(e.to)}),h=t.instant("RECURRING_BILLING_CHANGE_REPORT.TOTAL_NOTICES");d.rows.push([{content:s()(u="".concat(y,": ")).call(u,f(e.revenueLastDay)),colSpan:Math.ceil(d.columns.length/2)},{content:s()(m="".concat(h,": ")).call(m,f(e.totalNotices)),colSpan:Math.floor(d.columns.length/2)}]),d.styles.push(n.h3);var T=t.instant("RECURRING_BILLING_CHANGE_REPORT.TOTAL_TERMINATIONS");d.rows.push([{content:!1,colSpan:Math.ceil(d.columns.length/2)},{content:s()(R="".concat(T,": ")).call(R,f(e.totalTermination)),colSpan:Math.floor(d.columns.length/2)}]),d.styles.push(n.h3),i()(a).call(a,e.billings,r.orderBy).forEach((function(e,t){var r;d.rows.push(c()(r=d.columns).call(r,(function(t){return e[t.dataKey]}))),d.styles.push(t%2?null:n.rowOdd)}))})),d}}])},SoPU:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.priceListReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("PriceListReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["pricelists.updatedAt"]);return e(r.getApiAbsUrl("/centers/:centerId/pricelist-reports"),{centerId:"@centerId"},{get:{method:"GET",transformResponse:[angular.fromJson,n]}})}])},Tx5W:function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n),a=r("6RpP"),s=r.n(a);t.default=angular.module("deskworks.reports.reservationUtilizationDetailedActualChart",[]).factory("reservationUtilizationDetailedActualChart",["$translate","$filter","helper",function(e,t,r){return function(n){var a,l,i=r.round(n.units.reduce((function(e,t){return e+t.total}),0));return{type:"pie",data:{labels:o()(a=n.units).call(a,(function(e){return e.name})),datasets:[{data:o()(l=n.units).call(l,(function(e){return e.total}))}]},options:{tooltips:{callbacks:{label:function(e,n){var o,a,l=n.labels[e.index],u=n.datasets[0].data[e.index],c=r.round(u/i*100,1);return s()(o=s()(a="".concat(l,": ")).call(a,t("hours")(u)," (")).call(o,c,"%)")}}},legend:{display:!0,position:"right"},title:{display:!0,text:e.instant("RESERVATION_UTILIZATION_REPORT.CHART.TOTAL_TIME").toUpperCase()+": "+t("hours")(i)}}}}}])},U9c4:function(e,t,r){"use strict";r.r(t);var n=r("hsT8"),o=r.n(n),a=r("KK/u"),s=r.n(a),l=r("yCd9"),i=r.n(l),u=r("6RpP"),c=r.n(u),d=r("ipr/"),f=r.n(d),p=(r("3dw1"),r("WgSX")),m=r("G6E5"),R=r("5/DJ"),g=r("LTMe");t.default=angular.module("deskworks.reports.memberUsageReport",[p.a.name,m.a.name,R.a.name,g.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.memberUsageReport.service","deskworks.reports.memberUsageReportColumns"]).controller("MemberUsageReportCtrl",["$rootScope","$scope","$timeout","$filter","$route","$q","$translate","state","helper","reportHelper","reportStyles","ReportBuilder","MemberUsageReport","memberUsageReportColumns",function(e,t,r,n,a,l,u,d,p,m,R,g,E,y){var h,T=this;T.config={reportName:u.instant("MEMBER_USAGE_REPORT.REPORT_NAME"),reportOptions:{},reportColumns:{columns:y},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return E.query({centerId:T.config.reportOptions.centerId,userId:d.getCurrentUserId(),fromDate:n("date")(T.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:n("date")(T.config.reportDates.toDate,"yyyy-MM-dd")}).$promise.then((function(e){return angular.forEach(e,(function(e){e.date=e.checkInTime.clone().hour(0).minute(0).second(0).millisecond(0)})),e}))}},d.setPageTitle(T.config.reportName),T.config.reportDates.fromDate.date(1),T.config.reportDates.toDate.add(1,"M").date(0),T.reportBuilder=new g(T.config),t.$watch((function(e){return{reportOptions:T.config.reportOptions,reportDates:T.config.reportDates,reportColumns:T.config.reportColumns,orderBy:T.config.orderBy}}),(function(e,t){h&&(r.cancel(h),h=null),h=r((function(r){if(T.pdf=null,angular.isDefined(T.config.reportOptions.centerId)){var n=e.reportDates.fromDate,o=t.reportDates.fromDate;!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(T.config.reportData=null),n=e.reportDates.toDate,o=t.reportDates.toDate,!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(T.config.reportData=null),T.reportBuilder.buildPdf(v).then((function(e){T.pdf=e}))}}),100)}),!0),T.downloadPdf=function(){T.pdf&&m.download({blob:T.pdf,fileName:T.reportBuilder.getReportFileName("pdf")})},T.downloadCsv=function(){T.pdf&&m.download({blob:T.reportBuilder.buildCsv(v),fileName:T.reportBuilder.getReportFileName("csv")})};var O=e.$on("CHANGE-USER",a.reload);function v(e){var t,r,n={columns:o()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:[],styles:[]},a=s()(m).call(m,e.reportData,e.orderBy),l=p.findIndexByKeyValue(n.columns,"dataKey","usageHours"),d=p.findIndexByKeyValue(n.columns,"dataKey","usagePasses"),g=i()(r=Array.apply(null,new Array(n.columns.length))).call(r,(function(e){return!1})),E=0,y=0;return a.forEach((function(t,r){var o;if(n.styles.push(r%2?null:R.rowOdd),n.rows.push(i()(o=n.columns).call(o,(function(e){return t[e.dataKey]}))),E+=t.usageHours?t.usageHours:0,y+=t.usagePasses?t.usagePasses:0,("date"===e.orderBy||"userName"===e.orderBy)&&(l>=0||d>=0)){var s,p="date"===e.orderBy?t[e.orderBy].unix():t[e.orderBy]||null;if(r<a.length-1&&(s="date"===e.orderBy?a[r+1][e.orderBy].unix():a[r+1][e.orderBy]||null),p!==s){var m,h,T;if(E=Math.round(100*E)/100,y=Math.round(100*y)/100,l>=0&&(h=c()(m=f()(g).call(g,0,Math.max(l-1,0))).call(m,[u.instant("MEMBER_USAGE_REPORT.TOTALS.SUBTOTAL")+":",E])),d>=0)l>=0?h.push(y):h=c()(T=f()(g).call(g,0,Math.max(d-1,0))).call(T,[u.instant("MEMBER_USAGE_REPORT.TOTALS.SUBTOTAL")+":",y]);n.rows.push(h),n.styles.push(R.h2),E=0,y=0}}})),n}t.$on("$destroy",O)}])},UUql:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.securityDepositReportColumns",[]).factory("securityDepositReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userName",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.USER_NAME",include:!0,styles:{minCellWidth:120}},{dataKey:"userCompany",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.COMPANY",include:!0,styles:{minCellWidth:150}},{dataKey:"orderId",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.ORDER_ID",include:!1,styles:{halign:"right"}},{dataKey:"date",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.DATE",include:!1,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"amount",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.AMOUNT",include:!1,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"balance",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.BALANCE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},UbAC:function(e,t,r){"use strict";r.r(t);var n=r("hsT8"),o=r.n(n),a=r("KK/u"),s=r.n(a),l=r("yCd9"),i=r.n(l),u=r("NOor"),c=r.n(u),d=r("WgSX"),f=r("G6E5"),p=r("5/DJ"),m=r("LTMe");t.default=angular.module("deskworks.RecurringBillingChurnReportCtrl",[d.a.name,f.a.name,p.a.name,m.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.RecurringBillingChurnReport","deskworks.recurringBillingChurnReportColumns"]).controller("RecurringBillingChurnReportCtrl",["$scope","$timeout","$filter","$translate","state","reportHelper","reportStyles","ReportBuilder","RecurringBillingChurnReport","recurringBillingChurnReportColumns",function(e,t,r,n,a,l,u,d,f,p){var m,R,g=this;function E(e){var t,a,d,f={columns:o()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:[],styles:[]};f.rows=s()(l).call(l,e.reportData.billings,e.orderBy),f.rows=i()(a=f.rows).call(a,(function(e,t){var r;return f.styles.push(t%2?null:u.rowOdd),i()(r=f.columns).call(r,(function(t){return e[t.dataKey]}))})),f.rows.push([{content:!1,colSpan:f.columns.length}]),f.styles.push(null);var p=c()(d=f.columns).call(d,(function(e){return"total"===e.dataKey}));return p>=0&&[{name:"MONTHLY_RECURRING_BILLINGS",key:"monthly"},{name:"QUARTERLY_RECURRING_BILLINGS",key:"quarterly"},{name:"SEMIANNUAL_RECURRING_BILLINGS",key:"semiAnnual"},{name:"ANNUAL_RECURRING_BILLINGS",key:"annual"},{name:"AS_NEEDED_RECURRING_BILLINGS",key:"asNeeded"}].forEach((function(t){var o=[{content:r("ncurrency")(e.reportData[t.key]),styles:{halign:"right"}}];p>0&&o.unshift({content:n.instant("RECURRING_BILLING_CHURN_REPORT.TOTALS.".concat(t.name))+":",colSpan:p,styles:{halign:"right"}}),p<f.columns.length-1&&o.push({content:!1,colSpan:f.columns.length-p-1}),f.rows.push(o),f.styles.push(u.h3)})),f}g.config={reportName:n.instant("RECURRING_BILLING_CHURN_REPORT.REPORT_NAME"),reportOptions:{},reportColumns:{columns:angular.copy(p)},reportDates:{toDate:a.getParam("toDate")||(m=moment(),a.setParam("toDate",r("date")(m,"yyyy-MM-dd")),m)},getReportData:function(){return f.get({centerId:g.config.reportOptions.centerId,toDate:r("date")(g.config.reportDates.toDate,"yyyy-MM-dd")})}},a.setPageTitle(g.config.reportName),e.$watch("$ctrl.config.reportOptions.centerId",(function(e){var t=g.config.reportColumns.columns[0];t.readonly=!!e,t.readonly&&(t.include=!1),t.readonly&&"centerName"===g.config.orderBy&&(g.config.orderBy="userCompany")})),g.reportBuilder=new d(g.config),e.$watch((function(e){return{reportOptions:g.config.reportOptions,reportColumns:g.config.reportColumns,toDate:g.config.reportDates.toDate,orderBy:g.config.orderBy}}),(function(e,n){R&&(t.cancel(R),R=null),R=t((function(t){if(g.pdf=null,!angular.isUndefined(g.config.reportOptions.centerId)){var o=e.toDate,s=n.toDate;!moment.isMoment(o)||moment.isMoment(s)&&o.isSame(s)||(g.config.reportData=null,a.setParam("toDate",r("date")(e.toDate,"yyyy-MM-dd"))),g.reportBuilder.buildPdf(E).then((function(e){g.pdf=e}))}}),100)}),!0),g.downloadPdf=function(){g.pdf&&l.download({blob:g.pdf,fileName:g.reportBuilder.getReportFileName("pdf")})},g.downloadCsv=function(){g.pdf&&l.download({blob:g.reportBuilder.buildCsv(E),fileName:g.reportBuilder.getReportFileName("csv")})}}])},UxRA:function(e,t){e.exports='<div id="passportReservationUsageReport" class="gutter-v"> <form name="formPassportReservationUsageReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <report-dates model="$ctrl.config.reportDates"></report-dates> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <report-options model="$ctrl.config.reportOptions"></report-options> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},VHZd:function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n);t.default=angular.module("deskworks.reports.recurringBillingChangeChart",[]).factory("recurringBillingChangeChart",["$translate","$filter","helper","whitelabel",function(e,t,r,n){return function(r){var n=[{label:e.instant("RECURRING_BILLING_CHANGE_REPORT.NEW_RB"),data:o()(r).call(r,(function(e){return e.totalNew})),maxBarThickness:50,backgroundColor:"#317da3"},{label:e.instant("RECURRING_BILLING_CHANGE_REPORT.NOTICES_GIVEN"),data:o()(r).call(r,(function(e){return e.totalNotices})),maxBarThickness:50,backgroundColor:"#3cb44b"},{label:e.instant("RECURRING_BILLING_CHANGE_REPORT.TERMINATIONS"),data:o()(r).call(r,(function(e){return e.totalTermination})),maxBarThickness:50,backgroundColor:"#808080"}];return{type:"bar",data:{labels:o()(r).call(r,(function(e){return e.title})),datasets:n},options:{tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(e,r){var n=r.datasets[e.datasetIndex];return n.label+": "+t("currency")(n.data[e.index])}}},legend:{display:!0,position:"left"},scales:{yAxes:[{ticks:{min:0,callback:function(e){return t("currency")(e,void 0,0)}}}]}}}}}])},VbF8:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.rentRollReportColumns",[]).factory("rentRollReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"centerName",_title:"RENT_ROLL_REPORT.COLUMNS.CENTER",include:!1},{dataKey:"userCompany",_title:"RENT_ROLL_REPORT.COLUMNS.COMPANY",include:!0},{dataKey:"userName",_title:"RENT_ROLL_REPORT.COLUMNS.MEMBER",include:!1},{dataKey:"productName",_title:"RENT_ROLL_REPORT.COLUMNS.SUBSCRIPTION_ITEM",include:!0,defaultOrder:!0},{dataKey:"area",_title:"RENT_ROLL_REPORT.COLUMNS.AREA",include:!0,styles:{cellWidth:"wrap",halign:"center"}},{dataKey:"amount",_title:"RENT_ROLL_REPORT.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"discount",_title:"RENT_ROLL_REPORT.COLUMNS.DISCOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"RENT_ROLL_REPORT.COLUMNS.TOTAL",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"startDate",_title:"RENT_ROLL_REPORT.COLUMNS.START_DATE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"terminationDate",_title:"RENT_ROLL_REPORT.COLUMNS.TERMINATION_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},Zdj5:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.RevenueForecastReport",["ngResource","deskworks.config"]).factory("RevenueForecastReport",["$resource","$timeout","deskworksConfig",function(e,t,r){var n=e(r.getApiAbsUrl("/reports/revenue-forecast"),{},{query:{method:"GET",isArray:!0}});return{query:function(e){return n.query({centerId:e.centerId,monthCount:e.monthCount}).$promise}}}])},ZfRm:function(e,t,r){"use strict";r.r(t);var n=r("hsT8"),o=r.n(n),a=r("KK/u"),s=r.n(a),l=r("yCd9"),i=r.n(l),u=r("WgSX"),c=r("G6E5"),d=r("5/DJ"),f=r("LTMe");t.default=angular.module("deskworks.reports.recurringBillingReport",[u.a.name,c.a.name,d.a.name,f.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportColumns","deskworks.reports.reportOwnerRegion","deskworks.reports.recurringBillingReport.service","deskworks.reports.recurringBillingReportColumns"]).controller("RecurringBillingReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","reportHelper","reportStyles","ReportBuilder","RecurringBillingReport","recurringBillingReportColumns",function(e,t,r,n,a,l,u,c,d,f,p){var m,R=this;function g(e){var t,r,a={columns:o()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:s()(u).call(u,e.reportData.billings,R.config.orderBy),styles:[]};a.rows=i()(r=a.rows).call(r,(function(e,t){var r;return a.styles.push(t%2?null:c.rowOdd),i()(r=a.columns).call(r,(function(t){return e[t.dataKey]}))}));var d,f,p,m,g,E,y,h,T=l.findIndexByKeyValue(a.columns,"dataKey","total");T>=0&&(f=(f=(f=l.findIndexByKeyValue(a.columns,"dataKey","description"))<0?l.findIndexByKeyValue(a.columns,"dataKey","productName"):f)<0?a.columns.length-2:f,a.rows.push(i()(p=Array.apply(null,Array(a.columns.length))).call(p,Boolean.prototype.valueOf,!1)),a.styles.push(null),(d=i()(m=Array.apply(null,Array(a.columns.length))).call(m,Boolean.prototype.valueOf,!1))[f]=n.instant("RECURRING_BILLINGS_REPORT.TOTALS.MONTHLY")+":",d[T]=e.reportData.totalMonthly,a.rows.push(d),a.styles.push(c.h3),(d=i()(g=Array.apply(null,Array(a.columns.length))).call(g,Boolean.prototype.valueOf,!1))[f]=n.instant("RECURRING_BILLINGS_REPORT.TOTALS.QUARTERLY")+":",d[T]=e.reportData.totalQuarterly,a.rows.push(d),a.styles.push(c.h3),(d=i()(E=Array.apply(null,Array(a.columns.length))).call(E,Boolean.prototype.valueOf,!1))[f]=n.instant("RECURRING_BILLINGS_REPORT.TOTALS.SEMI_ANNUAL")+":",d[T]=e.reportData.totalSemiAnnual,a.rows.push(d),a.styles.push(c.h3),(d=i()(y=Array.apply(null,Array(a.columns.length))).call(y,Boolean.prototype.valueOf,!1))[f]=n.instant("RECURRING_BILLINGS_REPORT.TOTALS.ANNUAL")+":",d[T]=e.reportData.totalAnnual,a.rows.push(d),a.styles.push(c.h3),(d=i()(h=Array.apply(null,Array(a.columns.length))).call(h,Boolean.prototype.valueOf,!1))[f]=n.instant("RECURRING_BILLINGS_REPORT.TOTALS.AS_NEEDED")+":",d[T]=e.reportData.totalAsNeeded,a.rows.push(d),a.styles.push(c.h3));return a}R.config={reportName:n.instant("RECURRING_BILLINGS_REPORT.REPORT_NAME"),reportOptions:{},reportColumns:{columns:angular.copy(p)},reportOwnerRegion:{},getReportData:function(){return f.get({centerId:R.config.reportOptions.centerId,ownerId:R.config.reportOwnerRegion.ownerId,regionId:R.config.reportOwnerRegion.regionId}).$promise}},a.setPageTitle(R.config.reportName),R.reportBuilder=new d(R.config),e.$watch((function(e){return{reportOptions:R.config.reportOptions,reportColumns:R.config.reportColumns,orderBy:R.config.orderBy,reportOwnerRegion:R.config.reportOwnerRegion}}),(function(e){m&&(t.cancel(m),m=null),m=t((function(e){R.pdf=null,angular.isUndefined(R.config.reportOptions.centerId)||R.reportBuilder.buildPdf(g).then((function(e){R.pdf=e}))}),100)}),!0),R.downloadPdf=function(){R.pdf&&u.download({blob:R.pdf,fileName:R.reportBuilder.getReportFileName("pdf")})},R.downloadCsv=function(){R.pdf&&u.download({blob:R.reportBuilder.buildCsv(g),fileName:R.reportBuilder.getReportFileName("csv")})}}])},aRIa:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.memberStatement.service",["ngResource","datesDeserializer","deskworks.config"]).factory("MemberStatement",["$resource","$q","datesDeserializer","deskworksConfig",function(e,t,r,n){var o=r(["transactions.date","depositTransactions.date"]);return e(n.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/member-statements"),{centerId:"@centerId",userId:"@userId",fromDate:"@fromDate",toDate:"@toDate"},{get:{method:"GET",transformResponse:[angular.fromJson,o]}})}])},b2oW:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("nbuU"),o=r.n(n);t.default=angular.module("deskworks.recurringBillingChurnReportColumns",["deskworks.userProfile.optsMembershipStatus","deskworks.userProfile.optsBillingMethod"]).factory("recurringBillingChurnReportColumns",["$rootScope","$filter","$translate","optsMembershipStatus","optsBillingMethod",function(e,t,r,n,a){var s=[{dataKey:"centerName",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.CENTER"},{dataKey:"userCompany",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.COMPANY",include:!0,defaultOrder:!0,styles:{minCellWidth:60}},{dataKey:"userName",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.MEMBER",include:!0},{dataKey:"userMembershipStatus",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.MEMBER_STATUS",include:!0,styles:{halign:"center"},pdf:function(e){return(o()(n).call(n,(function(t){return t.id===e}))||{}).name||e},csv:function(e){return(o()(n).call(n,(function(t){return t.id===e}))||{}).name||e}},{dataKey:"productName",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.RECURRING_BILLING_ITEM",include:!0},{dataKey:"billingMethod",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.BILLING_METHOD",include:!0,styles:{halign:"center"},pdf:function(e){return(o()(a).call(a,(function(t){return t.id===e}))||{}).name||e},csv:function(e){return(o()(a).call(a,(function(t){return t.id===e}))||{}).name||e}},{dataKey:"amount",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.AMOUNT",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"discount",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.DISCOUNT",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.TOTAL",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"startDate",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.START_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e)},csv:function(e){return t("date")(e)}},{dataKey:"terminationDate",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.TERMINATION_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e)},csv:function(e){return t("date")(e)}},{dataKey:"daysActive",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.DAYS_ACTIVE",include:!0,styles:{halign:"right"}},{dataKey:"leadSource",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.LEAD_SOURCE",include:!0}];function l(){s.forEach((function(e){e.title=r.instant(e._title)}))}return l(),e.$on("$setTranslationsSuccess",l),s}])},cavp:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.PaymentReconciliationReport",["ngResource","datesDeserializer","deskworks.config"]).factory("PaymentReconciliationReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t("daily.date"),o=e(r.getApiAbsUrl("/reports/payment-reconciliation"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,n]}});return{get:function(e){return o.get(e).$promise}}}])},dd2W:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.recurringBillingReport.service",["ngResource","datesDeserializer","deserializeNumbers","deskworks.config"]).factory("RecurringBillingReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=r(["billings.total","billings.discount","billings.amount","billings.noticePeriod","billings.renewalTerm","billings.renewalNoticePeriod"]),a=t(["billings.lastBillDate","billings.nextBillDate","billings.startDate","billings.ccExpiry","billings.terminate","billings.noticeDate","billings.renewalDate"]);return e(n.getApiAbsUrl("/centers/:centerId/recurring-billing-reports"),{centerId:"@centerId"},{get:{method:"GET",transformResponse:[angular.fromJson,a,o,function(e){return(e=angular.fromJson(e)).billings.forEach((function(e){e.renewalDate&&e.noticePeriod&&(e.noticeRequiredBy=new Date(e.renewalDate-24*e.noticePeriod*36e5))})),e}]}})}])},fVm0:function(e,t){e.exports='<div ng-controller="ProductReportCtrl as $ctrl" class="gutter-v"> <div class="ff-grid"> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}" style="margin-left:auto"> <report-options model="$ctrl.params"></report-options> </div> </div> <ff-btn-group> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},hUWN:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("fzuT"),o=r.n(n),a=r("XX2w"),s=r.n(a),l=r("yCd9"),i=r.n(l),u=r("ipr/"),c=r.n(u),d=r("lRNC"),f=r.n(d),p=r("03wM"),m=r.n(p),R=r("Ekwr"),g=r.n(R),E=r("hsT8"),y=r.n(E),h=r("lvz6"),T=r.n(h),O=r("yKah"),v=r.n(O),C=r("G6E5"),N=r("WgSX"),_=r("CLLE"),S=r("pl6f"),w=r("5/DJ"),P=r("LTMe"),D=r("Jqji"),I=r("4DcZ");function b(e,t){var r=m()(e);if(g.a){var n=g()(e);t&&(n=y()(n).call(n,(function(t){return T()(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):v.a?Object.defineProperties(e,v()(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,T()(r,t))}))}return e}t.default=angular.module("deskworks.RevenueForecastReportCtrl",["debounce","deskworks.state","deskworks.reports.ReportBuilder","deskworks.reportOrderBy","deskworks.RevenueForecastReport","deskworks.revenueForecastReportColumns",N.a.name,_.a.name,S.a.name,C.a.name,w.a.name,P.a.name,D.default.name,I.default.name]).controller("RevenueForecastReportCtrl",["$scope","$timeout","$filter","$translate","$q","systemColors","debounce","state","helper","reportStyles","reportHelper","dwAlerts","RevenueForecastReport","revenueForecastReportColumns","revenueForecastData","revenueForecastChart",function(e,t,r,n,o,a,l,u,d,p,m,R,g,E,y,h){var T,O,v,C=this,N=m.paramsChanged,_=m.loadResources;C.config={reportName:n.instant("REVENUE_FORECAST_REPORT.REPORT_NAME")},C.params={monthCount:u.getParam("monthCount")?+u.getParam("monthCount"):6,orderBy:u.getParam("orderBy")||"userName"},C.resources=null,C.data=null,C.columns=E,u.setPageTitle(C.config.reportName),C.optsMonthCount=i()(T=c()(O=s()(f()(v=Array(13)).call(v))).call(O,1)).call(T,(function(e){return{id:e,name:r("months")(e)}})),e.$watch("$ctrl.params",l((function(e,t){u.setParam("monthCount",C.params.monthCount),C.pdf=null,C.report=null,d.pointFirstInvalid("#revenueForecastReport")||(N(e,t,["monthCount","centerId"])&&(C.data=null),o.all({resources:C.resources||_(),data:C.data||g.query(C.params).catch((function(e){return R.error(e,"Failed to query report.")}))}).then((function(e){C.resources=e.resources,C.data=e.data})).then((function(){C.report=y(C.params,C.data);var e=m.buildPdf({config:A(A({},C.config),C.params),report:C.report,resources:C.resources});C.pdf=e.output("blob"),C.chart=h(C.data)})))}),100),!0),C.downloadPdf=function(){if(C.pdf){var e=m.getReportFileName({extension:"pdf",config:A(A({},C.config),C.params),resources:C.resources});m.download({blob:C.pdf,fileName:e})}},C.downloadCsv=function(){if(C.pdf){var e=m.getReportFileName({extension:"csv",config:A(A({},C.config),C.params),resources:C.resources}),t=m.buildCsv({report:C.report});m.download({blob:t,fileName:e})}}}])},haNf:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.memberStatementColumns",[]).factory("memberStatementColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"date",_title:"MEMBER_STATEMENT.COLUMNS.DATE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"item",_title:"MEMBER_STATEMENT.COLUMNS.ITEM",include:!0},{dataKey:"price",_title:"MEMBER_STATEMENT.COLUMNS.UNIT_PRICE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"qty",_title:"MEMBER_STATEMENT.COLUMNS.QUANTITY",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"amountBilled",_title:"MEMBER_STATEMENT.COLUMNS.AMOUNT_BILLED",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"amountPaid",_title:"MEMBER_STATEMENT.COLUMNS.AMOUNT_PAID",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"balance",_title:"MEMBER_STATEMENT.COLUMNS.BALANCE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},hlyU:function(e,t,r){"use strict";r.r(t);r("Muwe"),r("X5mX"),r("y89P"),r("3dw1");var n=r("hsT8"),o=r.n(n),a=r("KK/u"),s=r.n(a),l=r("yCd9"),i=r.n(l),u=r("NOor"),c=r.n(u),d=r("6RpP"),f=r.n(d),p=r("ipr/"),m=r.n(p),R=r("WgSX"),g=r("G6E5"),E=r("5/DJ"),y=r("LTMe");t.default=angular.module("deskworks.reports.securityDepositReport",[R.a.name,g.a.name,E.a.name,y.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOwnerRegion","deskworks.reports.securityDepositReport.service","deskworks.reports.securityDepositReportColumns"]).controller("SecurityDepositReportCtrl",["$scope","$timeout","$filter","$translate","$location","state","helper","reportHelper","reportStyles","ReportBuilder","SecurityDepositReport","securityDepositReportColumns",function(e,t,r,n,a,l,u,d,p,R,g,E){var y,h,T=this;function O(e){var t,r,o,a,l,u={columns:e.showDetails?e.reportColumns:T.reportColumnsFiltered,rows:[],styles:[]},R=s()(d).call(d,e.reportData.deposits,e.orderBy),g=i()(t=Array.apply(null,new Array(u.columns.length))).call(t,(function(e){return!1}));(R.forEach((function(t,r){var n;u.styles.push(e.showDetails?p.h2:r%2?null:p.rowOdd),u.rows.push(i()(n=u.columns).call(n,(function(e){return!(["orderId","date","amount"].indexOf(e.dataKey)>=0)&&t[e.dataKey]}))),e.showDetails&&t.details.forEach((function(e,t){u.styles.push(t%2?null:p.rowOdd),u.rows.push([!1,!1,e.orderId,e.date,e.amount,!1])}))})),u.rows.push(g),u.styles.push(null),(o=c()(r=u.columns).call(r,(function(e){return"balance"===e.dataKey})))>=0)&&(u.rows.push(f()(a=f()(l=m()(g).call(g,0,Math.max(o-1,0))).call(l,o>0?[{content:n.instant("SECURITY_DEPOSIT_REPORT.TOTALS.TOTAL")+":",styles:{halign:"right"}},e.reportData.total]:[e.reportData.total])).call(a,m()(g).call(g,0,g.length-o-1))),u.styles.push(p.h3));return u}T.config={reportName:n.instant("SECURITY_DEPOSIT_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:E,toDate:moment(),showDetails:!1,getReportData:function(){return g.get({centerId:T.config.reportOptions.centerId,ownerId:T.config.reportOwnerRegion.ownerId,regionId:T.config.reportOwnerRegion.regionId,toDate:r("date")(T.config.toDate,"yyyy-MM-dd")}).$promise}},T.reportColumnsFiltered=o()(y=T.config.reportColumns).call(y,(function(e){return e.include})),l.setPageTitle(T.config.reportName),e.$watch((function(e){return a.search().showDetails}),(function(e){T.config.showDetails=e})),e.$watch("$ctrl.config.showDetails",(function(e){a.search("showDetails",e||null).replace()})),e.$watch((function(){return a.search().toDate}),(function(e){var t=r("toDate")(e);T.config.toDate=moment.isMoment(t)&&!T.config.toDate.isSame(t)?t:T.config.toDate})),e.$watch("$ctrl.config.toDate",(function(e){moment.isMoment(e)&&a.search("toDate",r("date")(e,"yyyy-MM-dd")).replace()})),T.reportBuilder=new R(T.config),T.getToday=function(){return moment()},e.$watch((function(){return{reportOptions:T.config.reportOptions,reportOwnerRegion:T.config.reportOwnerRegion,toDate:T.config.toDate,orderBy:T.config.orderBy,showDetails:T.config.showDetails}}),(function(e,r){h&&(t.cancel(h),h=null),h=t((function(t){if(!(moment.isMoment(e.toDate)&&e.toDate.isAfter(moment(),"day")||(T.pdf=null,angular.isUndefined(T.config.reportOptions.centerId)))){var n=e.toDate,o=r.toDate;!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(T.config.reportData=null),T.reportBuilder.buildPdf(O).then((function(e){T.pdf=e}))}}),100)}),!0),T.downloadPdf=function(){T.pdf&&d.download({blob:T.pdf,fileName:T.reportBuilder.getReportFileName("pdf")})},T.downloadCsv=function(){T.pdf&&d.download({blob:T.reportBuilder.buildCsv(O),fileName:T.reportBuilder.getReportFileName("csv")})}}])},iEZ8:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.PassportReservationUsageReport",["ngResource","datesDeserializer","deskworks.config"]).factory("PassportReservationUsageReport",["$resource","datesDeserializer","deskworksConfig","$q",function(e,t,r,n){var o=t(["usages.startTime","usages.endTime"]),a=e(r.getApiAbsUrl("/reports/passport-reservation-usage"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,o,function(e){return e.forEach((function(e){e.usages.forEach((function(e){e.duration=e.endTime-e.startTime}))})),e}]}});return{query:function(e){return a.query(e).$promise}}}])},iTQj:function(e,t){e.exports='<div id="mailboxReport" class="gutter-v"> <form name="formMailboxReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <report-columns model="vm.config.reportColumns"></report-columns> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="vm.config.reportOptions"> <report-order-by model="vm.config.orderBy" report-columns="vm.config.reportColumns.columns"></report-order-by> </report-options> <report-owner-region model="vm.config.reportOwnerRegion" report-data="vm.config.reportData"></report-owner-region> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="vm.downloadPdf()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="vm.downloadCsv()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="vm.pdf"></div> </ff-panel> </div> '},iYz6:function(e,t,r){"use strict";r.r(t);var n=r("Ekwr"),o=r.n(n),a=r("hsT8"),s=r.n(a),l=r("lvz6"),i=r.n(l),u=r("yKah"),c=r.n(u),d=r("fzuT"),f=r.n(d),p=r("03wM"),m=r.n(p);r("ZEAQ"),r("3dw1");function R(e,t){var r=m()(e);if(o.a){var n=o()(e);t&&(n=s()(n).call(n,(function(t){return i()(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){f()(e,t,r[t])})):c.a?Object.defineProperties(e,c()(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,i()(r,t))}))}return e}t.default=angular.module("deskworks.productReportColumns",[]).factory("productReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n={pdf:function(e){return t("yesno")(e)},csv:function(e){return t("yesno")(e)}},o={pdf:function(e){return a(e)},csv:function(e){return a(e)}};function a(e){var t=parseFloat(e);return isNaN(t)?e:t.toFixed(2)}var s={halign:"right"},l={halign:"center"},i={membership:[{dataKey:"code",_title:"PRODUCTS.CODE",include:!0},{dataKey:"name",_title:"PRODUCTS.NAME",include:!0},{dataKey:"membershipCategory",_title:"PRODUCTS.MEMBERSHIP_CATEGORY",include:!0},{dataKey:"billingFrequency",_title:"PRODUCTS.BILLING_FREQUENCY",include:!0},g(g({dataKey:"isCreditable",_title:"PRODUCTS.IS_CREDITABLE",include:!0},n),{},{styles:g({},l)}),{dataKey:"passProduct",_title:"PRODUCTS.PASS_PRODUCT",include:!0},{dataKey:"countCheckInsPer",_title:"PRODUCTS.COUNT_CHECK_INS_PER",include:!0},g(g({dataKey:"reserveWithNonMemberRules",_title:"PRODUCTS.ONLY_NON_MEMBER_HOURS.SHORT",include:!0},n),{},{styles:g({},l)}),g(g({dataKey:"taxable",_title:"PRODUCTS.TAXABLE",include:!0},n),{},{styles:g({},l)}),g(g({dataKey:"showInSelfRegistration",_title:"PRODUCTS.SHOW_FOR_SIGN_UP.SHORT",include:!0},n),{},{styles:g({},l)}),g(g({dataKey:"hasRegistrationFee",_title:"PRODUCTS.HAS_REGISTRATION_FEE",include:!0},n),{},{styles:g({},l)}),g(g({dataKey:"trackAcrossAllCenters",_title:"PRODUCTS.TRACK_ACROSS_ALL_CENTERS",include:!0},n),{},{styles:g({},l)}),{dataKey:"printBlack",_title:"PRODUCTS.FREE_COPIES.PRINT_BLACK",include:!0,styles:g({},s)},{dataKey:"printColor",_title:"PRODUCTS.FREE_COPIES.PRINT_COLOR",include:!0,styles:g({},s)},{dataKey:"fax",_title:"PRODUCTS.FREE_COPIES.FAX",include:!0,styles:g({},s)},{dataKey:"scan",_title:"PRODUCTS.FREE_COPIES.SCAN",include:!0,styles:g({},s)},{dataKey:"description",_title:"PRODUCTS.DESCRIPTION",include:!0}],registration:[{dataKey:"code",_title:"PRODUCTS.CODE",include:!0},{dataKey:"name",_title:"PRODUCTS.NAME",include:!0},g(g({dataKey:"taxable",_title:"PRODUCTS.TAXABLE",include:!0},n),{},{styles:g({},l)}),{dataKey:"description",_title:"PRODUCTS.DESCRIPTION",include:!0}],rental:[{dataKey:"code",_title:"PRODUCTS.CODE",include:!0},{dataKey:"name",_title:"PRODUCTS.NAME",include:!0},{dataKey:"reservationCategory",_title:"PRODUCTS.RESERVATION_CATEGORY",include:!0},g(g({dataKey:"allowReservationCredits",_title:"PRODUCTS.ALLOW_RESERVATION_CREDITS",include:!0},n),{},{styles:g({},l)}),g(g({dataKey:"canBuyOnSplashPage",_title:"PRODUCTS.BUY_ON_SPLASH_PAGE",include:!0},n),{},{styles:g({},l)}),g(g({dataKey:"passSize",_title:"PRODUCTS.PASS_SIZE",include:!0},o),{},{styles:g({},s)}),g(g({dataKey:"passMin",_title:"PRODUCTS.MIN_PASS.SHORT",include:!0},o),{},{styles:g({},s)}),{dataKey:"passMax",_title:"PRODUCTS.MAX_PASS.SHORT",include:!0,styles:g({},s)},g(g({dataKey:"taxable",_title:"PRODUCTS.TAXABLE",include:!0},n),{},{styles:g({},l)}),{dataKey:"description",_title:"PRODUCTS.DESCRIPTION",include:!0}],print:[{dataKey:"code",_title:"PRODUCTS.CODE",include:!0},{dataKey:"name",_title:"PRODUCTS.NAME",include:!0},g(g({dataKey:"taxable",_title:"PRODUCTS.TAXABLE",include:!0},n),{},{styles:g({},l)}),{dataKey:"description",_title:"PRODUCTS.DESCRIPTION",include:!0}],services:[{dataKey:"code",_title:"PRODUCTS.CODE",include:!0},{dataKey:"name",_title:"PRODUCTS.NAME",include:!0},{dataKey:"billingFrequency",_title:"PRODUCTS.BILLING_FREQUENCY",include:!0},g(g({dataKey:"showInSelfRegistration",_title:"PRODUCTS.SHOW_FOR_SIGN_UP.SHORT",include:!0},n),{},{styles:g({},l)}),g(g({dataKey:"taxable",_title:"PRODUCTS.TAXABLE",include:!0},n),{},{styles:g({},l)}),{dataKey:"description",_title:"PRODUCTS.DESCRIPTION",include:!0}]};function u(){m()(i).forEach((function(e){return i[e].forEach((function(e){e.title=r.instant(e._title)}))}))}return u(),e.$on("$setTranslationsSuccess",u),i}])},kJoc:function(e,t){e.exports='<div id="securityDepositReport" class="gutter-v"> <form name="formSecurityDepositReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"></div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="$ctrl.config.reportOptions"> <label class="ff-row"> <ff-label flex="0 0 100px" ff-required="true"><span translate="REPORTS.PERIOD.TO_DATE"></span></ff-label> <ff-date flex="0 0 124px" name="toDate" ff-model="$ctrl.config.toDate" ff-date-order="{ early: $ctrl.config.toDate, late: $ctrl.getToday() }" ff-validate-alert="{ field: \'Selected date\', late: \'or equal to today\' }"></ff-date> <span class="ff-label"></span> </label> <report-order-by model="$ctrl.config.orderBy" report-columns="$ctrl.reportColumnsFiltered"></report-order-by> <ff-row> <ff-label flex="0 0 100px"><span translate="SECURITY_DEPOSIT_REPORT.SHOW_DETAILS"></span></ff-label> <ff-static><ff-checkbox ff-model="$ctrl.config.showDetails"></ff-checkbox></ff-static> </ff-row> </report-options> <report-owner-region model="$ctrl.config.reportOwnerRegion" report-data="$ctrl.config.reportData"></report-owner-region> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},lKYt:function(e,t){e.exports='<div id="memberUsageReport" class="gutter-v"> <form name="formMemberUsageReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-dates model="vm.config.reportDates"></report-dates> <report-columns model="vm.config.reportColumns"></report-columns> </div> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <report-options model="vm.config.reportOptions"> <report-order-by model="vm.config.orderBy" report-columns="vm.config.reportColumns.columns"></report-order-by> </report-options> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="vm.downloadPdf()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="vm.downloadCsv()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="vm.pdf"></div> </ff-panel> </div> '},liLb:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.RecurringBillingChurnReport",["ngResource","datesDeserializer","deskworks.config"]).factory("RecurringBillingChurnReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["billings.startDate","billings.terminationDate"]),o=e(r.getApiAbsUrl("/reports/recurring-billing-churn"),{},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,n]}});return{get:function(e){return o.get(e).$promise}}}])},nJHl:function(e,t){e.exports='<div id="reservationUtilizationReport" class="gutter-v"> <form> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <report-dates model="$ctrl.params"></report-dates> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="$ctrl.params" all-centers="false"> <ff-row> <ff-label flex="0 0 100px"><span translate="RESERVATION_UTILIZATION_REPORT.MODE"></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half"> <label flex="0 0 auto"> <ff-radio ff-model="$ctrl.params.mode" ff-value="\'detailedActual\'"> <span translate="RESERVATION_UTILIZATION_REPORT.MODE.DETAILED_ACTUAL"></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio ff-model="$ctrl.params.mode" ff-value="\'actualExpected\'"> <span translate="RESERVATION_UTILIZATION_REPORT.MODE.ACTUAL_EXPECTED"></span> </ff-radio> </label> </div> </ff-static> </ff-row> <report-by-period model="$ctrl.params.byPeriod" ng-if="$ctrl.params.mode === \'detailedActual\'"></report-by-period> </report-options> </div> </div> <ff-panel flex="auto"> <ff-panel-header><span translate="RESERVATION_UTILIZATION_REPORT.CHART.HEADER"></span></ff-panel-header> <div ff-dim="!$ctrl.pdf" ng-init="$ctl = $ctrl"> <chart config="$ctrl.chart" ng-style="{ \'max-height\': ($ctl.chart && $ctl.chart.type !== \'pie\' ? \'none\' : null), \'height\': ($ctl.chart && $ctl.chart.type !== \'pie\' ? $ctl.chart.data.labels.length * 30 + 40 + \'px\' : null) }"></chart> </div> </ff-panel> <ff-btn-group> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </div> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},nUUl:function(e,t){e.exports='<div id="revenueForecastReport" class="gutter-v"> <form> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <ff-panel flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <ff-panel-header><span translate="REVENUE_FORECAST_REPORT.BAR_CHART.HEADER"></span></ff-panel-header> <div ff-dim="!$ctrl.pdf"> <chart config="$ctrl.chart" style="max-height:228px"></chart> </div> </ff-panel> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <report-options model="$ctrl.params"> <label class="ff-row"> <ff-label flex="0 0 100px"><span translate="REVENUE_FORECAST_REPORT.PERIOD"></span></ff-label> <ff-select ff-model="$ctrl.params.monthCount" ff-required="true" ff-options="opt.id as opt.name for opt in $ctrl.optsMonthCount" ff-validate-alert="{{\'REVENUE_FORECAST_REPORT.PERIOD\' | translate}}"></ff-select> </label> <report-order-by model="$ctrl.params.orderBy" report-columns="$ctrl.columns"></report-order-by> </report-options> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},nabW:function(e,t){e.exports='<div id="recurringBillingChurnReport" class="gutter-v"> <form name="formRecurringBillingChurnReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 65%\', md: \'0 0 50%\'}"> <report-columns model="$ctrl.config.reportColumns"></report-columns> </div> <div flex="{lg: \'0 0 35%\', md: \'0 0 50%\'}"> <report-options model="$ctrl.config.reportOptions"> <label class="ff-row"> <ff-label flex="0 0 100px"><span translate="RECURRING_BILLING_CHURN_REPORT.AS_OF"></span></ff-label> <ff-date flex="0 0 124px" ff-model="$ctrl.config.reportDates.toDate" ff-validate-alert="{{\'RECURRING_BILLING_CHURN_REPORT.AS_OF\' | translate}}"></ff-date> <span class="ff-label"></span> </label> <report-order-by model="$ctrl.config.orderBy" report-columns="$ctrl.config.reportColumns.columns"></report-order-by> </report-options> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},"o/Kf":function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("6RpP"),o=r.n(n);t.default=angular.module("deskworks.passportReservationUsageReportColumns",[]).factory("passportReservationUsageReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"unitName",_title:"PASSPORT_RESERVATION_USAGE_REPORT.COLUMNS.RESERVATION_UNIT"},{dataKey:"duration",_title:"PASSPORT_RESERVATION_USAGE_REPORT.COLUMNS.HOURS",styles:{halign:"right"},pdf:function(e){return t("hoursMinutes")(e)},csv:function(e){return t("hoursMinutes")(e)}},{dataKey:"startTime",_title:"PASSPORT_RESERVATION_USAGE_REPORT.COLUMNS.START_TIME",styles:{halign:"right"},pdf:function(e){var r;return o()(r="".concat(t("date")(e,"mediumDate")," ")).call(r,t("date")(e,"shortTime"))},csv:function(e){return t("date")(e,"medium")}},{dataKey:"endTime",_title:"PASSPORT_RESERVATION_USAGE_REPORT.COLUMNS.END_TIME",styles:{halign:"right"},pdf:function(e){var r;return o()(r="".concat(t("date")(e,"mediumDate")," ")).call(r,t("date")(e,"shortTime"))},csv:function(e){return t("date")(e,"medium")}}];function a(){n.forEach((function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},oMHk:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reservationUtilizationDetailedActualColumns",[]).factory("reservationUtilizationDetailedActualColumns",["$rootScope","$translate",function(e,t){var r=[{dataKey:"name",_title:"RESERVATION_UNITS.UNIT"},{dataKey:"[period]",_title:"",styles:{halign:"center"}},{dataKey:"totals",_title:"REPORTS.TOTALS",styles:{halign:"center"}}];function n(){r.forEach((function(e){e.title=t.instant(e._title)}))}return n(),e.$on("$setTranslationsSuccess",n),r}])},ogb4:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("nbuU"),o=r.n(n);t.default=angular.module("deskworks.recurringBillingChangeReportColumns",["deskworks.userProfile.optsMembershipStatus"]).factory("recurringBillingChangeReportColumns",["$rootScope","$translate","$filter","optsMembershipStatus",function(e,t,r,n){var a=[{dataKey:"centerName",_title:"REPORTS.COLUMNS.CENTER",include:!1},{dataKey:"userCompany",_title:"REPORTS.COLUMNS.USER_COMPANY",include:!0,defaultOrder:!0},{dataKey:"userName",_title:"RECURRING_BILLING_CHANGE_REPORT.COLUMNS.MEMBER",include:!0},{dataKey:"userMembershipStatus",_title:"RECURRING_BILLING_CHANGE_REPORT.COLUMNS.MEMBER_STATUS",include:!0,styles:{halign:"center",cellWidth:50},pdf:function(e){return(o()(n).call(n,(function(t){return t.id===e}))||{}).name||e},csv:function(e){return(o()(n).call(n,(function(t){return t.id===e}))||{}).name||e}},{dataKey:"productName",_title:"RECURRING_BILLING_CHANGE_REPORT.COLUMNS.PRODUCT",include:!0,styles:{minCellWidth:110}},{dataKey:"amount",_title:"REPORTS.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return r("currency")(e)},csv:function(e){return r("currency")(e)}},{dataKey:"discount",_title:"REPORTS.COLUMNS.DISCOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return r("currency")(e)},csv:function(e){return r("currency")(e)}},{dataKey:"total",_title:"REPORTS.COLUMNS.TOTAL",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return r("currency")(e)},csv:function(e){return r("currency")(e)}},{dataKey:"startDate",_title:"RECURRING_BILLING_CHANGE_REPORT.COLUMNS.START_DATE",include:!0,styles:{halign:"right",cellWidth:55},pdf:function(e){return r("date")(e,"mediumDate")},csv:function(e){return r("date")(e,"shortDate")}},{dataKey:"noticeDate",_title:"RECURRING_BILLING_CHANGE_REPORT.COLUMNS.NOTICE_DATE",include:!0,styles:{halign:"right",cellWidth:55},pdf:function(e){return r("date")(e,"mediumDate")},csv:function(e){return r("date")(e,"shortDate")}},{dataKey:"terminationDate",_title:"RECURRING_BILLING_CHANGE_REPORT.COLUMNS.TERMINATION_DATE",include:!0,styles:{halign:"right",cellWidth:55},pdf:function(e){return r("date")(e,"mediumDate")},csv:function(e){return r("date")(e,"shortDate")}},{dataKey:"daysActive",_title:"RECURRING_BILLING_CHANGE_REPORT.COLUMNS.DAYS_ACTIVE",include:!0,styles:{halign:"right",cellWidth:45}}];function s(){a.forEach((function(e){e.title=t.instant(e._title)}))}return s(),e.$on("$setTranslationsSuccess",s),a}])},piGw:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.ReservationUsageReport",["ngResource","deskworks.config","deserializeNumbers"]).factory("ReservationUsageReport",["$resource","deskworksConfig","deserializeNumbers",function(e,t,r){var n=t.getApiAbsUrl("/reservation-usage-report"),o=r(["reservationHours","reservationCost","reservationCreditApplied","reservationCostBalance"]),a=e(n,{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,o]}});return{query:function(e){return a.query(e).$promise}}}])},qctg:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("yCd9"),o=r.n(n),a=r("KK/u"),s=r.n(a),l=r("WgSX"),i=r("G6E5"),u=r("5/DJ"),c=r("LTMe");t.default=angular.module("deskworks.ReservationUsageReportCtrl",[l.a.name,i.a.name,u.a.name,c.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOwnerRegion","deskworks.ReservationUsageReport","deskworks.reservationUsageReportColumns","deskworks.reportOrderBy"]).controller("ReservationUsageReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","reportHelper","reportStyles","ReportBuilder","ReservationUsageReport","reservationUsageReportColumns",function(e,t,r,n,a,l,i,u,c,d,f){var p,m=this;function R(e){var t,r={columns:e.reportColumns,rows:[],styles:[]},a=["reservationCost","reservationCreditApplied","reservationCostBalance"],c=e.reportData.reduce((function(e,t){return a.forEach((function(r){e[r]+=t[r]||0})),e}),a.reduce((function(e,t){return e[t]=0,e}),{}));c.memberCompany=n.instant("REPORTS.TOTALS").toUpperCase()+":";var d=o()(t=r.columns).call(t,(function(e){return angular.isNumber(c[e.dataKey])?l.round(c[e.dataKey]):c[e.dataKey]||!1}));return r.rows.push(d),r.styles.push(u.h2),s()(i).call(i,e.reportData,e.orderBy).forEach((function(e,t){var n;r.rows.push(o()(n=r.columns).call(n,(function(t){return angular.isNumber(e[t.dataKey])?l.round(e[t.dataKey]):e[t.dataKey]}))),r.styles.push(t%2?null:u.rowOdd)})),e.reportData.length&&(r.rows.push(angular.extend({},d)),r.styles.push(u.h2)),r}m.config={reportName:n.instant("RESERVATION_USAGE_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:f,reportDates:{fromDate:moment().subtract(1,"month").startOf("month"),toDate:moment().subtract(1,"month").endOf("month")},getReportData:function(){return d.query({centerId:m.config.reportOptions.centerId||null,fromDate:r("date")(m.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(m.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:m.config.reportOwnerRegion.ownerId,regionId:m.config.reportOwnerRegion.regionId})}},a.setPageTitle(m.config.reportName),m.reportBuilder=new c(m.config),e.$watch((function(){return{reportOptions:m.config.reportOptions,reportDates:m.config.reportDates,orderBy:m.config.orderBy,reportOwnerRegion:m.config.reportOwnerRegion}}),(function(e,r){p&&(t.cancel(p),p=null),p=t((function(){m.pdf=null;var t=e.reportDates.fromDate,n=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(m.config.reportData=null),t=e.reportDates.toDate,n=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(m.config.reportData=null),m.reportBuilder.buildPdf(R).then((function(e){m.pdf=e}))}),100)}),!0),m.downloadPdf=function(){m.pdf&&i.download({blob:m.pdf,fileName:m.reportBuilder.getReportFileName("pdf")})},m.downloadCsv=function(){m.pdf&&i.download({blob:m.reportBuilder.buildCsv(R),fileName:m.reportBuilder.getReportFileName("csv")})}}])},qhd7:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.ReservationUtilizationReport",["ngResource","datesDeserializer","deskworks.config"]).factory("ReservationUtilizationReport",["$resource","$filter","datesDeserializer","deskworksConfig",function(e,t,r,n){var o=r(["groups.daily.date"]),a=e(n.getApiAbsUrl("/reservation-utilization-report"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,o]}});return{query:function(e){return a.query({centerId:e.centerId||null,fromDate:t("date")(e.fromDate,"yyyy-MM-dd"),toDate:t("date")(e.toDate,"yyyy-MM-dd")}).$promise}}}])},r4Q0:function(e,t){e.exports='<div id="passUsageReport" class="gutter-v"> <form name="formPassUsageReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <report-dates model="$ctrl.params"></report-dates> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <report-options model="$ctrl.params"> <report-order-by model="$ctrl.params.orderBy" report-columns="$ctrl.columns"></report-order-by> </report-options> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},rlfb:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.memberUsageReportColumns",["deskworks.helper"]).factory("memberUsageReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"date",_title:"MEMBER_USAGE_REPORT.COLUMNS.DATE",include:!0,defaultOrder:!0,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"userName",_title:"MEMBER_USAGE_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"userEmail",_title:"MEMBER_USAGE_REPORT.COLUMNS.USER_EMAIL",include:!0},{dataKey:"checkInTime",_title:"MEMBER_USAGE_REPORT.COLUMNS.CHECK_IN",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortTime")}},{dataKey:"checkOutTime",_title:"MEMBER_USAGE_REPORT.COLUMNS.CHECK_OUT",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortTime")}},{dataKey:"usageHours",_title:"MEMBER_USAGE_REPORT.COLUMNS.HOURS",include:!0,styles:{halign:"right"}},{dataKey:"usagePasses",_title:"MEMBER_USAGE_REPORT.COLUMNS.PASSES",include:!0,styles:{halign:"right"}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},rrwk:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.revenueForecastReportColumns",[]).factory("revenueForecastReportColumns",["$rootScope","$translate",function(e,t){var r=[{dataKey:"userCompany",_title:"REVENUE_FORECAST_REPORT.COLUMNS.COMPANY",include:!0},{dataKey:"userName",_title:"REVENUE_FORECAST_REPORT.COLUMNS.NAME",include:!0,defaultOrder:!0}];function n(){r.forEach((function(e){e.title=t.instant(e._title)}))}return n(),e.$on("$setTranslationsSuccess",n),r}])},tmk0:function(e,t){e.exports='<div id="rentRollReport" class="gutter-v"> <form name="formRentRollReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 65%\', md: \'0 0 50%\'}"> <report-columns model="$ctrl.config.reportColumns"></report-columns> </div> <div flex="{lg: \'0 0 35%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="$ctrl.config.reportOptions"> <report-order-by model="$ctrl.config.orderBy" report-columns="$ctrl.config.reportColumns.columns"></report-order-by> </report-options> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},vRPl:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.reservationReportColumns",[]).factory("reservationReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"startTime",_title:"RESERVATION_REPORT.COLUMNS.START_TIME",include:!0,styles:{minCellWidth:100},pdf:function(e){return t("date")(e,"weekDate")+" "+t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortDate")+" "+t("date")(e,"shortTime")}},{dataKey:"centerName",_title:"RESERVATION_REPORT.COLUMNS.CENTER",include:!1,styles:{minCellWidth:120}},{dataKey:"createdAt",_title:"RESERVATION_REPORT.COLUMNS.CREATED_AT",include:!1,styles:{minCellWidth:80},pdf:function(e){return t("date")(e,"mediumDate")+" "+t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortDate")+" "+t("date")(e,"shortTime")}},{dataKey:"endTime",_title:"RESERVATION_REPORT.COLUMNS.END_TIME",include:!0,styles:{minCellWidth:100},pdf:function(e){return t("date")(e,"weekDate")+" "+t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortDate")+" "+t("date")(e,"shortTime")}},{dataKey:"note",_title:"RESERVATION_REPORT.COLUMNS.NOTE",include:!1,styles:{minCellWidth:120}},{dataKey:"reservationUnitName",_title:"RESERVATION_REPORT.COLUMNS.UNIT",include:!0,styles:{minCellWidth:150}},{dataKey:"userCompany",_title:"RESERVATION_REPORT.COLUMNS.COMPANY",include:!0,styles:{minCellWidth:150}},{dataKey:"userName",_title:"RESERVATION_REPORT.COLUMNS.USER_NAME",include:!0,styles:{minCellWidth:120}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},vRjO:function(e,t,r){"use strict";r.r(t);var n=r("6RpP"),o=r.n(n),a=r("yCd9"),s=r.n(a);t.default=angular.module("deskworks.reports.reservationUtilizationActualExpectedChart",[]).factory("reservationUtilizationActualExpectedChart",["$translate","$filter","helper","whitelabel",function(e,t,r,n){return function(r){var a=r.reduce((function(e,t){return o()(e).call(e,t.units)}),[]),l=e.instant("RESERVATION_UTILIZATION_REPORT.COLUMNS.EXPECTED_USAGE"),i=e.instant("RESERVATION_UTILIZATION_REPORT.COLUMNS.ACTUAL_USAGE"),u=e.instant("RESERVATION_UTILIZATION_REPORT.COLUMNS.UTILIZATION");return{type:"horizontalBar",data:{labels:s()(a).call(a,(function(e){return e.name||"-"})),datasets:[{data:s()(a).call(a,(function(e){return e.utilization})),backgroundColor:n.getProperty("--brand-color"),maxBarThickness:30}]},options:{tooltips:{callbacks:{label:function(e,r){var n,s,c,d=a[e.index],f=t("hours")(t("round")(d.expectedUse,1)),p=t("hours")(t("round")(d.actualUse,1)),m=t("round")(d.utilization,1);return[o()(n="".concat(l,": ")).call(n,f),o()(s="".concat(i,": ")).call(s,p),o()(c="".concat(u,": ")).call(c,m,"%")]}}},legend:{display:!1},scales:{xAxes:[{min:100,max:100,ticks:{suggestedMin:0,suggestedMax:100,callback:function(e){return e+"%"}}}]}}}}}])},wASb:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.passUsageReportColumns",[]).factory("passUsageReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"memberCompany",_title:"PASS_USAGE_REPORT.COLUMNS.COMPANY",include:!0,styles:{minCellWidth:200}},{dataKey:"memberName",_title:"PASS_USAGE_REPORT.COLUMNS.NAME",include:!0,defaultOrder:!0,styles:{minCellWidth:150}},{dataKey:"passesUsedCost",_title:"PASS_USAGE_REPORT.COLUMNS.PASSES_USED_COST",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"passCreditAppliedCost",_title:"PASS_USAGE_REPORT.COLUMNS.PASS_CREDIT_APPLIED_COST",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"costBalance",_title:"PASS_USAGE_REPORT.COLUMNS.COST_BALANCE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},xl4I:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.PassUsageReport",["ngResource","deskworks.config"]).factory("PassUsageReport",["$resource","$filter","deskworksConfig",function(e,t,r){var n=e(r.getApiAbsUrl("/reports/day-pass-usage"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0}});return{query:function(e){return n.query({centerId:e.centerId||null,fromDate:t("date")(e.fromDate,"yyyy-MM-dd"),toDate:t("date")(e.toDate,"yyyy-MM-dd")}).$promise}}}])},ycie:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("NOor"),o=r.n(n),a=r("yCd9"),s=r.n(a),l=r("6RpP"),i=r.n(l),u=r("ipr/"),c=r.n(u),d=r("5/DJ"),f=r("Amco");t.default=angular.module("deskworks.reports.reservationUtilizationDetailedActualReport",[d.a.name,f.default.name]).factory("reservationUtilizationDetailedActualReport",["$filter","helper","reportStyles","reservationUtilizationDetailedActualColumns",function(e,t,r,n){return function(t,a){var l,u,d,f=n,p={columns:[],rows:[],styles:[]},m=o()(f).call(f,(function(e){return"[period]"===e.dataKey}));if(m<0)throw new Error("[period] is not found in report columns");return p.columns=s()(l=a.periods).call(l,(function(t){return angular.extend({},f[m],{dataKey:e("date")(t.fromDate,"yyyyMMdd"),title:t.title})})),p.columns=i()(u=i()(d=c()(f).call(f,0,m)).call(d,p.columns)).call(u,c()(f).call(f,m+1)),a.units.forEach((function(e){var t,n;p.rows.push(i()(t=i()(n=[e.name]).call(n,e.totals)).call(t,e.total)),p.styles.push(r.h2),e.groups.forEach((function(e,t){var n,o;p.rows.push(i()(n=i()(o=[e.name]).call(o,e.totals)).call(n,e.total)),p.styles.push(t%2?null:r.rowOdd)}))})),p}}])},"yvW+":function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("nbuU"),o=r.n(n),a=r("0o3Q");t.default=angular.module("deskworks.RecurringBillingChangeReport",["ngResource","deskworks.config","datesDeserializer",a.default.name]).factory("RecurringBillingChangeReport",["$resource","$timeout","deskworksConfig","datesDeserializer","optsRbcReportByPeriod",function(e,t,r,n,a){var s=r.getApiAbsUrl("/reports/recurring-billing-change"),l=n(["from","to","billings.startDate","billings.noticeDate","billings.terminationDate"]),i=e(s,{},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,l]}});return{query:function(e){return i.query(e).$promise.then((function(t){return function(e){var t=e.data,r=e.params.byPeriod,n=void 0===r?"month":r,s=o()(a).call(a,(function(e){return e.id===n}));return t.forEach((function(e){e.title=s.format(e.from,e.to)})),t}({data:t,params:e})}))}}}])}}]);