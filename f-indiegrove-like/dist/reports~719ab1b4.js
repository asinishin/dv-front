(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{"+1+s":function(e,t){e.exports='<div id="reservationReport" class="gutter-v"> <form name="formReservationReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <report-columns model="vm.config.reportColumns"></report-columns> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="vm.config.reportOptions"> <report-dates model="vm.config.reportDates" embed="0 0 100px"></report-dates> <report-order-by model="vm.config.orderBy" report-columns="vm.config.reportColumns.columns"></report-order-by> </report-options> <report-owner-region model="vm.config.reportOwnerRegion" report-data="vm.config.reportData"></report-owner-region> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="vm.downloadPdf()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="vm.downloadCsv()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="vm.pdf"></div> </ff-panel> </div> '},"+aob":function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("hsT8"),o=r.n(n),a=r("yCd9"),l=r.n(a),s=r("NOor"),i=r.n(s),u=r("G0Vy"),c=r.n(u),d=r("6RpP"),f=r.n(d),p=r("WgSX"),R=r("G6E5"),m=r("5/DJ"),g=r("LTMe");t.default=angular.module("deskworks.RentRollReportCtrl",[p.a.name,R.a.name,m.a.name,g.a.name,"deskworks.state","deskworks.reports.reportColumns","deskworks.reports.ReportBuilder","deskworks.RentRollReport","deskworks.rentRollReportColumns"]).controller("RentRollReportCtrl",["$scope","$timeout","$translate","$filter","helper","state","reportHelper","reportStyles","ReportBuilder","RentRollReport","rentRollReportColumns",function(e,t,r,n,a,s,u,d,p,R,m){var g,E=this;function h(e){var t,n,s={columns:o()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:[],styles:[]},u=l()(n=["area","amount","discount","total"]).call(n,(function(e){var t;return{dataKey:e,amount:0,colIndex:i()(t=s.columns).call(t,(function(t){return t.dataKey===e}))}})),p=-1;if(u.some((function(e){var t;return(p=i()(t=s.columns).call(t,(function(t){return t.dataKey===e.dataKey})))>=0})),e.reportData.forEach((function(t){var n,o=E.reportBuilder.sortData(t.recurringCharges,e.orderBy),i=l()(n=angular.copy(u)).call(n,(function(e){return e.amount=0,e}));if(o.forEach((function(e,t){var r;s.rows.push(l()(r=s.columns).call(r,(function(t){return e[t.dataKey]}))),s.styles.push(t%2?null:d.rowOdd),i.forEach((function(t){t.amount+=e[t.dataKey]||0}))})),p>=0){var R,m,g,h=c()(R=Array(s.columns.length)).call(R,!1);if(p>0)h[p-1]=f()(m=f()(g="".concat(t.productCategoryCode," ")).call(g,t.productCategoryName," ")).call(m,r.instant("REPORTS.TOTAL"),":");i.forEach((function(e){h[e.colIndex]=a.round(e.amount)})),s.rows.push(h),s.styles.push(d.h2)}u.forEach((function(e,t){e.amount+=i[t].amount}))})),p>=0){var R,m;s.rows.push(c()(R=Array(s.columns.length)).call(R,!1)),s.styles.push(d.h3);var g=c()(m=Array(s.columns.length)).call(m,!1);p>0&&(g[p-1]="".concat(r.instant("RENT_ROLL_REPORT.TOTAL_RENT_ROLL"),":")),u.forEach((function(e){g[e.colIndex]=a.round(e.amount)})),s.rows.push(g),s.styles.push(d.h3)}return s}E.config={reportName:r.instant("RENT_ROLL_REPORT.REPORT_NAME"),reportOptions:{},reportColumns:{columns:angular.copy(m)},getReportData:function(){return R.query({centerId:E.config.reportOptions.centerId||null})}},s.setPageTitle(E.config.reportName),E.reportBuilder=new p(E.config),e.$watch((function(){return{reportOptions:E.config.reportOptions,reportColumns:E.config.reportColumns,orderBy:E.config.orderBy}}),(function(){g&&(t.cancel(g),g=null),g=t((function(){E.pdf=null,angular.isUndefined(E.config.reportOptions.centerId)||E.reportBuilder.buildPdf(h).then((function(e){E.pdf=e}))}),100)}),!0),E.downloadPdf=function(){E.pdf&&u.download({blob:E.pdf,fileName:E.reportBuilder.getReportFileName("pdf")})},E.downloadCsv=function(){E.pdf&&u.download({blob:E.reportBuilder.buildCsv(h),fileName:E.reportBuilder.getReportFileName("csv")})}}])},"0o3Q":function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("6RpP"),o=r.n(n);t.default=angular.module("deskworks.reports.optsRbcReportByPeriod",["deskworks.reports.optsReportByPeriod"]).factory("optsRbcReportByPeriod",["$rootScope","$translate","$filter","optsReportByPeriod",function(e,t,r,n){var a,l=function(e){return r("date")(e,"mediumDate")},s=o()(a=[{id:"none",_name:"GLOBAL.NONE",format:function(e,t){var r;return o()(r="".concat(l(e)," - ")).call(r,l(t))}}]).call(a,n);function i(){s.forEach((function(e){e.name=t.instant(e._name)}))}return i(),e.$on("$setTranslationsSuccess",i),s}])},"1THZ":function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("03wM"),o=r.n(n),a=r("Ekwr"),l=r.n(a),s=r("hsT8"),i=r.n(s),u=r("lvz6"),c=r.n(u),d=r("yKah"),f=r.n(d),p=r("fzuT"),R=r.n(p),m=r("G6E5"),g=r("WgSX"),E=r("CLLE"),h=r("5/DJ"),y=r("LTMe"),O=r("Tqzu"),v=r("Amco"),T=r("ycie"),C=r("7ZQE"),N=r("3Ei7"),_=r("vRjO"),w=r("Tx5W");function I(e,t){var r=o()(e);if(l.a){var n=l()(e);t&&(n=i()(n).call(n,(function(t){return c()(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){R()(e,t,r[t])})):f.a?Object.defineProperties(e,f()(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,c()(r,t))}))}return e}t.default=angular.module("deskworks.ReservationUtilizationReportCtrl",[g.a.name,E.a.name,"fileSaver",m.a.name,h.a.name,y.a.name,O.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.ReservationUtilizationReport","deskworks.reservationCategory.service",v.default.name,T.default.name,N.default.name,C.default.name,_.default.name,w.default.name]).controller("ReservationUtilizationReportCtrl",["$scope","$q","$location","$timeout","$translate","$filter","helper","dwAlerts","debounce","state","fileSaver","reportStyles","ReportBuilder","reportHelper","ReservationUtilizationReport","reservationUtilizationDetailedActualAggregate","reservationUtilizationDetailedActualReport","reservationUtilizationDetailedActualChart","reservationCategoryService","reservationUtilizationActualExpectedReport","reservationUtilizationActualExpectedAggregate","reservationUtilizationActualExpectedChart",function(e,t,r,n,o,a,l,s,i,u,c,d,f,p,R,m,g,E,h,y,O,v){var T=this,C=p.paramsChanged,N=p.loadResources;T.config={reportName:o.instant("RESERVATION_UTILIZATION_REPORT.REPORT_NAME")},T.params={fromDate:u.getParam("fromDate")?a("toDate")(u.getParam("fromDate")):moment().subtract(1,"month").startOf("month"),toDate:u.getParam("toDate")?a("toDate")(u.getParam("toDate")):moment().subtract(1,"month").endOf("month"),mode:u.getParam("mode")||"detailedActual"},T.resources=null,T.data=null,u.setPageTitle(T.config.reportName),e.$watch("$ctrl.params",i((function(e,r){u.setParam("mode",T.params.mode),T.pdf=null,T.report=null,l.pointFirstInvalid("#reservationUtilizationReport")||T.params.fromDate&&T.params.toDate&&(C(e,r,["fromDate","toDate","centerId"])&&(T.data=null),t.all({resources:T.resources||N((function(){return{categories:h.query(u.getCurrentCenterId()).catch((function(e){return s.error(e,"Failed to query reservation categories.")}))}})),data:T.data||R.query(T.params).catch((function(e){return s.error(e,"Failed to query report.")}))}).then((function(e){T.resources=e.resources,T.data=e.data})).then((function(){if("actualExpected"===T.params.mode){var e=O(T.data,T.resources.categories);T.report=y(T.params,e),T.chart=v(e)}else{var t=m(T.params,T.data);T.report=g(T.params,t),T.chart=E(t)}var r=p.buildPdf({config:S(S({},T.config),T.params),report:T.report,resources:T.resources});T.pdf=r.output("blob")})))}),100),!0),T.downloadPdf=function(){if(T.pdf){var e=p.getReportFileName({extension:"pdf",config:S(S({},T.config),T.params),resources:T.resources});p.download({blob:T.pdf,fileName:e})}},T.downloadCsv=function(){if(T.pdf){var e=p.getReportFileName({extension:"csv",config:S(S({},T.config),T.params),resources:T.resources}),t=p.buildCsv({report:T.report});p.download({blob:t,fileName:e})}}}])},"2Xc8":function(e,t){e.exports='<div id="recurringBillingChangeReport" class="gutter-v"> <form> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-dates model="$ctrl.params"></report-dates> <report-columns model="$ctrl.params"></report-columns> </div> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <report-options model="$ctrl.params"> <report-by-period model="$ctrl.params.byPeriod" opts="$ctrl.optsByPeriod"></report-by-period> <report-order-by model="$ctrl.params.orderBy" report-columns="$ctrl.params.columns" levels="2"></report-order-by> </report-options> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <ff-panel-header><span translate="RECURRING_BILLING_CHANGE_REPORT.CHART.HEADER"></span></ff-panel-header> <div ff-dim="!$ctrl.pdf"> <chart config="$ctrl.chart" style="max-height:228px"></chart> </div> </ff-panel> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},"3Ei7":function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n),a=(r("3dw1"),r("5/DJ")),l=r("5q+n");t.default=angular.module("deskworks.reports.reservationUtilizationActualExpectedReport",[a.a.name,l.default.name]).factory("reservationUtilizationActualExpectedReport",["$filter","$translate","helper","reportStyles","reservationUtilizationActualExpectedColumns",function(e,t,r,n,a){return function(e,r){var l={columns:a,rows:[],styles:[]},s=r.reduce((function(e,t){return e+t.expectedUse}),0),i=r.reduce((function(e,t){return e+t.actualUse}),0);return l.rows.push([t.instant("REPORTS.TOTALS").toUpperCase(),s,i,s?100*i/s:0]),l.styles.push(n.h1),r.forEach((function(e){var t;l.rows.push(o()(t=l.columns).call(t,(function(t){return e[t.dataKey]}))),l.styles.push(n.h2),e.units.forEach((function(e,t){var r;l.rows.push(o()(r=l.columns).call(r,(function(t){return e[t.dataKey]}))),l.styles.push(t%2?null:n.rowOdd)}))})),l}}])},"4DcZ":function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n);t.default=angular.module("deskworks.reports.revenueForecastChart",[]).factory("revenueForecastChart",["$translate","$filter","helper","whitelabel",function(e,t,r,n){return function(r){var a,l,s,i=o()(a=r[0].totals).call(a,(function(e){return t("date")(t("toDate")(e.month+"-01"),"MMM yyyy")})),u=o()(l=r[0].totals).call(l,(function(e,t){return r.reduce((function(e,r){return e+r.totals[t].committedAmount}),0)})),c=o()(s=r[0].totals).call(s,(function(e,t){return r.reduce((function(e,r){return e+r.totals[t].riskAmount}),0)}));return{type:"bar",data:{labels:i,datasets:[{name:e.instant("REVENUE_FORECAST_REPORT.COMMITTED_REVENUE"),data:u,backgroundColor:n.getProperty("--brand-color"),maxBarThickness:50},{name:e.instant("REVENUE_FORECAST_REPORT.AT_RISK_REVENUE"),data:c,backgroundColor:n.getProperty("--danger-color"),maxBarThickness:50}]},options:{tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(e,r){var n=r.datasets[e.datasetIndex];return n.name+": "+t("ncurrency")(n.data[e.index])}}},legend:{display:!1},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{min:0,callback:function(e){return t("ncurrency")(e,void 0,0)}}}]}}}}}])},"5+k5":function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n),a=(r("3dw1"),r("Muwe"),r("y89P"),r("29E8")),l=r("IE1r"),s=r("UDUI"),i=r("5bca"),u=r("5/DJ"),c=r("81mT"),d=r("Xjih");t.default=angular.module("deskworks.reports.ReportBuilder",[a.a.name,l.a.name,s.a.name,i.a.name,u.a.name,c.a.name,d.a.name,"deskworks.center.service"]).factory("ReportBuilder",["$rootScope","$q","$timeout","$window","$filter","$http","state","logo","jsPDF","csvMake","centerService","reportStyles","reportHeader","reportFooter","reportSort",function(e,t,r,n,a,l,s,i,u,c,d,f,p,R,m){return function(r){var n=this;e.$watch((function(){return r.reportOptions.centerId}),(function(e,t){e!==t&&(r.reportData=null,r.center=null)})),n.resolve=function(){return t.all({reportData:r.reportData||r.getReportData().catch((function(t){return e.showError(t,"Failed to load report data.")})),center:r.center||d.get(+r.reportOptions.centerId||s.getCurrentCenterId()).catch((function(t){return e.showError(t,"Failed to load center data.")})),logo:r.logo||i.getSiteLogo()}).then((function(e){return r.reportData=e.reportData,r.center=e.center,r.logo=e.logo,r}))},n.buildPdf=function(e,t){return n.generatePdf(e,t).then((function(e){return e.output("blob")}))},n.generatePdf=function(e,t,a){return n.resolve().then((function(n){var l,s=a||new u(r.reportOptions.paperLayout,"pt",r.reportOptions.paperSize),i=e(r);i.rows.forEach((function(e){i.columns.forEach((function(t,r){e[r]&&!angular.isUndefined(e[r].content)||(e[r]={content:e[r]});var n=e[r];!1===n.content?n.content="":(t.pdf&&(n.content=t.pdf(n.content)),n.content=angular.isUndefined(n.content)||null===n.content||""===n.content?"-":n.content)}))}));var c={columns:o()(l=i.columns).call(l,(function(e){return e.title.toUpperCase()})),body:i.rows,headStyles:(t||f).headStyles,bodyStyles:(t||f).bodyStyles,columnStyles:(t||f).columnStyles,tableMargin:t&&t.tableMargin||(t||f).pageMargins,startY:r.startY||(t||f).startY||!1,didParseCell:function(e){var t=e.row,r=e.cell,n=e.column;if("body"===e.section){angular.extend(r.styles,{minCellWidth:50,fillColor:!1},i.styles[t.index],i.columns[n.index].styles)}else angular.extend(r.styles,i.columns[n.index].styles)},didDrawCell:function(e){return function(e,t){var r=e.cell,n=e.doc;return 0===e.column.index&&r.styles.borderColor&&r.styles.borderWidth&&(n.setLineWidth(r.styles.borderWidth),n.setDrawColor(r.styles.borderColor[0],r.styles.borderColor[1],r.styles.borderColor[2]),n.rect(e.settings.margin.left+r.styles.borderWidth/2,r.y+r.styles.borderWidth/2,e.table.getWidth(n.internal.pageSize.width)-r.styles.borderWidth,e.row.height-2*r.styles.borderWidth,"S")),!1}(e,i.columns)},didDrawPage:function(e){(r.reportHeader||p)(e.table,s,r),(r.reportFooter||R)(e.table,s,r)}};return c.margin=c.tableMargin||(t||f).pageMargins,t&&t.tableWidth&&(c.tableWidth=t.tableWidth),s.autoTable(c),s}))},n.buildCsv=function(e){var t,n={charset:"utf-8"},a=e(r);return a.rows.forEach((function(e){a.columns.forEach((function(t,r){e[r]&&angular.isDefined(e[r].content)&&(e[r]=e[r].content),t.csv&&(e[r]=t.csv(e[r])),e[r]=angular.isUndefined(e[r])||null===e[r]||!1===e[r]||""===e[r]?"":e[r]}))})),a.rows.unshift(o()(t=a.columns).call(t,(function(e){return e.title.toUpperCase()}))),new Blob([c.generate(a.rows,n)],{type:"text/csv;charset="+n.charset+";"})},n.getReportFileName=function(e,t){var n=!1===r.reportOptions.centerId||+r.reportOptions.centerId?r.center.shortName:"all-centers",o=r.reportName;return n=(n||"").toLowerCase().replace(/\s+/g,"-"),o=(o||"").toLowerCase().replace(/\s+/g,"-"),e=(e||"pdf").toLowerCase(),o+"-"+n+"-"+a("date")(moment(),"yyyyMMdd-HHmmss")+(t||"")+"."+e},n.sortData=m}}])},"5q+n":function(e,t,r){"use strict";r.r(t);var n=r("03wM"),o=r.n(n),a=r("Ekwr"),l=r.n(a),s=r("hsT8"),i=r.n(s),u=r("lvz6"),c=r.n(u),d=r("yKah"),f=r.n(d),p=r("fzuT"),R=r.n(p);r("3dw1");function m(e,t){var r=o()(e);if(l.a){var n=l()(e);t&&(n=i()(n).call(n,(function(t){return c()(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){R()(e,t,r[t])})):f.a?Object.defineProperties(e,f()(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,c()(r,t))}))}return e}t.default=angular.module("deskworks.reservationUtilizationActualExpectedColumns",[]).factory("reservationUtilizationActualExpectedColumns",["$rootScope","$translate","helper",function(e,t,r){var n=[{dataKey:"name",_title:"RESERVATION_UNITS.UNIT"},g({dataKey:"expectedUse",_title:"RESERVATION_UTILIZATION_REPORT.COLUMNS.EXPECTED_USAGE",styles:{halign:"right"}},o(1)),g({dataKey:"actualUse",_title:"RESERVATION_UTILIZATION_REPORT.COLUMNS.ACTUAL_USAGE",styles:{halign:"right"}},o(1)),{dataKey:"utilization",_title:"RESERVATION_UTILIZATION_REPORT.COLUMNS.UTILIZATION",styles:{halign:"right"},pdf:function(e){return r.round(e,1)+"%"},csv:function(e){return r.round(e,1)+"%"}}];function o(e){return{pdf:function(t){return r.round(t,e)},csv:function(t){return r.round(t,e)}}}function a(){n.forEach((function(e){e.title=t.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},"7ZQE":function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n),a=r("hsT8"),l=r.n(a),s=r("8Xq/");t.default=angular.module("deskworks.reservationUtilizationActualExpectedAggregate",[s.a.name]).factory("reservationUtilizationActualExpectedAggregate",["helper",function(e){return function(t,r){var n,a=o()(t).call(t,(function(e){var t=e.groups.reduce((function(e,t){return e+t.daily.reduce((function(e,t){return e+t.usage}),0)}),0)||0,r=e.unitName,n=e.expectedUse,o=void 0===n?0:n;return{name:r,categoryId:e.categoryId,expectedUse:o,actualUse:t,utilization:o?100*t/o:0}}));return l()(n=o()(r).call(r,(function(t){var r=l()(a).call(a,(function(e){return e.categoryId===t.id})),n=r.reduce((function(e,t){return e+t.expectedUse}),0),o=r.reduce((function(e,t){return e+t.actualUse}),0);return{name:t.name,expectedUse:n,actualUse:o,utilization:n?e.round(100*o/n):0,units:r}}))).call(n,(function(e){return e.units&&e.units.length}))}}])},"92Gs":function(e,t,r){"use strict";r.r(t);var n=r("29E8");t.default=angular.module("deskworks.reportGroupBy",[n.a.name]).factory("reportGroupBy",["reportSort",function(e){return function(t,r){return e(t,r).reduce((function(e,t){var n=e[e.length-1]||[],o=n[0]||{};return o[r]===t[r]||moment.isMoment(o[r])&&moment.isMoment(t[r])&&o[r].isSame(t[r],"day")||(n=[],e.push(n)),n.push(t),e}),[])}}])},Afy5:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.RentRollReport",["ngResource","datesDeserializer","deskworks.config"]).factory("RentRollReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["recurringCharges.startDate","recurringCharges.terminationDate"]),o=e(r.getApiAbsUrl("/reports/rent-roll"),{centerId:"@centerId"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,n]}});return{query:function(e){return o.query(e).$promise}}}])},Amco:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("yCd9"),o=r.n(n),a=r("G0Vy"),l=r.n(a),s=r("nbuU"),i=r.n(s),u=r("8Xq/");t.default=angular.module("deskworks.reservationUtilizationDetailedActualAggregate",[u.a.name]).factory("reservationUtilizationDetailedActualAggregate",["reservationUtilizationReportCreateGrid","helper",function(e,t){return function(r,n){var a={periods:e(r.fromDate,r.toDate,r.byPeriod)};return a.units=o()(n).call(n,(function(e){var r,n,s={name:e.unitName,totals:l()(r=Array(a.periods.length)).call(r,0),total:0};return s.groups=o()(n=e.groups).call(n,(function(e){var r;return{name:e.name,totals:e.daily.reduce((function(e,r){return a.periods.some((function(n,o){if(r.date.isSameOrAfter(n.fromDate)&&r.date.isSameOrBefore(n.toDate)){var a=angular.isNumber(r.usage)?r.usage:0;return e[o]+=a,e[o]=t.round(e[o]),s.totals[o]+=a,s.totals[o]=t.round(s.totals[o]),!0}})),e}),l()(r=Array(a.periods.length)).call(r,0))}})),s.groups.forEach((function(e){e.total=e.totals.reduce((function(e,t){return e+t}),0),s.total+=e.total,e.total=t.round(e.total)})),s.total=t.round(s.total),s})),a}}]).factory("reservationUtilizationReportCreateGrid",["$filter","optsReportByPeriod",function(e,t){return function(e,r,n){var o=[],a=i()(t).call(t,(function(e){return e.id===n})),l=e.clone().startOf(n);do{var s={fromDate:l.clone()};l.add(1,n+"s"),s.toDate=l.clone().subtract(1,"ms"),s.title=a.format(s.fromDate,s.toDate),o.push(s)}while(l.isSameOrBefore(r));return o}}])},BEjt:function(e,t){e.exports='<div id="reservationUsageReport" class="gutter-v"> <form name="formReservationUsageReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h" style="margin-bottom:-15px"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-dates model="$ctrl.config.reportDates"></report-dates> </div> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="$ctrl.config.reportOptions"> <report-order-by model="$ctrl.config.orderBy" report-columns="$ctrl.config.reportColumns"></report-order-by> </report-options> <report-owner-region model="$ctrl.config.reportOwnerRegion" report-data="$ctrl.config.reportData"></report-owner-region> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},EMP2:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("03wM"),o=r.n(n),a=r("Ekwr"),l=r.n(a),s=r("hsT8"),i=r.n(s),u=r("lvz6"),c=r.n(u),d=r("yKah"),f=r.n(d),p=r("fzuT"),R=r.n(p),m=r("G6E5"),g=r("WgSX"),E=r("5/DJ"),h=r("LTMe"),y=r("ZimX"),O=r("SeLF"),v=r("VHZd"),T=r("ogb4"),C=r("yvW+"),N=r("0o3Q");function _(e,t){var r=o()(e);if(l.a){var n=l()(e);t&&(n=i()(n).call(n,(function(t){return c()(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){R()(e,t,r[t])})):f.a?Object.defineProperties(e,f()(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,c()(r,t))}))}return e}t.default=angular.module("deskworks.RecurringBillingChangeReportCtrl",["debounce","deskworks.state",g.a.name,m.a.name,E.a.name,h.a.name,y.default.name,O.default.name,v.default.name,T.default.name,C.default.name,N.default.name]).controller("RecurringBillingChangeReportCtrl",["$scope","$timeout","$filter","$translate","$q","systemColors","debounce","state","helper","reportStyles","reportHelper","dwAlerts","RecurringBillingChangeReport","recurringBillingChangeReportColumns","recurringBillingChangeData","recurringBillingChangeChart","optsRbcReportByPeriod",function(e,t,r,n,o,a,l,s,i,u,c,d,f,p,R,m,g){var E=this,h=c.paramsChanged,y=c.loadResources;E.config={reportName:n.instant("RECURRING_BILLING_CHANGE_REPORT.REPORT_NAME")},E.params={fromDate:s.getParam("fromDate")?r("toDate")(s.getParam("fromDate")):moment().subtract(1,"year"),toDate:s.getParam("toDate")?r("toDate")(s.getParam("toDate")):moment(),byPeriod:s.getParam("byPeriod")||"month",orderBy:s.getParam("orderBy")||"userCompany",columns:p},E.resources=null,E.data=null,E.optsByPeriod=g,s.setPageTitle(E.config.reportName),e.$watch("$ctrl.params",l((function(e,t){i.pointFirstInvalid("#recurringBillingChangeReport")||(E.pdf=null,E.report=null,h(e,t,["centerId","fromDate","toDate","byPeriod"])&&(E.data=null),o.all({resources:E.resources||y(),data:E.data||f.query(E.params).catch((function(e){return d.error(e,"Failed to query report.")}))}).then((function(e){E.resources=e.resources,E.data=e.data})).then((function(){E.report=R(E.params,E.data);var e=c.buildPdf({config:w(w({},E.config),E.params),report:E.report,resources:E.resources});E.pdf=e.output("blob"),E.chart=m(E.data)})))}),100),!0),E.downloadPdf=function(){if(E.pdf){var e=c.getReportFileName({extension:"pdf",config:w(w({},E.config),E.params),resources:E.resources});c.download({blob:E.pdf,fileName:e})}},E.downloadCsv=function(){if(E.pdf){var e=c.getReportFileName({extension:"csv",config:w(w({},E.config),E.params),resources:E.resources}),t=c.buildCsv({report:E.report});c.download({blob:t,fileName:e})}}}])},GGg2:function(e,t){e.exports='<div id="recurringBillingReport" class="gutter-v"> <form name="formRecurringBillingReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 65%\', md: \'0 0 50%\'}"> <report-columns model="vm.config.reportColumns"></report-columns> </div> <div flex="{lg: \'0 0 35%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="vm.config.reportOptions"> <report-order-by model="vm.config.orderBy" report-columns="vm.config.reportColumns.columns" levels="2"></report-order-by> </report-options> <report-owner-region model="vm.config.reportOwnerRegion" report-data="vm.config.reportData"></report-owner-region> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="vm.downloadPdf()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="vm.downloadCsv()" ff-disabled="!vm.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="vm.pdf"></div> </ff-panel> </div> '},HoW3:function(e,t,r){"use strict";r.r(t);var n=r("Ekwr"),o=r.n(n),a=r("lvz6"),l=r.n(a),s=r("yKah"),i=r.n(s),u=r("fzuT"),c=r.n(u),d=(r("3dw1"),r("yCd9")),f=r.n(d),p=r("KK/u"),R=r.n(p),m=r("6RpP"),g=r.n(m),E=r("hsT8"),h=r.n(E),y=r("03wM"),O=r.n(y),v=r("G6E5");function T(e,t){var r=O()(e);if(o.a){var n=o()(e);t&&(n=h()(n).call(n,(function(t){return l()(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):i.a?Object.defineProperties(e,i()(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,l()(r,t))}))}return e}t.default=angular.module("deskworks.royaltyReportData",[v.a.name]).factory("royaltyReportData",["helper","reportHelper",function(e,t){return{flattenOrders:function(e){var r,n=e.orders;return f()(r=R()(t).call(t,n,"orderId")).call(r,(function(e){var t;return C(C({},e),{},{items:f()(t=e.items).call(t,(function(t){return C(C({},t),{},{netAmount:t.amount+t.taxAmount,orderId:e.orderId,userName:e.userName,userCompany:e.userCompany})}))})}))},flattenExemptions:function(e){return e.orders.reduce((function(e,t){var r;return g()(e).call(e,h()(r=t.items).call(r,(function(e){return e.royaltyExempt})))}),[])},calcTotals:function(t){var r=t.orders,n=t.exemptions,o=t.franchiseFees,a=t.writeOffs;r.forEach((function(e){e.amount=e.items.reduce((function(e,t){return e+(t.amount>0?t.amount:0)}),0),e.discountAmount=e.items.reduce((function(e,t){return e+(t.amount<0?t.amount:0)}),0),e.taxAmount=e.items.reduce((function(e,t){return e+t.taxAmount||0}),0),e.netAmount=e.amount+e.discountAmount+e.taxAmount})),a.forEach((function(e){e.netAmount=e.amount}));var l={totalWriteOff:a.reduce((function(e,t){return e+t.amount}),0),totalRevenue:r.reduce((function(e,t){return e+t.netAmount}),0),exemptRevenue:n.reduce((function(e,t){return e+t.netAmount}),0)};return l.totalRevenue+=l.totalWriteOff,l.royaltiesRevenue=l.totalRevenue-l.exemptRevenue,l.fees=f()(o).call(o,(function(e){return C(C({},e),{},{amount:"$"===e.type?e.rate:e.rate*l.royaltiesRevenue/100})})),l.totalDue=l.fees.reduce((function(e,t){return e+t.amount}),0),l.fees.forEach((function(t){t.amount=e.round(t.amount)})),O()(l).forEach((function(t){"fees"!==t&&(l[t]=e.round(l[t]))})),l}}}])},IWz8:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.reservationReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("ReservationReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["reservations.createdAt","reservations.startTime","reservations.endTime"]),o=e(r.getApiAbsUrl("/centers/:centerId/reservation-reports"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{get:{method:"GET",transformResponse:[angular.fromJson,n]}});return{get:function(e){return o.get(e).$promise}}}])},JAJz:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.securityDepositReport.service",["ngResource","datesDeserializer","deserializeNumbers","deskworks.config"]).factory("SecurityDepositReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=t(["deposits.details.date"]),a=r(["deposits.balance","deposits.details.amount"]);return e(n.getApiAbsUrl("/reports/security-deposit"),{centerId:"@centerId"},{get:{method:"GET",transformResponse:[angular.fromJson,o,a]}})}])},Jqji:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("ipr/"),o=r.n(n),a=r("yCd9"),l=r.n(a),s=r("6RpP"),i=r.n(s),u=r("KK/u"),c=r.n(u),d=r("5/DJ"),f=r("G6E5"),p=r("rrwk");t.default=angular.module("deskworks.reports.revenueForecastData",[d.a.name,f.a.name,p.default.name]).factory("revenueForecastData",["$filter","$translate","helper","reportStyles","reportHelper","revenueForecastReportColumns",function(e,t,r,n,a,s){return function(r,u){var d,f,p,R,m,g={columns:o()(s).call(s),rows:[],styles:[]};if(!u||!u.length)return g;var E=l()(d=u[0].totals).call(d,(function(r,n){var o=n?e("date")(e("toDate")(r.month+"-01"),"MMM\nyyyy"):t.instant("REVENUE_FORECAST_REPORT.COLUMNS.CURRENT_MONTH");return g.columns.push({dataKey:r.month,title:o,styles:{halign:"right",cellWidth:"wrap"}}),u.reduce((function(e,t){return e+t.totals[n].committedAmount}),0)})),h=l()(f=u[0].totals).call(f,(function(e,t){return u.reduce((function(e,r){return e+r.totals[t].riskAmount}),0)})),y=t.instant("REVENUE_FORECAST_REPORT.COMMITTED_REVENUE");return g.styles.push(n.h3),g.rows.push(i()(p=[!1,y]).call(p,l()(E).call(E,(function(t){return e("ncurrency")(t)})))),y=t.instant("REVENUE_FORECAST_REPORT.AT_RISK_REVENUE"),g.styles.push(n.h3),g.rows.push(i()(R=[!1,y]).call(R,l()(h).call(h,(function(t){return e("ncurrency")(t)})))),y=t.instant("REVENUE_FORECAST_REPORT.PERCENT_OF_CURRENT_MONTH"),g.styles.push(n.h3),g.rows.push(i()(m=[!1,y]).call(m,l()(E).call(E,(function(t){return e("number")(t/E[0]*100,2)+"%"})))),c()(a).call(a,u,r.orderBy).forEach((function(t,r){var o,a;g.styles.push(r%2?null:n.rowOdd),g.rows.push(i()(o=[t.userCompany,t.userName]).call(o,l()(a=t.totals).call(a,(function(t){return e("ncurrency")(t.committedAmount)}))))})),g}}])},KYoW:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reservationIncomeReportColumns",[]).factory("reservationIncomeReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"center",_title:"RESERVATION_INCOME_REPORT.COLUMNS.CENTER",include:!1,styles:{minCellWidth:100}},{dataKey:"user",_title:"RESERVATION_INCOME_REPORT.COLUMNS.USER",include:!0,styles:{minCellWidth:100},sortable:!0},{dataKey:"company",_title:"RESERVATION_INCOME_REPORT.COLUMNS.COMPANY",include:!0,styles:{minCellWidth:100},sortable:!0},{dataKey:"reservationUnit",_title:"RESERVATION_INCOME_REPORT.COLUMNS.UNIT",include:!0,styles:{minCellWidth:100},sortable:!0},{dataKey:"date",_title:"RESERVATION_INCOME_REPORT.COLUMNS.DATE",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"startTime",_title:"RESERVATION_INCOME_REPORT.COLUMNS.START_TIME",include:!0,styles:{halign:"right",cellWidth:"wrap"},sortable:!0,defaultOrder:!0,pdf:function(e){return t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortTime")}},{dataKey:"endTime",_title:"RESERVATION_INCOME_REPORT.COLUMNS.END_TIME",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortTime")}},{dataKey:"createdAt",_title:"RESERVATION_INCOME_REPORT.COLUMNS.CREATED_AT",include:!1,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")+" "+t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortDate")+" "+t("date")(e,"shortTime")}},{dataKey:"note",_title:"RESERVATION_INCOME_REPORT.COLUMNS.NOTE",include:!1},{dataKey:"hours",_title:"RESERVATION_INCOME_REPORT.COLUMNS.TOTAL_HOURS",include:!0,styles:{halign:"right",cellWidth:"wrap"}},{dataKey:"charge",_title:"RESERVATION_INCOME_REPORT.COLUMNS.CHARGES",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("currency")(e)},csv:function(e){return t("currency")(e)}},{dataKey:"credit",_title:"RESERVATION_INCOME_REPORT.COLUMNS.CREDITS",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("currency")(e)},csv:function(e){return t("currency")(e)}},{dataKey:"total",_title:"RESERVATION_INCOME_REPORT.COLUMNS.TOTAL",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("currency")(e)},csv:function(e){return t("currency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},KkfT:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reservationUsageReportColumns",[]).factory("reservationUsageReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"memberCompany",_title:"REPORTS.COLUMNS.USER_COMPANY"},{dataKey:"memberName",_title:"REPORTS.COLUMNS.USER_NAME",defaultOrder:!0},{dataKey:"reservationCost",_title:"RESERVATION_USAGE_REPORT.COLUMNS.RESERVATION_COST",styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"reservationCreditApplied",_title:"RESERVATION_USAGE_REPORT.COLUMNS.RES_CREDITS_APPLIED",styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"reservationCostBalance",_title:"RESERVATION_USAGE_REPORT.COLUMNS.RES_COST_BALANCE",styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},L8do:function(e,t){e.exports='<div id="reservationIncomeReport" class="gutter-v"> <form> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <report-columns model="$ctrl.params"></report-columns> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="$ctrl.params"> <ff-row> <ff-label flex="0 0 100px"><span translate="ROYALTY_REPORT.REPORT_BY"></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half"> <label flex="0 0 auto"> <ff-radio ff-model="$ctrl.params.filterBy" ff-value="\'dueDate\'"> <span translate="ROYALTY_REPORT.DUE_DATE"></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio ff-model="$ctrl.params.filterBy" ff-value="\'billDate\'"> <span translate="ROYALTY_REPORT.BILL_DATE"></span> </ff-radio> </label> </div> </ff-static> </ff-row> <ff-row> <ff-label flex="0 0 100px"><span translate="ROYALTY_REPORT.MODE"></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half"> <label flex="0 0 auto"> <ff-radio ff-model="$ctrl.params.mode" ff-value="\'summary\'"> <span translate="ROYALTY_REPORT.SUMMARY"></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio ff-model="$ctrl.params.mode" ff-value="\'detail\'"> <span translate="ROYALTY_REPORT.DETAIL"></span> </ff-radio> </label> </div> </ff-static> </ff-row> <report-dates model="$ctrl.params" embed="0 0 100px"></report-dates> </report-options> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},LJmX:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("yCd9"),o=r.n(n),a=r("6RpP"),l=r.n(a),s=r("03wM"),i=r.n(s),u=r("nbuU"),c=r.n(u),d=r("hsT8"),f=r.n(d),p=r("KK/u"),R=r.n(p),m=r("WgSX"),g=r("G6E5"),E=r("5/DJ"),h=r("LTMe");t.default=angular.module("deskworks.reports.reservationReport",[m.a.name,g.a.name,E.a.name,h.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportColumns","deskworks.reports.reportOwnerRegion","deskworks.reports.reservationReport.service","deskworks.reports.reservationReportColumns"]).controller("ReservationReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","reportHelper","reportStyles","ReportBuilder","ReservationReport","reservationReportColumns","reservationFields",function(e,t,r,n,a,s,u,d,p,m,g,E){var h,y,O=this,v=o()(E).call(E,(function(e){return{dataKey:e.id,title:e.name,include:!1,pdf:function(t){return e.$$filter(e,t)},csv:function(t){return e.$$filter(e,t)}}}));function T(e){var t,r,n={columns:f()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:R()(u).call(u,e.reportData.reservations,e.orderBy),styles:[]};return n.rows=o()(r=n.rows).call(r,(function(e,t){var r;return n.styles.push(t%2?null:d.rowOdd),o()(r=n.columns).call(r,(function(t){return e[t.dataKey]}))})),n}O.config={reportName:n.instant("RESERVATION_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:l()(h=angular.copy(g)).call(h,v)},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return m.get({centerId:O.config.reportOptions.centerId,fromDate:r("date")(O.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(O.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:O.config.reportOwnerRegion.ownerId,regionId:O.config.reportOwnerRegion.regionId}).then((function(e){return e.reservations.forEach((function(e){i()(e.fields).forEach((function(t){var r=c()(E).call(E,(function(e){return e.id===+t}));e[t]=r.$$deserialize(r,e.fields[t])})),delete e.fields})),e}))}},O.config.reportDates.toDate.add(7,"d"),a.setPageTitle(O.config.reportName),O.reportBuilder=new p(O.config),e.$watch((function(e){return{reportOptions:O.config.reportOptions,reportColumns:O.config.reportColumns,orderBy:O.config.orderBy,reportDates:O.config.reportDates,reportOwnerRegion:O.config.reportOwnerRegion}}),(function(e,r){y&&(t.cancel(y),y=null),y=t((function(t){if(O.pdf=null,!angular.isUndefined(O.config.reportOptions.centerId)){var n=e.reportDates.fromDate,o=r.reportDates.fromDate;!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(O.config.reportData=null),n=e.reportDates.toDate,o=r.reportDates.toDate,!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(O.config.reportData=null),O.reportBuilder.buildPdf(T).then((function(e){O.pdf=e}))}}),100)}),!0),O.downloadPdf=function(){O.pdf&&u.download({blob:O.pdf,fileName:O.reportBuilder.getReportFileName("pdf")})},O.downloadCsv=function(){O.pdf&&u.download({blob:O.reportBuilder.buildCsv(T),fileName:O.reportBuilder.getReportFileName("csv")})}}])},LM7I:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.recurringBillingReportColumns",[]).factory("recurringBillingReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userCompany",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.COMPANY",include:!0},{dataKey:"userName",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.MEMBER",include:!0,styles:{minCellWidth:100}},{dataKey:"centerName",_title:"REPORTS.COLUMNS.CENTER",include:!1},{dataKey:"lastBillDate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.LAST_BILL_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"nextBillDate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.NEXT_BILL_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"amount",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"billingMethod",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.BILLING_METHOD",include:!0},{dataKey:"ccExpiry",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.CC_EXPIRY",include:!1,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"discount",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.DISCOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"productName",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.PRODUCT",include:!0,styles:{minCellWidth:120}},{dataKey:"description",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.DESCRIPTION",include:!1},{dataKey:"startDate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.START_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"noticeDate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.NOTICE_DATE",include:!1,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"noticePeriod",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.NOTICE_PERIOD",include:!1},{dataKey:"noticeRequiredBy",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.NOTICE_REQUIRED_BY",include:!1,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"terminate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.TERMINATION_DATE",include:!1,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"renewalDate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.RENEWAL_DATE",include:!1,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"renewalTerm",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.RENEWAL_TERM",include:!1},{dataKey:"renewalNoticePeriod",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.RENEWAL_REMINDER",include:!1},{dataKey:"useForCheckInBilling",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.USE_FOR_CHECK_IN_BILLING",include:!1,styles:{halign:"center"},pdf:function(e){return t("yesno")(e)},csv:function(e){return t("yesno")(e)}},{dataKey:"total",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.TOTAL",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},SeLF:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("hsT8"),o=r.n(n),a=r("6RpP"),l=r.n(a),s=r("KK/u"),i=r.n(s),u=r("yCd9"),c=r.n(u),d=r("5/DJ"),f=r("G6E5");r("ogb4");t.default=angular.module("deskworks.reports.recurringBillingChangeData",[d.a.name,f.a.name]).factory("recurringBillingChangeData",["$filter","$translate","helper","reportStyles","reportHelper",function(e,t,r,n,a){return function(r,s){var u,d={columns:o()(u=r.columns).call(u,(function(e){return e.include})),rows:[],styles:[]};if(!s||!s.length)return d;var f=e("currency"),p=function(t){return e("date")(t,"mediumDate")};return s.forEach((function(e){var o,s,u,R,m,g=t.instant("RECURRING_BILLING_CHANGE_REPORT.REVENUE_AS_OF_DATE",{date:p(e.from)}),E=t.instant("RECURRING_BILLING_CHANGE_REPORT.TOTAL_NEW");d.rows.push([{content:l()(o="".concat(g,": ")).call(o,f(e.revenueFirstDay)),colSpan:Math.ceil(d.columns.length/2)},{content:l()(s="".concat(E,": ")).call(s,f(e.totalNew)),colSpan:Math.floor(d.columns.length/2)}]),d.styles.push(n.h3);var h=t.instant("RECURRING_BILLING_CHANGE_REPORT.REVENUE_AS_OF_DATE",{date:p(e.to)}),y=t.instant("RECURRING_BILLING_CHANGE_REPORT.TOTAL_NOTICES");d.rows.push([{content:l()(u="".concat(h,": ")).call(u,f(e.revenueLastDay)),colSpan:Math.ceil(d.columns.length/2)},{content:l()(R="".concat(y,": ")).call(R,f(e.totalNotices)),colSpan:Math.floor(d.columns.length/2)}]),d.styles.push(n.h3);var O=t.instant("RECURRING_BILLING_CHANGE_REPORT.TOTAL_TERMINATIONS");d.rows.push([{content:!1,colSpan:Math.ceil(d.columns.length/2)},{content:l()(m="".concat(O,": ")).call(m,f(e.totalTermination)),colSpan:Math.floor(d.columns.length/2)}]),d.styles.push(n.h3),i()(a).call(a,e.billings,r.orderBy).forEach((function(e,t){var r;d.rows.push(c()(r=d.columns).call(r,(function(t){return e[t.dataKey]}))),d.styles.push(t%2?null:n.rowOdd)}))})),d}}])},Tx5W:function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n),a=r("6RpP"),l=r.n(a);t.default=angular.module("deskworks.reports.reservationUtilizationDetailedActualChart",[]).factory("reservationUtilizationDetailedActualChart",["$translate","$filter","helper",function(e,t,r){return function(n){var a,s,i=r.round(n.units.reduce((function(e,t){return e+t.total}),0));return{type:"pie",data:{labels:o()(a=n.units).call(a,(function(e){return e.name})),datasets:[{data:o()(s=n.units).call(s,(function(e){return e.total}))}]},options:{tooltips:{callbacks:{label:function(e,n){var o,a,s=n.labels[e.index],u=n.datasets[0].data[e.index],c=r.round(u/i*100,1);return l()(o=l()(a="".concat(s,": ")).call(a,t("hours")(u)," (")).call(o,c,"%)")}}},legend:{display:!0,position:"right"},title:{display:!0,text:e.instant("RESERVATION_UTILIZATION_REPORT.CHART.TOTAL_TIME").toUpperCase()+": "+t("hours")(i)}}}}}])},UUql:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.securityDepositReportColumns",[]).factory("securityDepositReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userName",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.USER_NAME",include:!0,styles:{minCellWidth:120}},{dataKey:"userCompany",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.COMPANY",include:!0,styles:{minCellWidth:150}},{dataKey:"orderId",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.ORDER_ID",include:!1,styles:{halign:"right"}},{dataKey:"date",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.DATE",include:!1,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"amount",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.AMOUNT",include:!1,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"balance",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.BALANCE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},UbAC:function(e,t,r){"use strict";r.r(t);var n=r("hsT8"),o=r.n(n),a=r("KK/u"),l=r.n(a),s=r("yCd9"),i=r.n(s),u=r("NOor"),c=r.n(u),d=r("WgSX"),f=r("G6E5"),p=r("5/DJ"),R=r("LTMe");t.default=angular.module("deskworks.RecurringBillingChurnReportCtrl",[d.a.name,f.a.name,p.a.name,R.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.RecurringBillingChurnReport","deskworks.recurringBillingChurnReportColumns"]).controller("RecurringBillingChurnReportCtrl",["$scope","$timeout","$filter","$translate","state","reportHelper","reportStyles","ReportBuilder","RecurringBillingChurnReport","recurringBillingChurnReportColumns",function(e,t,r,n,a,s,u,d,f,p){var R,m,g=this;function E(e){var t,a,d,f={columns:o()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:[],styles:[]};f.rows=l()(s).call(s,e.reportData.billings,e.orderBy),f.rows=i()(a=f.rows).call(a,(function(e,t){var r;return f.styles.push(t%2?null:u.rowOdd),i()(r=f.columns).call(r,(function(t){return e[t.dataKey]}))})),f.rows.push([{content:!1,colSpan:f.columns.length}]),f.styles.push(null);var p=c()(d=f.columns).call(d,(function(e){return"total"===e.dataKey}));return p>=0&&[{name:"MONTHLY_RECURRING_BILLINGS",key:"monthly"},{name:"QUARTERLY_RECURRING_BILLINGS",key:"quarterly"},{name:"SEMIANNUAL_RECURRING_BILLINGS",key:"semiAnnual"},{name:"ANNUAL_RECURRING_BILLINGS",key:"annual"},{name:"AS_NEEDED_RECURRING_BILLINGS",key:"asNeeded"}].forEach((function(t){var o=[{content:r("ncurrency")(e.reportData[t.key]),styles:{halign:"right"}}];p>0&&o.unshift({content:n.instant("RECURRING_BILLING_CHURN_REPORT.TOTALS.".concat(t.name))+":",colSpan:p,styles:{halign:"right"}}),p<f.columns.length-1&&o.push({content:!1,colSpan:f.columns.length-p-1}),f.rows.push(o),f.styles.push(u.h3)})),f}g.config={reportName:n.instant("RECURRING_BILLING_CHURN_REPORT.REPORT_NAME"),reportOptions:{},reportColumns:{columns:angular.copy(p)},reportDates:{toDate:a.getParam("toDate")||(R=moment(),a.setParam("toDate",r("date")(R,"yyyy-MM-dd")),R)},getReportData:function(){return f.get({centerId:g.config.reportOptions.centerId,toDate:r("date")(g.config.reportDates.toDate,"yyyy-MM-dd")})}},a.setPageTitle(g.config.reportName),e.$watch("$ctrl.config.reportOptions.centerId",(function(e){var t=g.config.reportColumns.columns[0];t.readonly=!!e,t.readonly&&(t.include=!1),t.readonly&&"centerName"===g.config.orderBy&&(g.config.orderBy="userCompany")})),g.reportBuilder=new d(g.config),e.$watch((function(e){return{reportOptions:g.config.reportOptions,reportColumns:g.config.reportColumns,toDate:g.config.reportDates.toDate,orderBy:g.config.orderBy}}),(function(e,n){m&&(t.cancel(m),m=null),m=t((function(t){if(g.pdf=null,!angular.isUndefined(g.config.reportOptions.centerId)){var o=e.toDate,l=n.toDate;!moment.isMoment(o)||moment.isMoment(l)&&o.isSame(l)||(g.config.reportData=null,a.setParam("toDate",r("date")(e.toDate,"yyyy-MM-dd"))),g.reportBuilder.buildPdf(E).then((function(e){g.pdf=e}))}}),100)}),!0),g.downloadPdf=function(){g.pdf&&s.download({blob:g.pdf,fileName:g.reportBuilder.getReportFileName("pdf")})},g.downloadCsv=function(){g.pdf&&s.download({blob:g.reportBuilder.buildCsv(E),fileName:g.reportBuilder.getReportFileName("csv")})}}])},VHZd:function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n);t.default=angular.module("deskworks.reports.recurringBillingChangeChart",[]).factory("recurringBillingChangeChart",["$translate","$filter","helper","whitelabel",function(e,t,r,n){return function(r){var n=[{label:e.instant("RECURRING_BILLING_CHANGE_REPORT.NEW_RB"),data:o()(r).call(r,(function(e){return e.totalNew})),maxBarThickness:50,backgroundColor:"#317da3"},{label:e.instant("RECURRING_BILLING_CHANGE_REPORT.NOTICES_GIVEN"),data:o()(r).call(r,(function(e){return e.totalNotices})),maxBarThickness:50,backgroundColor:"#3cb44b"},{label:e.instant("RECURRING_BILLING_CHANGE_REPORT.TERMINATIONS"),data:o()(r).call(r,(function(e){return e.totalTermination})),maxBarThickness:50,backgroundColor:"#808080"}];return{type:"bar",data:{labels:o()(r).call(r,(function(e){return e.title})),datasets:n},options:{tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(e,r){var n=r.datasets[e.datasetIndex];return n.label+": "+t("currency")(n.data[e.index])}}},legend:{display:!0,position:"left"},scales:{yAxes:[{ticks:{min:0,callback:function(e){return t("currency")(e,void 0,0)}}}]}}}}}])},VbF8:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.rentRollReportColumns",[]).factory("rentRollReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"centerName",_title:"RENT_ROLL_REPORT.COLUMNS.CENTER",include:!1},{dataKey:"userCompany",_title:"RENT_ROLL_REPORT.COLUMNS.COMPANY",include:!0},{dataKey:"userName",_title:"RENT_ROLL_REPORT.COLUMNS.MEMBER",include:!1},{dataKey:"productName",_title:"RENT_ROLL_REPORT.COLUMNS.SUBSCRIPTION_ITEM",include:!0,defaultOrder:!0},{dataKey:"area",_title:"RENT_ROLL_REPORT.COLUMNS.AREA",include:!0,styles:{cellWidth:"wrap",halign:"center"}},{dataKey:"amount",_title:"RENT_ROLL_REPORT.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"discount",_title:"RENT_ROLL_REPORT.COLUMNS.DISCOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"RENT_ROLL_REPORT.COLUMNS.TOTAL",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"startDate",_title:"RENT_ROLL_REPORT.COLUMNS.START_DATE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"terminationDate",_title:"RENT_ROLL_REPORT.COLUMNS.TERMINATION_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},Zdj5:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.RevenueForecastReport",["ngResource","deskworks.config"]).factory("RevenueForecastReport",["$resource","$timeout","deskworksConfig",function(e,t,r){var n=e(r.getApiAbsUrl("/reports/revenue-forecast"),{},{query:{method:"GET",isArray:!0}});return{query:function(e){return n.query({centerId:e.centerId,monthCount:e.monthCount}).$promise}}}])},ZfRm:function(e,t,r){"use strict";r.r(t);var n=r("hsT8"),o=r.n(n),a=r("KK/u"),l=r.n(a),s=r("yCd9"),i=r.n(s),u=r("WgSX"),c=r("G6E5"),d=r("5/DJ"),f=r("LTMe");t.default=angular.module("deskworks.reports.recurringBillingReport",[u.a.name,c.a.name,d.a.name,f.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportColumns","deskworks.reports.reportOwnerRegion","deskworks.reports.recurringBillingReport.service","deskworks.reports.recurringBillingReportColumns"]).controller("RecurringBillingReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","reportHelper","reportStyles","ReportBuilder","RecurringBillingReport","recurringBillingReportColumns",function(e,t,r,n,a,s,u,c,d,f,p){var R,m=this;function g(e){var t,r,a={columns:o()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:l()(u).call(u,e.reportData.billings,m.config.orderBy),styles:[]};a.rows=i()(r=a.rows).call(r,(function(e,t){var r;return a.styles.push(t%2?null:c.rowOdd),i()(r=a.columns).call(r,(function(t){return e[t.dataKey]}))}));var d,f,p,R,g,E,h,y,O=s.findIndexByKeyValue(a.columns,"dataKey","total");O>=0&&(f=(f=(f=s.findIndexByKeyValue(a.columns,"dataKey","description"))<0?s.findIndexByKeyValue(a.columns,"dataKey","productName"):f)<0?a.columns.length-2:f,a.rows.push(i()(p=Array.apply(null,Array(a.columns.length))).call(p,Boolean.prototype.valueOf,!1)),a.styles.push(null),(d=i()(R=Array.apply(null,Array(a.columns.length))).call(R,Boolean.prototype.valueOf,!1))[f]=n.instant("RECURRING_BILLINGS_REPORT.TOTALS.MONTHLY")+":",d[O]=e.reportData.totalMonthly,a.rows.push(d),a.styles.push(c.h3),(d=i()(g=Array.apply(null,Array(a.columns.length))).call(g,Boolean.prototype.valueOf,!1))[f]=n.instant("RECURRING_BILLINGS_REPORT.TOTALS.QUARTERLY")+":",d[O]=e.reportData.totalQuarterly,a.rows.push(d),a.styles.push(c.h3),(d=i()(E=Array.apply(null,Array(a.columns.length))).call(E,Boolean.prototype.valueOf,!1))[f]=n.instant("RECURRING_BILLINGS_REPORT.TOTALS.SEMI_ANNUAL")+":",d[O]=e.reportData.totalSemiAnnual,a.rows.push(d),a.styles.push(c.h3),(d=i()(h=Array.apply(null,Array(a.columns.length))).call(h,Boolean.prototype.valueOf,!1))[f]=n.instant("RECURRING_BILLINGS_REPORT.TOTALS.ANNUAL")+":",d[O]=e.reportData.totalAnnual,a.rows.push(d),a.styles.push(c.h3),(d=i()(y=Array.apply(null,Array(a.columns.length))).call(y,Boolean.prototype.valueOf,!1))[f]=n.instant("RECURRING_BILLINGS_REPORT.TOTALS.AS_NEEDED")+":",d[O]=e.reportData.totalAsNeeded,a.rows.push(d),a.styles.push(c.h3));return a}m.config={reportName:n.instant("RECURRING_BILLINGS_REPORT.REPORT_NAME"),reportOptions:{},reportColumns:{columns:angular.copy(p)},reportOwnerRegion:{},getReportData:function(){return f.get({centerId:m.config.reportOptions.centerId,ownerId:m.config.reportOwnerRegion.ownerId,regionId:m.config.reportOwnerRegion.regionId}).$promise}},a.setPageTitle(m.config.reportName),m.reportBuilder=new d(m.config),e.$watch((function(e){return{reportOptions:m.config.reportOptions,reportColumns:m.config.reportColumns,orderBy:m.config.orderBy,reportOwnerRegion:m.config.reportOwnerRegion}}),(function(e){R&&(t.cancel(R),R=null),R=t((function(e){m.pdf=null,angular.isUndefined(m.config.reportOptions.centerId)||m.reportBuilder.buildPdf(g).then((function(e){m.pdf=e}))}),100)}),!0),m.downloadPdf=function(){m.pdf&&u.download({blob:m.pdf,fileName:m.reportBuilder.getReportFileName("pdf")})},m.downloadCsv=function(){m.pdf&&u.download({blob:m.reportBuilder.buildCsv(g),fileName:m.reportBuilder.getReportFileName("csv")})}}])},b2oW:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("nbuU"),o=r.n(n);t.default=angular.module("deskworks.recurringBillingChurnReportColumns",["deskworks.userProfile.optsMembershipStatus","deskworks.userProfile.optsBillingMethod"]).factory("recurringBillingChurnReportColumns",["$rootScope","$filter","$translate","optsMembershipStatus","optsBillingMethod",function(e,t,r,n,a){var l=[{dataKey:"centerName",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.CENTER"},{dataKey:"userCompany",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.COMPANY",include:!0,defaultOrder:!0,styles:{minCellWidth:60}},{dataKey:"userName",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.MEMBER",include:!0},{dataKey:"userMembershipStatus",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.MEMBER_STATUS",include:!0,styles:{halign:"center"},pdf:function(e){return(o()(n).call(n,(function(t){return t.id===e}))||{}).name||e},csv:function(e){return(o()(n).call(n,(function(t){return t.id===e}))||{}).name||e}},{dataKey:"productName",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.RECURRING_BILLING_ITEM",include:!0},{dataKey:"billingMethod",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.BILLING_METHOD",include:!0,styles:{halign:"center"},pdf:function(e){return(o()(a).call(a,(function(t){return t.id===e}))||{}).name||e},csv:function(e){return(o()(a).call(a,(function(t){return t.id===e}))||{}).name||e}},{dataKey:"amount",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.AMOUNT",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"discount",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.DISCOUNT",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.TOTAL",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"startDate",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.START_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e)},csv:function(e){return t("date")(e)}},{dataKey:"terminationDate",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.TERMINATION_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e)},csv:function(e){return t("date")(e)}},{dataKey:"daysActive",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.DAYS_ACTIVE",include:!0,styles:{halign:"right"}},{dataKey:"leadSource",_title:"RECURRING_BILLING_CHURN_REPORT.COLUMNS.LEAD_SOURCE",include:!0}];function s(){l.forEach((function(e){e.title=r.instant(e._title)}))}return s(),e.$on("$setTranslationsSuccess",s),l}])},dd2W:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.recurringBillingReport.service",["ngResource","datesDeserializer","deserializeNumbers","deskworks.config"]).factory("RecurringBillingReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=r(["billings.total","billings.discount","billings.amount","billings.noticePeriod","billings.renewalTerm","billings.renewalNoticePeriod"]),a=t(["billings.lastBillDate","billings.nextBillDate","billings.startDate","billings.ccExpiry","billings.terminate","billings.noticeDate","billings.renewalDate"]);return e(n.getApiAbsUrl("/centers/:centerId/recurring-billing-reports"),{centerId:"@centerId"},{get:{method:"GET",transformResponse:[angular.fromJson,a,o,function(e){return(e=angular.fromJson(e)).billings.forEach((function(e){e.renewalDate&&e.noticePeriod&&(e.noticeRequiredBy=new Date(e.renewalDate-24*e.noticePeriod*36e5))})),e}]}})}])},exTJ:function(e,t){e.exports='<div id="reservationIncomeReport" class="gutter-v"> <form> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="$ctrl.params"> <report-dates model="$ctrl.params" embed="0 0 100px"></report-dates> <report-order-by model="$ctrl.params.orderBy" report-columns="$ctrl.sortableColumns"></report-order-by> </report-options> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},hUWN:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("fzuT"),o=r.n(n),a=r("XX2w"),l=r.n(a),s=r("yCd9"),i=r.n(s),u=r("ipr/"),c=r.n(u),d=r("lRNC"),f=r.n(d),p=r("03wM"),R=r.n(p),m=r("Ekwr"),g=r.n(m),E=r("hsT8"),h=r.n(E),y=r("lvz6"),O=r.n(y),v=r("yKah"),T=r.n(v),C=r("G6E5"),N=r("WgSX"),_=r("CLLE"),w=r("pl6f"),I=r("5/DJ"),S=r("LTMe"),D=r("Jqji"),b=r("4DcZ");function A(e,t){var r=R()(e);if(g.a){var n=g()(e);t&&(n=h()(n).call(n,(function(t){return O()(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):T.a?Object.defineProperties(e,T()(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,O()(r,t))}))}return e}t.default=angular.module("deskworks.RevenueForecastReportCtrl",["debounce","deskworks.state","deskworks.reports.ReportBuilder","deskworks.reportOrderBy","deskworks.RevenueForecastReport","deskworks.revenueForecastReportColumns",N.a.name,_.a.name,w.a.name,C.a.name,I.a.name,S.a.name,D.default.name,b.default.name]).controller("RevenueForecastReportCtrl",["$scope","$timeout","$filter","$translate","$q","systemColors","debounce","state","helper","reportStyles","reportHelper","dwAlerts","RevenueForecastReport","revenueForecastReportColumns","revenueForecastData","revenueForecastChart",function(e,t,r,n,o,a,s,u,d,p,R,m,g,E,h,y){var O,v,T,C=this,N=R.paramsChanged,_=R.loadResources;C.config={reportName:n.instant("REVENUE_FORECAST_REPORT.REPORT_NAME")},C.params={monthCount:u.getParam("monthCount")?+u.getParam("monthCount"):6,orderBy:u.getParam("orderBy")||"userName"},C.resources=null,C.data=null,C.columns=E,u.setPageTitle(C.config.reportName),C.optsMonthCount=i()(O=c()(v=l()(f()(T=Array(13)).call(T))).call(v,1)).call(O,(function(e){return{id:e,name:r("months")(e)}})),e.$watch("$ctrl.params",s((function(e,t){u.setParam("monthCount",C.params.monthCount),C.pdf=null,C.report=null,d.pointFirstInvalid("#revenueForecastReport")||(N(e,t,["monthCount","centerId"])&&(C.data=null),o.all({resources:C.resources||_(),data:C.data||g.query(C.params).catch((function(e){return m.error(e,"Failed to query report.")}))}).then((function(e){C.resources=e.resources,C.data=e.data})).then((function(){C.report=h(C.params,C.data);var e=R.buildPdf({config:P(P({},C.config),C.params),report:C.report,resources:C.resources});C.pdf=e.output("blob"),C.chart=y(C.data)})))}),100),!0),C.downloadPdf=function(){if(C.pdf){var e=R.getReportFileName({extension:"pdf",config:P(P({},C.config),C.params),resources:C.resources});R.download({blob:C.pdf,fileName:e})}},C.downloadCsv=function(){if(C.pdf){var e=R.getReportFileName({extension:"csv",config:P(P({},C.config),C.params),resources:C.resources}),t=R.buildCsv({report:C.report});R.download({blob:t,fileName:e})}}}])},hlyU:function(e,t,r){"use strict";r.r(t);r("Muwe"),r("X5mX"),r("y89P"),r("3dw1");var n=r("hsT8"),o=r.n(n),a=r("KK/u"),l=r.n(a),s=r("yCd9"),i=r.n(s),u=r("NOor"),c=r.n(u),d=r("6RpP"),f=r.n(d),p=r("ipr/"),R=r.n(p),m=r("WgSX"),g=r("G6E5"),E=r("5/DJ"),h=r("LTMe");t.default=angular.module("deskworks.reports.securityDepositReport",[m.a.name,g.a.name,E.a.name,h.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOwnerRegion","deskworks.reports.securityDepositReport.service","deskworks.reports.securityDepositReportColumns"]).controller("SecurityDepositReportCtrl",["$scope","$timeout","$filter","$translate","$location","state","helper","reportHelper","reportStyles","ReportBuilder","SecurityDepositReport","securityDepositReportColumns",function(e,t,r,n,a,s,u,d,p,m,g,E){var h,y,O=this;function v(e){var t,r,o,a,s,u={columns:e.showDetails?e.reportColumns:O.reportColumnsFiltered,rows:[],styles:[]},m=l()(d).call(d,e.reportData.deposits,e.orderBy),g=i()(t=Array.apply(null,new Array(u.columns.length))).call(t,(function(e){return!1}));(m.forEach((function(t,r){var n;u.styles.push(e.showDetails?p.h2:r%2?null:p.rowOdd),u.rows.push(i()(n=u.columns).call(n,(function(e){return!(["orderId","date","amount"].indexOf(e.dataKey)>=0)&&t[e.dataKey]}))),e.showDetails&&t.details.forEach((function(e,t){u.styles.push(t%2?null:p.rowOdd),u.rows.push([!1,!1,e.orderId,e.date,e.amount,!1])}))})),u.rows.push(g),u.styles.push(null),(o=c()(r=u.columns).call(r,(function(e){return"balance"===e.dataKey})))>=0)&&(u.rows.push(f()(a=f()(s=R()(g).call(g,0,Math.max(o-1,0))).call(s,o>0?[{content:n.instant("SECURITY_DEPOSIT_REPORT.TOTALS.TOTAL")+":",styles:{halign:"right"}},e.reportData.total]:[e.reportData.total])).call(a,R()(g).call(g,0,g.length-o-1))),u.styles.push(p.h3));return u}O.config={reportName:n.instant("SECURITY_DEPOSIT_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:E,toDate:moment(),showDetails:!1,getReportData:function(){return g.get({centerId:O.config.reportOptions.centerId,ownerId:O.config.reportOwnerRegion.ownerId,regionId:O.config.reportOwnerRegion.regionId,toDate:r("date")(O.config.toDate,"yyyy-MM-dd")}).$promise}},O.reportColumnsFiltered=o()(h=O.config.reportColumns).call(h,(function(e){return e.include})),s.setPageTitle(O.config.reportName),e.$watch((function(e){return a.search().showDetails}),(function(e){O.config.showDetails=e})),e.$watch("$ctrl.config.showDetails",(function(e){a.search("showDetails",e||null).replace()})),e.$watch((function(){return a.search().toDate}),(function(e){var t=r("toDate")(e);O.config.toDate=moment.isMoment(t)&&!O.config.toDate.isSame(t)?t:O.config.toDate})),e.$watch("$ctrl.config.toDate",(function(e){moment.isMoment(e)&&a.search("toDate",r("date")(e,"yyyy-MM-dd")).replace()})),O.reportBuilder=new m(O.config),O.getToday=function(){return moment()},e.$watch((function(){return{reportOptions:O.config.reportOptions,reportOwnerRegion:O.config.reportOwnerRegion,toDate:O.config.toDate,orderBy:O.config.orderBy,showDetails:O.config.showDetails}}),(function(e,r){y&&(t.cancel(y),y=null),y=t((function(t){if(!(moment.isMoment(e.toDate)&&e.toDate.isAfter(moment(),"day")||(O.pdf=null,angular.isUndefined(O.config.reportOptions.centerId)))){var n=e.toDate,o=r.toDate;!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(O.config.reportData=null),O.reportBuilder.buildPdf(v).then((function(e){O.pdf=e}))}}),100)}),!0),O.downloadPdf=function(){O.pdf&&d.download({blob:O.pdf,fileName:O.reportBuilder.getReportFileName("pdf")})},O.downloadCsv=function(){O.pdf&&d.download({blob:O.reportBuilder.buildCsv(v),fileName:O.reportBuilder.getReportFileName("csv")})}}])},iLQO:function(e,t,r){"use strict";r.r(t);var n=r("03wM"),o=r.n(n),a=r("Ekwr"),l=r.n(a),s=r("lvz6"),i=r.n(s),u=r("yKah"),c=r.n(u),d=r("fzuT"),f=r.n(d),p=(r("3dw1"),r("hsT8")),R=r.n(p),m=r("KK/u"),g=r.n(m),E=r("6RpP"),h=r.n(E),y=r("yCd9"),O=r.n(y),v=r("WgSX"),T=r("G6E5"),C=r("5/DJ"),N=r("LTMe"),_=r("yeBZ"),w=r("KYoW");function I(e,t){var r=o()(e);if(l.a){var n=l()(e);t&&(n=R()(n).call(n,(function(t){return i()(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){f()(e,t,r[t])})):c.a?Object.defineProperties(e,c()(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,i()(r,t))}))}return e}t.default=angular.module("deskworks.reports.ReservationIncomeReportCtrl",[v.a.name,T.a.name,C.a.name,N.a.name,_.default.name,w.default.name]).controller("ReservationIncomeReportCtrl",["$scope","$q","$filter","$translate","state","helper","dwAlerts","debounce","reportHelper","reportStyles","ReservationIncomeReport","reservationIncomeReportColumns",function(e,t,r,n,o,a,l,s,i,u,c,d){var f=this,p=i.paramsChanged,m=i.loadResources;f.config={reportName:n.instant("RESERVATION_INCOME_REPORT.REPORT_NAME")},f.params={fromDate:o.getParam("fromDate")?r("toDate")(o.getParam("fromDate")):moment(),toDate:o.getParam("toDate")?r("toDate")(o.getParam("toDate")):moment().add(7,"d"),orderBy:o.getParam("orderBy")||"memberName",columns:d},f.resources=null,f.data=null,f.sortableColumns=R()(d).call(d,(function(e){return e.sortable})),o.setPageTitle(f.config.reportName),e.$watch("$ctrl.params",s((function(e,r){f.pdf=null,f.report=null,a.pointFirstInvalid("#reservationIncomeReport")||f.params.fromDate&&f.params.toDate&&(p(e,r,["fromDate","toDate","centerId"])&&(f.data=null),t.all({resources:f.resources||m(),data:f.data||c.query(f.params).catch((function(e){return l.error(e,"Failed to query report.")}))}).then((function(e){f.resources=e.resources,f.data=e.data})).then((function(){f.report=function(e,t){var r=t,o={columns:R()(d).call(d,(function(e){return e.include})),rows:[],styles:[]};return l("member"),l("nonMember"),l("aggregator"),o;function l(e){var l,s=n.instant({member:"RESERVATION_INCOME_REPORT.SOURCE.MEMBERS",nonMember:"RESERVATION_INCOME_REPORT.SOURCE.NON_MEMBERS",aggregator:"RESERVATION_INCOME_REPORT.SOURCE.AGGREGATORS"}[e]).toUpperCase();t=g()(i).call(i,R()(r).call(r,(function(t){return t.source===e})),f.params.orderBy),o.styles.push(u.h2),o.rows.push([{content:s,colSpan:o.columns.length}]),o.rows=h()(l=o.rows).call(l,O()(t).call(t,(function(e,t){var r;return o.styles.push(t%2?null:u.rowOdd),O()(r=o.columns).call(r,(function(t){return e[t.dataKey]}))})));var c=0,d=0,p=0,m=0;t.forEach((function(e){c+=a.toNumber(e.hours),d+=a.toNumber(e.charge),p+=a.toNumber(e.credit||0),m+=a.toNumber(e.total)})),c=a.round(c),d=a.round(d),p=a.round(p),m=a.round(m),o.styles.push(u.h3),o.rows.push([{content:s+" TOTAL:",styles:{halign:"right"},colSpan:o.columns.length-4},{content:c},{content:d},{content:p},{content:m}])}}(f.params,f.data);var e=i.buildPdf({config:S(S({},f.config),f.params),report:f.report,resources:f.resources});f.pdf=e.output("blob")})))}),100),!0),f.downloadPdf=function(){if(f.pdf){var e=i.getReportFileName({extension:"pdf",config:S(S({},f.config),f.params),resources:f.resources});i.download({blob:f.pdf,fileName:e})}},f.downloadCsv=function(){if(f.pdf){var e=i.getReportFileName({extension:"csv",config:S(S({},f.config),f.params),resources:f.resources}),t=i.buildCsv({report:f.report});i.download({blob:t,fileName:e})}}}])},kJoc:function(e,t){e.exports='<div id="securityDepositReport" class="gutter-v"> <form name="formSecurityDepositReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"></div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="$ctrl.config.reportOptions"> <label class="ff-row"> <ff-label flex="0 0 100px" ff-required="true"><span translate="REPORTS.PERIOD.TO_DATE"></span></ff-label> <ff-date flex="0 0 124px" name="toDate" ff-model="$ctrl.config.toDate" ff-date-order="{ early: $ctrl.config.toDate, late: $ctrl.getToday() }" ff-validate-alert="{ field: \'Selected date\', late: \'or equal to today\' }"></ff-date> <span class="ff-label"></span> </label> <report-order-by model="$ctrl.config.orderBy" report-columns="$ctrl.reportColumnsFiltered"></report-order-by> <ff-row> <ff-label flex="0 0 100px"><span translate="SECURITY_DEPOSIT_REPORT.SHOW_DETAILS"></span></ff-label> <ff-static><ff-checkbox ff-model="$ctrl.config.showDetails"></ff-checkbox></ff-static> </ff-row> </report-options> <report-owner-region model="$ctrl.config.reportOwnerRegion" report-data="$ctrl.config.reportData"></report-owner-region> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},lfjC:function(e,t,r){"use strict";r.r(t);var n=r("03wM"),o=r.n(n),a=r("Ekwr"),l=r.n(a),s=r("lvz6"),i=r.n(s),u=r("yKah"),c=r.n(u),d=r("fzuT"),f=r.n(d),p=(r("3dw1"),r("hsT8")),R=r.n(p),m=r("NOor"),g=r.n(m),E=r("yCd9"),h=r.n(E),y=r("6RpP"),O=r.n(y),v=r("WgSX"),T=r("G6E5"),C=r("5/DJ"),N=r("LTMe"),_=r("ygyL"),w=r("uH5N"),I=r("HoW3"),S=r("fKuI");function D(e,t){var r=o()(e);if(l.a){var n=l()(e);t&&(n=R()(n).call(n,(function(t){return i()(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){f()(e,t,r[t])})):c.a?Object.defineProperties(e,c()(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,i()(r,t))}))}return e}t.default=angular.module("deskworks.reports.RoyaltyReportCtrl",[v.a.name,T.a.name,C.a.name,N.a.name,_.default.name,w.default.name,I.default.name,S.default.name,"deskworks.setup.service"]).controller("RoyaltyReportCtrl",["$scope","$q","$filter","$translate","state","helper","dwAlerts","debounce","reportHelper","reportStyles","RoyaltyReport","royaltyReportColumns","royaltyReportData","WriteOffReport","setupService",function(e,t,r,n,o,a,l,s,i,u,c,d,f,p,m){var E=this,y=i.paramsChanged,v=i.loadResources;E.config={reportName:n.instant("ROYALTY_REPORT.REPORT_NAME")},E.params={fromDate:o.getParam("fromDate")?r("toDate")(o.getParam("fromDate")):moment().subtract(1,"month").startOf("month"),toDate:o.getParam("toDate")?r("toDate")(o.getParam("toDate")):moment().subtract(1,"month").endOf("month"),filterBy:o.getParam("filterBy")||"dueDate",mode:o.getParam("mode")||"summary",columns:d},E.resources=null,E.data=null,o.setPageTitle(E.config.reportName),e.$watch("$ctrl.params",s((function(e,r){E.pdf=null,E.report=null,o.setParam("mode",E.params.mode),o.setParam("filterBy",E.params.filterBy),a.pointFirstInvalid("#royaltyReport")||E.params.fromDate&&E.params.toDate&&(y(e,r,["fromDate","toDate","centerId","filterBy"])&&(E.data=null,E.writeOffs=null),t.all({resources:E.resources||v(),data:E.data||c.query(E.params).catch((function(e){return l.error(e,"Failed to query royalty report.")})),writeOffs:E.writeOffs||p.query(E.params).catch((function(e){return l.error(e,"Failed to query write-jff report.")})),settings:E.settings||m.getSetupSettings().catch((function(e){return l.error(e,"Failed to get setup settings.")}))}).then((function(e){E.resources=e.resources,E.data=e.data,E.writeOffs=e.writeOffs,E.settings=e.settings,E.settings.franchiseFees=E.settings.franchiseFees||[]})).then((function(){E.report=function(e,t,r){var o,a,l={columns:R()(d).call(d,(function(e){return e.include})),rows:[],styles:[]},s=g()(o=l.columns).call(o,(function(e){return"dueDate"===e.dataKey}));s<0&&(s=g()(a=l.columns).call(a,(function(e){return"billDate"===e.dataKey})));var i=f.flattenOrders({orders:t}),c=E.settings.isFranchise?f.flattenExemptions({orders:i}):[],p=f.calcTotals({orders:i,exemptions:c,franchiseFees:E.settings.franchiseFees,writeOffs:r});if(i.forEach((function(e,t){var r;l.styles.push("detail"===E.params.mode?u.h2:t%2?null:u.rowOdd),l.rows.push(h()(r=l.columns).call(r,(function(t){return e[t.dataKey]}))),"detail"===E.params.mode&&e.items.forEach((function(e,t){var r;l.styles.push(t%2?null:u.rowOdd),l.rows.push(h()(r=l.columns).call(r,(function(t){return e[t.dataKey]}))),l.rows[l.rows.length-1][s]=e.date}))})),c.length>0){var m;l.styles.push(u.h1),l.rows.push([{content:n.instant("ROYALTY_REPORT.EXEMPTIONS").toUpperCase(),colSpan:l.columns.length,styles:{halign:"center"}}]),l.rows=O()(m=l.rows).call(m,h()(c).call(c,(function(e,t){var r;l.styles.push(t%2?null:u.rowOdd);var n=h()(r=l.columns).call(r,(function(t){return e[t.dataKey]}));return s>=0&&(n[s]=e.date),n})))}if(r.length>0){var y;l.styles.push(u.h1),l.rows.push([{content:n.instant("ROYALTY_REPORT.WRITE_OFFS").toUpperCase(),colSpan:l.columns.length,styles:{halign:"center"}}]),l.rows=O()(y=l.rows).call(y,h()(r).call(r,(function(e,t){var r;l.styles.push(t%2?null:u.rowOdd);var n=h()(r=l.columns).call(r,(function(t){return e[t.dataKey]}));return s>=0&&(n[s]=e.date),n})))}l.styles.push(u.h1),l.rows.push([{content:n.instant("ROYALTY_REPORT.SUMMARY").toUpperCase(),colSpan:l.columns.length,styles:{halign:"center"}}]),l.styles.push(u.h3),l.rows.push([{content:n.instant("ROYALTY_REPORT.TOTAL_REVENUE"),colSpan:l.columns.length-1,styles:{halign:"right"}},p.totalRevenue]),l.styles.push(u.h3),l.rows.push([{content:n.instant("ROYALTY_REPORT.EXEMPT_REVENUE"),colSpan:l.columns.length-1,styles:{halign:"right"}},p.exemptRevenue]),l.styles.push(u.h3),l.rows.push([{content:n.instant("ROYALTY_REPORT.ROYALTIES_REVENUE"),colSpan:l.columns.length-1,styles:{halign:"right"}},p.royaltiesRevenue]),p.fees.forEach((function(e){l.styles.push(u.h3);var t="$"===e.type?"$"+e.rate:e.rate+"%";l.rows.push([{content:e.name+" ("+t+")",colSpan:l.columns.length-1,styles:{halign:"right"}},e.amount])})),l.styles.push(u.h3),l.rows.push([{content:n.instant("ROYALTY_REPORT.WRITE_OFFS"),colSpan:l.columns.length-1,styles:{halign:"right"}},p.totalWriteOff]),p.fees.length&&(l.styles.push(u.h3),l.rows.push([{content:n.instant("ROYALTY_REPORT.TOTAL_DUE"),colSpan:l.columns.length-1,styles:{halign:"right"}},p.totalDue]));return l}(E.params,E.data,E.writeOffs);var e=i.buildPdf({config:b(b({},E.config),E.params),report:E.report,resources:E.resources});E.pdf=e.output("blob")})))}),100),!0),E.downloadPdf=function(){if(E.pdf){var e=i.getReportFileName({extension:"pdf",config:b(b({},E.config),E.params),resources:E.resources});i.download({blob:E.pdf,fileName:e})}},E.downloadCsv=function(){if(E.pdf){var e=i.getReportFileName({extension:"csv",config:b(b({},E.config),E.params),resources:E.resources}),t=i.buildCsv({report:E.report});i.download({blob:t,fileName:e})}}}])},liLb:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.RecurringBillingChurnReport",["ngResource","datesDeserializer","deskworks.config"]).factory("RecurringBillingChurnReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["billings.startDate","billings.terminationDate"]),o=e(r.getApiAbsUrl("/reports/recurring-billing-churn"),{},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,n]}});return{get:function(e){return o.get(e).$promise}}}])},nJHl:function(e,t){e.exports='<div id="reservationUtilizationReport" class="gutter-v"> <form> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <report-dates model="$ctrl.params"></report-dates> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="$ctrl.params" all-centers="false"> <ff-row> <ff-label flex="0 0 100px"><span translate="RESERVATION_UTILIZATION_REPORT.MODE"></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half"> <label flex="0 0 auto"> <ff-radio ff-model="$ctrl.params.mode" ff-value="\'detailedActual\'"> <span translate="RESERVATION_UTILIZATION_REPORT.MODE.DETAILED_ACTUAL"></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio ff-model="$ctrl.params.mode" ff-value="\'actualExpected\'"> <span translate="RESERVATION_UTILIZATION_REPORT.MODE.ACTUAL_EXPECTED"></span> </ff-radio> </label> </div> </ff-static> </ff-row> <report-by-period model="$ctrl.params.byPeriod" ng-if="$ctrl.params.mode === \'detailedActual\'"></report-by-period> </report-options> </div> </div> <ff-panel flex="auto"> <ff-panel-header><span translate="RESERVATION_UTILIZATION_REPORT.CHART.HEADER"></span></ff-panel-header> <div ff-dim="!$ctrl.pdf" ng-init="$ctl = $ctrl"> <chart config="$ctrl.chart" ng-style="{ \'max-height\': ($ctl.chart && $ctl.chart.type !== \'pie\' ? \'none\' : null), \'height\': ($ctl.chart && $ctl.chart.type !== \'pie\' ? $ctl.chart.data.labels.length * 30 + 40 + \'px\' : null) }"></chart> </div> </ff-panel> <ff-btn-group> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </div> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},nUUl:function(e,t){e.exports='<div id="revenueForecastReport" class="gutter-v"> <form> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <ff-panel flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <ff-panel-header><span translate="REVENUE_FORECAST_REPORT.BAR_CHART.HEADER"></span></ff-panel-header> <div ff-dim="!$ctrl.pdf"> <chart config="$ctrl.chart" style="max-height:228px"></chart> </div> </ff-panel> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <report-options model="$ctrl.params"> <label class="ff-row"> <ff-label flex="0 0 100px"><span translate="REVENUE_FORECAST_REPORT.PERIOD"></span></ff-label> <ff-select ff-model="$ctrl.params.monthCount" ff-required="true" ff-options="opt.id as opt.name for opt in $ctrl.optsMonthCount" ff-validate-alert="{{\'REVENUE_FORECAST_REPORT.PERIOD\' | translate}}"></ff-select> </label> <report-order-by model="$ctrl.params.orderBy" report-columns="$ctrl.columns"></report-order-by> </report-options> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},nabW:function(e,t){e.exports='<div id="recurringBillingChurnReport" class="gutter-v"> <form name="formRecurringBillingChurnReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 65%\', md: \'0 0 50%\'}"> <report-columns model="$ctrl.config.reportColumns"></report-columns> </div> <div flex="{lg: \'0 0 35%\', md: \'0 0 50%\'}"> <report-options model="$ctrl.config.reportOptions"> <label class="ff-row"> <ff-label flex="0 0 100px"><span translate="RECURRING_BILLING_CHURN_REPORT.AS_OF"></span></ff-label> <ff-date flex="0 0 124px" ff-model="$ctrl.config.reportDates.toDate" ff-validate-alert="{{\'RECURRING_BILLING_CHURN_REPORT.AS_OF\' | translate}}"></ff-date> <span class="ff-label"></span> </label> <report-order-by model="$ctrl.config.orderBy" report-columns="$ctrl.config.reportColumns.columns"></report-order-by> </report-options> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},oMHk:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reservationUtilizationDetailedActualColumns",[]).factory("reservationUtilizationDetailedActualColumns",["$rootScope","$translate",function(e,t){var r=[{dataKey:"name",_title:"RESERVATION_UNITS.UNIT"},{dataKey:"[period]",_title:"",styles:{halign:"center"}},{dataKey:"totals",_title:"REPORTS.TOTALS",styles:{halign:"center"}}];function n(){r.forEach((function(e){e.title=t.instant(e._title)}))}return n(),e.$on("$setTranslationsSuccess",n),r}])},ogb4:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("nbuU"),o=r.n(n);t.default=angular.module("deskworks.recurringBillingChangeReportColumns",["deskworks.userProfile.optsMembershipStatus"]).factory("recurringBillingChangeReportColumns",["$rootScope","$translate","$filter","optsMembershipStatus",function(e,t,r,n){var a=[{dataKey:"centerName",_title:"REPORTS.COLUMNS.CENTER",include:!1},{dataKey:"userCompany",_title:"REPORTS.COLUMNS.USER_COMPANY",include:!0,defaultOrder:!0},{dataKey:"userName",_title:"RECURRING_BILLING_CHANGE_REPORT.COLUMNS.MEMBER",include:!0},{dataKey:"userMembershipStatus",_title:"RECURRING_BILLING_CHANGE_REPORT.COLUMNS.MEMBER_STATUS",include:!0,styles:{halign:"center",cellWidth:50},pdf:function(e){return(o()(n).call(n,(function(t){return t.id===e}))||{}).name||e},csv:function(e){return(o()(n).call(n,(function(t){return t.id===e}))||{}).name||e}},{dataKey:"productName",_title:"RECURRING_BILLING_CHANGE_REPORT.COLUMNS.PRODUCT",include:!0,styles:{minCellWidth:110}},{dataKey:"amount",_title:"REPORTS.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return r("currency")(e)},csv:function(e){return r("currency")(e)}},{dataKey:"discount",_title:"REPORTS.COLUMNS.DISCOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return r("currency")(e)},csv:function(e){return r("currency")(e)}},{dataKey:"total",_title:"REPORTS.COLUMNS.TOTAL",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return r("currency")(e)},csv:function(e){return r("currency")(e)}},{dataKey:"startDate",_title:"RECURRING_BILLING_CHANGE_REPORT.COLUMNS.START_DATE",include:!0,styles:{halign:"right",cellWidth:55},pdf:function(e){return r("date")(e,"mediumDate")},csv:function(e){return r("date")(e,"shortDate")}},{dataKey:"noticeDate",_title:"RECURRING_BILLING_CHANGE_REPORT.COLUMNS.NOTICE_DATE",include:!0,styles:{halign:"right",cellWidth:55},pdf:function(e){return r("date")(e,"mediumDate")},csv:function(e){return r("date")(e,"shortDate")}},{dataKey:"terminationDate",_title:"RECURRING_BILLING_CHANGE_REPORT.COLUMNS.TERMINATION_DATE",include:!0,styles:{halign:"right",cellWidth:55},pdf:function(e){return r("date")(e,"mediumDate")},csv:function(e){return r("date")(e,"shortDate")}},{dataKey:"daysActive",_title:"RECURRING_BILLING_CHANGE_REPORT.COLUMNS.DAYS_ACTIVE",include:!0,styles:{halign:"right",cellWidth:45}}];function l(){a.forEach((function(e){e.title=t.instant(e._title)}))}return l(),e.$on("$setTranslationsSuccess",l),a}])},piGw:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.ReservationUsageReport",["ngResource","deskworks.config","deserializeNumbers"]).factory("ReservationUsageReport",["$resource","deskworksConfig","deserializeNumbers",function(e,t,r){var n=t.getApiAbsUrl("/reservation-usage-report"),o=r(["reservationHours","reservationCost","reservationCreditApplied","reservationCostBalance"]),a=e(n,{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,o]}});return{query:function(e){return a.query(e).$promise}}}])},qctg:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("yCd9"),o=r.n(n),a=r("KK/u"),l=r.n(a),s=r("WgSX"),i=r("G6E5"),u=r("5/DJ"),c=r("LTMe");t.default=angular.module("deskworks.ReservationUsageReportCtrl",[s.a.name,i.a.name,u.a.name,c.a.name,"deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOwnerRegion","deskworks.ReservationUsageReport","deskworks.reservationUsageReportColumns","deskworks.reportOrderBy"]).controller("ReservationUsageReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","reportHelper","reportStyles","ReportBuilder","ReservationUsageReport","reservationUsageReportColumns",function(e,t,r,n,a,s,i,u,c,d,f){var p,R=this;function m(e){var t,r={columns:e.reportColumns,rows:[],styles:[]},a=["reservationCost","reservationCreditApplied","reservationCostBalance"],c=e.reportData.reduce((function(e,t){return a.forEach((function(r){e[r]+=t[r]||0})),e}),a.reduce((function(e,t){return e[t]=0,e}),{}));c.memberCompany=n.instant("REPORTS.TOTALS").toUpperCase()+":";var d=o()(t=r.columns).call(t,(function(e){return angular.isNumber(c[e.dataKey])?s.round(c[e.dataKey]):c[e.dataKey]||!1}));return r.rows.push(d),r.styles.push(u.h2),l()(i).call(i,e.reportData,e.orderBy).forEach((function(e,t){var n;r.rows.push(o()(n=r.columns).call(n,(function(t){return angular.isNumber(e[t.dataKey])?s.round(e[t.dataKey]):e[t.dataKey]}))),r.styles.push(t%2?null:u.rowOdd)})),e.reportData.length&&(r.rows.push(angular.extend({},d)),r.styles.push(u.h2)),r}R.config={reportName:n.instant("RESERVATION_USAGE_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:f,reportDates:{fromDate:moment().subtract(1,"month").startOf("month"),toDate:moment().subtract(1,"month").endOf("month")},getReportData:function(){return d.query({centerId:R.config.reportOptions.centerId||null,fromDate:r("date")(R.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(R.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:R.config.reportOwnerRegion.ownerId,regionId:R.config.reportOwnerRegion.regionId})}},a.setPageTitle(R.config.reportName),R.reportBuilder=new c(R.config),e.$watch((function(){return{reportOptions:R.config.reportOptions,reportDates:R.config.reportDates,orderBy:R.config.orderBy,reportOwnerRegion:R.config.reportOwnerRegion}}),(function(e,r){p&&(t.cancel(p),p=null),p=t((function(){R.pdf=null;var t=e.reportDates.fromDate,n=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(R.config.reportData=null),t=e.reportDates.toDate,n=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(R.config.reportData=null),R.reportBuilder.buildPdf(m).then((function(e){R.pdf=e}))}),100)}),!0),R.downloadPdf=function(){R.pdf&&i.download({blob:R.pdf,fileName:R.reportBuilder.getReportFileName("pdf")})},R.downloadCsv=function(){R.pdf&&i.download({blob:R.reportBuilder.buildCsv(m),fileName:R.reportBuilder.getReportFileName("csv")})}}])},qhd7:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.ReservationUtilizationReport",["ngResource","datesDeserializer","deskworks.config"]).factory("ReservationUtilizationReport",["$resource","$filter","datesDeserializer","deskworksConfig",function(e,t,r,n){var o=r(["groups.daily.date"]),a=e(n.getApiAbsUrl("/reservation-utilization-report"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,o]}});return{query:function(e){return a.query({centerId:e.centerId||null,fromDate:t("date")(e.fromDate,"yyyy-MM-dd"),toDate:t("date")(e.toDate,"yyyy-MM-dd")}).$promise}}}])},rrwk:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.revenueForecastReportColumns",[]).factory("revenueForecastReportColumns",["$rootScope","$translate",function(e,t){var r=[{dataKey:"userCompany",_title:"REVENUE_FORECAST_REPORT.COLUMNS.COMPANY",include:!0},{dataKey:"userName",_title:"REVENUE_FORECAST_REPORT.COLUMNS.NAME",include:!0,defaultOrder:!0}];function n(){r.forEach((function(e){e.title=t.instant(e._title)}))}return n(),e.$on("$setTranslationsSuccess",n),r}])},tmk0:function(e,t){e.exports='<div id="rentRollReport" class="gutter-v"> <form name="formRentRollReport"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 65%\', md: \'0 0 50%\'}"> <report-columns model="$ctrl.config.reportColumns"></report-columns> </div> <div flex="{lg: \'0 0 35%\', md: \'0 0 50%\'}"> <div class="gutter-v"> <report-options model="$ctrl.config.reportOptions"> <report-order-by model="$ctrl.config.orderBy" report-columns="$ctrl.config.reportColumns.columns"></report-order-by> </report-options> </div> </div> </div> <ff-btn-group class="buttons-bottom"> <ff-btn sense="download" ff-click="$ctrl.downloadPdf()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_PDF"></span> </ff-btn> <ff-btn sense="download" ff-click="$ctrl.downloadCsv()" ff-disabled="!$ctrl.pdf"> <span translate="REPORTS.BTN_CSV"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate="REPORTS.PREVIEW.HEADER"></span></ff-panel-header> <div pdf-preview="$ctrl.pdf"></div> </ff-panel> </div> '},uH5N:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.royaltyReportColumns",[]).factory("royaltyReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"billDate",_title:"ROYALTY_REPORT.BILL_DATE",include:!1,styles:{cellWidth:80,halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"dueDate",_title:"ROYALTY_REPORT.DUE_DATE",include:!0,styles:{cellWidth:80,halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"orderId",_title:"REPORTS.COLUMNS.ORDER_ID",include:!0,styles:{cellWidth:60,halign:"right"}},{dataKey:"userCompany",_title:"REPORTS.COLUMNS.USER_COMPANY",include:!0},{dataKey:"userName",_title:"REPORTS.COLUMNS.USER_NAME",include:!1},{dataKey:"productCode",_title:"REPORTS.COLUMNS.ITEM_CODE",include:!1,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"productName",_title:"REPORTS.COLUMNS.ITEM",include:!1},{dataKey:"amount",_title:"ROYALTY_REPORT.COLUMNS.CHARGES",include:!1,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"discountAmount",_title:"ROYALTY_REPORT.COLUMNS.DISCOUNTS",include:!1,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"taxAmount",_title:"ROYALTY_REPORT.COLUMNS.TAXES",include:!1,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"netAmount",_title:"ROYALTY_REPORT.COLUMNS.NET",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},vRPl:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.reports.reservationReportColumns",[]).factory("reservationReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"startTime",_title:"RESERVATION_REPORT.COLUMNS.START_TIME",include:!0,styles:{minCellWidth:100},pdf:function(e){return t("date")(e,"weekDate")+" "+t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortDate")+" "+t("date")(e,"shortTime")}},{dataKey:"centerName",_title:"RESERVATION_REPORT.COLUMNS.CENTER",include:!1,styles:{minCellWidth:120}},{dataKey:"createdAt",_title:"RESERVATION_REPORT.COLUMNS.CREATED_AT",include:!1,styles:{minCellWidth:80},pdf:function(e){return t("date")(e,"mediumDate")+" "+t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortDate")+" "+t("date")(e,"shortTime")}},{dataKey:"endTime",_title:"RESERVATION_REPORT.COLUMNS.END_TIME",include:!0,styles:{minCellWidth:100},pdf:function(e){return t("date")(e,"weekDate")+" "+t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortDate")+" "+t("date")(e,"shortTime")}},{dataKey:"note",_title:"RESERVATION_REPORT.COLUMNS.NOTE",include:!1,styles:{minCellWidth:120}},{dataKey:"reservationUnitName",_title:"RESERVATION_REPORT.COLUMNS.UNIT",include:!0,styles:{minCellWidth:150}},{dataKey:"userCompany",_title:"RESERVATION_REPORT.COLUMNS.COMPANY",include:!0,styles:{minCellWidth:150}},{dataKey:"userName",_title:"RESERVATION_REPORT.COLUMNS.USER_NAME",include:!0,styles:{minCellWidth:120}}];function o(){n.forEach((function(e){e.title=r.instant(e._title)}))}return o(),e.$on("$setTranslationsSuccess",o),n}])},vRjO:function(e,t,r){"use strict";r.r(t);var n=r("6RpP"),o=r.n(n),a=r("yCd9"),l=r.n(a);t.default=angular.module("deskworks.reports.reservationUtilizationActualExpectedChart",[]).factory("reservationUtilizationActualExpectedChart",["$translate","$filter","helper","whitelabel",function(e,t,r,n){return function(r){var a=r.reduce((function(e,t){return o()(e).call(e,t.units)}),[]),s=e.instant("RESERVATION_UTILIZATION_REPORT.COLUMNS.EXPECTED_USAGE"),i=e.instant("RESERVATION_UTILIZATION_REPORT.COLUMNS.ACTUAL_USAGE"),u=e.instant("RESERVATION_UTILIZATION_REPORT.COLUMNS.UTILIZATION");return{type:"horizontalBar",data:{labels:l()(a).call(a,(function(e){return e.name||"-"})),datasets:[{data:l()(a).call(a,(function(e){return e.utilization})),backgroundColor:n.getProperty("--brand-color"),maxBarThickness:30}]},options:{tooltips:{callbacks:{label:function(e,r){var n,l,c,d=a[e.index],f=t("hours")(t("round")(d.expectedUse,1)),p=t("hours")(t("round")(d.actualUse,1)),R=t("round")(d.utilization,1);return[o()(n="".concat(s,": ")).call(n,f),o()(l="".concat(i,": ")).call(l,p),o()(c="".concat(u,": ")).call(c,R,"%")]}}},legend:{display:!1},scales:{xAxes:[{min:100,max:100,ticks:{suggestedMin:0,suggestedMax:100,callback:function(e){return e+"%"}}}]}}}}}])},ycie:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("NOor"),o=r.n(n),a=r("yCd9"),l=r.n(a),s=r("6RpP"),i=r.n(s),u=r("ipr/"),c=r.n(u),d=r("5/DJ"),f=r("Amco");t.default=angular.module("deskworks.reports.reservationUtilizationDetailedActualReport",[d.a.name,f.default.name]).factory("reservationUtilizationDetailedActualReport",["$filter","helper","reportStyles","reservationUtilizationDetailedActualColumns",function(e,t,r,n){return function(t,a){var s,u,d,f=n,p={columns:[],rows:[],styles:[]},R=o()(f).call(f,(function(e){return"[period]"===e.dataKey}));if(R<0)throw new Error("[period] is not found in report columns");return p.columns=l()(s=a.periods).call(s,(function(t){return angular.extend({},f[R],{dataKey:e("date")(t.fromDate,"yyyyMMdd"),title:t.title})})),p.columns=i()(u=i()(d=c()(f).call(f,0,R)).call(d,p.columns)).call(u,c()(f).call(f,R+1)),a.units.forEach((function(e){var t,n;p.rows.push(i()(t=i()(n=[e.name]).call(n,e.totals)).call(t,e.total)),p.styles.push(r.h2),e.groups.forEach((function(e,t){var n,o;p.rows.push(i()(n=i()(o=[e.name]).call(o,e.totals)).call(n,e.total)),p.styles.push(t%2?null:r.rowOdd)}))})),p}}])},yeBZ:function(e,t,r){"use strict";r.r(t);r("3dw1");t.default=angular.module("deskworks.ReservationIncomeReport",["ngResource","datesDeserializer","deserializeNumbers","deskworks.config"]).factory("ReservationIncomeReport",["$resource","$filter","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n,o){var a=r(["createdAt","startTime","endTime"]),l=n(["charge","credit"]),s=e(o.getApiAbsUrl("/reports/reservation-income"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,a,l]}});return{query:function(e){return s.query({centerId:e.centerId||null,fromDate:t("date")(e.fromDate,"yyyy-MM-dd"),toDate:t("date")(e.toDate,"yyyy-MM-dd")}).$promise.then((function(e){return e.forEach((function(e){e.date=e.startTime,e.hours=e.endTime.diff(e.startTime,"hours",!0),e.total=e.charge+e.credit})),e}))}}}])},ygyL:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.RoyaltyReport",["ngResource","deskworks.config"]).factory("RoyaltyReport",["$resource","$filter","$timeout","deskworksConfig",function(e,t,r,n){var o=e(n.getApiAbsUrl("/reports/royalty"),{},{query:{method:"GET",isArray:!0}});return{query:function(e){return o.query({centerId:e.centerId||null,fromDate:t("date")(e.fromDate,"yyyy-MM-dd"),toDate:t("date")(e.toDate,"yyyy-MM-dd"),filterBy:e.filterBy||"dueDate"}).$promise}}}])},"yvW+":function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("nbuU"),o=r.n(n),a=r("0o3Q");t.default=angular.module("deskworks.RecurringBillingChangeReport",["ngResource","deskworks.config","datesDeserializer",a.default.name]).factory("RecurringBillingChangeReport",["$resource","$timeout","deskworksConfig","datesDeserializer","optsRbcReportByPeriod",function(e,t,r,n,a){var l=r.getApiAbsUrl("/reports/recurring-billing-change"),s=n(["from","to","billings.startDate","billings.noticeDate","billings.terminationDate"]),i=e(l,{},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,s]}});return{query:function(e){return i.query(e).$promise.then((function(t){return function(e){var t=e.data,r=e.params.byPeriod,n=void 0===r?"month":r,l=o()(a).call(a,(function(e){return e.id===n}));return t.forEach((function(e){e.title=l.format(e.from,e.to)})),t}({data:t,params:e})}))}}}])},zvMh:function(e,t,r){"use strict";r.r(t);r("JBxO"),r("kPpV"),r("/usm"),r("HJh7"),r("BqNe"),r("HKDy"),r("OgzJ"),r("lCat"),r("EApN"),r("MFGm"),r("lZgT"),r("JzGb"),r("WH+p"),r("xg3p"),r("soU3"),r("ajWl"),r("s5En"),r("EjQN"),r("36lJ"),r("fD/E"),r("LWud"),r("AxL9"),r("HztR"),r("xmYR"),r("cF0Y"),r("8cZI");t.default=angular.module("b64",[]).factory("b64",["$window",function(e){var t=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array;return function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=e.length;n<o;++n)t[n]=e[n],r[e.charCodeAt(n)]=n;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63}(),{toByteArray:function(e){var t,o,a,l,s,i,u=e.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s="="===e[u-2]?2:"="===e[u-1]?1:0,i=new n(3*u/4-s),a=s>0?u-4:u;var c=0;for(t=0,o=0;t<a;t+=4,o+=3)l=r[e.charCodeAt(t)]<<18|r[e.charCodeAt(t+1)]<<12|r[e.charCodeAt(t+2)]<<6|r[e.charCodeAt(t+3)],i[c++]=l>>16&255,i[c++]=l>>8&255,i[c++]=255&l;2===s?(l=r[e.charCodeAt(t)]<<2|r[e.charCodeAt(t+1)]>>4,i[c++]=255&l):1===s&&(l=r[e.charCodeAt(t)]<<10|r[e.charCodeAt(t+1)]<<4|r[e.charCodeAt(t+2)]>>2,i[c++]=l>>8&255,i[c++]=255&l);return i},fromByteArray:function(e){for(var r,n=e.length,a=n%3,l="",s=[],i=0,u=n-a;i<u;i+=16383)s.push(o(e,i,i+16383>u?u:i+16383));1===a?(r=e[n-1],l+=t[r>>2],l+=t[r<<4&63],l+="=="):2===a&&(r=(e[n-2]<<8)+e[n-1],l+=t[r>>10],l+=t[r>>4&63],l+=t[r<<2&63],l+="=");return s.push(l),s.join("")}};function o(e,r,n){for(var o,a,l=[],s=r;s<n;s+=3)o=(e[s]<<16)+(e[s+1]<<8)+e[s+2],l.push(t[(a=o)>>18&63]+t[a>>12&63]+t[a>>6&63]+t[63&a]);return l.join("")}}])}}]);