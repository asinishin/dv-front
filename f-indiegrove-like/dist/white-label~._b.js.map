{"version":3,"sources":["webpack:///./bundles/white-label sync .*\\.tpl\\.html$","webpack:///./bundles/white-label sync \\..+\\/.+\\.js$","webpack:///./bundles/white-label/index.js","webpack:///./bundles/white-label/services/google-fonts.service.js","webpack:///./bundles/white-label/services/white-label-image-list.service.js","webpack:///./bundles/white-label/services/white-label-image-meta.service.js","webpack:///./bundles/white-label/services/white-label-vars-list.service.js","webpack:///./bundles/white-label/services/white-label-vars.service.js","webpack:///./bundles/white-label/settings/ng-validate-font.directive.js","webpack:///./bundles/white-label/settings/white-label-fonts.directive.js","webpack:///./bundles/white-label/settings/white-label-fonts.tpl.html","webpack:///./bundles/white-label/settings/white-label-images.directive.js","webpack:///./bundles/white-label/settings/white-label-images.tpl.html","webpack:///./bundles/white-label/settings/white-label-links.directive.js","webpack:///./bundles/white-label/settings/white-label-links.tpl.html","webpack:///./bundles/white-label/settings/white-label-settings.controller.js","webpack:///./bundles/white-label/settings/white-label-settings.scss?2d42","webpack:///./bundles/white-label/settings/white-label-settings.tpl.html","webpack:///./shared/dw-modal/dw-modal.directive.js","webpack:///./shared/dw-modal/dw-modal.tpl.html","webpack:///./shared/edit-image/edit-image.controller.js","webpack:///./shared/edit-image/edit-image.scss?7a5b","webpack:///./shared/edit-image/edit-image.service.js","webpack:///./shared/edit-image/edit-image.tpl.html","webpack:///./shared/edit-image/ff-crop.directive.js","webpack:///./shared/ff-color/ff-color.directive.js","webpack:///./shared/ff-color/ff-color.scss?8b8d","webpack:///./shared/reports/services/logo.service.js"],"names":["index","$injector","importAll","r","js","require","loadNewModules","m","default","name","invoke","$templateCache","ctx","forEach","key","put","replace","angular","module","factory","$resource","deskworksConfig","res","get","method","withCredentials","family","$promise","id","_name","_hint","url","style","maxHeight","maxWidth","width","backgroundColor","img","getApiAbsUrl","$timeout","Upload","update","imageId","save","data","upload","file","type","min","max","vars","extend","GoogleFonts","directive","$q","restrict","scope","link","$scope","$element","$attrs","ngModel","$asyncValidators","font","modelValue","viewValue","when","ngValidateFontDirective","template","controller","bindToController","$ctrl","editImage","WhiteLabelImageMeta","whiteLabelImageList","logo","dwAlerts","$onInit","images","copy","image","load","then","result","refreshImage","catch","err","error","uploadImage","$files","$invalidFiles","length","$translate","instant","$$spin","finally","now","Date","split","document","querySelectorAll","src","href","resetSiteLogo","resetSiteLogoInv","WhiteLabelLinks","$rootScope","helper","autoSave","links","saveLinks","wrap","pointFirstInvalid","spinLinks","wlLinks","uploadTermsOfService","spinTOS","tosLinkUrl","termsOfService","uploadReservationAgreement","spinRA","reservationAgreementLinkUrl","reservationAgreement","ffColor","WhiteLabelVars","whiteLabelVarsList","whiteLabelImagesDirective","whiteLabelLinksDirective","whiteLabelFontsDirective","state","whitelabel","setPageTitle","onInit","v","value","deserializeValue","initialVars","$watchCollection","onVarsChange","newVals","oldVals","val","idx","serializeValue","setProperty","querySelector","addFontLink","isDefined","form","$setDirty","fontName","element","head","appendChild","isTypeNumber","$setPristine","reset","getProperty","parseInt","isUndefined","transclude","compile","tElement","addClass","ffCrop","close","initialCrop","crop","isPristine","equals","EditImageCtrl","dwModal","dwModalDirective","inputs","show","modal","jcrop","unwatch","$watch","options","getAttribute","ffSrc","Jcrop","$apply","attach","x","y","w","h","dx","naturalWidth","dy","height","naturalHeight","rect","Rect","create","active","render","newWidget","listen","widget","pos","normalize","round","$on","removeWidget","destroy","ffModel","ownUpdate","picker","Picker","parent","editor","color","onChange","rgbaString","css","setColor","logoUrl","$window","$http","siteLogoPromise","siteLogoInvPromise","getSiteLogo","loadLogo","getSiteLogoInv","loadLogoInv","resolve","Image","crossOrigin","onerror","console","warn","onload","convertLogo","dw","dh","scaleFactor","Math","canvas","createElement","body","getContext","drawImage","toDataURL","removeChild"],"mappings":"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","file":"white-label~._b.js?_rev=a3c69df953f86cf31ac8","sourcesContent":["var map = {\n\t\"./settings/white-label-fonts.tpl.html\": \"./bundles/white-label/settings/white-label-fonts.tpl.html\",\n\t\"./settings/white-label-images.tpl.html\": \"./bundles/white-label/settings/white-label-images.tpl.html\",\n\t\"./settings/white-label-links.tpl.html\": \"./bundles/white-label/settings/white-label-links.tpl.html\",\n\t\"./settings/white-label-settings.tpl.html\": \"./bundles/white-label/settings/white-label-settings.tpl.html\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/white-label sync recursive .*\\\\.tpl\\\\.html$\";","var map = {\n\t\"./services/google-fonts.service.js\": \"./bundles/white-label/services/google-fonts.service.js\",\n\t\"./services/white-label-image-list.service.js\": \"./bundles/white-label/services/white-label-image-list.service.js\",\n\t\"./services/white-label-image-meta.service.js\": \"./bundles/white-label/services/white-label-image-meta.service.js\",\n\t\"./services/white-label-vars-list.service.js\": \"./bundles/white-label/services/white-label-vars-list.service.js\",\n\t\"./services/white-label-vars.service.js\": \"./bundles/white-label/services/white-label-vars.service.js\",\n\t\"./settings/ng-validate-font.directive.js\": \"./bundles/white-label/settings/ng-validate-font.directive.js\",\n\t\"./settings/white-label-fonts.directive.js\": \"./bundles/white-label/settings/white-label-fonts.directive.js\",\n\t\"./settings/white-label-images.directive.js\": \"./bundles/white-label/settings/white-label-images.directive.js\",\n\t\"./settings/white-label-links.directive.js\": \"./bundles/white-label/settings/white-label-links.directive.js\",\n\t\"./settings/white-label-settings.controller.js\": \"./bundles/white-label/settings/white-label-settings.controller.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/white-label sync recursive \\\\..+\\\\/.+\\\\.js$\";","const index = ['$injector', function index($injector) {\n  // JS\n  const importAll = r => r.keys().map(r);\n  const js = importAll(require.context('./', true, /\\..+\\/.+\\.js$/));\n  $injector.loadNewModules(js.map(m => m.default.name));\n\n  // Templates\n  $injector.invoke(['$templateCache', function($templateCache) {\n    const ctx = require.context('./', true, /.*\\.tpl\\.html$/);\n    ctx.keys().forEach(key => $templateCache.put(key.replace(/^\\.\\//, ''), ctx(key)));\n  }]);\n}];\n\nexport default index;\n","export default angular.module('deskworks.GoogleFonts', [\n  'ngResource',\n  'deskworks.config',\n])\n\n  .factory('GoogleFonts', function($resource, deskworksConfig) {\n    const res = $resource('https://fonts.googleapis.com/css2', {}, {\n      get: { method: 'GET', withCredentials: false },\n    });\n\n    return {\n      get: ({ family }) => res.get({ family }).$promise,\n    };\n  });\n","export default angular.module('deskworks.whiteLabelImageList', [\n  'deskworks.config',\n])\n\n  .factory('whiteLabelImageList', function(deskworksConfig) {\n    return [\n      {\n        id: 'logo', _name: 'WHITE_LABEL_SETTINGS.LOGO', _hint: 'WHITE_LABEL_SETTINGS.LOGO.HINT',\n        url: 'logo.png', style: { maxHeight: '130px', maxWidth: '200px', width: 'auto', backgroundColor: 'var(--logo-bg-color)' },\n      },\n      {\n        id: 'logo-print', _name: 'WHITE_LABEL_SETTINGS.LOGO_PRINT', _hint: 'WHITE_LABEL_SETTINGS.LOGO_PRINT.HINT',\n        url: 'logo-print.png', style: { maxHeight: '130px', maxWidth: '200px', width: 'auto' },\n      },\n      {\n        id: 'icon', _name: 'WHITE_LABEL_SETTINGS.ICON', _hint: 'WHITE_LABEL_SETTINGS.ICON.HINT',\n        url: 'icon-512x512.png', style: { maxHeight: '130px', maxWidth: '130px', width: 'auto' },\n      },\n      {\n        id: 'banner', _name: 'WHITE_LABEL_SETTINGS.BANNER', _hint: 'WHITE_LABEL_SETTINGS.BANNER.HINT',\n        url: 'banner.jpg', style: { maxHeight: '130px', width: 'auto' },\n      },\n    ]\n      .map(img => {\n        img.url = deskworksConfig.getApiAbsUrl(`/white-label/images/${img.url}`);\n        return img;\n      });\n  });\n","export default angular.module('deskworks.WhiteLabelImageMeta', [\n  'ngResource',\n  'deskworks.config',\n])\n\n  .factory('WhiteLabelImageMeta', function($resource, $timeout, deskworksConfig, Upload) {\n    const res = $resource(deskworksConfig.getApiAbsUrl('/white-label/image-meta/:imageId'), {}, {\n      update: { method: 'PUT' },\n    });\n\n    return {\n      get: imageId => res.get({ imageId }).$promise,\n      save: (imageId, data) => res.update({ imageId }, data).$promise,\n      upload: (imageId, file) => Upload.upload({\n        url: deskworksConfig.getApiAbsUrl(`/white-label/image-meta/${imageId}`),\n        method: 'PUT',\n        withCredentials: true,\n        data: { file },\n      }),\n    };\n  });\n","export default angular.module('deskworks.whiteLabelVarsList', [])\n\n  .factory('whiteLabelVarsList', function() {\n    return [\n      { id: 'brand-color', _name: 'WHITE_LABEL_SETTINGS.BRAND_COLOR', type: 'color' },\n      { id: 'header-bg-color', _name: 'WHITE_LABEL_SETTINGS.HEADER_BG_COLOR', type: 'color' },\n      { id: 'logo-bg-color', _name: 'WHITE_LABEL_SETTINGS.LOGO_BG_COLOR', type: 'color' },\n      { id: 'sidebar-bg-color', _name: 'WHITE_LABEL_SETTINGS.SIDEBAR_BG_COLOR', type: 'color' },\n      { id: 'sidebar-color', _name: 'WHITE_LABEL_SETTINGS.SIDEBAR_COLOR', type: 'color' },\n\n      { id: 'panel-border-radius', _name: 'WHITE_LABEL_SETTINGS.PANEL_BORDER_RADIUS', type: 'px', min: 0, max: 30 },\n      { id: 'btn-border-radius', _name: 'WHITE_LABEL_SETTINGS.BTN_BORDER_RADIUS', type: 'px', min: 0, max: 30 },\n      { id: 'panel-shadow-radius', _name: 'WHITE_LABEL_SETTINGS.PANEL_SHADOW_RADIUS', type: 'px', min: 0, max: 30 },\n      { id: 'panel-shadow-opacity', _name: 'WHITE_LABEL_SETTINGS.PANEL_SHADOW_OPACITY', type: '%', min: 0, max: 100 },\n\n      { id: 'elastic-banner', _name: 'WHITE_LABEL_SETTINGS.ELASTIC_BANNER', _hint: 'WHITE_LABEL_SETTINGS.ELASTIC_BANNER.HINT', type: 'bool' },\n\n      { id: 'font-name-major', _name: 'WHITE_LABEL_SETTINGS.FONTS.MAJOR', _hint: 'WHITE_LABEL_SETTINGS.FONTS.MAJOR.HINT', type: 'font', default: 'Optima' },\n      { id: 'font-name-minor', _name: 'WHITE_LABEL_SETTINGS.FONTS.MINOR', _hint: 'WHITE_LABEL_SETTINGS.FONTS.MINOR.HINT', type: 'font', default: 'Lato' },\n    ];\n  });\n","export default angular.module('deskworks.WhiteLabelVars', [\n  'ngResource',\n  'deskworks.config',\n])\n\n  .factory('WhiteLabelVars', function($resource, deskworksConfig) {\n    const res = $resource(deskworksConfig.getApiAbsUrl('/white-label/vars'), {}, {\n      update: { method: 'PUT' },\n    });\n\n    return {\n      get: () => res.get().$promise,\n      save: vars => res.update({}, angular.extend({ 'dynamic-white-label': 1 }, vars)).$promise,\n    };\n  });\n","import GoogleFonts from \"../services/google-fonts.service\";\n\nexport default angular.module('deskworks.ngValidateFontDirective', [\n  GoogleFonts.name,\n])\n\n  .directive('ngValidateFont', ($q, GoogleFonts) => {\n    return {\n      restrict: 'A',\n      scope: true,\n      require: 'ngModel',\n      link: ($scope, $element, $attrs, ngModel) => {\n\n        ngModel.$asyncValidators.font = (modelValue, viewValue) => {\n          if (viewValue === 'Optima') return $q.when(); // local font\n          return GoogleFonts.get({ family: viewValue });\n        };\n      },\n    };\n  });\n","import template from './white-label-fonts.tpl.html';\nimport ngValidateFontDirective from \"./ng-validate-font.directive\";\n\nexport default angular.module('deskworks.whiteLabelFontsDirective', [\n  ngValidateFontDirective.name,\n])\n\n  .directive('whiteLabelFonts', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'WhiteLabelFontsCtrl as $ctrl',\n      bindToController: {\n        vars: '<',\n      },\n    };\n  })\n\n  .controller('WhiteLabelFontsCtrl', function() {\n    const $ctrl = this;\n\n    // $ctrl.$onInit = () => {};\n  });\n","// Module\nvar code = \"<ff-panel> <ff-panel-header> <span translate=\\\"WHITE_LABEL_SETTINGS.FONTS.HEADER\\\"></span> <ff-hint><span translate=\\\"WHITE_LABEL_SETTINGS.FONTS.HINT\\\"></span></ff-hint> </ff-panel-header> <label class=\\\"ff-row\\\" ng-repeat=\\\"v in $ctrl.vars | filter:{ type: 'font' }\\\"> <ff-label flex=\\\"0 1 120px\\\"> <span> <req translate=\\\"{{v._name}}\\\"></req> <ff-hint ng-if=\\\"v._hint\\\"><span translate=\\\"{{v._hint}}\\\"></span></ff-hint> </span> </ff-label> <ff-text name=\\\"{{v.id}}\\\" ff-model=\\\"v.value\\\" ff-required=\\\"true\\\" ff-validate-font ff-validate-alert=\\\"{{v._name | translate}}\\\"></ff-text> </label> </ff-panel> \";\n// Exports\nmodule.exports = code;","import template from './white-label-images.tpl.html';\nimport WhiteLabelImageMeta from '../services/white-label-image-meta.service';\nimport whiteLabelImageList from '../services/white-label-image-list.service';\nimport editImage from 'shared/edit-image/edit-image.service';\nimport logo from 'shared/reports/services/logo.service';\n\nexport default angular.module('deskworks.whiteLabelImagesDirective', [\n  editImage.name,\n  WhiteLabelImageMeta.name,\n  whiteLabelImageList.name,\n  logo.name,\n])\n\n  .directive('whiteLabelImages', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'WhiteLabelImagesCtrl as $ctrl',\n    };\n  })\n\n  .controller('WhiteLabelImagesCtrl', function($scope, dwAlerts, editImage, WhiteLabelImageMeta, whiteLabelImageList, logo) {\n    const $ctrl = this;\n\n    $ctrl.$onInit = () => {\n      $ctrl.images = angular.copy(whiteLabelImageList);\n    };\n\n    /**\n     * Edit image\n     */\n    $ctrl.editImage = image => {\n      return editImage($scope, { load, save, style: image.id === 'logo' ? { backgroundColor: 'var(--logo-bg-color)' } : null })\n        .then(result => {\n          if (!result) return;\n          refreshImage(image);\n        });\n\n      function load() {\n        return WhiteLabelImageMeta.get(image.id)\n          .catch(err => dwAlerts.error(err, `Failed to get ${image.id} image meta`))\n      }\n\n      function save(data) {\n        return WhiteLabelImageMeta.save(image.id, data)\n          .catch(err => dwAlerts.error(err, `Failed to save ${image.id} image meta`))\n      }\n    };\n\n    /**\n     * Upload image\n     */\n    $ctrl.uploadImage = (img, $files, $invalidFiles) => {\n      if ($invalidFiles && $invalidFiles.length) return dwAlerts.error($translate.instant('GLOBAL.INVALID_IMAGE_FORMAT'));\n      if (!$files || !$files.length) return;\n\n      img.$$spin = true;\n      return WhiteLabelImageMeta.upload(img.id, $files[0])\n        .finally(() => { img.$$spin = false; })\n        .catch(err => dwAlerts.error(err, `Failed to upload ${img.id} image.`))\n        .then(result => {\n          refreshImage(img);\n          return result.data;\n        });\n    };\n\n    /**\n     * Refresh image\n     */\n    function refreshImage(img) {\n      const now = Date.now();\n      img.url = img.url.split('?')[0] + '?' + now; // refresh image\n\n      document.querySelectorAll('.white-label-prefix')\n        .forEach(img => {\n          if (img.src) img.src = img.src.split('?')[0] + '?' + now; // refresh image\n          if (img.href) img.href = img.href.split('?')[0] + '?' + now; // refresh image\n        });\n\n      logo.resetSiteLogo();\n      logo.resetSiteLogoInv();\n    }\n  });\n","// Module\nvar code = \"<div class=\\\"ff-grid gutter-v gutter-h\\\"> <ff-panel flex=\\\"{md: '0 0 50%'}\\\" ng-repeat=\\\"img in $ctrl.images\\\" class=\\\"wl-image-panel\\\" ngf-drop=\\\"$ctrl.uploadImage(img, $files, $invalidFiles)\\\" ngf-pattern=\\\"'image/png,image/jpeg'\\\" ngf-drag-over-class=\\\"dragover\\\"> <ff-panel-header> <span translate=\\\"{{img._name}}\\\"></span> <ff-hint><span translate=\\\"{{img._hint}}\\\"></span></ff-hint> </ff-panel-header> <ff-img ff-src=\\\"{{img.url}}\\\" ff-style=\\\"{{img.style}}\\\" ff-alt=\\\"{{img._name | translate}}\\\"></ff-img> <ff-btn-group class=\\\"ff-section-buttons\\\"> <ff-btn sense=\\\"crop\\\" size=\\\"sm\\\" ff-click=\\\"$ctrl.editImage(img)\\\"><span translate=\\\"GLOBAL.BTN_CROP\\\"></span></ff-btn> <ff-btn sense=\\\"upload\\\" size=\\\"sm\\\" ff-spin=\\\"img.$$spin\\\" ngf-select=\\\"$ctrl.uploadImage(img, $files, $invalidFiles)\\\" ngf-pattern=\\\"'image/png,image/jpeg'\\\" accept=\\\"image/png,image/jpeg\\\"><span translate=\\\"GLOBAL.BTN_UPLOAD\\\"></span></ff-btn> </ff-btn-group> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","import template from './white-label-links.tpl.html';\nimport WhiteLabelLinks from \"../../../common/services/setup/white-label-links.service\";\n\nexport default angular.module('deskworks.whiteLabelLinksDirective', [\n  'autoSave',\n  WhiteLabelLinks.name,\n])\n\n  .directive('whiteLabelLinks', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'WhiteLabelLinksCtrl as $ctrl',\n    };\n  })\n\n  .controller('WhiteLabelLinksCtrl', function($scope, $rootScope, dwAlerts, helper, WhiteLabelLinks, autoSave) {\n    const $ctrl = this;\n\n    $ctrl.$onInit = () => {\n      WhiteLabelLinks.get()\n        .then(links => { $ctrl.links = links; });\n    };\n\n    /**\n     * Save links handler\n     */\n    $ctrl.saveLinks = autoSave.wrap(saveLinks);\n    function saveLinks() {\n      if (helper.pointFirstInvalid('#wlLinks') || !$ctrl.links) return;\n\n      $ctrl.spinLinks = true;\n      return WhiteLabelLinks.save($ctrl.links)\n        .then(() => { $rootScope.wlLinks = $ctrl.links; }) // update current links\n        .catch(err => dwAlerts.error(err, 'Failed to save white label links.'))\n        .finally(() => { $ctrl.spinLinks = false; });\n    }\n\n    /**\n     * Upload Terms Of Service handler\n     * @param $files - files to upload\n     * @param $invalidFiles - files rejected by ngfPattern directive\n     */\n    $ctrl.uploadTermsOfService = ($files, $invalidFiles) => {\n      if ($invalidFiles && $invalidFiles.length > 0)\n        return dwAlerts.error($translate.instant('WHITE_LABEL_SETTINGS.INVALID_FORMAT_PDF'));\n\n      if ($files && $files.length > 0) {\n        $ctrl.spinTOS = true;\n\n        return WhiteLabelLinks.uploadTermsOfService($files[0])\n          .catch(err => dwAlerts.error(err, 'Failed to upload terms of service.'))\n          .then(result => {\n            $ctrl.links.tosLinkUrl = result.data.termsOfService;\n            return WhiteLabelLinks.save($ctrl.links)\n              .catch(err => dwAlerts.error(err, 'Failed to save link to uploaded terms of service'));\n          })\n          .finally(() => { $ctrl.spinTOS = false; });\n      }\n    };\n\n    /**\n     * Upload Reservation Agreement handler\n     * @param $files - files to upload\n     * @param $invalidFiles - files rejected by ngfPattern directive\n     */\n    $ctrl.uploadReservationAgreement = ($files, $invalidFiles) => {\n      if ($invalidFiles && $invalidFiles.length > 0)\n        return dwAlerts.error($translate.instant('WHITE_LABEL_SETTINGS.INVALID_FORMAT_PDF'));\n\n      if ($files && $files.length > 0) {\n        $ctrl.spinRA = true;\n\n        return WhiteLabelLinks.uploadReservationAgreement($files[0])\n          .catch(err => dwAlerts.error(err, 'Failed to upload reservation agreement.'))\n          .then(result => {\n            $ctrl.links.reservationAgreementLinkUrl = result.data.reservationAgreement;\n            return WhiteLabelLinks.save($ctrl.links)\n              .catch(err => dwAlerts.error(err, 'Failed to save link to uploaded reservation agreement'));\n          })\n          .finally(() => { $ctrl.spinRA = false; });\n      }\n    };\n  });\n","// Module\nvar code = \"<form novalidate ff-bulk-read-only id=\\\"wlLinks\\\" ff-dim=\\\"!$ctrl.links\\\"> <ff-panel> <ff-panel-header class=\\\"ff-spin-right\\\"><span translate=\\\"WHITE_LABEL_SETTINGS.LINKS\\\"></span></ff-panel-header> <ff-spin ng-if=\\\"$ctrl.spinLinks\\\"></ff-spin> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"{xs: '0 0 120px', sm: '0 0 250px'}\\\"><req translate=\\\"WHITE_LABEL_SETTINGS.COMPANY_NAME\\\"></req></ff-label> <ff-text flex=\\\"8 1 200px\\\" name=\\\"companyName\\\" ff-model=\\\"$ctrl.links.companyName\\\" ff-change=\\\"$ctrl.saveLinks()\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'WHITE_LABEL_SETTINGS.COMPANY_NAME' | translate}}\\\" placeholder=\\\"The Satellite Centers\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"{xs: '0 0 120px', sm: '0 0 250px'}\\\"><req translate=\\\"WHITE_LABEL_SETTINGS.HOMEPAGE_URL\\\"></req></ff-label> <ff-url flex=\\\"8 1 200px\\\" name=\\\"homepageUrl\\\" ff-model=\\\"$ctrl.links.homepageUrl\\\" ff-change=\\\"$ctrl.saveLinks()\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'WHITE_LABEL_SETTINGS.HOMEPAGE_URL' | translate}}\\\" placeholder=\\\"http://thesatellitecenters.com/\\\"></ff-url> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"{xs: '0 0 120px', sm: '0 0 250px'}\\\"> <span> <span translate=\\\"WHITE_LABEL_SETTINGS.MEMBER_DIRECTORY_URL\\\"></span> <ff-hint><span translate=\\\"WHITE_LABEL_SETTINGS.MEMBER_DIRECTORY_URL.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-url flex=\\\"8 1 200px\\\" name=\\\"memberDirectoryUrl\\\" ff-model=\\\"$ctrl.links.memberDirectoryUrl\\\" ff-change=\\\"$ctrl.saveLinks()\\\" ff-validate-alert=\\\"{{'WHITE_LABEL_SETTINGS.MEMBER_DIRECTORY_URL' | translate}}\\\" placeholder=\\\"https://the_satellite.townsqua.re/apply\\\"></ff-url> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"{xs: '0 0 120px', sm: '0 0 250px'}\\\"> <span> <req translate=\\\"WHITE_LABEL_SETTINGS.CONTACT_URL\\\"></req> <ff-hint><span translate=\\\"WHITE_LABEL_SETTINGS.CONTACT_URL.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-url flex=\\\"8 1 200px\\\" name=\\\"contactLinkUrl\\\" ff-model=\\\"$ctrl.links.contactLinkUrl\\\" ff-change=\\\"$ctrl.saveLinks()\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'WHITE_LABEL_SETTINGS.CONTACT_URL' | translate}}\\\" placeholder=\\\"http://thesatellitecenters.com/contact/\\\"></ff-url> </label> <ff-row> <label flex=\\\"auto\\\"> <ff-label flex=\\\"{xs: '0 0 120px', sm: '0 0 250px'}\\\"> <span> <req translate=\\\"WHITE_LABEL_SETTINGS.TERMS_OF_SERVICE_URL\\\"></req> <ff-hint><span translate=\\\"WHITE_LABEL_SETTINGS.TERMS_OF_SERVICE_URL.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-url flex=\\\"8 1 148px\\\" name=\\\"tosLinkUrl\\\" ff-model=\\\"$ctrl.links.tosLinkUrl\\\" ff-change=\\\"$ctrl.saveLinks()\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'WHITE_LABEL_SETTINGS.TERMS_OF_SERVICE_URL' | translate}}\\\" placeholder=\\\"http://thesatellitecenters.com/terms-of-service/\\\"></ff-url> </label> <ff-btn-group flex=\\\"none\\\"> <ff-btn sense=\\\"upload\\\" size=\\\"sm\\\" ngf-select=\\\"$ctrl.uploadTermsOfService($files, $invalidFiles)\\\" ngf-pattern=\\\"'application/pdf'\\\" accept=\\\"application/pdf\\\" ff-spin=\\\"$ctrl.spinTOS\\\" title=\\\"{{'WHITE_LABEL_SETTINGS.BTN_UPLOAD_TERMS_OF_SERVICE.HINT' | translate}}\\\">PDF</ff-btn> </ff-btn-group> </ff-row> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"{xs: '0 0 120px', sm: '0 0 250px'}\\\"> <span> <req translate=\\\"WHITE_LABEL_SETTINGS.TERMS_OF_SERVICE_TEXT\\\"></req> <ff-hint><span translate=\\\"WHITE_LABEL_SETTINGS.TERMS_OF_SERVICE_URL.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-text flex=\\\"8 1 200px\\\" name=\\\"tosLinkText\\\" ff-model=\\\"$ctrl.links.tosLinkText\\\" ff-change=\\\"$ctrl.saveLinks()\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'WHITE_LABEL_SETTINGS.TERMS_OF_SERVICE_TEXT' | translate}}\\\" placeholder=\\\"The Satellites Terms and Conditions\\\"></ff-text> </label> <ff-row> <label flex=\\\"auto\\\"> <ff-label flex=\\\"{xs: '0 0 120px', sm: '0 0 250px'}\\\"> <span> <span translate=\\\"WHITE_LABEL_SETTINGS.RESERVATION_AGREEMENT_URL\\\"></span> <ff-hint><span translate=\\\"WHITE_LABEL_SETTINGS.RESERVATION_AGREEMENT_URL.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-url flex=\\\"8 1 148px\\\" name=\\\"reservationAgreementLinkUrl\\\" ff-model=\\\"$ctrl.links.reservationAgreementLinkUrl\\\" ff-change=\\\"$ctrl.saveLinks()\\\" ff-validate-alert=\\\"{{'WHITE_LABEL_SETTINGS.RESERVATION_AGREEMENT_URL' | translate}}\\\" placeholder=\\\"http://thesatellitecenters.com/reservation-agreement/\\\"></ff-url> </label> <ff-btn-group flex=\\\"none\\\"> <ff-btn sense=\\\"upload\\\" size=\\\"sm\\\" ngf-select=\\\"$ctrl.uploadReservationAgreement($files, $invalidFiles)\\\" ngf-pattern=\\\"'application/pdf'\\\" accept=\\\"application/pdf\\\" ff-spin=\\\"$ctrl.spinRA\\\" title=\\\"{{'WHITE_LABEL_SETTINGS.BTN_UPLOAD_RESERVATION_AGREEMENT.HINT' | translate}}\\\">PDF</ff-btn> </ff-btn-group> </ff-row> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"{xs: '0 0 120px', sm: '0 0 250px'}\\\"> <span> <span translate=\\\"WHITE_LABEL_SETTINGS.RESERVATION_AGREEMENT_TEXT\\\"></span> <ff-hint><span translate=\\\"WHITE_LABEL_SETTINGS.RESERVATION_AGREEMENT_URL.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-text flex=\\\"8 1 200px\\\" name=\\\"reservationAgreementLinkText\\\" ff-model=\\\"$ctrl.links.reservationAgreementLinkText\\\" ff-change=\\\"$ctrl.saveLinks()\\\" ff-validate-alert=\\\"{{'WHITE_LABEL_SETTINGS.RESERVATION_AGREEMENT_TEXT' | translate}}\\\" placeholder=\\\"The Satellites Reservation Agreement\\\"></ff-text> </label> </ff-panel> </form> \";\n// Exports\nmodule.exports = code;","import ffColor from 'shared/ff-color/ff-color.directive';\nimport WhiteLabelVars from '../services/white-label-vars.service';\nimport whiteLabelVarsList from '../services/white-label-vars-list.service';\nimport whiteLabelImagesDirective from './white-label-images.directive';\nimport whiteLabelLinksDirective from './white-label-links.directive';\nimport whiteLabelFontsDirective from './white-label-fonts.directive';\nimport './white-label-settings.scss';\n\nexport default angular.module('deskworks.WhiteLabelSettingsCtrl', [\n  ffColor.name,\n  WhiteLabelVars.name,\n  whiteLabelVarsList.name,\n  whiteLabelImagesDirective.name,\n  whiteLabelLinksDirective.name,\n  whiteLabelFontsDirective.name,\n  'deskworks.whitelabel',\n])\n\n  .controller('WhiteLabelSettingsCtrl', function($scope, $translate, dwAlerts, state, whitelabel, helper,\n                                                 WhiteLabelVars, whiteLabelVarsList) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('WHITE_LABEL_SETTINGS.PAGE_TITLE'));\n\n    /**\n     * onInit\n     */\n    (function onInit() {\n      $ctrl.vars = angular.copy(whiteLabelVarsList);\n      $ctrl.vars.forEach(v => {\n        v.value = deserializeValue(v, null); // init with empty values\n      });\n\n      WhiteLabelVars.get()\n        .catch(err => dwAlerts.error(err, 'Failed to get white label vars'))\n        .then(vars => {\n          $ctrl.initialVars = {};\n          $ctrl.vars.forEach(v => {\n            v.value = deserializeValue(v, vars[v.id]); // re-init with values\n            $ctrl.initialVars[v.id] = v.value;\n          });\n        });\n\n      $scope.$watchCollection(() => $ctrl.vars.map(v => v.value), onVarsChange);\n    })();\n\n    /**\n     * onVarsChange\n     */\n    function onVarsChange(newVals, oldVals) {\n      newVals.forEach((val, idx) => {\n        const v = $ctrl.vars[idx];\n        const value = serializeValue(v);\n        whitelabel.setProperty(`--${v.id}`, value);\n        if (v.type === 'font' && value !== 'Optima' && !document.querySelector(`link[font-name=\"${value}\"]`)) {\n          addFontLink(value); // add link element for this font\n        }\n        if (val !== oldVals[idx] && angular.isDefined(oldVals[idx]) && $ctrl.initialVars && val !== $ctrl.initialVars[v.id]) {\n          $ctrl.form.$setDirty();\n        }\n      });\n    }\n\n    /**\n     * Add link element for new font\n     * @param fontName\n     */\n    function addFontLink(fontName) {\n      if (fontName === 'Optima') return;\n      const link = angular.element(`<link rel=\"stylesheet\" font-name=\"${fontName}\">`);\n      link[0].href = `https://fonts.googleapis.com/css2?family=${fontName}:wght@300;400;700`;\n      document.head.appendChild(link[0]);\n    }\n\n    /**\n     * Type comparator for filtering numbers\n     * @param v - variable\n     * @returns {boolean}\n     */\n    $ctrl.isTypeNumber = (v) => v.type === 'px' || v.type === '%';\n\n    /**\n     * Save\n     */\n    $ctrl.save = () => {\n      if (helper.pointFirstInvalid('#whiteLabelSetup')) return;\n      const data = {};\n      $ctrl.vars.forEach(v => {\n        data[v.id] = serializeValue(v);\n      });\n\n      return WhiteLabelVars.save(data)\n        .catch(err => dwAlerts.error(err, 'Failed to save white-label vars'))\n        .then(() => {\n          $ctrl.initialVars = {};\n          $ctrl.vars.forEach(v => { $ctrl.initialVars[v.id] = v.value; });\n          $ctrl.form.$setPristine();\n        });\n    };\n\n    /**\n     * Reset\n     */\n    $ctrl.reset = () => {\n      $ctrl.vars.forEach(v => {\n        v.value = $ctrl.initialVars[v.id];\n      });\n      $ctrl.form.$setPristine();\n    };\n\n    /**\n     * Deserialize value\n     */\n    function deserializeValue(v, value) {\n      value = value || whitelabel.getProperty(`--${v.id}`);\n      if (v.type === 'px') return parseInt(value);\n      if (v.type === '%') return parseInt(value);\n      if (v.type === 'bool') return value === 'true';\n      return value;\n    }\n\n    /**\n     * Serialize value\n     */\n    function serializeValue(v, value) {\n      value = angular.isDefined(value) ? value : v.value;\n      if (angular.isDefined(v.default) && (angular.isUndefined(value) || value === null)) value = v.default;\n      if (v.type === 'px') return `${value}px`;\n      if (v.type === '%') return `${value}%`;\n      if (v.type === 'bool') return `${value}`;\n      return value;\n    }\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div id=\\\"whiteLabelSetup\\\"> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <form name=\\\"$ctrl.form\\\" novalidate ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-h gutter-v\\\"> <ff-panel flex=\\\"{md: '0 0 50%'}\\\"> <ff-panel-header><span translate=\\\"WHITE_LABEL_SETTINGS.COLORS.HEADER\\\"></span></ff-panel-header> <label class=\\\"ff-row\\\" ng-repeat=\\\"v in $ctrl.vars | filter:{ type: 'color' }\\\"> <ff-label><span translate=\\\"{{v._name}}\\\"></span></ff-label> <ff-color name=\\\"{{v.id}}\\\" ff-model=\\\"v.value\\\"></ff-color> </label> </ff-panel> <ff-panel flex=\\\"{md: '0 0 50%'}\\\"> <ff-panel-header><span translate=\\\"WHITE_LABEL_SETTINGS.OTHER.HEADER\\\"></span></ff-panel-header> <ff-row ng-repeat=\\\"v in $ctrl.vars | filter: $ctrl.isTypeNumber\\\"> <ff-label flex=\\\"1 1 200px\\\"><req translate=\\\"{{v._name}}\\\"></req></ff-label> <ff-static flex=\\\"5 1 100px\\\"> <input type=\\\"range\\\" ng-model=\\\"v.value\\\" min=\\\"{{v.min}}\\\" max=\\\"{{v.max}}\\\" style=\\\"width:100%\\\"> </ff-static> <ff-number flex=\\\"0 0 36px\\\" name=\\\"{{v.id}}\\\" class=\\\"ff-right\\\" ff-model=\\\"v.value\\\" ff-gte=\\\"{{v.min}}\\\" ff-lte=\\\"{{v.max}}\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{v._name | translate}}\\\"></ff-number> </ff-row> <ff-static ng-repeat=\\\"v in $ctrl.vars | filter:{ type: 'bool' }\\\"> <label> <ff-checkbox name=\\\"{{v.id}}\\\" ff-model=\\\"v.value\\\"><span translate=\\\"{{v._name}}\\\"></span></ff-checkbox> </label> &nbsp; <ff-hint ng-if=\\\"v._hint\\\"><span translate=\\\"{{v._hint}}\\\"></span></ff-hint> </ff-static> </ff-panel> <white-label-fonts flex=\\\"{md: '0 0 50%'}\\\" vars=\\\"$ctrl.vars\\\"></white-label-fonts> <ff-btn-group> <ff-btn sense=\\\"reset\\\" ff-click=\\\"$ctrl.reset()\\\" ff-disabled=\\\"$ctrl.form.$pristine\\\"><span translate=\\\"GLOBAL.BTN_RESET\\\"></span></ff-btn> <ff-btn sense=\\\"save\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.save()\\\" ff-disabled=\\\"$ctrl.form.$pristine\\\"><span translate=\\\"GLOBAL.BTN_SAVE\\\"></span></ff-btn> </ff-btn-group> </div> </form> <white-label-links></white-label-links> <white-label-images></white-label-images> </div> </div> \";\n// Exports\nmodule.exports = code;","import template from './dw-modal.tpl.html';\nimport './dw-modal.scss';\n\n/**\n * dwModal directive\n */\nexport default angular.module('dwModal.directive', [])\n\n  .directive('dwModal', function() {\n    return {\n      template,\n      restrict: 'EA',\n      transclude: true,\n\n      compile: (tElement) => {\n        tElement.addClass('dw-modal');\n        return () => { /* link */ };\n      },\n    };\n  });\n","// Module\nvar code = \"<div class=\\\"dw-modal-fade\\\" ng-click=\\\"close()\\\"></div> <div class=\\\"dw-modal-dialog\\\"> <div class=\\\"dw-modal-scroll\\\" ng-transclude></div> <button class=\\\"dw-modal-cross\\\" ng-click=\\\"close()\\\"></button> </div> \";\n// Exports\nmodule.exports = code;","import './edit-image.scss';\nimport ffCrop from './ff-crop.directive';\n\nexport default angular.module('EditImageCtrl', [ffCrop.name])\n\n  .controller('EditImageCtrl', function($scope, close, load, save, style) {\n    const $ctrl = this;\n\n    $scope.close = close;\n    $ctrl.style = style;\n\n    /**\n     * Init\n     */\n    load()\n      .then(image => {\n        $ctrl.image = image;\n        $ctrl.image.url += '?' + Date.now(); // TODO: maybe cache-busting is not necessary\n        $ctrl.initialCrop = angular.copy($ctrl.image.crop);\n      });\n\n    /**\n     * isPristine\n     */\n    $ctrl.isPristine = () => angular.equals($ctrl.initialCrop, $ctrl.image.crop);\n\n    /**\n     * Reset\n     */\n    $ctrl.reset = () => {\n      $ctrl.image.crop = angular.copy($ctrl.initialCrop);\n    };\n\n    /**\n     * Save\n     */\n    $ctrl.save = () => save($ctrl.image)\n      .then(() => {\n        $ctrl.initialCrop = angular.copy($ctrl.image.crop);\n        return close(true);\n      });\n  });\n","// extracted by extract-css-chunks-webpack-plugin","import template from './edit-image.tpl.html';\nimport EditImageCtrl from './edit-image.controller';\nimport dwModal from 'shared/dw-modal/dw-modal.service';\nimport dwModalDirective from 'shared/dw-modal/dw-modal.directive';\n\nexport default angular.module('editImage', [\n  EditImageCtrl.name,\n  dwModal.name,\n  dwModalDirective.name,\n])\n\n  .factory('editImage', dwModal => (scope, inputs) =>\n    dwModal.show({\n      template,\n      scope,\n      inputs,\n      controller: 'EditImageCtrl as $ctrl',\n    })\n      .then(modal => modal.close)\n  );\n","// Module\nvar code = \"<dw-modal> <div class=\\\"edit-image\\\" ff-dim=\\\"!$ctrl.image || !$ctrl.imageLoaded\\\"> <ff-img ff-src=\\\"{{$ctrl.image.url}}\\\" img-placeholder=\\\"800x800\\\" ff-crop=\\\"$ctrl.image\\\" ff-style=\\\"$ctrl.style\\\" ff-img-loaded=\\\"$ctrl.imageLoaded\\\" ng-if=\\\"$ctrl.image\\\" ng-show=\\\"$ctrl.imageLoaded\\\" ff-alt=\\\"Image\\\"></ff-img> <div class=\\\"ff-grid edit-image-toolbar\\\" ng-if=\\\"$ctrl.image && $ctrl.imageLoaded\\\"> <ff-row flex=\\\"0 0 170px\\\"> <ff-col flex=\\\"0 0 70px\\\" ng-if=\\\"$ctrl.image.url\\\"> <div><small>X:</small> {{$ctrl.image.crop.x}}</div> <div><small>Y:</small> {{$ctrl.image.crop.y}}</div> </ff-col> <ff-col flex=\\\"0 0 100px\\\" ng-if=\\\"$ctrl.image.url\\\"> <div><small>WIDTH:</small> {{$ctrl.image.crop.w}}</div> <div><small>HEIGHT:</small> {{$ctrl.image.crop.h}}</div> </ff-col> </ff-row> <ff-btn-group flex=\\\"auto\\\"> <ff-btn sense=\\\"reset\\\" size=\\\"sm\\\" ff-disabled=\\\"$ctrl.isPristine()\\\" ff-click=\\\"$ctrl.reset()\\\"> <span translate=\\\"GLOBAL.BTN_RESET\\\"></span> </ff-btn> <ff-btn sense=\\\"save\\\" size=\\\"sm\\\" ff-disabled=\\\"$ctrl.isPristine()\\\" ff-click=\\\"$ctrl.save()\\\"> <span translate=\\\"GLOBAL.BTN_SAVE\\\"></span> </ff-btn> </ff-btn-group> </div> </div> </dw-modal> \";\n// Exports\nmodule.exports = code;","import Jcrop from 'jcrop';\nimport 'jcrop/dist/jcrop.css';\n\nexport default angular.module('ffCrop', [])\n\n  .directive('ffCrop', function($timeout) {\n    return {\n      restrict: 'A',\n      scope: true,\n\n      link: function($scope, $element, $attrs, $ctrl) {\n        const img = $element[0].querySelector('img');\n        let jcrop;\n\n        const unwatch = $scope.$watch($attrs.ffCrop, options => {\n          if (!options) return;\n          unwatch(); // watch once\n\n          $scope.$watchCollection(() => [img.getAttribute('src'), options && options.crop], () => {\n            if (!$attrs.ffSrc) return;\n\n            Jcrop.load(img)\n              .then(() => $scope.$apply(() => $timeout(() => {\n                if (!jcrop) jcrop = Jcrop.attach($element[0], options);\n\n                let { x, y, w, h } = options.crop;\n                const dx = img.width / img.naturalWidth;\n                const dy = img.height / img.naturalHeight;\n                const rect = Jcrop.Rect.create(x * dx, y * dy, w * dx, h * dy);\n\n                if (jcrop.active) {\n                  jcrop.active.render(rect);\n                } else {\n                  jcrop.newWidget(rect);\n                  jcrop.active.listen('crop.update', (widget) => {\n                    $scope.$apply(() => {\n                      const dx = img.naturalWidth / img.width;\n                      const dy = img.naturalHeight / img.height;\n\n                      const rect = widget.pos.normalize();\n                      rect.x *= dx; rect.y *= dy;\n                      rect.w *= dx; rect.h *= dy;\n                      Object.assign(options.crop, rect.round());\n                    });\n                  });\n                }\n              }, 100)));\n          });\n\n        });\n\n        $scope.$on('$destroy', () => {\n          if (jcrop) {\n            jcrop.removeWidget(jcrop.active);\n            jcrop.active = null;\n            jcrop.destroy();\n          }\n          jcrop = null;\n        });\n      },\n    };\n  });\n","import Picker from 'vanilla-picker';\nimport './ff-color.scss';\n\n/**\n * ffColor directive - wrapper for 3rd party vanilla-picker\n */\nexport default angular.module('ffColor', [])\n\n  .directive('ffColor', function($timeout) {\n    return {\n      template: '<div></div>',\n      restrict: 'E',\n      scope: true,\n      controller: 'ffColorCtrl as $ctrl',\n      bindToController: {\n        ffModel: '=',\n      },\n\n      link: function($scope, $element, $attrs, $ctrl) {\n        let ownUpdate = false;\n\n        $element.addClass('ff-control');\n        const picker = new Picker({\n          parent: $element[0],\n          editor: true,\n          color: $ctrl.ffModel,\n          onChange: color => $timeout(() => {\n            ownUpdate = true;\n            onChange(color);\n          }),\n        });\n\n        function onChange(color) {\n          $ctrl.ffModel = color.rgbaString;\n          $element.css('color', color.rgbaString);\n        }\n\n        $scope.$watch('$ctrl.ffModel', val => {\n          if (!ownUpdate) picker.setColor(val);\n          ownUpdate = false;\n        });\n      },\n    };\n  })\n\n  .controller('ffColorCtrl', function() {});\n","// extracted by extract-css-chunks-webpack-plugin","const logoUrl = '/white-label/images/logo-print.png';\n\n/**\n * Logo service - handles logos for invoice\n */\nexport default angular.module('deskworks.logo', [])\n\n  .factory('logo', function($window, $http, $q, deskworksConfig) {\n    let siteLogoPromise, siteLogoInvPromise;\n\n    const maxWidth = 480, maxHeight = 171; // according to w = 140, h = 50 in invoice-header.service.js\n\n    return {\n      getSiteLogo: function() {\n        siteLogoPromise = siteLogoPromise || loadLogo();\n        return siteLogoPromise;\n      },\n      getSiteLogoInv: function() {\n        siteLogoInvPromise = siteLogoInvPromise || loadLogoInv();\n        return siteLogoInvPromise;\n      },\n      resetSiteLogo: function() {\n        siteLogoPromise = null;\n      },\n      resetSiteLogoInv: function() {\n        siteLogoInvPromise = null;\n      },\n    };\n\n    /**\n     * Loads non-inverted logo\n     */\n    function loadLogo() {\n      return $q(resolve => {\n        let img = new Image();\n        img.crossOrigin = 'anonymous';\n        img.src = deskworksConfig.getApiAbsUrl(logoUrl);\n\n        img.onerror = function() {\n          console.warn('Report failed to load site logo.');\n          resolve(null);\n          img = null;\n        };\n\n        img.onload = function() {\n          resolve(img);\n          img = null;\n        };\n      })\n        .then(convertLogo);\n    }\n\n    /**\n     * Loads inverted logo\n     */\n    function loadLogoInv() {\n      return $q(resolve => {\n        const img = document.querySelector('.sidebar-logo a img');\n        if (!img) console.warn('Report failed to load site logo.');\n        resolve(img);\n      })\n        .then(convertLogo);\n    }\n\n    /**\n     * Downscales logo and converts to data-url then returns { width, height, data }\n     */\n    function convertLogo(img) {\n      if (!img) return null;\n\n      const dw = img.width / maxWidth;\n      const dh = img.height / maxHeight;\n      const scaleFactor = dw > dh ? dw : dh;\n      const width = Math.round(img.width / scaleFactor);\n      const height = Math.round(img.height / scaleFactor);\n\n      const canvas = document.createElement('canvas');\n      document.body.appendChild(canvas);\n      canvas.width = width;\n      canvas.height = height;\n\n      const ctx = canvas.getContext('2d');\n\n      ctx.drawImage(img, 0, 0, width, height);\n\n      const data = canvas.toDataURL('image/png');\n      document.body.removeChild(canvas);\n\n      return { width, height, data };\n    }\n  });\n"],"sourceRoot":""}