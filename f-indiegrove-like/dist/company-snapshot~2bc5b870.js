(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"+xX7":function(t,a){t.exports='<div> <div class=ff-grid> <ff-static flex=auto> <ff-hint ng-if="$ctrl.params.selected === null"><span translate=COMPANY_SNAPSHOT.WIDGET.SALES_BY_CATEGORY.HINT></span></ff-hint> <ff-btn sense=back size=sm ng-if="$ctrl.params.selected !== null" ff-click="$ctrl.params.selected = null"> <span translate=GLOBAL.BTN_BACK></span> </ff-btn> </ff-static> <chart-period flex="0 1 auto" period=$ctrl.params.period from=$ctrl.params.from to=$ctrl.params.to></chart-period> </div> <chart config=$ctrl.chart ff-dim=$ctrl.spin></chart> </div> '},"/48J":function(t,a,e){"use strict";e.r(a);e("Ml/Z");var n=e("I5Zy"),r=e("jd5N"),o=e("iPri"),i=e("TOZU"),s=e("nZ4u");a.default=angular.module("deskworks.CompanySnapshotDashboardCtrl",["deskworks.state","session",n.a.name,r.a.name,o.default.name,i.default.name,s.default.name]).controller("CompanySnapshotDashboardCtrl",["$scope","$translate","dwAlerts","state","helper","dnd","keese","session","companySnapshotWidgetsList","CompanySnapshotDashboard",function(t,a,e,n,r,o,i,s,l,c){var d=this;n.setPageTitle(a.instant("COMPANY_SNAPSHOT.PAGE_TITLE")),d.widgetsList=l,d.widgetToAdd=d.widgetsList[0],d.onInit=function(){d.loadDefaults()},d.onDrop=function(t,a,e,n){o.move(t,a,e,n);return!0},d.addWidget=function(){d.widgets.push({uid:d.widgetToAdd.uid,order:i.generate(d.widgets.length&&d.widgets[d.widgets.length-1].order),wide:!1})},d.saveDefaults=function(){return c.save({userId:s.user.id},{widgets:d.widgets}).catch((function(t){return e.error(t,"Failed to save dashboard settings.")})).then((function(t){d.defaults=angular.copy(d.widgets)}))},d.loadDefaults=function(){return c.get({userId:s.user.id}).catch((function(t){return e.error(t,"Failed to get dashboard settings.")})).then((function(t){d.widgets=t.widgets,d.defaults=angular.copy(t.widgets)}))},d.isPristine=function(){return angular.equals(d.widgets,d.defaults)},d.onInit()}])},"/MEN":function(t,a,e){},"1gcy":function(t,a,e){"use strict";e.r(a);e("JBxO"),e("FdtR");var n=e("Tfwl"),r=e.n(n),o=e("XAgg"),i=e.n(o),s=e("yKah"),l=e.n(s),c=e("WSeP"),d=e.n(c),u=e("lvz6"),p=e.n(u),f=e("hsT8"),m=e.n(f),y=e("Ekwr"),h=e.n(y),g=e("03wM"),v=e.n(g),b=e("fzuT"),C=e.n(b),S=e("Ennu"),w=e.n(S),k=e("CLLE"),P=e("G6E5"),$=e("w8a8"),O=e("Xp5u"),x=e("CgoQ"),T=e("4oxB"),R=e("DcLO"),A=e("OOrm");function E(t,a){var e=v()(t);if(h.a){var n=h()(t);a&&(n=m()(n).call(n,(function(a){return p()(t,a).enumerable}))),e.push.apply(e,n)}return e}function M(t){for(var a=1;a<arguments.length;a++){var e,n=null!=arguments[a]?arguments[a]:{};if(a%2)d()(e=E(Object(n),!0)).call(e,(function(a){C()(t,a,n[a])}));else if(l.a)i()(t,l()(n));else{var o;d()(o=E(Object(n))).call(o,(function(a){r()(t,a,p()(n,a))}))}}return t}a.default=angular.module("deskworks.companySnapshotOverallSpaceUtilizationDirective",["debounce",k.a.name,P.a.name,O.a.name,x.a.name,$.default.name,T.default.name,R.a.name,A.a.name]).directive("companySnapshotOverallSpaceUtilization",(function(){return{template:w.a,restrict:"E",scope:!0,controller:"CompanySnapshotOverallSpaceUtilizationDirectiveCtrl as $ctrl",bindToController:{params:"<"}}})).controller("CompanySnapshotOverallSpaceUtilizationDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","CompanySnapshotOverallSpaceUtilization","companySnapshotOverallSpaceUtilizationChart","optsChartByPeriod","optsChartPeriod",function(t,a,e,n,r,o,i,s,l,c,d){var u=this,p=i.paramsChanged;u.optsByPeriod=c,u.optsPeriod=d,u.data=null,u.$onInit=function(){t.$watch("$ctrl.params",o((function(t,e){u.params.period=u.params.period||"12months",u.params.byPeriod=u.params.byPeriod||"month",u.params.from&&u.params.to&&(p(t,e,["byPeriod","from","to"])&&(u.data=null),u.data=u.data||(u.spin=!0,s.get(u.params).catch((function(t){return n.error(t,"Failed to query Overall Space Utilization widget data.")})).finally((function(){u.spin=!1}))),a.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){u.chart=l(M(M({},u.data),{},{params:u.params}))})))}),100),!0)}}])},"2R0e":function(t,a){t.exports='<label class=ff-row style=min-width:130px> <ff-label flex=none><span translate=CHARTS.BY_PERIOD></span></ff-label> <ff-select ff-model=$ctrl.period ff-options="opt.id as opt.name for opt in $ctrl.optsPeriod"></ff-select> </label> '},"3FR+":function(t,a,e){"use strict";e.r(a);var n=e("WSeP"),r=e.n(n),o=e("nbuU"),i=e.n(o),s=e("Xp5u");a.default=angular.module("deskworks.CompanySnapshotRevenueForecast",["ngResource","datesDeserializer","deskworks.config",s.a.name]).factory("CompanySnapshotRevenueForecast",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,n,o,s,l){var c=n(["periods.from","periods.to"]);t(o.getApiAbsUrl("/company-snapshot/revenue-forecast"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,c]}});return{get:function(t){return e((function(){return{periods:[{from:"2020-03-01",to:"2020-03-31"},{from:"2020-04-01",to:"2020-04-30"},{from:"2020-05-01",to:"2020-05-31"},{from:"2020-06-01",to:"2020-06-30"},{from:"2020-07-01",to:"2020-07-31"}],committedRevenues:[10221.2,12557,20522.8,22370,19240.55],atRiskRevenues:[5201.2,6572.1,10509.5,10370,9240.55]}}),200).then((function(a){return function(t){var a,e=t.data,n=t.params.byPeriod,o=void 0===n?"month":n,s=i()(l).call(l,(function(t){return t.id===o}));return r()(a=e.periods).call(a,(function(t){t.title=s.format(t.from,t.to)})),e}({data:a,params:t})}))}}}])},"4oxB":function(t,a,e){"use strict";e.r(a);var n=e("6RpP"),r=e.n(n),o=e("YtL8"),i=e.n(o),s=e("yCd9"),l=e.n(s),c=e("aGVL"),d=e("bU+R"),u=e.n(d);a.default=angular.module("deskworks.companySnapshotOverallSpaceUtilizationChart",[c.a.name]).factory("companySnapshotOverallSpaceUtilizationChart",["$filter","$translate","chartColors",function(t,a,e){return function(t){var n=t.periods,o=t.utilizations,s=(t.params,l()(n).call(n,(function(t){return t.title}))),c=[{data:o,maxBarThickness:80,backgroundColor:e[0]}],d=a.instant("COMPANY_SNAPSHOT.UTILIZATION"),p=Math.ceil(i()(o).call(o,(function(t,a){return t>a?t:a}),0));return{type:"bar",plugins:[u.a],data:{labels:s,datasets:c},options:{plugins:{datalabels:{display:"auto",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,formatter:function(t,a){return"".concat(Math.round(t),"%")}}},tooltips:{callbacks:{label:function(t){var a;return r()(a="".concat(d,": ")).call(a,o[t.index],"%")}}},legend:{display:!1},scales:{yAxes:[{ticks:{min:0,max:p,callback:function(t){return"".concat(t,"%")}}}]}}}}}])},"7WcZ":function(t,a,e){"use strict";e.r(a);var n=e("6RpP"),r=e.n(n),o=e("yCd9"),i=e.n(o),s=e("aGVL"),l=e("bU+R"),c=e.n(l);a.default=angular.module("deskworks.companySnapshotIncomeChart",[s.a.name]).factory("companySnapshotIncomeChart",["$filter","$translate","chartColors",function(t,a,e){return function(n){var o=n.periods,s=n.totals,l=(n.params,i()(o).call(o,(function(t){return t.title}))),d=[{data:s,maxBarThickness:80,backgroundColor:e[0]}],u=a.instant("COMPANY_SNAPSHOT.INCOME");return{type:"bar",plugins:[c.a],data:{labels:l,datasets:d},options:{plugins:{datalabels:{display:"auto",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,formatter:function(a,e){return t("ncurrency")(a,void 0,0)}}},tooltips:{callbacks:{label:function(a){var e;return r()(e="".concat(u,": ")).call(e,t("ncurrency")(s[a.index]))}}},layout:{padding:{top:15}},legend:{display:!1},scales:{yAxes:[{ticks:{min:0,callback:function(a){return t("ncurrency")(a,void 0,0)}}}]}}}}}])},"8KP7":function(t,a,e){"use strict";e.r(a);e("Muwe"),e("y89P");var n=e("WSeP"),r=e.n(n),o=e("lRNC"),i=e.n(o),s=e("yCd9"),l=e.n(s),c=["$injector",function(t){var a,n,o=(a=e("t0Cx"),l()(n=i()(a).call(a)).call(n,a));t.loadNewModules(l()(o).call(o,(function(t){return t.default.name}))),t.invoke(["$templateCache",function(t){var a,n=e("FakC");r()(a=i()(n).call(n)).call(a,(function(a){return t.put(a.replace(/^\.\//,""),n(a))}))}])}];a.default=c},CLLE:function(t,a,e){"use strict";var n=e("Tfwl"),r=e.n(n),o=e("XAgg"),i=e.n(o),s=e("yKah"),l=e.n(s),c=e("WSeP"),d=e.n(c),u=e("lvz6"),p=e.n(u),f=e("hsT8"),m=e.n(f),y=e("Ekwr"),h=e.n(y),g=e("03wM"),v=e.n(g),b=e("ipr/"),C=e.n(b),S=e("yCd9"),w=e.n(S),k=e("fzuT"),P=e.n(k),$=(e("S2gh"),e("bG+q"),e("pl6f")),O=e("aGVL"),x=e("bU+R"),T=e.n(x);function R(t,a){var e=v()(t);if(h.a){var n=h()(t);a&&(n=m()(n).call(n,(function(a){return p()(t,a).enumerable}))),e.push.apply(e,n)}return e}function A(t){for(var a=1;a<arguments.length;a++){var e,n=null!=arguments[a]?arguments[a]:{};if(a%2)d()(e=R(Object(n),!0)).call(e,(function(a){P()(t,a,n[a])}));else if(l.a)i()(t,l()(n));else{var o;d()(o=R(Object(n))).call(o,(function(a){r()(t,a,p()(n,a))}))}}return t}a.a=angular.module("chartDirective",["deskworks.helper",$.a.name,O.a.name]).directive("chart",["$window","systemColors",function(t,a){return t.Chart.defaults.global.legend.labels.boxWidth=12,t.Chart.defaults.global.tooltips.cornerRadius=3,t.Chart.defaults.global.tooltips.displayColors=!1,t.Chart.defaults.global.tooltips.backgroundColor="rgba(0,0,0,0.65)",t.Chart.defaults.global.elements.rectangle.borderWidth=1,t.Chart.defaults.global.elements.rectangle.backgroundColor=a.primary,t.Chart.defaults.global.elements.arc.borderWidth=1,t.Chart.plugins.unregister(T.a),{restrict:"E",scope:!0,controller:"ChartCtrl as $ctrl",bindToController:{type:"@chartType",labels:"<chartLabels",data:"<chartData",options:"<chartOptions",config:"<"},template:"<canvas></canvas>"}}]).controller("ChartCtrl",["$scope","$element","$window","chartColors",function(t,a,e,n){var r,o=this,i={maintainAspectRatio:!1},s={backgroundColor:n,hoverBorderWidth:2,hoverBorderColor:"#fff"};o.$onDestroy=function(){r&&r.destroy()},o.$onChanges=function(t){var n;if(o.config){var l;r&&r.destroy();var c=A({},o.config);return c.options=A(A({},c.options),i),c.data=A({},c.data),c.data.datasets=w()(l=c.data.datasets).call(l,(function(t){return A(A({},s),t)})),void(r=new e.Chart(a.children(),c))}if(o.options){var d={labels:o.labels,datasets:C()(n=o.data).call(n)};d.datasets[0]=angular.extend({},s,d.datasets[0]),!r||t.type&&t.type.currentValue!==t.type.previousValue?(r&&r.destroy(),r=new e.Chart(a.children(),{type:o.type,data:d,options:angular.extend({},i,o.options)})):(angular.extend(r.data,d),angular.extend(r.options,i,o.options),r.update())}}}])},CgoQ:function(t,a,e){"use strict";var n=e("WSeP"),r=e.n(n);a.a=angular.module("deskworks.optsChartPeriod",[]).factory("optsChartPeriod",["$rootScope","$translate",function(t,a){var e=[{id:"lastMonth",_name:"CHARTS.PERIOD.LAST_MONTH",from:function(){return moment().subtract(1,"month").startOf("month")},to:function(){return moment().subtract(1,"month").endOf("month")}},{id:"thisMonth",_name:"CHARTS.PERIOD.THIS_MONTH",from:function(){return moment().startOf("month")},to:function(){return moment().endOf("month")}},{id:"12months",_name:"CHARTS.PERIOD.12_MONTHS",from:function(){return moment().subtract(12,"month")},to:function(){return moment()}},{id:"lastYear",_name:"CHARTS.PERIOD.LAST_YEAR",from:function(){return moment().subtract(1,"year").startOf("year")},to:function(){return moment().subtract(1,"year").endOf("year")}},{id:"thisYear",_name:"CHARTS.PERIOD.THIS_YEAR",from:function(){return moment().startOf("year")},to:function(){return moment().endOf("year")}},{id:"custom",_name:"CHARTS.PERIOD.CUSTOM",from:function(){return moment().subtract(1,"month").startOf("month")},to:function(){return moment().subtract(1,"month").endOf("month")}}];function n(){r()(e).call(e,(function(t){t.name=a.instant(t._name)}))}return n(),t.$on("$setTranslationsSuccess",n),e}])},DcLO:function(t,a,e){"use strict";var n=e("nbuU"),r=e.n(n),o=e("ggrz"),i=e.n(o),s=(e("gq4Z"),e("CgoQ"));a.a=angular.module("deskworks.chartPeriodDirective",[s.a.name]).directive("chartPeriod",(function(){return{template:i.a,restrict:"E",scope:!0,controller:"ChartPeriodCtrl as $ctrl",bindToController:{period:"=",from:"=",to:"="}}})).controller("ChartPeriodCtrl",["$scope","optsChartPeriod",function(t,a){var e=this;e.optsPeriod=a,t.$watchGroup(["$ctrl.period","$ctrl.from","$ctrl.to"],(function(t,n){if("custom"===e.period&&e.to&&e.to.endOf("month"),t[0]!==n[0]||e.period&&!e.from&&!e.to){var o=r()(a).call(a,(function(t){return t.id===e.period}));e.from=o.from(),e.to=o.to()}}))}])},Ennu:function(t,a){t.exports='<div> <div class=ff-grid> <chart-by-period flex=none period=$ctrl.params.byPeriod></chart-by-period> <ff-static flex=auto></ff-static> <chart-period flex="0 1 auto" period=$ctrl.params.period from=$ctrl.params.from to=$ctrl.params.to></chart-period> </div> <chart config=$ctrl.chart ff-dim=$ctrl.spin></chart> </div> '},FakC:function(t,a,e){var n={"./dashboard/company-snapshot-dashboard.tpl.html":"SyK1","./widgets/company-snapshot-widget-base.tpl.html":"Ennu","./widgets/company-snapshot-widget.tpl.html":"Rjvx","./widgets/sales-by-category/company-snapshot-sales-by-category.tpl.html":"+xX7"};function r(t){var a=o(t);return e(a)}function o(t){if(!e.o(n,t)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=o,t.exports=r,r.id="FakC"},I5Zy:function(t,a,e){"use strict";var n=e("xeXu"),r=e.n(n),o=e("0zKI"),i=e.n(o),s=(e("RF9M"),e("/MEN"),e("jd5N"));a.a=angular.module("dnd",["dndLists",s.a.name]).factory("dnd",["keese",function(t){return{move:function(a,e,n,o){var s=a[e];n&&i()(n).call(n,o,0,s);a===n&&o<=e&&e++;if(i()(a).call(a,e,1),n){var l=r()(n).call(n,s);s.order=t.generate(n[l-1]&&n[l-1].order,n[l+1]&&n[l+1].order)}return s}}}])},JSPK:function(t,a,e){},MAnv:function(t,a,e){"use strict";e.r(a);var n=e("YtL8"),r=e.n(n),o=e("yCd9"),i=e.n(o),s=e("WSeP"),l=e.n(s),c=e("nbuU"),d=e.n(c),u=e("Xp5u");a.default=angular.module("deskworks.CompanySnapshotSales",["ngResource","datesDeserializer","deskworks.config",u.a.name]).factory("CompanySnapshotSales",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,n,o,s,c){var u=n(["periods.from","periods.to"]),p=t(o.getApiAbsUrl("/company-snapshot/sales"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,u]}});return{get:function(t){return p.get({byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd"),to:a("date")(t.to,"yyyy-MM-dd")}).$promise.then((function(a){return function(t){var a,e,n,o=t.data,u=t.params.byPeriod,p=void 0===u?"month":u,f=d()(c).call(c,(function(t){return t.id===p}));return l()(a=o.periods).call(a,(function(t){t.title=f.format(t.from,t.to)})),o.totals=i()(e=o.periods).call(e,(function(t,a){var e;return s.round(r()(e=o.data).call(e,(function(t,e){return t+e.totals[a]}),0))})),l()(n=o.data).call(n,(function(t){var a;t.total=s.round(r()(a=t.totals).call(a,(function(t,a){return t+a}),0))})),o}({data:a,params:t})}))}}}])},"Ml/Z":function(t,a,e){},Mqye:function(t,a,e){"use strict";e.r(a);e("JBxO"),e("FdtR");var n=e("Tfwl"),r=e.n(n),o=e("XAgg"),i=e.n(o),s=e("yKah"),l=e.n(s),c=e("WSeP"),d=e.n(c),u=e("lvz6"),p=e.n(u),f=e("hsT8"),m=e.n(f),y=e("Ekwr"),h=e.n(y),g=e("03wM"),v=e.n(g),b=e("fzuT"),C=e.n(b),S=e("Ennu"),w=e.n(S),k=e("CLLE"),P=e("G6E5"),$=e("MAnv"),O=e("Xp5u"),x=e("CgoQ"),T=e("w6R9"),R=e("DcLO"),A=e("OOrm");function E(t,a){var e=v()(t);if(h.a){var n=h()(t);a&&(n=m()(n).call(n,(function(a){return p()(t,a).enumerable}))),e.push.apply(e,n)}return e}function M(t){for(var a=1;a<arguments.length;a++){var e,n=null!=arguments[a]?arguments[a]:{};if(a%2)d()(e=E(Object(n),!0)).call(e,(function(a){C()(t,a,n[a])}));else if(l.a)i()(t,l()(n));else{var o;d()(o=E(Object(n))).call(o,(function(a){r()(t,a,p()(n,a))}))}}return t}a.default=angular.module("deskworks.companySnapshotSalesDirective",["debounce",k.a.name,P.a.name,$.default.name,O.a.name,x.a.name,T.default.name,R.a.name,A.a.name]).directive("companySnapshotSales",(function(){return{template:w.a,restrict:"E",scope:!0,controller:"CompanySnapshotSalesDirectiveCtrl as $ctrl",bindToController:{params:"<"}}})).controller("CompanySnapshotSalesDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","CompanySnapshotSales","companySnapshotSalesChart","optsChartByPeriod","optsChartPeriod",function(t,a,e,n,r,o,i,s,l,c,d){var u=this,p=i.paramsChanged;u.optsByPeriod=c,u.optsPeriod=d,u.data=null,u.$onInit=function(){t.$watch("$ctrl.params",o((function(t,e){u.params.period=u.params.period||"12months",u.params.byPeriod=u.params.byPeriod||"month",u.params.from&&u.params.to&&(p(t,e,["from","to","byPeriod"])&&(u.data=null),u.data=u.data||(u.spin=!0,s.get(u.params).catch((function(t){return n.error(t,"Failed to get Sales widget data.")})).finally((function(){u.spin=!1}))),a.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){u.chart=l(M(M({},u.data),{},{params:u.params}))})))}),100),!0)}}])},N3tr:function(t,a,e){"use strict";e.r(a);e("JBxO"),e("FdtR");var n=e("Ennu"),r=e.n(n),o=e("CLLE"),i=e("G6E5"),s=e("3FR+"),l=e("Xp5u"),c=e("CgoQ"),d=e("W5dq"),u=e("DcLO"),p=e("OOrm");a.default=angular.module("deskworks.companySnapshotRevenueForecastDirective",["debounce",o.a.name,i.a.name,s.default.name,l.a.name,c.a.name,d.default.name,u.a.name,p.a.name]).directive("companySnapshotRevenueForecast",(function(){return{template:r.a,restrict:"E",scope:!0,controller:"companySnapshotRevenueForecastDirectiveCtrl as $ctrl",bindToController:{params:"<"}}})).controller("companySnapshotRevenueForecastDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","CompanySnapshotRevenueForecast","companySnapshotRevenueForecastChart","optsChartByPeriod","optsChartPeriod",function(t,a,e,n,r,o,i,s,l,c,d){var u=this,p=i.paramsChanged;u.optsByPeriod=c,u.optsPeriod=d,u.data=null,u.$onInit=function(){t.$watch("$ctrl.params",o((function(t,e){u.params.period=u.params.period||"12months",u.params.byPeriod=u.params.byPeriod||"month",u.params.from&&u.params.to&&(p(t,e,["byPeriod","from","to"])&&(u.data=null),u.data=u.data||(u.spin=!0,s.get(u.params).catch((function(t){return n.error(t,"Failed to get Revenue Forecast widget data.")})).finally((function(){u.spin=!1}))),a.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){u.chart=l(u.data)})))}),100),!0)}}])},N8hn:function(t,a,e){"use strict";e.r(a);e("JBxO"),e("FdtR");var n=e("Tfwl"),r=e.n(n),o=e("XAgg"),i=e.n(o),s=e("yKah"),l=e.n(s),c=e("WSeP"),d=e.n(c),u=e("lvz6"),p=e.n(u),f=e("hsT8"),m=e.n(f),y=e("Ekwr"),h=e.n(y),g=e("03wM"),v=e.n(g),b=e("fzuT"),C=e.n(b),S=e("Ennu"),w=e.n(S),k=e("CLLE"),P=e("G6E5"),$=e("gd06"),O=e("Xp5u"),x=e("CgoQ"),T=e("hhOz"),R=e("DcLO"),A=e("OOrm");function E(t,a){var e=v()(t);if(h.a){var n=h()(t);a&&(n=m()(n).call(n,(function(a){return p()(t,a).enumerable}))),e.push.apply(e,n)}return e}function M(t){for(var a=1;a<arguments.length;a++){var e,n=null!=arguments[a]?arguments[a]:{};if(a%2)d()(e=E(Object(n),!0)).call(e,(function(a){C()(t,a,n[a])}));else if(l.a)i()(t,l()(n));else{var o;d()(o=E(Object(n))).call(o,(function(a){r()(t,a,p()(n,a))}))}}return t}a.default=angular.module("deskworks.companySnapshotRecurringBillingsDirective",["debounce",k.a.name,P.a.name,$.default.name,O.a.name,x.a.name,T.default.name,R.a.name,A.a.name]).directive("companySnapshotRecurringBillings",(function(){return{template:w.a,restrict:"E",scope:!0,controller:"CompanySnapshotRecurringBillingsDirectiveCtrl as $ctrl",bindToController:{params:"<"}}})).controller("CompanySnapshotRecurringBillingsDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","CompanyRecurringBillings","companySnapshotRecurringBillingsChart","optsChartByPeriod","optsChartPeriod",function(t,a,e,n,r,o,i,s,l,c,d){var u=this,p=i.paramsChanged;u.optsByPeriod=c,u.optsPeriod=d,u.data=null,u.$onInit=function(){t.$watch("$ctrl.params",o((function(t,e){u.params.period=u.params.period||"12months",u.params.byPeriod=u.params.byPeriod||"month",u.params.from&&u.params.to&&(p(t,e,["byPeriod","from","to"])&&(u.data=null),u.data=u.data||(u.spin=!0,s.get(u.params).catch((function(t){return n.error(t,"Failed to get Recurring Billings widget data.")})).finally((function(){u.spin=!1}))),a.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){u.chart=l(M(M({},u.data),{},{params:u.params}))})))}),100),!0)}}])},OOrm:function(t,a,e){"use strict";var n=e("2R0e"),r=e.n(n),o=e("Xp5u");a.a=angular.module("deskworks.chartByPeriodDirective",[o.a.name]).directive("chartByPeriod",(function(){return{template:r.a,restrict:"E",scope:!0,controller:"ChartByPeriodCtrl as $ctrl",bindToController:{period:"="}}})).controller("ChartByPeriodCtrl",["$scope","optsChartByPeriod",function(t,a){this.optsPeriod=a}])},OzIr:function(t,a,e){"use strict";e.r(a);var n=e("WSeP"),r=e.n(n),o=e("nbuU"),i=e.n(o),s=e("Xp5u");a.default=angular.module("deskworks.CompanySnapshotIncome",["ngResource","datesDeserializer","deskworks.config",s.a.name]).factory("CompanySnapshotIncome",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,n,o,s,l){var c=n(["periods.from","periods.to"]),d=t(o.getApiAbsUrl("/company-snapshot/income"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,c]}});return{get:function(t){return d.get({byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd"),to:a("date")(t.to,"yyyy-MM-dd")}).$promise.then((function(a){return function(t){var a,e=t.data,n=t.params.byPeriod,o=void 0===n?"month":n,s=i()(l).call(l,(function(t){return t.id===o}));return r()(a=e.periods).call(a,(function(t){t.title=s.format(t.from,t.to)})),e}({data:a,params:t})}))}}}])},Pljh:function(t,a,e){"use strict";e.r(a);e("JBxO"),e("FdtR");var n=e("Tfwl"),r=e.n(n),o=e("XAgg"),i=e.n(o),s=e("yKah"),l=e.n(s),c=e("WSeP"),d=e.n(c),u=e("lvz6"),p=e.n(u),f=e("hsT8"),m=e.n(f),y=e("Ekwr"),h=e.n(y),g=e("03wM"),v=e.n(g),b=e("fzuT"),C=e.n(b),S=e("Ennu"),w=e.n(S),k=e("CLLE"),P=e("G6E5"),$=e("yyB2"),O=e("Xp5u"),x=e("CgoQ"),T=e("l3St"),R=e("DcLO"),A=e("OOrm");function E(t,a){var e=v()(t);if(h.a){var n=h()(t);a&&(n=m()(n).call(n,(function(a){return p()(t,a).enumerable}))),e.push.apply(e,n)}return e}function M(t){for(var a=1;a<arguments.length;a++){var e,n=null!=arguments[a]?arguments[a]:{};if(a%2)d()(e=E(Object(n),!0)).call(e,(function(a){C()(t,a,n[a])}));else if(l.a)i()(t,l()(n));else{var o;d()(o=E(Object(n))).call(o,(function(a){r()(t,a,p()(n,a))}))}}return t}a.default=angular.module("deskworks.companySnapshotReservationSpaceUtilizationDirective",["debounce",k.a.name,P.a.name,O.a.name,x.a.name,$.default.name,T.default.name,R.a.name,A.a.name]).directive("companySnapshotReservationSpaceUtilization",(function(){return{template:w.a,restrict:"E",scope:!0,controller:"CompanySnapshotReservationSpaceUtilizationDirectiveCtrl as $ctrl",bindToController:{params:"<"}}})).controller("CompanySnapshotReservationSpaceUtilizationDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","CompanySnapshotReservationSpaceUtilization","companySnapshotReservationSpaceUtilizationChart","optsChartByPeriod","optsChartPeriod",function(t,a,e,n,r,o,i,s,l,c,d){var u=this,p=i.paramsChanged;u.optsByPeriod=c,u.optsPeriod=d,u.data=null,u.$onInit=function(){t.$watch("$ctrl.params",o((function(t,e){u.params.period=u.params.period||"12months",u.params.byPeriod=u.params.byPeriod||"month",u.params.from&&u.params.to&&(p(t,e,["byPeriod","from","to"])&&(u.data=null),u.data=u.data||(u.spin=!0,s.get(u.params).catch((function(t){return n.error(t,"Failed to query Reservation Space Utilization widget data.")})).finally((function(){u.spin=!1}))),a.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){u.chart=l(M(M({},u.data),{},{params:u.params}))})))}),100),!0)}}])},RCE7:function(t,a,e){"use strict";e.r(a);var n=e("6RpP"),r=e.n(n),o=e("YtL8"),i=e.n(o),s=e("yCd9"),l=e.n(s),c=e("KK/u"),d=e.n(c),u=e("ipr/"),p=e.n(u),f=e("G6E5"),m=e("aGVL"),y=e("bU+R"),h=e.n(y);a.default=angular.module("deskworks.companySnapshotOccupancyVacancyChart",[f.a.name,m.a.name]).factory("companySnapshotOccupancyVacancyChart",["$filter","$translate","chartColors","reportHelper",function(t,a,e,n){return function(t){var a,o=t.periods,s=t.data,c=t.params;s=p()(a=d()(n).call(n,s,"utilization",!0)).call(a,0,12);var u=l()(o).call(o,(function(t){return t.title})),f=l()(s).call(s,(function(t,a){return{label:t.name,data:t.utilizations,maxBarThickness:80,backgroundColor:e[a]}})),m=Math.ceil(i()(s).call(s,(function(t,a){var e,n=i()(e=a.utilizations).call(e,(function(t,a){return t>a?t:a}),0);return n>t?n:t}),0));return{type:"bar",plugins:[h.a],data:{labels:u,datasets:f},options:{plugins:{datalabels:{display:"auto",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,formatter:function(t,a){return"".concat(Math.round(t),"%")}}},tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(t){var a,e,n,o=s[t.datasetIndex],i=o.name,l=o.utilizations,c=o.occupiedTotals,d=o.vacantTotals;return r()(a=r()(e=r()(n="".concat(i,": ")).call(n,l[t.index],"% (")).call(e,c[t.index]," / ")).call(a,d[t.index],")")}}},layout:{padding:{top:15}},legend:{display:!0,position:c.wide?"right":"bottom"},scales:{yAxes:[{ticks:{min:0,max:m,callback:function(t){return"".concat(t,"%")}}}]}}}}}])},Rjvx:function(t,a){t.exports='<ff-panel> <ff-panel-header class=ff-row> <span translate={{$w.config._name}}></span> <div class=cs-widget-toolbar> <ff-btn sense=widen size=xs class=ff-btn-icon ff-click="$w.widget.wide = !$w.widget.wide"></ff-btn> <ff-btn sense=drag size=xs class=ff-btn-icon dnd-handle></ff-btn> </div> </ff-panel-header> <div class=cs-widget-body></div> </ff-panel> '},SyK1:function(t,a){t.exports='<div class=cs-dashboard> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class="ff-spin ff-spin-placeholder" ng-if=!$ctrl.widgets></div> <div class=gutter-v ng-if=$ctrl.widgets> <div> <div class="ff-grid gutter-h gutter-v" dnd-list dnd-drop="callback({ targetList: $ctrl.widgets, targetIndex: index })"> <company-snapshot-widget ng-repeat="widget in $ctrl.widgets" widget=widget dnd-draggable=null dnd-nodrag dnd-dragstart=$w.onDragStart(event) dnd-dragend=$w.onDragEnd(event) dnd-callback="$ctrl.onDrop($ctrl.widgets, $index, targetList, targetIndex)"></company-snapshot-widget> <div class=dndPlaceholder>Drop here.</div> <div class=cs-dashboard-trash title="{{\'COMPANY_SNAPSHOT.BTN_TRASH\' | translate}}" dnd-list=[] dnd-drop="callback({ targetList: null, targetIndex: index })"><i class="fa fa-trash"></i></div> </div> </div> <div> <div class="ff-grid gutter-h-half gutter-v-half"> <ng-form class=ff-row flex="0 1 300px"> <label class=ff-row> <ff-label flex=none>Add widget:</ff-label> <ff-select ff-model=$ctrl.widgetToAdd ff-options="widget._name | translate for widget in $ctrl.widgetsList"></ff-select> </label> <ff-btn-group flex=none class=buttons-row> <ff-btn sense=add size=xs type=submit ff-click=$ctrl.addWidget() title="{{ \'GLOBAL.BTN_NEW\' | translate }}"></ff-btn> </ff-btn-group> </ng-form> <ff-btn-group flex=none> <ff-btn sense=makeFavorite ff-click=$ctrl.saveDefaults() ff-disabled=$ctrl.isPristine()> <span translate=COMPANY_SNAPSHOT.BTN_SAVE_DEFAULTS></span> </ff-btn> </ff-btn-group> </div> </div> </div> </div> '},TOZU:function(t,a,e){"use strict";e.r(a);var n=e("Mqye"),r=e("pyLT"),o=e("YBaG"),i=e("N8hn"),s=e("N3tr"),l=e("Pljh"),c=e("1gcy"),d=e("XY8H");a.default=angular.module("deskworks.companySnapshotWidgetsList",[n.default.name,r.default.name,o.default.name,i.default.name,l.default.name,s.default.name,c.default.name,d.default.name]).factory("companySnapshotWidgetsList",(function(){return[{uid:"sales",_name:"COMPANY_SNAPSHOT.WIDGET.SALES",template:"<company-snapshot-sales></company-snapshot-sales>"},{uid:"sales-by-category",_name:"COMPANY_SNAPSHOT.WIDGET.SALES_BY_CATEGORY",template:"<company-snapshot-sales-by-category></company-snapshot-sales-by-category>"},{uid:"income",_name:"COMPANY_SNAPSHOT.WIDGET.INCOME",template:"<company-snapshot-income></company-snapshot-income>"},{uid:"recurring-billings",_name:"COMPANY_SNAPSHOT.WIDGET.RECURRING_BILLINGS",template:"<company-snapshot-recurring-billings></company-snapshot-recurring-billings>"},{uid:"revenue-forecast",_name:"COMPANY_SNAPSHOT.WIDGET.REVENUE_FORECAST",template:"<company-snapshot-revenue-forecast></company-snapshot-revenue-forecast>"},{uid:"reservation-space-utilization",_name:"COMPANY_SNAPSHOT.WIDGET.RESERVATION_SPACE_UTILIZATION",template:"<company-snapshot-reservation-space-utilization></company-snapshot-reservation-space-utilization>"},{uid:"overall-space-utilization",_name:"COMPANY_SNAPSHOT.WIDGET.OVERALL_SPACE_UTILIZATION",template:"<company-snapshot-overall-space-utilization></company-snapshot-overall-space-utilization>"},{uid:"occupancy-vacancy",_name:"COMPANY_SNAPSHOT.WIDGET.OCCUPANCY_VACANCY",template:"<company-snapshot-occupancy-vacancy></company-snapshot-occupancy-vacancy>"}]}))},UuGA:function(t,a,e){"use strict";e.r(a);var n=e("YtL8"),r=e.n(n),o=e("WSeP"),i=e.n(o),s=e("nbuU"),l=e.n(s),c=e("Xp5u");a.default=angular.module("deskworks.CompanySnapshotSalesByCategory",["ngResource","datesDeserializer","deskworks.config",c.a.name]).factory("CompanySnapshotSalesByCategory",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,n,o,s,c){var d=n(["periods.from","periods.to"]),u=t(o.getApiAbsUrl("/company-snapshot/sales-by-category"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,d]}});return{get:function(t){return u.get({byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd"),to:a("date")(t.to,"yyyy-MM-dd")}).$promise.then((function(a){return function(t){var a,e,n,o=t.data,d=t.params.byPeriod,u=void 0===d?"month":d,p=l()(c).call(c,(function(t){return t.id===u}));i()(a=o.periods).call(a,(function(t){t.title=p.format(t.from,t.to)}));var f=0;return i()(e=o.data).call(e,(function(t){var a;t.total=r()(a=t.totals).call(a,(function(t,a){return t+a}),0),f+=t.total})),i()(n=o.data).call(n,(function(t){t.totalPercentage=s.round(100*t.total/f,1),t.total=s.round(t.total)})),o}({data:a,params:t})}))}}}])},W5dq:function(t,a,e){"use strict";e.r(a);var n=e("yCd9"),r=e.n(n),o=e("aGVL"),i=e("bU+R"),s=e.n(i);a.default=angular.module("deskworks.companySnapshotRevenueForecastChart",[o.a.name]).factory("companySnapshotRevenueForecastChart",["$filter","$translate","chartColors",function(t,a,e){return function(n){var o=n.periods,i=n.committedRevenues,l=n.atRiskRevenues,c=r()(o).call(o,(function(t){return t.title})),d=[{label:a.instant("COMPANY_SNAPSHOT.COMMITTED_REVENUE"),data:i,backgroundColor:e[0],maxBarThickness:80},{label:a.instant("COMPANY_SNAPSHOT.AT_RISK_REVENUE"),data:l,backgroundColor:e[1],maxBarThickness:80}];return{type:"bar",plugins:[s.a],data:{labels:c,datasets:d},options:{plugins:{datalabels:{display:"auto",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,formatter:function(a,e){return t("ncurrency")(a,void 0,0)}}},tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(a,e){var n=e.datasets[a.datasetIndex];return n.label+": "+t("ncurrency")(n.data[a.index])}}},legend:{display:!0},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{min:0,callback:function(a){return t("ncurrency")(a,void 0,0)}}}]}}}}}])},XY8H:function(t,a,e){"use strict";e.r(a);e("JBxO"),e("FdtR");var n=e("Tfwl"),r=e.n(n),o=e("XAgg"),i=e.n(o),s=e("yKah"),l=e.n(s),c=e("WSeP"),d=e.n(c),u=e("lvz6"),p=e.n(u),f=e("hsT8"),m=e.n(f),y=e("Ekwr"),h=e.n(y),g=e("03wM"),v=e.n(g),b=e("fzuT"),C=e.n(b),S=e("Ennu"),w=e.n(S),k=e("CLLE"),P=e("G6E5"),$=e("eIep"),O=e("Xp5u"),x=e("CgoQ"),T=e("RCE7"),R=e("DcLO"),A=e("OOrm");function E(t,a){var e=v()(t);if(h.a){var n=h()(t);a&&(n=m()(n).call(n,(function(a){return p()(t,a).enumerable}))),e.push.apply(e,n)}return e}function M(t){for(var a=1;a<arguments.length;a++){var e,n=null!=arguments[a]?arguments[a]:{};if(a%2)d()(e=E(Object(n),!0)).call(e,(function(a){C()(t,a,n[a])}));else if(l.a)i()(t,l()(n));else{var o;d()(o=E(Object(n))).call(o,(function(a){r()(t,a,p()(n,a))}))}}return t}a.default=angular.module("deskworks.companySnapshotOccupancyVacancyDirective",["debounce",k.a.name,P.a.name,O.a.name,x.a.name,$.default.name,T.default.name,R.a.name,A.a.name]).directive("companySnapshotOccupancyVacancy",(function(){return{template:w.a,restrict:"E",scope:!0,controller:"CompanySnapshotOccupancyVacancyDirectiveCtrl as $ctrl",bindToController:{params:"<"}}})).controller("CompanySnapshotOccupancyVacancyDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","CompanySnapshotOccupancyVacancy","companySnapshotOccupancyVacancyChart","optsChartByPeriod","optsChartPeriod",function(t,a,e,n,r,o,i,s,l,c,d){var u=this,p=i.paramsChanged;u.optsByPeriod=c,u.optsPeriod=d,u.data=null,u.$onInit=function(){t.$watch("$ctrl.params",o((function(t,e){u.params.period=u.params.period||"12months",u.params.byPeriod=u.params.byPeriod||"month",u.params.from&&u.params.to&&(p(t,e,["byPeriod","from","to"])&&(u.data=null),u.data=u.data||(u.spin=!0,s.get(u.params).catch((function(t){return n.error(t,"Failed to query Occupancy Vacancy widget data.")})).finally((function(){u.spin=!1}))),a.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){u.chart=l(M(M({},u.data),{},{params:u.params}))})))}),100),!0)}}])},Xp5u:function(t,a,e){"use strict";var n=e("WSeP"),r=e.n(n);a.a=angular.module("deskworks.optsChartByPeriod",[]).factory("optsChartByPeriod",["$rootScope","$translate","$filter",function(t,a,e){var n=e("date"),o=[{id:"week",_name:"CHARTS.BY_PERIOD.WEEK",format:function(t,a){return n(t,"MMM d")+" - "+n(a,"MMM d")}},{id:"month",_name:"CHARTS.BY_PERIOD.MONTH",format:function(t,a){return n(t,"MMM")}},{id:"quarter",_name:"CHARTS.BY_PERIOD.QUARTER",format:function(t,a){return n(t,"MMM")+" - "+n(a,"MMM")}},{id:"year",_name:"CHARTS.BY_PERIOD.YEAR",format:function(t,a){return n(t,"yyyy")}}];function i(){r()(o).call(o,(function(t){t.name=a.instant(t._name)}))}return i(),t.$on("$setTranslationsSuccess",i),o}])},YBaG:function(t,a,e){"use strict";e.r(a);e("JBxO"),e("FdtR");var n=e("Tfwl"),r=e.n(n),o=e("XAgg"),i=e.n(o),s=e("yKah"),l=e.n(s),c=e("WSeP"),d=e.n(c),u=e("lvz6"),p=e.n(u),f=e("hsT8"),m=e.n(f),y=e("Ekwr"),h=e.n(y),g=e("03wM"),v=e.n(g),b=e("fzuT"),C=e.n(b),S=e("Ennu"),w=e.n(S),k=e("CLLE"),P=e("G6E5"),$=e("OzIr"),O=e("Xp5u"),x=e("CgoQ"),T=e("7WcZ"),R=e("DcLO"),A=e("OOrm");function E(t,a){var e=v()(t);if(h.a){var n=h()(t);a&&(n=m()(n).call(n,(function(a){return p()(t,a).enumerable}))),e.push.apply(e,n)}return e}function M(t){for(var a=1;a<arguments.length;a++){var e,n=null!=arguments[a]?arguments[a]:{};if(a%2)d()(e=E(Object(n),!0)).call(e,(function(a){C()(t,a,n[a])}));else if(l.a)i()(t,l()(n));else{var o;d()(o=E(Object(n))).call(o,(function(a){r()(t,a,p()(n,a))}))}}return t}a.default=angular.module("deskworks.companySnapshotIncomeDirective",["debounce",k.a.name,P.a.name,O.a.name,x.a.name,$.default.name,T.default.name,R.a.name,A.a.name]).directive("companySnapshotIncome",(function(){return{template:w.a,restrict:"E",scope:!0,controller:"CompanySnapshotIncomeDirectiveCtrl as $ctrl",bindToController:{params:"<"}}})).controller("CompanySnapshotIncomeDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","CompanySnapshotIncome","companySnapshotIncomeChart","optsChartByPeriod","optsChartPeriod",function(t,a,e,n,r,o,i,s,l,c,d){var u=this,p=i.paramsChanged;u.optsByPeriod=c,u.optsPeriod=d,u.data=null,u.$onInit=function(){t.$watch("$ctrl.params",o((function(t,e){u.params.period=u.params.period||"12months",u.params.byPeriod=u.params.byPeriod||"month",u.params.from&&u.params.to&&(p(t,e,["byPeriod","from","to"])&&(u.data=null),u.data=u.data||(u.spin=!0,s.get(u.params).catch((function(t){return n.error(t,"Failed to query Income widget data.")})).finally((function(){u.spin=!1}))),a.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){u.chart=l(M(M({},u.data),{},{params:u.params}))})))}),100),!0)}}])},aGVL:function(t,a,e){"use strict";a.a=angular.module("chartColors",[]).factory("chartColors",(function(){return["#317da3","#e6194b","#3cb44b","#ffe119","#f58231","#911eb4","#aa6e28","#008080","#808080","#800000","#3244a1","#e64c19","#3db372","#d1ff1a","#f5c131","#b31e81","#a89728","#005580","#806659","#804000"]}))},"bG+q":function(t,a,e){},eIep:function(t,a,e){"use strict";e.r(a);var n=e("YtL8"),r=e.n(n),o=e("yCd9"),i=e.n(o),s=e("WSeP"),l=e.n(s),c=e("nbuU"),d=e.n(c),u=e("Xp5u");a.default=angular.module("deskworks.CompanySnapshotOccupancyVacancy",["ngResource","datesDeserializer","deskworks.config",u.a.name]).factory("CompanySnapshotOccupancyVacancy",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,n,o,s,c){var u=n(["periods.from","periods.to"]),p=t(o.getApiAbsUrl("/company-snapshot/occupancy-vacancy"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,u]}});return{get:function(t){return p.get({byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd"),to:a("date")(t.to,"yyyy-MM-dd")}).$promise.then((function(a){return function(t){var a,e,n=t.data,o=t.params.byPeriod,u=void 0===o?"month":o,p=d()(c).call(c,(function(t){return t.id===u}));return l()(a=n.periods).call(a,(function(t){t.title=p.format(t.from,t.to)})),l()(e=n.data).call(e,(function(t){var a,e;t.utilizations=i()(a=t.occupiedTotals).call(a,(function(a,e){return s.round(100*a/(a+t.vacantTotals[e]),1)})),t.utilization=s.round(r()(e=t.utilizations).call(e,(function(t,a){return t+a}),0))})),n}({data:a,params:t})}))}}}])},gd06:function(t,a,e){"use strict";e.r(a);var n=e("YtL8"),r=e.n(n),o=e("yCd9"),i=e.n(o),s=e("WSeP"),l=e.n(s),c=e("nbuU"),d=e.n(c),u=e("Xp5u");a.default=angular.module("deskworks.CompanyRecurringBillings",["ngResource","datesDeserializer","deskworks.config",u.a.name]).factory("CompanyRecurringBillings",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,n,o,s,c){var u=n(["periods.from","periods.to"]),p=t(o.getApiAbsUrl("/company-snapshot/recurring-billings"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,u]}});return{get:function(t){return p.get({byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd"),to:a("date")(t.to,"yyyy-MM-dd")}).$promise.then((function(a){return function(t){var a,e,n,o=t.data,u=t.params.byPeriod,p=void 0===u?"month":u,f=d()(c).call(c,(function(t){return t.id===p}));return l()(a=o.periods).call(a,(function(t){t.title=f.format(t.from,t.to)})),o.totals=i()(e=o.periods).call(e,(function(t,a){var e;return s.round(r()(e=o.data).call(e,(function(t,e){return t+e.totals[a]}),0))})),l()(n=o.data).call(n,(function(t){var a;t.total=s.round(r()(a=t.totals).call(a,(function(t,a){return t+a}),0))})),o}({data:a,params:t})}))}}}])},ggrz:function(t,a){t.exports="<label class=ff-row style=min-width:190px> <ff-label flex=none><span translate=CHARTS.PERIOD></span></ff-label> <ff-select ff-model=$ctrl.period ff-options=\"opt.id as opt.name for opt in $ctrl.optsPeriod\"></ff-select> </label> <ff-row style=z-index:1;margin-left:-108px ng-style=\"{ 'min-width': $ctrl.period === 'custom' ? '300px' : 'none' }\"> <label class=ff-row flex=\"0 1 158px\" ng-if=\"$ctrl.period === 'custom'\"> <ff-label flex=none><span translate=CHARTS.FROM></span></ff-label> <ff-date name=from ff-model=$ctrl.from monthly=true ff-required=true ff-validate-alert=\"{{'CHARTS.FROM' | translate}}\"></ff-date> </label> <label class=ff-row flex=\"0 1 140px\" ng-if=\"$ctrl.period === 'custom'\"> <ff-label flex=none><span translate=CHARTS.TO></span></ff-label> <ff-date name=to ff-model=$ctrl.to monthly=true ff-required=true ff-validate-alert=\"{{'CHARTS.TO' | translate}}\"></ff-date> </label> </ff-row> "},gq4Z:function(t,a,e){},hhOz:function(t,a,e){"use strict";e.r(a);var n=e("6RpP"),r=e.n(n),o=e("yCd9"),i=e.n(o),s=e("KK/u"),l=e.n(s),c=e("ipr/"),d=e.n(c),u=e("G6E5"),p=e("aGVL"),f=e("bU+R"),m=e.n(f);a.default=angular.module("deskworks.companySnapshotRecurringBillingsChart",[u.a.name,p.a.name]).factory("companySnapshotRecurringBillingsChart",["$filter","$translate","chartColors","reportHelper",function(t,a,e,n){return function(o){var s,c,u=o.periods,p=o.data,f=o.totals,y=o.params;p=d()(s=l()(n).call(n,p,"total",!0)).call(s,0,12);var h=i()(u).call(u,(function(t){return t.title})),g=r()(c=i()(p).call(p,(function(t,a){return{label:t.name,data:t.totals,backgroundColor:e[a],maxBarThickness:80}}))).call(c,[{label:a.instant("GLOBAL.TOTAL"),data:i()(f).call(f,(function(t){return 0})),backgroundColor:"transparent",maxBarThickness:80,datalabels:{display:!0,align:"end",offset:-3,color:"#000",textStrokeWidth:0,font:{weight:"bold"}}}]);return{type:"bar",plugins:[m.a],data:{labels:h,datasets:g},options:{plugins:{datalabels:{display:"auto",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,formatter:function(a,e){return t("ncurrency")(e.datasetIndex<g.length-1?a:f[e.dataIndex],void 0,0)}}},tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(a,e){var n=e.datasets[a.datasetIndex];return n.label+": "+t("ncurrency")(a.datasetIndex<g.length-1?n.data[a.index]:f[a.index])}}},layout:{padding:{top:15}},legend:{display:!0,position:y.wide?"right":"bottom"},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{min:0,callback:function(a){return t("ncurrency")(a,void 0,0)}}}]}}}}}])},iPri:function(t,a,e){"use strict";e.r(a);var n=e("WSeP"),r=e.n(n),o=e("nbuU"),i=e.n(o),s=(e("JSPK"),e("Rjvx")),l=e.n(s),c=e("TOZU");a.default=angular.module("deskworks.companySnapshotWidgetDirective",[c.default.name]).directive("companySnapshotWidget",(function(){return{template:l.a,restrict:"E",scope:!0,controller:"CompanySnapshotWidgetDirectiveCtrl as $w",bindToController:{widget:"<"},link:function(t,a){a.addClass("cs-widget")}}})).controller("CompanySnapshotWidgetDirectiveCtrl",["$scope","$element","$window","$compile","state","dwAlerts","helper","companySnapshotWidgetsList",function(t,a,e,n,o,s,l,c){var d=this;d.$onInit=function(){t.$watch("$w.widget.wide",(function(){a.toggleClass("cs-widget-wide",!!d.widget.wide)}))},d.$onChanges=function(){if(d.widget){d.config=i()(c).call(c,(function(t){return t.uid===d.widget.uid}));var e=angular.element(a[0].querySelector(".cs-widget-body")),o=angular.element(d.config.template);o.attr("params","$w.widget"),r()(angular).call(angular,e.children(),(function(t){return t.remove()})),e.append(o),n(o)(t.$new())}},d.onDragStart=function(t){var a=l.findParentElement(t.target,(function(t){return void 0!==t.attr("dnd-list")}));a.toggleClass("cs-wide-placeholder",!!d.widget.wide),a.toggleClass("cs-dragging",!0)},d.onDragEnd=function(t){l.findParentElement(t.target,(function(t){return void 0!==t.attr("dnd-list")})).toggleClass("cs-dragging",!1)}}])},jd5N:function(t,a,e){"use strict";var n=e("JRMi"),r=e.n(n),o=e("gQJ2"),i=e.n(o);a.a=angular.module("keese",[]).factory("keese",(function(){var t="0123456789?@ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a=t.length,e=function(){for(var a={},e=0;e<t.length;e++)a[t[e]]=e;return a}();return{generate:function(t,a,e){return e?o(t,a,e):n(t,a)}};function n(t,a){return t?a?s(t,a):((e=c(t)).digits=e.digits.substr(0,e.order_length+1),l(e,c("1"))):a?s("0",a):"1";var e}function o(t,a,e){var r=new Array(e);if(e>0)if(a)!function t(a,e,o,i){var s=Math.floor((o+i)/2),l=n(a,e);r[s]=l,o<s&&t(a,l,o,s);s+1<i&&t(l,e,s+1,i)}(t,a,0,e);else for(var o=0;o<e;o++){var i=keese(t,null);r[o]=i,t=i}return r}function s(n,r){if(n>r)throw new Error("assertion failed: "+i()(n)+" < "+i()(r));var o=c(n),s=c(r);u(o,s);for(var p=0,f=Math.max(o.digits.length,s.digits.length),m=0;m<f||p>0;m++){var y=e[o.digits[m]]||0,h=p+(e[s.digits[m]]||0);if(y!==h){if(y!==h-1){for(var g=Math.floor((h-y)/2),v="",b=0;b<m;b++)v+="0";v+=t[g];var C=c(d(o.order_length,v));return o.digits=o.digits.substr(0,m+1),l(o,C)}p=a}}throw new Error}function l(n,r){u(n,r);for(var o="",i=n.order_length,s=0,l=Math.max(n.digits.length,r.digits.length)-1;l>=0;l--)s+=e[n.digits[l]]||0,s+=e[r.digits[l]]||0,o=t[s%a]+o,s=Math.floor(s/a);for(;s>0;)o=t[s%a]+o,s=Math.floor(s/a),i++;return d(i,o)}function c(t){var a=r()(t).call(t,"~")+1;return{order_length:a,digits:t.substr(a)}}function d(t,a){for(;t>0&&"0"==a.charAt(0);)a=a.substr(1),t--;for(var e="",n=0;n<t;n++)e+="~";return e+a}function u(t,a){p(t,a.order_length),p(a,t.order_length)}function p(t,a){for(;t.order_length<a;)t.digits="0"+t.digits,t.order_length++}}))},kLbC:function(t,a,e){"use strict";e.r(a);var n=e("6RpP"),r=e.n(n),o=e("yCd9"),i=e.n(o),s=e("bU+R"),l=e.n(s),c=e("aGVL");a.default=angular.module("deskworks.companySnapshotSalesByCategoryDetailedChart",[c.a.name]).factory("companySnapshotSalesByCategoryDetailedChart",["$filter","chartColors",function(t,a){return function(e){var n=e.periods,o=e.data,s=e.params;o=o[s.selected];var c=i()(n).call(n,(function(t){return t.title})),d=[{data:o.totals,maxBarThickness:80,backgroundColor:a[s.selected]}];return{type:"bar",plugins:[l.a],data:{labels:c,datasets:d},options:{plugins:{datalabels:{display:"auto",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,formatter:function(a,e){return t("ncurrency")(a,void 0,0)}}},tooltips:{callbacks:{label:function(a){var e,n=o,i=n.name,s=n.totals;return r()(e="".concat(i,": ")).call(e,t("ncurrency")(s[a.index]))}}},legend:{display:!1},scales:{yAxes:[{ticks:{min:0,callback:function(a){return t("ncurrency")(a,void 0,0)}}}]}}}}}])},l3St:function(t,a,e){"use strict";e.r(a);var n=e("6RpP"),r=e.n(n),o=e("YtL8"),i=e.n(o),s=e("yCd9"),l=e.n(s),c=e("KK/u"),d=e.n(c),u=e("ipr/"),p=e.n(u),f=e("G6E5"),m=e("aGVL"),y=e("bU+R"),h=e.n(y);a.default=angular.module("deskworks.companySnapshotReservationSpaceUtilizationChart",[f.a.name,m.a.name]).factory("companySnapshotReservationSpaceUtilizationChart",["$filter","$translate","chartColors","reportHelper",function(t,a,e,n){return function(t){var a,o=t.periods,s=t.data,c=t.params;s=p()(a=d()(n).call(n,s,"total",!0)).call(a,0,12);var u=l()(o).call(o,(function(t){return t.title})),f=l()(s).call(s,(function(t,a){return{label:t.name,data:t.utilizations,maxBarThickness:80,backgroundColor:e[a]}})),m=Math.ceil(i()(s).call(s,(function(t,a){var e,n=i()(e=a.utilizations).call(e,(function(t,a){return t>a?t:a}),0);return n>t?n:t}),0));return{type:"bar",plugins:[h.a],data:{labels:u,datasets:f},options:{plugins:{datalabels:{display:"auto",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,formatter:function(t,a){return"".concat(Math.round(t),"%")}}},tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(t){var a,e,n,o=s[t.datasetIndex];return r()(a=r()(e=r()(n="".concat(o.name,": ")).call(n,o.utilizations[t.index],"% (")).call(e,o.usageTotals[t.index],"hr / ")).call(a,o.expectedUse,"hr)")}}},layout:{padding:{top:15}},legend:{display:!0,position:c.wide?"right":"bottom"},scales:{yAxes:[{ticks:{min:0,max:m,callback:function(t){return"".concat(t,"%")}}}]}}}}}])},nZ4u:function(t,a,e){"use strict";e.r(a),a.default=angular.module("deskworks.CompanySnapshotDashboard",["ngResource","datesDeserializer","deskworks.config"]).factory("CompanySnapshotDashboard",["$resource","$timeout","datesDeserializer","deskworksConfig",function(t,a,e,n){var r=n.getApiAbsUrl("/dashboard-settings/:userId"),o=e(["widgets.from","widgets.to"]),i=t(r,{userId:"@userId"},{get:{method:"GET",transformResponse:[angular.fromJson,o]},update:{method:"PUT"}});return{get:function(t){return a((function(){return{widgets:[{uid:"sales",order:"1",period:"12months",byPeriod:"month",wide:!1},{uid:"sales-by-category",order:"2",period:"lastMonth",byPeriod:"month",wide:!1},{uid:"income",order:"3",period:"12months",byPeriod:"month",wide:!1},{uid:"overall-space-utilization",order:"4",period:"12months",byPeriod:"month",wide:!1},{uid:"recurring-billings",order:"5",period:"12months",byPeriod:"month",wide:!0},{uid:"reservation-space-utilization",order:"7",period:"12months",byPeriod:"month",wide:!0},{uid:"occupancy-vacancy",order:"8",period:"12months",byPeriod:"month",wide:!0}]}}),500)},save:function(t,a){return i.update(t,a).$promise}}}])},pl6f:function(t,a,e){"use strict";a.a=angular.module("systemColors",["deskworks.helper"]).factory("systemColors",["$window","helper",function(t,a){var e={},n=angular.element('<div style="display: none"></div>');return n.append('<div class="text-text"></div>'),n.append('<div class="text-brand"></div>'),n.append('<div class="text-brand"></div>'),n.append('<div class="text-danger"></div>'),n.append("<div></div>"),n.append('<div class="sidebar-group-header"></div>'),document.body.appendChild(n[0]),e.text=a.rgb2hex(t.getComputedStyle(n.children()[0]).getPropertyValue("color"))||"#444",e.info=a.rgb2hex(t.getComputedStyle(n.children()[4]).getPropertyValue("color"))||"#4d4e4c",e.primary=a.rgb2hex(t.getComputedStyle(n.children()[5]).getPropertyValue("background-color"))||"#949594",e.warning=a.rgb2hex(t.getComputedStyle(n.children()[3]).getPropertyValue("color"))||"#ff9b00",n.remove(),e}])},pyLT:function(t,a,e){"use strict";e.r(a);e("JBxO"),e("FdtR");var n=e("Tfwl"),r=e.n(n),o=e("XAgg"),i=e.n(o),s=e("yKah"),l=e.n(s),c=e("WSeP"),d=e.n(c),u=e("lvz6"),p=e.n(u),f=e("hsT8"),m=e.n(f),y=e("Ekwr"),h=e.n(y),g=e("03wM"),v=e.n(g),b=e("fzuT"),C=e.n(b),S=e("+xX7"),w=e.n(S),k=e("CLLE"),P=e("G6E5"),$=e("UuGA"),O=e("CgoQ"),x=e("yWkM"),T=e("kLbC"),R=e("DcLO"),A=e("OOrm");function E(t,a){var e=v()(t);if(h.a){var n=h()(t);a&&(n=m()(n).call(n,(function(a){return p()(t,a).enumerable}))),e.push.apply(e,n)}return e}function M(t){for(var a=1;a<arguments.length;a++){var e,n=null!=arguments[a]?arguments[a]:{};if(a%2)d()(e=E(Object(n),!0)).call(e,(function(a){C()(t,a,n[a])}));else if(l.a)i()(t,l()(n));else{var o;d()(o=E(Object(n))).call(o,(function(a){r()(t,a,p()(n,a))}))}}return t}a.default=angular.module("deskworks.companySnapshotSalesByCategoryDirective",["debounce","deskworks.setup.service",k.a.name,P.a.name,$.default.name,O.a.name,x.default.name,T.default.name,R.a.name,A.a.name]).directive("companySnapshotSalesByCategory",(function(){return{template:w.a,restrict:"E",scope:!0,controller:"CompanySnapshotSalesByCategoryDirectiveCtrl as $ctrl",bindToController:{params:"<"}}})).controller("CompanySnapshotSalesByCategoryDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","CompanySnapshotSalesByCategory","companySnapshotSalesByCategoryChart","companySnapshotSalesByCategoryDetailedChart","optsChartPeriod",function(t,a,e,n,r,o,i,s,l,c,d){var u=this,p=i.paramsChanged;function f(t){u.params.selected=t}u.optsPeriod=d,u.data=null,u.chartLevels=[],u.$onInit=function(){t.$watch("$ctrl.params",o((function(t,e){u.params.period=u.params.period||"lastMonth",u.params.byPeriod=u.params.byPeriod||"month",u.params.from&&u.params.to&&(p(t,e,["from","to"])&&(u.data=null,u.params.selected=null),u.data=u.data||(u.spin=!0,s.get(u.params).catch((function(t){return n.error(t,"Failed to get Sales By Category widget data.")}))),a.all({data:u.data}).finally((function(){u.spin=!1})).then((function(t){u.data=t.data})).then((function(){null!==u.params.selected?u.chart=c(M(M({},u.data),{},{params:u.params})):u.chart=l(M(M({},u.data),{},{params:u.params,onChartClick:f}))})))}),100),!0)}}])},t0Cx:function(t,a,e){var n={"./dashboard/company-snapshot-dashboard.controller.js":"/48J","./dashboard/company-snapshot-dashboard.service.js":"nZ4u","./widgets/company-snapshot-widget.directive.js":"iPri","./widgets/company-snapshot-widgets-list.service.js":"TOZU","./widgets/income/company-snapshot-income-chart.service.js":"7WcZ","./widgets/income/company-snapshot-income.directive.js":"YBaG","./widgets/income/company-snapshot-income.service.js":"OzIr","./widgets/occupancy-vacancy/company-snapshot-occupancy-vacancy-chart.service.js":"RCE7","./widgets/occupancy-vacancy/company-snapshot-occupancy-vacancy.directive.js":"XY8H","./widgets/occupancy-vacancy/company-snapshot-occupancy-vacancy.service.js":"eIep","./widgets/overall-space-utilization/company-snapshot-overall-space-utilization-chart.service.js":"4oxB","./widgets/overall-space-utilization/company-snapshot-overall-space-utilization.directive.js":"1gcy","./widgets/overall-space-utilization/company-snapshot-overall-space-utilization.service.js":"w8a8","./widgets/recurring-billings/company-snapshot-recurring-billings-chart.service.js":"hhOz","./widgets/recurring-billings/company-snapshot-recurring-billings.directive.js":"N8hn","./widgets/recurring-billings/company-snapshot-recurring-billings.service.js":"gd06","./widgets/reservation-space-utilization/company-snapshot-reservation-space-utilization-chart.service.js":"l3St","./widgets/reservation-space-utilization/company-snapshot-reservation-space-utilization.directive.js":"Pljh","./widgets/reservation-space-utilization/company-snapshot-reservation-space-utilization.service.js":"yyB2","./widgets/revenue-forecast/company-snapshot-revenue-forecast-chart.service.js":"W5dq","./widgets/revenue-forecast/company-snapshot-revenue-forecast.directive.js":"N3tr","./widgets/revenue-forecast/company-snapshot-revenue-forecast.service.js":"3FR+","./widgets/sales-by-category/company-snapshot-sales-by-category-chart.service.js":"yWkM","./widgets/sales-by-category/company-snapshot-sales-by-category-detailed-chart.service.js":"kLbC","./widgets/sales-by-category/company-snapshot-sales-by-category.directive.js":"pyLT","./widgets/sales-by-category/company-snapshot-sales-by-category.service.js":"UuGA","./widgets/sales/company-snapshot-sales-chart.service.js":"w6R9","./widgets/sales/company-snapshot-sales.directive.js":"Mqye","./widgets/sales/company-snapshot-sales.service.js":"MAnv"};function r(t){var a=o(t);return e(a)}function o(t){if(!e.o(n,t)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=o,t.exports=r,r.id="t0Cx"},w6R9:function(t,a,e){"use strict";e.r(a);var n=e("6RpP"),r=e.n(n),o=e("yCd9"),i=e.n(o),s=e("KK/u"),l=e.n(s),c=e("ipr/"),d=e.n(c),u=e("G6E5"),p=e("aGVL"),f=e("bU+R"),m=e.n(f);a.default=angular.module("deskworks.companySnapshotSalesChart",[u.a.name,p.a.name]).factory("companySnapshotSalesChart",["$filter","$translate","chartColors","reportHelper",function(t,a,e,n){return function(o){var s,c,u=o.periods,p=o.data,f=o.totals,y=o.params;p=d()(s=l()(n).call(n,p,"total",!0)).call(s,0,12);var h=i()(u).call(u,(function(t){return t.title})),g=r()(c=i()(p).call(p,(function(t,a){return{label:t.name,data:t.totals,backgroundColor:e[a],maxBarThickness:80}}))).call(c,[{label:a.instant("GLOBAL.TOTAL"),data:i()(f).call(f,(function(t){return 0})),backgroundColor:"transparent",maxBarThickness:80,datalabels:{display:!0,align:"end",offset:-3,color:"#000",textStrokeWidth:0,font:{weight:"bold"}}}]);return{type:"bar",plugins:[m.a],data:{labels:h,datasets:g},options:{plugins:{datalabels:{display:"auto",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,formatter:function(a,e){return t("ncurrency")(e.datasetIndex<g.length-1?a:f[e.dataIndex],void 0,0)}}},tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(a,e){var n=e.datasets[a.datasetIndex];return n.label+": "+t("ncurrency")(a.datasetIndex<g.length-1?n.data[a.index]:f[a.index])}}},layout:{padding:{top:15}},legend:{display:!0,position:y.wide?"right":"bottom"},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{min:0,callback:function(a){return t("ncurrency")(a,void 0,0)}}}]}}}}}])},w8a8:function(t,a,e){"use strict";e.r(a);var n=e("WSeP"),r=e.n(n),o=e("nbuU"),i=e.n(o),s=e("Xp5u");a.default=angular.module("deskworks.CompanySnapshotOverallSpaceUtilization",["ngResource","datesDeserializer","deskworks.config",s.a.name]).factory("CompanySnapshotOverallSpaceUtilization",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,n,o,s,l){var c=n(["periods.from","periods.to"]),d=t(o.getApiAbsUrl("/company-snapshot/overall-space-utilization"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,c]}});return{get:function(t){return d.get({byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd"),to:a("date")(t.to,"yyyy-MM-dd")}).$promise.then((function(a){return function(t){var a,e=t.data,n=t.params.byPeriod,o=void 0===n?"month":n,s=i()(l).call(l,(function(t){return t.id===o}));return r()(a=e.periods).call(a,(function(t){t.title=s.format(t.from,t.to)})),e}({data:a,params:t})}))}}}])},yWkM:function(t,a,e){"use strict";e.r(a);var n=e("6RpP"),r=e.n(n),o=e("yCd9"),i=e.n(o),s=e("KK/u"),l=e.n(s),c=e("ipr/"),d=e.n(c),u=e("G6E5"),p=e("bU+R"),f=e.n(p);a.default=angular.module("deskworks.companySnapshotSalesByCategoryChart",[u.a.name]).factory("companySnapshotSalesByCategoryChart",["$filter","$rootScope","reportHelper",function(t,a,e){return function(n){var o,s=n.data,c=n.onChartClick;n.params;s=d()(o=l()(e).call(e,s,"total",!0)).call(o,0,12);var u=i()(s).call(s,(function(t){return t.name})),p=[{data:i()(s).call(s,(function(t){return t.totalPercentage}))}];return{type:"pie",plugins:[f.a],data:{labels:u,datasets:p},options:{plugins:{datalabels:{display:"auto",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,formatter:function(t,a){var e,n=s[a.dataIndex],o=n.name,i=n.totalPercentage;return r()(e="".concat(o,"\n")).call(e,i,"%")}}},tooltips:{displayColors:!0,callbacks:{label:function(a){var e,n,o=s[a.index],i=o.name,l=o.totalPercentage,c=o.total;return r()(e=r()(n="".concat(i,": ")).call(n,l,"% (")).call(e,t("ncurrency")(c),")")}}},layout:{padding:{top:15}},legend:{display:!0,position:"right"},onClick:function(t,e){a.$apply((function(t){var a=e[0]&&e[0]._index;angular.isNumber(a)&&c(a)}))}}}}}])},yyB2:function(t,a,e){"use strict";e.r(a);var n=e("YtL8"),r=e.n(n),o=e("yCd9"),i=e.n(o),s=e("WSeP"),l=e.n(s),c=e("nbuU"),d=e.n(c),u=e("Xp5u");a.default=angular.module("deskworks.CompanySnapshotReservationSpaceUtilization",["ngResource","datesDeserializer","deskworks.config",u.a.name]).factory("CompanySnapshotReservationSpaceUtilization",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,n,o,s,c){var u=n(["periods.from","periods.to"]),p=t(o.getApiAbsUrl("/company-snapshot/reservation-space-utilization"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,u]}});return{get:function(t){return p.get({byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd"),to:a("date")(t.to,"yyyy-MM-dd")}).$promise.then((function(a){return function(t){var a,e,n=t.data,o=t.params.byPeriod,u=void 0===o?"month":o,p=d()(c).call(c,(function(t){return t.id===u}));return l()(a=n.periods).call(a,(function(t){t.title=p.format(t.from,t.to)})),l()(e=n.data).call(e,(function(t){var a,e;t.utilizations=i()(a=t.usageTotals).call(a,(function(a){return s.round(100*a/t.expectedUse,1)})),t.total=s.round(r()(e=t.usageTotals).call(e,(function(t,a){return t+a}),0))})),n}({data:a,params:t})}))}}}])}}]);