{"version":3,"sources":["webpack:///./bundles/doorflow sync .*\\.tpl\\.html$","webpack:///./bundles/doorflow sync \\..+\\/.+\\.js$","webpack:///./bundles/doorflow/access-group/doorflow-product-access-group.directive.js","webpack:///./bundles/doorflow/access-group/doorflow-product-access-group.tpl.html","webpack:///./bundles/doorflow/access-group/doorflow-reservation-unit-access-group.directive.js","webpack:///./bundles/doorflow/access-group/doorflow-reservation-unit-access-group.tpl.html","webpack:///./bundles/doorflow/index.js","webpack:///./bundles/doorflow/services/doorflow-access-group.service.js","webpack:///./bundles/doorflow/services/doorflow-center.service.js","webpack:///./bundles/doorflow/services/doorflow-product.service.js","webpack:///./bundles/doorflow/services/doorflow-reservation-unit.service.js","webpack:///./bundles/doorflow/services/doorflow-settings.service.js","webpack:///./bundles/doorflow/services/doorflow-site.service.js","webpack:///./bundles/doorflow/services/doorflow-user.service.js","webpack:///./bundles/doorflow/settings/doorflow-settings.directive.js","webpack:///./bundles/doorflow/settings/doorflow-settings.tpl.html","webpack:///./bundles/doorflow/user-access/doorflow-user-access.directive.js","webpack:///./bundles/doorflow/user-access/doorflow-user-access.tpl.html"],"names":["angular","module","directive","$compile","$templateCache","templateUrl","restrict","scope","controller","bindToController","save","productId","$q","dwAlerts","helper","state","DoorflowAccessGroup","DoorflowCenter","DoorflowProduct","$ctrl","$onInit","load","promises","centers","query","catch","err","error","product","get","getCurrentCenterId","all","then","result","center","enabled","groups","length","reservationUnitId","DoorflowReservationUnit","reservationUnit","index","$injector","importAll","r","js","require","loadNewModules","m","default","name","invoke","ctx","forEach","key","put","replace","factory","$resource","deskworksConfig","res","getApiAbsUrl","centerId","$promise","update","method","data","id","userId","debounce","centerService","DoorflowSettings","DoorflowSite","doorflowSettings","getCenters","doorflowCenters","doorflowSites","spin","finally","saveSettings","form","$invalid","saveCenter","$$spin","changeSite","DoorflowUser","doorflowCenter","isUid","doorflowUser","doorflowEnabled"],"mappings":"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","file":"doorflow~._bundles_doorflow .js?_rev=6d73195c834b62b8cb18","sourcesContent":["var map = {\n\t\"./access-group/doorflow-product-access-group.tpl.html\": \"./bundles/doorflow/access-group/doorflow-product-access-group.tpl.html\",\n\t\"./access-group/doorflow-reservation-unit-access-group.tpl.html\": \"./bundles/doorflow/access-group/doorflow-reservation-unit-access-group.tpl.html\",\n\t\"./settings/doorflow-settings.tpl.html\": \"./bundles/doorflow/settings/doorflow-settings.tpl.html\",\n\t\"./user-access/doorflow-user-access.tpl.html\": \"./bundles/doorflow/user-access/doorflow-user-access.tpl.html\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/doorflow sync recursive .*\\\\.tpl\\\\.html$\";","var map = {\n\t\"./access-group/doorflow-product-access-group.directive.js\": \"./bundles/doorflow/access-group/doorflow-product-access-group.directive.js\",\n\t\"./access-group/doorflow-reservation-unit-access-group.directive.js\": \"./bundles/doorflow/access-group/doorflow-reservation-unit-access-group.directive.js\",\n\t\"./services/doorflow-access-group.service.js\": \"./bundles/doorflow/services/doorflow-access-group.service.js\",\n\t\"./services/doorflow-center.service.js\": \"./bundles/doorflow/services/doorflow-center.service.js\",\n\t\"./services/doorflow-product.service.js\": \"./bundles/doorflow/services/doorflow-product.service.js\",\n\t\"./services/doorflow-reservation-unit.service.js\": \"./bundles/doorflow/services/doorflow-reservation-unit.service.js\",\n\t\"./services/doorflow-settings.service.js\": \"./bundles/doorflow/services/doorflow-settings.service.js\",\n\t\"./services/doorflow-site.service.js\": \"./bundles/doorflow/services/doorflow-site.service.js\",\n\t\"./services/doorflow-user.service.js\": \"./bundles/doorflow/services/doorflow-user.service.js\",\n\t\"./settings/doorflow-settings.directive.js\": \"./bundles/doorflow/settings/doorflow-settings.directive.js\",\n\t\"./user-access/doorflow-user-access.directive.js\": \"./bundles/doorflow/user-access/doorflow-user-access.directive.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/doorflow sync recursive \\\\..+\\\\/.+\\\\.js$\";","/**\n * Product -> Doorflow Access Group directive\n */\nexport default angular.module('deskworks.doorflowProductAccessGroupDirective', [\n  'deskworks.DoorflowAccessGroup',\n  'deskworks.DoorflowCenter',\n  'deskworks.DoorflowProduct',\n])\n\n  .directive('doorflowProductAccessGroup', function($compile, $templateCache) {\n    const templateUrl = 'access-group/doorflow-product-access-group.tpl.html';\n    return {\n      templateUrl,\n      restrict: 'E',\n      scope: true,\n      controller: 'DoorflowProductAccessGroupCtrl as $ctrl',\n      bindToController: {\n        save: '=',\n        productId: '<',\n      },\n    };\n  })\n\n    .controller('DoorflowProductAccessGroupCtrl', function($q, dwAlerts, helper, state,\n                                                           DoorflowAccessGroup, DoorflowCenter, DoorflowProduct) {\n      const $ctrl = this;\n\n      $ctrl.$onInit = function() {\n        $ctrl.load();\n      };\n\n      /**\n       * Load data\n       */\n      $ctrl.load = function() {\n        var promises = {\n          centers: DoorflowCenter.query()\n            .catch(err => dwAlerts.error(err, 'Failed to query Doorflow centers.')),\n          product: DoorflowProduct.get(state.getCurrentCenterId(), $ctrl.productId)\n            .catch(err => dwAlerts.error(err, 'Failed to load Doorflow product.')),\n        };\n        return $q.all(promises)\n          .then(result => {\n            $ctrl.product = result.product;\n\n            var center = helper.find(result.centers, state.getCurrentCenterId());\n            if (center && center.enabled) {\n              return DoorflowAccessGroup.query(state.getCurrentCenterId())\n                                        .catch(err => dwAlerts.error(err, 'Failed to query DoorFlow groups.'))\n                                        .then(groups => {\n                                          $ctrl.groups = groups;\n                                          if ($ctrl.groups && $ctrl.groups.length) $ctrl.save = save; // expose save method only if have accounts\n                                        });\n            }\n          });\n      };\n\n/**\n * Save settings\n */\nfunction save() {\n  return DoorflowProduct.save(state.getCurrentCenterId(), $ctrl.productId, $ctrl.product)\n                        .catch(err => dwAlerts.error(err, 'Failed to save Doorflow product.'));\n}\n});\n","// Module\nvar code = \"<label class=\\\"ff-row animate-collapse\\\" ng-if=\\\"$ctrl.groups.length\\\"> <ff-label flex=\\\"0 0 102px\\\" class=\\\"ff-small\\\"><span translate=\\\"PRODUCTS.DOORFLOW_GROUP\\\"></span></ff-label> <ff-select name=\\\"doorflowGroup\\\" ff-model=\\\"$ctrl.product.doorflowGroupId\\\" ff-options=\\\"opt.id as opt.name for opt in $ctrl.groups\\\"> <option value=\\\"\\\">-</option> </ff-select> </label> \";\n// Exports\nmodule.exports = code;","/**\n * Product -> Doorflow Access Group directive\n */\nexport default angular.module('deskworks.doorflowReservationUnitAccessGroupDirective', [\n  'deskworks.DoorflowAccessGroup',\n  'deskworks.DoorflowCenter',\n  'deskworks.DoorflowReservationUnit',\n])\n\n  .directive('doorflowReservationUnitAccessGroup', function($compile, $templateCache) {\n    const templateUrl = 'access-group/doorflow-reservation-unit-access-group.tpl.html';\n    return {\n      templateUrl,\n      restrict: 'E',\n      scope: true,\n      controller: 'DoorflowReservationUnitAccessGroupCtrl as $ctrl',\n      bindToController: {\n        save: '=',\n        reservationUnitId: '<',\n      },\n    };\n  })\n\n    .controller('DoorflowReservationUnitAccessGroupCtrl', function($q, dwAlerts, helper, state,\n                                                                   DoorflowAccessGroup, DoorflowCenter, DoorflowReservationUnit) {\n      const $ctrl = this;\n\n      $ctrl.$onInit = function() {\n        $ctrl.load();\n      };\n\n      /**\n       * Load data\n       */\n      $ctrl.load = function() {\n        var promises = {\n          centers: DoorflowCenter.query()\n            .catch(err => dwAlerts.error(err, 'Failed to query Doorflow centers.')),\n          reservationUnit: DoorflowReservationUnit.get(state.getCurrentCenterId(), $ctrl.reservationUnitId)\n            .catch(err => dwAlerts.error(err, 'Failed to load Doorflow reservation unit.')),\n        };\n        return $q.all(promises)\n          .then(result => {\n            $ctrl.reservationUnit = result.reservationUnit;\n\n            var center = helper.find(result.centers, state.getCurrentCenterId());\n            if (center && center.enabled) {\n              return DoorflowAccessGroup.query(state.getCurrentCenterId())\n                                        .catch(err => dwAlerts.error(err, 'Failed to query DoorFlow groups.'))\n                                        .then(groups => {\n                                          $ctrl.groups = groups;\n                                          if ($ctrl.groups && $ctrl.groups.length) $ctrl.save = save; // expose save method only if have accounts\n                                        });\n            }\n          });\n      };\n\n/**\n * Save settings\n */\nfunction save() {\n  return DoorflowReservationUnit.save(state.getCurrentCenterId(), $ctrl.reservationUnitId, $ctrl.reservationUnit)\n                                .catch(err => dwAlerts.error(err, 'Failed to save Doorflow reservation unit.'));\n}\n});\n","// Module\nvar code = \"<label class=\\\"ff-row animate-collapse\\\" ng-if=\\\"$ctrl.groups.length\\\"> <ff-label flex=\\\"0 0 102px\\\" class=\\\"ff-small\\\"><span translate=\\\"PRODUCTS.DOORFLOW_GROUP\\\"></span></ff-label> <ff-select name=\\\"doorflowGroup\\\" ff-model=\\\"$ctrl.reservationUnit.doorflowGroupId\\\" ff-options=\\\"opt.id as opt.name for opt in $ctrl.groups\\\"> <option value=\\\"\\\">-</option> </ff-select> </label> \";\n// Exports\nmodule.exports = code;","const index = ['$injector', function index($injector) {\n  // JS\n  const importAll = r => r.keys().map(r);\n  const js = importAll(require.context('./', true, /\\..+\\/.+\\.js$/));\n  $injector.loadNewModules(js.map(m => m.default.name));\n\n  // Templates\n  $injector.invoke(['$templateCache', function($templateCache) {\n    const ctx = require.context('./', true, /.*\\.tpl\\.html$/);\n    ctx.keys().forEach(key => $templateCache.put(key.replace(/^\\.\\//, ''), ctx(key)));\n  }]);\n}];\n\nexport default index;\n","export default angular.module('deskworks.DoorflowAccessGroup', [\n  'ngResource',\n  'deskworks.config',\n])\n\n  .factory('DoorflowAccessGroup', function($resource, deskworksConfig) {\n    const res = $resource(deskworksConfig.getApiAbsUrl('/doorflow/centers/:centerId/doorflow-groups'));\n\n    return {\n      query: centerId => {\n        return res.query({ centerId }).$promise;\n      },\n    };\n  });\n","export default angular.module('deskworks.DoorflowCenter', [\n  'ngResource',\n  'deskworks.config',\n])\n\n  .factory('DoorflowCenter', function($resource, deskworksConfig) {\n\n    const res = $resource(deskworksConfig.getApiAbsUrl('/doorflow/centers/:centerId'), {}, {\n      update: { method: 'PUT' },\n    });\n\n    return {\n      query: () => res.query().$promise,\n\n      save: data => res.update({ centerId: data.id }, data).$promise,\n    };\n  });\n","export default angular.module('deskworks.DoorflowProduct', [\n    'ngResource',\n    'deskworks.config',\n])\n\n    .factory('DoorflowProduct', function($resource, deskworksConfig) {\n        const res = $resource(deskworksConfig.getApiAbsUrl('/doorflow/centers/:centerId/products/:productId'), {}, {\n            get: { method: 'GET' },\n            update: { method: 'PUT' },\n        });\n\n        return {\n            get: function(centerId, productId) {\n                return res.get({ centerId, productId }).$promise;\n            },\n\n            save: function(centerId, productId, data) {\n                return res.update({ centerId, productId }, data).$promise;\n            },\n        };\n    });\n","export default angular.module('deskworks.DoorflowReservationUnit', [\n    'ngResource',\n    'deskworks.config',\n])\n\n    .factory('DoorflowReservationUnit', function($resource, deskworksConfig) {\n        const res = $resource(deskworksConfig.getApiAbsUrl('/doorflow/centers/:centerId/reservation-units/:reservationUnitId'), {}, {\n            get: { method: 'GET' },\n            update: { method: 'PUT' },\n        });\n\n        return {\n            get: function(centerId, reservationUnitId) {\n                return res.get({ centerId, reservationUnitId }).$promise;\n            },\n\n            save: function(centerId, reservationUnitId, data) {\n                return res.update({ centerId, reservationUnitId }, data).$promise;\n            },\n        };\n    });\n","export default angular.module('deskworks.DoorflowSettings', [\n  'ngResource',\n  'deskworks.config',\n])\n\n  .factory('DoorflowSettings', function($resource, deskworksConfig) {\n\n    const res = $resource(deskworksConfig.getApiAbsUrl('/doorflow/settings'), {}, {\n      update: { method: 'PUT' },\n    });\n\n    return {\n      get: () => res.get().$promise,\n\n      save: data => res.update({}, data).$promise,\n    };\n  });\n","export default angular.module('deskworks.DoorflowSite', [\n  'ngResource',\n  'deskworks.config',\n])\n\n  .factory('DoorflowSite', function($resource, deskworksConfig) {\n\n    const res = $resource(deskworksConfig.getApiAbsUrl('/doorflow/doorflow-sites'), {}, {\n      update: { method: 'PUT' },\n    });\n\n    return {\n      query: () => res.query().$promise,\n    };\n  });\n","export default angular.module('deskworks.DoorflowUser', [\n  'ngResource',\n  'deskworks.config',\n])\n\n  .factory('DoorflowUser', function($resource, deskworksConfig) {\n\n    const res = $resource(deskworksConfig.getApiAbsUrl('/doorflow/centers/:centerId/users/:userId'), {}, {\n      update: { method: 'PUT' },\n    });\n\n    return {\n      get: (centerId, userId) => res.get({ centerId, userId }).$promise,\n\n      save: (centerId, data) => res.update({ centerId, userId: data.id }, data).$promise,\n    };\n  });\n","/**\n * Integrations Setup -> DoorFlow Settings directive\n */\nexport default angular.module('deskworks.doorflowSettingsDirective', [\n  'debounce',\n  'deskworks.DoorflowSettings',\n  'deskworks.DoorflowCenter',\n  'deskworks.DoorflowSite',\n  'deskworks.DoorflowAccessGroup',\n  'deskworks.center.service',\n])\n\n  .directive('doorflowSettings', function() {\n    const templateUrl = 'settings/doorflow-settings.tpl.html';\n    return {\n      templateUrl,\n      restrict: 'E',\n      scope: true,\n      controller: 'DoorflowSettingsCtrl as $ctrl',\n    };\n  })\n\n  .controller('DoorflowSettingsCtrl', function(dwAlerts, $q, debounce, helper, centerService,\n              DoorflowSettings, DoorflowCenter, DoorflowAccessGroup, DoorflowSite) {\n    const $ctrl = this;\n\n    $ctrl.$onInit = () => {\n      $ctrl.load();\n    };\n\n    /**\n     * Load settings\n     */\n    $ctrl.load = () => {\n      const promises = {\n        doorflowSettings: DoorflowSettings.get()\n          .catch(err => dwAlerts.error(err, 'Failed to load DoorFlow settings.')),\n        centers: centerService.getCenters()\n          .catch(err => dwAlerts.error(err, 'Failed to query centers.')),\n        doorflowCenters: DoorflowCenter.query()\n          .catch(err => dwAlerts.error(err, 'Failed to query DoorFlow centers.')),\n        doorflowSites: DoorflowSite.query()\n          .catch(err => dwAlerts.error(err, 'Failed to query DoorFlow sites.')),\n      };\n\n      $ctrl.spin = true;\n\n      return $q.all(promises)\n        .then(result => {\n          $ctrl.doorflowSettings = result.doorflowSettings;\n          $ctrl.doorflowCenters = result.doorflowCenters;\n          $ctrl.doorflowSites = result.doorflowSites;\n          return result;\n        })\n        .finally(() => { $ctrl.spin = false; });\n    };\n\n    /**\n     * Save DoorFlow settings\n     */\n    $ctrl.saveSettings = debounce(saveSettings, 1000);\n    function saveSettings(form) {\n      if (form && form.$invalid) return;\n      $ctrl.spin = true;\n      return DoorflowSettings.save($ctrl.doorflowSettings)\n        .catch(err => dwAlerts.error(err, 'Failed to save DoorFlow settings.'))\n        .finally(() => { $ctrl.spin = false; })\n        .then(() => {\n          delete $ctrl.doorflowCenters;\n          return $ctrl.load();\n        });\n    }\n\n    /**\n     * Save DoorFlow center\n     */\n    $ctrl.saveCenter = debounce(saveCenter, 500);\n    function saveCenter(center, form) {\n      if (form && form.$invalid) return;\n      center.$$spin = true;\n      return DoorflowCenter.save(center)\n        .finally(() => { center.$$spin = false; })\n        .catch(err => dwAlerts.error(err, 'Failed to save DoorFlow center.'));\n    }\n\n    /**\n     * Change DoorFlow Site handler\n     */\n    $ctrl.changeSite = (center, form) => {\n      return $ctrl.saveCenter(center, form);\n    };\n  });\n","// Module\nvar code = \"<ff-panel> <ff-panel-header ff-spin=\\\"$ctrl.spin\\\" class=\\\"ff-spin-right\\\"> <span translate=\\\"INTEGRATIONS_SETUP.DOORFLOW.HEADER\\\"></span> </ff-panel-header> <form name=\\\"form\\\" novalidate ff-dim=\\\"$ctrl.spin\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 120px\\\"><req translate=\\\"INTEGRATIONS_SETUP.API_KEY\\\"></req></ff-label> <ff-text ff-model=\\\"$ctrl.doorflowSettings.apiKey\\\" ff-change=\\\"$ctrl.saveSettings(form)\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'INTEGRATIONS_SETUP.API_KEY' | translate}}\\\"></ff-text> </label> </form> <form name=\\\"form\\\" novalidate ng-repeat=\\\"center in $ctrl.doorflowCenters\\\" class=\\\"animate-collapse\\\"> <ff-header ff-dim=\\\"center.$$spin\\\" style=\\\"padding-top:.6rem\\\"><cell>{{center.$$name}}</cell></ff-header> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"1 1 270px\\\"><span translate=\\\"INTEGRATIONS_SETUP.ENABLED\\\"></span></ff-label> <ff-static flex=\\\"1 1 305px\\\"> <ff-checkbox name=\\\"enabled\\\" ff-model=\\\"center.enabled\\\" ff-change=\\\"$ctrl.saveCenter(center, form)\\\"></ff-checkbox> </ff-static> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"1 1 270px\\\"><req translate=\\\"INTEGRATIONS_SETUP.DOORFLOW.SITE\\\"></req></ff-label> <ff-select flex=\\\"1 1 305px\\\" name=\\\"doorflowSiteId\\\" ff-model=\\\"center.doorflowSiteId\\\" ff-required=\\\"true\\\" ff-options=\\\"site.id as site.name for site in $ctrl.doorflowSites\\\" ff-change=\\\"$ctrl.changeSite(center, form)\\\" ff-validate-alert=\\\"{{'INTEGRATIONS_SETUP.DOORFLOW.SITE' | translate}}\\\"></ff-select> </label> </form> </ff-panel> \";\n// Exports\nmodule.exports = code;","/**\n * Member -> DoorFlow User Access directive\n */\nexport default angular.module('deskworks.doorflowUserAccessDirective', [\n  'deskworks.DoorflowCenter',\n  'deskworks.DoorflowUser',\n])\n\n  .directive('doorflowUserAccess', function() {\n    const templateUrl = 'user-access/doorflow-user-access.tpl.html';\n    return {\n      templateUrl,\n      restrict: 'E',\n      scope: true,\n      controller: 'DoorflowUserAccessCtrl as $ctrl',\n      bindToController: {\n        userId: '<',\n        save: '=',\n      },\n    };\n  })\n\n  .controller('DoorflowUserAccessCtrl', function($q, dwAlerts, helper, state, DoorflowCenter, DoorflowUser) {\n    const $ctrl = this;\n\n    $ctrl.$onInit = () => {\n      $ctrl.load();\n    };\n\n    /**\n     * Load data\n     */\n    $ctrl.load = () => {\n      return DoorflowCenter.query()\n        .catch(err => dwAlerts.error(err, 'Failed to query DoorFlow centers.'))\n        .then(doorflowCenters => {\n          $ctrl.doorflowCenter = helper.find(doorflowCenters, state.getCurrentCenterId());\n\n          if (!$ctrl.doorflowCenter || !$ctrl.doorflowCenter.enabled) return;\n\n          const promises = {};\n\n          if ($ctrl.userId && $ctrl.userId !== 'new' && !helper.isUid($ctrl.userId)) {\n            promises.doorflowUser = DoorflowUser.get(state.getCurrentCenterId(), $ctrl.userId)\n              .catch(err => dwAlerts.error(err, 'Failed to get DoorFlow user.'));\n          }\n\n          return $q.all(promises)\n            .then(result => {\n              if (result.doorflowUser) {\n                $ctrl.doorflowUser = result.doorflowUser;\n              } else {\n                $ctrl.doorflowUser = { doorflowEnabled: false };\n              }\n\n              $ctrl.save = save;\n            });\n        });\n    };\n\n    /**\n     * Save DoorFlow user\n     */\n    function save() {\n      if (!$ctrl.doorflowCenter.enabled) return;\n\n      $ctrl.doorflowUser.id = $ctrl.userId;\n      return DoorflowUser.save(state.getCurrentCenterId(), $ctrl.doorflowUser)\n        .catch(err => dwAlerts.error(err, 'Failed to save DoorFlow user.'));\n    }\n  });\n","// Module\nvar code = \"<label class=\\\"ff-row animate-collapse\\\" ng-if=\\\"$ctrl.doorflowCenter.enabled\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.MEMBERSHIP.DOORFLOW_ACCESS\\\"></span></ff-label> <ff-checkbox name=\\\"doorflowEnabled\\\" ff-model=\\\"$ctrl.doorflowUser.doorflowEnabled\\\"> <span translate=\\\"USER_PROFILE.MEMBERSHIP.DOORFLOW_ACCESS_DESCRIPTION\\\"></span> </ff-checkbox> </label> \";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}