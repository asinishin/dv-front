{"version":3,"sources":["webpack:///./bundles/reports/mailbox-report/mailbox-report-columns.service.js","webpack:///./bundles/reports/mailbox-report/mailbox-report.controller.js","webpack:///./bundles/reports/mailbox-report/mailbox-report.service.js","webpack:///./bundles/reports/mailbox-report/mailbox-report.tpl.html","webpack:///./bundles/reports/member-statement/member-statement-columns.service.js","webpack:///./bundles/reports/member-statement/member-statement.controller.js","webpack:///./bundles/reports/member-statement/member-statement.service.js","webpack:///./bundles/reports/member-statement/member-statement.tpl.html","webpack:///./bundles/reports/member-usage-report/member-usage-report-columns.service.js","webpack:///./bundles/reports/member-usage-report/member-usage-report.controller.js","webpack:///./bundles/reports/member-usage-report/member-usage-report.service.js","webpack:///./bundles/reports/member-usage-report/member-usage-report.tpl.html","webpack:///./bundles/reports/membership-report/membership-report-columns.service.js","webpack:///./bundles/reports/membership-report/membership-report.controller.js","webpack:///./bundles/reports/membership-report/membership-report.service.js","webpack:///./bundles/reports/membership-report/membership-report.tpl.html","webpack:///./bundles/reports/pass-usage-report/pass-usage-report-columns.service.js","webpack:///./bundles/reports/pass-usage-report/pass-usage-report.controller.js","webpack:///./bundles/reports/pass-usage-report/pass-usage-report.service.js","webpack:///./bundles/reports/pass-usage-report/pass-usage-report.tpl.html","webpack:///./bundles/reports/passport-reservation-usage-report/passport-reservation-usage-report-columns.service.js","webpack:///./bundles/reports/passport-reservation-usage-report/passport-reservation-usage-report.controller.js","webpack:///./bundles/reports/passport-reservation-usage-report/passport-reservation-usage-report.service.js","webpack:///./bundles/reports/passport-reservation-usage-report/passport-reservation-usage-report.tpl.html","webpack:///./bundles/reports/payment-reconciliation-report/payment-reconciliation-report-columns.service.js","webpack:///./bundles/reports/payment-reconciliation-report/payment-reconciliation-report.controller.js","webpack:///./bundles/reports/payment-reconciliation-report/payment-reconciliation-report.service.js","webpack:///./bundles/reports/payment-reconciliation-report/payment-reconciliation-report.tpl.html","webpack:///./bundles/reports/price-list-report/price-list-report-columns.service.js","webpack:///./bundles/reports/price-list-report/price-list-report.controller.js","webpack:///./bundles/reports/price-list-report/price-list-report.service.js","webpack:///./bundles/reports/price-list-report/price-list-report.tpl.html","webpack:///./bundles/reports/product-report/product-report-columns.service.js","webpack:///./bundles/reports/product-report/product-report-data.service.js","webpack:///./bundles/reports/product-report/product-report.controller.js","webpack:///./bundles/reports/product-report/product-report.service.js","webpack:///./bundles/reports/product-report/product-report.tpl.html","webpack:///./bundles/reports/recurring-billing-change-report/opts-rbc-report-by-period.service.js","webpack:///./bundles/reports/recurring-billing-change-report/recurring-billing-change-chart.service.js","webpack:///./bundles/reports/recurring-billing-change-report/recurring-billing-change-data.service.js","webpack:///./bundles/reports/recurring-billing-change-report/recurring-billing-change-report-columns.service.js","webpack:///./bundles/reports/recurring-billing-change-report/recurring-billing-change-report.controller.js","webpack:///./bundles/reports/recurring-billing-change-report/recurring-billing-change-report.service.js","webpack:///./bundles/reports/recurring-billing-change-report/recurring-billing-change-report.tpl.html","webpack:///./bundles/reports/recurring-billing-churn-report/recurring-billing-churn-report-columns.service.js","webpack:///./bundles/reports/recurring-billing-churn-report/recurring-billing-churn-report.controller.js","webpack:///./bundles/reports/recurring-billing-churn-report/recurring-billing-churn-report.service.js","webpack:///./bundles/reports/recurring-billing-churn-report/recurring-billing-churn-report.tpl.html","webpack:///./bundles/reports/recurring-billing-report/recurring-billing-report-columns.service.js","webpack:///./bundles/reports/recurring-billing-report/recurring-billing-report.controller.js","webpack:///./bundles/reports/recurring-billing-report/recurring-billing-report.service.js","webpack:///./bundles/reports/recurring-billing-report/recurring-billing-report.tpl.html","webpack:///./bundles/reports/rent-roll-report/rent-roll-report-columns.service.js","webpack:///./bundles/reports/rent-roll-report/rent-roll-report.controller.js","webpack:///./bundles/reports/rent-roll-report/rent-roll-report.service.js","webpack:///./bundles/reports/rent-roll-report/rent-roll-report.tpl.html","webpack:///./bundles/reports/reservation-report/reservation-report-columns.service.js","webpack:///./bundles/reports/reservation-report/reservation-report.controller.js","webpack:///./bundles/reports/reservation-report/reservation-report.service.js","webpack:///./bundles/reports/reservation-report/reservation-report.tpl.html","webpack:///./bundles/reports/reservation-usage-report/reservation-usage-report-columns.service.js","webpack:///./bundles/reports/reservation-usage-report/reservation-usage-report.controller.js","webpack:///./bundles/reports/reservation-usage-report/reservation-usage-report.service.js","webpack:///./bundles/reports/reservation-usage-report/reservation-usage-report.tpl.html","webpack:///./bundles/reports/reservation-utilization-report/reservation-utilization-actual-expected-aggregate.service.js","webpack:///./bundles/reports/reservation-utilization-report/reservation-utilization-actual-expected-chart.service.js","webpack:///./bundles/reports/reservation-utilization-report/reservation-utilization-actual-expected-columns.service.js","webpack:///./bundles/reports/reservation-utilization-report/reservation-utilization-actual-expected-report.service.js","webpack:///./bundles/reports/reservation-utilization-report/reservation-utilization-detailed-actual-aggregate.service.js","webpack:///./bundles/reports/reservation-utilization-report/reservation-utilization-detailed-actual-chart.service.js","webpack:///./bundles/reports/reservation-utilization-report/reservation-utilization-detailed-actual-columns.service.js","webpack:///./bundles/reports/reservation-utilization-report/reservation-utilization-detailed-actual-report.service.js","webpack:///./bundles/reports/reservation-utilization-report/reservation-utilization-report.controller.js","webpack:///./bundles/reports/reservation-utilization-report/reservation-utilization-report.service.js","webpack:///./bundles/reports/reservation-utilization-report/reservation-utilization-report.tpl.html","webpack:///./bundles/reports/revenue-forecast-report/revenue-forecast-chart.service.js","webpack:///./bundles/reports/revenue-forecast-report/revenue-forecast-data.service.js","webpack:///./bundles/reports/revenue-forecast-report/revenue-forecast-report-columns.service.js","webpack:///./bundles/reports/revenue-forecast-report/revenue-forecast-report.controller.js","webpack:///./bundles/reports/revenue-forecast-report/revenue-forecast-report.service.js","webpack:///./bundles/reports/revenue-forecast-report/revenue-forecast-report.tpl.html","webpack:///./bundles/reports/security-deposit-report/security-deposit-report-columns.service.js","webpack:///./bundles/reports/security-deposit-report/security-deposit-report.controller.js","webpack:///./bundles/reports/security-deposit-report/security-deposit-report.service.js","webpack:///./bundles/reports/security-deposit-report/security-deposit-report.tpl.html"],"names":["angular","module","factory","$rootScope","$filter","$translate","cols","dataKey","_title","include","styles","minCellWidth","cellWidth","translate","$on","forEach","col","title","instant","pdfPreview","name","reportHelper","reportStyles","reportOptions","controller","$scope","$timeout","state","helper","ReportBuilder","MailboxReport","mailboxReportColumns","vm","config","reportName","reportOwnerRegion","reportColumns","columns","copy","getReportData","query","centerId","ownerId","regionId","$promise","setPageTitle","reportBuilder","debounceTimeout","$watch","_","orderBy","cancel","pdf","isUndefined","buildPdf","reportDataCallback","then","blob","downloadPdf","download","fileName","getReportFileName","downloadCsv","buildCsv","result","item","rows","reportData","idx","rowOdd","$resource","deskworksConfig","url","getApiAbsUrl","method","isArray","halign","v","csv","$route","user","MemberStatement","memberStatementColumns","reportDates","fromDate","moment","toDate","reportFor","fullNameCompany","get","getCurrentCenterId","userId","getCurrentUserId","userName","subtract","newVal","oldVal","isDefined","newDate","oldDate","isMoment","isSame","transactions","transaction","push","unshift","balanceForward","h2","totals","amountBilled","amountPaid","balance","depositRowStyles","depositRows","depositTransactions","length","depositTotals","reload","$q","datesDeserializer","desDates","transformResponse","fromJson","defaultOrder","MemberUsageReport","memberUsageReportColumns","usages","usage","date","checkInTime","clone","hour","minute","second","millisecond","add","offChangeUser","data","hoursIdx","findIndexByKeyValue","passesIdx","arr","Array","apply","val","hours","passes","usageHours","usagePasses","curr","unix","next","Math","round","row","max","deserializeNumbers","desNumbers","membershipFilter","$location","MembershipReport","membershipReportColumns","fields","params","extend","field","id","equals","deserialize","value","dwAlerts","debounce","PassUsageReport","passUsageReportColumns","$ctrl","paramsChanged","loadResources","getParam","startOf","endOf","resources","np","op","report","pointFirstInvalid","all","catch","err","error","dataToReport","doc","output","passesUsedCostTotal","passCreditAppliedCostTotal","costBalanceTotal","toNumber","passesUsedCost","passCreditAppliedCost","costBalance","totalRow","totalRowNameCell","content","toUpperCase","totalVal","extension","res","PassportReservationUsageReport","passportReservationUsageReportColumns","resUnits","obj","userTotal","join","userCompany","colSpan","duration","unit","unitName","total","startTime","endTime","h3","makeUsageDurations","PaymentReconciliationReport","paymentReconciliationReportColumns","splitIndex","daily","day","h1","billingMethods","orders","order","items","globalProps","key","byProductType","typeRows","type","totalsByProductType","fontStyle","style","catRows","totalsByProductCategory","cat","code","i","PriceListReport","priceListReportColumns","plNames","priceLists","plist","pricelists","indexOf","Boolean","prototype","valueOf","updatedAt","productTypes","productType","products","product","$yesno","$fixed","fixed","num","parseFloat","isNaN","toFixed","$ralign","$calign","colsByProductType","membership","registration","rental","print","services","optsProductType","c","ProductReport","productReportColumns","productReportData","paperSize","jsPDF","paperLayout","startY","pageMargins","drawHeader","previousAutoTable","finalY","text","setFontSize","setFont","getFont","fontName","autoTableText","toLowerCase","productService","membershipCategoryService","reservationCategoryService","optsBillingFrequency","optsCountCheckInsPer","getProducts","membershipCategories","reservationCategories","results","membershipTypeId","category","membershipCategory","passProductId","passProduct","p","reservationTypeId","reservationCategory","billingFrequency","freq","o","countCheckInsPer","opt","printerUsageFreeCopiesSettings","setting","printerUsageType","freeCount","showInSelfRegistration","hideInSelfRegistration","optsReportByPeriod","df","opts","_name","format","from","to","whitelabel","datasets","label","period","totalNew","maxBarThickness","backgroundColor","totalNotices","totalTermination","chart","labels","options","tooltips","mode","intersect","displayColors","callbacks","tooltipItem","dataset","datasetIndex","index","legend","display","position","scales","yAxes","ticks","min","callback","undefined","fcurr","fdate","revenue1","revenueFirstDay","ceil","floor","revenue2","revenueLastDay","totalTerminations","billings","billing","optsMembershipStatus","reportOrderBy","recurringBillingChangeData","recurringBillingChangeChart","recurringBillingChangeReportColumns","RecurringBillingChangeReport","optsRbcReportByPeriod","systemColors","byPeriod","optsByPeriod","periodConfig","optsBillingMethod","RecurringBillingChurnReport","recurringBillingChurnReportColumns","setParam","readonly","totalRows","totalIdx","tr","RecurringBillingReport","recurringBillingReportColumns","totalMonthly","totalQuarterly","totalSemiAnnual","totalAnnual","totalAsNeeded","numbersDeserializer","renewalDate","noticePeriod","noticeRequiredBy","Date","RentRollReport","rentRollReportColumns","k","amount","colIndex","firstTotalIdx","some","charges","sortData","recurringCharges","subtotals","t","charge","subtotalRow","productCategoryCode","productCategoryName","ReservationReport","reservationReportColumns","reservationFields","fieldColumns","f","$$filter","reservations","$$deserialize","ReservationUsageReport","reservationUsageReportColumns","totalsKeys","reduce","memberCompany","isNumber","categories","allUnits","u","actualUse","groups","sum","g","d","expectedUse","categoryId","utilization","units","expectedLabel","actualLabel","utilizationLabel","getProperty","xAxes","suggestedMin","suggestedMax","digits","reservationUtilizationActualExpectedColumns","reservationUtilizationReportCreateGrid","periods","newUnit","group","isSameOrAfter","isSameOrBefore","r","totalTime","acc","percents","reservationUtilizationDetailedActualColumns","perIdx","Error","per","chartDirective","reportByPeriodDirective","reservationUtilizationDetailedActualAggregate","reservationUtilizationDetailedActualReport","reservationUtilizationActualExpectedReport","reservationUtilizationActualExpectedAggregate","reservationUtilizationActualExpectedChart","reservationUtilizationDetailedActualChart","fileSaver","ReservationUtilizationReport","month","committed","committedAmount","atRisk","riskAmount","stacked","revenueForecastReportColumns","risk","revenueForecastData","revenueForecastChart","RevenueForecastReport","monthCount","optsMonthCount","SecurityDepositReport","securityDepositReportColumns","showDetails","reportColumnsFiltered","search","replace","watchToDate","getToday","isAfter","deposits","deposit","details","detail","orderId"],"mappings":"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","file":"reports~._bundles_reports_m.js?_rev=c622e9d7aebafd64a154","sourcesContent":["/**\n * Columns for Mailbox Report\n */\nexport default angular.module('deskworks.reports.mailboxReportColumns', [])\n  .factory('mailboxReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'number', _title: 'MAILBOX_REPORT.COLUMNS.BOX_ID', include: true,\n      },\n      {\n        dataKey: 'company', _title: 'MAILBOX_REPORT.COLUMNS.COMPANY', include: true,\n        styles: { minCellWidth: 150 },\n      },\n      {\n        dataKey: 'fullName', _title: 'MAILBOX_REPORT.COLUMNS.USER_NAME', include: true,\n        styles: { minCellWidth: 120 },\n      },\n      {\n        dataKey: 'handling', _title: 'MAILBOX_REPORT.COLUMNS.HANDLING', include: true,\n        styles: { cellWidth: 'wrap' },\n      },\n      {\n        dataKey: 'key', _title: 'MAILBOX_REPORT.COLUMNS.KEY_ID', include: true,\n        styles: { cellWidth: 'wrap' },\n      },\n      {\n        dataKey: 'names', _title: 'MAILBOX_REPORT.COLUMNS.OTHER_NAMES', include: true,\n      }\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.reports.mailboxReport', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportColumns',\n  'deskworks.reports.reportOwnerRegion',\n  'deskworks.reports.mailboxReport.service',\n  'deskworks.reports.mailboxReportColumns'\n])\n\n  .controller('MailboxReportCtrl', function($scope, $timeout, $translate, state, helper, reportHelper,\n                                            ReportBuilder, MailboxReport, mailboxReportColumns, reportStyles) {\n    const vm = this;\n\n    vm.config = {\n      reportName: $translate.instant('MAILBOX_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportOwnerRegion: {},\n      reportColumns: { columns: angular.copy(mailboxReportColumns) },\n      getReportData: function() {\n        return MailboxReport.query({\n          centerId: vm.config.reportOptions.centerId,\n          ownerId: vm.config.reportOwnerRegion.ownerId,\n          regionId: vm.config.reportOwnerRegion.regionId,\n        }).$promise;\n      },\n    };\n\n    state.setPageTitle(vm.config.reportName);\n\n    vm.reportBuilder = new ReportBuilder(vm.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    let debounceTimeout;\n    $scope.$watch(_ => ({ reportOptions: vm.config.reportOptions, reportColumns: vm.config.reportColumns, orderBy: vm.config.orderBy, reportOwnerRegion: vm.config.reportOwnerRegion }), _ => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(function() {\n        vm.pdf = null;\n        if (angular.isUndefined(vm.config.reportOptions.centerId)) return;\n        vm.reportBuilder.buildPdf(reportDataCallback).then(function(blob) { vm.pdf = blob; });\n      }, 100);\n    }, true);\n\n    /**\n     * Download generated PDF report\n     */\n    vm.downloadPdf = function() {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.pdf, fileName: vm.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    vm.downloadCsv = function() {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.reportBuilder.buildCsv(reportDataCallback), fileName: vm.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns.columns.filter(item => item.include),\n        rows: config.reportData,\n        styles: [],\n      };\n      result.rows = reportHelper.sort(result.rows, config.orderBy);\n\n      result.rows = result.rows.map(item => result.columns.map(col => item[col.dataKey]));\n      result.styles = result.rows.map((item, idx) => idx % 2 ? null : reportStyles.rowOdd);\n\n      return result;\n    }\n  });\n","/**\n * MailboxReport service\n */\nexport default angular.module('deskworks.reports.mailboxReport.service', [\n  'ngResource',\n  'deskworks.config'\n])\n\n  .factory('MailboxReport', function($resource, deskworksConfig) {\n    const url = deskworksConfig.getApiAbsUrl('/centers/:centerId/mailbox-reports');\n\n    return $resource(url, { centerId: '@centerId' }, {\n      query: { method: 'GET', isArray: true }\n    });\n  });\n","// Module\nvar code = \"<div id=\\\"mailboxReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formMailboxReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <report-columns model=\\\"vm.config.reportColumns\\\"></report-columns> </div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-options model=\\\"vm.config.reportOptions\\\"> <report-order-by model=\\\"vm.config.orderBy\\\" report-columns=\\\"vm.config.reportColumns.columns\\\"></report-order-by> </report-options> <report-owner-region model=\\\"vm.config.reportOwnerRegion\\\" report-data=\\\"vm.config.reportData\\\"></report-owner-region> </div> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadPdf()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadCsv()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"vm.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Member Statement\n */\nexport default angular.module('deskworks.reports.memberStatementColumns', [])\n\n  .factory('memberStatementColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'date', _title: 'MEMBER_STATEMENT.COLUMNS.DATE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'item', _title: 'MEMBER_STATEMENT.COLUMNS.ITEM', include: true,\n      },\n      {\n        dataKey: 'price', _title: 'MEMBER_STATEMENT.COLUMNS.UNIT_PRICE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'qty', _title: 'MEMBER_STATEMENT.COLUMNS.QUANTITY', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n      },\n      {\n        dataKey: 'amountBilled', _title: 'MEMBER_STATEMENT.COLUMNS.AMOUNT_BILLED', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'amountPaid', _title: 'MEMBER_STATEMENT.COLUMNS.AMOUNT_PAID', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'balance', _title: 'MEMBER_STATEMENT.COLUMNS.BALANCE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.reports.memberStatement', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportDates',\n  'deskworks.reports.memberStatement.service',\n  'deskworks.reports.memberStatementColumns'\n])\n  .controller('MemberStatementCtrl', function($rootScope, $scope, $route, $timeout, $filter, $translate,\n                                              state, helper, reportHelper, reportStyles, ReportBuilder, user,\n                                              MemberStatement, memberStatementColumns) {\n    const vm = this;\n    vm.config = {\n      reportName: $translate.instant('MEMBER_STATEMENT.REPORT_NAME'),\n      reportOptions: { centerId: false },\n      reportColumns: { columns: memberStatementColumns },\n      reportDates: { fromDate: moment(), toDate: moment() },\n      reportFor: user.fullNameCompany,\n      getReportData: function() {\n        return MemberStatement.get({\n          centerId: state.getCurrentCenterId(),\n          userId: state.getCurrentUserId(),\n          fromDate: $filter('date')(vm.config.reportDates.fromDate, 'yyyy-MM-dd'),\n          toDate: $filter('date')(vm.config.reportDates.toDate, 'yyyy-MM-dd')\n        }).$promise;\n      },\n    };\n\n    state.setPageTitle($translate.instant('MEMBER_STATEMENT.PAGE_TITLE', { userName: vm.config.reportFor }));\n\n    vm.config.reportDates.fromDate.subtract(1, 'M'); // set fromDate to one month before\n    vm.reportBuilder = new ReportBuilder(vm.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    let debounceTimeout;\n    $scope.$watch(_ => ({ reportOptions: vm.config.reportOptions, reportDates: vm.config.reportDates }), (newVal, oldVal) => {\n      if (debounceTimeout) { $timeout.cancel(debounceTimeout); debounceTimeout = null; }\n      debounceTimeout = $timeout(_ => {\n        vm.pdf = null;\n        if (angular.isDefined(vm.config.reportOptions.centerId)) {\n\n          let newDate = newVal.reportDates.fromDate, oldDate = oldVal.reportDates.fromDate;\n          if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) {\n            vm.config.reportData = null;\n          }\n          newDate = newVal.reportDates.toDate; oldDate = oldVal.reportDates.toDate;\n          if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) {\n            vm.config.reportData = null;\n          }\n\n          vm.reportBuilder.buildPdf(reportDataCallback)\n            .then(blob => { vm.pdf = blob; });\n        }\n      }, 100);\n    }, true);\n\n    /**\n     * Download generated PDF report\n     */\n    vm.downloadPdf = function() {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.pdf, fileName: vm.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns.columns,\n        rows: [],\n        styles: [],\n      };\n\n      result.rows = config.reportData.transactions.map((transaction, idx) => {\n        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        return result.columns.map(col => transaction[col.dataKey]);\n      });\n\n      result.rows.unshift([\n        false,\n        $translate.instant('MEMBER_STATEMENT.BALANCE_FORWARD') + ':',\n        false,\n        false,\n        false,\n        false,\n        config.reportData.balanceForward\n      ]);\n      result.styles.unshift(reportStyles.h2);\n\n      result.rows.push([\n        false,\n        $translate.instant('MEMBER_STATEMENT.TOTALS') + ':',\n        false,\n        false,\n        config.reportData.totals.amountBilled,\n        config.reportData.totals.amountPaid,\n        config.reportData.totals.balance\n      ]);\n      result.styles.push(reportStyles.h2);\n\n      const depositRowStyles = [];\n      const depositRows = config.reportData.depositTransactions.map((transaction, idx) => {\n        depositRowStyles.push(idx % 2 ? null : reportStyles.rowOdd);\n        return result.columns.map(col => transaction[col.dataKey]);\n      });\n\n      if (depositRows.length > 0) {\n        depositRows.unshift([\n          false,\n          $translate.instant('MEMBER_STATEMENT.SECURITY_DEPOSITS') + ':',\n          false,\n          false,\n          config.reportData.depositTotals.amountBilled,\n          config.reportData.depositTotals.amountPaid,\n          config.reportData.depositTotals.balance\n        ]);\n        depositRowStyles.unshift(reportStyles.h2);\n\n        result.rows = depositRows.concat(result.rows);\n        result.styles = depositRowStyles.concat(result.styles);\n      }\n\n      return result;\n    }\n\n    $rootScope.$on('CHANGE-CENTER', $route.reload); // due to route.reloadOnSearch: false\n  });\n","/**\n * MemberStatement service\n */\nexport default angular.module('deskworks.reports.memberStatement.service', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config'\n])\n  .factory('MemberStatement', function($resource, $q, datesDeserializer, deskworksConfig) {\n    const desDates = datesDeserializer(['transactions.date', 'depositTransactions.date']);\n    const url = deskworksConfig.getApiAbsUrl('/centers/:centerId/user-profiles/:userId/member-statements');\n\n    return $resource(url, { centerId: '@centerId', userId: '@userId', fromDate: '@fromDate', toDate: '@toDate' }, {\n      get: { method: 'GET', transformResponse: [angular.fromJson, desDates] }\n    });\n  });\n","// Module\nvar code = \"<div id=\\\"memberStatement\\\" class=\\\"gutter-v\\\"> <form name=\\\"formMemberStatement\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 65%', md: '0 0 50%'}\\\"> <report-dates model=\\\"vm.config.reportDates\\\"></report-dates> </div> <div flex=\\\"{lg: '0 0 35%', md: '0 0 50%'}\\\"> <report-options model=\\\"vm.config.reportOptions\\\"></report-options> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadPdf()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"MEMBER_STATEMENT.BTN_PDF\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"MEMBER_STATEMENT.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"vm.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Member Usage Report\n */\nexport default angular.module('deskworks.reports.memberUsageReportColumns', ['deskworks.helper'])\n  .factory('memberUsageReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'date', _title: 'MEMBER_USAGE_REPORT.COLUMNS.DATE', include: true, defaultOrder: true,\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'userName', _title: 'MEMBER_USAGE_REPORT.COLUMNS.USER_NAME', include: true,\n      },\n      {\n        dataKey: 'userEmail', _title: 'MEMBER_USAGE_REPORT.COLUMNS.USER_EMAIL', include: true,\n      },\n      {\n        dataKey: 'checkInTime', _title: 'MEMBER_USAGE_REPORT.COLUMNS.CHECK_IN', include: true,\n        styles: { halign: 'right' },\n        pdf: v => $filter('date')(v, 'shortTime'), csv: v => $filter('date')(v, 'shortTime'),\n      },\n      {\n        dataKey: 'checkOutTime', _title: 'MEMBER_USAGE_REPORT.COLUMNS.CHECK_OUT', include: true,\n        styles: { halign: 'right' },\n        pdf: v => $filter('date')(v, 'shortTime'), csv: v => $filter('date')(v, 'shortTime'),\n      },\n      {\n        dataKey: 'usageHours', _title: 'MEMBER_USAGE_REPORT.COLUMNS.HOURS', include: true,\n        styles: { halign: 'right' },\n      },\n      {\n        dataKey: 'usagePasses', _title: 'MEMBER_USAGE_REPORT.COLUMNS.PASSES', include: true,\n        styles: { halign: 'right' },\n      }\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.reports.memberUsageReport', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportDates',\n  'deskworks.reports.memberUsageReport.service',\n  'deskworks.reports.memberUsageReportColumns'\n])\n  .controller('MemberUsageReportCtrl', function($rootScope, $scope, $timeout, $filter, $route, $q, $translate,\n                                                state, helper, reportHelper, reportStyles, ReportBuilder, MemberUsageReport,\n                                                memberUsageReportColumns) {\n    const vm = this;\n\n    vm.config = {\n      reportName: $translate.instant('MEMBER_USAGE_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportColumns: { columns: memberUsageReportColumns },\n      reportDates: { fromDate: moment(), toDate: moment() },\n      getReportData: function() {\n        return MemberUsageReport.query({\n          centerId: vm.config.reportOptions.centerId,\n          userId: state.getCurrentUserId(),\n          fromDate: $filter('date')(vm.config.reportDates.fromDate, 'yyyy-MM-dd'),\n          toDate: $filter('date')(vm.config.reportDates.toDate, 'yyyy-MM-dd')\n        }).$promise\n          .then(function(usages) {\n            angular.forEach(usages, function(usage) { usage.date = usage.checkInTime.clone().hour(0).minute(0).second(0).millisecond(0); });\n            return usages;\n          });\n      },\n    };\n\n    state.setPageTitle(vm.config.reportName);\n\n    vm.config.reportDates.fromDate.date(1); // set fromDate to first day of current month\n    vm.config.reportDates.toDate.add(1, 'M').date(0); // set toDate to last day of current month\n\n    vm.reportBuilder = new ReportBuilder(vm.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    let debounceTimeout;\n    $scope.$watch(_ => ({\n      reportOptions: vm.config.reportOptions,\n      reportDates: vm.config.reportDates,\n      reportColumns: vm.config.reportColumns,\n      orderBy: vm.config.orderBy,\n    }), (newVal, oldVal) => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(_ => {\n        vm.pdf = null;\n        if (angular.isDefined(vm.config.reportOptions.centerId)) {\n\n          let newDate = newVal.reportDates.fromDate, oldDate = oldVal.reportDates.fromDate;\n          if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) {\n            vm.config.reportData = null;\n          }\n          newDate = newVal.reportDates.toDate; oldDate = oldVal.reportDates.toDate;\n          if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) {\n            vm.config.reportData = null;\n          }\n\n          vm.reportBuilder.buildPdf(reportDataCallback)\n            .then(blob => { vm.pdf = blob; });\n        }\n      }, 100);\n    }, true);\n    \n    /**\n     * Download generated PDF report\n     */\n    vm.downloadPdf = function() {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.pdf, fileName: vm.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n    * Generate and download CSV report\n    */\n    vm.downloadCsv = function() {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.reportBuilder.buildCsv(reportDataCallback), fileName: vm.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Reload on changing current user\n     */\n    const offChangeUser = $rootScope.$on('CHANGE-USER', $route.reload);\n    $scope.$on('$destroy', offChangeUser);\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns.columns.filter(item => item.include),\n        rows: [],\n        styles: [],\n      };\n\n      const data = reportHelper.sort(config.reportData, config.orderBy);\n\n      const hoursIdx = helper.findIndexByKeyValue(result.columns, 'dataKey', 'usageHours');\n      const passesIdx = helper.findIndexByKeyValue(result.columns, 'dataKey', 'usagePasses');\n      let arr = Array.apply(null, new Array(result.columns.length)).map(function(val) { return false; });\n      let hours = 0, passes = 0; // subtotals\n\n      // Finally, convert to matrix\n      data.forEach((usage, idx) => {\n        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        result.rows.push(result.columns.map(function(col) { return usage[col.dataKey]; }));\n        hours += usage.usageHours ? usage.usageHours : 0;\n        passes += usage.usagePasses ? usage.usagePasses : 0;\n\n        if ((config.orderBy === 'date' || config.orderBy === 'userName') && (hoursIdx >= 0 || passesIdx >= 0)) {\n          let curr = config.orderBy === 'date' ? usage[config.orderBy].unix() : usage[config.orderBy] || null;\n          let next;\n          if (idx < data.length - 1)\n            next = config.orderBy === 'date' ? data[idx + 1][config.orderBy].unix() : data[idx + 1][config.orderBy] || null;\n\n          if (curr !== next) {\n            hours = Math.round(hours * 100) / 100;\n            passes = Math.round(passes * 100) / 100;\n            let row;\n            if (hoursIdx >= 0) row = arr.slice(0, Math.max(hoursIdx - 1, 0)).concat([$translate.instant('MEMBER_USAGE_REPORT.TOTALS.SUBTOTAL') + ':', hours]);\n            if (passesIdx >= 0) {\n              if (hoursIdx >= 0) row.push(passes);\n              else row = arr.slice(0, Math.max(passesIdx - 1, 0)).concat([$translate.instant('MEMBER_USAGE_REPORT.TOTALS.SUBTOTAL') + ':', passes]);\n            }\n            result.rows.push(row);\n            result.styles.push(reportStyles.h2);\n            hours = 0; passes = 0;\n          }\n        }\n      });\n\n      return result;\n    }\n  });\n","/**\n * MemberUsageReport service\n */\nexport default angular.module('deskworks.reports.memberUsageReport.service', [\n  'ngResource',\n  'datesDeserializer',\n  'deserializeNumbers',\n  'deskworks.config'\n])\n  .factory('MemberUsageReport', function($resource, datesDeserializer, deserializeNumbers, deskworksConfig) {\n    const url = deskworksConfig.getApiAbsUrl('/centers/:centerId/user-profiles/:userId/member-usage-reports');\n\n    const desDates = datesDeserializer(['checkInTime', 'checkOutTime']);\n    const desNumbers = deserializeNumbers(['usageHours', 'usagePasses']);\n\n    return $resource(url, { centerId: '@centerId', userId: '@userId', fromDate: '@fromDate', toDate: '@toDate' }, {\n      query: { method: 'GET', isArray: true, transformResponse: [angular.fromJson, desDates, desNumbers] }\n    });\n  });\n","// Module\nvar code = \"<div id=\\\"memberUsageReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formMemberUsageReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-dates model=\\\"vm.config.reportDates\\\"></report-dates> <report-columns model=\\\"vm.config.reportColumns\\\"></report-columns> </div> </div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <report-options model=\\\"vm.config.reportOptions\\\"> <report-order-by model=\\\"vm.config.orderBy\\\" report-columns=\\\"vm.config.reportColumns.columns\\\"></report-order-by> </report-options> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadPdf()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadCsv()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"vm.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Membership Report\n */\nexport default angular.module('deskworks.reports.membershipReportColumns', [])\n\n  .factory('membershipReportColumns', ($rootScope, $filter, $translate) => {\n    const cols = [\n      {\n        dataKey: 'company', _title: 'MEMBERSHIP_REPORT.COLUMNS.COMPANY', include: true,\n        styles: { minCellWidth: 150 },\n      },\n      {\n        dataKey: 'name', _title: 'MEMBERSHIP_REPORT.COLUMNS.NAME', include: true,\n        styles: { minCellWidth: 150 },\n      },\n      {\n        dataKey: 'address', _title: 'MEMBERSHIP_REPORT.COLUMNS.ADDRESS', include: false,\n        styles: { minCellWidth: 150 },\n      },\n      {\n        dataKey: 'comments', _title: 'MEMBERSHIP_REPORT.COLUMNS.COMMENTS', include: false,\n        styles: { minCellWidth: 250 },\n      },\n      {\n        dataKey: 'email', _title: 'MEMBERSHIP_REPORT.COLUMNS.EMAIL', include: false,\n        styles: { minCellWidth: 150 },\n      },\n      {\n        dataKey: 'phone', _title: 'MEMBERSHIP_REPORT.COLUMNS.PHONE', include: false,\n        styles: { minCellWidth: 100 },\n      },\n      {\n        dataKey: 'facility', _title: 'MEMBERSHIP_REPORT.COLUMNS.FACILITY', include: false,\n        styles: { minCellWidth: 150 },\n      },\n      {\n        dataKey: 'joinDate', _title: 'MEMBERSHIP_REPORT.COLUMNS.JOIN_DATE', include: false,\n        styles: { minCellWidth: 100 },\n        pdf: val => $filter('date')(val, 'mediumDate'),\n        csv: val => $filter('date')(val, 'shortDate') },\n      {\n        dataKey: 'occupation', _title: 'MEMBERSHIP_REPORT.COLUMNS.OCCUPATION', include: true,\n        styles: { minCellWidth: 150 },\n      },\n      {\n        dataKey: 'pricelist', _title: 'MEMBERSHIP_REPORT.COLUMNS.PRICE_LIST', include: true,\n        styles: { minCellWidth: 160 },\n      },\n      {\n        dataKey: 'status', _title: 'MEMBERSHIP_REPORT.COLUMNS.STATUS', include: true,\n        styles: { cellWidth: 'wrap' },\n      },\n      {\n        dataKey: 'printerCodes', _title: 'MEMBERSHIP_REPORT.COLUMNS.PRINTER_CODES', include: false,\n      },\n      {\n        dataKey: 'leadSource', _title: 'MEMBERSHIP_REPORT.COLUMNS.LEAD_SOURCE', include: false,\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import membershipFilter from 'shared/membership-filter/membership-filter.directive';\nimport pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.reports.membershipReport', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportColumns',\n  'deskworks.reports.reportOwnerRegion',\n  'deskworks.reports.membershipReport.service',\n  'deskworks.reports.membershipReportColumns',\n  membershipFilter.name,\n])\n  .controller('MembershipReportCtrl', function($scope, $timeout, $location, $translate, state, helper,\n                                               reportHelper, ReportBuilder, MembershipReport, membershipReportColumns,\n                                               fields, reportStyles) {\n    const vm = this;\n\n    vm.config = {\n      reportName: $translate.instant('MEMBERSHIP_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportOwnerRegion: {},\n      reportColumns: { columns: angular.copy(membershipReportColumns) },\n      getReportData: () => {\n        const params = {\n          centerId: vm.config.reportOptions.centerId,\n          ownerId: vm.config.reportOwnerRegion.ownerId,\n          regionId: vm.config.reportOwnerRegion.regionId,\n        };\n        return MembershipReport.query(angular.extend(params, vm.membershipFilter)).$promise\n          .then(data =>\n            data.map(item => {\n              if (item.fields) { // flatten fields sub-object\n                item = angular.extend(item, item.fields);\n                delete item.fields;\n              }\n              return item;\n            })\n          );\n      },\n    };\n\n    state.setPageTitle(vm.config.reportName);\n\n    vm.reportBuilder = new ReportBuilder(vm.config);\n\n    // Add custom and shareable fields to columns\n    angular.forEach(fields, field => {\n      vm.config.reportColumns.columns.push({ dataKey: field.id, title: field.name, include: false });\n    });\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    let debounceTimeout;\n    $scope.$watch(() => {\n        return {\n          reportOptions: vm.config.reportOptions,\n          reportColumns: vm.config.reportColumns,\n          reportOwnerRegion: vm.config.reportOwnerRegion,\n          membershipFilter: vm.membershipFilter,\n          orderBy: vm.config.orderBy,\n        };\n      }, (newVal, oldVal) => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(() => {\n        vm.pdf = null;\n        if (newVal && oldVal && !angular.equals(newVal.membershipFilter, oldVal.membershipFilter)) vm.config.reportData = null;\n        if (angular.isUndefined(vm.config.reportOptions.centerId)) return;\n        vm.reportBuilder.buildPdf(reportDataCallback).then(blob => { vm.pdf = blob; });\n      }, 100);\n    }, true);\n\n    /**\n     * Download generated PDF report\n     */\n    vm.downloadPdf = () => {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.pdf, fileName: vm.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    vm.downloadCsv = () => {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.reportBuilder.buildCsv(reportDataCallback), fileName: vm.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns.columns.filter(item => item.include),\n        rows: config.reportData,\n        styles: [],\n      };\n      result.rows = reportHelper.sort(result.rows, config.orderBy);\n      result.rows = result.rows.map(item => result.columns.map(col => item[col.dataKey]));\n      result.styles = result.rows.map((item, idx) => idx % 2 ? null : reportStyles.rowOdd);\n\n      return result;\n    }\n  });\n","/**\n * MembershipReport service\n */\nexport default angular.module('deskworks.reports.membershipReport.service', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config',\n])\n  .factory('MembershipReport', ($resource, datesDeserializer, deskworksConfig) => {\n    const desDates = datesDeserializer(['joinDate']);\n\n    const url = deskworksConfig.getApiAbsUrl('/centers/:centerId/membership-reports');\n\n    return $resource(url, { centerId: '@centerId' }, {\n      query: { method: 'GET', isArray: true, transformResponse: [angular.fromJson, desDates, deserialize] },\n    });\n\n    function deserialize(data) {\n      angular.forEach(data, item => {\n        angular.forEach(item.fields, field => { item[field.id] = field.value; }); // flatten nested fields\n        delete item.fields;\n      });\n      return data;\n    }\n  });\n","// Module\nvar code = \"<div id=\\\"membershipReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formMembershipReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 65%', md: '0 0 50%'}\\\"> <report-columns model=\\\"vm.config.reportColumns\\\"></report-columns> </div> <div flex=\\\"{lg: '0 0 35%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-options model=\\\"vm.config.reportOptions\\\"> <report-order-by model=\\\"vm.config.orderBy\\\" report-columns=\\\"vm.config.reportColumns.columns\\\"></report-order-by> </report-options> <report-owner-region model=\\\"vm.config.reportOwnerRegion\\\" report-data=\\\"vm.config.reportData\\\"></report-owner-region> <ff-panel> <ff-panel-header><span translate=\\\"MEMBERSHIP_REPORT.MEMBERSHIP.HEADER\\\"></span></ff-panel-header> <membership-filter ff-model=\\\"vm.membershipFilter\\\" layout=\\\"2col\\\"></membership-filter> </ff-panel> </div> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadPdf()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadCsv()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"vm.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Pass Usage Report\n */\nexport default angular.module('deskworks.passUsageReportColumns', [])\n  .factory('passUsageReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'memberCompany', _title: 'PASS_USAGE_REPORT.COLUMNS.COMPANY', include: true,\n        styles: { minCellWidth: 200 },\n      },\n      {\n        dataKey: 'memberName', _title: 'PASS_USAGE_REPORT.COLUMNS.NAME', include: true, defaultOrder: true,\n        styles: { minCellWidth: 150 },\n      },\n      {\n        dataKey: 'passesUsedCost', _title: 'PASS_USAGE_REPORT.COLUMNS.PASSES_USED_COST', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'passCreditAppliedCost', _title: 'PASS_USAGE_REPORT.COLUMNS.PASS_CREDIT_APPLIED_COST', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'costBalance', _title: 'PASS_USAGE_REPORT.COLUMNS.COST_BALANCE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import reportHelper from 'shared/reports/services/report-helper.service';\nimport pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.PassUsageReportCtrl', [\n  'debounce',\n  pdfPreview.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.reportDates',\n  'deskworks.reports.reportColumns',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.PassUsageReport',\n  'deskworks.passUsageReportColumns',\n  reportHelper.name,\n])\n\n  .controller('PassUsageReportCtrl', function($scope, $q, $filter, $translate, state, helper, dwAlerts, debounce,\n                                              reportStyles, reportHelper, PassUsageReport, passUsageReportColumns) {\n    const $ctrl = this;\n\n    const { paramsChanged, loadResources } = reportHelper;\n\n    $ctrl.config = {\n      reportName: $translate.instant('PASS_USAGE_REPORT.REPORT_NAME'),\n    };\n    $ctrl.params = {\n      fromDate: state.getParam('fromDate') ? $filter('toDate')(state.getParam('fromDate')) : moment().startOf('month'),\n      toDate: state.getParam('toDate') ? $filter('toDate')(state.getParam('toDate')) : moment().endOf('month'),\n      orderBy: state.getParam('orderBy') || 'memberName',\n    };\n    $ctrl.resources = null;\n    $ctrl.data = null;\n    $ctrl.columns = passUsageReportColumns;\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    /**\n     * Watch report params and generate new report\n     */\n    $scope.$watch('$ctrl.params', debounce((np, op) => {\n      $ctrl.pdf = null;\n      $ctrl.report = null;\n\n      if (helper.pointFirstInvalid('#passUsageReport')) return;\n      if (!$ctrl.params.fromDate || !$ctrl.params.toDate) return;\n\n      if (paramsChanged(np, op, ['fromDate', 'toDate', 'centerId'])) $ctrl.data = null;\n\n      $q.all({\n        resources: $ctrl.resources || loadResources(),\n        data: $ctrl.data || PassUsageReport.query($ctrl.params).catch(err => dwAlerts.error(err, 'Failed to query report.')),\n      })\n        .then(result => {\n          $ctrl.resources = result.resources;\n          $ctrl.data = result.data;\n        })\n        .then(() => {\n          $ctrl.report = dataToReport($ctrl.params, $ctrl.data);\n          const doc = reportHelper.buildPdf({ config: { ...$ctrl.config, ...$ctrl.params }, report: $ctrl.report, resources: $ctrl.resources });\n          $ctrl.pdf = doc.output('blob');\n        });\n\n    }, 100), true);\n\n\n    /**\n     * @param params\n     * @param data\n     */\n    function dataToReport(params, data) {\n      const result = {\n        columns: passUsageReportColumns,\n        rows: [],\n        styles: [],\n      };\n\n      data = reportHelper.sort(data, $ctrl.params.orderBy);\n\n      result.rows = result.rows.concat(data.map((item, idx) => {\n        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        return result.columns.map(col => item[col.dataKey]);\n      }));\n\n      let passesUsedCostTotal = 0, passCreditAppliedCostTotal = 0, costBalanceTotal = 0;\n\n      data.forEach(item => {\n        passesUsedCostTotal += helper.toNumber(item.passesUsedCost);\n        passCreditAppliedCostTotal += helper.toNumber(item.passCreditAppliedCost);\n        costBalanceTotal += helper.toNumber(item.costBalance);\n      });\n\n      passesUsedCostTotal = helper.round(passesUsedCostTotal);\n      passCreditAppliedCostTotal = helper.round(passCreditAppliedCostTotal);\n      costBalanceTotal = helper.round(costBalanceTotal);\n\n      const totals = { passesUsedCostTotal, passCreditAppliedCostTotal, costBalanceTotal };\n      const totalRow = [];\n      const totalRowNameCell = {\n        content: $translate.instant('PASS_USAGE_REPORT.TOTALS').toUpperCase() + ':',\n        styles: { halign: 'left' },\n      };\n\n      result.columns.forEach(col => {\n        const totalVal = totals[`${col.dataKey}Total`];\n        if (totalVal || typeof totalVal === 'number') totalRow.push({ content: totalVal });\n      });\n\n      // add name of total row, add empty cell if needed\n      if (result.columns[0].dataKey === 'memberCompany' && (result.columns[1] || {}).dataKey === 'memberName') {\n        totalRow.unshift({ content: ' ' });\n        totalRow.unshift(totalRowNameCell);\n      } else if (result.columns[0].dataKey === 'memberCompany' || result.columns[0].dataKey === 'memberName') {\n        totalRow.unshift(totalRowNameCell);\n      }\n\n      if (data.length) {\n        result.rows.unshift(totalRow);\n        result.styles.unshift(reportStyles.h2);\n        result.rows.push(totalRow);\n        result.styles.push(reportStyles.h2);\n      }\n\n      return result;\n    }\n\n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = () => {\n      if (!$ctrl.pdf) return;\n      const fileName = reportHelper.getReportFileName({ extension: 'pdf', config: { ...$ctrl.config, ...$ctrl.params }, resources: $ctrl.resources });\n      reportHelper.download({ blob: $ctrl.pdf, fileName });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    $ctrl.downloadCsv = () => {\n      if (!$ctrl.pdf) return;\n      const fileName = reportHelper.getReportFileName({ extension: 'csv', config: { ...$ctrl.config, ...$ctrl.params }, resources: $ctrl.resources });\n      const csv = reportHelper.buildCsv({ report: $ctrl.report });\n      reportHelper.download({ blob: csv, fileName });\n    };\n  });\n","/**\n * PassUsageReport service\n */\nexport default angular.module('deskworks.PassUsageReport', [\n  'ngResource',\n  'deskworks.config',\n])\n\n  .factory('PassUsageReport', function($resource, $filter, deskworksConfig) {\n    const url = deskworksConfig.getApiAbsUrl('/reports/day-pass-usage');\n\n    const res = $resource(url, { centerId: '@centerId', fromDate: '@fromDate', toDate: '@toDate' }, {\n      query: { method: 'GET', isArray: true },\n    });\n\n    return {\n      query: params => res.query({\n        centerId: params.centerId || null,\n        fromDate: $filter('date')(params.fromDate, 'yyyy-MM-dd'),\n        toDate: $filter('date')(params.toDate, 'yyyy-MM-dd'),\n      }).$promise,\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"passUsageReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formPassUsageReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <report-dates model=\\\"$ctrl.params\\\"></report-dates> </div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <report-options model=\\\"$ctrl.params\\\"> <report-order-by model=\\\"$ctrl.params.orderBy\\\" report-columns=\\\"$ctrl.columns\\\"></report-order-by> </report-options> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Passport Reservation Usage Report\n */\nexport default angular.module('deskworks.passportReservationUsageReportColumns', [])\n  .factory('passportReservationUsageReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'unitName', _title: 'PASSPORT_RESERVATION_USAGE_REPORT.COLUMNS.RESERVATION_UNIT',\n      },\n      {\n        dataKey: 'duration', _title: 'PASSPORT_RESERVATION_USAGE_REPORT.COLUMNS.HOURS',\n        styles: { halign: 'right' },\n        pdf: v => $filter('hoursMinutes')(v), csv: v => $filter('hoursMinutes')(v),\n      },\n      {\n        dataKey: 'startTime', _title: 'PASSPORT_RESERVATION_USAGE_REPORT.COLUMNS.START_TIME',\n        styles: { halign: 'right' },\n        pdf: v => `${$filter('date')(v, 'mediumDate')} ${$filter('date')(v, 'shortTime')}`, csv: v => $filter('date')(v, 'medium'),\n      },\n      {\n        dataKey: 'endTime', _title: 'PASSPORT_RESERVATION_USAGE_REPORT.COLUMNS.END_TIME',\n        styles: { halign: 'right' },\n        pdf: v => `${$filter('date')(v, 'mediumDate')} ${$filter('date')(v, 'shortTime')}`, csv: v => $filter('date')(v, 'medium'),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.PassportReservationUsageReportCtrl', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.reportDates',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.PassportReservationUsageReport',\n  'deskworks.passportReservationUsageReportColumns',\n])\n\n  .controller('PassportReservationUsageReportCtrl', function($scope, $timeout, $translate, $filter, state, helper,\n                                                             reportHelper, reportStyles, ReportBuilder,\n                                                             PassportReservationUsageReport, passportReservationUsageReportColumns) {\n    const $ctrl = this;\n\n    $ctrl.config = {\n      reportName: $translate.instant('PASSPORT_RESERVATION_USAGE_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportColumns: passportReservationUsageReportColumns,\n      reportDates: { fromDate: moment(), toDate: moment() },\n      getReportData: () => {\n        return PassportReservationUsageReport.query({\n          centerId: $ctrl.config.reportOptions.centerId || null,\n          fromDate: $filter('date')($ctrl.config.reportDates.fromDate, 'yyyy-MM-dd'),\n          toDate: $filter('date')($ctrl.config.reportDates.toDate, 'yyyy-MM-dd'),\n        });\n      },\n    };\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    $ctrl.config.reportDates.fromDate.subtract(1, 'M').date(1); // set fromDate to first day of previous month\n    $ctrl.config.reportDates.toDate.date(0); // set toDate to last day of previous month\n\n    $ctrl.reportBuilder = new ReportBuilder($ctrl.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    let debounceTimeout;\n    $scope.$watch(() => ({ reportOptions: $ctrl.config.reportOptions, reportDates: $ctrl.config.reportDates }), (newVal, oldVal) => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(() => {\n        $ctrl.pdf = null;\n\n        let newDate = newVal.reportDates.fromDate, oldDate = oldVal.reportDates.fromDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) $ctrl.config.reportData = null;\n\n        newDate = newVal.reportDates.toDate; oldDate = oldVal.reportDates.toDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) $ctrl.config.reportData = null;\n\n        $ctrl.reportBuilder.buildPdf(reportDataCallback).then(blob => { $ctrl.pdf = blob; });\n      }, 100);\n    }, true);\n\n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = () => {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.pdf, fileName: $ctrl.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n    * Generate and download CSV report\n    */\n    $ctrl.downloadCsv = () => {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.reportBuilder.buildCsv(reportDataCallback), fileName: $ctrl.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns,\n        rows: [],\n        styles: [],\n      };\n\n      const resUnits = [];\n\n      config.reportData.forEach(obj => {\n        let userTotal = 0;\n\n        result.rows.push([{ content: helper.join([obj.userCompany, obj.userName], ' - '), colSpan: 4 }]);\n        result.styles.push(reportStyles.h2);\n\n        obj.usages.forEach((usage, idx) => {\n          userTotal += usage.duration || 0;\n\n          const unit = resUnits.find(unit => unit.name === usage.unitName);\n          if (unit) unit.total += usage.duration;\n          else resUnits.push({ name: usage.unitName, total: usage.duration || 0 });\n\n          result.rows.push([usage.unitName, usage.duration, usage.startTime, usage.endTime]);\n          result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        });\n\n        result.rows.push([{ content: $translate.instant('REPORTS.TOTAL') + ':', styles: { halign: 'right' } }, userTotal, false, false]);\n        result.styles.push(reportStyles.h3);\n\n        // Add empty row\n        result.rows.push(Array(4).fill(false));\n        result.styles.push(null);\n      });\n\n      if (config.reportData.length) {\n        result.rows.push([{ content: $translate.instant('PASSPORT_RESERVATION_USAGE_REPORT.TOTALS_BY_RESERVATION_UNIT'), colSpan: 4 }]);\n        result.styles.push(reportStyles.h2);\n      }\n\n      // Add units totals\n      reportHelper.sort(resUnits, 'name').forEach(unit => {\n        const row = Array(4).fill(false);\n        row[0] = unit.name;\n        row[1] = unit.total;\n        result.rows.push(row);\n        result.styles.push(reportStyles.h3);\n      });\n\n      return result;\n    }\n  });\n","/**\n * PassportReservationUsageReport service\n */\nexport default angular.module('deskworks.PassportReservationUsageReport', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config',\n])\n\n  .factory('PassportReservationUsageReport', function($resource, datesDeserializer, deskworksConfig, $q) {\n    const desDates = datesDeserializer(['usages.startTime', 'usages.endTime']);\n    const url = deskworksConfig.getApiAbsUrl('/reports/passport-reservation-usage');\n\n    const res = $resource(url, { centerId: '@centerId', fromDate: '@fromDate', toDate: '@toDate' }, {\n      query: { method: 'GET', isArray: true, transformResponse: [angular.fromJson, desDates, makeUsageDurations] },\n    });\n\n    return {\n      query: params => res.query(params).$promise,\n    };\n\n    function makeUsageDurations(data) {\n      data.forEach(obj => {\n        obj.usages.forEach(usage => {\n          usage.duration = usage.endTime - usage.startTime;\n        });\n      });\n      return data;\n    }\n  });\n","// Module\nvar code = \"<div id=\\\"passportReservationUsageReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formPassportReservationUsageReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <report-dates model=\\\"$ctrl.config.reportDates\\\"></report-dates> </div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <report-options model=\\\"$ctrl.config.reportOptions\\\"></report-options> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Payment Reconciliation Report\n */\nexport default angular.module('deskworks.paymentReconciliationReportColumns', [])\n  .factory('paymentReconciliationReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'userName', _title: 'REPORTS.COLUMNS.USER_NAME', include: true, defaultOrder: true,\n        styles: { minCellWidth: 100 },\n      },\n      {\n        dataKey: 'userCompany', _title: 'REPORTS.COLUMNS.USER_COMPANY', include: true,\n        styles: { cellWidth: 150 },\n      },\n      {\n        dataKey: 'orderId', _title: 'REPORTS.COLUMNS.ORDER_ID', include: true,\n        styles: { halign: 'right' },\n      },\n      {\n        dataKey: 'productName', _title: 'REPORTS.COLUMNS.ITEM', include: true,\n      },\n      {\n        dataKey: 'productCode', _title: 'REPORTS.COLUMNS.ITEM_CODE', include: true,\n        styles: { halign: 'right' },\n      },\n      {\n        dataKey: 'quantity', _title: 'REPORTS.COLUMNS.QUANTITY', include: true,\n        styles: { halign: 'right' },\n      },\n      {\n        dataKey: 'amount', _title: 'REPORTS.COLUMNS.AMOUNT', include: true,\n        styles: { halign: 'right' },\n        pdf: val => $filter('ncurrency')(val), csv: val => $filter('ncurrency')(val)\n      },\n      {\n        dataKey: 'total', _title: 'REPORTS.COLUMNS.TOTAL', include: true,\n        styles: { halign: 'right', cellWidth: 'wrap' },\n        pdf: val => $filter('ncurrency')(val), csv: val => $filter('ncurrency')(val)\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nimport paymentReconciliationReportColumns from './payment-reconciliation-report-columns.service';\nimport PaymentReconciliationReport from './payment-reconciliation-report.service';\n\nexport default angular.module('deskworks.PaymentReconciliationReportCtrl', [\n  'debounce',\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.reportDates',\n  'deskworks.reports.reportColumns',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reportOrderBy',\n  PaymentReconciliationReport.name,\n  paymentReconciliationReportColumns.name,\n])\n\n  .controller('PaymentReconciliationReportCtrl', function($scope, $timeout, $translate, $filter, $q, state, helper,\n                                                          debounce, dwAlerts, reportHelper, reportStyles,\n                                                          PaymentReconciliationReport, paymentReconciliationReportColumns) {\n\n    const $ctrl = this;\n\n    const { paramsChanged, loadResources } = reportHelper;\n\n    $ctrl.config = {\n      reportName: $translate.instant('PAYMENT_RECONCILIATION_REPORT.REPORT_NAME'),\n    };\n\n    $ctrl.params = {\n      fromDate: state.getParam('fromDate') ? $filter('toDate')(state.getParam('fromDate')) : moment().subtract(1, 'M').startOf('month'),\n      toDate: state.getParam('toDate') ? $filter('toDate')(state.getParam('toDate')) : moment().subtract(1, 'M').endOf('month'),\n    };\n    $ctrl.resources = null;\n    $ctrl.data = null;\n    $ctrl.columns = paymentReconciliationReportColumns;\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    /**\n     * Watch report params and generate new report\n     */\n    $scope.$watch('$ctrl.params', debounce((np, op) => {\n      $ctrl.pdf = null;\n      $ctrl.report = null;\n\n      if (helper.pointFirstInvalid('#paymentReconciliationReport')) return;\n      if (!$ctrl.params.fromDate || !$ctrl.params.toDate) return;\n\n      if (paramsChanged(np, op, ['fromDate', 'toDate', 'centerId'])) $ctrl.data = null;\n\n      $q.all({\n        resources: $ctrl.resources || loadResources(),\n        data: $ctrl.data || PaymentReconciliationReport.get($ctrl.params).catch(err => dwAlerts.error(err, 'Failed to query report.')),\n      })\n        .then(result => {\n          $ctrl.resources = result.resources;\n          $ctrl.data = result.data;\n        })\n        .then(() => {\n          $ctrl.report = dataToReport($ctrl.params, $ctrl.data);\n          const doc = reportHelper.buildPdf({ config: { ...$ctrl.config, ...$ctrl.params }, report: $ctrl.report, resources: $ctrl.resources });\n          $ctrl.pdf = doc.output('blob');\n        });\n\n    }, 100), true);\n\n\n    /**\n     * Data to report converter\n     * @param params\n     * @param data\n     * @returns {{columns: paymentReconciliationReportColumns, styles: [], rows: []}}\n     */\n    function dataToReport(params, data) {\n      const result = {\n        columns: $ctrl.columns,\n        rows: [],\n        styles: [],\n      };\n\n      const splitIndex = result.columns.findIndex(col => col.dataKey === 'productCode');\n\n      data.daily.forEach(day => {\n        result.rows.push([ // daily total\n          { content: $filter('date')(day.date, 'mediumDate'), colSpan: splitIndex },\n          { content: $translate.instant(`PAYMENT_RECONCILIATION_REPORT.TOTAL_DAILY`) + ':', colSpan: result.columns.length - splitIndex - 1 },\n          { content: $filter('ncurrency')(day.total) },\n        ]);\n        result.styles.push(reportStyles.h1);\n\n        day.billingMethods.forEach(method => {\n          result.rows.push([ // billing method total\n            { content: method.name, colSpan: splitIndex },\n            { content: $translate.instant(`PAYMENT_RECONCILIATION_REPORT.TOTAL_PAYMENT_METHOD`) + ':', colSpan: result.columns.length - splitIndex - 1 },\n            { content: $filter('ncurrency')(method.total) },\n          ]);\n          result.styles.push(reportStyles.h2);\n\n          method.orders.forEach(order => {\n            result.rows.push(result.columns.map(col => angular.isDefined(order[col.dataKey]) ? order[col.dataKey] : false));\n            result.styles.push(reportStyles.h3);\n\n            order.items.forEach((item, idx) => {\n              result.rows.push(result.columns.map(col => angular.isDefined(item[col.dataKey]) ? item[col.dataKey] : false));\n              result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n            });\n          });\n        });\n      });\n\n      // Add empty row\n      result.rows.push(Array(result.columns.length).fill(false));\n      result.styles.push(null);\n\n      const globalProps = [\n        { name: 'TOTAL_PAYMENT_FEES', key: 'totalPaymentFees' },\n        { name: 'TOTAL_TAXES', key: 'totalTaxes' },\n        { name: 'TOTAL_DEPOSITS', key: 'totalDeposits' },\n        { name: 'TOTAL_UNDESIGNATED', key: 'totalUndesignated' },\n      ];\n\n      // Product Type Breakdown\n      const byProductType = [\n        { name: 'TOTAL_MEMBERSHIP', key: 'membership' },\n        { name: 'TOTAL_REGISTRATION', key: 'registration' },\n        { name: 'TOTAL_RENTAL', key: 'rental' },\n        { name: 'TOTAL_PRINT', key: 'print' },\n        { name: 'TOTAL_SERVICES', key: 'services' },\n        { name: 'TOTAL_CUSTOM', key: 'custom' },\n        { name: 'TOTAL_DISCOUNT', key: 'discount' },\n      ]\n        .concat(globalProps);\n\n      const typeRows = byProductType.map((type, idx) => ({\n          data: [\n            { content: $translate.instant(`PAYMENT_RECONCILIATION_REPORT.${type.name}`), colSpan: 1 },\n            { content: $filter('ncurrency')(idx > 6 ? data[type.key] : data.totalsByProductType[type.key] || 0), styles: { halign: 'right', fontStyle: 'bold' } },\n          ],\n          style: null,\n      }));\n      typeRows.unshift({\n        data: [{ content: $translate.instant('PAYMENT_RECONCILIATION_REPORT.PRODUCT_TYPE_BREAKDOWN') + ':', colSpan: 2 }],\n        style: reportStyles.h1,\n      });\n\n      // Product Category Breakdown\n      const catRows = data.totalsByProductCategory.map(cat => ({\n        data: [{ content: cat.name }, { content: cat.code }, { content: $filter('ncurrency')(cat.total), colSpan: 2, styles: { fontStyle: 'bold' } }],\n        style: null,\n      }))\n        .concat(globalProps.map(type => ({\n          data: [\n            { content: $translate.instant(`PAYMENT_RECONCILIATION_REPORT.${type.name}`) },\n            { content: false },\n            { content: $filter('ncurrency')(data[type.key]), styles: { halign: 'right', fontStyle: 'bold' }, colSpan: 2 },\n          ],\n          style: null,\n        })));\n      catRows.unshift({\n        data: [{ content: $translate.instant('PAYMENT_RECONCILIATION_REPORT.PRODUCT_CATEGORY_BREAKDOWN') + ':', colSpan: 4 }],\n        style: null,\n      });\n\n      // Merge breakdown rows\n      for (let i = 0, max = Math.max(typeRows.length, catRows.length); i < max; i++) {\n        result.rows.push([\n          ...(typeRows[i] || { data: [{ content: false }, { content: false }] }).data,\n          { content: false },\n          ...(catRows[i] || { data: [{ content: false }, { content: false }, { content: false }, { content: false }] }).data,\n          { content: false },\n        ]);\n        result.styles.push(typeRows[i] && typeRows[i].style || catRows[i] && catRows[i].style || null);\n      }\n\n      return result;\n    }\n\n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = () => {\n      if (!$ctrl.pdf) return;\n      const fileName = reportHelper.getReportFileName({ extension: 'pdf', config: { ...$ctrl.config, ...$ctrl.params }, resources: $ctrl.resources });\n      reportHelper.download({ blob: $ctrl.pdf, fileName });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    $ctrl.downloadCsv = () => {\n      if (!$ctrl.pdf) return;\n      const fileName = reportHelper.getReportFileName({ extension: 'csv', config: { ...$ctrl.config, ...$ctrl.params }, resources: $ctrl.resources });\n      const csv = reportHelper.buildCsv({ report: $ctrl.report });\n      reportHelper.download({ blob: csv, fileName });\n    };\n  });\n","export default angular.module('deskworks.PaymentReconciliationReport', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config',\n])\n\n  .factory('PaymentReconciliationReport', function($resource, datesDeserializer, deskworksConfig) {\n    const desDates = datesDeserializer('daily.date');\n    const url = deskworksConfig.getApiAbsUrl('/reports/payment-reconciliation');\n\n    const res = $resource(url, { centerId: '@centerId', fromDate: '@fromDate', toDate: '@toDate' }, {\n      get: { method: 'GET', isArray: false, transformResponse: [angular.fromJson, desDates] },\n    });\n\n    return {\n      get: params => res.get(params).$promise,\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"paymentReconciliationReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formPaymentReconciliationReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <report-dates model=\\\"$ctrl.params\\\"></report-dates> </div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <report-options model=\\\"$ctrl.params\\\"> </report-options> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for PriceList Report\n */\nexport default angular.module('deskworks.reports.priceListReportColumns', [])\n\n  .factory('priceListReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'name', _title: 'PRICE_LISTS.PRODUCTS.PRODUCT', include: true,\n      },\n      {\n        dataKey: 'passQty', _title: 'PRICE_LISTS.PRODUCTS.PASSES', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n      },\n      {\n        dataKey: 'reservationCredit', _title: 'PRICE_LISTS.PRODUCTS.CREDIT', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'price', _title: 'PRICE_LISTS.PRODUCTS.PRICE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.reports.priceListReport', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.priceListReport.service',\n  'deskworks.reports.priceListReportColumns',\n])\n  .controller('PriceListReportCtrl', function($scope, $timeout, $filter, $translate, state, helper,\n                                              reportHelper, reportStyles, ReportBuilder, PriceListReport,\n                                              priceListReportColumns) {\n    const vm = this;\n\n    vm.config = {\n      reportName: $translate.instant('PRICE_LISTS.LIST.HEADER'),\n      reportOptions: { centerId: false },\n      reportColumns: { columns: angular.copy(priceListReportColumns) },\n      getReportData: function() {\n        return PriceListReport.get({ centerId: state.getCurrentCenterId() }).$promise;\n      },\n    };\n\n    vm.reportBuilder = new ReportBuilder(vm.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    let debounceTimeout;\n    $scope.$watch(_ => {\n      return {\n        reportOptions: vm.config.reportOptions,\n        plNames: $scope.vm.priceLists.filter(function(plist) { return plist.include; }).map(function(plist) { return plist.name; }) };\n    }, newVal => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(_ => {\n        vm.pdf = null;\n        if (angular.isDefined(vm.config.reportOptions.centerId)) {\n          vm.config.plNames = newVal.plNames;\n          vm.reportBuilder.buildPdf(reportDataCallback)\n            .then(blob => { vm.pdf = blob; });\n        }\n      }, 100);\n    }, true);\n\n    /**\n     * Download generated PDF report\n     */\n    vm.downloadPdf = function() {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.pdf, fileName: vm.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    vm.downloadCsv = function() {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.reportBuilder.buildCsv(reportDataCallback), fileName: vm.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns.columns,\n        rows: [],\n        styles: [],\n      };\n\n      let row;\n\n      angular.forEach(config.reportData.pricelists, plist => {\n\n        if (config.plNames.indexOf(plist.name) < 0) return;\n\n        row = Array.apply(null, Array(result.columns.length)).map(Boolean.prototype.valueOf, false);\n        row[0] = $translate.instant('PRICE_LISTS.LIST.PRICE_LIST') + ': ' + plist.name +\n          ' (' + $translate.instant('PRICE_LISTS.LAST_UPDATE') + ': ' + $filter('date')(plist.updatedAt, 'mediumDate') + ')';\n        result.rows.push(row); result.styles.push(reportStyles.h1);\n\n        plist.productTypes.forEach(productType => {\n          row = Array.apply(null, Array(result.columns.length)).map(Boolean.prototype.valueOf, false);\n          row[0] = productType.id;\n          result.rows.push(row); result.styles.push(reportStyles.h2);\n\n          productType.products.forEach((product, idx) => {\n            result.rows.push(result.columns.map(col => product[col.dataKey]));\n            result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n          });\n        });\n      });\n\n      return result;\n    }\n  });\n","/**\n * PriceListReport service\n */\nexport default angular.module('deskworks.reports.priceListReport.service', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config'\n])\n\n  .factory('PriceListReport', function($resource, datesDeserializer, deskworksConfig) {\n    const desDates = datesDeserializer(['pricelists.updatedAt']);\n\n    const url = deskworksConfig.getApiAbsUrl('/centers/:centerId/pricelist-reports');\n\n    return $resource(url, { centerId: '@centerId' }, {\n      get: { method: 'GET', transformResponse: [angular.fromJson, desDates] }\n    });\n  });\n","// Module\nvar code = \"<div ng-controller=\\\"PriceListReportCtrl as rep\\\" class=\\\"gutter-v\\\"> <div class=\\\"ff-grid\\\"> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\" style=\\\"margin-left:auto\\\"> <report-options model=\\\"rep.config.reportOptions\\\"></report-options> </div> </div> <ff-btn-group> <ff-btn sense=\\\"download\\\" ff-click=\\\"rep.downloadPdf()\\\" ff-disabled=\\\"!rep.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"rep.downloadCsv()\\\" ff-disabled=\\\"!rep.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"rep.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Product Report\n */\nexport default angular.module('deskworks.productReportColumns', [])\n\n  .factory('productReportColumns', function($rootScope, $filter, $translate) {\n    const $yesno = { pdf: v => $filter('yesno')(v), csv: v => $filter('yesno')(v) };\n    const $fixed = { pdf: v => fixed(v), csv: v => fixed(v) };\n    function fixed(v) { const num = parseFloat(v); return isNaN(num) ? v : num.toFixed(2); }\n\n    const $ralign = { halign: 'right' };\n    const $calign = { halign: 'center' };\n\n    const colsByProductType = {\n      membership: [\n        { dataKey: 'code', _title: 'PRODUCTS.CODE', include: true },\n        { dataKey: 'name', _title: 'PRODUCTS.NAME', include: true },\n        { dataKey: 'membershipCategory', _title: 'PRODUCTS.MEMBERSHIP_CATEGORY', include: true },\n        { dataKey: 'billingFrequency', _title: 'PRODUCTS.BILLING_FREQUENCY', include: true },\n        { dataKey: 'isCreditable', _title: 'PRODUCTS.IS_CREDITABLE', include: true, ...$yesno, styles: { ...$calign } },\n        { dataKey: 'passProduct', _title: 'PRODUCTS.PASS_PRODUCT', include: true },\n        { dataKey: 'countCheckInsPer', _title: 'PRODUCTS.COUNT_CHECK_INS_PER', include: true },\n        { dataKey: 'reserveWithNonMemberRules', _title: 'PRODUCTS.ONLY_NON_MEMBER_HOURS.SHORT', include: true, ...$yesno, styles: { ...$calign } },\n        { dataKey: 'taxable', _title: 'PRODUCTS.TAXABLE', include: true, ...$yesno, styles: { ...$calign } },\n        { dataKey: 'showInSelfRegistration', _title: 'PRODUCTS.SHOW_FOR_SIGN_UP.SHORT', include: true, ...$yesno, styles: { ...$calign } },\n        { dataKey: 'hasRegistrationFee', _title: 'PRODUCTS.HAS_REGISTRATION_FEE', include: true, ...$yesno, styles: { ...$calign } },\n        { dataKey: 'trackAcrossAllCenters', _title: 'PRODUCTS.TRACK_ACROSS_ALL_CENTERS', include: true, ...$yesno, styles: { ...$calign } },\n        { dataKey: 'printBlack', _title: 'PRODUCTS.FREE_COPIES.PRINT_BLACK', include: true, styles: { ...$ralign } },\n        { dataKey: 'printColor', _title: 'PRODUCTS.FREE_COPIES.PRINT_COLOR', include: true, styles: { ...$ralign } },\n        { dataKey: 'fax', _title: 'PRODUCTS.FREE_COPIES.FAX', include: true, styles: { ...$ralign } },\n        { dataKey: 'scan', _title: 'PRODUCTS.FREE_COPIES.SCAN', include: true, styles: { ...$ralign } },\n        { dataKey: 'description', _title: 'PRODUCTS.DESCRIPTION', include: true },\n      ],\n      registration: [\n        { dataKey: 'code', _title: 'PRODUCTS.CODE', include: true },\n        { dataKey: 'name', _title: 'PRODUCTS.NAME', include: true },\n        { dataKey: 'taxable', _title: 'PRODUCTS.TAXABLE', include: true, ...$yesno, styles: { ...$calign } },\n        { dataKey: 'description', _title: 'PRODUCTS.DESCRIPTION', include: true },\n      ],\n      rental: [\n        { dataKey: 'code', _title: 'PRODUCTS.CODE', include: true },\n        { dataKey: 'name', _title: 'PRODUCTS.NAME', include: true },\n        { dataKey: 'reservationCategory', _title: 'PRODUCTS.RESERVATION_CATEGORY', include: true },\n        { dataKey: 'allowReservationCredits', _title: 'PRODUCTS.ALLOW_RESERVATION_CREDITS', include: true, ...$yesno, styles: { ...$calign } },\n        { dataKey: 'canBuyOnSplashPage', _title: 'PRODUCTS.BUY_ON_SPLASH_PAGE', include: true, ...$yesno, styles: { ...$calign } },\n        { dataKey: 'passSize', _title: 'PRODUCTS.PASS_SIZE', include: true, ...$fixed, styles: { ...$ralign } },\n        { dataKey: 'passMin', _title: 'PRODUCTS.MIN_PASS.SHORT', include: true, ...$fixed, styles: { ...$ralign } },\n        { dataKey: 'passMax', _title: 'PRODUCTS.MAX_PASS.SHORT', include: true, styles: { ...$ralign } },\n        { dataKey: 'taxable', _title: 'PRODUCTS.TAXABLE', include: true, ...$yesno, styles: { ...$calign } },\n        { dataKey: 'description', _title: 'PRODUCTS.DESCRIPTION', include: true },\n      ],\n      print: [\n        { dataKey: 'code', _title: 'PRODUCTS.CODE', include: true },\n        { dataKey: 'name', _title: 'PRODUCTS.NAME', include: true },\n        { dataKey: 'taxable', _title: 'PRODUCTS.TAXABLE', include: true, ...$yesno, styles: { ...$calign } },\n        { dataKey: 'description', _title: 'PRODUCTS.DESCRIPTION', include: true },\n      ],\n      services: [\n        { dataKey: 'code', _title: 'PRODUCTS.CODE', include: true },\n        { dataKey: 'name', _title: 'PRODUCTS.NAME', include: true },\n        { dataKey: 'billingFrequency', _title: 'PRODUCTS.BILLING_FREQUENCY', include: true },\n        { dataKey: 'showInSelfRegistration', _title: 'PRODUCTS.SHOW_FOR_SIGN_UP.SHORT', include: true, ...$yesno, styles: { ...$calign } },\n        { dataKey: 'taxable', _title: 'PRODUCTS.TAXABLE', include: true, ...$yesno, styles: { ...$calign } },\n        { dataKey: 'description', _title: 'PRODUCTS.DESCRIPTION', include: true },\n      ],\n    };\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() {\n      Object.keys(colsByProductType)\n        .forEach(key => colsByProductType[key]\n          .forEach(col => { col.title = $translate.instant(col._title); }));\n    }\n\n    return colsByProductType;\n  });\n","import reportStyles from 'shared/reports/services/report-styles.service';\n\n/**\n * Data to report converter for Product Report\n */\nexport default angular.module('deskworks.productReportData', [\n  'deskworks.inventory.optsProductType',\n  reportStyles.name,\n])\n\n  .factory('productReportData', function(reportStyles, optsProductType) {\n\n    return dataToReport;\n\n    /**\n     *\n     * @param params\n     * @param data -\n     * @returns {{columns: Array, styles: Array, rows: Array}}\n     */\n    function dataToReport(params, data) {\n      return optsProductType.map(productType => {\n        const report = {\n          id: productType.id,\n          name: productType.name,\n          columns: params.columns[productType.id].filter(c => c.include),\n          rows: [],\n          styles: [],\n        };\n\n        data\n          .filter(product => product.type === productType.id)\n          .forEach((product, idx) => {\n            report.rows.push(report.columns.map(col => product[col.dataKey]))\n            report.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n          });\n\n        return report;\n      });\n    }\n\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\nimport ProductReport from './product-report.service';\nimport productReportColumns from './product-report-columns.service';\nimport productReportData from './product-report-data.service';\n\nexport default angular.module('deskworks.productReport', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  ProductReport.name,\n  productReportColumns.name,\n  productReportData.name,\n])\n  .controller('ProductReportCtrl', function($scope, $q, $timeout, $filter, $translate, state, helper, debounce,\n                                            dwAlerts, reportHelper, reportStyles, ProductReport,\n                                            productReportColumns, productReportData) {\n    const $ctrl = this;\n\n    const { paramsChanged, loadResources } = reportHelper;\n\n    $ctrl.config = {\n      reportName: $translate.instant('PRODUCTS.INVENTORY_LIST'),\n    };\n    $ctrl.params = {\n      centerId: false,\n      paperSize: 'A2',\n    };\n    $ctrl.resources = null;\n    $ctrl.data = null;\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    /**\n     * Watch report params and generate new report\n     */\n    $scope.$watch('$ctrl.params', debounce((np, op) => {\n      // if (helper.pointFirstInvalid('#productReport')) return;\n\n      $ctrl.pdf = null;\n      $ctrl.report = null;\n\n      // if (paramsChanged(np, op, ['centerId', 'fromDate', 'toDate', 'byPeriod'])) { $ctrl.data = null; }\n\n      $q.all({\n        resources: $ctrl.resources || loadResources(),\n        data: $ctrl.data || ProductReport.query({ centerId: state.getCurrentCenterId() }),\n      })\n        .then(result => {\n          $ctrl.resources = result.resources;\n          $ctrl.data = result.data;\n        })\n        .then(() => {\n          $ctrl.report = productReportData({ ...$ctrl.params, columns: productReportColumns }, $ctrl.data);\n\n          const doc = new jsPDF($ctrl.params.paperLayout, 'pt', $ctrl.params.paperSize);\n          let startY = reportStyles.pageMargins[0];\n\n          $ctrl.report.forEach(report => {\n            if (!report.rows.length) { return; }\n            drawHeader(report.name);\n            reportHelper.buildPdf({ config: { ...$ctrl.config, ...$ctrl.params }, report, resources: $ctrl.resources, doc, startY });\n            startY = doc.previousAutoTable.finalY + 20;\n          });\n          $ctrl.pdf = doc.output('blob');\n\n          function drawHeader(text) {\n            doc.setFontSize(11);\n            doc.setFont(doc.getFont().fontName, 'bold');\n            doc.autoTableText(text, reportStyles.pageMargins[3], startY, {});\n            startY += 18;\n          }\n        });\n\n    }, 100), true);\n\n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = () => {\n      if (!$ctrl.pdf) return;\n      const fileName = reportHelper.getReportFileName({ extension: 'pdf', config: { ...$ctrl.config, ...$ctrl.params }, resources: $ctrl.resources });\n      reportHelper.download({ blob: $ctrl.pdf, fileName });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    $ctrl.downloadCsv = () => {\n      if (!$ctrl.pdf) return;\n      $ctrl.report.forEach(report => {\n        const reportName = `${$ctrl.config.reportName}-${report.name}`.toLowerCase();\n        const fileName = reportHelper.getReportFileName({ extension: 'csv', config: { reportName, ...$ctrl.params }, resources: $ctrl.resources });\n        const csv = reportHelper.buildCsv({ report });\n        reportHelper.download({ blob: csv, fileName });\n      });\n    };\n  });\n","/**\n * ProductReport service\n */\nexport default angular.module('deskworks.ProductReport', [\n  'deskworks.inventory.product.service',\n  'deskworks.inventory.membershipCategory.service',\n  'deskworks.reservationCategory.service',\n  'deskworks.billing.optsBillingFrequency',\n  'deskworks.inventory.optsCountCheckInsPer',\n])\n\n  .factory('ProductReport', function($q, dwAlerts, productService, membershipCategoryService, reservationCategoryService,\n                                     optsBillingFrequency, optsCountCheckInsPer) {\n    return {\n      query: ({ centerId }) =>\n        $q.all({\n          products: productService.getProducts()\n            .catch(err => dwAlerts.error(err, 'Failed to query products.')),\n          membershipCategories: membershipCategoryService.query()\n            .catch(err => dwAlerts.error(err, 'Failed to query membership categories.')),\n          reservationCategories: reservationCategoryService.query(centerId)\n            .catch(err => dwAlerts.error(err, 'Failed to query reservation categories.')),\n        })\n          .then(results => {\n            const { products, membershipCategories, reservationCategories } = results;\n\n            products.forEach(product => {\n              if (product.membershipTypeId) {\n                const category = membershipCategories.find(c => c.id === product.membershipTypeId) || { name: product.membershipTypeId };\n                product.membershipCategory = category.name;\n              }\n              if (product.passProductId) {\n                const passProduct = products.find(p => p.id === product.passProductId) || { name: product.passProductId };\n                product.passProduct = passProduct.name;\n              }\n              if (product.reservationTypeId) {\n                const category = reservationCategories.find(c => c.id === product.reservationTypeId) || { name: product.reservationTypeId };\n                product.reservationCategory = category.name;\n              }\n              if (product.billingFrequency) {\n                const freq = optsBillingFrequency.find(o => o.id === product.billingFrequency) || { name: product.billingFrequency };\n                product.billingFrequency = freq.name;\n              }\n              if (product.countCheckInsPer) {\n                const opt = optsCountCheckInsPer.find(o => o.id === product.countCheckInsPer) || { name: product.countCheckInsPer };\n                product.countCheckInsPer = opt.name;\n              }\n              if (product.printerUsageFreeCopiesSettings) {\n                product.printerUsageFreeCopiesSettings.forEach(setting => {\n                  product[setting.printerUsageType] = setting.freeCount || 0;\n                });\n              }\n\n              product.showInSelfRegistration = !product.hideInSelfRegistration;\n            });\n\n            return products;\n          }),\n    };\n  });\n","// Module\nvar code = \"<div ng-controller=\\\"ProductReportCtrl as $ctrl\\\" class=\\\"gutter-v\\\"> <div class=\\\"ff-grid\\\"> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\" style=\\\"margin-left:auto\\\"> <report-options model=\\\"$ctrl.params\\\"></report-options> </div> </div> <ff-btn-group> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Options for Report / Group By Period\n */\nexport default angular.module('deskworks.reports.optsRbcReportByPeriod', ['deskworks.reports.optsReportByPeriod'])\n\n  .factory('optsRbcReportByPeriod', ($rootScope, $translate, $filter, optsReportByPeriod) => {\n      const df = date => $filter('date')(date, 'mediumDate');\n\n    const opts = [{ id: 'none', _name: 'GLOBAL.NONE', format: (from, to) => `${df(from)} - ${df(to)}` }].concat(optsReportByPeriod);\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { opts.forEach(opt => { opt.name = $translate.instant(opt._name); }); }\n\n    return opts;\n  });\n","\n/**\n * Chart for Recurring Billing Change Report\n */\nexport default angular.module('deskworks.reports.recurringBillingChangeChart', [])\n\n  .factory('recurringBillingChangeChart', function($translate, $filter, helper, whitelabel) {\n\n    return (data) => {\n      const datasets = [\n        {\n          label: $translate.instant('RECURRING_BILLING_CHANGE_REPORT.NEW_RB'),\n          data: data.map(period => period.totalNew),\n          maxBarThickness: 50,\n          backgroundColor: '#317da3',\n        },\n        {\n          label: $translate.instant('RECURRING_BILLING_CHANGE_REPORT.NOTICES_GIVEN'),\n          data: data.map(period => period.totalNotices),\n          maxBarThickness: 50,\n          backgroundColor: '#3cb44b',\n        },\n        {\n          label: $translate.instant('RECURRING_BILLING_CHANGE_REPORT.TERMINATIONS'),\n          data: data.map(period => period.totalTermination),\n          maxBarThickness: 50,\n          backgroundColor: '#808080',\n        },\n      ];\n\n\n      const chart = {\n        type: 'bar',\n        data: {\n          labels: data.map(period => period.title),\n          datasets,\n        },\n        options: {\n          tooltips: {\n            mode: 'index',\n            intersect: true,\n            displayColors: true,\n            callbacks: {\n              label: (tooltipItem, data) => {\n                const dataset = data.datasets[tooltipItem.datasetIndex];\n                return dataset.label + ': ' + $filter('currency')(dataset.data[tooltipItem.index]);\n              }\n            },\n          },\n          legend: { display: true, position: 'left' },\n          scales: {\n            yAxes: [{\n              ticks: {\n                min: 0,\n                callback: value => $filter('currency')(value, undefined, 0),\n              },\n            }],\n          },\n        },\n      };\n\n      return chart;\n    }\n  });\n","import reportStyles from 'shared/reports/services/report-styles.service';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport recurringBillingChangeReportColumns from './recurring-billing-change-report-columns.service';\n\n/**\n * Data to report converter for Recurring Billing Change Report\n */\nexport default angular.module('deskworks.reports.recurringBillingChangeData', [\n  reportStyles.name,\n  reportHelper.name,\n])\n\n  .factory('recurringBillingChangeData', function($filter, $translate, helper, reportStyles, reportHelper) {\n\n    return dataToReport;\n\n    /**\n     *\n     * @param params\n     * @param data -\n     * @returns {{columns: Array, styles: Array, rows: Array}}\n     */\n    function dataToReport(params, data) {\n      const report = {\n        columns: params.columns.filter(c => c.include),\n        rows: [],\n        styles: [],\n      };\n\n      if (!data || !data.length) return report;\n\n      const fcurr = $filter('currency');\n      const fdate = (date) => $filter('date')(date, 'mediumDate');\n\n      data.forEach(period => {\n        const revenue1 = $translate.instant('RECURRING_BILLING_CHANGE_REPORT.REVENUE_AS_OF_DATE', { date: fdate(period.from) });\n        const totalNew = $translate.instant('RECURRING_BILLING_CHANGE_REPORT.TOTAL_NEW');\n        report.rows.push([\n          { content: `${revenue1}: ${fcurr(period.revenueFirstDay)}`, colSpan: Math.ceil(report.columns.length / 2) },\n          { content: `${totalNew}: ${fcurr(period.totalNew)}`, colSpan: Math.floor(report.columns.length / 2) },\n        ]);\n        report.styles.push(reportStyles.h3);\n\n        const revenue2 = $translate.instant('RECURRING_BILLING_CHANGE_REPORT.REVENUE_AS_OF_DATE', { date: fdate(period.to) });\n        const totalNotices = $translate.instant('RECURRING_BILLING_CHANGE_REPORT.TOTAL_NOTICES');\n        report.rows.push([\n          { content: `${revenue2}: ${fcurr(period.revenueLastDay)}`, colSpan: Math.ceil(report.columns.length / 2) },\n          { content: `${totalNotices}: ${fcurr(period.totalNotices)}`, colSpan: Math.floor(report.columns.length / 2) }\n        ]);\n        report.styles.push(reportStyles.h3);\n\n        const totalTerminations = $translate.instant('RECURRING_BILLING_CHANGE_REPORT.TOTAL_TERMINATIONS');\n        report.rows.push([\n          { content: false, colSpan: Math.ceil(report.columns.length / 2) },\n          { content: `${totalTerminations}: ${fcurr(period.totalTermination)}`, colSpan: Math.floor(report.columns.length / 2) }\n        ]);\n        report.styles.push(reportStyles.h3);\n\n        reportHelper.sort(period.billings, params.orderBy).forEach((billing, idx) => {\n          report.rows.push(report.columns.map(col => billing[col.dataKey]));\n          report.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        })\n      });\n\n      return report;\n    }\n\n  });\n","/**\n * Columns for Recurring Billing Change Report\n */\nexport default angular.module('deskworks.recurringBillingChangeReportColumns', ['deskworks.userProfile.optsMembershipStatus'])\n  .factory('recurringBillingChangeReportColumns', function($rootScope, $translate, $filter, optsMembershipStatus) {\n    const cols = [\n      {\n        dataKey: 'centerName', _title: 'REPORTS.COLUMNS.CENTER', include: false,\n      },\n      {\n        dataKey: 'userCompany', _title: 'REPORTS.COLUMNS.USER_COMPANY', include: true, defaultOrder: true,\n      },\n      {\n        dataKey: 'userName', _title: 'RECURRING_BILLING_CHANGE_REPORT.COLUMNS.MEMBER', include: true,\n        // styles: { minCellWidth: 100 },\n      },\n      {\n        dataKey: 'userMembershipStatus', _title: 'RECURRING_BILLING_CHANGE_REPORT.COLUMNS.MEMBER_STATUS', include: true,\n        styles: { halign: 'center', cellWidth: 50 },\n        pdf: v => (optsMembershipStatus.find(o => o.id === v) || {}).name || v,\n        csv: v => (optsMembershipStatus.find(o => o.id === v) || {}).name || v,\n      },\n      {\n        dataKey: 'productName', _title: 'RECURRING_BILLING_CHANGE_REPORT.COLUMNS.PRODUCT', include: true,\n        styles: { minCellWidth: 110 },\n      },\n      {\n        dataKey: 'amount', _title: 'REPORTS.COLUMNS.AMOUNT', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('currency')(v), csv: v => $filter('currency')(v),\n      },\n      {\n        dataKey: 'discount', _title: 'REPORTS.COLUMNS.DISCOUNT', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('currency')(v), csv: v => $filter('currency')(v),\n      },\n      {\n        dataKey: 'total', _title: 'REPORTS.COLUMNS.TOTAL', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('currency')(v), csv: v => $filter('currency')(v),\n      },\n      {\n        dataKey: 'startDate', _title: 'RECURRING_BILLING_CHANGE_REPORT.COLUMNS.START_DATE', include: true,\n        styles: { halign: 'right', cellWidth: 55 },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'noticeDate', _title: 'RECURRING_BILLING_CHANGE_REPORT.COLUMNS.NOTICE_DATE', include: true,\n        styles: { halign: 'right', cellWidth: 55 },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'terminationDate', _title: 'RECURRING_BILLING_CHANGE_REPORT.COLUMNS.TERMINATION_DATE', include: true,\n        styles: { halign: 'right', cellWidth: 55 },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'daysActive', _title: 'RECURRING_BILLING_CHANGE_REPORT.COLUMNS.DAYS_ACTIVE', include: true,\n        styles: { halign: 'right', cellWidth: 45 },\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import reportHelper from 'shared/reports/services/report-helper.service';\nimport pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\nimport reportOrderBy from '../directives/report-order-by.directive';\n\nimport recurringBillingChangeData from './recurring-billing-change-data.service';\nimport recurringBillingChangeChart from './recurring-billing-change-chart.service';\nimport recurringBillingChangeReportColumns from './recurring-billing-change-report-columns.service';\nimport RecurringBillingChangeReport from './recurring-billing-change-report.service';\nimport optsRbcReportByPeriod from './opts-rbc-report-by-period.service';\n\nexport default angular.module('deskworks.RecurringBillingChangeReportCtrl', [\n  'debounce',\n  'deskworks.state',\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  reportOrderBy.name,\n  recurringBillingChangeData.name,\n  recurringBillingChangeChart.name,\n  recurringBillingChangeReportColumns.name,\n  RecurringBillingChangeReport.name,\n  optsRbcReportByPeriod.name,\n])\n\n  .controller('RecurringBillingChangeReportCtrl', function($scope, $timeout, $filter, $translate, $q, systemColors,\n                                                           debounce, state, helper, reportStyles, reportHelper, dwAlerts,\n                                                           RecurringBillingChangeReport, recurringBillingChangeReportColumns,\n                                                           recurringBillingChangeData, recurringBillingChangeChart,\n                                                           optsRbcReportByPeriod) {\n    const $ctrl = this;\n\n    const { paramsChanged, loadResources } = reportHelper;\n\n    $ctrl.config = {\n      reportName: $translate.instant('RECURRING_BILLING_CHANGE_REPORT.REPORT_NAME'),\n    };\n    $ctrl.params = {\n      fromDate: state.getParam('fromDate') ? $filter('toDate')(state.getParam('fromDate')) : moment().subtract(1, 'year'),\n      toDate: state.getParam('toDate') ? $filter('toDate')(state.getParam('toDate')) : moment(),\n      byPeriod: state.getParam('byPeriod') || 'month',\n      orderBy: state.getParam('orderBy') || 'userCompany',\n      columns: recurringBillingChangeReportColumns,\n    };\n    $ctrl.resources = null;\n    $ctrl.data = null;\n    $ctrl.optsByPeriod = optsRbcReportByPeriod;\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    /**\n     * Watch report params and generate new report\n     */\n    $scope.$watch('$ctrl.params', debounce((np, op) => {\n      if (helper.pointFirstInvalid('#recurringBillingChangeReport')) return;\n\n      $ctrl.pdf = null;\n      $ctrl.report = null;\n\n      if (paramsChanged(np, op, ['centerId', 'fromDate', 'toDate', 'byPeriod'])) { $ctrl.data = null; }\n\n      $q.all({\n        resources: $ctrl.resources || loadResources(),\n        data: $ctrl.data || RecurringBillingChangeReport.query($ctrl.params).catch(err => dwAlerts.error(err, 'Failed to query report.')),\n      })\n        .then(result => {\n          $ctrl.resources = result.resources;\n          $ctrl.data = result.data;\n        })\n        .then(() => {\n          $ctrl.report = recurringBillingChangeData($ctrl.params, $ctrl.data);\n          const doc = reportHelper.buildPdf({ config: { ...$ctrl.config, ...$ctrl.params }, report: $ctrl.report, resources: $ctrl.resources });\n          $ctrl.pdf = doc.output('blob');\n          $ctrl.chart = recurringBillingChangeChart($ctrl.data);\n        });\n\n    }, 100), true);\n\n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = () => {\n      if (!$ctrl.pdf) return;\n      const fileName = reportHelper.getReportFileName({ extension: 'pdf', config: { ...$ctrl.config, ...$ctrl.params }, resources: $ctrl.resources });\n      reportHelper.download({ blob: $ctrl.pdf, fileName });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    $ctrl.downloadCsv = () => {\n      if (!$ctrl.pdf) return;\n      const fileName = reportHelper.getReportFileName({ extension: 'csv', config: { ...$ctrl.config, ...$ctrl.params }, resources: $ctrl.resources });\n      const csv = reportHelper.buildCsv({ report: $ctrl.report });\n      reportHelper.download({ blob: csv, fileName });\n    };\n  });\n","import optsRbcReportByPeriod from './opts-rbc-report-by-period.service';\n\n/**\n * RecurringBillingChangeReport service\n */\nexport default angular.module('deskworks.RecurringBillingChangeReport', [\n  'ngResource',\n  'deskworks.config',\n  'datesDeserializer',\n  optsRbcReportByPeriod.name,\n])\n  .factory('RecurringBillingChangeReport', function($resource, $timeout, deskworksConfig, datesDeserializer, optsRbcReportByPeriod) {\n    const url = deskworksConfig.getApiAbsUrl('/reports/recurring-billing-change');\n\n    const desDates = datesDeserializer(['from', 'to', 'billings.startDate', 'billings.noticeDate', 'billings.terminationDate']);\n\n    const res = $resource(url, {}, {\n      query: { method: 'GET', isArray: true, transformResponse: [angular.fromJson, desDates] },\n    });\n\n    return {\n      query: params => res.query(params).$promise\n      .then(data => deserialize({ data, params })),\n    };\n\n    function deserialize({ data, params }) {\n      const { byPeriod = 'month' } = params;\n      const periodConfig = optsRbcReportByPeriod.find(i => i.id === byPeriod);\n\n      data.forEach(period => {\n        period.title = periodConfig.format(period.from, period.to);\n      });\n\n      return data;\n    }\n  });\n","// Module\nvar code = \"<div id=\\\"recurringBillingChangeReport\\\" class=\\\"gutter-v\\\"> <form> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-dates model=\\\"$ctrl.params\\\"></report-dates> <report-columns model=\\\"$ctrl.params\\\"></report-columns> </div> </div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <report-options model=\\\"$ctrl.params\\\"> <report-by-period model=\\\"$ctrl.params.byPeriod\\\" opts=\\\"$ctrl.optsByPeriod\\\"></report-by-period> <report-order-by model=\\\"$ctrl.params.orderBy\\\" report-columns=\\\"$ctrl.params.columns\\\" levels=\\\"2\\\"></report-order-by> </report-options> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <ff-panel-header><span translate=\\\"RECURRING_BILLING_CHANGE_REPORT.CHART.HEADER\\\"></span></ff-panel-header> <div ff-dim=\\\"!$ctrl.pdf\\\"> <chart config=\\\"$ctrl.chart\\\" style=\\\"max-height:228px\\\"></chart> </div> </ff-panel> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Recurring Billing Churn Report\n */\nexport default angular.module('deskworks.recurringBillingChurnReportColumns', [\n  'deskworks.userProfile.optsMembershipStatus',\n  'deskworks.userProfile.optsBillingMethod',\n])\n\n  .factory('recurringBillingChurnReportColumns', function($rootScope, $filter, $translate, optsMembershipStatus, optsBillingMethod) {\n    const cols = [\n      {\n        dataKey: 'centerName', _title: 'RECURRING_BILLING_CHURN_REPORT.COLUMNS.CENTER',\n      },\n      {\n        dataKey: 'userCompany', _title: 'RECURRING_BILLING_CHURN_REPORT.COLUMNS.COMPANY', include: true, defaultOrder: true,\n        styles: { minCellWidth: 60 },\n      },\n      {\n        dataKey: 'userName', _title: 'RECURRING_BILLING_CHURN_REPORT.COLUMNS.MEMBER', include: true,\n      },\n      {\n        dataKey: 'userMembershipStatus', _title: 'RECURRING_BILLING_CHURN_REPORT.COLUMNS.MEMBER_STATUS', include: true,\n        styles: { halign: 'center' },\n        pdf: v => (optsMembershipStatus.find(o => o.id === v) || {}).name || v,\n        csv: v => (optsMembershipStatus.find(o => o.id === v) || {}).name || v,\n      },\n      {\n        dataKey: 'productName', _title: 'RECURRING_BILLING_CHURN_REPORT.COLUMNS.RECURRING_BILLING_ITEM', include: true,\n      },\n      {\n        dataKey: 'billingMethod', _title: 'RECURRING_BILLING_CHURN_REPORT.COLUMNS.BILLING_METHOD', include: true,\n        styles: { halign: 'center' },\n        pdf: v => (optsBillingMethod.find(o => o.id === v) || {}).name || v,\n        csv: v => (optsBillingMethod.find(o => o.id === v) || {}).name || v,\n      },\n      {\n        dataKey: 'amount', _title: 'RECURRING_BILLING_CHURN_REPORT.COLUMNS.AMOUNT', include: true,\n        styles: { halign: 'right', cellWidth: 'wrap' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'discount', _title: 'RECURRING_BILLING_CHURN_REPORT.COLUMNS.DISCOUNT', include: true,\n        styles: { halign: 'right', cellWidth: 'wrap' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'total', _title: 'RECURRING_BILLING_CHURN_REPORT.COLUMNS.TOTAL', include: true,\n        styles: { halign: 'right', cellWidth: 'wrap' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'startDate', _title: 'RECURRING_BILLING_CHURN_REPORT.COLUMNS.START_DATE', include: true,\n        styles: { halign: 'right' },\n        pdf: v => $filter('date')(v), csv: v => $filter('date')(v),\n      },\n      {\n        dataKey: 'terminationDate', _title: 'RECURRING_BILLING_CHURN_REPORT.COLUMNS.TERMINATION_DATE', include: true,\n        styles: { halign: 'right' },\n        pdf: v => $filter('date')(v), csv: v => $filter('date')(v),\n      },\n      {\n        dataKey: 'daysActive', _title: 'RECURRING_BILLING_CHURN_REPORT.COLUMNS.DAYS_ACTIVE', include: true,\n        styles: { halign: 'right' },\n      },\n      {\n        dataKey: 'leadSource', _title: 'RECURRING_BILLING_CHURN_REPORT.COLUMNS.LEAD_SOURCE', include: true,\n        // styles: { halign: 'right' },\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.RecurringBillingChurnReportCtrl', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.RecurringBillingChurnReport',\n  'deskworks.recurringBillingChurnReportColumns',\n])\n  .controller('RecurringBillingChurnReportCtrl', function($scope, $timeout, $filter, $translate, state, reportHelper,\n                                                          reportStyles, ReportBuilder, RecurringBillingChurnReport,\n                                                          recurringBillingChurnReportColumns) {\n    const $ctrl = this;\n\n    $ctrl.config = {\n      reportName: $translate.instant('RECURRING_BILLING_CHURN_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportColumns: { columns: angular.copy(recurringBillingChurnReportColumns) },\n      reportDates: { toDate: state.getParam('toDate') || (date => { state.setParam('toDate', $filter('date')(date, 'yyyy-MM-dd')); return date; })(moment()) },\n      getReportData: () =>\n        RecurringBillingChurnReport.get({\n          centerId: $ctrl.config.reportOptions.centerId,\n          toDate: $filter('date')($ctrl.config.reportDates.toDate, 'yyyy-MM-dd'),\n        }),\n    };\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    /**\n     * Allow center column only if 'All centers' selected\n     */\n    $scope.$watch('$ctrl.config.reportOptions.centerId', val => {\n      const col = $ctrl.config.reportColumns.columns[0];\n      col.readonly = !!val;\n      if (col.readonly) col.include = false;\n      if (col.readonly && $ctrl.config.orderBy === 'centerName') $ctrl.config.orderBy = 'userCompany';\n    });\n\n    $ctrl.reportBuilder = new ReportBuilder($ctrl.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report, set toDate url param\n     */\n    let debounceTimeout;\n    $scope.$watch(_ => ({\n      reportOptions: $ctrl.config.reportOptions,\n      reportColumns: $ctrl.config.reportColumns,\n      toDate: $ctrl.config.reportDates.toDate,\n      orderBy: $ctrl.config.orderBy,\n    }), (newVal, oldVal) => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(_ => {\n        $ctrl.pdf = null;\n        if (angular.isUndefined($ctrl.config.reportOptions.centerId)) return;\n\n        let newDate = newVal.toDate, oldDate = oldVal.toDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) {\n          $ctrl.config.reportData = null;\n          state.setParam('toDate', $filter('date')(newVal.toDate, 'yyyy-MM-dd'));\n        }\n\n        $ctrl.reportBuilder.buildPdf(reportDataCallback).then(blob => { $ctrl.pdf = blob; });\n      }, 100);\n    }, true);\n\n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = () => {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.pdf, fileName: $ctrl.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n    * Generate and download CSV report\n    */\n    $ctrl.downloadCsv = () => {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.reportBuilder.buildCsv(reportDataCallback), fileName: $ctrl.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns.columns.filter(item => item.include),\n        rows: [],\n        styles: [],\n      };\n\n      result.rows = reportHelper.sort(config.reportData.billings, config.orderBy);\n      result.rows = result.rows.map((item, idx) => {\n        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        return result.columns.map(col => item[col.dataKey]);\n      });\n\n      // Add empty row\n      result.rows.push([{ content: false, colSpan: result.columns.length }]);\n      result.styles.push(null);\n\n      // Add total rows\n      const totalRows = [\n        { name: 'MONTHLY_RECURRING_BILLINGS', key: 'monthly' },\n        { name: 'QUARTERLY_RECURRING_BILLINGS', key: 'quarterly' },\n        { name: 'SEMIANNUAL_RECURRING_BILLINGS', key: 'semiAnnual' },\n        { name: 'ANNUAL_RECURRING_BILLINGS', key: 'annual' },\n        { name: 'AS_NEEDED_RECURRING_BILLINGS', key: 'asNeeded' },\n      ];\n\n      const totalIdx = result.columns.findIndex(col => col.dataKey === 'total');\n\n      if (totalIdx >= 0) {\n        totalRows.forEach(tr => {\n          const row = [{ content: $filter('ncurrency')(config.reportData[tr.key]), styles: { halign: 'right' } }];\n          if (totalIdx > 0) row.unshift({\n            content: $translate.instant(`RECURRING_BILLING_CHURN_REPORT.TOTALS.${tr.name}`) + ':',\n            colSpan: totalIdx, styles: { halign: 'right' },\n          });\n          if (totalIdx < result.columns.length - 1) row.push({ content: false, colSpan: result.columns.length - totalIdx - 1 });\n          result.rows.push(row);\n          result.styles.push(reportStyles.h3);\n        });\n      }\n\n      return result;\n    }\n  });\n","/**\n * RecurringBillingChurnReport service\n */\nexport default angular.module('deskworks.RecurringBillingChurnReport', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config',\n])\n\n  .factory('RecurringBillingChurnReport', function($resource, datesDeserializer, deskworksConfig) {\n    const desDates = datesDeserializer(['billings.startDate', 'billings.terminationDate']);\n    const url = deskworksConfig.getApiAbsUrl('/reports/recurring-billing-churn');\n\n    const res = $resource(url, {}, {\n      get: { method: 'GET', isArray: false, transformResponse: [angular.fromJson, desDates] },\n    });\n\n    return {\n      get: params => res.get(params).$promise,\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"recurringBillingChurnReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formRecurringBillingChurnReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 65%', md: '0 0 50%'}\\\"> <report-columns model=\\\"$ctrl.config.reportColumns\\\"></report-columns> </div> <div flex=\\\"{lg: '0 0 35%', md: '0 0 50%'}\\\"> <report-options model=\\\"$ctrl.config.reportOptions\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><span translate=\\\"RECURRING_BILLING_CHURN_REPORT.AS_OF\\\"></span></ff-label> <ff-date flex=\\\"0 0 124px\\\" ff-model=\\\"$ctrl.config.reportDates.toDate\\\" ff-validate-alert=\\\"{{'RECURRING_BILLING_CHURN_REPORT.AS_OF' | translate}}\\\"></ff-date> <span class=\\\"ff-label\\\"></span> </label> <report-order-by model=\\\"$ctrl.config.orderBy\\\" report-columns=\\\"$ctrl.config.reportColumns.columns\\\"></report-order-by> </report-options> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Recurring Billing Report\n */\nexport default angular.module('deskworks.reports.recurringBillingReportColumns', [])\n\n  .factory('recurringBillingReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'userCompany', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.COMPANY', include: true,\n      },\n      {\n        dataKey: 'userName', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.MEMBER', include: true,\n        styles: { minCellWidth: 100 },\n      },\n      {\n        dataKey: 'centerName', _title: 'REPORTS.COLUMNS.CENTER', include: false,\n      },\n      {\n        dataKey: 'lastBillDate', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.LAST_BILL_DATE', include: true,\n        styles: { halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'nextBillDate', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.NEXT_BILL_DATE', include: true,\n        styles: { halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'amount', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.AMOUNT', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: function(val) { return $filter('ncurrency')(val); },\n        csv: function(val) { return $filter('ncurrency')(val); } },\n      {\n        dataKey: 'billingMethod', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.BILLING_METHOD', include: true,\n      },\n      {\n        dataKey: 'ccExpiry', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.CC_EXPIRY', include: false,\n        styles: { halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'discount', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.DISCOUNT', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: function(val) { return $filter('ncurrency')(val); },\n        csv: function(val) { return $filter('ncurrency')(val); } },\n      {\n        dataKey: 'productName', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.PRODUCT', include: true,\n        styles: { minCellWidth: 120 },\n      },\n      {\n        dataKey: 'description', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.DESCRIPTION', include: false,\n      },\n      {\n        dataKey: 'startDate', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.START_DATE', include: true,\n        styles: { halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'noticeDate', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.NOTICE_DATE', include: false,\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'noticePeriod', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.NOTICE_PERIOD', include: false,\n      },\n      {\n        dataKey: 'noticeRequiredBy', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.NOTICE_REQUIRED_BY', include: false,\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'terminate', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.TERMINATION_DATE', include: false,\n        styles: { halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'renewalDate', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.RENEWAL_DATE', include: false,\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'renewalTerm', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.RENEWAL_TERM', include: false,\n      },\n      {\n        dataKey: 'renewalNoticePeriod', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.RENEWAL_REMINDER', include: false,\n      },\n      {\n        dataKey: 'useForCheckInBilling', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.USE_FOR_CHECK_IN_BILLING', include: false,\n        styles: { halign: 'center' },\n        pdf: v => $filter('yesno')(v), csv: v => $filter('yesno')(v)},\n      {\n        dataKey: 'total', _title: 'RECURRING_BILLINGS_REPORT.COLUMNS.TOTAL', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.reports.recurringBillingReport', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportColumns',\n  'deskworks.reports.reportOwnerRegion',\n  'deskworks.reports.recurringBillingReport.service',\n  'deskworks.reports.recurringBillingReportColumns'\n])\n\n  .controller('RecurringBillingReportCtrl', function($scope, $timeout, $filter, $translate, state, helper,\n                                                     reportHelper, reportStyles, ReportBuilder, RecurringBillingReport,\n                                                     recurringBillingReportColumns) {\n    const vm = this;\n\n    vm.config = {\n      reportName: $translate.instant('RECURRING_BILLINGS_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportColumns: { columns: angular.copy(recurringBillingReportColumns) },\n      reportOwnerRegion: {},\n      getReportData: function() {\n        return RecurringBillingReport.get({\n          centerId: vm.config.reportOptions.centerId,\n          ownerId: vm.config.reportOwnerRegion.ownerId,\n          regionId: vm.config.reportOwnerRegion.regionId,\n        }).$promise;\n      },\n    };\n\n    state.setPageTitle(vm.config.reportName);\n\n    vm.reportBuilder = new ReportBuilder(vm.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    var debounceTimeout;\n    $scope.$watch(_ => ({ reportOptions: vm.config.reportOptions, reportColumns: vm.config.reportColumns, orderBy: vm.config.orderBy, reportOwnerRegion: vm.config.reportOwnerRegion }), _ => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(_ => {\n        vm.pdf = null;\n        if (angular.isUndefined(vm.config.reportOptions.centerId)) return;\n        vm.reportBuilder.buildPdf(reportDataCallback)\n          .then(blob => { vm.pdf = blob; });\n      }, 100);\n    }, true);\n\n    /**\n     * Download generated PDF report\n     */\n    vm.downloadPdf = function() {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.pdf, fileName: vm.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    vm.downloadCsv = function() {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.reportBuilder.buildCsv(reportDataCallback), fileName: vm.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns.columns.filter(item => item.include),\n        rows: reportHelper.sort(config.reportData.billings, vm.config.orderBy),\n        styles: [],\n      };\n\n      result.rows = result.rows.map((billing, idx) => {\n        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        return result.columns.map(col => billing[col.dataKey]);\n      });\n\n      // Totals only if we have total column\n      let row, idx, totalIdx = helper.findIndexByKeyValue(result.columns, 'dataKey', 'total');\n      if (totalIdx >= 0) {\n        idx = helper.findIndexByKeyValue(result.columns, 'dataKey', 'description');\n        idx = idx < 0 ? helper.findIndexByKeyValue(result.columns, 'dataKey', 'productName') : idx;\n        idx = idx < 0 ? result.columns.length - 2 : idx;\n\n        result.rows.push(Array.apply(null, Array(result.columns.length)).map(Boolean.prototype.valueOf, false)); // empty line\n        result.styles.push(null);\n\n        row = Array.apply(null, Array(result.columns.length)).map(Boolean.prototype.valueOf, false);\n        row[idx] = $translate.instant('RECURRING_BILLINGS_REPORT.TOTALS.MONTHLY') + ':';\n        row[totalIdx] = config.reportData.totalMonthly;\n        result.rows.push(row); result.styles.push(reportStyles.h3);\n\n        row = Array.apply(null, Array(result.columns.length)).map(Boolean.prototype.valueOf, false);\n        row[idx] = $translate.instant('RECURRING_BILLINGS_REPORT.TOTALS.QUARTERLY') + ':';\n        row[totalIdx] = config.reportData.totalQuarterly;\n        result.rows.push(row); result.styles.push(reportStyles.h3);\n\n        row = Array.apply(null, Array(result.columns.length)).map(Boolean.prototype.valueOf, false);\n        row[idx] = $translate.instant('RECURRING_BILLINGS_REPORT.TOTALS.SEMI_ANNUAL') + ':';\n        row[totalIdx] = config.reportData.totalSemiAnnual;\n        result.rows.push(row); result.styles.push(reportStyles.h3);\n\n        row = Array.apply(null, Array(result.columns.length)).map(Boolean.prototype.valueOf, false);\n        row[idx] = $translate.instant('RECURRING_BILLINGS_REPORT.TOTALS.ANNUAL') + ':';\n        row[totalIdx] = config.reportData.totalAnnual;\n        result.rows.push(row); result.styles.push(reportStyles.h3);\n\n        row = Array.apply(null, Array(result.columns.length)).map(Boolean.prototype.valueOf, false);\n        row[idx] = $translate.instant('RECURRING_BILLINGS_REPORT.TOTALS.AS_NEEDED') + ':';\n        row[totalIdx] = config.reportData.totalAsNeeded;\n        result.rows.push(row); result.styles.push(reportStyles.h3);\n      }\n\n      return result;\n    }\n  });\n","/**\n * RecurringBillingReport service\n */\nexport default angular.module('deskworks.reports.recurringBillingReport.service', [\n  'ngResource',\n  'datesDeserializer',\n  'deserializeNumbers',\n  'deskworks.config'\n])\n\n  .factory('RecurringBillingReport', function($resource, datesDeserializer, deserializeNumbers, deskworksConfig) {\n    const numbersDeserializer = deserializeNumbers(['billings.total', 'billings.discount', 'billings.amount',\n      'billings.noticePeriod', 'billings.renewalTerm', 'billings.renewalNoticePeriod']);\n    const desDates = datesDeserializer(['billings.lastBillDate', 'billings.nextBillDate', 'billings.startDate',\n      'billings.ccExpiry', 'billings.terminate', 'billings.noticeDate', 'billings.renewalDate']);\n\n    const url = deskworksConfig.getApiAbsUrl('/centers/:centerId/recurring-billing-reports');\n\n    return $resource(url, { centerId: '@centerId' }, {\n      get: { method: 'GET', transformResponse: [angular.fromJson, desDates, numbersDeserializer, deserialize] }\n    });\n\n    function deserialize(data) {\n      data = angular.fromJson(data);\n      data.billings.forEach(item => {\n        if (item.renewalDate && item.noticePeriod) {\n          item.noticeRequiredBy = new Date(item.renewalDate - item.noticePeriod * 24 * 3600000);\n        }\n      });\n\n      return data;\n    }\n  });\n","// Module\nvar code = \"<div id=\\\"recurringBillingReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formRecurringBillingReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 65%', md: '0 0 50%'}\\\"> <report-columns model=\\\"vm.config.reportColumns\\\"></report-columns> </div> <div flex=\\\"{lg: '0 0 35%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-options model=\\\"vm.config.reportOptions\\\"> <report-order-by model=\\\"vm.config.orderBy\\\" report-columns=\\\"vm.config.reportColumns.columns\\\" levels=\\\"2\\\"></report-order-by> </report-options> <report-owner-region model=\\\"vm.config.reportOwnerRegion\\\" report-data=\\\"vm.config.reportData\\\"></report-owner-region> </div> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadPdf()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadCsv()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"vm.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Rent Roll Report\n */\nexport default angular.module('deskworks.rentRollReportColumns', [])\n  .factory('rentRollReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'centerName', _title: 'RENT_ROLL_REPORT.COLUMNS.CENTER', include: false,\n      },\n      {\n        dataKey: 'userCompany', _title: 'RENT_ROLL_REPORT.COLUMNS.COMPANY', include: true,\n      },\n      {\n        dataKey: 'userName', _title: 'RENT_ROLL_REPORT.COLUMNS.MEMBER', include: false,\n      },\n      {\n        dataKey: 'productName', _title: 'RENT_ROLL_REPORT.COLUMNS.SUBSCRIPTION_ITEM', include: true, defaultOrder: true,\n      },\n      {\n        dataKey: 'area', _title: 'RENT_ROLL_REPORT.COLUMNS.AREA', include: true,\n        styles: { cellWidth: 'wrap', halign: 'center' },\n      },\n      {\n        dataKey: 'amount', _title: 'RENT_ROLL_REPORT.COLUMNS.AMOUNT', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'discount', _title: 'RENT_ROLL_REPORT.COLUMNS.DISCOUNT', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'total', _title: 'RENT_ROLL_REPORT.COLUMNS.TOTAL', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'startDate', _title: 'RENT_ROLL_REPORT.COLUMNS.START_DATE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'terminationDate', _title: 'RENT_ROLL_REPORT.COLUMNS.TERMINATION_DATE', include: true,\n        styles: { halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.RentRollReportCtrl', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.reportColumns',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.RentRollReport',\n  'deskworks.rentRollReportColumns',\n])\n\n  .controller('RentRollReportCtrl', function($scope, $timeout, $translate, $filter, helper, state, reportHelper,\n                                             reportStyles, ReportBuilder, RentRollReport, rentRollReportColumns) {\n\n    const $ctrl = this;\n\n    $ctrl.config = {\n      reportName: $translate.instant('RENT_ROLL_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportColumns: { columns: angular.copy(rentRollReportColumns) },\n      getReportData: () => RentRollReport.query({ centerId: $ctrl.config.reportOptions.centerId || null }),\n    };\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    $ctrl.reportBuilder = new ReportBuilder($ctrl.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    let debounceTimeout;\n    $scope.$watch(() => {\n      return { reportOptions: $ctrl.config.reportOptions, reportColumns: $ctrl.config.reportColumns, orderBy: $ctrl.config.orderBy };\n    }, () => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(() => {\n        $ctrl.pdf = null;\n        if (angular.isUndefined($ctrl.config.reportOptions.centerId)) return;\n\n        $ctrl.reportBuilder.buildPdf(reportDataCallback)\n          .then(blob => { $ctrl.pdf = blob; });\n      }, 100);\n    }, true);\n\n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = () => {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.pdf, fileName: $ctrl.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    $ctrl.downloadCsv = () => {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.reportBuilder.buildCsv(reportDataCallback), fileName: $ctrl.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns.columns.filter(item => item.include),\n        rows: [],\n        styles: [],\n      };\n\n      const totals = ['area', 'amount', 'discount', 'total']\n        .map(k => ({ dataKey: k, amount: 0, colIndex: result.columns.findIndex(c => c.dataKey === k) }));\n\n      let firstTotalIdx = -1;\n      totals.some(total => {\n        firstTotalIdx = result.columns.findIndex(col => col.dataKey === total.dataKey);\n        return firstTotalIdx >= 0;\n      });\n\n      config.reportData.forEach(category => {\n        const charges = $ctrl.reportBuilder.sortData(category.recurringCharges, config.orderBy);\n        const subtotals = angular.copy(totals).map(t => (t.amount = 0, t));\n\n        // Add rows for recurring charges\n        charges.forEach((charge, idx) => {\n          result.rows.push(result.columns.map(col => charge[col.dataKey]));\n          result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n          subtotals.forEach(total => { total.amount += charge[total.dataKey] || 0; });\n        });\n\n        // Add subtotal row\n        if (firstTotalIdx >= 0) {\n          const subtotalRow = Array(result.columns.length).fill(false);\n          if (firstTotalIdx > 0) {\n            subtotalRow[firstTotalIdx - 1] = `${category.productCategoryCode} ${category.productCategoryName} ${$translate.instant('REPORTS.TOTAL')}:`;\n          }\n          subtotals.forEach(total => { subtotalRow[total.colIndex] = helper.round(total.amount); });\n          result.rows.push(subtotalRow);\n          result.styles.push(reportStyles.h2);\n        }\n\n        // Calculate totals\n        totals.forEach((total, idx) => { total.amount += subtotals[idx].amount; });\n      });\n\n      if (firstTotalIdx >= 0) {\n        // Add empty row\n        result.rows.push(Array(result.columns.length).fill(false));\n        result.styles.push(reportStyles.h3);\n\n        // Add total row\n        const totalRow = Array(result.columns.length).fill(false);\n        if (firstTotalIdx > 0) {\n          totalRow[firstTotalIdx - 1] = `${$translate.instant('RENT_ROLL_REPORT.TOTAL_RENT_ROLL')}:`;\n        }\n        totals.forEach(total => { totalRow[total.colIndex] = helper.round(total.amount); });\n        result.rows.push(totalRow);\n        result.styles.push(reportStyles.h3);\n      }\n\n      return result;\n    }\n  });\n","/**\n * RentRollReport service\n */\nexport default angular.module('deskworks.RentRollReport', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config',\n])\n\n  .factory('RentRollReport', function($resource, datesDeserializer, deskworksConfig) {\n    const desDates = datesDeserializer(['recurringCharges.startDate', 'recurringCharges.terminationDate']);\n    const url = deskworksConfig.getApiAbsUrl('/reports/rent-roll');\n\n    const res = $resource(url, { centerId: '@centerId' }, {\n      query: { method: 'GET', isArray: true, transformResponse: [angular.fromJson, desDates] },\n    });\n\n    return {\n      query: params => res.query(params).$promise,\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"rentRollReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formRentRollReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 65%', md: '0 0 50%'}\\\"> <report-columns model=\\\"$ctrl.config.reportColumns\\\"></report-columns> </div> <div flex=\\\"{lg: '0 0 35%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-options model=\\\"$ctrl.config.reportOptions\\\"> <report-order-by model=\\\"$ctrl.config.orderBy\\\" report-columns=\\\"$ctrl.config.reportColumns.columns\\\"></report-order-by> </report-options> </div> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Reservation Report\n */\nexport default angular.module('deskworks.reports.reservationReportColumns', [])\n\n  .factory('reservationReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'startTime', _title: 'RESERVATION_REPORT.COLUMNS.START_TIME', include: true,\n        styles: { minCellWidth: 100 },\n        pdf: v => $filter('date')(v, 'weekDate') + ' ' + $filter('date')(v, 'shortTime'),\n        csv: v => $filter('date')(v, 'shortDate') + ' ' + $filter('date')(v, 'shortTime'),\n      },\n      {\n        dataKey: 'centerName', _title: 'RESERVATION_REPORT.COLUMNS.CENTER', include: false,\n        styles: { minCellWidth: 120 },\n      },\n      {\n        dataKey: 'createdAt', _title: 'RESERVATION_REPORT.COLUMNS.CREATED_AT', include: false,\n        styles: { minCellWidth: 80},\n        pdf: v => $filter('date')(v, 'mediumDate') + ' ' + $filter('date')(v, 'shortTime'),\n        csv: v => $filter('date')(v, 'shortDate') + ' ' + $filter('date')(v, 'shortTime'),\n      },\n      {\n        dataKey: 'endTime', _title: 'RESERVATION_REPORT.COLUMNS.END_TIME', include: true,\n        styles: { minCellWidth: 100 },\n        pdf: v => $filter('date')(v, 'weekDate') + ' ' + $filter('date')(v, 'shortTime'),\n        csv: v => $filter('date')(v, 'shortDate') + ' ' + $filter('date')(v, 'shortTime'),\n      },\n      {\n        dataKey: 'note', _title: 'RESERVATION_REPORT.COLUMNS.NOTE', include: false,\n        styles: { minCellWidth: 120 },\n      },\n      {\n        dataKey: 'reservationUnitName', _title: 'RESERVATION_REPORT.COLUMNS.UNIT', include: true,\n        styles: { minCellWidth: 150 },\n      },\n      {\n        dataKey: 'userCompany', _title: 'RESERVATION_REPORT.COLUMNS.COMPANY', include: true,\n        styles: { minCellWidth: 150 },\n      },\n      {\n        dataKey: 'userName', _title: 'RESERVATION_REPORT.COLUMNS.USER_NAME', include: true,\n        styles: { minCellWidth: 120 },\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.reports.reservationReport', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportColumns',\n  'deskworks.reports.reportOwnerRegion',\n  'deskworks.reports.reservationReport.service',\n  'deskworks.reports.reservationReportColumns',\n])\n  .controller('ReservationReportCtrl', function($scope, $timeout, $filter, $translate, state, helper,\n                                                reportHelper, reportStyles, ReportBuilder, ReservationReport,\n                                                reservationReportColumns, reservationFields) {\n    const vm = this;\n\n    const fieldColumns = reservationFields.map(f => {\n      return {\n        dataKey: f.id,\n        //   styles: { minCellWidth: 100 },\n        title: f.name,\n        include: false, pdf: v => f.$$filter(f, v), csv: v => f.$$filter(f, v),\n      };\n    });\n\n    vm.config = {\n      reportName: $translate.instant('RESERVATION_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportOwnerRegion: {},\n      reportColumns: { columns: angular.copy(reservationReportColumns).concat(fieldColumns) },\n      reportDates: { fromDate: moment(), toDate: moment() },\n      getReportData: function() {\n        return ReservationReport.get({\n          centerId: vm.config.reportOptions.centerId,\n          fromDate: $filter('date')(vm.config.reportDates.fromDate, 'yyyy-MM-dd'),\n          toDate: $filter('date')(vm.config.reportDates.toDate, 'yyyy-MM-dd'),\n          ownerId: vm.config.reportOwnerRegion.ownerId,\n          regionId: vm.config.reportOwnerRegion.regionId,\n        })\n          .then(result => {\n            result.reservations.forEach(res => { // flatten reservation fields\n              Object.keys(res.fields).forEach(key => {\n                const field = reservationFields.find(f => f.id === +key);\n                res[key] = field.$$deserialize(field, res.fields[key]);\n              });\n              delete res.fields;\n            });\n            return result;\n          });\n      },\n    };\n\n    vm.config.reportDates.toDate.add(7, 'd'); // one week range by default\n\n    state.setPageTitle(vm.config.reportName);\n\n    vm.reportBuilder = new ReportBuilder(vm.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    let debounceTimeout;\n    $scope.$watch(_ => {\n        return {\n          reportOptions: vm.config.reportOptions,\n          reportColumns: vm.config.reportColumns,\n          orderBy: vm.config.orderBy,\n          reportDates: vm.config.reportDates,\n          reportOwnerRegion: vm.config.reportOwnerRegion\n        };\n      }, function(newVal, oldVal) {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(_ => {\n        vm.pdf = null;\n        if (angular.isUndefined(vm.config.reportOptions.centerId)) return;\n\n        let newDate = newVal.reportDates.fromDate, oldDate = oldVal.reportDates.fromDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;\n        newDate = newVal.reportDates.toDate; oldDate = oldVal.reportDates.toDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;\n\n        vm.reportBuilder.buildPdf(reportDataCallback)\n          .then(blob => { vm.pdf = blob; });\n      }, 100);\n    }, true);\n\n    /**\n     * Download generated PDF report\n     */\n    vm.downloadPdf = function() {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.pdf, fileName: vm.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    vm.downloadCsv = function() {\n      if (!vm.pdf) return;\n      reportHelper.download({ blob: vm.reportBuilder.buildCsv(reportDataCallback), fileName: vm.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns.columns.filter(item => item.include),\n        rows: reportHelper.sort(config.reportData.reservations, config.orderBy),\n        styles: [],\n      };\n\n      result.rows = result.rows.map((billing, idx) => {\n        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        return result.columns.map(col => billing[col.dataKey]);\n      });\n\n      return result;\n    }\n  });\n","/**\n * ReservationReport service\n */\nexport default angular.module('deskworks.reports.reservationReport.service', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config'\n])\n\n  .factory('ReservationReport', function($resource, datesDeserializer, deskworksConfig) {\n    const desDates = datesDeserializer(['reservations.createdAt', 'reservations.startTime', 'reservations.endTime']);\n    const url = deskworksConfig.getApiAbsUrl('/centers/:centerId/reservation-reports');\n\n    const res = $resource(url, { centerId: '@centerId', fromDate: '@fromDate', toDate: '@toDate' }, {\n      get: { method: 'GET', transformResponse: [angular.fromJson, desDates] }\n    });\n\n    return {\n      get: (params) => res.get(params).$promise,\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"reservationReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formReservationReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <report-columns model=\\\"vm.config.reportColumns\\\"></report-columns> </div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-options model=\\\"vm.config.reportOptions\\\"> <report-dates model=\\\"vm.config.reportDates\\\" embed=\\\"0 0 100px\\\"></report-dates> <report-order-by model=\\\"vm.config.orderBy\\\" report-columns=\\\"vm.config.reportColumns.columns\\\"></report-order-by> </report-options> <report-owner-region model=\\\"vm.config.reportOwnerRegion\\\" report-data=\\\"vm.config.reportData\\\"></report-owner-region> </div> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadPdf()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"vm.downloadCsv()\\\" ff-disabled=\\\"!vm.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"vm.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Reservation Usage Report\n */\nexport default angular.module('deskworks.reservationUsageReportColumns', [])\n\n  .factory('reservationUsageReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'memberCompany', _title: 'REPORTS.COLUMNS.USER_COMPANY',\n      },\n      {\n        dataKey: 'memberName', _title: 'REPORTS.COLUMNS.USER_NAME', defaultOrder: true,\n      },\n      {\n        dataKey: 'reservationCost', _title: 'RESERVATION_USAGE_REPORT.COLUMNS.RESERVATION_COST',\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'reservationCreditApplied', _title: 'RESERVATION_USAGE_REPORT.COLUMNS.RES_CREDITS_APPLIED',\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'reservationCostBalance', _title: 'RESERVATION_USAGE_REPORT.COLUMNS.RES_COST_BALANCE',\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.ReservationUsageReportCtrl', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportDates',\n  'deskworks.reports.reportOwnerRegion',\n  'deskworks.ReservationUsageReport',\n  'deskworks.reservationUsageReportColumns',\n  'deskworks.reportOrderBy',\n])\n\n  .controller('ReservationUsageReportCtrl', function($scope, $timeout, $filter, $translate, state, helper,\n                                                     reportHelper, reportStyles, ReportBuilder, ReservationUsageReport,\n                                                     reservationUsageReportColumns) {\n    const $ctrl = this;\n\n    $ctrl.config = {\n      reportName: $translate.instant('RESERVATION_USAGE_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportOwnerRegion: {},\n      reportColumns: reservationUsageReportColumns,\n      reportDates: { fromDate: moment().subtract(1, 'month').startOf('month'), toDate: moment().subtract(1, 'month').endOf('month') },\n      getReportData: () => {\n        return ReservationUsageReport.query({\n          centerId: $ctrl.config.reportOptions.centerId || null,\n          fromDate: $filter('date')($ctrl.config.reportDates.fromDate, 'yyyy-MM-dd'),\n          toDate: $filter('date')($ctrl.config.reportDates.toDate, 'yyyy-MM-dd'),\n          ownerId: $ctrl.config.reportOwnerRegion.ownerId,\n          regionId: $ctrl.config.reportOwnerRegion.regionId,\n        });\n      },\n    };\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    $ctrl.reportBuilder = new ReportBuilder($ctrl.config);\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report\n     */\n    let debounceTimeout;\n    $scope.$watch(() => {\n        return { reportOptions: $ctrl.config.reportOptions, reportDates: $ctrl.config.reportDates, orderBy: $ctrl.config.orderBy, reportOwnerRegion: $ctrl.config.reportOwnerRegion };\n      }, (newVal, oldVal) => {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(() => {\n        $ctrl.pdf = null;\n\n        let newDate = newVal.reportDates.fromDate, oldDate = oldVal.reportDates.fromDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) $ctrl.config.reportData = null;\n\n        newDate = newVal.reportDates.toDate; oldDate = oldVal.reportDates.toDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) $ctrl.config.reportData = null;\n\n        $ctrl.reportBuilder.buildPdf(reportDataCallback).then(blob => { $ctrl.pdf = blob; });\n      }, 100);\n    }, true);\n\n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = () => {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.pdf, fileName: $ctrl.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n    * Generate and download CSV report\n    */\n    $ctrl.downloadCsv = () => {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.reportBuilder.buildCsv(reportDataCallback), fileName: $ctrl.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.reportColumns,\n        rows: [],\n        styles: [],\n      };\n\n      // Totals\n      const totalsKeys = ['reservationCost', 'reservationCreditApplied', 'reservationCostBalance'];\n      const totals = config.reportData\n        .reduce((result, item) => (totalsKeys.forEach(key => { result[key] += item[key] || 0; }), result), totalsKeys.reduce((result, key) => (result[key] = 0, result), {}));\n\n      totals.memberCompany = $translate.instant('REPORTS.TOTALS').toUpperCase() + ':';\n      const totalRow = result.columns.map(col => angular.isNumber(totals[col.dataKey]) ? helper.round(totals[col.dataKey]) : totals[col.dataKey] || false);\n      result.rows.push(totalRow);\n      result.styles.push(reportStyles.h2);\n\n      // Items\n      const items = reportHelper.sort(config.reportData, config.orderBy);\n\n      items.forEach((item, idx) => {\n        result.rows.push(result.columns.map(col => angular.isNumber(item[col.dataKey]) ? helper.round(item[col.dataKey]) : item[col.dataKey]));\n        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n      });\n\n      if (config.reportData.length) {\n        result.rows.push(angular.extend({}, totalRow));\n        result.styles.push(reportStyles.h2);\n      }\n\n      return result;\n    }\n  });\n","/**\n * ReservationUsageReport service\n */\nexport default angular.module('deskworks.ReservationUsageReport', [\n  'ngResource',\n  'deskworks.config',\n  'deserializeNumbers',\n])\n\n  .factory('ReservationUsageReport', function($resource, deskworksConfig, deserializeNumbers) {\n    const url = deskworksConfig.getApiAbsUrl('/reservation-usage-report');\n    const desNumbers = deserializeNumbers(['reservationHours', 'reservationCost', 'reservationCreditApplied', 'reservationCostBalance']);\n\n    const res = $resource(url, { centerId: '@centerId', fromDate: '@fromDate', toDate: '@toDate' }, {\n      query: { method: 'GET', isArray: true, transformResponse: [angular.fromJson, desNumbers] },\n    });\n\n    return {\n      query: params => res.query(params).$promise,\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"reservationUsageReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formReservationUsageReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\" style=\\\"margin-bottom:-15px\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-dates model=\\\"$ctrl.config.reportDates\\\"></report-dates> </div> </div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-options model=\\\"$ctrl.config.reportOptions\\\"> <report-order-by model=\\\"$ctrl.config.orderBy\\\" report-columns=\\\"$ctrl.config.reportColumns\\\"></report-order-by> </report-options> <report-owner-region model=\\\"$ctrl.config.reportOwnerRegion\\\" report-data=\\\"$ctrl.config.reportData\\\"></report-owner-region> </div> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","import optsReportByPeriod from 'shared/reports/directives/report-by-period/opts-report-by-period.service';\n\nexport default angular.module('deskworks.reservationUtilizationActualExpectedAggregate', [\n  optsReportByPeriod.name,\n])\n\n/**\n * Aggregate reservation utilization report data by reservation categories\n */\n  .factory('reservationUtilizationActualExpectedAggregate', (helper) =>\n    (data, categories) => {\n\n      const allUnits = data.map(u => {\n        const actualUse = u.groups.reduce((sum, g) => sum + g.daily.reduce((sum, d) => sum + d.usage, 0), 0) || 0;\n        const { unitName, expectedUse = 0, categoryId } = u;\n        return {\n          name: unitName,\n          categoryId,\n          expectedUse,\n          actualUse,\n          utilization: expectedUse ? actualUse * 100 / expectedUse : 0,\n        };\n      });\n\n      return categories\n        .map(cat => {\n          const units = allUnits.filter(u => u.categoryId === cat.id);\n          const expectedUse = units.reduce((sum, u) => sum + u.expectedUse, 0);\n          const actualUse = units.reduce((sum, u) => sum + u.actualUse, 0);\n          return {\n            name: cat.name,\n            expectedUse,\n            actualUse,\n            utilization: expectedUse ? helper.round(actualUse * 100 / expectedUse) : 0,\n            units,\n          };\n        })\n        .filter(cat => cat.units && cat.units.length);\n    });\n","\n/**\n * Pie chart for Reservation Utilization Report\n */\nexport default angular.module('deskworks.reports.reservationUtilizationActualExpectedChart', [])\n\n  .factory('reservationUtilizationActualExpectedChart', function($translate, $filter, helper, whitelabel) {\n\n    return (data) => {\n      const units = data.reduce((arr, cat) => arr.concat(cat.units), []);\n\n      const expectedLabel = $translate.instant('RESERVATION_UTILIZATION_REPORT.COLUMNS.EXPECTED_USAGE');\n      const actualLabel = $translate.instant('RESERVATION_UTILIZATION_REPORT.COLUMNS.ACTUAL_USAGE');\n      const utilizationLabel = $translate.instant('RESERVATION_UTILIZATION_REPORT.COLUMNS.UTILIZATION');\n\n      const chart = {\n        type: 'horizontalBar',\n        data: {\n          labels: units.map(item => item.name || '-'),\n          datasets: [\n            {\n              data: units.map(u => u.utilization),\n              backgroundColor: whitelabel.getProperty('--brand-color'),\n              maxBarThickness: 30,\n            },\n          ],\n        },\n        options: {\n          tooltips: {\n            callbacks: {\n              label: (tooltipItem, data) => {\n                const unit = units[tooltipItem.index];\n                const expectedUse = $filter('hours')($filter('round')(unit.expectedUse, 1));\n                const actualUse = $filter('hours')($filter('round')(unit.actualUse, 1));\n                const utilization = $filter('round')(unit.utilization, 1);\n                return [\n                  `${expectedLabel}: ${expectedUse}`,\n                  `${actualLabel}: ${actualUse}`,\n                  `${utilizationLabel}: ${utilization}%`,\n                ];\n              }\n            },\n          },\n          legend: { display: false },\n          scales: {\n            xAxes: [{\n              min: 100, max: 100,\n              ticks: { suggestedMin: 0, suggestedMax: 100, callback: v => v + '%' },\n            }],\n          },\n        },\n      };\n\n      return chart;\n    }\n  });\n","/**\n * Columns for Reservation Utilization Report\n */\nexport default angular.module('deskworks.reservationUtilizationActualExpectedColumns', [])\n\n  .factory('reservationUtilizationActualExpectedColumns', function($rootScope, $translate, helper) {\n\n    const cols = [\n      {\n        dataKey: 'name', _title: 'RESERVATION_UNITS.UNIT',\n      },\n      {\n        dataKey: 'expectedUse', _title: 'RESERVATION_UTILIZATION_REPORT.COLUMNS.EXPECTED_USAGE', styles: { halign: 'right' },\n        ...round(1),\n      },\n      {\n        dataKey: 'actualUse', _title: 'RESERVATION_UTILIZATION_REPORT.COLUMNS.ACTUAL_USAGE', styles: { halign: 'right' },\n        ...round(1),\n      },\n      {\n        dataKey: 'utilization', _title: 'RESERVATION_UTILIZATION_REPORT.COLUMNS.UTILIZATION', styles: { halign: 'right' },\n        pdf: v => helper.round(v, 1) + '%', csv: v => helper.round(v, 1) + '%',\n      },\n    ];\n\n\n    function round(digits) {\n      return {\n        pdf: v => helper.round(v, digits), csv: v => helper.round(v, digits),\n      };\n    }\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import reportStyles from 'shared/reports/services/report-styles.service';\nimport reservationUtilizationActualExpectedColumns from './reservation-utilization-actual-expected-columns.service'\n\n/**\n * Data to report converter for Actual / Expected mode of Reservation Utilization Report\n */\nexport default angular.module('deskworks.reports.reservationUtilizationActualExpectedReport', [\n  reportStyles.name,\n  reservationUtilizationActualExpectedColumns.name,\n])\n\n  .factory('reservationUtilizationActualExpectedReport', function($filter, $translate, helper, reportStyles,\n                                                                  reservationUtilizationActualExpectedColumns) {\n\n    return dataToReport;\n\n    /**\n     *\n     * @param params\n     * @param data - aggregated via reservationUtilizationActualExpectedAggregate\n     * @returns {{columns: Array, styles: Array, rows: Array}}\n     */\n    function dataToReport(params, data) {\n      const report = {\n        columns: reservationUtilizationActualExpectedColumns,\n        rows: [],\n        styles: [],\n      };\n\n      const expectedUse = data.reduce((sum, cat) => sum + cat.expectedUse, 0);\n      const actualUse = data.reduce((sum, cat) => sum + cat.actualUse, 0);\n\n      report.rows.push([\n        $translate.instant('REPORTS.TOTALS').toUpperCase(),\n        expectedUse,\n        actualUse,\n        expectedUse ? actualUse * 100 / expectedUse : 0,\n      ]);\n      report.styles.push(reportStyles.h1);\n\n      data.forEach(category => {\n        report.rows.push(report.columns.map(col => category[col.dataKey]));\n        report.styles.push(reportStyles.h2);\n\n        category.units.forEach((unit, idx) => {\n          report.rows.push(report.columns.map(col => unit[col.dataKey]));\n          report.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        });\n      });\n\n      return report;\n    }\n\n  });\n","import optsReportByPeriod from 'shared/reports/directives/report-by-period/opts-report-by-period.service';\n\nexport default angular.module('deskworks.reservationUtilizationDetailedActualAggregate', [\n  optsReportByPeriod.name,\n])\n\n/**\n * Aggregate reservation utilization report data by time periods, calculate totals\n */\n  .factory('reservationUtilizationDetailedActualAggregate', (reservationUtilizationReportCreateGrid, helper) =>\n    (params, data) => {\n\n      const result = {\n        periods: reservationUtilizationReportCreateGrid(params.fromDate, params.toDate, params.byPeriod),\n      };\n\n      result.units = data.map(unit => {\n        const newUnit = { name: unit.unitName, totals: Array(result.periods.length).fill(0), total: 0 };\n\n        newUnit.groups = unit.groups.map(group => ({\n          name: group.name,\n          totals: group.daily.reduce((totals, day) => {\n            result.periods.some((col, idx) => {\n              if (day.date.isSameOrAfter(col.fromDate) && day.date.isSameOrBefore(col.toDate)) {\n                const val = angular.isNumber(day.usage) ? day.usage : 0;\n                totals[idx] += val;\n                totals[idx] = helper.round(totals[idx]);\n                newUnit.totals[idx] += val;\n                newUnit.totals[idx] = helper.round(newUnit.totals[idx]);\n                return true;\n              }\n            });\n            return totals;\n          }, Array(result.periods.length).fill(0)),\n        }));\n\n        newUnit.groups.forEach(g => {\n          g.total = g.totals.reduce((r, t) => r + t, 0);\n          newUnit.total += g.total;\n          g.total = helper.round(g.total);\n        });\n\n        newUnit.total = helper.round(newUnit.total);\n\n        return newUnit;\n      });\n\n      return result;\n    })\n\n  /**\n   * Create calendar grid for selected period, return [{ fromDate, toDate, title }]\n   */\n  .factory('reservationUtilizationReportCreateGrid', ($filter, optsReportByPeriod) => (fromDate, toDate, period) => {\n    const cols = [];\n    const periodConfig = optsReportByPeriod.find(opt => opt.id === period);\n\n    const date = fromDate.clone().startOf(period);\n    do {\n      const col = { fromDate: date.clone() };\n      date.add(1, period + 's'); // weeks/months/quarters/years\n      col.toDate = date.clone().subtract(1, 'ms'); // end of previous day\n      col.title = periodConfig.format(col.fromDate, col.toDate);\n      cols.push(col);\n    } while (date.isSameOrBefore(toDate));\n\n    return cols;\n  });\n","/**\n * Pie chart for Reservation Utilization Report\n */\nexport default angular.module('deskworks.reports.reservationUtilizationDetailedActualChart', [])\n\n  .factory('reservationUtilizationDetailedActualChart', function($translate, $filter, helper) {\n\n    return (data) => {\n      const totalTime = helper.round(data.units.reduce((acc, unit) => acc + unit.total, 0));\n\n      const chart = {\n        type: 'pie',\n        data: {\n          labels: data.units.map(u => u.name),\n          datasets: [\n            {\n              data: data.units.map(u => u.total),\n            }\n          ],\n        },\n        options: {\n          tooltips: {\n            callbacks: {\n              label: (tooltipItem, data) => {\n                const label = data.labels[tooltipItem.index];\n                const hours = data.datasets[0].data[tooltipItem.index];\n                const percents = helper.round(hours / totalTime * 100, 1);\n                return `${label}: ${$filter('hours')(hours)} (${percents}%)`;\n              }\n            },\n          },\n          legend: {\n            display: true,\n            position: 'right',\n          },\n          title: {\n            display: true,\n            text: $translate.instant('RESERVATION_UTILIZATION_REPORT.CHART.TOTAL_TIME').toUpperCase() + ': ' + $filter('hours')(totalTime),\n          },\n        },\n      };\n\n      return chart;\n    }\n  });\n","/**\n * Columns for Reservation Utilization Report\n */\nexport default angular.module('deskworks.reservationUtilizationDetailedActualColumns', [])\n\n  .factory('reservationUtilizationDetailedActualColumns', function($rootScope, $translate) {\n    const cols = [\n      {\n        dataKey: 'name', _title: 'RESERVATION_UNITS.UNIT',\n      },\n      {\n        dataKey: '[period]', _title: '', styles: { halign: 'center' },\n      },\n      {\n        dataKey: 'totals', _title: 'REPORTS.TOTALS', styles: { halign: 'center' },\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import reportStyles from 'shared/reports/services/report-styles.service';\nimport reservationUtilizationDetailedActualColumns from './reservation-utilization-detailed-actual-aggregate.service';\n\n/**\n * Data to report converter for Detailed Actual mode of Reservation Utilization Report\n */\nexport default angular.module('deskworks.reports.reservationUtilizationDetailedActualReport', [\n  reportStyles.name,\n  reservationUtilizationDetailedActualColumns.name,\n])\n\n  .factory('reservationUtilizationDetailedActualReport', function($filter, helper, reportStyles, reservationUtilizationDetailedActualColumns) {\n\n    return dataToReport;\n\n    /**\n     *\n     * @param params\n     * @param data - aggregated via reservationUtilizationDetailedActualAggregate\n     * @returns {{columns: Array, styles: Array, rows: Array}}\n     */\n    function dataToReport(params, data) {\n      const columns = reservationUtilizationDetailedActualColumns;\n\n      const report = {\n        columns: [],\n        rows: [],\n        styles: [],\n      };\n\n      const perIdx = columns.findIndex(col => col.dataKey === '[period]');\n\n      if (perIdx < 0) throw new Error('[period] is not found in report columns');\n\n      report.columns = data.periods.map(per => angular.extend({}, columns[perIdx], { dataKey: $filter('date')(per.fromDate, 'yyyyMMdd'), title: per.title }));\n\n      report.columns = columns.slice(0, perIdx) // before [period]\n        .concat(report.columns)\n        .concat(columns.slice(perIdx + 1)); // after [period]\n\n      data.units.forEach(unit => {\n        report.rows.push([unit.name].concat(unit.totals).concat(unit.total));\n        report.styles.push(reportStyles.h2);\n\n        unit.groups.forEach((group, idx) => {\n          report.rows.push([group.name].concat(group.totals).concat(group.total));\n          report.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        });\n      });\n\n      return report;\n    }\n\n  });\n","import reportHelper from 'shared/reports/services/report-helper.service';\nimport pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport chartDirective from 'shared/charts/chart.directive';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\nimport reportByPeriodDirective from 'shared/reports/directives/report-by-period/report-by-period.directive';\nimport reservationUtilizationDetailedActualAggregate from './reservation-utilization-detailed-actual-aggregate.service';\nimport reservationUtilizationDetailedActualReport from './reservation-utilization-detailed-actual-report.service';\nimport reservationUtilizationActualExpectedAggregate from './reservation-utilization-actual-expected-aggregate.service';\nimport reservationUtilizationActualExpectedReport from './reservation-utilization-actual-expected-report.service';\nimport reservationUtilizationActualExpectedChart from './reservation-utilization-actual-expected-chart.service';\nimport reservationUtilizationDetailedActualChart from './reservation-utilization-detailed-actual-chart.service';\n\nexport default angular.module('deskworks.ReservationUtilizationReportCtrl', [\n  pdfPreview.name,\n  chartDirective.name,\n  'fileSaver',\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  reportByPeriodDirective.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportDates',\n  'deskworks.ReservationUtilizationReport',\n  'deskworks.reservationCategory.service',\n  reservationUtilizationDetailedActualAggregate.name,\n  reservationUtilizationDetailedActualReport.name,\n  reservationUtilizationActualExpectedReport.name,\n  reservationUtilizationActualExpectedAggregate.name,\n  reservationUtilizationActualExpectedChart.name,\n  reservationUtilizationDetailedActualChart.name,\n])\n\n  .controller('ReservationUtilizationReportCtrl', function($scope, $q, $location, $timeout, $translate, $filter, helper, dwAlerts,\n                                                           debounce, state, fileSaver, reportStyles, ReportBuilder, reportHelper,\n                                                           ReservationUtilizationReport,\n                                                           reservationUtilizationDetailedActualAggregate, reservationUtilizationDetailedActualReport,\n                                                           reservationUtilizationDetailedActualChart, reservationCategoryService,\n                                                           reservationUtilizationActualExpectedReport, reservationUtilizationActualExpectedAggregate,\n                                                           reservationUtilizationActualExpectedChart) {\n\n    const $ctrl = this;\n\n    const { paramsChanged, loadResources } = reportHelper;\n\n    $ctrl.config = {\n      reportName: $translate.instant('RESERVATION_UTILIZATION_REPORT.REPORT_NAME'),\n    };\n    $ctrl.params = {\n      fromDate: state.getParam('fromDate') ? $filter('toDate')(state.getParam('fromDate')) : moment().subtract(1, 'month').startOf('month'),\n      toDate: state.getParam('toDate') ? $filter('toDate')(state.getParam('toDate')) : moment().subtract(1, 'month').endOf('month'),\n      mode: state.getParam('mode') || 'detailedActual',\n    };\n    $ctrl.resources = null;\n    $ctrl.data = null;\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    /**\n     * Watch report params and generate new report\n     */\n    $scope.$watch('$ctrl.params', debounce((np, op) => {\n      state.setParam('mode', $ctrl.params.mode);\n\n      $ctrl.pdf = null;\n      $ctrl.report = null;\n\n      if (helper.pointFirstInvalid('#reservationUtilizationReport')) return;\n      if (!$ctrl.params.fromDate || !$ctrl.params.toDate) return;\n\n      if (paramsChanged(np, op, ['fromDate', 'toDate', 'centerId'])) $ctrl.data = null;\n\n      $q.all({\n        resources: $ctrl.resources || loadResources(() => ({ categories: reservationCategoryService.query(state.getCurrentCenterId())\n            .catch(err => dwAlerts.error(err, 'Failed to query reservation categories.')) })),\n        data: $ctrl.data || ReservationUtilizationReport.query($ctrl.params).catch(err => dwAlerts.error(err, 'Failed to query report.')),\n      })\n        .then(result => {\n          $ctrl.resources = result.resources;\n          $ctrl.data = result.data;\n        })\n        .then(() => {\n          if ($ctrl.params.mode === 'actualExpected') {\n            const data = reservationUtilizationActualExpectedAggregate($ctrl.data, $ctrl.resources.categories);\n            $ctrl.report = reservationUtilizationActualExpectedReport($ctrl.params, data);\n            $ctrl.chart = reservationUtilizationActualExpectedChart(data);\n          } else {\n            const data = reservationUtilizationDetailedActualAggregate($ctrl.params, $ctrl.data);\n            $ctrl.report = reservationUtilizationDetailedActualReport($ctrl.params, data);\n            $ctrl.chart = reservationUtilizationDetailedActualChart(data);\n          }\n\n          const doc = reportHelper.buildPdf({ config: { ...$ctrl.config, ...$ctrl.params }, report: $ctrl.report, resources: $ctrl.resources });\n          $ctrl.pdf = doc.output('blob');\n\n        });\n\n    }, 100), true);\n\n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = () => {\n      if (!$ctrl.pdf) return;\n      const fileName = reportHelper.getReportFileName({ extension: 'pdf', config: { ...$ctrl.config, ...$ctrl.params }, resources: $ctrl.resources });\n      reportHelper.download({ blob: $ctrl.pdf, fileName });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    $ctrl.downloadCsv = () => {\n      if (!$ctrl.pdf) return;\n      const fileName = reportHelper.getReportFileName({ extension: 'csv', config: { ...$ctrl.config, ...$ctrl.params }, resources: $ctrl.resources });\n      const csv = reportHelper.buildCsv({ report: $ctrl.report });\n      reportHelper.download({ blob: csv, fileName });\n    };\n\n  });\n","/**\n * ReservationUtilizationReport service\n */\nexport default angular.module('deskworks.ReservationUtilizationReport', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config',\n])\n\n  .factory('ReservationUtilizationReport', function($resource, $filter, datesDeserializer, deskworksConfig) {\n    const desDates = datesDeserializer(['groups.daily.date']);\n    const url = deskworksConfig.getApiAbsUrl('/reservation-utilization-report');\n\n    const res = $resource(url, { centerId: '@centerId', fromDate: '@fromDate', toDate: '@toDate' }, {\n      query: { method: 'GET', isArray: true, transformResponse: [angular.fromJson, desDates] }\n    });\n\n    return {\n      query: params => res.query({\n        centerId: params.centerId || null,\n        fromDate: $filter('date')(params.fromDate, 'yyyy-MM-dd'),\n        toDate: $filter('date')(params.toDate, 'yyyy-MM-dd'),\n      }).$promise,\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"reservationUtilizationReport\\\" class=\\\"gutter-v\\\"> <form> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <report-dates model=\\\"$ctrl.params\\\"></report-dates> </div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-options model=\\\"$ctrl.params\\\" all-centers=\\\"false\\\"> <ff-row> <ff-label flex=\\\"0 0 100px\\\"><span translate=\\\"RESERVATION_UTILIZATION_REPORT.MODE\\\"></span></ff-label> <ff-static> <div class=\\\"ff-grid gutter-h-half\\\"> <label flex=\\\"0 0 auto\\\"> <ff-radio ff-model=\\\"$ctrl.params.mode\\\" ff-value=\\\"'detailedActual'\\\"> <span translate=\\\"RESERVATION_UTILIZATION_REPORT.MODE.DETAILED_ACTUAL\\\"></span> </ff-radio> </label> <label flex=\\\"0 0 auto\\\"> <ff-radio ff-model=\\\"$ctrl.params.mode\\\" ff-value=\\\"'actualExpected'\\\"> <span translate=\\\"RESERVATION_UTILIZATION_REPORT.MODE.ACTUAL_EXPECTED\\\"></span> </ff-radio> </label> </div> </ff-static> </ff-row> <report-by-period model=\\\"$ctrl.params.byPeriod\\\" ng-if=\\\"$ctrl.params.mode === 'detailedActual'\\\"></report-by-period> </report-options> </div> </div> <ff-panel flex=\\\"auto\\\"> <ff-panel-header><span translate=\\\"RESERVATION_UTILIZATION_REPORT.CHART.HEADER\\\"></span></ff-panel-header> <div ff-dim=\\\"!$ctrl.pdf\\\" ng-init=\\\"$ctl = $ctrl\\\"> <chart config=\\\"$ctrl.chart\\\" ng-style=\\\"{ 'max-height': ($ctl.chart && $ctl.chart.type !== 'pie' ? 'none' : null), 'height': ($ctl.chart && $ctl.chart.type !== 'pie' ? $ctl.chart.data.labels.length * 30 + 40 + 'px' : null) }\\\"></chart> </div> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </div> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","\n/**\n * Chart for Revenue Forecast Report\n */\nexport default angular.module('deskworks.reports.revenueForecastChart', [])\n\n  .factory('revenueForecastChart', function($translate, $filter, helper, whitelabel) {\n\n    return (data) => {\n      const labels = data[0].totals.map(total => $filter('date')($filter('toDate')(total.month + '-01'), 'MMM yyyy'));\n      const committed = data[0].totals.map((total, idx) => data.reduce((amount, user) => amount + user.totals[idx].committedAmount, 0));\n      const atRisk = data[0].totals.map((total, idx) => data.reduce((amount, user) => amount + user.totals[idx].riskAmount, 0));\n\n      const chart = {\n        type: 'bar',\n        data: {\n          labels,\n          datasets: [\n            {\n              name: $translate.instant('REVENUE_FORECAST_REPORT.COMMITTED_REVENUE'),\n              data: committed,\n              backgroundColor: whitelabel.getProperty('--brand-color'),\n              maxBarThickness: 50,\n            },\n            {\n              name: $translate.instant('REVENUE_FORECAST_REPORT.AT_RISK_REVENUE'),\n              data: atRisk,\n              backgroundColor: whitelabel.getProperty('--danger-color'),\n              maxBarThickness: 50,\n            },\n          ],\n        },\n        options: {\n          tooltips: {\n            mode: 'index',\n            intersect: true,\n            displayColors: true,\n            callbacks: {\n              label: (tooltipItem, data) => {\n                const dataset = data.datasets[tooltipItem.datasetIndex];\n                return dataset.name + ': ' + $filter('ncurrency')(dataset.data[tooltipItem.index]);\n              }\n            },\n          },\n          legend: { display: false },\n          scales: {\n            xAxes: [{ stacked: true }],\n            yAxes: [{\n              stacked: true,\n              ticks: {\n                min: 0,\n                callback: value => $filter('ncurrency')(value, undefined, 0),\n              },\n            }],\n          },\n        },\n      };\n\n      return chart;\n    }\n  });\n","import reportStyles from 'shared/reports/services/report-styles.service';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport revenueForecastReportColumns from './revenue-forecast-report-columns.service'\n\n/**\n * Data to report converter for Revenue Forecast Report\n */\nexport default angular.module('deskworks.reports.revenueForecastData', [\n  reportStyles.name,\n  reportHelper.name,\n  revenueForecastReportColumns.name,\n])\n\n  .factory('revenueForecastData', function($filter, $translate, helper, reportStyles, reportHelper, revenueForecastReportColumns) {\n\n    return dataToReport;\n\n    /**\n     *\n     * @param params\n     * @param data - aggregated via reservationUtilizationActualExpectedAggregate\n     * @returns {{columns: Array, styles: Array, rows: Array}}\n     */\n    function dataToReport(params, data) {\n      const report = {\n        columns: revenueForecastReportColumns.slice(),\n        rows: [],\n        styles: [],\n      };\n\n      if (!data || !data.length) return report;\n\n      const committed = data[0].totals.map((total, idx) => {\n        const title = idx ? $filter('date')($filter('toDate')(total.month + '-01'), 'MMM\\nyyyy') :\n          $translate.instant('REVENUE_FORECAST_REPORT.COLUMNS.CURRENT_MONTH');\n        report.columns.push({ dataKey: total.month, title: title, styles: { halign: 'right', cellWidth: 'wrap' } }); // add column for month\n\n        return data.reduce((amount, user) => amount + user.totals[idx].committedAmount, 0);\n      });\n\n      const risk = data[0].totals.map((total, idx) => {\n        return data.reduce((amount, user) => amount + user.totals[idx].riskAmount, 0);\n      });\n\n      let title = $translate.instant('REVENUE_FORECAST_REPORT.COMMITTED_REVENUE');\n      report.styles.push(reportStyles.h3);\n      report.rows.push([false, title].concat(committed.map(amount => $filter('ncurrency')(amount))));\n\n      title = $translate.instant('REVENUE_FORECAST_REPORT.AT_RISK_REVENUE');\n      report.styles.push(reportStyles.h3);\n      report.rows.push([false, title].concat( risk.map(amount => $filter('ncurrency')(amount)) ));\n\n      title = $translate.instant('REVENUE_FORECAST_REPORT.PERCENT_OF_CURRENT_MONTH');\n      report.styles.push(reportStyles.h3);\n      report.rows.push([false, title].concat(committed.map(amount => $filter('number')(amount / committed[0] * 100, 2) + '%')));\n\n      reportHelper.sort(data, params.orderBy).forEach((item, idx) => {\n        report.styles.push(idx % 2 ? null : reportStyles.rowOdd);\n        report.rows.push([item.userCompany, item.userName].concat(item.totals.map(total => $filter('ncurrency')(total.committedAmount))));\n      });\n\n      return report;\n    }\n\n  });\n","/**\n * Columns for Revenue Forecast Report\n */\nexport default angular.module('deskworks.revenueForecastReportColumns', [])\n  .factory('revenueForecastReportColumns', function($rootScope, $translate) {\n    const cols = [\n      {\n        dataKey: 'userCompany', _title: 'REVENUE_FORECAST_REPORT.COLUMNS.COMPANY', include: true,\n      },\n      {\n        dataKey: 'userName', _title: 'REVENUE_FORECAST_REPORT.COLUMNS.NAME', include: true, defaultOrder: true,\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import reportHelper from 'shared/reports/services/report-helper.service';\nimport pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport chartDirective from 'shared/charts/chart.directive';\nimport systemColors from 'shared/charts/system-colors.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\nimport revenueForecastData from './revenue-forecast-data.service';\nimport revenueForecastChart from './revenue-forecast-chart.service';\n\nexport default angular.module('deskworks.RevenueForecastReportCtrl', [\n  'debounce',\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reportOrderBy',\n  'deskworks.RevenueForecastReport',\n  'deskworks.revenueForecastReportColumns',\n  pdfPreview.name,\n  chartDirective.name,\n  systemColors.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  revenueForecastData.name,\n  revenueForecastChart.name,\n])\n\n  .controller('RevenueForecastReportCtrl', function($scope, $timeout, $filter, $translate, $q, systemColors,\n                                                    debounce, state, helper, reportStyles, reportHelper, dwAlerts,\n                                                    RevenueForecastReport, revenueForecastReportColumns,\n                                                    revenueForecastData, revenueForecastChart) {\n    const $ctrl = this;\n\n    const { paramsChanged, loadResources } = reportHelper;\n\n    $ctrl.config = {\n      reportName: $translate.instant('REVENUE_FORECAST_REPORT.REPORT_NAME'),\n    };\n    $ctrl.params = {\n      monthCount: state.getParam('monthCount') ? +state.getParam('monthCount') : 6,\n      orderBy: state.getParam('orderBy') || 'userName',\n    };\n    $ctrl.resources = null;\n    $ctrl.data = null;\n    $ctrl.columns = revenueForecastReportColumns;\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    $ctrl.optsMonthCount = [...Array(13).keys()].slice(1).map(idx => ({ id: idx, name: $filter('months')(idx) }));\n\n    /**\n     * Watch report params and generate new report\n     */\n    $scope.$watch('$ctrl.params', debounce((np, op) => {\n      state.setParam('monthCount', $ctrl.params.monthCount);\n\n      $ctrl.pdf = null;\n      $ctrl.report = null;\n\n      if (helper.pointFirstInvalid('#revenueForecastReport')) return;\n\n      if (paramsChanged(np, op, ['monthCount', 'centerId'])) $ctrl.data = null;\n\n      $q.all({\n        resources: $ctrl.resources || loadResources(),\n        data: $ctrl.data || RevenueForecastReport.query($ctrl.params).catch(err => dwAlerts.error(err, 'Failed to query report.')),\n      })\n        .then(result => {\n          $ctrl.resources = result.resources;\n          $ctrl.data = result.data;\n        })\n        .then(() => {\n          $ctrl.report = revenueForecastData($ctrl.params, $ctrl.data);\n          const doc = reportHelper.buildPdf({ config: { ...$ctrl.config, ...$ctrl.params }, report: $ctrl.report, resources: $ctrl.resources });\n          $ctrl.pdf = doc.output('blob');\n          $ctrl.chart = revenueForecastChart($ctrl.data);\n        });\n\n    }, 100), true);\n\n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = () => {\n      if (!$ctrl.pdf) return;\n      const fileName = reportHelper.getReportFileName({ extension: 'pdf', config: { ...$ctrl.config, ...$ctrl.params }, resources: $ctrl.resources });\n      reportHelper.download({ blob: $ctrl.pdf, fileName });\n    };\n\n    /**\n     * Generate and download CSV report\n     */\n    $ctrl.downloadCsv = () => {\n      if (!$ctrl.pdf) return;\n      const fileName = reportHelper.getReportFileName({ extension: 'csv', config: { ...$ctrl.config, ...$ctrl.params }, resources: $ctrl.resources });\n      const csv = reportHelper.buildCsv({ report: $ctrl.report });\n      reportHelper.download({ blob: csv, fileName });\n    };\n  });\n","/**\n * RevenueForecastReport service\n */\nexport default angular.module('deskworks.RevenueForecastReport', [\n  'ngResource',\n  'deskworks.config',\n])\n  .factory('RevenueForecastReport', function($resource, $timeout, deskworksConfig) {\n    const url = deskworksConfig.getApiAbsUrl('/reports/revenue-forecast');\n\n    const res = $resource(url, {}, {\n      query: { method: 'GET', isArray: true },\n    });\n\n    return {\n      query: params => res.query({ centerId: params.centerId, monthCount: params.monthCount }).$promise,\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"revenueForecastReport\\\" class=\\\"gutter-v\\\"> <form> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <ff-panel flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"> <ff-panel-header><span translate=\\\"REVENUE_FORECAST_REPORT.BAR_CHART.HEADER\\\"></span></ff-panel-header> <div ff-dim=\\\"!$ctrl.pdf\\\"> <chart config=\\\"$ctrl.chart\\\" style=\\\"max-height:228px\\\"></chart> </div> </ff-panel> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <report-options model=\\\"$ctrl.params\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><span translate=\\\"REVENUE_FORECAST_REPORT.PERIOD\\\"></span></ff-label> <ff-select ff-model=\\\"$ctrl.params.monthCount\\\" ff-required=\\\"true\\\" ff-options=\\\"opt.id as opt.name for opt in $ctrl.optsMonthCount\\\" ff-validate-alert=\\\"{{'REVENUE_FORECAST_REPORT.PERIOD' | translate}}\\\"></ff-select> </label> <report-order-by model=\\\"$ctrl.params.orderBy\\\" report-columns=\\\"$ctrl.columns\\\"></report-order-by> </report-options> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Columns for Security Deposit Report\n */\nexport default angular.module('deskworks.reports.securityDepositReportColumns', [])\n  .factory('securityDepositReportColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'userName', _title: 'SECURITY_DEPOSIT_REPORT.COLUMNS.USER_NAME', include: true,\n        styles: { minCellWidth: 120 },\n      },\n      {\n        dataKey: 'userCompany', _title: 'SECURITY_DEPOSIT_REPORT.COLUMNS.COMPANY', include: true,\n        styles: { minCellWidth: 150 },\n      },\n      {\n        dataKey: 'orderId', _title: 'SECURITY_DEPOSIT_REPORT.COLUMNS.ORDER_ID', include: false,\n        styles: { halign: 'right' },\n      },\n      {\n        dataKey: 'date', _title: 'SECURITY_DEPOSIT_REPORT.COLUMNS.DATE', include: false,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'amount', _title: 'SECURITY_DEPOSIT_REPORT.COLUMNS.AMOUNT', include: false,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'balance', _title: 'SECURITY_DEPOSIT_REPORT.COLUMNS.BALANCE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import pdfPreview from 'shared/reports/directives/pdf-preview.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\nimport reportStyles from 'shared/reports/services/report-styles.service';\nimport reportOptions from 'shared/reports/directives/report-options.directive';\n\nexport default angular.module('deskworks.reports.securityDepositReport', [\n  pdfPreview.name,\n  reportHelper.name,\n  reportStyles.name,\n  reportOptions.name,\n  'deskworks.state',\n  'deskworks.reports.ReportBuilder',\n  'deskworks.reports.reportDates',\n  'deskworks.reports.reportOwnerRegion',\n  'deskworks.reports.securityDepositReport.service',\n  'deskworks.reports.securityDepositReportColumns'\n])\n  .controller('SecurityDepositReportCtrl', function($scope, $timeout, $filter, $translate, $location, state, helper,\n                                                    reportHelper, reportStyles, ReportBuilder, SecurityDepositReport,\n                                                    securityDepositReportColumns) {\n    const $ctrl = this;\n\n    $ctrl.config = {\n      reportName: $translate.instant('SECURITY_DEPOSIT_REPORT.REPORT_NAME'),\n      reportOptions: {},\n      reportOwnerRegion: {},\n      reportColumns: securityDepositReportColumns,\n      toDate: moment(),\n      showDetails: false,\n      getReportData: function() {\n        return SecurityDepositReport.get({\n          centerId: $ctrl.config.reportOptions.centerId,\n          ownerId: $ctrl.config.reportOwnerRegion.ownerId,\n          regionId: $ctrl.config.reportOwnerRegion.regionId,\n          toDate: $filter('date')($ctrl.config.toDate, 'yyyy-MM-dd'),\n        }).$promise;\n      },\n    };\n\n    $ctrl.reportColumnsFiltered = $ctrl.config.reportColumns.filter(item => item.include);\n\n    state.setPageTitle($ctrl.config.reportName);\n\n    /**\n     * Map showDetails to URL search param\n     */\n    $scope.$watch(_ => $location.search().showDetails, val => { $ctrl.config.showDetails = val; });\n    $scope.$watch('$ctrl.config.showDetails', val => { $location.search('showDetails', val || null).replace(); });\n\n    watchToDate();\n\n    $ctrl.reportBuilder = new ReportBuilder($ctrl.config);\n    $ctrl.getToday = () => moment();\n\n    /**\n     * Watch for data report depends on (center, columns, order) and generate new report, watch for 'toDate' url param\n     */\n    let debounceTimeout;\n    $scope.$watch(function() {\n        return {\n          reportOptions: $ctrl.config.reportOptions,\n          reportOwnerRegion: $ctrl.config.reportOwnerRegion,\n          toDate: $ctrl.config.toDate,\n          orderBy: $ctrl.config.orderBy,\n          showDetails: $ctrl.config.showDetails,\n        };\n      }, function(newVal, oldVal) {\n      if (debounceTimeout) {\n        $timeout.cancel(debounceTimeout);\n        debounceTimeout = null;\n      }\n      debounceTimeout = $timeout(_ => {\n        if (moment.isMoment(newVal.toDate) && newVal.toDate.isAfter(moment(), 'day')) return;\n\n        $ctrl.pdf = null;\n        if (angular.isUndefined($ctrl.config.reportOptions.centerId)) return;\n\n        let newDate = newVal.toDate, oldDate = oldVal.toDate;\n        if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) $ctrl.config.reportData = null;\n\n        $ctrl.reportBuilder.buildPdf(reportDataCallback).then(function(blob) { $ctrl.pdf = blob; });\n      }, 100);\n    }, true);\n    \n    /**\n     * Download generated PDF report\n     */\n    $ctrl.downloadPdf = function() {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.pdf, fileName: $ctrl.reportBuilder.getReportFileName('pdf') });\n    };\n\n    /**\n    * Generate and download CSV report\n    */\n    $ctrl.downloadCsv = function() {\n      if (!$ctrl.pdf) return;\n      reportHelper.download({ blob: $ctrl.reportBuilder.buildCsv(reportDataCallback), fileName: $ctrl.reportBuilder.getReportFileName('csv') });\n    };\n\n    /**\n     * Report data callback for ReportBuilder, returns report data matrix and columns\n     */\n    function reportDataCallback(config) {\n      const result = {\n        columns: config.showDetails ? config.reportColumns : $ctrl.reportColumnsFiltered,\n        rows: [],\n        styles: [],\n      };\n\n      const data = reportHelper.sort(config.reportData.deposits, config.orderBy);\n\n      let idx, arr = Array.apply(null, new Array(result.columns.length)).map(_ => false);\n\n      data.forEach((deposit, index) => {\n        result.styles.push(config.showDetails ? reportStyles.h2 : index % 2 ? null : reportStyles.rowOdd);\n        result.rows.push(result.columns.map(col => ['orderId', 'date', 'amount'].indexOf(col.dataKey) >= 0 ? false : deposit[col.dataKey]));\n\n        if (config.showDetails) {\n          deposit.details.forEach((detail, index) => {\n            result.styles.push(index % 2 ? null : reportStyles.rowOdd);\n            result.rows.push([false, false, detail.orderId, detail.date, detail.amount, false]);\n          });\n        }\n      });\n\n      result.rows.push(arr);\n      result.styles.push(null);\n\n      idx = result.columns.findIndex(c => c.dataKey === 'balance');\n      if (idx >= 0) {\n        result.rows.push(arr\n          .slice(0, Math.max(idx - 1, 0))\n          .concat(idx > 0 ? [{ content: $translate.instant('SECURITY_DEPOSIT_REPORT.TOTALS.TOTAL') + ':', styles: { halign: 'right' } }, config.reportData.total] : [config.reportData.total])\n          .concat(arr.slice(0, arr.length - idx - 1)));\n        result.styles.push(reportStyles.h3);\n      }\n\n      return result;\n    }\n\n    /**\n     * Map toDate to URL search param\n     */\n    function watchToDate() {\n      $scope.$watch(() => $location.search().toDate, val => {\n        const date = $filter('toDate')(val);\n        $ctrl.config.toDate = moment.isMoment(date) && !$ctrl.config.toDate.isSame(date) ? date : $ctrl.config.toDate;\n      });\n      $scope.$watch('$ctrl.config.toDate', val => {\n        if (!moment.isMoment(val)) return;\n        $location.search('toDate', $filter('date')(val, 'yyyy-MM-dd')).replace();\n      });\n    }\n  });\n","/**\n * SecurityDepositReport service\n */\nexport default angular.module('deskworks.reports.securityDepositReport.service', [\n  'ngResource',\n  'datesDeserializer',\n  'deserializeNumbers',\n  'deskworks.config'\n])\n\n  .factory('SecurityDepositReport', function($resource, datesDeserializer, deserializeNumbers, deskworksConfig) {\n    const desDates = datesDeserializer(['deposits.details.date']);\n    const numbersDeserializer = deserializeNumbers(['deposits.balance', 'deposits.details.amount']);\n\n    const url = deskworksConfig.getApiAbsUrl('/reports/security-deposit');\n\n    return $resource(url, { centerId: '@centerId' }, {\n      get: { method: 'GET', transformResponse: [angular.fromJson, desDates, numbersDeserializer] }\n    });\n  });\n","// Module\nvar code = \"<div id=\\\"securityDepositReport\\\" class=\\\"gutter-v\\\"> <form name=\\\"formSecurityDepositReport\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{lg: '0 0 61%', md: '0 0 50%'}\\\"></div> <div flex=\\\"{lg: '0 0 39%', md: '0 0 50%'}\\\"> <div class=\\\"gutter-v\\\"> <report-options model=\\\"$ctrl.config.reportOptions\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\" ff-required=\\\"true\\\"><span translate=\\\"REPORTS.PERIOD.TO_DATE\\\"></span></ff-label> <ff-date flex=\\\"0 0 124px\\\" name=\\\"toDate\\\" ff-model=\\\"$ctrl.config.toDate\\\" ff-date-order=\\\"{ early: $ctrl.config.toDate, late: $ctrl.getToday() }\\\" ff-validate-alert=\\\"{ field: 'Selected date', late: 'or equal to today' }\\\"></ff-date> <span class=\\\"ff-label\\\"></span> </label> <report-order-by model=\\\"$ctrl.config.orderBy\\\" report-columns=\\\"$ctrl.reportColumnsFiltered\\\"></report-order-by> <ff-row> <ff-label flex=\\\"0 0 100px\\\"><span translate=\\\"SECURITY_DEPOSIT_REPORT.SHOW_DETAILS\\\"></span></ff-label> <ff-static><ff-checkbox ff-model=\\\"$ctrl.config.showDetails\\\"></ff-checkbox></ff-static> </ff-row> </report-options> <report-owner-region model=\\\"$ctrl.config.reportOwnerRegion\\\" report-data=\\\"$ctrl.config.reportData\\\"></report-owner-region> </div> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadPdf()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_PDF\\\"></span> </ff-btn> <ff-btn sense=\\\"download\\\" ff-click=\\\"$ctrl.downloadCsv()\\\" ff-disabled=\\\"!$ctrl.pdf\\\"> <span translate=\\\"REPORTS.BTN_CSV\\\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\\\"REPORTS.PREVIEW.HEADER\\\"></span></ff-panel-header> <div pdf-preview=\\\"$ctrl.pdf\\\"></div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}