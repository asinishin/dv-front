{"version":3,"sources":["webpack:///./common/global-config.js","webpack:///./common/members/members.module.js","webpack:///./common/members/our-members/our-member-modal.controller.js","webpack:///./common/members/our-members/our-member-modal.tpl.html","webpack:///./common/members/our-members/our-members-embedding.directive.js","webpack:///./common/members/our-members/our-members-embedding.tpl.html","webpack:///./common/members/our-members/our-members.controller.js","webpack:///./common/members/our-members/our-members.scss?3c13","webpack:///./common/members/our-members/our-members.tpl.html","webpack:///./common/members/user-profile/billing-sections/payment-method-has-delete.service.js","webpack:///./common/members/user-profile/billing-sections/up-billing-method.directive.js","webpack:///./common/members/user-profile/billing-sections/up-billing-method.tpl.html","webpack:///./common/members/user-profile/billing-sections/up-credit-cards.directive.js","webpack:///./common/members/user-profile/billing-sections/up-credit-cards.tpl.html","webpack:///./common/members/user-profile/billing-sections/up-e-checks.directive.js","webpack:///./common/members/user-profile/billing-sections/up-e-checks.tpl.html","webpack:///./common/members/user-profile/register-user.controller.js","webpack:///./common/members/user-profile/sections/up-access-codes.directive.js","webpack:///./common/members/user-profile/sections/up-access-codes.tpl.html","webpack:///./common/members/user-profile/sections/up-addresses.directive.js","webpack:///./common/members/user-profile/sections/up-addresses.tpl.html","webpack:///./common/members/user-profile/sections/up-co-members.directive.js","webpack:///./common/members/user-profile/sections/up-co-members.tpl.html","webpack:///./common/members/user-profile/sections/up-comments.directive.js","webpack:///./common/members/user-profile/sections/up-comments.tpl.html","webpack:///./common/members/user-profile/sections/up-custom-fields.directive.js","webpack:///./common/members/user-profile/sections/up-custom-fields.tpl.html","webpack:///./common/members/user-profile/sections/up-documents.directive.js","webpack:///./common/members/user-profile/sections/up-documents.tpl.html","webpack:///./common/members/user-profile/sections/up-lead-source.directive.js","webpack:///./common/members/user-profile/sections/up-lead-source.tpl.html","webpack:///./common/members/user-profile/sections/up-login-info.directive.js","webpack:///./common/members/user-profile/sections/up-login-info.tpl.html","webpack:///./common/members/user-profile/sections/up-mailboxes.directive.js","webpack:///./common/members/user-profile/sections/up-mailboxes.tpl.html","webpack:///./common/members/user-profile/sections/up-membership.directive.js","webpack:///./common/members/user-profile/sections/up-membership.tpl.html","webpack:///./common/members/user-profile/sections/up-personal-info.directive.js","webpack:///./common/members/user-profile/sections/up-personal-info.tpl.html","webpack:///./common/members/user-profile/sections/up-phones.directive.js","webpack:///./common/members/user-profile/sections/up-phones.tpl.html","webpack:///./common/members/user-profile/sections/up-photo.directive.js","webpack:///./common/members/user-profile/sections/up-photo.scss?3c11","webpack:///./common/members/user-profile/sections/up-photo.tpl.html","webpack:///./common/members/user-profile/sections/up-printer-codes.directive.js","webpack:///./common/members/user-profile/sections/up-printer-codes.tpl.html","webpack:///./common/members/user-profile/sections/up-shareable.directive.js","webpack:///./common/members/user-profile/sections/up-shareable.tpl.html","webpack:///./common/members/user-profile/sections/up-system-info.directive.js","webpack:///./common/members/user-profile/sections/up-system-info.tpl.html","webpack:///./common/members/user-profile/sections/up-terms-of-service.directive.js","webpack:///./common/members/user-profile/sections/up-terms-of-service.tpl.html","webpack:///./common/members/user-profile/user-profile-edit.controller.js","webpack:///./common/members/user-profile/user-profile.module.js","webpack:///./common/members/user-profile/user-profile.tpl.html","webpack:///./common/members/user-search/user-search-state.service.js","webpack:///./common/members/user-search/user-search.controller.js","webpack:///./common/members/user-search/user-search.scss?203c","webpack:///./common/members/user-search/user-search.tpl.html"],"names":["angular","module","config","$httpProvider","$localStorageProvider","$routeProvider","$locationProvider","$translateProvider","$qProvider","deskworksConfigProvider","tmhDynamicLocaleProvider","defaults","withCredentials","setKeyPrefix","html5Mode","hashPrefix","interceptors","push","fallbackLanguage","preferredLanguage","useLoader","urlTemplate","loadFailureHandler","useSanitizeValueStrategy","addInterpolation","defaultLocale","setApiUrl","otherwise","redirectTo","routeParams","path","search","searchStr","k","encodeURIComponent","join","getDefaultRoute","length","whenOrig","when","route","resolve","resolveLocale","$q","$rootScope","dwAlerts","setLocale","setTranslations","setupService","getSetupSettings","catch","err","error","then","settings","all","translations","locale","resolveTimezone","userTasksPolicy","resolveGtm","controller","$scope","close","member","$ctrl","emails","fields","field","type","phones","urls","indexOf","email","unshift","value","forEach","name","toLowerCase","icon","match","directive","template","restrict","scope","bindToController","state","helper","deskworksConfig","$onInit","origin","getApiOrigin","getCode","_","getParam","dwModal","dwSelectCenterDirective","templateUrl","routeBranch","reloadOnSearch","auth","$route","routeHelper","current","$$route","hideSidebar","$translate","$location","session","OurMembers","optsOurMembersSort","setPageTitle","instant","optsSort","params","centerId","getCurrentCenterId","sort","offset","limit","resetData","watchCenterId","watchSort","watchSearch","watchParams","fetch","eof","fetching","query","finally","members","view","show","inputs","isEmbeddingVisible","isAdmin","$watchGroup","newVal","oldVal","some","param","idx","$watch","val","isDefined","replace","q","undefined","factory","userProfileService","methods","method","single","editMode","reg","isNew","creditCard","newCount","m","oldCount","user","autoSave","newPaymentMethods","$timeout","optsBillingMethod","isUid","prevState","onChange","creditCards","eChecks","cc","id","nv","ov","autoSelectJustSaved","$watchCollection","number","bankRoutingNumber","bankAccountNumber","billingMethods","getBillingMethods","paymentMethod","newMethod","oldMethod","billingMethod","bm","paymentMethodKey","pm","paymentMethodId","initialUpdate","i","optsPaymentMethod","pointFirstInvalid","currState","equals","save","restricted","wrap","saveFunc","data","saving","updateRaw","dwAddressDirective","dwCreditCardDirective","$element","$attrs","$window","paymentMethodHasDelete","new","creditCardTypes","hasDeleteButton","ffBlock","delete","confirm","reject","showSwitchACH","enableEChecks","switchACH","check","eCheck","dwECheckDirective","showSwitchCC","switchCC","UserField","label","selfRegistration","step","stepCount","userProfile","centerService","selfReg","setPath","setParam","get","center","lazyKisi","lazyEzeep","$filter","$injector","vm","schema","customFields","has","membership","membershipStatus","attachedReservationUnit","shareable","section","password","passwordConfirmation","login","Date","now","next","registerNewUser","kisiSave","ezeepSave","getPath","membershipProduct","membershipStartDate","setCurrentUserId","bindTestUserGenerator","systemService","rollback","copy","accessCards","$on","add","$emit","getAccessCard","result","promises","card","cardInit","userId","createAccessCard","updateAccessCard","findByKeyValue","removeAccessCard","ffBlockForm","$setDirty","optsAddressType","optsCountry","optsState","types","countries","states","address","countExisting","addresses","reduce","prev","curr","dwEmailDirective","dwLoginDirective","dwPasswordDirective","dwPhoneDirective","dwSearchUserDirective","exUserCollapsed","coMember","makeCoMemberInactive","saveAccessCards","modal","element","querySelector","focus","isNewExisting","existingUserId","newExisting","quickUser","coMembers","convertUserToCoMember","comments","fdFieldDirective","UserProfileFields","showUserAccess","docsRollback","documents","$files","$invalidFiles","$broadcast","file","document","doc","docInit","userAccess","leadSourceId","leadSource","messageBoardUserSettingsDirective","memberDirectoryUrl","saveMessageBoardUserSettings","disableGroupMailing","optsMailboxHandling","handlingOpts","mailbox","ReservationUnit","doorflowSave","optsMembershipStatus","kisi","doorflow","ezeep","membStatuses","membStatus","resUnits","reservationUnits","resUnit","attachedUserId","membershipStatusOrig","priceListOrig","membershipPriceList","makeRecurringBillingsInactive","makeCoMembersInactive","membershipPriceListId","membershipProductId","selfRegistrationStatus","onChangeStatus","resetSelfRegistrationStatus","deleteUser","setCurrentUser","deleteGdpr","reload","dwLastNameDirective","onChangeLastName","loginInput","getElementsByName","loginScope","hasClass","lastName","firstName","middleName","company","occupation","optsPhoneType","extend","phone","photoFile","window","FileReader","fileReader","readAsDataURL","onload","e","photo","target","spin","prCodesRollback","printerCodes","printerCode","prCode","prCodeInit","code","optsShareEmail","sharePhoto","shareCompany","shareOccupation","shareEmail","noop","$onChanges","activatedAt","centerName","masterMembers","master","fullName","selectUser","getCurrentUserId","lazyDoorflow","getForRegistration","pageTitle","userName","fullNameCompany","options","membershipTypes","membType","product","membershipPackages","membershipType","optsMembershipFilter","advanced","checkedIn","page","order","pageSize","columns","_name","include","tpl","_hint","resetColumns","filters","backup","reset","translate","item","hint","membershipFilter","userSearchState","us","users","previousSearch","col","obj","joinDate","filterResultColumns","redirect"],"mappings":"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","file":"main~._common_g.js?_rev=c22925bb1728569e3dad","sourcesContent":["/**\n * Global configuration module, contains config part only\n */\nangular.module('deskworks.globalConfig', [\n  'ngRoute',\n  'ngStorage',\n  'tmh.dynamicLocale',\n  'pascalprecht.translate',\n  'dateFilters',\n  'setLocale',\n  'setTranslations',\n  'resolveTimezone',\n  'deskworks.config',\n  // 'deskworks.translationCache',\n  'deskworks.setup.service',\n  'userTasksPolicy',\n  'resolveGtm',\n  'sessionInjector',\n  'sessionRefresher',\n])\n\n  .config(function($httpProvider, $localStorageProvider, $routeProvider, $locationProvider,\n                   $translateProvider, $qProvider, deskworksConfigProvider, tmhDynamicLocaleProvider) { 'use strict';\n\n    $httpProvider.defaults.withCredentials = true;\n\n    $localStorageProvider.setKeyPrefix('dw');\n\n    $locationProvider.html5Mode(true).hashPrefix('');\n\n    // $qProvider.errorOnUnhandledRejections(false);\n\n    /**\n     * Session interceptors\n     */\n    $httpProvider.interceptors.push('sessionInjector');\n    $httpProvider.interceptors.push('sessionRefresher');\n\n    $translateProvider\n      .fallbackLanguage('en')\n      .preferredLanguage('en')\n      // .useLoaderCache('$translationCache')\n      .useLoader('$translatePartialLoader', {\n        urlTemplate: 'translations/{part}-{lang}.json',\n        loadFailureHandler: '$translateErrorHandler'\n      })\n      .useSanitizeValueStrategy('sceParameters')\n      .addInterpolation('$translateMessageFormatInterpolation');\n\n    // tmhDynamicLocaleProvider.localeLocationPattern('assets/locales/angular-locale_{{locale}}.js?_rev={{_rev}}');\n    tmhDynamicLocaleProvider.defaultLocale('en-us');\n\n    deskworksConfigProvider.setApiUrl('/api/v1');\n    // deskworksConfigProvider.setApiPostfix('.json');\n\n    /**\n     * Default route handler\n     */\n    $routeProvider.otherwise({\n      redirectTo: function(routeParams, path, search) { // redirect with passing all search params\n        var searchStr = Object.keys(search).map(function(k) {\n          return encodeURIComponent(k) + \"=\" + encodeURIComponent(search[k]);\n        }).join('&');\n        return deskworksConfigProvider.getDefaultRoute() + (searchStr.length > 0 ? '?' + searchStr : '');\n      }\n    });\n\n    /**\n     * Patch $routeProvider.when method to auto-add resolveLocale dependency to routes with 'module' property\n     */\n    $routeProvider.whenOrig = $routeProvider.when;\n    $routeProvider.when = function(path, route) {\n      route.resolve = route.resolve || {};\n\n      route.resolve.resolveLocale = ['$q', '$rootScope', 'dwAlerts', 'setLocale', 'setTranslations', 'setupService',\n        function($q, $rootScope, dwAlerts, setLocale, setTranslations, setupService) {\n          return setupService.getSetupSettings()\n            .catch(function(err) { return dwAlerts.error(err, 'Failed to get setup settings.'); })\n            .then(function(settings) {\n              $rootScope.settings = settings;\n              return $q.all([\n                setLocale(settings),\n                setTranslations(route.translations || [], settings.locale)\n              ]);\n            });\n        }\n      ];\n\n      route.resolve.resolveTimezone = ['resolveTimezone', function(resolveTimezone) { return resolveTimezone(); }];\n      route.resolve.userTasksPolicy = ['userTasksPolicy', function(userTasksPolicy) { return userTasksPolicy(); }];\n      route.resolve.resolveGtm = ['resolveGtm', function(resolveGtm) { return resolveGtm(); }];\n\n      return $routeProvider.whenOrig(path, route); // call original when(path, route)\n    };\n  });\n","angular.module('deskworks.members', [\n  'deskworks.members.userProfile',\n  'deskworks.members.billingProfile.edit',\n  'deskworks.members.userSearch',\n  'deskworks.OurMembersCtrl',\n]);\n","angular.module('deskworks.OurMemberModalCtrl', [])\n\n  .controller('OurMemberModalCtrl', function($scope, close, member) { 'use strict';\n    var $ctrl = this;\n\n    $scope.close = close;\n    $scope.member = member;\n\n    $scope.emails = member.fields.filter(function(field) { return field.type === 'email'; });\n    $scope.phones = member.fields.filter(function(field) { return field.type === 'phone'; });\n    $scope.urls = member.fields.filter(function(field) { return field.type === 'url'; });\n    $scope.fields = member.fields.filter(function(field) { return ['email', 'phone', 'url'].indexOf(field.type) < 0; });\n\n    if(member.email) $scope.emails.unshift({ value: member.email });\n\n    $scope.urls.forEach(function(field) {\n      var name = (field.name || '').toLowerCase();\n      var value = (field.value || '').toLowerCase();\n      if(name.indexOf('facebook') >= 0 || value.indexOf('facebook.com') >= 0) field.icon = 'fa-facebook-square';\n      else if(name.indexOf('twitter') >= 0 || value.indexOf('twitter.com') >= 0) field.icon = 'fa-twitter-square';\n      else if(name.indexOf('linkedin') >= 0 || value.indexOf('linkedin.com') >= 0) field.icon = 'fa-linkedin-square';\n      else if(name.indexOf('github') >= 0 || value.indexOf('github.com') >= 0) field.icon = 'fa-github-square';\n      else if(name.indexOf('youtube') >= 0 || value.indexOf('youtube.com') >= 0) field.icon = 'fa-youtube-square';\n      else if(name.indexOf('vimeo') >= 0 || value.indexOf('vimeo.com') >= 0) field.icon = 'fa-vimeo-square';\n      else if(name.match(/google(?:\\s|-)?(?:plus|\\+)/) || value.indexOf('plus.google.com') >= 0) field.icon = 'fa-google-plus-square';\n      else field.icon = 'fa-globe';\n    });\n  });\n","// Module\nvar code = \"<div class=\\\"dw-modal\\\"> <div class=\\\"dw-modal-fade\\\" ng-click=\\\"close()\\\"></div> <div class=\\\"dw-modal-dialog our-member-modal\\\"> <div class=\\\"dw-modal-scroll\\\"> <div class=\\\"our-member-header\\\"> <ff-img ff-src=\\\"{{::member.photo}}\\\" ng-if=\\\"::member.photo\\\" ff-alt=\\\"{{::member.name}}\\\"></ff-img> <div class=\\\"our-member-details\\\"> <h4>{{::member.name}}</h4> <h5>{{::member.occupation}}</h5> <h6>{{::member.company}}</h6> <div class=\\\"our-member-contacts\\\" ng-if=\\\"::emails.length || phones.length\\\"> <div class=\\\"our-member-emails\\\" ng-if=\\\"::emails.length\\\"> <span ng-repeat=\\\"field in ::emails\\\"> <i class=\\\"fa fa-at\\\"></i> <a ng-href=\\\"mailto:{{::field.value}}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">{{::field.value}}</a> </span> </div> <div class=\\\"our-member-phones\\\" ng-if=\\\"::phones.length\\\"> <span ng-repeat=\\\"field in ::phones\\\"> <i class=\\\"fa fa-phone\\\"></i> <a ng-href=\\\"tel:{{::field.value}}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">{{::field.value}}</a> </span> </div> </div> <div class=\\\"our-member-urls\\\" ng-if=\\\"::urls.length\\\"> <span ng-repeat=\\\"field in ::urls\\\"> <a ng-href=\\\"{{::field.value}}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\" title=\\\"{{::field.name}}\\\"><i class=\\\"fa\\\" ng-class=\\\"::field.icon\\\"></i></a> </span> </div> </div> </div> <div ng-repeat=\\\"field in ::fields\\\" class=\\\"our-member-field\\\"> <span>{{::field.name}}:</span>&nbsp;<span>{{::field.type === 'date' ? (field.value | date:'mediumDate') : field.value}}</span> </div> </div> <button class=\\\"dw-modal-cross\\\" ng-click=\\\"close()\\\"></button> </div> </div> \";\n// Exports\nmodule.exports = code;","import template from  './our-members-embedding.tpl.html';\n\nexport default angular.module('deskworks.ourMembersEmbeddingDirective', [\n  'deskworks.config',\n])\n\n  .directive('ourMembersEmbedding', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'OurMembersEmbeddingDirectiveCtrl as $ctrl',\n      bindToController: {\n      },\n    };\n  })\n\n  .controller('OurMembersEmbeddingDirectiveCtrl', function($scope, state, helper, deskworksConfig) {\n    const $ctrl = this;\n\n    $ctrl.$onInit = () => {\n      const origin = deskworksConfig.getApiOrigin();\n\n      $ctrl.getCode = _ => helper.join([\n        '<script dw-our-members',\n        +state.getParam('centerId') ? `dw-center-id=\"${state.getParam('centerId')}\"` : null,\n        `src=\"${origin}/our-members.js\"></script>`\n      ], ' ');\n    };\n  });\n","// Module\nvar code = \"<ff-panel> <ff-panel-header><span translate=\\\"OUR_MEMBERS.EMBEDDING.HEADER\\\"></span></ff-panel-header> <ff-static><span translate=\\\"OUR_MEMBERS.EMBEDDING.HINT\\\"></span></ff-static> <ff-static ff-style=\\\"{'white-space': 'pre-wrap', 'font-family': 'monospace', 'font-size': '.85em', 'line-height': '1.25'}\\\">{{$ctrl.getCode()}}</ff-static> </ff-panel> \";\n// Exports\nmodule.exports = code;","import './our-members.scss';\nimport dwModal from 'shared/dw-modal/dw-modal.service';\nimport dwSelectCenterDirective from 'shared/dw-controls/dw-select-center/dw-select-center.directive';\n\nexport default angular.module('deskworks.OurMembersCtrl', [\n  'infinite-scroll',\n  'deskworks.routeHelper',\n  'deskworks.OurMembers',\n  'deskworks.OurMemberModalCtrl',\n  'deskworks.optsOurMembersSort',\n  'deskworks.ourMembersEmbeddingDirective',\n  dwModal.name,\n  dwSelectCenterDirective.name,\n])\n\n  .config(function($routeProvider) {\n    $routeProvider.when('/our-members', {\n      templateUrl: 'members/our-members/our-members.tpl.html',\n      controller: 'OurMembersCtrl as $ctrl',\n      routeBranch: 'our-members',\n      translations: ['our-members'],\n      reloadOnSearch: false,\n      userTasksPolicy: false,\n      resolve: {\n        auth: ($route, routeHelper) => routeHelper.auth(null)\n          .then(() => { $route.current.$$route.hideSidebar = false; })\n          .catch(() => { $route.current.$$route.hideSidebar = true; }),\n      },\n    });\n  })\n\n  .controller('OurMembersCtrl', function($scope, $translate, $location, $q, dwModal, dwAlerts, state, helper, session,\n                                         OurMembers, optsOurMembersSort) {\n    const $ctrl = this;\n    state.setPageTitle($translate.instant('OUR_MEMBERS.PAGE_TITLE'));\n\n    $ctrl.optsSort = optsOurMembersSort;\n\n    $ctrl.params = {\n      centerId: state.getCurrentCenterId(),\n      sort: 'name',\n      offset: 0,\n      limit: 100,\n    };\n\n    resetData();\n    watchCenterId();\n    watchSort();\n    watchSearch();\n    watchParams();\n\n    /**\n     * Fetch\n     */\n    $ctrl.fetch = function() {\n      if ($ctrl.eof || $ctrl.fetching) return $ctrl.fetching;\n      $ctrl.fetching = OurMembers.query($ctrl.params)\n        .catch(err => dwAlerts.error(err, 'Failed to query our members.'))\n        .finally(() => { $ctrl.fetching = null; })\n        .then(members => {\n          $ctrl.members = $ctrl.members.concat(members);\n          $ctrl.params.offset += members.length;\n          $ctrl.eof = members.length < $ctrl.params.limit;\n        });\n    };\n\n    /**\n     * View member details\n     */\n    $ctrl.view = function(member) {\n      dwModal.show({\n        scope: $scope,\n        templateUrl: 'members/our-members/our-member-modal.tpl.html',\n        controller: 'OurMemberModalCtrl',\n        inputs: { member: member },\n      });\n    };\n\n    $ctrl.isEmbeddingVisible = _ => $ctrl.members.length && !$ctrl.fetching && session.isAdmin();\n\n    /**\n     * watchParams\n     */\n    function watchParams() {\n      $scope.$watchGroup(['$ctrl.params.centerId', '$ctrl.params.sort', '$ctrl.params.q'], function(newVal, oldVal) {\n        if (newVal.some((param, idx) => param !== oldVal[idx])) {\n          $q.when($ctrl.fetching)\n            .finally(() => {\n              resetData();\n              $ctrl.fetch();\n            });\n        }\n      });\n    }\n\n    /**\n     * Reset data\n     */\n    function resetData() {\n      $ctrl.members = [];\n      $ctrl.params.offset = 0;\n      $ctrl.eof = false;\n    }\n\n    /**\n     * Map centerId to URL search param\n     */\n    function watchCenterId() {\n      $scope.$watch(() => $location.search().centerId, val => {\n        $ctrl.params.centerId = angular.isDefined(val) ? +val : state.getCurrentCenterId();\n      });\n      $scope.$watch('$ctrl.params.centerId', val => {\n        $location.search('centerId', val).replace();\n      });\n    }\n\n    /**\n     * Map sort to URL search param\n     */\n    function watchSort() {\n      $scope.$watch(() => $location.search().sort, val => {\n        $ctrl.params.sort = val || 'name';\n      });\n      $scope.$watch('$ctrl.params.sort', val => {\n        $location.search('sort', val).replace();\n      });\n    }\n\n    /**\n     * Map search to URL search param\n     */\n    function watchSearch() {\n      $scope.$watch(() => $location.search().q, val => {\n        $ctrl.params.q = val || '';\n      });\n      $scope.$watch('$ctrl.params.q', val => {\n        $location.search('q', val || undefined).replace();\n      });\n    }\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div class=\\\"our-members\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel class=\\\"our-members-toolbar ff-no-frame\\\"> <div class=\\\"ff-grid gutter-h-half\\\"> <label class=\\\"ff-row\\\" flex=\\\"{md: '0 0 40%'}\\\"> <ff-label flex=\\\"0 0 70px\\\"><span translate=\\\"OUR_MEMBERS.CENTER\\\"></span></ff-label> <dw-select-center ff-model=\\\"$ctrl.params.centerId\\\" ff-option-all=\\\"true\\\"></dw-select-center> </label> <label class=\\\"ff-row\\\" flex=\\\"{md: '0 0 30%'}\\\"> <ff-label flex=\\\"0 0 70px\\\"><span translate=\\\"OUR_MEMBERS.SORT\\\"></span></ff-label> <ff-select name=\\\"sort\\\" ff-model=\\\"$ctrl.params.sort\\\" ff-options=\\\"sort.id as sort.name for sort in $ctrl.optsSort\\\"></ff-select> </label> <label class=\\\"ff-row\\\" flex=\\\"{md: '0 0 30%'}\\\"> <ff-label flex=\\\"0 0 70px\\\"><span translate=\\\"OUR_MEMBERS.SEARCH\\\"></span></ff-label> <ff-text name=\\\"search\\\" ff-model=\\\"$ctrl.params.q\\\" ff-model-options=\\\"{ debounce: 1000 }\\\"></ff-text> </label> </div> </ff-panel> <our-members-embedding ng-if=\\\"$ctrl.isEmbeddingVisible()\\\"></our-members-embedding> <ff-panel ng-if=\\\"!$ctrl.members.length && !$ctrl.fetching\\\"><span translate=\\\"OUR_MEMBERS.EMPTY\\\"></span></ff-panel> <div class=\\\"our-members-container\\\" infinite-scroll=\\\"$ctrl.fetch()\\\" infinite-scroll-distance=\\\"2\\\" infinite-scroll-container=\\\"'.snap-content-scroller'\\\"> <div class=\\\"our-member\\\" ng-repeat=\\\"member in $ctrl.members\\\" ng-click=\\\"$ctrl.view(member)\\\"> <ff-img ff-src=\\\"{{::member.photo}}\\\" ff-alt=\\\"{{::member.name}}\\\"></ff-img> <h5>{{::member.name}}</h5> <h6>{{::member.occupation}}</h6> </div> <div ff-spin=\\\"true\\\" class=\\\"our-members-spin\\\" ng-if=\\\"$ctrl.fetching\\\"></div> </div> </div> </div> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.paymentMethodHasDelete', [\n  'session',\n  'deskworks.userProfile.service',\n])\n\n  .factory('paymentMethodHasDelete', (session, userProfileService) => params => {\n    const { methods, method, single, editMode, reg } = params;\n    const isNew = userProfileService.creditCard.isNew;\n\n    const newCount = methods.filter(m => isNew(m)).length;\n    const oldCount = methods.length - newCount;\n\n    if (session.isAdmin() && reg) return isNew(method) ? newCount > 1 || oldCount > 0 : oldCount > 1;\n\n    return !isNew(method) && !editMode && oldCount > 1;\n  });\n","/**\n * upBillingMethod directive - Billing Profile -> Billing Method\n */\nexport default angular.module('deskworks.upBillingMethod', [\n  'autoSave',\n  'deskworks.helper',\n  'deskworks.state',\n  'deskworks.userProfile.service',\n  'deskworks.userProfile.optsBillingMethod',\n])\n\n  .directive('upBillingMethod', function() {\n    const templateUrl = 'members/user-profile/billing-sections/up-billing-method.tpl.html';\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upBillingMethodCtrl as $ctrl',\n      bindToController: {\n        user: '<',\n        reg: '<',\n        settings: '<',\n        single: '<',\n        autoSave: '<',\n        newPaymentMethods: '<',\n      },\n    };\n  })\n\n  .controller('upBillingMethodCtrl', function($scope, $timeout, dwAlerts, helper, state, session,\n                                              userProfileService, optsBillingMethod, autoSave) {\n    const $ctrl = this;\n    const { isUid } = helper;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = () => {\n      $ctrl.prevState = {};\n      $ctrl.onChange(true); // initial update\n\n      $scope.$watch(\n        () => $ctrl.user.creditCards.concat($ctrl.user.eChecks).map(cc => ({ id: cc.id })),\n        (nv, ov) => $ctrl.autoSelectJustSaved(nv, ov),\n        true,\n      );\n      $scope.$watchCollection(\n        () => $ctrl.user.creditCards.concat($ctrl.user.eChecks)\n          .filter(cc => $ctrl.newPaymentMethods || (cc.id && !helper.isUid(cc.id)))\n          .map(cc => cc.id + cc.number || '' + cc.bankRoutingNumber || '' + cc.bankAccountNumber || ''),\n        (newVal, oldVal) => { if (oldVal !== newVal) $ctrl.onChange(); },\n      );\n    };\n\n    /**\n     * Auto-select just saved payment method\n     */\n    $ctrl.autoSelectJustSaved = (nv, ov) => {\n      const billingMethods = $ctrl.getBillingMethods();\n\n      if (nv && ov) { // autoselect just saved payment method\n        const paymentMethod = nv.find((newMethod, idx) => {\n          const oldMethod = ov[idx] || {};\n          return !isUid(newMethod.id) && isUid(oldMethod.id);\n        });\n        if (paymentMethod) {\n          const billingMethod = billingMethods\n            .filter(bm => bm.paymentMethodKey)\n            .find(bm => $ctrl.user[bm.paymentMethodKey].find(pm => pm.id === paymentMethod.id));\n          if (billingMethod) {\n            $ctrl.user.billingMethod = billingMethod.id;\n            $ctrl.user.paymentMethodId = paymentMethod.id;\n          }\n        }\n      }\n    }\n\n    /**\n     * Change handler\n     */\n    $ctrl.onChange = (initialUpdate = false) => {\n      const billingMethods = $ctrl.getBillingMethods();\n\n      // if (!initialUpdate || $ctrl.reg) $ctrl.user.billingMethod = $ctrl.user.billingMethod || billingMethods[0].id;\n      if (!initialUpdate || $ctrl.reg) {\n        let bm = billingMethods[0];\n        if (bm.paymentMethodKey && !$ctrl.user[bm.paymentMethodKey].length && billingMethods[1] && billingMethods[1].paymentMethodKey && $ctrl.user[billingMethods[1].paymentMethodKey].length) {\n          bm = billingMethods[1];\n        }\n        $ctrl.user.billingMethod = $ctrl.user.billingMethod || bm.id;\n      }\n      $ctrl.billingMethod = billingMethods.find(i => i.id === $ctrl.user.billingMethod);\n\n      $ctrl.optsPaymentMethod = [];\n      if ($ctrl.billingMethod && $ctrl.billingMethod.paymentMethodKey) {\n\n        // Attempt to auto-select methods on default method deletion\n        // if ($ctrl.user[$ctrl.billingMethod.paymentMethodKey].length === 0) {\n        //   billingMethods.find(bm => { // if empty billingMethod, try to find non-empty\n        //     if (bm.paymentMethodKey && $ctrl.user[bm.paymentMethodKey].length > 0 && $ctrl.user.billingMethod !== bm.id) {\n        //       $ctrl.user.billingMethod = bm.id;\n        //       $ctrl.user.paymentMethodId = $ctrl.user[bm.paymentMethodKey][0].id;\n        //       return true;\n        //     }\n        //   });\n        // }\n\n        $ctrl.optsPaymentMethod = $ctrl.user[$ctrl.billingMethod.paymentMethodKey]\n          .filter(cc => $ctrl.newPaymentMethods || (cc.id && !helper.isUid(cc.id)))\n          .map(method => ({\n            id: method.id,\n            name: method.number || method.bankRoutingNumber && [method.bankRoutingNumber, method.bankAccountNumber].join(' / ') || '[new]',\n          }));\n      }\n\n      $ctrl.paymentMethod = $ctrl.optsPaymentMethod.find(i => i.id === $ctrl.user.paymentMethodId);\n\n      if ($ctrl.paymentMethod) {\n        $ctrl.user.paymentMethodId = $ctrl.paymentMethod.id;\n      } else {\n        if ((!initialUpdate || $ctrl.reg)  && $ctrl.optsPaymentMethod.length) {\n          $ctrl.user.paymentMethodId = $ctrl.optsPaymentMethod[0].id;\n        } else {\n          $ctrl.user.paymentMethodId = null;\n        }\n      }\n\n      if ($ctrl.autoSave === false) return; // skip auto-saving\n\n      $timeout(() => {\n        if (helper.pointFirstInvalid('#upBillingMethod')) return;\n        const currState = { billingMethod: $ctrl.user.billingMethod, paymentMethodId: $ctrl.user.paymentMethodId };\n        if (initialUpdate) {\n          $ctrl.prevState = currState;\n        } else {\n          if (!angular.equals($ctrl.prevState, currState)) {\n            $ctrl.save()\n              .then(() => { $ctrl.prevState = currState; });\n          }\n        }\n      }, 100);\n    };\n\n    // /**\n    //  * Change handler\n    //  */\n    // $ctrl.onChange = (initialUpdate) => {\n    //   if (!initialUpdate || $ctrl.reg) $ctrl.user.billingMethod = $ctrl.user.billingMethod || $ctrl.getBillingMethods()[0].id;\n    //   $ctrl.billingMethod = $ctrl.getBillingMethods().find(i => i.id === $ctrl.user.billingMethod);\n\n    //   $ctrl.optsPaymentMethod = [];\n    //   if ($ctrl.billingMethod && $ctrl.billingMethod.paymentMethodKey) {\n    //     $ctrl.optsPaymentMethod = $ctrl.user[$ctrl.billingMethod.paymentMethodKey]\n    //       .filter(cc => $ctrl.newPaymentMethods || (cc.id && !helper.isUid(cc.id)))\n    //       .map(method => ({\n    //         id: method.id,\n    //         name: method.number || method.bankRoutingNumber && [method.bankRoutingNumber, method.bankAccountNumber].join(' / ') || '[new]',\n    //       }));\n    //   }\n\n    //   $ctrl.paymentMethod = $ctrl.optsPaymentMethod.find(i => i.id === $ctrl.user.paymentMethodId);\n\n    //   if ($ctrl.paymentMethod) {\n    //     $ctrl.user.paymentMethodId = $ctrl.paymentMethod.id;\n    //   } else {\n    //     if ((!initialUpdate || $ctrl.reg)  && $ctrl.optsPaymentMethod.length) {\n    //       $ctrl.user.paymentMethodId = $ctrl.optsPaymentMethod[0].id;\n    //     } else {\n    //       $ctrl.user.paymentMethodId = null;\n    //     }\n    //   }\n\n    //   if ($ctrl.autoSave === false) return; // skip auto-saving\n\n    //   $timeout(() => {\n    //     if (helper.pointFirstInvalid('#upBillingMethod')) return;\n    //     const currState = { billingMethod: $ctrl.user.billingMethod, paymentMethodId: $ctrl.user.paymentMethodId };\n    //     if (initialUpdate) {\n    //       $ctrl.prevState = currState;\n    //     } else {\n    //       if (!angular.equals($ctrl.prevState, currState)) {\n    //         $ctrl.save()\n    //           .then(() => { $ctrl.prevState = currState; });\n    //       }\n    //     }\n    //   }, 100);\n    // };\n\n    /**\n     * Get Billing Methods\n     */\n    $ctrl.getBillingMethods = () => optsBillingMethod\n      .filter(method => !method.restricted || session.isAdmin() || $ctrl.prevState && $ctrl.prevState.billingMethod === method.id);\n\n    /**\n     * Save\n     */\n    $ctrl.save = autoSave.wrap(saveFunc);\n    function saveFunc() {\n      const data = { billingMethod: $ctrl.user.billingMethod, paymentMethodId: $ctrl.user.paymentMethodId };\n      $ctrl.saving = true;\n      return userProfileService.updateRaw(state.getCurrentCenterId(), $ctrl.user, data)\n        .catch(err => dwAlerts.error(err, 'Failed to save billing method.'))\n        .finally(() => { $ctrl.saving = false; });\n    }\n  });\n","// Module\nvar code = \"<div id=\\\"upBillingMethod\\\" class=\\\"ff-grid gutter-h\\\"> <ff-panel flex=\\\"{lg: '0 0 50%'}\\\"> <ff-spin ng-if=\\\"$ctrl.saving\\\"></ff-spin> <ff-header><span translate=\\\"BILLING_PROFILE.BILLING_METHOD\\\"></span></ff-header> <div class=\\\"ff-grid\\\"> <label flex=\\\"{md: '0 0 50%'}\\\"> <ff-select ff-model=\\\"$ctrl.user.billingMethod\\\" ff-required=\\\"true\\\" ff-change=\\\"$ctrl.onChange()\\\" ff-options=\\\"opt.id as opt.name for opt in $ctrl.getBillingMethods()\\\" ff-validate-alert=\\\"{{'BILLING_PROFILE.BILLING_METHOD' | translate}}\\\" aria-label=\\\"{{'BILLING_PROFILE.BILLING_METHOD' | translate}}\\\"></ff-select> </label> <label flex=\\\"{md: '0 0 50%'}\\\" ng-if=\\\"$ctrl.billingMethod.paymentMethodKey\\\"> <ff-select ff-model=\\\"$ctrl.user.paymentMethodId\\\" ff-required=\\\"true\\\" ff-change=\\\"$ctrl.onChange()\\\" ff-options=\\\"opt.id as opt.name for opt in $ctrl.optsPaymentMethod\\\" ff-validate-alert=\\\"{{'BILLING_PROFILE.PAYMENT_METHOD' | translate}}\\\" aria-label=\\\"{{'BILLING_PROFILE.PAYMENT_METHOD' | translate}}\\\"></ff-select> </label> </div> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","import dwAddressDirective from 'shared/dw-controls/dw-address/dw-address.directive';\nimport dwCreditCardDirective from 'shared/dw-controls/dw-credit-card/dw-credit-card.directive';\n\n/**\n * upCreditCards directive - 'Credit Cards' section of user profile\n */\nexport default angular.module('deskworks.upCreditCards', [\n  'deskworks.helper',\n  'deskworks.state',\n  'deskworks.userProfile.service',\n  'deskworks.paymentMethodHasDelete',\n  dwAddressDirective.name,\n  dwCreditCardDirective.name,\n])\n\n  .directive('upCreditCards', function() {\n    const templateUrl = 'members/user-profile/billing-sections/up-credit-cards.tpl.html';\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upCreditCardsCtrl as $ctrl',\n      bindToController: {\n        user: '<userProfile',\n        reg: '<',\n        settings: '<',\n        single: '<',\n      },\n    };\n  })\n\n  .controller('upCreditCardsCtrl', function($scope, $element, $attrs, $q, $window, $translate, dwAlerts,\n                                            helper, state, userProfileService, paymentMethodHasDelete) {\n    const $ctrl = this;\n\n    /**\n     * New CC factory\n     */\n    $ctrl.new = function() {\n      const cc = userProfileService.creditCard.new($ctrl.user);\n      cc.type = $ctrl.settings.creditCardTypes[0];\n      return cc;\n    };\n    $ctrl.isNew = userProfileService.creditCard.isNew;\n\n    /**\n     * Check if payment method has delete button\n     */\n    $ctrl.hasDeleteButton = (method, ffBlock) => paymentMethodHasDelete({\n      method,\n      methods: $ctrl.user.creditCards.concat($ctrl.user.eChecks),\n      single: $ctrl.single,\n      editMode: ffBlock.editMode,\n      reg: $ctrl.reg,\n    });\n\n    /**\n     * Save button handler.\n     */\n    $ctrl.save = function(cc) {\n      return userProfileService.creditCard.save(state.getCurrentCenterId(), $ctrl.user.id, cc)\n        .catch(err => dwAlerts.error(err, 'Failed to save credit card.'));\n    };\n\n    /**\n     * Delete button handler.\n     */\n    $ctrl.delete = function(cc) {\n      if (userProfileService.creditCard.isNew(cc)) return $q.when();\n      if (!$window.confirm($translate.instant('BILLING_PROFILE.CREDIT_CARDS.CONFIRM_DELETE'))) return $q.reject();\n\n      return userProfileService.creditCard.delete(state.getCurrentCenterId(), $ctrl.user.id, cc)\n        .catch(err => dwAlerts.error(err, 'Failed to delete credit card.'));\n    };\n\n    $ctrl.showSwitchACH = () => {\n      const { creditCards, eChecks } = $ctrl.user;\n      return $ctrl.single && $ctrl.settings.enableEChecks && !eChecks.length && (!creditCards.length || userProfileService.creditCard.isNew(creditCards[0]));\n    };\n\n    $ctrl.switchACH = function() {\n      const check = userProfileService.eCheck.new($ctrl.user);\n      $ctrl.user.eChecks = [check];\n      $ctrl.user.creditCards = [];\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"upCreditCards\\\" class=\\\"ff-grid gutter-v gutter-h\\\" ff-section=\\\"cc in $ctrl.user.creditCards\\\" ff-section-new=\\\"$ctrl.new()\\\"> <ff-panel flex=\\\"{{ $ctrl.single ? null : {lg: '0 0 50%'} }}\\\" ng-if=\\\"!$ctrl.user.creditCards.length\\\"> <span translate=\\\"BILLING_PROFILE.CREDIT_CARDS.EMPTY\\\"></span> </ff-panel> <ff-panel flex=\\\"{sm: '0 0 85%', md: '0 0 70%', lg: '0 0 50%'}\\\" id=\\\"{{'upCreditCard-' + cc.id}}\\\" ff-block ff-block-save=\\\"$ctrl.save(cc)\\\" ff-block-delete=\\\"$ctrl.delete(cc)\\\" ff-block-edit-default=\\\"$ctrl.isNew(cc)\\\" ff-block-is-new=\\\"$ctrl.isNew(cc)\\\"> <div class=\\\"ff-grid gutter-v\\\"> <ff-panel> <ff-header> <div class=\\\"ff-grid\\\"> <span flex=\\\"auto\\\" translate=\\\"BILLING_PROFILE.CREDIT_CARDS.HEADER\\\"></span> <ff-btn-group flex=\\\"none\\\" class=\\\"ff-btn-full\\\" ng-if=\\\"$ctrl.showSwitchACH()\\\" style=\\\"margin:-.55rem 0 -.25rem 0\\\"> <ff-btn sense=\\\"add\\\" size=\\\"sm\\\" ff-click=\\\"$ctrl.switchACH()\\\" style=\\\"font-size:.85rem;line-height:1.25\\\"> <span translate=\\\"BILLING_PROFILE.E_CHECKS.BTN_ADD\\\"></span> </ff-btn> </ff-btn-group> </div> </ff-header> <fieldset dw-credit-card=\\\"cc\\\" dw-credit-card-types=\\\"$ctrl.settings.creditCardTypes\\\"></fieldset> </ff-panel> <ff-panel> <ff-panel-header><span translate=\\\"BILLING_PROFILE.CREDIT_CARDS.ADDRESS\\\"></span></ff-panel-header> <fieldset dw-address=\\\"cc\\\" not-required=\\\"$ctrl.settings.creditCardAddressOptional\\\"></fieldset> </ff-panel> </div> <ff-btn-group class=\\\"ff-block-buttons\\\" ng-if=\\\"!$ctrl.user.accessRights.billingInfo.readOnly && (!$ctrl.isNew(cc) || !$ctrl.single)\\\"> <ff-btn ff-btn-block-delete ng-if=\\\"$ctrl.hasDeleteButton(cc, ffBlock)\\\" ng-hide=\\\"false\\\"></ff-btn> <ff-btn ff-btn-block-save ng-if=\\\"!$ctrl.reg && !$ctrl.single\\\"></ff-btn> <ff-btn ff-btn-block-cancel ng-if=\\\"!$ctrl.reg && !$ctrl.single\\\"></ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=\\\"ff-btn-full\\\" ng-if=\\\"!$ctrl.user.accessRights.billingInfo.readOnly && !$ctrl.single\\\"> <ff-btn ff-btn-section-new><span translate=\\\"BILLING_PROFILE.CREDIT_CARDS.BTN_ADD\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","import dwECheckDirective from 'shared/dw-controls/dw-e-check/dw-e-check.directive';\n\n/**\n * upEChecks directive - 'eChecks' section of user profile\n */\nangular.module('deskworks.upEChecks', [\n  'deskworks.helper',\n  'deskworks.state',\n  'deskworks.userProfile.service',\n  'deskworks.dwECheck',\n  'deskworks.paymentMethodHasDelete',\n  dwECheckDirective.name,\n])\n\n  .directive('upEChecks', function() {\n    const templateUrl = 'members/user-profile/billing-sections/up-e-checks.tpl.html';\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upEChecksCtrl as $ctrl',\n      bindToController: {\n        user: '<userProfile',\n        reg: '<',\n        single: '<',\n      },\n    };\n  })\n\n  .controller('upEChecksCtrl', function($scope, $element, $attrs, $q, $window, $translate, dwAlerts,\n                                        helper, state, userProfileService, paymentMethodHasDelete) {\n    const $ctrl = this;\n\n    $ctrl.new = () => userProfileService.eCheck.new($ctrl.user);\n    $ctrl.isNew = userProfileService.eCheck.isNew;\n\n    /**\n     * Check if payment method has delete button\n     */\n    $ctrl.hasDeleteButton = (method, ffBlock) => paymentMethodHasDelete({\n      method,\n      methods: $ctrl.user.creditCards.concat($ctrl.user.eChecks),\n      single: $ctrl.single,\n      editMode: ffBlock.editMode,\n      reg: $ctrl.reg,\n    });\n\n    /**\n     * Save button handler.\n     */\n    $ctrl.save = function(check) {\n      return userProfileService.eCheck.save(state.getCurrentCenterId(), $ctrl.user.id, check)\n        .catch(err => dwAlerts.error(err, 'Failed to save eCheck.'));\n    };\n\n    /**\n     * Delete button handler.\n     */\n    $ctrl.delete = function(check) {\n      if (userProfileService.eCheck.isNew(check)) return $q.when();\n      if (!$window.confirm($translate.instant('BILLING_PROFILE.E_CHECKS.CONFIRM_DELETE'))) return $q.reject();\n\n      return userProfileService.eCheck.delete(state.getCurrentCenterId(), $ctrl.user.id, check)\n        .catch(err => dwAlerts.error(err, 'Failed to delete eCheck.'));\n    };\n\n    $ctrl.showSwitchCC = () => {\n      const { creditCards, eChecks } = $ctrl.user;\n      return $ctrl.single && !creditCards.length && (!eChecks.length || userProfileService.eCheck.isNew(eChecks[0]));\n    };\n\n    $ctrl.switchCC = function() {\n      const cc = userProfileService.creditCard.new($ctrl.user);\n      $ctrl.user.creditCards = [cc];\n      $ctrl.user.eChecks = [];\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"upEChecks\\\" class=\\\"ff-grid gutter-v gutter-h\\\" ff-section=\\\"check in $ctrl.user.eChecks\\\" ff-section-new=\\\"$ctrl.new()\\\"> <ff-panel flex=\\\"{{ $ctrl.single ? null : {lg: '0 0 50%'} }}\\\" ng-if=\\\"!$ctrl.user.eChecks.length\\\"> <span translate=\\\"BILLING_PROFILE.E_CHECKS.EMPTY\\\"></span> </ff-panel> <ff-panel flex=\\\"{sm: '0 0 85%', md: '0 0 70%', lg: '0 0 50%'}\\\" id=\\\"{{'upECheck-' + check.id}}\\\" ff-block ff-block-save=\\\"$ctrl.save(check)\\\" ff-block-delete=\\\"$ctrl.delete(check)\\\" ff-block-edit-default=\\\"$ctrl.isNew(check)\\\" ff-block-is-new=\\\"$ctrl.isNew(check)\\\"> <ff-header> <div class=\\\"ff-grid\\\"> <span flex=\\\"auto\\\" translate=\\\"BILLING_PROFILE.E_CHECKS.HEADER\\\"></span> <ff-btn-group flex=\\\"none\\\" class=\\\"ff-btn-full\\\" ng-if=\\\"$ctrl.showSwitchCC()\\\" style=\\\"margin:-.55rem 0 -.25rem 0\\\"> <ff-btn sense=\\\"add\\\" size=\\\"sm\\\" ff-click=\\\"$ctrl.switchCC()\\\" style=\\\"font-size:.85rem;line-height:1.25\\\"> <span translate=\\\"BILLING_PROFILE.CREDIT_CARDS.BTN_ADD\\\"></span> </ff-btn> </ff-btn-group> </div> </ff-header> <fieldset dw-e-check=\\\"check\\\"></fieldset> <ff-btn-group class=\\\"ff-block-buttons\\\" ng-if=\\\"!$ctrl.user.accessRights.billingInfo.readOnly && (!$ctrl.isNew(check) || !$ctrl.single)\\\"> <ff-btn ff-btn-block-delete ng-if=\\\"$ctrl.hasDeleteButton(check, ffBlock)\\\" ng-hide=\\\"false\\\"></ff-btn> <ff-btn ff-btn-block-save ng-if=\\\"!$ctrl.reg && !$ctrl.single\\\"></ff-btn> <ff-btn ff-btn-block-cancel ng-if=\\\"!$ctrl.reg && !$ctrl.single\\\"></ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=\\\"ff-btn-full\\\" ng-if=\\\"!$ctrl.user.accessRights.billingInfo.readOnly && !$ctrl.single\\\"> <ff-btn ff-btn-section-new><span translate=\\\"BILLING_PROFILE.E_CHECKS.BTN_ADD\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","import UserField from 'shared/services/setup/user-field.service';\n\nexport default angular.module('deskworks.members.userProfile.new', [\n  'ngRoute',\n  'deskworks.userProfile.service',\n  'deskworks.center.service',\n  UserField.name,\n  'deskworks.routeHelper',\n  'deskworks.helper',\n])\n\n  .config(function($routeProvider) {\n\n    $routeProvider.when('/new-member', {\n      template: '<div ng-include=\"\\'members/user-profile/user-profile.tpl.html\\'\" ff-bulk-read-only></div>',\n      controller: 'RegisterUserCtrl as vm',\n      label: 'New Member',\n      routeBranch: 'new-member',\n      translations: ['user-profile'],\n      resolve: {\n        reg: () => { return { member: true, selfRegistration: false, step: 1, stepCount: 3, new: true }; },\n        userProfile: function($q, $route, dwAlerts, centerService, userProfileService, state, routeHelper) {\n          const selfReg = $route.current.params['self-registration'] && $route.current.params['self-registration'] !== 'false';\n          if (selfReg) {\n            state.setPath('/member-sign-up', true); // Redirect to new route\n            state.setParam('self-registration');\n            return $q.reject();\n          }\n          return routeHelper.auth().then(function() {\n            return centerService.get(state.getCurrentCenterId()).then(function(center) {\n              return userProfileService.new(center, 'member', 'register')\n                .catch(err => dwAlerts.error(err, 'Failed to load new member profile template.'));\n            });\n          });\n        },\n        center: function(state, centerService) {\n          return state.getCurrentCenterId() ? centerService.get(state.getCurrentCenterId()) : {};\n        },\n        lazyKisi: 'lazyLoadKisi',\n        lazyEzeep: 'lazyLoadEzeep',\n      }\n    });\n\n    $routeProvider.when('/new-user', {\n      template: '<div ng-include=\"\\'members/user-profile/user-profile.tpl.html\\'\" ff-bulk-read-only></div>',\n      controller: 'RegisterUserCtrl as vm',\n      label: 'New User',\n      routeBranch: 'new-user',\n      translations: ['user-profile'],\n      resolve: {\n        reg: () => { return { member: false, selfRegistration: false, step: 1, stepCount: 2, new: true }; },\n        userProfile: function(dwAlerts, centerService, userProfileService, state, routeHelper) {\n          return routeHelper.auth().then(function() {\n            return centerService.get(state.getCurrentCenterId()).then(function(center) {\n              return userProfileService.new(center, 'nonMember', 'register')\n                .catch(err => dwAlerts.error(err, 'Failed to load new member profile template.'));\n            });\n          });\n        },\n        center: function(state, centerService) {\n          return state.getCurrentCenterId() ? centerService.get(state.getCurrentCenterId()) : {};\n        },\n        lazyEzeep: 'lazyLoadEzeep',\n      }\n    });\n  })\n\n  .controller('RegisterUserCtrl', function($scope, $timeout, $translate, $filter, $injector, helper, state,\n                                           dwAlerts, userProfile, reg, center, userProfileService,\n                                           centerService, setupService, UserField) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant(\n      reg.member ? 'USER_PROFILE.NEW_MEMBER.PAGE_TITLE' : 'USER_PROFILE.NEW_NON_MEMBER.PAGE_TITLE'\n    ));\n\n    vm.reg = reg;\n    vm.userProfile = userProfile;\n    vm.center = center;\n    vm.schema = userProfile.schema;\n\n    if (reg && !reg.member) { // register non-member by admin\n      vm.schema.customFields = false; // because backend has it true for non-members\n      if ($injector.has('ezeepGroupDirective')) {\n        vm.schema.membership = vm.schema.membership || { membershipStatus: false, attachedReservationUnit: false };\n      }\n    }\n\n    if (vm.schema.customFields || vm.schema.shareable) {\n      UserField.query()\n        .catch(err => dwAlerts.error(err, 'Failed to query user profile fields.'))\n        .then(fields => {\n          fields.forEach(field => { field.value = null; });\n          vm.customFields = fields.filter(field => field.section === 'customFields');\n          // vm.shareable = fields.filter(field => field.section === 'shareable');\n        });\n    }\n\n    // Auto-generate login/password for non-member registration by coordinator\n    if (vm.reg && !vm.reg.member) {\n      vm.userProfile.password = '123456';\n      vm.userProfile.passwordConfirmation = '123456';\n\n      // Auto-generate login from last name for non-member registration by coordinator\n      $scope.$watch('vm.userProfile.lastName', val => {\n        vm.userProfile.login = (val || '').toLowerCase().replace(/\\W/g, '') + '-' + Date.now();\n      });\n    }\n\n    /**\n     * Next button handler\n     */\n    vm.next = function() {\n      if (helper.pointFirstInvalid('#userProfile')) return;\n\n      return userProfileService.registerNewUser(state.getCurrentCenterId(), vm.userProfile, undefined, vm.customFields)\n        .then(() => { if (vm.kisiSave) return vm.kisiSave(); })\n        .then(() => { if (vm.ezeepSave) return vm.ezeepSave(); })\n        .then(function() {\n          state.setPath(state.getPath() + '/' + vm.userProfile.id, true); // Replace current state with Profile Edit to make Back button work\n          state.setParam('productId', (vm.userProfile.membershipProduct || {}).id);\n          state.setParam('membershipStartDate', $filter('date')(vm.userProfile.membershipStartDate, 'yyyy-MM-dd'));\n          state.setCurrentUserId(vm.userProfile.id);\n\n          // TODO: if allowed by schema\n          state.setParam('attachedReservationUnitId', vm.userProfile.attachedReservationUnit && vm.userProfile.attachedReservationUnit.id);\n\n          return $timeout(function() {\n            return state.setPath(state.getPath() + '/membership/billing-profile'); // Navigate Billing Profile on next digest as current digest replaces history state\n          });\n        });\n    };\n\n    /**\n     * Bind test user data generator\n     */\n    userProfileService.bindTestUserGenerator($scope, vm.userProfile, vm.reg);\n  });\n","/**\n * upAccessCodes directive - editable access codes list in user profile\n */\nangular.module('deskworks.upAccessCodes', [])\n\n  .directive('upAccessCodes', function() { 'use strict';\n    const templateUrl = 'members/user-profile/sections/up-access-codes.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upAccessCodesCtrl as $ctrl',\n      bindToController: {\n        user: '<userProfile',\n        save: '=',\n      },\n    };\n  })\n\n  .controller('upAccessCodesCtrl', function($scope, $q, $filter, $timeout, state, helper, systemService) { 'use strict';\n    const $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = function() {\n      $ctrl.save = save;\n\n      $scope.$watch('ffBlock.editMode', val => {\n        if (val) $ctrl.rollback = angular.copy($ctrl.user.accessCards);\n      });\n\n      $scope.$on('ffControl::EditCancel', () => {\n        if ($scope.ffBlock.editMode) {\n          $ctrl.user.accessCards = $ctrl.rollback || $ctrl.user.accessCards;\n          $ctrl.rollback = null;\n        }\n      });\n    };\n\n    /**\n     * Add button handler.\n     */\n    $ctrl.add = function() {\n      if (!$scope.ffBlock.editMode) {\n        $scope.$emit('ffBlock::EditStart');\n      }\n      systemService.getAccessCard(state.getCurrentCenterId(), 'new')\n        .then(result => {\n          $timeout(() => $ctrl.user.accessCards.push(result));\n        });\n    };\n\n    /**\n     * Save access cards handler\n     */\n    function save() {\n      const promises = [];\n\n      // Iterate through new access cards to find new/changed\n      angular.forEach($ctrl.user.accessCards, card => {\n        const cardInit = helper.find($ctrl.rollback, card.id);\n        if (!cardInit || cardInit.number !== card.number) { // new or changed\n          const data = {\n            number: card.number,\n            userId: $ctrl.user.userId || $ctrl.user.id\n          };\n          if (!card.id || card.id === 'new') {\n            promises.push(systemService.createAccessCard(state.getCurrentCenterId(), data)\n              .then(result => { card.id = result.id; })\n            );\n          } else {\n            promises.push(systemService.updateAccessCard(state.getCurrentCenterId(), card.id, data));\n          }\n        }\n      });\n\n      // Iterate through access card backup to find deleted\n      angular.forEach($ctrl.rollback, cardInit => {\n        const card = helper.findByKeyValue($ctrl.user.accessCards, 'id', cardInit.id);\n        if (!card) { // deleted\n          promises.push(systemService.removeAccessCard(state.getCurrentCenterId(), cardInit.id));\n        }\n      });\n\n      return $q.all(promises);\n    }\n\n    /**\n     * Delete button handler.\n     */\n    $ctrl.delete = function(card) {\n      var idx = $ctrl.user.accessCards.indexOf(card);\n      if (idx >= 0) {\n        $ctrl.user.accessCards.splice(idx, 1);\n        $scope.ffBlockForm.$setDirty();\n      }\n    };\n  });\n","// Module\nvar code = \"<div class=\\\"ff-grid gutter-h-half\\\" style=\\\"justify-content:flex-start;align-items:center\\\"> <ff-row flex=\\\"0 0 110px\\\" class=\\\"ff-no-frame\\\" ng-repeat=\\\"card in $ctrl.user.accessCards\\\" id=\\\"{{'upAccessCard-' + card.id}}\\\"> <ff-text flex=\\\"auto\\\" name=\\\"accessCode\\\" ff-model=\\\"card.number\\\" style=\\\"margin-bottom:-1px\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'USER_PROFILE.LOGIN_INFO.ACCESS_CODE' | translate}}\\\"></ff-text> <ff-btn flex=\\\"none\\\" style=\\\"z-index:3\\\" sense=\\\"delete\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.delete(card)\\\" ng-show=\\\"ffBlock.editMode\\\" title=\\\"{{'USER_PROFILE.LOGIN_INFO.DELETE_ACCESS_CODE' | translate}}\\\"></ff-btn> </ff-row> <ff-btn flex=\\\"none\\\" style=\\\"margin:2.5px 0 2.5px auto\\\" sense=\\\"new\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.add()\\\" title=\\\"{{'USER_PROFILE.LOGIN_INFO.ADD_ACCESS_CODE' | translate}}\\\"></ff-btn> </div> \";\n// Exports\nmodule.exports = code;","import dwAddressDirective from 'shared/dw-controls/dw-address/dw-address.directive';\n\n/**\n * upAddresses directive - 'Addresses' section of user profile\n */\nexport default angular.module('deskworks.upAddresses', [\n  'deskworks.helper',\n  'deskworks.state',\n  'deskworks.userProfile.service',\n  dwAddressDirective.name,\n])\n\n  .directive('upAddresses', function() {\n    const templateUrl = 'members/user-profile/sections/up-addresses.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upAddressesCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n        center: '<',\n        single: '<',\n      },\n    };\n  })\n\n  .controller('upAddressesCtrl', function($scope, $q, $window, $translate, dwAlerts, state, helper, userProfileService,\n                                          optsAddressType, optsCountry, optsState) {\n    const $ctrl = this;\n\n    $ctrl.types = optsAddressType;\n    $ctrl.countries = optsCountry;\n    $ctrl.states = optsState;\n\n    $ctrl.new = userProfileService.address.new;\n    $ctrl.isNew = userProfileService.address.isNew;\n\n    /**\n     * Counts existing (not new) addresses.\n     * Necessary to hide Remove button because at least one address is required.\n     */\n    $ctrl.countExisting = function() {\n      return $ctrl.user.addresses.reduce((prev, curr) => helper.isUid(curr.id) ? prev : prev + 1, 0);\n    };\n\n    /**\n     * Save button handler.\n     */\n    $ctrl.save = function(address) {\n      return userProfileService.address.save(state.getCurrentCenterId(), $ctrl.user.id, address)\n        .catch(err => dwAlerts.error(err, 'Failed to save address.'));\n    };\n\n    /**\n     * Delete button handler.\n     */\n    $ctrl.delete = function(address) {\n      if (userProfileService.address.isNew(address)) return $q.when();\n\n      if ($window.confirm($translate.instant('USER_PROFILE.ADDRESSES.CONFIRM_DELETE'))) {\n        return userProfileService.address.delete(state.getCurrentCenterId(), $ctrl.user.id, address)\n          .catch(err => dwAlerts.error(err, 'Failed to delete address.'));\n      }\n      return $q.reject();\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"upAddresses\\\" ng-if=\\\"$ctrl.schema.addresses\\\" class=\\\"ff-grid gutter-v gutter-h\\\" ff-section=\\\"address in $ctrl.user.addresses\\\" ff-section-new=\\\"$ctrl.new($ctrl.center.country.id, $ctrl.center.state.id || $ctrl.center.state)\\\"> <ff-panel ng-if=\\\"!$ctrl.user.addresses.length\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.ADDRESSES\\\"></span></ff-panel-header> <span translate=\\\"USER_PROFILE.ADDRESSES.EMPTY\\\"></span> </ff-panel> <ff-panel flex=\\\"{{ $ctrl.single ? null : {md: '0 0 50%'} }}\\\" id=\\\"{{'upAddress-' + address.id}}\\\" ff-block ff-block-save=\\\"$ctrl.save(address)\\\" ff-block-delete=\\\"$ctrl.delete(address)\\\" ff-block-edit-default=\\\"$ctrl.isNew(address)\\\" ff-block-is-new=\\\"$ctrl.isNew(address)\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.ADDRESS\\\"></span></ff-panel-header> <fieldset dw-address=\\\"address\\\" dw-address-type=\\\"true\\\"></fieldset> <ff-btn-group class=\\\"ff-block-buttons\\\" ng-if=\\\"!$ctrl.schema.addresses.$readOnly\\\"> <ff-btn ff-btn-block-edit ng-if=\\\"!$ctrl.reg.new\\\"></ff-btn> <ff-btn ff-btn-block-delete ng-if=\\\"($ctrl.isNew(address) ? $ctrl.user.addresses.length : $ctrl.countExisting()) > 1\\\" ng-hide=\\\"ffBlock.editMode && !$ctrl.reg.new\\\"></ff-btn> <ff-btn ff-btn-block-save ng-if=\\\"!$ctrl.reg.new\\\"></ff-btn> <ff-btn ff-btn-block-cancel ng-if=\\\"!$ctrl.reg.new\\\"></ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=\\\"ff-btn-full\\\" ng-if=\\\"!$ctrl.schema.addresses.$readOnly && !$ctrl.single\\\"> <ff-btn ff-btn-section-new> <span translate=\\\"GLOBAL.BTN_NEW\\\"></span> <span translate=\\\"USER_PROFILE.ADDRESS\\\"></span> </ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","import dwModal from 'shared/dw-modal/dw-modal.service';\nimport dwEmailDirective from 'shared/dw-controls/dw-email.directive';\nimport dwLoginDirective from 'shared/dw-controls/dw-login.directive';\nimport dwPasswordDirective from 'shared/dw-controls/dw-password.directive';\nimport dwPhoneDirective from 'shared/dw-controls/dw-phone.directive';\nimport dwSearchUserDirective from 'shared/dw-controls/dw-search-user.directive';\n\n/**\n * upCoMembers directive - 'Co-Members' section of user profile\n */\nexport default angular.module('deskworks.upCoMembers', [\n  'deskworks.helper',\n  'deskworks.state',\n  'deskworks.userProfile.service',\n  dwModal.name,\n  dwEmailDirective.name,\n  dwLoginDirective.name,\n  dwPasswordDirective.name,\n  dwPhoneDirective.name,\n  dwSearchUserDirective.name,\n])\n\n  .directive('upCoMembers', function() {\n    const templateUrl = 'members/user-profile/sections/up-co-members.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upCoMembersCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n      },\n    };\n  })\n\n  .controller('upCoMembersCtrl', function($scope, $q, dwAlerts, dwModal, helper, state, userProfileService) {\n    const $ctrl = this;\n\n    $ctrl.exUserCollapsed = true; // collapse quick user search by default\n    $ctrl.new = userProfileService.coMember.new;\n    $ctrl.isNew = userProfileService.coMember.isNew;\n    $ctrl.makeCoMemberInactive = true;\n\n    /**\n     * Save co-member\n     */\n    $ctrl.save = function(coMember) {\n      return userProfileService.coMember.save(state.getCurrentCenterId(), $ctrl.user.id, coMember)\n        .catch(err => dwAlerts.error(err, 'Failed to save co-member.'))\n        .then(() => coMember.saveAccessCards ? coMember.saveAccessCards().catch(err => dwAlerts.error(err, 'Failed to save access cards.')) : null);\n    };\n\n    /**\n     * Delete co-member\n     */\n    $ctrl.delete = function(coMember) {\n      return dwModal.show({\n        scope: $scope,\n        templateUrl: 'DeleteCoMemberTpl',\n        controller: ['$scope', 'close', function($scope, close) {\n          $scope.close = close;\n        }],\n      })\n        .then(modal => {\n          modal.element[0].querySelector('button[type=submit]').focus();\n          return modal.close.then(result => { if (!result) throw 'modal cancel'; });\n        })\n        .then(() => {\n          return userProfileService.coMember.delete(state.getCurrentCenterId(), $ctrl.user.id, coMember, $ctrl.makeCoMemberInactive)\n            .catch(err => dwAlerts.error(err, 'Failed to delete co-member.'));\n        });\n    };\n\n    /**\n     * 'Adding existing member as new co-member' state, control should start in edit-on mode\n     */\n    $ctrl.isNewExisting = function(coMember) {\n      return (coMember.userId || coMember.existingUserId) && helper.isUid(coMember.id);\n    };\n\n    /**\n     * Add existing member as a new co-member after user search\n     */\n    $ctrl.newExisting = function(quickUser) {\n      return userProfileService.get(state.getCurrentCenterId(), quickUser.id)\n        .catch(err => dwAlerts.error(err, 'Failed to get user profile.'))\n        .then(result => {\n          $ctrl.user.coMembers.push(userProfileService.coMember.convertUserToCoMember(result));\n          delete $ctrl.quickUser;\n        });\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"upCoMembers\\\" ng-if=\\\"$ctrl.schema.coMembers\\\" class=\\\"ff-grid\\\" ff-section=\\\"coMember in $ctrl.user.coMembers\\\" ff-section-new=\\\"$ctrl.new()\\\"> <ff-panel ng-if=\\\"!$ctrl.user.coMembers.length\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.CO_MEMBERS.HEADER\\\"></span></ff-panel-header> <span translate=\\\"USER_PROFILE.CO_MEMBERS.EMPTY\\\"></span> </ff-panel> <div ng-if=\\\"$ctrl.user.coMembers.length\\\"> <div class=\\\"gutter-v\\\"> <ff-panel ff-block ff-block-save=\\\"$ctrl.save(coMember)\\\" ff-block-delete=\\\"$ctrl.delete(coMember)\\\" ff-block-edit-default=\\\"$ctrl.isNew(coMember)\\\" ff-block-dirty-default=\\\"$ctrl.isNewExisting(coMember)\\\" ff-block-is-new=\\\"$ctrl.isNew(coMember)\\\" id=\\\"{{'upCoMember-' + coMember.id}}\\\"> <ff-panel-header><span translate=\\\"GLOBAL.CO_MEMBER\\\"></span></ff-panel-header> <div class=\\\"ff-grid gutter-h\\\"> <ff-col flex=\\\"{md: '0 0 50%'}\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.PERSONAL_INFO.FULL_NAME\\\"></span></ff-label> <ff-text name=\\\"fullName\\\" ff-model=\\\"coMember.fullName\\\" placeholder=\\\"John Doe\\\" ff-validate-alert=\\\"{{'USER_PROFILE.PERSONAL_INFO.FULL_NAME' | translate}}\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"GLOBAL.EMAIL\\\"></span></ff-label> <ff-email name=\\\"email\\\" ff-model=\\\"coMember.email\\\" dw-email placeholder=\\\"jdoe@mail.com\\\"></ff-email> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.PHONE\\\"></span></ff-label> <ff-text name=\\\"phone\\\" ff-model=\\\"coMember.phone\\\" dw-phone placeholder=\\\"888-379-2865\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"GLOBAL.LOGIN\\\"></span></ff-label> <ff-login name=\\\"login\\\" ff-model=\\\"coMember.login\\\" dw-login placeholder=\\\"jdoe\\\"></ff-login> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"GLOBAL.PASSWORD\\\"></span></ff-label> <ff-password name=\\\"password\\\" ff-model=\\\"coMember.password\\\" dw-password ff-not-contain=\\\"[coMember.login, coMember.login.split('').reverse().join(''), coMember.fullName]\\\" ff-validate-alert='{ \\\"notContain\\\": \\\"{{&#39;GLOBAL.PASSWORD.NOT_CONTAIN&#39; | translate}}\\\" }'></ff-password> </label> <ff-row ng-if=\\\"state.isLoggedAdmin()\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.LOGIN_INFO.ACCESS_CODES\\\"></span></ff-label> <ff-static> <up-access-codes flex=\\\"auto\\\" user-profile=\\\"coMember\\\" save=\\\"coMember.saveAccessCards\\\"></up-access-codes> </ff-static> </ff-row> </ff-col> <ff-col flex=\\\"{md: '0 0 50%'}\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 180px\\\"><span translate=\\\"USER_PROFILE.CO_MEMBERS.CAN_MAKE_RESERVATIONS\\\"></span></ff-label> <ff-static> <ff-checkbox name=\\\"canMakeReservations\\\" ff-model=\\\"coMember.canMakeReservations\\\"></ff-checkbox> </ff-static> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 180px\\\"><span translate=\\\"USER_PROFILE.CO_MEMBERS.SEES_ACCOUNTING_INFO\\\"></span></ff-label> <ff-static> <ff-checkbox name=\\\"canSeeAccountingInfo\\\" ff-model=\\\"coMember.canSeeAccountingInfo\\\"></ff-checkbox> </ff-static> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 180px\\\"><span translate=\\\"USER_PROFILE.CO_MEMBERS.GETS_CENTER_NOTICES\\\"></span></ff-label> <ff-static> <ff-checkbox name=\\\"getCenterNotices\\\" ff-model=\\\"coMember.getCenterNotices\\\"></ff-checkbox> </ff-static> </label> <ff-row> <ff-textarea name=\\\"notes\\\" ff-model=\\\"coMember.notes\\\" rowspan=\\\"state.isLoggedAdmin() ? 3 : 2\\\" placeholder=\\\"{{'USER_PROFILE.CO_MEMBERS.NOTES' | translate}}\\\" title=\\\"{{'USER_PROFILE.CO_MEMBERS.NOTES' | translate}}\\\"></ff-textarea> </ff-row> </ff-col> </div> <ff-btn-group class=\\\"ff-block-buttons\\\" ng-if=\\\"!$ctrl.schema.coMembers.$readOnly\\\"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-delete></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> </div> </div> <ff-btn-group class=\\\"ff-section-buttons\\\" style=\\\"margin-bottom:0\\\" ng-if=\\\"!$ctrl.schema.coMembers.$readOnly\\\"> <ff-btn ff-btn-section-new> <span translate=\\\"USER_PROFILE.CO_MEMBERS.BTN_NEW\\\"></span> </ff-btn> <ff-btn sense=\\\"collapseBtnPriv\\\" size=\\\"sm\\\" ff-click=\\\"$ctrl.exUserCollapsed = !$ctrl.exUserCollapsed\\\" ng-class=\\\"{ collapsed: $ctrl.exUserCollapsed }\\\" ng-if=\\\"state.isLoggedAdmin()\\\"> <span translate=\\\"USER_PROFILE.CO_MEMBERS.BTN_ADD\\\"></span> </ff-btn> </ff-btn-group> <div flex=\\\"{md: '0 0 50%'}\\\" style=\\\"margin-left:auto;margin-bottom:0\\\" ng-collapse=\\\"$ctrl.exUserCollapsed\\\" ng-if=\\\"state.isLoggedAdmin()\\\"> <ff-panel style=\\\"margin-top:1.5rem\\\"> <form name=\\\"formNewExisting\\\" class=\\\"ff-row\\\"> <label flex=\\\"1 1 auto\\\"> <ff-search flex=\\\"1 1 1%\\\" ng-model=\\\"$ctrl.quickUser\\\" dw-search-user></ff-search> </label> <ff-btn-group flex=\\\"0 0 auto\\\" style=\\\"z-index:3\\\"> <ff-btn type=\\\"submit\\\" sense=\\\"add\\\" size=\\\"sm\\\" ff-disabled=\\\"!$ctrl.quickUser\\\" ff-click=\\\"$ctrl.newExisting($ctrl.quickUser)\\\">Add</ff-btn> </ff-btn-group> </form> </ff-panel> </div> </div> <script type=\\\"text/ng-template\\\" id=\\\"DeleteCoMemberTpl\\\"> <div class=\\\"dw-modal\\\">\\n    <div class=\\\"dw-modal-fade\\\" ng-click=\\\"close()\\\"></div>\\n    <form class=\\\"dw-modal-dialog our-member-modal\\\" novalidate>\\n      <div class=\\\"dw-modal-scroll\\\">\\n        <ff-header><span translate=\\\"USER_PROFILE.CO_MEMBERS.CONFIRM_DELETE\\\"></span></ff-header>\\n        <label class=\\\"ff-row\\\">\\n          <ff-checkbox name=\\\"makeCoMemberInactive\\\" ff-model=\\\"$ctrl.makeCoMemberInactive\\\">\\n            <span translate=\\\"USER_PROFILE.CO_MEMBERS.MAKE_INACTIVE\\\"></span>\\n          </ff-checkbox>\\n        </label>\\n        <ff-btn-group class=\\\"ff-center ff-tmargin\\\" style=\\\"padding: 0 5px 5px 5px\\\">\\n          <ff-btn sense=\\\"cancel\\\" ff-click=\\\"close(false)\\\">Cancel</ff-btn>\\n          <ff-btn type=\\\"submit\\\" sense=\\\"ok\\\" ff-click=\\\"close(true)\\\">OK</ff-btn>\\n        </ff-btn-group>\\n      </div>\\n    </form>\\n  </div> </script> \";\n// Exports\nmodule.exports = code;","/**\n * upComments directive - 'Comments' section of user profile\n */\nangular.module('deskworks.upComments', [\n  'deskworks.userProfile.service',\n])\n\n  .directive('upComments', function() { 'use strict';\n    const templateUrl = 'members/user-profile/sections/up-comments.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upCommentsCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n      },\n    };\n  })\n\n  .controller('upCommentsCtrl', function($scope, dwAlerts, state, userProfileService) { 'use strict';\n    const $ctrl = this;\n\n    /**\n     * Save button handler\n     */\n    $ctrl.save = function() {\n      return userProfileService.updateRaw(state.getCurrentCenterId(), $ctrl.user, { comments: $ctrl.user.comments })\n        .catch(err => dwAlerts.error(err, 'Failed to save comments.'));\n    };\n  });\n","// Module\nvar code = \"<ff-panel id=\\\"upComments\\\" ng-if=\\\"$ctrl.schema.comments\\\" class=\\\"ff-no-frame\\\" ff-block ff-block-save=\\\"$ctrl.save()\\\" ff-block-edit-default=\\\"$ctrl.user.isNew()\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.COMMENTS.HEADER\\\"></span></ff-panel-header> <ff-row> <ff-textarea name=\\\"comments\\\" ff-model=\\\"$ctrl.user.comments\\\" rowspan=\\\"5\\\"></ff-textarea> </ff-row> <ff-btn-group class=\\\"ff-section-buttons\\\" ng-if=\\\"!$ctrl.schema.comments.$readOnly && !$ctrl.reg.new\\\"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> \";\n// Exports\nmodule.exports = code;","import fdFieldDirective from 'shared/form-design/fd-field.directive';\n\n/**\n * upCustomFields directive - 'Custom Fields' section of user profile\n */\nexport default angular.module('deskworks.upCustomFields', [\n  'deskworks.UserProfileFields',\n  fdFieldDirective.name,\n])\n\n  .directive('upCustomFields', function() {\n    const templateUrl = 'members/user-profile/sections/up-custom-fields.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upCustomFieldsCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n        fields: '<',\n      },\n    };\n  })\n\n  .controller('upCustomFieldsCtrl', function($scope, dwAlerts, state, UserProfileFields) {\n    const $ctrl = this;\n\n    // $ctrl.$onInit = function() {\n    // };\n\n    /**\n     * Save button handler\n     */\n    $ctrl.save = function() {\n      return UserProfileFields.save(state.getCurrentCenterId(), $ctrl.user.id, $ctrl.fields)\n        .catch(err => dwAlerts.error(err, 'Failed to save user profile fields.'));\n    };\n  });\n","// Module\nvar code = \"<ff-panel id=\\\"upCustomFields\\\" ng-if=\\\"$ctrl.schema.customFields && $ctrl.fields.length\\\" ff-block ff-block-save=\\\"$ctrl.save()\\\" ff-block-edit-default=\\\"$ctrl.user.isNew()\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.CUSTOM_FIELDS.HEADER\\\"></span></ff-panel-header> <ff-col ff-dim=\\\"!$ctrl.fields\\\"> <fd-field field=\\\"field\\\" ng-repeat=\\\"field in $ctrl.fields\\\"></fd-field> </ff-col> <ff-btn-group class=\\\"ff-section-buttons\\\" ng-if=\\\"!$ctrl.schema.customFields.$readOnly && !$ctrl.reg.new\\\"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> \";\n// Exports\nmodule.exports = code;","/**\n * upDocuments directive - 'Contracts / Documents' section of user profile\n */\nangular.module('deskworks.upDocuments', [\n  'deskworks.helper',\n  'deskworks.state',\n  'deskworks.userProfile.service',\n])\n\n  .directive('upDocuments', function() { 'use strict';\n    const templateUrl = 'members/user-profile/sections/up-documents.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upDocumentsCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n      },\n    };\n  })\n\n  .controller('upDocumentsCtrl', function($scope, $element, $q, $translate, dwAlerts, helper, state,\n                                          userProfileService, session) { 'use strict';\n    const $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = function() {\n      if (session.isAdmin()) $ctrl.showUserAccess = true;\n      // Clone and backup documents on edit start event\n      $scope.$on('ffBlock::EditStart', () => { $ctrl.docsRollback = angular.copy($ctrl.user.documents); });\n      // Rollback documents on edit cancel event\n      $scope.$on('ffBlock::EditCancel', () => { $ctrl.user.documents = $ctrl.docsRollback; });\n    };\n\n    /**\n     * Add button handler.\n     */\n    $ctrl.add = function($files, $invalidFiles) {\n      if ($invalidFiles && $invalidFiles.length > 0) {\n        return dwAlerts.error($translate.instant('USER_PROFILE.DOCUMENTS.INVALID_FORMAT'));\n      }\n\n      if ($files && $files.length > 0) {\n        if (!$ctrl.editMode) {\n          $scope.$broadcast('ffBlock::EditStart');\n        }\n\n        $files.forEach(file => $ctrl.user.documents.push(userProfileService.document.new(file)));\n\n        const ffBlockForm = angular.element($element[0].querySelector('form[name=\"ffBlockForm\"]')).scope().ffBlockForm;\n        ffBlockForm.$setDirty();\n      }\n    };\n\n    /**\n     * Save button handler.\n     */\n    $ctrl.save = function() {\n      var promises = [];\n\n      // Iterate through new documents to find new/changed\n      $ctrl.user.documents.forEach(doc => {\n        const docInit = helper.find($ctrl.docsRollback, doc.id);\n        if (!docInit || docInit.name !== doc.name || docInit.userAccess !== doc.userAccess) { // new or changed\n          promises.push(userProfileService.document.save(state.getCurrentCenterId(), $ctrl.user.id, doc)\n            .catch(err => dwAlerts.error(err, 'Failed to save document.')));\n        }\n      });\n\n      // Iterate through documents backup to find deleted\n      $ctrl.docsRollback.forEach(docInit => {\n        const doc = helper.find($ctrl.user.documents, docInit.id);\n        if (!doc) { // deleted\n          promises.push(userProfileService.document.delete(state.getCurrentCenterId(), $ctrl.user.id, docInit)\n            .catch(err => dwAlerts.error(err, 'Failed to delete document.')));\n        }\n      });\n\n      return $q.all(promises);\n    };\n\n    /**\n     * Delete button handler.\n     */\n    $ctrl.delete = function(doc) {\n      const idx = helper.findIndex($ctrl.user.documents, doc.id);\n      if (idx >= 0) {\n        $ctrl.user.documents.splice(idx, 1);\n        const ffBlockForm = angular.element($element[0].querySelector('form[name=\"ffBlockForm\"]')).scope().ffBlockForm;\n        ffBlockForm.$setDirty();\n      }\n    };\n  });\n","// Module\nvar code = \"<ff-panel id=\\\"upDocuments\\\" ng-if=\\\"$ctrl.schema.documents\\\" ff-block ff-block-save=\\\"$ctrl.save()\\\" ff-block-edit=\\\"$ctrl.editMode\\\" ff-block-edit-default=\\\"$ctrl.user.isNew()\\\" ngf-drop=\\\"$ctrl.add($files, $invalidFiles)\\\" ngf-pattern=\\\"'application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document'\\\" ngf-multiple=\\\"true\\\" ngf-drag-over-class=\\\"dragover\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.DOCUMENTS.HEADER\\\"></span></ff-panel-header> <div class=\\\"ff-grid\\\"> <ff-row ng-repeat=\\\"doc in $ctrl.user.documents\\\" id=\\\"{{'upDocument-' + doc.id}}\\\"> <ff-text name=\\\"document\\\" ff-model=\\\"doc.name\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"Document Name\\\" ff-static-url=\\\"doc.document\\\"></ff-text> <ff-static flex=\\\"0 0 36px\\\" ng-if=\\\"$ctrl.showUserAccess && doc.userAccess && !$ctrl.editMode\\\" class=\\\"ff-center\\\" title=\\\"{{'USER_PROFILE.DOCUMENTS.VISIBLE_TO_USER' | translate}}\\\"> <ff-icon sense=\\\"user\\\" class=\\\"text-brand\\\"></ff-icon> </ff-static> <ff-static flex=\\\"0 0 36px\\\" ng-if=\\\"$ctrl.showUserAccess && $ctrl.editMode\\\" class=\\\"ff-center\\\" title=\\\"{{'USER_PROFILE.DOCUMENTS.VISIBLE_TO_USER' | translate}}\\\"> <ff-checkbox ff-model=\\\"doc.userAccess\\\"></ff-checkbox> </ff-static> <ff-btn flex=\\\"none\\\" style=\\\"z-index:3\\\" sense=\\\"delete\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.delete(doc)\\\" ng-if=\\\"$ctrl.editMode\\\" title=\\\"{{'USER_PROFILE.DOCUMENTS.BTN_DELETE.HINT' | translate}}\\\"></ff-btn> </ff-row> </div> <ff-btn-group class=\\\"ff-section-buttons\\\" ng-if=\\\"!$ctrl.schema.documents.$readOnly\\\"> <ff-btn ff-btn-block-edit ng-if=\\\"!$ctrl.reg.new\\\"></ff-btn> <ff-btn ff-btn-block-save ng-if=\\\"!$ctrl.reg.new\\\"></ff-btn> <ff-btn ff-btn-block-cancel ng-if=\\\"!$ctrl.reg.new\\\"></ff-btn> <ff-btn sense=\\\"new\\\" size=\\\"sm\\\" ngf-select=\\\"$ctrl.add($files, $invalidFiles)\\\" ngf-pattern=\\\"'application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document'\\\" accept=\\\"application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\\\" ngf-multiple=\\\"true\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> </ff-panel> \";\n// Exports\nmodule.exports = code;","/**\n * upLeadSource directive - 'Lead Source' section of user profile\n */\nangular.module('deskworks.upLeadSource', [\n  'deskworks.userProfile.service',\n])\n\n  .directive('upLeadSource', function() { 'use strict';\n    const templateUrl = 'members/user-profile/sections/up-lead-source.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upLeadSourceCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n      },\n    };\n  })\n\n  .controller('upLeadSourceCtrl', function($scope, dwAlerts, state, userProfileService) { 'use strict';\n    const $ctrl = this;\n\n    /**\n     * Save button handler\n     */\n    $ctrl.save = function() {\n      return userProfileService.updateRaw(state.getCurrentCenterId(), $ctrl.user, {\n        leadSourceId: $ctrl.user.leadSource.id\n      })\n        .catch(err => dwAlerts.error(err, 'Failed to save lead source.'));\n    };\n  });\n","// Module\nvar code = \"<ff-panel id=\\\"upLeadSource\\\" ng-if=\\\"$ctrl.schema.leadSource\\\" ff-block ff-block-save=\\\"$ctrl.save()\\\" ff-block-edit-default=\\\"$ctrl.user.isNew()\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.LEAD_SOURCE.HEADER\\\" ng-class=\\\"{ req: ffBlock.editMode }\\\"></span></ff-panel-header> <label class=\\\"ff-row\\\"> <ff-select name=\\\"leadSource\\\" ff-model=\\\"$ctrl.user.leadSource\\\" ff-options=\\\"opt.name for opt in $ctrl.user.options.leadSources\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'USER_PROFILE.LEAD_SOURCE.SOURCE' | translate}}\\\" aria-label=\\\"{{'USER_PROFILE.LEAD_SOURCE.SOURCE' | translate}}\\\"></ff-select> </label> <ff-btn-group class=\\\"ff-section-buttons\\\" ng-if=\\\"!$ctrl.schema.leadSource.$readOnly && !$ctrl.reg.new\\\"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> \";\n// Exports\nmodule.exports = code;","import messageBoardUserSettingsDirective from 'shared/message-board-user-settings/message-board-user-settings.directive.js';\nimport dwLoginDirective from 'shared/dw-controls/dw-login.directive';\nimport dwPasswordDirective from 'shared/dw-controls/dw-password.directive';\n\n/**\n * userProfileLoginInfo directive - 'Login Information' section of user profile\n */\nexport default angular.module('deskworks.upLoginInfo', [\n  'deskworks.upAccessCodes',\n  messageBoardUserSettingsDirective.name,\n  dwLoginDirective.name,\n  dwPasswordDirective.name,\n])\n\n  .directive('upLoginInfo', function() {\n    const templateUrl = 'members/user-profile/sections/up-login-info.tpl.html';\n\n    return {\n      templateUrl,\n      restrict: 'E',\n      scope: true,\n      controller: 'upLoginInfoCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n        memberDirectoryUrl: '<',\n      },\n    };\n  })\n\n  .controller('upLoginInfoCtrl', function($scope, $q, dwAlerts, state, userProfileService) {\n    const $ctrl = this;\n\n    $scope.$watch('$ctrl.saveMessageBoardUserSettings', () => {\n      $ctrl.user.saveMessageBoardUserSettings = $ctrl.saveMessageBoardUserSettings; // expose in user to call in user registration\n    });\n\n    /**\n     * Save button handler\n     */\n    $ctrl.save = function() {\n      const data = {\n        login: $ctrl.user.login,\n        password: $ctrl.user.password,\n        passwordConfirmation: $ctrl.user.passwordConfirmation,\n        disableGroupMailing: $ctrl.user.disableGroupMailing,\n      };\n\n      return $q.all([\n        userProfileService.updateRaw(state.getCurrentCenterId(), $ctrl.user, data)\n          .catch(err => dwAlerts.error(err, 'Failed to save login information.')),\n        $ctrl.saveAccessCards && $ctrl.saveAccessCards()\n          .catch(err => dwAlerts.error(err, 'Failed to save access cards.')),\n        $ctrl.saveMessageBoardUserSettings && $ctrl.saveMessageBoardUserSettings()\n          .catch(err => dwAlerts.error(err, 'Failed to save message board user settings.')),\n      ]);\n    };\n  });\n","// Module\nvar code = \"<ff-panel id=\\\"upLoginInfo\\\" ng-if=\\\"$ctrl.schema.loginInfo\\\" ff-block ff-block-save=\\\"$ctrl.save()\\\" ff-block-edit-default=\\\"$ctrl.user.isNew()\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.LOGIN_INFO.HEADER\\\"></span></ff-panel-header> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 132px\\\"><span translate=\\\"GLOBAL.LOGIN\\\" ng-class=\\\"{ req: ffBlock.editMode }\\\"></span></ff-label> <ff-login name=\\\"login\\\" ff-model=\\\"$ctrl.user.login\\\" ff-required=\\\"true\\\" dw-login></ff-login> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 132px\\\"><span translate=\\\"GLOBAL.PASSWORD\\\" ng-class=\\\"{ req: ffBlock.editMode }\\\"></span></ff-label> <ff-password name=\\\"password\\\" ff-model=\\\"$ctrl.user.password\\\" ff-required=\\\"{{$ctrl.reg.new}}\\\" dw-password ff-not-contain=\\\"[$ctrl.user.login, $ctrl.user.login.split('').reverse().join(''), $ctrl.user.firstName, $ctrl.user.lastName]\\\" ff-validate-alert='{ \\\"notContain\\\": \\\"{{&#39;GLOBAL.PASSWORD.NOT_CONTAIN&#39; | translate}}\\\" }'></ff-password> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 132px\\\"> <span translate=\\\"USER_PROFILE.LOGIN_INFO.PASSWORD_CONF\\\" ng-class=\\\"{ req: ffBlock.editMode }\\\"></span> </ff-label> <ff-password name=\\\"passwordConfirmation\\\" ff-model=\\\"$ctrl.user.passwordConfirmation\\\" dw-password ff-required=\\\"{{$ctrl.reg.new}}\\\" ff-match=\\\"ffBlockForm.password.$viewValue\\\" ff-validate-alert='{ \\\"field\\\": \\\"{{&#39;USER_PROFILE.LOGIN_INFO.PASSWORD_CONF&#39; | translate}}\\\", \\\"matchField\\\": \\\"{{&#39;GLOBAL.PASSWORD&#39; | translate}}\\\" }'> </ff-password> </label> <ff-row ng-if=\\\"$ctrl.schema.accessCodes\\\"> <ff-label flex=\\\"0 1 132px\\\"><span translate=\\\"USER_PROFILE.LOGIN_INFO.ACCESS_CODES\\\"></span></ff-label> <ff-static> <up-access-codes flex=\\\"auto\\\" user-profile=\\\"$ctrl.user\\\" save=\\\"$ctrl.saveAccessCards\\\"></up-access-codes> </ff-static> </ff-row> <label class=\\\"ff-row\\\" ng-if=\\\"$ctrl.schema.loginInfo.memberDirectory !== false && $ctrl.memberDirectoryUrl\\\"> <ff-label flex=\\\"0 1 132px\\\"><span translate=\\\"USER_PROFILE.LOGIN_INFO.MEMBER_DIRECTORY\\\"></span></ff-label> <ff-static name=\\\"memberDirectory\\\"> <a ng-href=\\\"{{$ctrl.memberDirectoryUrl}}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"> <span translate=\\\"USER_PROFILE.LOGIN_INFO.MEMBER_DIRECTORY_LINK\\\"></span> </a> </ff-static> </label> <message-board-user-settings user-id=\\\"$ctrl.user.id\\\" save=\\\"$ctrl.saveMessageBoardUserSettings\\\" ng-if=\\\"$ctrl.schema.loginInfo && $ctrl.schema.loginInfo.messageBoardNotices !== false\\\"></message-board-user-settings> <ff-static ng-if=\\\"$ctrl.schema.loginInfo.disableGroupMailing !== false\\\"> <label> <ff-checkbox flex=\\\"auto\\\" ff-model=\\\"$ctrl.user.disableGroupMailing\\\"> <span translate=\\\"USER_PROFILE.LOGIN_INFO.DISABLE_GROUP_MAILING\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"USER_PROFILE.LOGIN_INFO.DISABLE_GROUP_MAILING.HINT\\\"></span></ff-hint> </ff-static> <ff-btn-group class=\\\"ff-section-buttons\\\" ng-if=\\\"!$ctrl.schema.loginInfo.$readOnly && !$ctrl.reg.new\\\"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> \";\n// Exports\nmodule.exports = code;","/**\n * upMailboxes directive - 'Mailboxes' section of user profile\n */\nangular.module('deskworks.upMailboxes', [\n  'deskworks.helper',\n  'deskworks.state',\n  'deskworks.userProfile.service',\n])\n\n  .directive('upMailboxes', function() { 'use strict';\n    const templateUrl = 'members/user-profile/sections/up-mailboxes.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upMailboxesCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n      },\n    };\n  })\n\n  .controller('upMailboxesCtrl', function($scope, $window, $q, $translate, dwAlerts, helper, state,\n                                          userProfileService, optsMailboxHandling) { 'use strict';\n    const $ctrl = this;\n\n    $ctrl.handlingOpts = optsMailboxHandling;\n    $ctrl.new = userProfileService.mailbox.new;\n    $ctrl.isNew = userProfileService.mailbox.isNew;\n\n    $ctrl.save = function(mailbox) {\n      return userProfileService.mailbox.save(state.getCurrentCenterId(), $ctrl.user.id, mailbox)\n        .catch(err => dwAlerts.error(err, 'Failed to save mailbox.'));\n    };\n\n    $ctrl.delete = function(mailbox) {\n      if ($window.confirm($translate.instant('USER_PROFILE.MAILBOXES.CONFIRM_DELETE'))) {\n        return userProfileService.mailbox.delete(state.getCurrentCenterId(), $ctrl.user.id, mailbox)\n          .catch(err => dwAlerts.error(err, 'Failed to delete mailbox.'));\n      }\n      return $q.reject();\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"upMailboxes\\\" ng-if=\\\"$ctrl.schema.mailboxes\\\" class=\\\"ff-grid\\\" ff-section=\\\"mailbox in $ctrl.user.mailboxes\\\" ff-section-new=\\\"$ctrl.new()\\\"> <ff-panel ng-if=\\\"!$ctrl.user.mailboxes.length\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.MAILBOXES.HEADER\\\"></span></ff-panel-header> <span translate=\\\"USER_PROFILE.MAILBOXES.EMPTY\\\"></span> </ff-panel> <div ng-if=\\\"$ctrl.user.mailboxes.length\\\"> <div class=\\\"gutter-v\\\"> <ff-panel id=\\\"{{'upMailbox-' + mailbox.id}}\\\" ff-block ff-block-save=\\\"$ctrl.save(mailbox)\\\" ff-block-delete=\\\"$ctrl.delete(mailbox)\\\" ff-block-edit-default=\\\"$ctrl.isNew(mailbox)\\\" ff-block-is-new=\\\"$ctrl.isNew(mailbox)\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.MAILBOX\\\"></span></ff-panel-header> <div class=\\\"ff-grid gutter-h\\\"> <ff-col flex=\\\"{md: '0 0 50%'}\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 130px\\\"><span translate=\\\"USER_PROFILE.MAILBOXES.NUMBER\\\" ng-class=\\\"{ req: ffBlock.editMode }\\\"></span></ff-label> <ff-text name=\\\"number\\\" ff-model=\\\"mailbox.number\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'USER_PROFILE.MAILBOXES.NUMBER' | translate}}\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 130px\\\"><span translate=\\\"USER_PROFILE.MAILBOXES.KEY\\\"></span></ff-label> <ff-text name=\\\"key\\\" ff-model=\\\"mailbox.key\\\" ff-validate-alert=\\\"{{'USER_PROFILE.MAILBOXES.KEY' | translate}}\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 130px\\\"><span translate=\\\"USER_PROFILE.MAILBOXES.HANDLING\\\"></span></ff-label> <ff-select name=\\\"handling\\\" ff-model=\\\"mailbox.handling\\\" ff-validate-alert=\\\"{{'USER_PROFILE.MAILBOXES.HANDLING' | translate}}\\\" ff-options=\\\"opt.name for opt in $ctrl.handlingOpts\\\"></ff-select> </label> </ff-col> <ff-col flex=\\\"{md: '0 0 50%'}\\\"> <label> <ff-row> <ff-label><span translate=\\\"USER_PROFILE.MAILBOXES.NAMES\\\"></span></ff-label> </ff-row> <ff-row> <ff-textarea name=\\\"names\\\" ff-model=\\\"mailbox.names\\\" rowspan=\\\"2\\\" placeholder=\\\"{{'USER_PROFILE.MAILBOXES.NAMES.HINT' | translate}}\\\" title=\\\"{{'USER_PROFILE.MAILBOXES.NAMES.HINT' | translate}}\\\"></ff-textarea> </ff-row> </label> </ff-col> </div> <ff-btn-group class=\\\"ff-block-buttons\\\" ng-if=\\\"!$ctrl.schema.mailboxes.$readOnly\\\"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-delete></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> </div> </div> <ff-btn-group class=\\\"ff-section-buttons\\\" ng-if=\\\"!$ctrl.schema.mailboxes.$readOnly\\\"> <ff-btn ff-btn-section-new> <span translate=\\\"GLOBAL.BTN_NEW\\\"></span> <span translate=\\\"USER_PROFILE.MAILBOX\\\"></span> </ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","import ReservationUnit from 'shared/services/inventory/reservation-unit.service';\n\n/**\n * userProfileMembership directive - 'Membership' section of user profile\n */\nexport default angular.module('deskworks.upMembership', [\n  'deskworks.helper',\n  'deskworks.state',\n  'deskworks.userProfile.service',\n  ReservationUnit.name,\n])\n\n  .directive('upMembership', function() {\n    const templateUrl = 'members/user-profile/sections/up-membership.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upMembershipCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n        kisiSave: '=',\n        doorflowSave: '=',\n        ezeepSave: '=',\n        settings: '<',\n      },\n    };\n  })\n\n  .controller('upMembershipCtrl', function($scope, $timeout, $window, $translate, $filter, $injector, $q, $route,\n                                           dwAlerts, state, helper, userProfileService, ReservationUnit,\n                                           optsMembershipStatus) {\n    const $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = function() {\n      $ctrl.kisi = $injector.has('kisiAccessGroupDirective');\n      $ctrl.doorflow = $injector.has('doorflowAccessGroupDirective');\n      $ctrl.ezeep = $injector.has('ezeepGroupDirective');\n\n      // Filter membership statuses in registration for member and non-member\n      $ctrl.membStatuses = optsMembershipStatus\n        .filter(membStatus => !$ctrl.reg || !$ctrl.reg.member && membStatus.id === 'nonMember' || $ctrl.reg.member && (membStatus.id === 'active' || membStatus.id === 'inactive'));\n\n\n      if($ctrl.schema.membership && $ctrl.schema.membership.attachedReservationUnit !== false) {\n        ReservationUnit.query(state.getCurrentCenterId())\n          .then(resUnits => {\n            resUnits.unshift({ name: $translate.instant('USER_PROFILE.MEMBERSHIP.ATTACHED_RESERVATION_UNIT.NONE') });\n            $ctrl.user.attachedReservationUnit = helper.find(resUnits, state.getParam('attachedReservationUnitId'));\n            $ctrl.reservationUnits = resUnits.filter(resUnit =>  !resUnit.attachedUserId || resUnit.id == ($ctrl.user.attachedReservationUnit && $ctrl.user.attachedReservationUnit.id));\n          })\n          .catch(err => dwAlerts.error(err, 'Failed to query Reservation Units'));\n      }\n\n      // Hide 'Make Recurring Billings Inactive' checkbox on switching edit mode on or off\n      $scope.$on('ffBlock::EditStart', () => {\n        membershipStatusOrig = $ctrl.user.membershipStatus; // Store original membership status\n        $ctrl.priceListOrig = $ctrl.user.membershipPriceList; // Store original price-list\n        delete $ctrl.user.makeRecurringBillingsInactive;\n        delete $ctrl.user.makeCoMembersInactive;\n      });\n      $scope.$on('ffBlock::EditEnd', () => {\n        delete $ctrl.user.makeRecurringBillingsInactive;\n        delete $ctrl.user.makeCoMembersInactive;\n      });\n    };\n\n    /**\n     * Save button handler\n     */\n    $ctrl.save = function() {\n      let data = {};\n\n      if ($ctrl.user.membershipStatus.id === 'active' || $ctrl.user.membershipStatus.id === 'inactive') {\n        data = {\n          membershipStatus: $ctrl.user.membershipStatus.id,\n          membershipPriceListId: $ctrl.user.membershipPriceList.id,\n          membershipProductId: ($ctrl.user.membershipProduct || {}).id,\n          makeRecurringBillingsInactive: $ctrl.user.makeRecurringBillingsInactive,\n          selfRegistrationStatus: null\n        };\n\n        if ($ctrl.user.coMembers && $ctrl.user.coMembers.length) {\n          data.makeCoMembersInactive = $ctrl.user.makeCoMembersInactive;\n        }\n      }\n\n      if ($ctrl.schema.membership && $ctrl.schema.membership.attachedReservationUnit !== false) {\n        state.setParam('attachedReservationUnitId', $ctrl.user.attachedReservationUnit && $ctrl.user.attachedReservationUnit.id);\n        state.replace();\n      }\n\n      return userProfileService.updateRaw(state.getCurrentCenterId(), $ctrl.user, data)\n        .catch(err => dwAlerts.error(err, 'Failed to save membership.'))\n        .then(() => { $ctrl.user.selfRegistrationStatus = null; })\n        .then(() => { if ($ctrl.kisiSave) return $ctrl.kisiSave(); })\n        .then(() => { if ($ctrl.doorflowSave) return $ctrl.doorflowSave(); })\n        .then(() => { if ($ctrl.ezeepSave) return $ctrl.ezeepSave(); });\n    };\n\n    /**\n     * Membership Status drop-down change handler. Shows 'Make Recurring Billings Inactive' checkbox if switched to Inactive\n     */\n    var membershipStatusOrig; // Original membership status\n    $ctrl.onChangeStatus = function() {\n      if (!$ctrl.reg && membershipStatusOrig) {\n        if ($ctrl.user.membershipStatus.id === 'inactive' && membershipStatusOrig.id === 'active') {\n          $ctrl.user.makeRecurringBillingsInactive = true;\n          $ctrl.user.makeCoMembersInactive = true;\n        } else {\n          delete $ctrl.user.makeRecurringBillingsInactive;\n          delete $ctrl.user.makeCoMembersInactive;\n        }\n      }\n    };\n\n    /**\n     * Reset self-registration status button handler\n     */\n    $ctrl.resetSelfRegistrationStatus = function() {\n      return userProfileService.updateRaw(state.getCurrentCenterId(), $ctrl.user, { selfRegistrationStatus: null })\n        .catch(err => dwAlerts.error(err, 'Failed to reset self-registration status.'))\n        .then(() => {\n          $timeout(() => { $ctrl.user.selfRegistrationStatus = null; });\n        });\n    };\n\n    /**\n     * Delete User button handler\n     */\n    $ctrl.deleteUser = function() {\n      if (!$window.confirm($translate.instant('USER_PROFILE.MEMBERSHIP.CONFIRM_DELETE_USER'))) return;\n\n      return userProfileService.delete(state.getCurrentCenterId(), $ctrl.user.id)\n        .catch(err => dwAlerts.error(err, 'Failed to delete user.'))\n        .then(() => state.setCurrentUser(null));\n    };\n\n    /**\n     * Delete GDPR button handler\n     */\n    $ctrl.deleteGdpr = function() {\n      if (!$window.confirm($translate.instant('USER_PROFILE.MEMBERSHIP.CONFIRM_DELETE_GDPR'))) return;\n\n      return userProfileService.deleteGdpr(state.getCurrentCenterId(), $ctrl.user.id)\n        .catch(err => dwAlerts.error(err, 'Failed to delete GDPR.'))\n        .then(() => ($route.reload(), $timeout(5000)));\n    };\n  });\n","// Module\nvar code = \"<ff-panel id=\\\"upMembership\\\" ng-if=\\\"$ctrl.schema.membership\\\" ff-block ff-block-save=\\\"$ctrl.save()\\\" ff-block-edit-default=\\\"$ctrl.user.isNew()\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.MEMBERSHIP.HEADER\\\"></span></ff-panel-header> <label class=\\\"ff-row\\\" ng-if=\\\"$ctrl.schema.membership.membershipStatus !== false\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.MEMBERSHIP.STATUS\\\" ng-class=\\\"{ req: ffBlock.editMode }\\\"></span></ff-label> <ff-select name=\\\"status\\\" ff-model=\\\"$ctrl.user.membershipStatus\\\" ff-options=\\\"status.name for status in $ctrl.membStatuses\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'USER_PROFILE.MEMBERSHIP.STATUS' | translate}}\\\" ff-change=\\\"$ctrl.onChangeStatus()\\\"></ff-select> </label> <label class=\\\"ff-row\\\" ng-if=\\\"vm.reg && ($ctrl.user.membershipStatus.id === 'active' || $ctrl.user.membershipStatus.id === 'inactive')\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.MEMBERSHIP.CATEGORY\\\" ng-class=\\\"{ req: ffBlock.editMode }\\\"></span></ff-label> <ff-select name=\\\"type\\\" ff-model=\\\"$ctrl.user.membershipType\\\" ff-options=\\\"type.name for type in $ctrl.user.options.membershipTypes\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'USER_PROFILE.MEMBERSHIP.CATEGORY' | translate}}\\\"></ff-select> </label> <label class=\\\"ff-row\\\" ng-if=\\\"vm.reg && ($ctrl.user.membershipStatus.id === 'active' || $ctrl.user.membershipStatus.id === 'inactive')\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.MEMBERSHIP.PLAN\\\" ng-class=\\\"{ req: ffBlock.editMode }\\\"></span></ff-label> <ff-select name=\\\"plan\\\" ff-model=\\\"$ctrl.user.membershipProduct\\\" ff-options=\\\"product.name for product in $ctrl.user.membershipType.membershipPackages\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'USER_PROFILE.MEMBERSHIP.PLAN' | translate}}\\\"></ff-select> </label> <label class=\\\"ff-row\\\" ng-if=\\\"$ctrl.user.membershipStatus.id === 'active' || $ctrl.user.membershipStatus.id === 'inactive'\\\"> <ff-label flex=\\\"0 1 116px\\\"> <span> <span translate=\\\"USER_PROFILE.MEMBERSHIP.PRICE_LIST\\\" ng-class=\\\"{ req: ffBlock.editMode }\\\"></span> <ff-hint hint-type=\\\"warning\\\" ng-if=\\\"ffBlock.editMode && !$ctrl.reg && $ctrl.priceListOrig !== $ctrl.user.membershipPriceList\\\"> <span translate=\\\"USER_PROFILE.MEMBERSHIP.PRICE_LIST.CHANGE_WARNING\\\"></span> </ff-hint> </span> </ff-label> <ff-select name=\\\"priceList\\\" ff-model=\\\"$ctrl.user.membershipPriceList\\\" ff-options=\\\"plist.name for plist in $ctrl.user.options.membershipPriceLists\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'USER_PROFILE.MEMBERSHIP.PRICE_LIST' | translate}}\\\"></ff-select> </label> <label class=\\\"ff-row\\\" ng-if=\\\"vm.reg && vm.reg.new && ($ctrl.user.membershipStatus.id === 'active' || $ctrl.user.membershipStatus.id === 'inactive')\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.MEMBERSHIP.DISCOUNT_CODE\\\"></span></ff-label> <ff-text name=\\\"discountCode\\\" ff-model=\\\"$ctrl.user.discountCode\\\" ff-validate-alert=\\\"{{'USER_PROFILE.MEMBERSHIP.DISCOUNT_CODE' | translate}}\\\"></ff-text> </label> <label class=\\\"ff-row\\\" ng-if=\\\"vm.reg && ($ctrl.user.membershipStatus.id === 'active' || $ctrl.user.membershipStatus.id === 'inactive')\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.MEMBERSHIP.START_DATE\\\" ng-class=\\\"{ req: ffBlock.editMode }\\\"></span></ff-label> <ff-date name=\\\"membershipStartDate\\\" ff-model=\\\"$ctrl.user.membershipStartDate\\\" ff-validate-alert=\\\"{{'USER_PROFILE.MEMBERSHIP.START_DATE' | translate}}\\\"></ff-date> </label> <label class=\\\"ff-row\\\" ng-if=\\\"$ctrl.schema.membership.attachedReservationUnit !== false\\\"> <ff-label flex=\\\"0 0 116px\\\"> <span translate=\\\"USER_PROFILE.MEMBERSHIP.ATTACHED_RESERVATION_UNIT\\\"></span> <ff-hint> <span translate=\\\"USER_PROFILE.MEMBERSHIP.ATTACHED_RESERVATION_UNIT.HINT\\\"></span> </ff-hint> </ff-label> <ff-select ff-model=\\\"$ctrl.user.attachedReservationUnit\\\" name=\\\"attachedReservationUnit\\\" ff-options=\\\"resUnit.name for resUnit in $ctrl.reservationUnits\\\" ff-dim=\\\"!$ctrl.reservationUnits\\\"> </ff-select> </label> <kisi-access-group user-id=\\\"$ctrl.user.id\\\" save=\\\"$ctrl.kisiSave\\\" ng-if=\\\"$ctrl.user.membershipStatus.id === 'active' || $ctrl.user.membershipStatus.id === 'inactive'\\\"></kisi-access-group> <doorflow-access-group user-id=\\\"$ctrl.user.id\\\" save=\\\"$ctrl.doorflowSave\\\" ng-if=\\\"$ctrl.user.membershipStatus.id === 'active' || $ctrl.user.membershipStatus.id === 'inactive'\\\"></doorflow-access-group> <ezeep-group user-id=\\\"$ctrl.user.id\\\" save=\\\"$ctrl.ezeepSave\\\"></ezeep-group> <label class=\\\"ff-row\\\" ng-if=\\\"$ctrl.user.makeRecurringBillingsInactive !== undefined\\\"> <ff-checkbox name=\\\"makeRecurringBillingsInactive\\\" ff-model=\\\"$ctrl.user.makeRecurringBillingsInactive\\\"> <span translate=\\\"USER_PROFILE.MEMBERSHIP.INACTIVATE_RECURRING_BILLINGS\\\"></span> </ff-checkbox> </label> <label class=\\\"ff-row\\\" ng-if=\\\"$ctrl.user.makeCoMembersInactive !== undefined && $ctrl.user.coMembers.length\\\"> <ff-checkbox name=\\\"makeCoMembersInactive\\\" ff-model=\\\"$ctrl.user.makeCoMembersInactive\\\"> <span translate=\\\"USER_PROFILE.MEMBERSHIP.INACTIVATE_CO_MEMBERS\\\"></span> </ff-checkbox> </label> <ff-row ng-if=\\\"$ctrl.user.membershipStatus.id === 'nonMember' && $ctrl.user.selfRegistrationStatus\\\"> <ff-label> <span class=\\\"text-danger\\\" ng-if=\\\"$ctrl.user.selfRegistrationStatus === 'banned'\\\"> <ff-icon sense=\\\"warning\\\" class=\\\"ff-flex-start\\\"></ff-icon> <span translate=\\\"USER_PROFILE.MEMBERSHIP.SIGN_UP.BANNED\\\"></span> </span> <span class=\\\"text-danger\\\" ng-if=\\\"$ctrl.user.selfRegistrationStatus === 'abandoned'\\\"> <ff-icon sense=\\\"warning\\\" class=\\\"ff-flex-start\\\"></ff-icon> <span translate=\\\"USER_PROFILE.MEMBERSHIP.SIGN_UP.ABANDONED\\\"></span> </span> <span class=\\\"text-danger\\\" ng-if=\\\"$ctrl.user.selfRegistrationStatus === 'staffHelp'\\\"> <ff-icon sense=\\\"warning\\\" class=\\\"ff-flex-start\\\"></ff-icon> <span translate=\\\"USER_PROFILE.MEMBERSHIP.SIGN_UP.STAFF_HELP\\\"></span> </span> <span class=\\\"text-brand\\\" ng-if=\\\"$ctrl.user.selfRegistrationStatus === 'inProgress'\\\"> <ff-icon sense=\\\"info\\\" class=\\\"ff-flex-start\\\"></ff-icon> <span translate=\\\"USER_PROFILE.MEMBERSHIP.SIGN_UP.IN_PROGRESS\\\"></span> </span> </ff-label> </ff-row> <ff-btn-group class=\\\"ff-section-buttons\\\" ng-if=\\\"!$ctrl.schema.membership.$readOnly && !$ctrl.reg.new\\\"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> <ff-btn sense=\\\"reset\\\" size=\\\"sm\\\" ff-click=\\\"$ctrl.resetSelfRegistrationStatus()\\\" ng-if=\\\"$ctrl.user.selfRegistrationStatus === 'abandoned' || $ctrl.user.selfRegistrationStatus === 'banned'\\\"> <span translate=\\\"USER_PROFILE.MEMBERSHIP.BTN_RESET_{{$ctrl.user.selfRegistrationStatus.toUpperCase()}}\\\"></span> </ff-btn> <ff-btn sense=\\\"reset\\\" size=\\\"sm\\\" ff-click=\\\"$ctrl.resetSelfRegistrationStatus()\\\" ng-if=\\\"$ctrl.user.selfRegistrationStatus === 'staffHelp'\\\"> <span translate=\\\"USER_PROFILE.MEMBERSHIP.BTN_RESET_STAFF_HELP\\\"></span> </ff-btn> <ff-btn sense=\\\"delete\\\" size=\\\"sm\\\" ff-click=\\\"$ctrl.deleteGdpr()\\\" ng-if=\\\"state.isLoggedAdmin() && $ctrl.settings.enableGdprDelete && !$ctrl.reg\\\"> <span translate=\\\"USER_PROFILE.MEMBERSHIP.BTN_DELETE_GDPR\\\"></span> </ff-btn> <ff-btn sense=\\\"delete\\\" size=\\\"sm\\\" ff-click=\\\"$ctrl.deleteUser()\\\" ng-if=\\\"state.isLoggedAdmin() && !state.isLoggedRole('coordinator') && !$ctrl.reg\\\"> <span translate=\\\"USER_PROFILE.MEMBERSHIP.BTN_DELETE_USER\\\"></span> </ff-btn> </ff-btn-group> </ff-panel> \";\n// Exports\nmodule.exports = code;","import dwEmailDirective from 'shared/dw-controls/dw-email.directive';\nimport dwLastNameDirective from 'shared/dw-controls/dw-last-name.directive';\n\n/**\n * upPersonalInfo directive - 'Personal Information' section of user profile\n */\nexport default angular.module('deskworks.upPersonalInfo', [\n  'deskworks.userProfile.service',\n  dwEmailDirective.name,\n  dwLastNameDirective.name,\n])\n\n  .directive('upPersonalInfo', function() {\n\n    const templateUrl = 'members/user-profile/sections/up-personal-info.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upPersonalInfoCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n      },\n    };\n  })\n\n  .controller('upPersonalInfoCtrl', function($scope, dwAlerts, state, userProfileService) {\n    const $ctrl = this;\n\n    /**\n     * Synchronize login with purified last name if login input is pristine for register non-member by coordinator.\n     */\n    $ctrl.onChangeLastName = function() {\n      if ($ctrl.reg && !$ctrl.reg.member && !$ctrl.reg.selfRegistration) {\n        const loginInput = angular.element(document.getElementsByName('login'));\n        const loginScope = loginInput.scope();\n        if (loginScope && loginScope.field && !loginInput.hasClass('ng-dirty')) {\n          loginScope.field.value = ($ctrl.user.lastName || '').toLowerCase().replace(/\\W/g, '') + '-' + Date.now();\n        }\n      }\n    };\n\n    /**\n     * Save button handler\n     */\n    $ctrl.save = function() {\n      const data = {\n        firstName: $ctrl.user.firstName,\n        middleName: $ctrl.user.middleName,\n        lastName: $ctrl.user.lastName,\n        email: $ctrl.user.email,\n        company: $ctrl.user.company,\n        occupation: $ctrl.user.occupation\n      };\n\n      return userProfileService.updateRaw(state.getCurrentCenterId(), $ctrl.user, data)\n        .then(() => $scope.$emit('CurrentUser:refresh'))\n        .catch(err => dwAlerts.error(err, 'Failed to save personal information.'));\n    };\n  });\n","// Module\nvar code = \"<ff-panel id=\\\"upPersonalInfo\\\" ng-if=\\\"$ctrl.schema.personalInfo\\\" ff-block ff-block-save=\\\"$ctrl.save()\\\" ff-block-edit-default=\\\"$ctrl.user.isNew()\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.PERSONAL_INFO.HEADER\\\"></span></ff-panel-header> <div class=\\\"ff-grid gutter-h\\\"> <ff-col flex=\\\"{md: '0 0 50%'}\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 116px\\\"> <span translate=\\\"USER_PROFILE.PERSONAL_INFO.FIRST_NAME\\\" ng-class=\\\"{ req: ffBlock.editMode }\\\"></span> </ff-label> <ff-text name=\\\"firstName\\\" ff-model=\\\"$ctrl.user.firstName\\\" placeholder=\\\"John\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'USER_PROFILE.PERSONAL_INFO.FIRST_NAME' | translate}}\\\"></ff-text> </label> <label class=\\\"ff-row\\\" ng-if=\\\"$ctrl.schema.personalInfo.middleName !== false\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.PERSONAL_INFO.MIDDLE_NAME\\\"></span></ff-label> <ff-text name=\\\"middleName\\\" ff-model=\\\"$ctrl.user.middleName\\\" placeholder=\\\"James\\\" ff-validate-alert=\\\"{{'USER_PROFILE.PERSONAL_INFO.MIDDLE_NAME' | translate}}\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 116px\\\"> <span translate=\\\"USER_PROFILE.PERSONAL_INFO.LAST_NAME\\\" ng-class=\\\"{ req: ffBlock.editMode }\\\"></span> </ff-label> <ff-text name=\\\"lastName\\\" ff-model=\\\"$ctrl.user.lastName\\\" ff-required=\\\"true\\\" dw-last-name placeholder=\\\"Doe\\\" ff-change=\\\"$ctrl.onChangeLastName()\\\"></ff-text> </label> </ff-col> <ff-col flex=\\\"{md: '0 0 50%'}\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 116px\\\"> <span translate=\\\"GLOBAL.EMAIL\\\" ng-class=\\\"{ req: ffBlock.editMode }\\\"></span> </ff-label> <ff-email name=\\\"email\\\" ff-model=\\\"$ctrl.user.email\\\" ff-required=\\\"true\\\" dw-email placeholder=\\\"jdoe@mail.com\\\"></ff-email> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.PERSONAL_INFO.COMPANY\\\"></span></ff-label> <ff-text name=\\\"company\\\" ff-model=\\\"$ctrl.user.company\\\" placeholder=\\\"JDOE Software\\\" ff-validate-alert=\\\"{{'USER_PROFILE.PERSONAL_INFO.COMPANY' | translate}}\\\"></ff-text> </label> <label class=\\\"ff-row\\\" ng-if=\\\"$ctrl.schema.personalInfo.occupation !== false\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.PERSONAL_INFO.OCCUPATION\\\"></span></ff-label> <ff-text name=\\\"occupation\\\" ff-model=\\\"$ctrl.user.occupation\\\" placeholder=\\\"Software Solutions Architect\\\" ff-validate-alert=\\\"{{'USER_PROFILE.PERSONAL_INFO.OCCUPATION' | translate}}\\\"></ff-text> </label> </ff-col> </div> <ff-btn-group class=\\\"ff-section-buttons\\\" ng-if=\\\"!$ctrl.schema.personalInfo.$readOnly && !$ctrl.reg.new\\\"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> \";\n// Exports\nmodule.exports = code;","import dwPhoneDirective from 'shared/dw-controls/dw-phone.directive';\n\n/**\n * upPhones directive - 'Phones' section of user profile\n */\nexport default angular.module('deskworks.upPhones', [\n  'deskworks.helper',\n  'deskworks.state',\n  'deskworks.userProfile.service',\n  dwPhoneDirective.name,\n])\n\n  .directive('upPhones', function() {\n    const templateUrl = 'members/user-profile/sections/up-phones.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upPhonesCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n        single: '<',\n      },\n    };\n  })\n\n  .controller('upPhonesCtrl', function($scope, $q, $window, $translate, dwAlerts, helper, state, userProfileService,\n                                       optsPhoneType) {\n    const $ctrl = this;\n\n    $ctrl.types = optsPhoneType\n      .map(type => angular.extend(type, { name: $translate.instant(type.name) }));\n\n    $ctrl.new = userProfileService.phone.new;\n    $ctrl.isNew = userProfileService.phone.isNew;\n\n    /**\n     * Counts existing (not new) phones.\n     * Necessary to hide Remove button because at least one phone is required.\n     */\n    $ctrl.countExisting = function() {\n      return $ctrl.user.phones.reduce((prev, curr) => helper.isUid(curr.id) ? prev : prev + 1, 0);\n    };\n\n    /**\n     * Save button handler.\n     */\n    $ctrl.save = function(phone) {\n      return userProfileService.phone.save(state.getCurrentCenterId(), $ctrl.user.id, phone)\n        .catch(err => dwAlerts.error(err, 'Failed to save phone.'));\n    };\n\n    /**\n     * Delete button handler.\n     */\n    $ctrl.delete = function(phone) {\n      if (userProfileService.phone.isNew(phone)) return $q.when();\n\n      if ($window.confirm($translate.instant('USER_PROFILE.PHONES.CONFIRM_DELETE'))) {\n        return userProfileService.phone.delete(state.getCurrentCenterId(), $ctrl.user.id, phone)\n          .catch(err => dwAlerts.error(err, 'Failed to delete phone.'));\n      }\n      return $q.reject();\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"upPhones\\\" ng-if=\\\"$ctrl.schema.phones\\\" class=\\\"ff-grid gutter-v gutter-h\\\" ff-section=\\\"phone in $ctrl.user.phones\\\" ff-section-new=\\\"$ctrl.new()\\\"> <ff-panel ng-if=\\\"!$ctrl.user.phones.length\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.PHONES\\\"></span></ff-panel-header> <span translate=\\\"USER_PROFILE.PHONES.EMPTY\\\"></span> </ff-panel> <ff-panel flex=\\\"{{ $ctrl.single ? null : {md: '0 0 50%'} }}\\\" id=\\\"{{'upPhone-' + phone.id}}\\\" ff-block ff-block-save=\\\"$ctrl.save(phone)\\\" ff-block-delete=\\\"$ctrl.delete(phone)\\\" ff-block-edit-default=\\\"$ctrl.isNew(phone)\\\" ff-block-is-new=\\\"$ctrl.isNew(phone)\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.PHONE\\\"></span></ff-panel-header> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.PHONES.TYPE\\\" ng-class=\\\"{ req: ffBlock.editMode }\\\"></span></ff-label> <ff-select name=\\\"type\\\" ff-model=\\\"phone.type\\\" ff-options=\\\"type.name for type in $ctrl.types\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'USER_PROFILE.PHONES.TYPE' | translate}}\\\"></ff-select> </label> <ff-row> <label flex=\\\"1 1 auto\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.PHONES.NUMBER\\\" ng-class=\\\"{ req: ffBlock.editMode }\\\"></span></ff-label> <ff-text flex=\\\"1 1 1%\\\" name=\\\"number\\\" ff-model=\\\"phone.number\\\" ff-required=\\\"true\\\" dw-phone placeholder=\\\"888-379-2865\\\"></ff-text> </label> <label flex=\\\"0 0 78px\\\"> <ff-label flex=\\\"0 1 34px\\\"><span translate=\\\"USER_PROFILE.PHONES.EXT\\\"></span></ff-label> <ff-text flex=\\\"1 1 1%\\\" name=\\\"ext\\\" ff-model=\\\"phone.ext\\\"></ff-text> </label> </ff-row> <ff-btn-group class=\\\"ff-block-buttons\\\" ng-if=\\\"!$ctrl.schema.phones.$readOnly\\\"> <ff-btn ff-btn-block-edit ng-if=\\\"!$ctrl.reg.new\\\"></ff-btn> <ff-btn ff-btn-block-delete ng-if=\\\"($ctrl.isNew(phone) ? $ctrl.user.phones.length : $ctrl.countExisting()) > 1\\\" ng-hide=\\\"ffBlock.editMode && !$ctrl.reg.new\\\"></ff-btn> <ff-btn ff-btn-block-save ng-if=\\\"!$ctrl.reg.new\\\"></ff-btn> <ff-btn ff-btn-block-cancel ng-if=\\\"!$ctrl.reg.new\\\"></ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=\\\"ff-btn-full\\\" ng-if=\\\"!$ctrl.schema.phones.$readOnly && !$ctrl.single\\\"> <ff-btn ff-btn-section-new> <span translate=\\\"GLOBAL.BTN_NEW\\\"></span> <span translate=\\\"USER_PROFILE.PHONE\\\"></span> </ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","import './up-photo.scss'\n\n/**\n * upPhoto directive - 'Photo' section of user profile\n */\nexport default angular.module('deskworks.upPhoto', [])\n\n  .directive('upPhoto', function() {\n    const templateUrl = 'members/user-profile/sections/up-photo.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upPhotoCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n      },\n    };\n  })\n\n  .controller('upPhotoCtrl', function($scope, $timeout, $translate, $window, dwAlerts, state, userProfileService) {\n    const $ctrl = this;\n\n    /**\n     * Save button handler\n     */\n    $ctrl.save = function($files, $invalidFiles) {\n      if ($invalidFiles && $invalidFiles.length > 0) {\n        return dwAlerts.error($translate.instant('USER_PROFILE.PHOTO.INVALID_FORMAT'));\n      }\n\n      if ($files && $files.length > 0) {\n        // For new user profile, doesn't start uploading, but read through fileReader and substitute url with data/base64 image data\n        if ($ctrl.user.isNew()) {\n          $ctrl.user.photoFile = $files[0]; // memorize photo file for uploading later\n          if (window.FileReader && $files[0].type.indexOf('image') > -1) {\n            const fileReader = new FileReader();\n            fileReader.readAsDataURL($files[0]);\n            fileReader.onload = function(e) {\n              $timeout(() => { $ctrl.user.photo = e.target.result; });\n            };\n          }\n        } else { // For existing profile, start uploading immediately\n          $ctrl.spin = true;\n          $ctrl.user.photoFile = $files[0];\n          return userProfileService.photo.save(state.getCurrentCenterId(), $ctrl.user)\n            .then(() => {\n              $ctrl.spin = false;\n              $scope.$emit('CurrentUser:refresh');\n            }, err => {\n              $ctrl.spin = false;\n              return dwAlerts.error(err, 'Failed to upload photo.');\n            });\n        }\n      }\n    };\n\n    /**\n     * Delete photo\n     */\n    $ctrl.delete = () => {\n      if (!$window.confirm($translate.instant('GLOBAL.CONFIRM_DELETE_PHOTO'))) return;\n\n      if ($ctrl.user.isNew()) {\n        delete $ctrl.user.photoFile;\n        $ctrl.user.photo = null;\n      } else {\n        return userProfileService.photo.delete({ user: $ctrl.user })\n          .catch(err => dwAlerts.error(err, 'Failed to delete photo.'))\n          .then(() => {\n            $ctrl.user.photo = null;\n            $scope.$emit('CurrentUser:refresh');\n          });\n      }\n    };\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<ff-panel id=\\\"upPhoto\\\" ng-if=\\\"$ctrl.schema.photo\\\" ngf-drop=\\\"$ctrl.save($files, $invalidFiles)\\\" ngf-pattern=\\\"'image/png,image/jpeg'\\\" ngf-drag-over-class=\\\"dragover\\\"> <ff-panel-header style=\\\"margin-bottom:.5rem\\\"><span translate=\\\"USER_PROFILE.PHOTO.HEADER\\\"></span></ff-panel-header> <div class=\\\"ff-row\\\"> <div> <ff-img ng-if=\\\"$ctrl.user.photo\\\" ff-src=\\\"{{$ctrl.user.photo}}\\\" img-placeholder=\\\"500x500\\\" ff-alt=\\\"{{$ctrl.user.fullName}}\\\"></ff-img> <ff-img ng-if=\\\"!$ctrl.user.photo\\\" ff-src=\\\"\\\" img-placeholder=\\\"500x500\\\" ff-alt=\\\"Photo\\\" ff-attr-src=\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAQAAADTdEb+AAACHElEQVR42u3SMQ0AAAzDsJU/6aGo+tgQouSgIBJgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsjCUBxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFjsPeVaAS0/Qs6MAAAAAElFTkSuQmCC\\\"></ff-img> </div> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"ff-section-buttons\\\" ng-if=\\\"!$ctrl.schema.photo.$readOnly\\\"> <ff-btn sense=\\\"upload\\\" size=\\\"sm\\\" ff-spin=\\\"$ctrl.spin\\\" accept=\\\"image/png,image/jpeg\\\" ngf-select=\\\"$ctrl.save($files, $invalidFiles)\\\" ngf-pattern=\\\"'image/png,image/jpeg'\\\"> <span translate=\\\"USER_PROFILE.PHOTO.BTN_UPLOAD\\\"></span> </ff-btn> </ff-btn-group> </div> </ff-panel> \";\n// Exports\nmodule.exports = code;","/**\n * upPrinterCodes directive - 'Printer Codes' section of user profile\n */\nangular.module('deskworks.upPrinterCodes', [\n  'deskworks.helper',\n  'deskworks.state',\n  'deskworks.userProfile.service',\n])\n\n  .directive('upPrinterCodes', function() { 'use strict';\n    const templateUrl = 'members/user-profile/sections/up-printer-codes.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upPrinterCodesCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n      },\n    };\n  })\n\n  .controller('upPrinterCodesCtrl', function($scope, $element, $q, dwAlerts, helper, state, userProfileService) { 'use strict';\n    const $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = function() {\n      // Clone and backup printer codes on edit start event\n      $scope.$on('ffBlock::EditStart', () => { $ctrl.prCodesRollback = angular.copy($ctrl.user.printerCodes); });\n      // Rollback printer codes on edit cancel event\n      $scope.$on('ffBlock::EditCancel', () => { $ctrl.user.printerCodes = $ctrl.prCodesRollback; });\n    };\n\n    /**\n     * Add button handler.\n     */\n    $ctrl.add = function() {\n      if (!$ctrl.editMode) $scope.$broadcast('ffBlock::EditStart');\n      $ctrl.user.printerCodes.push(userProfileService.printerCode.new());\n    };\n\n    /**\n     * Save button handler.\n     */\n    $ctrl.save = function() {\n      var promises = [];\n\n      // Iterate through new printer codes to find new/changed\n      $ctrl.user.printerCodes.forEach(prCode => {\n        const prCodeInit = helper.find($ctrl.prCodesRollback, prCode.id);\n        if (!prCodeInit || prCodeInit.code !== prCode.code) { // new or changed\n          promises.push(userProfileService.printerCode.save(state.getCurrentCenterId(), $ctrl.user.id, prCode)\n            .catch(err => dwAlerts.error(err, 'Failed to save printer code.')));\n        }\n      });\n\n      // Iterate through printer codes backup to find deleted\n      $ctrl.prCodesRollback.forEach(prCodeInit => {\n        const prCode = helper.find($ctrl.user.printerCodes, prCodeInit.id);\n        if (!prCode) { // deleted\n          promises.push(userProfileService.printerCode.delete(state.getCurrentCenterId(), $ctrl.user.id, prCodeInit)\n            .catch(err => dwAlerts.error(err, 'Failed to delete printer code.')));\n        }\n      });\n\n      return $q.all(promises);\n    };\n\n    /**\n     * Delete button handler.\n     */\n    $ctrl.delete = function(prCode) {\n      const idx = helper.findIndex($ctrl.user.printerCodes, prCode.id);\n      if (idx >= 0) {\n        $ctrl.user.printerCodes.splice(idx, 1);\n        const ffBlockForm = angular.element($element[0].querySelector('form[name=\"ffBlockForm\"]')).scope().ffBlockForm;\n        ffBlockForm.$setDirty();\n      }\n    };\n  });\n","// Module\nvar code = \"<ff-panel id=\\\"upPrinterCodes\\\" ng-if=\\\"$ctrl.schema.printerCodes\\\" ff-block ff-block-save=\\\"$ctrl.save()\\\" ff-block-edit=\\\"$ctrl.editMode\\\" ff-block-edit-default=\\\"$ctrl.user.isNew()\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.PRINTER_CODES.HEADER\\\"></span></ff-panel-header> <div class=\\\"ff-grid\\\"> <ff-row flex=\\\"0 0 50%\\\" ng-repeat=\\\"prCode in $ctrl.user.printerCodes\\\" id=\\\"{{'upPrinterCode-' + prCode.id}}\\\"> <ff-text name=\\\"printerCode\\\" ff-model=\\\"prCode.code\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'USER_PROFILE.PRINTER_CODES.PRINTER_CODE' | translate}}\\\"></ff-text> <ff-btn flex=\\\"none\\\" sense=\\\"delete\\\" size=\\\"xs\\\" style=\\\"z-index:3\\\" title=\\\"{{'USER_PROFILE.PRINTER_CODES.BTN_DELETE.HINT' | translate}}\\\" ff-click=\\\"$ctrl.delete(prCode)\\\" ng-show=\\\"$ctrl.editMode\\\"></ff-btn> </ff-row> </div> <ff-btn-group class=\\\"ff-section-buttons\\\" ng-if=\\\"!$ctrl.schema.printerCodes.$readOnly\\\"> <ff-btn ff-btn-block-edit ng-if=\\\"!$ctrl.reg.new\\\"></ff-btn> <ff-btn ff-btn-block-save ng-if=\\\"!$ctrl.reg.new\\\"></ff-btn> <ff-btn ff-btn-block-cancel ng-if=\\\"!$ctrl.reg.new\\\"></ff-btn> <ff-btn sense=\\\"new\\\" size=\\\"sm\\\" ff-click=\\\"$ctrl.add()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> </ff-panel> \";\n// Exports\nmodule.exports = code;","import fdFieldDirective from 'shared/form-design/fd-field.directive';\n\n/**\n * upShareable directive - 'Shareable' section of user profile\n */\nexport default angular.module('deskworks.upShareable', [\n  'deskworks.userProfile.service',\n  'deskworks.UserProfileFields',\n  'deskworks.optsShareEmail',\n  fdFieldDirective.name,\n])\n\n  .directive('upShareable', function() {\n    const templateUrl = 'members/user-profile/sections/up-shareable.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upShareableCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n        fields: '<',\n      },\n    };\n  })\n\n  .controller('upShareableCtrl', function($scope, $q, dwAlerts, state, userProfileService, UserProfileFields,\n                                          optsShareEmail) {\n    const $ctrl = this;\n\n    $ctrl.$onInit = function() {\n      $ctrl.optsShareEmail = optsShareEmail;\n    };\n\n    /**\n     * Save button handler\n     */\n    $ctrl.save = function() {\n      const data = {\n        sharePhoto: $ctrl.user.sharePhoto,\n        shareCompany: $ctrl.user.shareCompany,\n        shareOccupation: $ctrl.user.shareOccupation,\n        shareEmail: $ctrl.user.shareEmail\n      };\n\n      return $q.all([\n        userProfileService.updateRaw(state.getCurrentCenterId(), $ctrl.user, data)\n          .then(() => $scope.$emit('CurrentUser:refresh'))\n          .catch(err => dwAlerts.error(err, 'Failed to save user shareable info.'))\n          .catch(angular.noop),\n        UserProfileFields.save(state.getCurrentCenterId(), $ctrl.user.id, $ctrl.fields)\n          .catch(err => dwAlerts.error(err, 'Failed to save user profile fields.'))\n          .catch(angular.noop),\n      ]);\n    };\n  });\n","// Module\nvar code = \"<ff-panel id=\\\"upShareable\\\" ng-if=\\\"$ctrl.schema.shareable\\\" ff-block ff-block-save=\\\"$ctrl.save()\\\" ff-block-edit-default=\\\"$ctrl.user.isNew()\\\"> <ff-panel-header> <span translate=\\\"USER_PROFILE.SHAREABLE_INFO.HEADER\\\"></span> <ff-hint><span translate=\\\"USER_PROFILE.SHAREABLE_INFO.HINT\\\"></span></ff-hint> </ff-panel-header> <ff-col ff-dim=\\\"!$ctrl.fields\\\"> <ff-row> <ff-label flex=\\\"0 1 160px\\\"><span translate=\\\"USER_PROFILE.SHAREABLE_INFO.PUBLIC_FIELDS\\\"></span></ff-label> <ff-static> <div class=\\\"ff-grid gutter-h-half\\\"> <label flex=\\\"0 0 auto\\\"> <ff-checkbox ff-model=\\\"$ctrl.user.sharePhoto\\\"> <span translate=\\\"USER_PROFILE.PHOTO.HEADER\\\"></span> </ff-checkbox> </label> <label flex=\\\"0 0 auto\\\"> <ff-checkbox ff-model=\\\"$ctrl.user.shareCompany\\\"> <span translate=\\\"USER_PROFILE.PERSONAL_INFO.COMPANY\\\"></span> </ff-checkbox> </label> <label flex=\\\"0 0 auto\\\"> <ff-checkbox ff-model=\\\"$ctrl.user.shareOccupation\\\"> <span translate=\\\"USER_PROFILE.PERSONAL_INFO.OCCUPATION\\\"></span> </ff-checkbox> </label> </div> </ff-static> </ff-row> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 160px\\\"><span translate=\\\"GLOBAL.EMAIL\\\"></span></ff-label> <ff-select name=\\\"shareEmail\\\" ff-model=\\\"$ctrl.user.shareEmail\\\" ff-options=\\\"opt.id as opt.name for opt in $ctrl.optsShareEmail\\\"></ff-select> </label> <fd-field field=\\\"field\\\" ng-repeat=\\\"field in $ctrl.fields\\\"></fd-field> </ff-col> <ff-btn-group class=\\\"ff-section-buttons\\\" ng-if=\\\"!$ctrl.schema.shareable.$readOnly && !$ctrl.reg.new\\\"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> \";\n// Exports\nmodule.exports = code;","/**\n * upSystemInfo directive - 'System Information' section of user profile\n */\nangular.module('deskworks.upSystemInfo', [])\n\n  .directive('upSystemInfo', function() { 'use strict';\n    const templateUrl = 'members/user-profile/sections/up-system-info.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upSystemInfoCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n      },\n    };\n  })\n\n  .controller('upSystemInfoCtrl', function() { 'use strict';\n    var $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    // $ctrl.$onInit = function() {\n    // };\n\n    /**\n     * $onChanges\n     */\n    $ctrl.$onChanges = function() {\n      if($ctrl.user) {\n        $ctrl.user.activatedAt = $ctrl.user.activatedAt && $ctrl.user.activatedAt\n          .map(center => center.centerName)\n          .join(', ');\n        $ctrl.user.masterMembers = $ctrl.user.masterMembers && $ctrl.user.masterMembers\n          .map(master => master.fullName + (master.company ? ' (' + master.company + ')' : ''))\n          .join(', ');\n      }\n    };\n  });\n","// Module\nvar code = \"<ff-panel id=\\\"upSystemInfo\\\" ng-if=\\\"$ctrl.schema.system\\\"> <ff-panel-header><span translate=\\\"USER_PROFILE.SYSTEM_INFO.HEADER\\\"></span></ff-panel-header> <div class=\\\"ff-grid gutter-h\\\"> <ff-col flex=\\\"{md: '0 0 50%'}\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.SYSTEM_INFO.JOIN_DATE\\\"></span></ff-label> <ff-static name=\\\"joinDate\\\" ff-bind=\\\"$ctrl.user.joinDate | date:'mediumDate'\\\"></ff-static> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.SYSTEM_INFO.USER_ID\\\"></span></ff-label> <ff-static name=\\\"userId\\\" ff-bind=\\\"$ctrl.user.id\\\"></ff-static> </label> </ff-col> <ff-col flex=\\\"{md: '0 0 50%'}\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.SYSTEM_INFO.REGISTERED_BY\\\"></span></ff-label> <ff-static name=\\\"registeredBy\\\" ff-bind=\\\"$ctrl.user.registeredBy\\\"></ff-static> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.SYSTEM_INFO.ACTIVATED_AT\\\"></span></ff-label> <ff-static name=\\\"activatedAt\\\" ff-bind=\\\"$ctrl.user.activatedAt\\\"></ff-static> </label> <label class=\\\"ff-row\\\" ng-if=\\\"$ctrl.user.masterMembers\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.SYSTEM_INFO.CO_MEMBER_OF\\\"></span></ff-label> <ff-static name=\\\"masterMembers\\\" ff-bind=\\\"$ctrl.user.masterMembers\\\"></ff-static> </label> </ff-col> </div> </ff-panel> \";\n// Exports\nmodule.exports = code;","/**\n * upTermsOfService directive - 'Terms Of Service' section of user profile\n */\nexport default angular.module('deskworks.upTermsOfService', [\n  'deskworks.helper',\n  'deskworks.state',\n])\n\n  .directive('upTermsOfService', function() {\n    const templateUrl = 'members/user-profile/sections/up-terms-of-service.tpl.html';\n\n    return {\n      restrict: 'E',\n      scope: true,\n      templateUrl: templateUrl,\n      controller: 'upTermsOfServiceCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        schema: '<',\n      },\n    };\n  })\n\n  .controller('upTermsOfServiceCtrl', function() {});\n","// Module\nvar code = \"<ff-panel id=\\\"upTermsOfService\\\" ng-if=\\\"$ctrl.schema.termsOfService && $ctrl.user.isNew()\\\" class=\\\"ff-no-frame\\\"> <ff-panel-header style=\\\"margin-bottom:.5rem\\\"><req translate=\\\"USER_PROFILE.TERMS_OF_SERVICE.HEADER\\\"></req></ff-panel-header> <label class=\\\"ff-row\\\"> <ff-checkbox ff-model=\\\"$ctrl.user.termsOfService\\\" flex=\\\"0 0 36px\\\" class=\\\"ff-center\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{ required: ('USER_PROFILE.TERMS_OF_SERVICE.REQUIRED' | translate) }\\\" title=\\\"{{'USER_PROFILE.TERMS_OF_SERVICE.REQUIRED' | translate}}\\\"> </ff-checkbox> <ff-label> <span> <span translate=\\\"USER_PROFILE.TERMS_OF_SERVICE.LABEL\\\"></span> <a ng-href=\\\"{{wlLinks.tosLinkUrl}}\\\" ng-bind=\\\"wlLinks.tosLinkText\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"></a> </span> </ff-label> </label> </ff-panel> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.members.userProfile.edit', [\n  'deskworks.routeHelper',\n  'deskworks.helper',\n  'deskworks.setup.service',\n  'deskworks.userProfile.service',\n  'deskworks.UserProfileFields',\n])\n\n  .config(function($routeProvider) {\n\n    $routeProvider.when('/profile', {\n      template: '<div ng-include=\"\\'members/user-profile/user-profile.tpl.html\\'\" ff-bulk-read-only></div>',\n      controller: 'UserProfileEditCtrl as vm',\n      label: 'Profile',\n      routeBranch: 'profile',\n      translations: ['user-profile'],\n      resolve: {\n        reg: angular.noop,\n        userProfile: function(dwAlerts, userProfileService, state, routeHelper, resolveTimezone) {\n          return routeHelper.auth().then(() => {\n            return routeHelper.selectUser()\n              .then(() => resolveTimezone())\n              .then(() => userProfileService.get(state.getCurrentCenterId(), state.getCurrentUserId())\n                .catch(err => dwAlerts.error(err, 'Failed to load user profile.')));\n          });\n        },\n        center: function(state, centerService) {\n          return state.getCurrentCenterId() ? centerService.get(state.getCurrentCenterId()) : {};\n        },\n        lazyKisi: 'lazyLoadKisi',\n        lazyDoorflow: 'lazyLoadDoorflow',\n        lazyEzeep: 'lazyLoadEzeep',\n      }\n    });\n\n    $routeProvider.when('/new-member/:userId', {\n      template: '<div ng-include=\"\\'members/user-profile/user-profile.tpl.html\\'\" ff-bulk-read-only></div>',\n      controller: 'UserProfileEditCtrl as vm',\n      label: 'New Member',\n      routeBranch: 'new-member',\n      translations: ['user-profile'],\n      resolve: {\n        reg: () => { return { member: true, selfRegistration: false, step: 1, stepCount: 3 }; },\n        userProfile: function($route, dwAlerts, state, userProfileService, routeHelper, resolveTimezone) {\n          return routeHelper.auth()\n            .then(() => resolveTimezone())\n            .then(() => userProfileService.getForRegistration(state.getCurrentCenterId(), $route.current.params.userId, 'member', 'register')\n              .catch(err => dwAlerts.error(err, 'Failed to load user profile.')));\n        },\n        center: function(state, centerService) {\n          return state.getCurrentCenterId() ? centerService.get(state.getCurrentCenterId()) : {};\n        },\n        lazyKisi: 'lazyLoadKisi',\n        lazyDoorflow: 'lazyLoadDoorflow',\n        lazyEzeep: 'lazyLoadEzeep',\n      }\n    });\n\n    $routeProvider.when('/new-user/:userId', {\n      template: '<div ng-include=\"\\'members/user-profile/user-profile.tpl.html\\'\" ff-bulk-read-only></div>',\n      controller: 'UserProfileEditCtrl as vm',\n      label: 'New User',\n      routeBranch: 'new-user',\n      translations: ['user-profile'],\n      resolve: {\n        reg: () => { return { member: false, selfRegistration: false, step: 1, stepCount: 2 }; },\n        userProfile: function($route, dwAlerts, state, userProfileService, routeHelper, resolveTimezone) {\n          return routeHelper.auth()\n            .then(() => resolveTimezone())\n            .then(() => userProfileService.getForRegistration(state.getCurrentCenterId(), $route.current.params.userId, 'nonMember', 'register')\n              .catch(err => dwAlerts.error(err, 'Failed to load user profile.')));\n        },\n        center: function(state, centerService) {\n          return state.getCurrentCenterId() ? centerService.get(state.getCurrentCenterId()) : {};\n        },\n      }\n    });\n  })\n\n  .controller('UserProfileEditCtrl', function($scope, $translate, $filter, dwAlerts, state, helper, reg, userProfile,\n                                              userProfileService, setupService, center, UserProfileFields) {\n    const vm = this;\n\n    if (reg) {\n      state.setPageTitle(reg.member ? 'New Member Registration' : 'New Non-Member Registration');\n    } else {\n      const pageTitle = $translate.instant('USER_PROFILE.PAGE_TITLE', { userName: userProfile.fullNameCompany });\n      state.setPageTitle(pageTitle);\n    }\n\n    vm.reg = reg;\n    vm.center = center;\n    vm.userProfile = userProfile;\n    vm.schema = userProfile.schema;\n\n    // Set membershipProduct and membershipType from ?productId param\n    if (vm.reg && vm.reg.member) {\n      // Find membershipType and membershipProduct from route params\n      vm.userProfile.options.membershipTypes.some(function(membType) {\n        const product = helper.findByKeyValue(membType.membershipPackages, 'id', state.getParam('productId'));\n        if (product) {\n          vm.userProfile.membershipType = membType;\n          vm.userProfile.membershipProduct = product;\n        }\n        return !!product;\n      });\n      if (state.getParam('membershipStartDate')) {\n        vm.userProfile.membershipStartDate = $filter('toDate')(state.getParam('membershipStartDate'));\n      }\n    }\n\n    if (!vm.reg) {\n      setupService.getSetupSettings()\n        .then(function(result) { vm.settings = result; })\n        .catch(function(err) { return dwAlerts.error(err, 'Failed to get setup settings.'); })\n        .catch(angular.noop);\n    }\n\n    if (vm.schema.customFields || vm.schema.shareable) {\n      UserProfileFields.query(state.getCurrentCenterId(), vm.userProfile.id)\n        .then(function(fields) {\n          vm.customFields = fields.filter(function(field) { return field.section === 'customFields'; });\n          vm.shareable = fields.filter(function(field) { return field.section === 'shareable'; });\n        })\n        .catch(function(err) { return dwAlerts.error(err, 'Failed to query user profile fields.'); })\n        .catch(angular.noop);\n\n    }\n\n    /**\n     * Next button handler, available only in registration process\n     */\n    vm.next = function() {\n      state.setParam('productId', (vm.userProfile.membershipProduct || {}).id);\n      state.setParam('membershipStartDate', $filter('date')(vm.userProfile.membershipStartDate, 'yyyy-MM-dd'));\n      return state.setPath(state.getPath() + '/membership/billing-profile');\n    };\n  });\n","import 'bundles/lazy-loaders.service.js';\n\nangular.module('deskworks.members.userProfile', [\n  'deskworks.members.userProfile.new',\n  'deskworks.members.userProfile.edit',\n  'deskworks.upPersonalInfo',\n  'deskworks.upLoginInfo',\n  'deskworks.upPhoto',\n  'deskworks.upSystemInfo',\n  'deskworks.upAddresses',\n  'deskworks.upPhones',\n  'deskworks.upComments',\n  'deskworks.upMembership',\n  'deskworks.upPrinterCodes',\n  'deskworks.upDocuments',\n  'deskworks.upLeadSource',\n  'deskworks.upTermsOfService',\n  'deskworks.upCustomFields',\n  'deskworks.upShareable',\n  'deskworks.upCoMembers',\n  'deskworks.upMailboxes',\n  'deskworks.upCreditCards',\n  'deskworks.upEChecks',\n  'deskworks.upBillingMethod',\n  'deskworks.lazyLoaders',\n]);\n","// Module\nvar code = \"<div class=\\\"user-profile\\\" id=\\\"userProfile\\\"> <h1 class=\\\"page-title\\\"> {{state.getPageTitle()}} <span ng-if=\\\"vm.reg.member && !vm.reg.selfRegistration\\\" ng-style=\\\"{ color: vm.center.color }\\\">{{vm.center.name}}</span> </h1> <div class=\\\"ff-grid ff-gutter-v ff-gutter-h\\\"> <up-personal-info user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" ng-if=\\\"vm.schema.personalInfo\\\"></up-personal-info> <up-login-info flex=\\\"{md: '0 0 50%'}\\\" user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" ng-if=\\\"vm.schema.loginInfo\\\" member-directory-url=\\\"wlLinks.memberDirectoryUrl\\\"></up-login-info> <up-photo flex=\\\"{md: '0 0 50%'}\\\" user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" ng-if=\\\"vm.schema.photo\\\"></up-photo> <up-system-info user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" ng-if=\\\"vm.schema.system\\\"></up-system-info> <up-addresses user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" center=\\\"vm.center\\\" ng-if=\\\"vm.schema.addresses\\\"></up-addresses> <up-phones user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" ng-if=\\\"vm.schema.phones\\\"></up-phones> <up-comments flex=\\\"{md: '0 0 50%'}\\\" user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" ng-if=\\\"vm.schema.comments\\\"></up-comments> <up-membership flex=\\\"{md: '0 0 50%'}\\\" user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" ng-if=\\\"vm.schema.membership\\\" kisi-save=\\\"vm.kisiSave\\\" doorflow-save=\\\"vm.doorflowSave\\\" ezeep-save=\\\"vm.ezeepSave\\\" settings=\\\"vm.settings\\\"></up-membership> <up-printer-codes flex=\\\"{md: '0 0 50%'}\\\" user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" ng-if=\\\"vm.schema.printerCodes\\\"></up-printer-codes> <up-documents flex=\\\"{md: '0 0 50%'}\\\" user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" ng-if=\\\"vm.schema.documents\\\"></up-documents> <up-lead-source flex=\\\"{md: '0 0 50%'}\\\" user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" ng-if=\\\"vm.schema.leadSource\\\"></up-lead-source> <div ng-if=\\\"vm.schema.customFields && vm.customFields.length || vm.schema.shareable\\\"> <div class=\\\"ff-grid ff-gutter-v ff-gutter-h\\\"> <up-custom-fields flex=\\\"{md: '0 0 50%'}\\\" user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" fields=\\\"vm.customFields\\\" ng-if=\\\"vm.schema.customFields && vm.customFields.length\\\"></up-custom-fields> <up-shareable flex=\\\"{md: '0 0 50%'}\\\" user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" fields=\\\"vm.shareable\\\" ng-if=\\\"vm.schema.shareable\\\"></up-shareable> </div> </div> <up-co-members user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" ng-if=\\\"vm.schema.coMembers\\\"></up-co-members> <up-mailboxes user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" ng-if=\\\"vm.schema.mailboxes\\\"></up-mailboxes> </div> <ff-btn-group class=\\\"buttons-bottom\\\" ng-if=\\\"vm.reg\\\"> <ff-btn sense=\\\"next\\\" ff-click=\\\"vm.next()\\\"><span translate=\\\"GLOBAL.BTN_NEXT\\\"></span></ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\" ng-if=\\\"vm.back\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","import optsMembershipFilter from 'shared/membership-filter/opts-membership-filter.service';\n\n  /**\n * User Search state service\n */\nangular.module('deskworks.userSearchState', [optsMembershipFilter.name])\n\n  .factory('userSearchState', function($rootScope, $translate, optsMembershipFilter) {\n    var state = {\n      advanced: false,\n      checkedIn: false,\n      centerId: 0,\n      page: 1,\n      sort: 'lastName',\n      order: 1,\n      pageSize: 100,\n\n      columns: [\n        { id: 'firstName', _name: 'USER_SEARCH.COLUMNS.FIRST_NAME', include: true },\n        { id: 'lastName', _name: 'USER_SEARCH.COLUMNS.LAST_NAME', include: true },\n        { id: 'company', _name: 'USER_SEARCH.COLUMNS.COMPANY', include: true },\n        { id: 'email', _name: 'USER_SEARCH.COLUMNS.EMAIL', advanced: true, include: true },\n        { id: 'login', _name: 'USER_SEARCH.COLUMNS.LOGIN', advanced: true },\n        { id: 'phone', _name: 'USER_SEARCH.COLUMNS.PHONE', advanced: true },\n        { id: 'accessCode', _name: 'USER_SEARCH.COLUMNS.ACCESS_CODE', advanced: true },\n        { id: 'printerCode', _name: 'USER_SEARCH.COLUMNS.PRINTER_CODE', advanced: true },\n        { id: 'mailboxNumber', _name: 'USER_SEARCH.COLUMNS.MAILBOX_NUMBER', advanced: true },\n        { id: 'mailboxNames', _name: 'USER_SEARCH.COLUMNS.MAILBOX_NAME', advanced: true },\n        { id: 'occupation', _name: 'USER_SEARCH.COLUMNS.OCCUPATION', advanced: true },\n        { id: 'joinDate', _name: 'USER_SEARCH.COLUMNS.JOIN_DATE', advanced: true, tpl: 'userSearchDateTpl' },\n        { id: 'payor', _name: 'USER_SEARCH.COLUMNS.PAYOR', _hint: 'USER_SEARCH.COLUMNS.PAYOR.HINT', advanced: true },\n        { id: 'macAddress', _name: 'USER_SEARCH.COLUMNS.MAC_ADDRESS', advanced: true, tpl: 'userSearchMacTpl' }\n      ],\n\n      resetColumns: resetColumns,\n    };\n\n    state.filters = angular.copy(optsMembershipFilter);\n\n    // reset state on logging in/out\n    const backup = angular.copy(state);\n    $rootScope.$on('LOGIN', reset);\n    $rootScope.$on('LOGOUT', reset);\n    function reset() {\n      angular.copy(backup, state);\n      translate();\n    }\n    function resetColumns() {\n      state.columns = angular.copy(backup.columns);\n      translate();\n    }\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() {\n      state.filters.forEach(item => { item.name = $translate.instant(item._name); });\n      state.columns.forEach(item => { item.name = $translate.instant(item._name); });\n      state.columns.forEach(item => { item.hint = $translate.instant(item._hint); });\n    }\n\n    return state;\n  });\n","import './user-search.scss'\nimport membershipFilter from 'shared/membership-filter/membership-filter.directive';\nimport dwSelectCenterDirective from 'shared/dw-controls/dw-select-center/dw-select-center.directive';\n\nexport default angular.module('deskworks.members.userSearch', [\n  'deskworks.routeHelper',\n  'deskworks.dwAlerts',\n  'deskworks.state',\n  'deskworks.helper',\n  'deskworks.userSearchState',\n  'flexForms.ffPagination',\n  'deskworks.userProfile.service',\n  membershipFilter.name,\n  dwSelectCenterDirective.name,\n])\n\n  .config(function($routeProvider) {\n    $routeProvider.when('/user-search', {\n      templateUrl: 'members/user-search/user-search.tpl.html',\n      controller: 'UserSearchCtrl as $ctrl',\n      label: 'User Search',\n      routeBranch: 'user-search',\n      reloadOnSearch: false,\n      userTasksPolicy: false,\n      translations: ['user-search'],\n      resolve: {\n        auth: routeHelper => routeHelper.auth(),\n      }\n    });\n  })\n\n  .controller('UserSearchCtrl', function($scope, $filter, $translate, dwAlerts, state, helper,\n                                         userSearchState, userProfileService) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('USER_SEARCH.PAGE_TITLE'));\n\n    const us = $scope.us = userSearchState;\n    us.centerId = state.getCurrentCenterId();\n    if (us.users) $ctrl.previousSearch = true;\n\n    us.resetColumns();\n    us.advanced = false;\n\n    /**\n     * Search button handler\n     */\n    $ctrl.search = function(page) {\n      const columns = us.columns\n        .filter(col => !col.advanced || us.advanced)\n        .reduce((obj, col) => { if (col.value) obj[col.id] = col.value; return obj; }, {});\n\n      const data = angular.extend({ page: page || us.page, pageSize: us.pageSize, sort: us.sort, order: us.order }, $ctrl.membershipFilter, columns);\n\n      if (us.checkedIn) data.checkedIn = us.checkedIn;\n\n      return userProfileService.search(us.centerId, data)\n        .catch(err => dwAlerts.error(err, 'Failed to search users.'))\n        .then(result => {\n          result.users.forEach(user => { user.joinDate = $filter('date')(user.joinDate, 'mediumDate'); });\n          angular.extend(us, result);\n          $ctrl.previousSearch = false;\n        });\n    };\n\n    /**\n     * Filter visibility of search result columns\n     */\n    $ctrl.filterResultColumns = col => col.include && (!col.advanced || us.advanced || col.id === 'email');\n\n    /**\n     * Select User button handler. Changes current user and redirects to ?redirect=path\n     */\n    $ctrl.selectUser = function(user) {\n      state.setCurrentUserId(user.id);\n\n      const redirect = state.getParam('redirect');\n      if (redirect && redirect !== '/user-search') {\n        state.setParam('redirect');\n        return state.setPath(redirect);\n      }\n\n      return state.setPath('/profile');\n    };\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div class=\\\"user-search\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <form name=\\\"userSearch\\\"> <membership-filter ff-model=\\\"$ctrl.membershipFilter\\\" filter-data=\\\"us.filters\\\"></membership-filter> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <div flex=\\\"{md: '0 0 50%'}\\\"> <ff-panel> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 104px\\\"><span translate=\\\"USER_SEARCH.ACTIVATED_AT\\\"></span></ff-label> <dw-select-center ff-model=\\\"us.centerId\\\" ff-option-all=\\\"true\\\"></dw-select-center> </label> <label class=\\\"ff-row\\\" ng-repeat=\\\"col in us.columns | filter : { advanced: '!true' }\\\"> <ff-label flex=\\\"0 0 104px\\\">{{col.name}}</ff-label> <ff-text name=\\\"{{col.id}}\\\" ff-model=\\\"col.value\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-checkbox ff-model=\\\"us.advanced\\\"><span translate=\\\"USER_SEARCH.ADVANCED_SEARCH\\\"></span></ff-checkbox> </label> </ff-panel> </div> <div flex=\\\"{md: '0 0 50%'}\\\"> <ff-panel ng-collapse=\\\"!us.advanced\\\"> <ff-row class=\\\"us-show-row\\\"> <span title=\\\"{{'USER_SEARCH.SHOW.HINT' | translate}}\\\" translate=\\\"USER_SEARCH.SHOW\\\">Show</span> </ff-row> <ff-row ng-repeat=\\\"col in us.columns | filter : { advanced: 'true' }\\\" ng-include=\\\"col.tpl || 'userSearchTextTpl'\\\"> </ff-row> </ff-panel> </div> </div> <ff-btn-group class=\\\"buttons-bottom\\\" style=\\\"text-align:left\\\"> <ff-btn sense=\\\"search\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.search(1)\\\"><span translate=\\\"USER_SEARCH.BTN_SEARCH\\\"></span></ff-btn> </ff-btn-group> </form> <ff-panel ng-if=\\\"us.users\\\" id=\\\"searchResults\\\" class=\\\"us-results\\\"> <ff-panel-header> <span translate=\\\"USER_SEARCH.RESULTS.HEADER\\\" translate-values=\\\"{ count: us.userCount }\\\" ng-if=\\\"!$ctrl.previousSearch\\\"></span> <span translate=\\\"USER_SEARCH.PREV_RESULTS.HEADER\\\" translate-values=\\\"{ count: us.userCount }\\\" ng-if=\\\"$ctrl.previousSearch\\\"></span> </ff-panel-header> <ff-header> <ff-row> <cell ng-repeat=\\\"col in us.columns | filter: $ctrl.filterResultColumns\\\"> <span>{{col.name}}</span> <ff-sort props=\\\"us\\\" col-id=\\\"col.id\\\" ff-click=\\\"$ctrl.search()\\\"></ff-sort> </cell> <cell flex=\\\"0 0 22px\\\"></cell> </ff-row> </ff-header> <ff-row ng-repeat=\\\"user in us.users\\\" class=\\\"ff-clickable\\\" ng-click=\\\"$ctrl.selectUser(user)\\\" ff-dim> <ff-static ng-repeat=\\\"col in us.columns | filter: $ctrl.filterResultColumns\\\"> <span> <span ng-if=\\\"col.id !== 'email'\\\" ng-bind=\\\"::user[col.id]\\\"></span> <a ng-if=\\\"col.id === 'email'\\\" href=\\\"mailto:{{::user[col.id]}}\\\" ng-bind=\\\"::user[col.id]\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\" ng-click=\\\"$event.stopPropagation()\\\"></a> <ff-hint ng-if=\\\"::user.isMasterMember && col.id === 'company'\\\"> <span translate=\\\"USER_SEARCH.MASTER_USER.HINT\\\" translate-values=\\\"{ company: user.company }\\\"></span> </ff-hint> </span> </ff-static> <ff-static flex=\\\"0 0 22px\\\"> <ff-icon sense=\\\"navigate\\\" title=\\\"{{'USER_SEARCH.BTN_SELECT.HINT' | translate}}\\\"></ff-icon> </ff-static> </ff-row> <ff-pagination props=\\\"us\\\" ff-click=\\\"$ctrl.search($page)\\\" ng-if=\\\"us.pageCount > 1\\\"></ff-pagination> </ff-panel> </div> <script type=\\\"text/ng-template\\\" id=\\\"userSearchTextTpl\\\"> <ff-static flex=\\\"0 0 30px\\\" class=\\\"ff-center\\\"><ff-checkbox ff-model=\\\"col.include\\\"></ff-checkbox></ff-static>\\n  <label class=\\\"ff-row\\\" flex=\\\"auto\\\">\\n    <ff-label flex=\\\"0 0 104px\\\">\\n      <span>{{col.name}} <ff-hint ng-if=\\\"col.hint\\\">{{col.hint}}</ff-hint></span>\\n    </ff-label>\\n    <ff-text name=\\\"{{col.id}}\\\" ff-model=\\\"col.value\\\" ff-change=\\\"col.include = !!col.value\\\"></ff-text>\\n  </label> </script> <script type=\\\"text/ng-template\\\" id=\\\"userSearchDateTpl\\\"> <ff-static flex=\\\"0 0 30px\\\" class=\\\"ff-center\\\"><ff-checkbox ff-model=\\\"col.include\\\"></ff-checkbox></ff-static>\\n  <label class=\\\"ff-row\\\" flex=\\\"auto\\\">\\n    <ff-label flex=\\\"0 0 104px\\\">{{col.name}}</ff-label>\\n    <ff-date name=\\\"{{col.id}}\\\" ff-model=\\\"col.value\\\" ff-change=\\\"col.include = !!col.value\\\"\\n             ff-validate-alert=\\\"{{'USER_SEARCH.COLUMNS.JOIN_DATE' | translate}}\\\"></ff-date>\\n  </label> </script> <script type=\\\"text/ng-template\\\" id=\\\"userSearchMacTpl\\\"> <ff-static flex=\\\"0 0 30px\\\" class=\\\"ff-center\\\"><ff-checkbox ff-model=\\\"col.include\\\"></ff-checkbox></ff-static>\\n  <label flex=\\\"1 1 auto\\\">\\n    <ff-label flex=\\\"0 0 104px\\\">{{col.name}}</ff-label>\\n    <ff-text flex=\\\"auto\\\" name=\\\"{{col.id}}\\\" ff-model=\\\"col.value\\\" ff-change=\\\"[col.include = !!col.value, us.checkedIn = us.checkedIn && !!col.value]\\\"></ff-text>\\n  </label>\\n  <label flex=\\\"0 0 auto\\\">\\n    <ff-checkbox ff-model=\\\"us.checkedIn\\\" ff-disabled=\\\"!col.value\\\" class=\\\"ff-small\\\">\\n      <span translate=\\\"USER_SEARCH.FILTERS.CHECKED_IN\\\"></span>\\n    </ff-checkbox>\\n  </label> </script> \";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}