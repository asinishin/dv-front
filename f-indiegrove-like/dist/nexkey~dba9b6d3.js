(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"+XAh":function(e,n,t){"use strict";t.r(n);t("JBxO"),t("FdtR");n.default=angular.module("deskworks.nexkeySettingsDirective",["debounce","deskworks.center.service","deskworks.NexkeyCenter"]).directive("nexkeySettings",(function(){return{templateUrl:"settings/nexkey-settings.tpl.html",restrict:"E",scope:!0,controller:"NexkeySettingsCtrl as $ctrl"}})).controller("NexkeySettingsCtrl",["$q","debounce","dwAlerts","helper","state","NexkeyCenter",function(e,n,t,r,a,l){var s=this;s.$onInit=function(){s.load()},s.load=function(){return s.spin=!0,l.query().then((function(e){return s.nexkeyCenters=e,e})).finally((function(){s.spin=!1}))},s.saveCenter=n((function(e,n){if(n&&n.$invalid)return;return e.$$spin=!0,l.save(e).finally((function(){e.$$spin=!1})).catch((function(e){return t.error(e,"Failed to save Nexkey center.")}))}),500)}])},"/laD":function(e,n,t){"use strict";t.r(n);t("3dw1"),t("Muwe"),t("y89P");var r=t("yCd9"),a=t.n(r),l=t("lRNC"),s=t.n(l),c=["$injector",function(e){var n,r,l=(n=t("NYVy"),a()(r=s()(n).call(n)).call(r,n));e.loadNewModules(a()(l).call(l,(function(e){return e.default.name}))),e.invoke(["$templateCache",function(e){var n=t("xATu");s()(n).call(n).forEach((function(t){return e.put(t.replace(/^\.\//,""),n(t))}))}])}];n.default=c},BFGI:function(e,n){e.exports='<ff-panel> <ff-panel-header> <span translate="INTEGRATIONS_SETUP.NEXKEY.HEADER"></span> </ff-panel-header> <ff-spin class="ff-spin-placeholder" ng-if="$ctrl.spin"></ff-spin> <form name="form" novalidate ng-repeat="center in $ctrl.nexkeyCenters" class="animate-collapse"> <ff-header ng-style="{ \'padding-top\': $index ? \'.5rem\' : \'0\' }"> <ff-row> <cell>{{::center.name}}</cell> <ff-spin flex="0 0 16px" class="ff-spin-sm" ng-if="center.$$spin"></ff-spin> </ff-row> </ff-header> <label class="ff-row"> <ff-label flex="0 0 100px"><span translate="INTEGRATIONS_SETUP.ENABLED"></span></ff-label> <ff-static> <ff-checkbox name="enabled" ff-model="center.enabled" ff-change="$ctrl.saveCenter(center, form)"></ff-checkbox> </ff-static> </label> <label class="ff-row"> <ff-label flex="0 0 100px"><span ng-class="{ req: center.enabled }" translate="INTEGRATIONS_SETUP.API_KEY"></span></ff-label> <ff-text ff-model="center.apiKey" ff-change="$ctrl.saveCenter(center, form)" ff-required="center.enabled" ff-validate-alert="{{\'INTEGRATIONS_SETUP.API_KEY\' | translate}}"></ff-text> </label> <label class="ff-row"> <ff-label flex="0 0 100px"><span ng-class="{ req: center.enabled }" translate="INTEGRATIONS_SETUP.API_SECRET"></span></ff-label> <ff-text ff-model="center.apiSecret" ff-change="$ctrl.saveCenter(center, form)" ff-required="center.enabled" ff-validate-alert="{{\'INTEGRATIONS_SETUP.API_SECRET\' | translate}}"></ff-text> </label> </form> </ff-panel> '},NYVy:function(e,n,t){var r={"./locks/nexkey-locks.directive.js":"Y5W7","./services/nexkey-center.service.js":"a3GV","./services/nexkey-unit.service.js":"dh+n","./settings/nexkey-settings.directive.js":"+XAh"};function a(e){var n=l(e);return t(n)}function l(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=l,e.exports=a,a.id="NYVy"},OiSP:function(e,n){e.exports='<label class="ff-row animate-collapse" ng-if="$ctrl.center.enabled"> <ff-label flex="0 1 170px"> <span> <span translate="NEXKEY.LOCKS"></span> <ff-hint><span translate="NEXKEY.LOCKS.HINT"></span></ff-hint> </span> </ff-label> <ff-text name="lockIds" ff-model="$ctrl.settings.lockIds"></ff-text> </label> '},Y5W7:function(e,n,t){"use strict";t.r(n);t("3dw1");var r=t("03wM"),a=t.n(r),l=t("Ekwr"),s=t.n(l),c=t("hsT8"),f=t.n(c),i=t("lvz6"),o=t.n(i),u=t("yKah"),d=t.n(u),k=t("fzuT"),p=t.n(k),x=t("yCd9"),y=t.n(x),v=t("a8hB"),g=t.n(v);t("8cZI"),t("Muwe"),t("aZFp");function h(e,n){var t=a()(e);if(s.a){var r=s()(e);n&&(r=f()(r).call(r,(function(n){return o()(e,n).enumerable}))),t.push.apply(t,r)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):d.a?Object.defineProperties(e,d()(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,o()(t,n))}))}return e}n.default=angular.module("deskworks.nexkeyLocksDirective",["deskworks.NexkeyCenter","deskworks.NexkeyUnit"]).directive("nexkeyLocks",(function(){return{templateUrl:"locks/nexkey-locks.tpl.html",restrict:"E",scope:!0,controller:"NexkeyLocksCtrl as $ctrl",bindToController:{centerId:"<?",unitId:"<?",save:"="}}})).controller("NexkeyLocksCtrl",["$q","dwAlerts","helper","state","NexkeyCenter","NexkeyUnit",function(e,n,t,r,a,l){var s=this;function c(){var e;if(s.unitId){var t,r=N(N({},s.unit),{},{lockIds:y()(t=s.unit.lockIds.split(",")).call(t,(function(e){return g()(e).call(e)}))});return l.save(r).catch((function(e){return n.error(e,"Failed to save Nexkey unit.")}))}var c=N(N({},s.center),{},{lockIds:y()(e=s.center.lockIds.split(",")).call(e,(function(e){return g()(e).call(e)}))});return a.save(c).catch((function(e){return n.error(e,"Failed to save Nexkey center.")}))}s.$onInit=function(){s.load(),s.save=c},s.load=function(){var t=[a.get({id:s.centerId}).catch((function(e){return n.error(e,"Failed to get Nexkey center.")}))];return s.unitId&&t.push(l.get({id:s.unitId}).catch((function(e){return n.error(e,"Failed to get Nexkey unit.")}))),e.all(t).then((function(e){s.center=e[0],s.unit=e[1],s.settings=s.unit||s.center,s.settings.lockIds=s.settings.lockIds.join(", ")}))}}])},a3GV:function(e,n,t){"use strict";t.r(n),n.default=angular.module("deskworks.NexkeyCenter",["ngResource","deskworks.config"]).factory("NexkeyCenter",["$resource","deskworksConfig",function(e,n){var t=e(n.getApiAbsUrl("/nexkey/centers/:id"),{},{update:{method:"PUT"}});return{query:function(){return t.query({}).$promise},get:function(e){return t.get(e).$promise},save:function(e){return t.update({id:e.id},e).$promise}}}])},"dh+n":function(e,n,t){"use strict";t.r(n),n.default=angular.module("deskworks.NexkeyUnit",["ngResource","deskworks.config"]).factory("NexkeyUnit",["$resource","deskworksConfig",function(e,n){var t=e(n.getApiAbsUrl("/nexkey/units/:id"),{},{update:{method:"PUT"}});return{get:function(e){return t.get(e).$promise},save:function(e){return t.update({id:e.id},e).$promise}}}])},xATu:function(e,n,t){var r={"./locks/nexkey-locks.tpl.html":"OiSP","./settings/nexkey-settings.tpl.html":"BFGI"};function a(e){var n=l(e);return t(n)}function l(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=l,e.exports=a,a.id="xATu"}}]);