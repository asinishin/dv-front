(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"+Ie/":function(e,t,r){"use strict";var n=r("y1jH"),a=r.n(n);t.a=angular.module("deskworks.dwCreditCard",["flexForms","deskworks.helper","deskworks.userProfile.optsCCExpiryMonth","deskworks.userProfile.optsCCExpiryYear"]).directive("dwCreditCard",(function(){return{template:a.a,restrict:"A",scope:!0,controller:"dwCreditCardCtrl as $ctrl",bindToController:{cc:"<dwCreditCard",ccTypes:"<dwCreditCardTypes"}}})).controller("dwCreditCardCtrl",["$scope","optsCCExpiryMonth","optsCCExpiryYear",function(e,t,r){var n=this;n.optsCCExpiryMonth=t,n.optsCCExpiryYear=r,e.$watch("$ctrl.ccType",(function(){n.cc.type=n.ccType||n.cc.type}))}])},"+l1P":function(e,t,r){"use strict";var n=r("6RpP"),a=r.n(n);t.a=angular.module("niceTimeDirective",[]).directive("niceTime",["$compile","$locale",function(e,t){return{restrict:"A",compile:function(r,n){return function(r,s,l){var i;if(24===t.timeFormat){var o,c="shortHours"===n.niceFormat?"H":"HH:mm";i=a()(o='<span ng-bind="'.concat(n.niceTime," | date: '")).call(o,c,"'\"></span>")}else{var f,d,u="shortHours"===n.niceFormat?"h":"hh:mm";i=a()(f=a()(d='<span ng-bind="'.concat(n.niceTime," | date: '")).call(d,u,'\'"></span><sup ng-bind="')).call(f,n.niceTime," | date: 'a'\"></sup>")}s.empty().append(e(i)(r))}}}}])},"/csh":function(e,t,r){},"1qkW":function(e,t,r){},"2/1H":function(e,t,r){"use strict";var n=r("6RpP"),a=r.n(n);t.a=angular.module("deskworks.ReservationUnit",["ngResource","ngFileUpload","deskworks.config"]).factory("ReservationUnit",["$resource","$q","Upload","deskworksConfig",function(e,t,r,n){var s=e(n.getApiAbsUrl("/centers/:centerId/reservation-units/:id"),{},{update:{method:"PUT"}});return{query:function(e){return s.query({centerId:e}).$promise},get:function(e,r){return"new"===r?t.when({id:"new",expectedUsePerMonth:240}):s.get({centerId:e,id:r}).$promise},save:function(e,t){return t.id&&"new"!==t.id?s.update({centerId:e,id:t.id},t).$promise:s.save({centerId:e},t).$promise.then((function(e){return t.id=e.id,e}))},delete:function(e,t){return s.delete({centerId:e,id:t}).$promise},uploadPhoto:function(e,t,s){var l;return r.upload({url:n.getApiAbsUrl(a()(l="/centers/".concat(e,"/reservation-units/")).call(l,t)),method:"PUT",withCredentials:!0,data:{photo:s}})},deletePhoto:function(e){return s.update(e,{photo:null}).$promise}}}])},"2PBz":function(e,t,r){"use strict";r("3dw1"),r("/csh");var n=r("Ijon"),a=r.n(n),s=angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$attrs","$interpolate","$timeout",function(e,t,r,n){e.closeable=!!t.close;var a=angular.isDefined(t.dismissOnTimeout)?r(t.dismissOnTimeout)(e.$parent):null;a&&n((function(){e.close()}),parseInt(a,10))}]).directive("uibAlert",(function(){return{controller:"UibAlertController",controllerAs:"alert",template:'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert"><button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})"><span aria-hidden="true">&times;</span></button><div ng-transclude></div></div>',transclude:!0,replace:!0,scope:{type:"@",close:"&"}}})),l=r("0zKI"),i=r.n(l),o=angular.module("deskworks.dwAlerts.service",[]).factory("dwAlerts",["$rootScope","$timeout","$q",function(e,t,r){var n={$alerts:[],error:function(e,t){t||(t=e,e=null),e&&e.data&&(e.data.error||e.data.message)&&(t=e.data.error||e.data.message);var n={id:Date.now(),type:"danger",message:t||"Sorry, error occurred. Please try again a bit later.",timeout:1e4};return this.showAlert(n),r.reject(e||t)},info:function(e){var t={id:Date.now(),type:"info",message:e,timeout:6e3};this.showAlert(t)},close:function(e){var t,r=this.$alerts.indexOf(e);r>=0&&i()(t=this.$alerts).call(t,r,1)},showAlert:function(e){var r=this;r.$alerts.unshift(e),e.timeout&&t((function(){r.close(e)}),e.timeout)}};return e.showError=function(e,t){return n.error(e,t)},e.closeError=function(e){var t;i()(t=n.$alerts).call(t,e,1)},e.closeAllErrors=function(){var e;i()(e=n.$alerts).call(e,0,n.$alerts.length)},n}]);t.a=angular.module("deskworks.dwAlerts",["ngAnimate",s.name,o.name]).component("dwAlerts",{template:a.a,controller:"dwAlertsController"}).controller("dwAlertsController",["$scope","$timeout","dwAlerts",function(e,t,r){var n=this;n.alerts=r.$alerts,n.close=function(e){r.close(e)},e.$watchCollection("$ctrl.alerts",(function(){n.alerts.forEach((function(e){e.timeout&&!e.start&&t((function(){e.start=!0}))}))}))}])},"4dW8":function(e,t,r){"use strict";var n=r("nbuU"),a=r.n(n);r("3dw1");t.a=angular.module("deskworks.dwSelectProfile",["ngRoute","deskworks.state","flexForms","deskworks.helper","deskworks.userProfile.service"]).directive("dwSelectProfile",["$route","state","helper","userProfileService","resolveTimezone",function(e,t,r,n,s){return{restrict:"AC",scope:!0,template:'<span>Current Profile</span><ff-select name="currentProfile" ff-model="currentProfile" ff-options="profile.name for profile in profiles" ff-change="selectProfile(currentProfile)"></ff-select>',compile:function(l,i){return l.css("display","none"),function(l,i,o){l.profiles=[],l.$watch((function(){return t.getLoggedUserId()}),(function(e){t.isLoggedAdmin()?i.css("display","none"):e?s().then((function(){return n.get(t.getCurrentCenterId(),t.getLoggedUserId())})).then((function(n){l.profiles=[{id:n.id,name:n.firstName+" "+n.lastName}],n.masterMembers.forEach((function(r){r.id!==e&&(l.profiles.push({id:r.id,name:r.company||r.fullName}),t.setCurrentUserId(r.id))})),l.currentProfile=a()(r).call(r,l.profiles,t.getCurrentUserId())||l.profiles[0],l.profiles.length>1&&i.css("display","")})):(l.profiles=[],l.currentProfile=null,i.css("display","none"))})),l.$watch((function(){return t.getCurrentUserId()}),(function(e){l.currentProfile=a()(r).call(r,l.profiles,e)||l.profiles[0]})),l.selectProfile=function(r){t.setCurrentUserId(r.id===t.getLoggedUserId()?null:r.id),e.current&&e.current.$$route&&!e.current.$$route.reloadOnSearch&&e.reload()}}}}}])},"5Lq6":function(e,t,r){"use strict";var n=r("pZrh"),a=r.n(n);t.a=angular.module("deskworks.dwECheck",["flexForms","deskworks.helper","deskworks.userProfile.optsBankAccountHolderType","deskworks.userProfile.optsBankAccountType"]).directive("dwECheck",["$compile","$timeout","helper","optsBankAccountHolderType","optsBankAccountType",function(e,t,r,n,s){return{template:a.a,restrict:"A",scope:!0,controllerAs:"dwEC",controller:["$scope","$element","$attrs",function(e,t,r){this.optsBankAccountHolderType=n,this.optsBankAccountType=s,this.check=e.$eval(r.dwECheck)}]}}])},"5vv4":function(e,t,r){"use strict";r("3dw1");t.a=angular.module("deskworks.ManualCheckIn",["ngResource","deskworks.config"]).factory("ManualCheckIn",["$resource","$filter","$timeout","deskworksConfig",function(e,t,r,n){var a=e(n.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/manual-check-ins/:recurringId"),{},{update:{method:"PUT"}});return{query:function(e){var t=e.centerId,r=e.userId;return a.query({centerId:t,userId:r}).$promise.then((function(e){return e.forEach((function(e){e.$$count=e.$$count||e.checkInCount||1})),e}))},save:function(e){var t=e.centerId,r=e.userId,n=e.recurringId,s=e.checkInCount;return a.update({centerId:t,userId:r,recurringId:n},{checkInCount:s}).$promise}}}])},"9HME":function(e,t,r){"use strict";var n=r("nbuU"),a=r.n(n),s=r("hsT8"),l=r.n(s);t.a=angular.module("deskworks.dwSelectCenter",["deskworks.state","flexForms","deskworks.helper","deskworks.center.service","deskworks.Admin"]).directive("dwSelectCenter",["$q","$rootScope","$timeout","$compile","dwAlerts","ffHelper","state","helper","centerService","Admin",function(e,t,r,n,s,i,o,c,f,d){return{restrict:"E",scope:!0,controller:function(){},controllerAs:"dwSelectCenter",compile:function(r,n){var i=angular.element('<ff-select name="center" flex="auto"></ff-select>'),u=angular.element('<option ng-repeat="center in dwSelectCenter.centers" ng-value="center.id" label="{{center.name}}">{{center.name}}</option>');return u.attr("ng-style","center.color ? { color: center.color } : {}"),i.attr("ff-style","dwSelectCenter.curCenter.color ? {color: dwSelectCenter.curCenter.color} : {}"),i.attr("ff-model",n.ffModel||"dwSelectCenter.curCenterId"),i.attr("ff-change","dwSelectCenter.onCenterChange()"),i.append(u),r.append(i),function(r,i,u,p){function m(){var t={centers:f.getCenters().catch((function(e){return s.error(e,"dwSelectCenter: failed to query centers.")}))};return o.isLoggedAdmin()&&(t.admin=d.get(o.getLoggedUserId()).catch((function(e){return s.error(e,"dwSelectCenter: failed to get admin.")}))),e.all(t).then((function(e){var t;if(p.centers=l()(t=e.centers).call(t,(function(t){return!e.admin||!!(a()(c).call(c,e.admin.centers,t.id)||{}).permission})),u.ffOptionAll&&"false"!==u.ffOptionAll&&p.centers.length>1&&p.centers.unshift({id:0,name:"All Centers"}),n.ffModel){var s=r.$eval(n.ffModel);angular.isUndefined(s)?(p.curCenterId=p.centers[0].id,r.$eval(n.ffModel+" = dwSelectCenter.curCenterId")):p.curCenterId=s}else p.curCenterId=o.getCurrentCenterId()||p.centers[0]&&p.centers[0].id;p.curCenter=a()(c).call(c,p.centers,p.curCenterId)}))}n.ffModel||r.$watch((function(){return o.getCurrentCenterId()}),(function(e){p.curCenterId=e,p.curCenter=a()(c).call(c,p.centers,p.curCenterId)})),p.onCenterChange=function(){p.curCenter=a()(c).call(c,p.centers,p.curCenterId),n.ffModel?p.curCenter=a()(c).call(c,p.centers,r.$eval(n.ffModel)):(p.curCenter=a()(c).call(c,p.centers,p.curCenterId),o.setCurrentCenterId(p.curCenterId))},t.$on("CENTERS:REFRESH",(function(){m()})),m()}}}}])},"9dcR":function(e,t,r){"use strict";t.a=angular.module("cuid",[]).factory("cuid",(function(){var e=0;return function(){return++e}}))},"A+Xk":function(e,t,r){"use strict";r("1qkW");var n=r("IODk"),a=r.n(n),s=r("5vv4");t.a=angular.module("deskworks.dwManualCheckInWidget",[s.a.name]).directive("dwManualCheckInWidget",(function(){return{template:a.a,restrict:"E",scope:!0,controller:"dwManualCheckInWidgetCtrl as $ctrl",compile:function(e){return e.addClass("sidebar-item keep-sm-btn-size").css("display","none"),function(){}}}})).controller("dwManualCheckInWidgetCtrl",["$scope","$element","state","dwAlerts","ManualCheckIn",function(e,t,r,n,a){var s=this;s.check=function(e,t,s){t=+t,s&&(s.preventDefault(),s.stopPropagation());var l=t>0?"checkIn":"checkOut";return a.save({centerId:r.getCurrentCenterId(),userId:r.getCurrentUserId(),recurringId:e.id,checkInCount:e.checkInCount+t}).catch((function(e){return n.error(e,"Failed to "+l)})).then((function(){e.checkInCount+=t,ga("send","event","merged",l)}))},s.fetchData=function(){if(r.isUserSelected()&&r.getCurrentCenterId())return a.query({centerId:r.getCurrentCenterId(),userId:r.getCurrentUserId()}).catch((function(e){return n.error(e,"Failed to query manual check-in widget")})).then((function(e){t.css("display",e.length?null:"none"),s.rbs=e}));t.css("display","none")},e.$watchGroup([r.getCurrentUserId,r.getCurrentCenterId],s.fetchData)}])},Bz93:function(e,t){e.exports='<label class="ff-row" ff-dim="!$ctrl.settings"> <ff-label flex="0 1 132px"> <span translate="USER_PROFILE.MESSAGE_BOARD_NOTICES"></span> </ff-label> <ff-select flex="1 1 1%" name="messageBoardNotices" ff-model="$ctrl.settings.notification" ff-options="opt.id as opt.name for opt in $ctrl.optsMessageBoardNotices"></ff-select> </label> '},CVQG:function(e,t,r){"use strict";var n=r("nbuU"),a=r.n(n);r("Muwe"),r("aZFp");t.a={routes:[{url:"reservation",id:"reservation"},{url:"sign-in",id:"signIn"},{url:"confirm",id:"confirm"},{url:"complete",id:"complete"},{url:"purchase",id:"purchase"},{url:"sign-up",id:"signUp"},{url:"staff-help",id:"staffHelp"}],reservation:{template:'<res-reservation center="$resolve.center" cal-data="$resolve.calData" hide-reservation-cost-estimate="$resolve.settings.hideReservationCostEstimate" hide-recurring-reservations="$resolve.settings.hideRecurringReservations" hide-staff-only-units="$resolve.settings.hideStaffOnlyUnits" reservation-fields="$resolve.reservationFields" hide-calendar-btn="true" back="$ctrl.back()" next="$ctrl.next()"></res-reservation>',controller:"WizardReservationReservationCtrl as $ctrl",hideBanner:!0,class:"wizard-reservation-reservation",userTasksPolicy:!1,reloadOnSearch:!1,translations:["reservations","book-it-now"],resolve:{calData:["$filter","state","helper","dwAlerts","calendarService","resolveTimezone",function(e,t,r,n,a,s){return s().then((function(){var r=e("toDate")(t.getParam("date"),"Z");return r=moment.isMoment(r)?r:moment(),a.query(t.getCurrentCenterId(),r,r,t.getParam("role")).catch((function(e){return n.error(e,"Failed to fetch calendar data.")}))}))}],center:["state","dwAlerts","centerService",function(e,t,r){return r.get(e.getCurrentCenterId()).catch((function(e){return t.error(e,"Failed to get center.")}))}],settings:["dwAlerts","setupService",function(e,t){return t.getSetupSettings().catch((function(t){return e.error(t,"Failed to get setup settings.")}))}],reservationFields:["dwAlerts","ReservationField",function(e,t){return t.query().catch((function(t){return e.error(t,"Failed to query reservation fields.")}))}]}},signIn:{template:'<dw-sign-in id="signIn" show-sign-up="true"></dw-sign-in>',controller:"WizardReservationSignInCtrl as $ctrl",userTasksPolicy:!1,translations:["sign-in"],resolve:{}},confirm:{template:"<div ng-include=\"'wizard-reservation/04-confirm/confirm.tpl.html'\"></div>",controller:"WizardReservationConfirmCtrl as $ctrl",userTasksPolicy:!1,reloadOnSearch:!1,translations:["reservations"],resolve:{center:["state","dwAlerts","centerService","routeHelper",function(e,t,r,n){return n.auth("/".concat(e.getPath().split("/")[1],"/sign-in")).then((function(){return r.get(e.getCurrentCenterId()).catch((function(e){return t.error(e,"Failed to get center.")}))}))}],settings:["dwAlerts","setupService",function(e,t){return t.getSetupSettings().catch((function(t){return e.error(t,"Failed to get setup settings.")}))}],reservationUnit:["$q","$filter","state","helper","routeHelper","dwAlerts","calendarService","resolveTimezone",function(e,t,r,n,s,l,i,o){return e.all([s.auth("/".concat(r.getPath().split("/")[1],"/sign-in")),o()]).then((function(){var e=t("toDate")(r.getParam("date"),"Z");return e=moment.isMoment(e)?e:moment(),i.query(r.getCurrentCenterId(),e,e).catch((function(e){return l.error(e,"Failed to fetch calendar data.")})).then((function(e){return e.reduce((function(e,t){var n;return e||a()(n=t.reservationUnits).call(n,(function(e){return e.id===+r.getParam("unit")}))}),null)}))}))}],reservationFields:["dwAlerts","ReservationField","session",function(e,t,r){return r.wait().catch(angular.noop).then((function(){return t.query().catch((function(t){return e.error(t,"Failed to query reservation fields.")}))}))}]}},complete:{template:"<div ng-include=\"'wizard-reservation/05-complete/complete.tpl.html'\"></div>",controller:"WizardReservationCompleteCtrl as $ctrl",userTasksPolicy:!1,translations:["reservations","simple-reservation","book-it-now"],resolve:{settings:["dwAlerts","setupService",function(e,t){return t.getSetupSettings().catch((function(t){return e.error(t,"Failed to get setup settings.")}))}]}},purchase:{template:"<div ng-include=\"'wizard-reservation/06-purchase/purchase.tpl.html'\"></div>",controller:"WizardReservationPurchaseCtrl as $ctrl",userTasksPolicy:!1,reloadOnSearch:!1,translations:["simple-reservation","reservations","purchase","billing-profile","book-it-now"],resolve:{center:["state","dwAlerts","centerService",function(e,t,r){return r.get(e.getCurrentCenterId()).catch((function(e){return t.error(e,"Failed to get center.")}))}],purchase:["$q","dwAlerts","state","routeHelper","purchaseService","resolveTimezone",function(e,t,r,n,a,s){return e.all([n.auth("/".concat(r.getPath().split("/")[1],"/sign-in")),s()]).then((function(){return a.get(r.getCurrentCenterId(),r.getCurrentUserId(),+r.getParam("purchaseId")).catch((function(e){return t.error(e,"Failed to get purchase.")}))}))}],reservationUnit:["$q","$filter","state","helper","routeHelper","dwAlerts","calendarService","resolveTimezone",function(e,t,r,n,s,l,i,o){return e.all([s.auth("/".concat(r.getPath().split("/")[1],"/sign-in")),o()]).then((function(){var e=t("toDate")(r.getParam("date"),"Z");return e=moment.isMoment(e)?e:moment(),i.query(r.getCurrentCenterId(),e,e).catch((function(e){return l.error(e,"Failed to fetch calendar data.")})).then((function(e){return e.reduce((function(e,t){var n;return e||a()(n=t.reservationUnits).call(n,(function(e){return e.id===+r.getParam("unit")}))}),null)}))}))}],user:["$q","dwAlerts","state","routeHelper","userProfileService","resolveTimezone",function(e,t,r,n,a,s){return e.all([n.auth("/".concat(r.getPath().split("/")[1],"/sign-in")),s()]).then((function(){return a.get(r.getCurrentCenterId(),r.getCurrentUserId()).catch((function(e){return t.error(e,"Failed to get user profile.")}))}))}],settings:["dwAlerts","setupService",function(e,t){return t.getSetupSettings().catch((function(t){return e.error(t,"Failed to get setup settings.")}))}],reservationFields:["dwAlerts","ReservationField","session",function(e,t,r){return r.wait().catch(angular.noop).then((function(){return t.query().catch((function(t){return e.error(t,"Failed to query reservation fields.")}))}))}],lazy42:"lazyLoadPlacepay"}},signUp:{template:"<div ng-include=\"'wizard-reservation/07-sign-up/sign-up.tpl.html'\"></div>",controller:"WizardReservationSignUpCtrl as $ctrl",userTasksPolicy:!1,translations:["user-profile"],resolve:{reg:["$route","state",function(e,t){return{member:!1,selfRegistration:!0,new:!t.getCurrentUserId()}}],user:["dwAlerts","$route","helper","state","session","userProfileService","centerService",function(e,t,r,n,a,s,l){return n.getCurrentUserId()?a.wait().catch(angular.noop).then((function(){return s.getForRegistration(n.getCurrentCenterId(),n.getCurrentUserId(),"nonMember","signUp").catch((function(t){return e.error(t,"Failed to get user profile.")}))})):l.get(n.getCurrentCenterId()).then((function(t){return s.new(t,"nonMember","signUp").catch((function(t){return e.error(t,"Failed to get new member profile template.")}))}))}],center:["state","dwAlerts","centerService",function(e,t,r){return r.get(e.getCurrentCenterId()).catch((function(e){return t.error(e,"Failed to get center.")}))}]}},staffHelp:{template:"<staff-help></staff-help>",userTasksPolicy:!1,translations:["simple-reservation"],resolve:{auth:["routeHelper","state",function(e,t){return e.auth("/".concat(t.getPath().split("/")[1],"/sign-in"))}]}}}},DVTZ:function(e,t,r){"use strict";t.a=angular.module("dwEmailDirective",[]).directive("dwEmail",["$compile",function(e){return{restrict:"AC",priority:30,terminal:!0,compile:function(t,r){var n=this;return r.$set("maxlength",r.maxlength||256),r.$set("ffPattern",r.ffPattern||/^[\w\.%\+\-]+@(?:[A-Z0-9\-]+\.)+(?:[A-Z]+)$/i),r.$set("ffValidateAlert",r.ffValidateAlert||"{field: 'Email', pattern: 'Email should be valid'}"),r.$set("placeholder",r.placeholder||"example@mail.com"),function(t,r,a){e(r,null,n.priority)(t)}}}}])},GJsN:function(e,t,r){"use strict";var n=r("DVTZ"),a=r("Oio6"),s=angular.module("deskworks.formDesign.fdFieldTemplates",[n.a.name,a.a.name]).factory("fdFieldTemplates",(function(){var e='ff-attr-id="fd-{{field.id}}" name="fd-{{field.id}}" ff-model="field.value" ff-required="field.required"',t='<label class="ff-row"><ff-label flex="1 1 160px"><span>{{field.name}}<req ng-if="field.required"></req></span></ff-label>',r="</label>";return{text:t+'<ff-text flex="0 1 110px" '+e+' ff-validate-alert="{{field.name}}"></ff-text>'+r,textarea:t+'<ff-textarea flex="0 1 110px" '+e+"></ff-textarea>"+r,date:t+'<ff-date flex="0 1 110px" '+e+' ff-validate-alert="{{field.name}}"></ff-date>'+r,url:t+'<ff-url flex="0 1 110px" '+e+' ff-validate-alert="{{field.name}}"></ff-url>'+r,email:t+'<ff-text flex="0 1 110px" '+e+" dw-email></ff-text>"+r,phone:t+'<ff-text flex="0 1 110px" '+e+" dw-phone></ff-text>"+r,number:t+'<ff-number flex="0 1 110px" '+e+' ff-validate-alert="{{field.name}}"></ff-number>'+r,customPrice:t+'<ff-price flex="0 1 110px" '+e+' ff-validate-alert="{{field.name}}"></ff-price>'+r,extraPrice:t+'<ff-price flex="0 1 110px" '+e+' ff-validate-alert="{{field.name}}"></ff-price>'+r,dropdown:t+'<ff-select flex="0 1 110px" '+e+' ff-options="opt.id as opt.name for opt in field.options" ff-validate-alert="{{field.name}}"></ff-select>'+r,checkbox:t+'<ff-static flex="0 0 36px" class="ff-center"><ff-checkbox '+e+' ff-validate-alert="{{field.name}}"></ff-checkbox></ff-static>'+r}}));t.a=angular.module("deskworks.formDesign.fdField",[s.name]).directive("fdField",["$compile","fdFieldTemplates",function(e,t){return{scope:!0,require:"^^?form",link:function(r,n,a,s){r.field=r.$eval(a.field);var l=angular.element(t[r.field.type]);n.append(l),e(l)(r)}}}])},GLV5:function(e,t,r){"use strict";r("1qkW");var n=r("px9Z"),a=r.n(n);t.a=angular.module("deskworks.dwCheckInWidget",["flexForms","deskworks.helper","deskworks.checkInLog.service","resolveTimezone"]).directive("dwCheckInWidget",(function(){return{template:a.a,restrict:"E",scope:!0,controller:"dwCheckInWidgetCtrl as $ctrl",compile:function(e,t){return e.addClass("sidebar-item").css("display","none"),function(e,t,r,n){}}}})).controller("dwCheckInWidgetCtrl",["$scope","$element","$interval","state","dwAlerts","checkInLogService","resolveTimezone",function(e,t,r,n,a,s,l){var i=this;i.checkInOut=function(e){return r.cancel(i.updateTimer),s.checkInOut(n.getCurrentCenterId(),n.getCurrentUserId(),e).then((function(){i.log.checkInTime="checkIn"===e?moment():void 0,r.cancel(i.updateTimer),i.updateTimer=r(i.updateMemberLog,6e3),ga("send","event","merged",e)})).catch((function(t){return a.error(t,"Failed to "+e)}))},i.updateMemberLog=function(){if(r.cancel(i.updateTimer),(!n.isLoggedAdmin()||n.isUserSelected())&&n.getCurrentCenterId())return l().then((function(){return s.getLog(n.getCurrentCenterId(),n.getCurrentUserId(),0,0)})).then((function(e){t.css("display",e.allowCheckIn?null:"none"),i.log=e,e.allowCheckIn&&(r.cancel(i.updateTimer),i.updateTimer=r(i.updateMemberLog,6e4))})).catch((function(e){return a.error(e,"Failed to update check-in widget")}));t.css("display","none")},e.$watchGroup([n.getCurrentUserId,n.getCurrentCenterId],i.updateMemberLog)}])},IODk:function(e,t){e.exports='<ff-row ng-repeat-start="rb in $ctrl.rbs" class="sidebar-item" ng-click="rb.$$unfold = !rb.$$unfold"> <span>{{rb.name}}</span> <div flex="0 0 22px" class="check-in-count" ng-if="rb.checkInCount">{{rb.checkInCount}}</div> <ff-btn flex="none" sense="collapse" size="xs" style="margin-left:auto" ng-class="{ collapsed: !rb.$$unfold }"></ff-btn> <ff-btn-group flex="none"> <ff-btn sense="checkIn" size="sm" ng-hide="rb.checkInCount > 0" ff-click="$ctrl.check(rb, 1, $event)" ff-disabled="rb.$$unfold">Check In</ff-btn> <ff-btn sense="checkOut" size="sm" ng-show="rb.checkInCount > 0" ff-click="$ctrl.check(rb, -1, $event)" ff-disabled="rb.$$unfold">Check Out</ff-btn> </ff-btn-group> </ff-row> <ff-row ng-repeat-end class="animate-collapse ff-no-frame" ng-if="rb.$$unfold"> <ff-static flex="0 0 30px" class="ff-center"> <ff-btn sense="minus" size="xs" class="ff-btn-icon" flex="auto" style="align-self:stretch" ff-disabled="rb.$$count <= 1" ff-click="rb.$$count = +rb.$$count - 1"></ff-btn> </ff-static> <ff-number flex="0 0 36px" ff-model="rb.$$count" class="ff-center" ff-required="true" ff-gt="0" ff-validate-alert="Count"></ff-number> <ff-static flex="0 0 30px" class="ff-center"> <ff-btn sense="plus" size="xs" class="ff-btn-icon" flex="auto" style="align-self:stretch" ff-click="rb.$$count = +rb.$$count + 1"></ff-btn> </ff-static> <ff-btn-group flex="none"> <ff-btn sense="checkIn" size="sm" ff-click="$ctrl.check(rb, rb.$$count)">Check In</ff-btn> <ff-btn sense="checkOut" size="sm" ff-click="$ctrl.check(rb, -rb.$$count)" ff-disabled="!rb.checkInCount || rb.$$count > rb.checkInCount">Check Out</ff-btn> </ff-btn-group> </ff-row> '},Ijon:function(e,t){e.exports='<uib-alert ng-repeat="alert in $ctrl.alerts" type="{{alert.type}}" class="dw-alert" close="$ctrl.close(alert)"> <span ng-bind-html="alert.message"></span> <span class="dw-alert-progress" ng-if="alert.timeout" ng-class="{ start: alert.start }" ng-style="{ transition: \'all \' + alert.timeout / 1000 + \'s linear\', \'-webkit-transition\': \'all \' + alert.timeout / 1000 + \'s linear\' }"></span> </uib-alert> '},KB0Y:function(e,t){e.exports='<label class="ff-row" ng-if="dwAddress.hasType"> <ff-label flex="0 1 116px"> <span translate="GLOBAL.ADDRESS.TYPE" ng-class="{ req: !dwAddress.notRequired && (!ffBlock || ffBlock.editMode) }"></span> </ff-label> <ff-select name="type" ff-model="dwAddress.address.type" ff-options="type.name for type in dwAddress.types" ff-required="!dwAddress.notRequired" ff-validate-alert="{{\'GLOBAL.ADDRESS.TYPE\' | translate}}"></ff-select> </label> <label class="ff-row" ng-if="!dwAddress.secondStreet"> <ff-label flex="0 1 116px"> <span translate="GLOBAL.ADDRESS.STREET" ng-class="{ req: !dwAddress.notRequired && (!ffBlock || ffBlock.editMode) }"></span> </ff-label> <ff-text name="street" ff-model="dwAddress.address.street" placeholder="6265 Highway 9" ff-required="!dwAddress.notRequired" ff-validate-alert="{{\'GLOBAL.ADDRESS.STREET\' | translate}}"></ff-text> </label> <label class="ff-row" ng-if="dwAddress.secondStreet"> <ff-label flex="0 1 116px"> <span translate="GLOBAL.ADDRESS.STREET" ng-class="{ req: !dwAddress.notRequired && (!ffBlock || ffBlock.editMode) }"></span>&nbsp;1 </ff-label> <ff-text name="street1" ff-model="dwAddress.address.street1" placeholder="6265 Highway 9" ff-required="!dwAddress.notRequired" ff-validate-alert="{{\'GLOBAL.ADDRESS.STREET\' | translate}} 1"> </ff-text> </label> <label class="ff-row" ng-if="dwAddress.secondStreet"> <ff-label flex="0 1 116px"><span translate="GLOBAL.ADDRESS.STREET"></span>&nbsp;2</ff-label> <ff-text name="street2" ff-model="dwAddress.address.street2"></ff-text> </label> <label class="ff-row"> <ff-label flex="0 1 116px"> <span translate="GLOBAL.ADDRESS.CITY" ng-class="{ req: !dwAddress.notRequired && (!ffBlock || ffBlock.editMode) }"></span> </ff-label> <ff-text name="city" ff-model="dwAddress.address.city" placeholder="Felton" ff-required="!dwAddress.notRequired" ff-validate-alert="{{\'GLOBAL.ADDRESS.CITY\' | translate}}"></ff-text> </label> <label class="ff-row"> <ff-label flex="0 1 116px"> <span translate="GLOBAL.ADDRESS.COUNTRY" ng-class="{ req: !dwAddress.notRequired && (!ffBlock || ffBlock.editMode) }"></span> </ff-label> <ff-select name="country" ff-model="dwAddress.address.country" ff-options="country.name for country in dwAddress.countries" ff-required="!dwAddress.notRequired" ff-validate-alert="{{\'GLOBAL.ADDRESS.COUNTRY\' | translate}}" ff-change="dwAddress.onChangeCountry()"></ff-select> </label> <label class="ff-row"> <ff-label flex="0 1 116px"> <span translate="GLOBAL.ADDRESS.STATE" ng-class="{ req: !dwAddress.notRequired && (!ffBlock || ffBlock.editMode) }"></span> </ff-label> <ff-select name="state" ff-model="dwAddress.address.state" ng-if="dwAddress.states[dwAddress.address.country.id]" ff-options="state.name for state in dwAddress.states[dwAddress.address.country.id]" ff-required="!dwAddress.notRequired" ff-validate-alert="State/Province"></ff-select> <ff-text name="state" ff-model="dwAddress.address.state" ng-if="!dwAddress.states[dwAddress.address.country.id]" ff-required="!dwAddress.notRequired" ff-validate-alert="{{\'GLOBAL.ADDRESS.STATE\' | translate}}" placeholder="Ontario"></ff-text> </label> <label class="ff-row"> <ff-label flex="0 1 116px"> <span translate="GLOBAL.ADDRESS.ZIP" ng-class="{ req: !dwAddress.notRequired && (!ffBlock || ffBlock.editMode) }"></span> </ff-label> <ff-text name="zip" ff-model="dwAddress.address.zip" placeholder="95018" ff-required="!dwAddress.notRequired" ff-validate-alert="{{\'GLOBAL.ADDRESS.ZIP\' | translate}}"></ff-text> </label> '},Njxs:function(e,t,r){"use strict";r("3dw1");var n=r("nbuU"),a=r.n(n),s=r("hsT8"),l=r.n(s),i=(r("ygJC"),r("oplH")),o=r.n(i),c=r("acNQ");t.a=angular.module("deskworks.membershipFilter",["flexForms","deskworks.state","deskworks.helper",c.a.name]).directive("membershipFilter",(function(){return{template:o.a,restrict:"E",scope:!0,controller:"MembershipFilterCtrl as $ctrl",bindToController:{ffModel:"=?",filterData:"=?",layout:"@?"}}})).controller("MembershipFilterCtrl",["$scope","$element","$attrs","state","helper","optsMembershipFilter",function(e,t,r,n,s,i){var o=this;function c(){var e;o.ffModel=l()(e=o.filterData).call(e,(function(e){return"all"!==e.id})).reduce((function(e,t){return t.value&&(e[t.id]=t.value),e}),{})}o.$onInit=function(){o.filterData=o.filterData||angular.copy(i),c()},o.onChange=function(e){if("all"===e.id){var t=a()(s).call(s,o.filterData,"all").value;o.filterData.forEach((function(e){"all"!==e.id&&(e.value=t)})),t||(a()(s).call(s,o.filterData,"activeMembers").value=!0)}else{var r;a()(s).call(s,o.filterData,"all").value=l()(r=o.filterData).call(r,(function(e){return"all"!==e.id})).every((function(e){return e.value}))}c()}}])},Oio6:function(e,t,r){"use strict";t.a=angular.module("dwPhoneDirective",[]).directive("dwPhone",["$compile","$translate",function(e,t){return{restrict:"AC",priority:30,terminal:!0,compile:function(r,n){var a=this;n.$set("maxlength",n.maxlength||64),n.$set("ffPattern",n.ffPattern||/^(?:\+\d[-. ]?)?(?:\(?\d\)?[-. ]?){5,13}\d$/),n.$set("placeholder",n.placeholder||"888-379-2865");var s=t.instant("USER_PROFILE.PHONES.NUMBER"),l=t.instant("GLOBAL.VALIDATION.PHONE");return n.$set("ffValidateAlert",n.ffValidateAlert||"{ field: '"+s+"', pattern: '"+l+"' }"),function(t,r,n){e(r,null,a.priority)(t)}}}}])},P6hd:function(e,t,r){"use strict";r("pMUn");t.a=angular.module("scrollPointerEventsNone",[]).directive("scrollPointerEventsNone",(function(){return{restrict:"AC",link:function(e,t){var r;function n(){clearTimeout(r),t.addClass("pointer-events-none"),r=setTimeout((function(){return t.removeClass("pointer-events-none")}),100)}t.on("scroll",n),e.$on("$destroy",(function(){return t.off("scroll",n)}))}}}))},SGGL:function(e,t,r){"use strict";t.a=angular.module("dwLastNameDirective",[]).directive("dwLastName",["$compile","$translate",function(e,t){return{restrict:"AC",priority:30,terminal:!0,compile:function(r,n){var a=this;n.$set("maxlength",n.maxlength||256),n.$set("ffPattern",n.ffPattern||/^[^\\<>\/&]*$/),n.$set("placeholder",n.placeholder||"Doe");var s=t.instant("USER_PROFILE.PERSONAL_INFO.LAST_NAME"),l=t.instant("USER_PROFILE.PERSONAL_INFO.LAST_NAME_INVALID_CHARS");return n.$set("ffValidateAlert",n.ffValidateAlert||"{ field: '"+s+"', pattern: '"+l+"' }"),function(t,r,n){e(r,null,a.priority)(t)}}}}])},Tjft:function(e,t,r){"use strict";var n=r("KK/u"),a=r.n(n),s=r("hsT8"),l=r.n(s);r("3dw1"),r("8cZI"),r("Muwe"),r("aZFp");t.a=angular.module("dwSearchUserDirective",[]).directive("dwSearchUser",["$compile","$q","$filter","ffHelper","state","userProfileService","dwAlerts",function(e,t,r,n,s,i,o){return{restrict:"A",priority:30,terminal:!0,template:'<ff-search-options><div><h6><span ng-bind-html="$search.highlighted.fullName"></span>{{$search.highlighted.company ? \',\' : \'\'}} <span ng-bind-html="$search.highlighted.company"></span> &lt;<span ng-bind-html="$search.highlighted.email"></span>&gt;</h6><small><span ng-repeat="match in $search.matches" class="match">{{match.name}}: <span ng-bind-html="(match.value || \'-\') + ($last ? \'\' : \', \')"></span></span></small></div></ff-search-options><ff-search-match ng-if="dwSearchUser.options !== \'activeNameOnly\'"><h6><span ng-bind="ffSearch.ngModel.$modelValue.fullName"></span>{{ffSearch.ngModel.$modelValue.company ? \',\' : \'\'}} <span ng-bind="ffSearch.ngModel.$modelValue.company"></span> &lt;<span ng-bind="ffSearch.ngModel.$modelValue.email"></span>&gt;</h6></ff-search-match><ff-search-match ng-if="dwSearchUser.options === \'activeNameOnly\'"><h6><span ng-bind="ffSearch.ngModel.$modelValue.fullName"></span></h6></ff-search-match>',controllerAs:"dwSearchUser",bindToController:{options:"@dwSearchUser"},controller:function(){this.filterUsers=function(e,t){var n;return(e=e||[]).forEach((function(e){for(var n in e.weight=0,e.matches=[{name:"login",value:r("highlight")(e.login,t)}],e.highlighted={fullName:r("highlight")(e.fullName,t),company:r("highlight")(e.company,t),email:r("highlight")(e.email,t)},e){if(e.hasOwnProperty(n)&&angular.isString(e[n])&&0!==n.indexOf("$$"))if(e[n].toLowerCase().indexOf(t.toLowerCase())>=0&&(e.weight++,"fullName"!==n&&"company"!==n&&"email"!==n&&"login"!==n)){var a=n.split(/(?=[A-Z])/).join(" ").toLowerCase();e.matches.push({name:a,value:r("highlight")(e[n],t)})}}})),a()(n=l()(e).call(e,(function(e){return e.weight>0}))).call(n,(function(e,t){return e.weight<t.weight?1:e.weight>t.weight?-1:0}))},this.searchUser=function(e){return i.quickSearch(s.getCurrentCenterId(),e).catch((function(e){return o.error(e,"Failed to quick search users.")}))}},compile:function(t,r){var n=this;return r.$set("ffSearch","dwSearchUser.searchUser($search)"),r.$set("ffSearchFilter","dwSearchUser.filterUsers($results, $search)"),r.$set("placeholder","start typing to search users"),function(t,r,a){e(r,null,n.priority)(t)}}}}])},Vtxe:function(e,t,r){"use strict";var n=r("b2yS"),a=r.n(n);t.a=angular.module("deskworks.dwInvoice",["flexForms","deskworks.state","deskworks.helper"]).directive("dwInvoice",(function(){return{template:a.a,restrict:"E",scope:!0,controller:"dwInvoiceCtrl as dwInvoice",bindToController:{center:"=*?",invoice:"=*",allowRemove:"@",updateInvoice:"&"},compile:function(e,t){return e.addClass("dw-invoice"),function(){}}}})).controller("dwInvoiceCtrl",["$scope","$element","$attrs","dwAlerts","state","purchaseService",function(e,t,r,n,a,s){var l=this;l.removeItem=function(e){return s.deletePurchaseItem(a.getCurrentCenterId(),a.getCurrentUserId(),l.invoice.id,e.id).catch((function(e){return n.error(e,"Failed to remove purchase item.")})).then((function(e){return l.updateInvoice()}))}}])},XRrO:function(e,t,r){"use strict";t.a=angular.module("dwPasswordDirective",[]).directive("dwPassword",["$compile","$translate",function(e,t){return{restrict:"AC",priority:30,terminal:!0,compile:function(r,n){var a,s=this;n.$set("minlength",n.minlength||n.ffMinlength||8),n.$set("maxlength",n.maxlength||n.ffMaxlength||20),n.$set("ffPattern",n.ffPattern||/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)\S{8,}$/),n.$set("placeholder","password");var l=t.instant("GLOBAL.PASSWORD.INVALID_CHARS");try{a=angular.fromJson(n.ffValidateAlert)}catch(e){a={}}return a=angular.extend({field:t.instant("GLOBAL.PASSWORD"),pattern:l,minlength:l},a),n.$set("ffValidateAlert",angular.toJson(a)),function(t,r,n){e(r,null,s.priority)(t)}}}}])},acNQ:function(e,t,r){"use strict";t.a=angular.module("deskworks.optsMembershipFilter",[]).factory("optsMembershipFilter",["$rootScope","$translate",function(e,t){var r=[{id:"all",_name:"USER_SEARCH.FILTERS.ALL",value:!1,type:"all"},{id:"activeMembers",_name:"USER_SEARCH.FILTERS.ACTIVE_MEMBERS",value:!0,type:"role"},{id:"inactiveMembers",_name:"USER_SEARCH.FILTERS.INACTIVE_MEMBERS",value:!1,type:"role"},{id:"activeCoMembers",_name:"USER_SEARCH.FILTERS.ACTIVE_CO_MEMBERS",value:!1,type:"role"},{id:"inactiveCoMembers",_name:"USER_SEARCH.FILTERS.INACTIVE_CO_MEMBERS",value:!1,type:"role"},{id:"nonMembers",_name:"USER_SEARCH.FILTERS.NON_MEMBERS",value:!1,type:"role"}];function n(){r.forEach((function(e){e.name=t.instant(e._name)}))}return n(),e.$on("$setTranslationsSuccess",n),r}])},b2yS:function(e,t){e.exports='<ff-header> <ff-row> <cell flex="4 0 40px" class="invoice-date ff-center"><span translate="PURCHASE.INVOICE.DATE"></span></cell> <cell flex="4 1 40px" class="invoice-date-created ff-center show-lg"><span translate="PURCHASE.INVOICE.DATE_CREATED"></span></cell> <cell flex="4 1 40px" class="invoice-added-by ff-center show-lg"><span translate="PURCHASE.INVOICE.ADDED_BY"></span></cell> <cell flex="4 0 70px" class="invoice-product"><span translate="PURCHASE.INVOICE.PRODUCT"></span></cell> <cell flex="10 1 100px" class="invoice-description show-md"><span translate="PURCHASE.INVOICE.DESCRIPTION"></span></cell> <cell flex="0 0 46px" class="invoice-quantity ff-center show-sm"><span translate="PURCHASE.INVOICE.QUANTITY"></span></cell> <cell flex="0 0 90px" class="invoice-price ff-right show-sm"><span translate="PURCHASE.INVOICE.PRICE"></span></cell> <cell flex="0 0 90px" class="invoice-amount ff-right"><span translate="PURCHASE.INVOICE.AMOUNT"></span></cell> <ff-btn-group flex="0 0 auto" ng-if="::dwInvoice.allowRemove !== \'false\'" class="buttons-row zero-height"> <ff-btn sense="remove" size="xs"></ff-btn> </ff-btn-group> </ff-row> </ff-header> <ff-row ng-repeat="item in dwInvoice.invoice.items"> <ff-static flex="4 0 40px" class="invoice-date ff-center" ff-bind="::item.billedAt | date:\'mediumDate\'"></ff-static> <ff-static flex="4 1 40px" class="invoice-date-created ff-center show-lg" ff-bind="::item.createdAt | date:\'mediumDate\'"></ff-static> <ff-static flex="4 1 40px" class="invoice-added-by ff-center show-lg" ff-bind="::item.addedBy"></ff-static> <ff-static flex="4 0 70px" class="invoice-product" ff-bind="::item.name"></ff-static> <ff-static flex="10 1 100px" class="invoice-description show-md" ff-bind="::item.description"></ff-static> <ff-static flex="0 0 46px" class="invoice-quantity ff-center show-sm" ff-bind="::item.quantity | round"></ff-static> <ff-static flex="0 0 90px" class="invoice-price ff-right show-sm" ff-bind="::item.price | ncurrency"></ff-static> <ff-static flex="0 0 90px" class="invoice-amount ff-right" ff-bind="::item.amount | ncurrency"></ff-static> <ff-btn-group flex="0 0 auto" ng-if="::dwInvoice.allowRemove !== \'false\'" class="buttons-row"> <ff-col> <ff-btn sense="remove" size="xs" title="{{\'GLOBAL.BTN_DELETE\' | translate}}" ng-if="dwInvoice.invoice.accessRights.items[$index].canDelete || !dwInvoice.invoice.accessRights.items[$index].canVoid" ng-class="{ \'zero-height\': !dwInvoice.invoice.accessRights.items[$index].canDelete }" ff-click="dwInvoice.removeItem(item)"></ff-btn> <ff-btn sense="remove" size="xs" title="{{\'PURCHASE.INVOICE.BTN_VOID\' | translate}}" ng-if="dwInvoice.invoice.accessRights.items[$index].canVoid || !dwInvoice.invoice.accessRights.items[$index].canDelete" ng-class="{ \'zero-height\': !dwInvoice.invoice.accessRights.items[$index].canVoid }" ff-click="dwInvoice.removeItem(item)"></ff-btn> </ff-col> </ff-btn-group> </ff-row> <ff-row class="invoice-charges"> <ff-label><span translate="PURCHASE.INVOICE.CHARGES"></span></ff-label> <ff-static flex="0 0 90px" class="ff-right" ff-bind="dwInvoice.invoice.chargesTotal | ncurrency"></ff-static> <ff-btn-group flex="0 0 auto" ng-if="::dwInvoice.allowRemove !== \'false\'" class="buttons-row zero-height"> <ff-btn sense="remove" size="xs"></ff-btn> </ff-btn-group> </ff-row> <ff-row class="invoice-tax" ng-repeat="tax in dwInvoice.invoice.taxes"> <ff-label>{{tax.taxName}}</ff-label> <ff-static flex="0 0 90px" class="ff-right" ff-bind="tax.taxAmount | ncurrency"></ff-static> <ff-btn-group flex="0 0 auto" ng-if="::dwInvoice.allowRemove !== \'false\'" class="buttons-row zero-height"> <ff-btn sense="remove" size="xs"></ff-btn> </ff-btn-group> </ff-row> <ff-row class="invoice-payment"> <ff-label><span translate="PURCHASE.INVOICE.PAYMENT"></span></ff-label> <ff-static flex="0 0 90px" class="ff-right" ff-bind="dwInvoice.invoice.paymentTotal | ncurrency"></ff-static> <ff-btn-group flex="0 0 auto" ng-if="::dwInvoice.allowRemove !== \'false\'" class="buttons-row zero-height"> <ff-btn sense="remove" size="xs"></ff-btn> </ff-btn-group> </ff-row> <ff-row class="invoice-balance"> <ff-label><span translate="PURCHASE.INVOICE.BALANCE"></span></ff-label> <ff-static flex="0 0 90px" class="ff-right" ff-bind="dwInvoice.invoice.balance | ncurrency"></ff-static> <ff-btn-group flex="0 0 auto" ng-if="::dwInvoice.allowRemove !== \'false\'" class="buttons-row zero-height"> <ff-btn sense="remove" size="xs"></ff-btn> </ff-btn-group> </ff-row> '},"bHG/":function(e,t){e.exports='<div id="forbid"> <h1 class="page-title" translate="GLOBAL.FORBID_STAFF.HEADER"></h1> <ff-panel class="ff-center"> <span translate="GLOBAL.FORBID_STAFF.TEXT" ng-if="$forbid.forbid === \'admin\'"></span> <span translate="GLOBAL.FORBID_MEMBER.TEXT" translate-values="{ center: $forbid.center.centerName }" ng-if="$forbid.forbid === \'member\'"></span> </ff-panel> <ff-btn-group class="buttons-bottom"> <ff-btn sense="signOut" ff-click="$forbid.signOut()" ng-if="$forbid.forbid === \'admin\'"><span translate="GLOBAL.BTN_SIGN_OUT"></span></ff-btn> <ff-btn sense="home" ff-click="$forbid.home()"><span translate="GLOBAL.BTN_HOME"></span></ff-btn> </ff-btn-group> </div> '},bfRn:function(e,t,r){"use strict";var n=r("yCd9"),a=r.n(n),s=r("nbuU"),l=r.n(s),i=r("KB0Y"),o=r.n(i);t.a=angular.module("deskworks.dwAddress",["flexForms","deskworks.helper"]).directive("dwAddress",["$compile","$templateCache","$timeout","$translate","helper","optsAddressType","optsCountry","optsState",function(e,t,r,n,s,i,c,f){return{template:o.a,restrict:"A",scope:!0,controllerAs:"dwAddress",bindToController:{secondStreet:"<",notRequired:"<"},controller:["$scope","$element","$attrs",function(e,t,o){var d=this;d.types=a()(i).call(i,(function(e){return angular.extend(e,{name:n.instant(e.name)})})),d.countries=c,d.states=f,d.address=e.$eval(o.dwAddress),d.hasType=e.$eval(o.dwAddressType),d.onChangeCountry=function(){r((function(){"US"===d.address.country.id?d.address.state=l()(s).call(s,f.US,"CA"):angular.isObject(d.address.state)&&delete d.address.state}))}}]}}])},c5i4:function(e,t,r){"use strict";r("JBxO"),r("FdtR");var n=r("nbuU"),a=r.n(n),s=r("bHG/"),l=r.n(s);t.a=angular.module("forbid",[]).directive("forbid",["$compile","session","state","userProfileService",function(e,t,r,n){return{restrict:"EA",scope:!0,controller:"ForbidCtrl as $forbid",bindToController:{admin:"<?",member:"<?"},link:function(n,s,i,o){var c=s.children().css({display:"none"});t.wait().then((function(){o.member?n.$watch((function(){return r.getCurrentCenterId()}),(function(t){var r;if(o.center=a()(r=o.member.activatedAt).call(r,(function(e){return e.centerId===t})),o.center)c.css({display:"none"}),s.append(e(l.a)(n)),o.forbid="member";else{c.css({display:null});var i=s[0].querySelector("#forbid");i&&i.remove(),o.forbid=null}})):o.admin&&t.isAdmin()?(s.append(e(l.a)(n)),o.forbid="admin"):c.css({display:null})}))}}}]).controller("ForbidCtrl",["$scope","$route","$timeout","state",function(e,t,r,n){this.signOut=function(){return n.logout({skipResetParams:!0}).finally((function(){return t.reload(),r(5e3)}))},this.home=function(){return n.resetParams(),n.setPath("/")}}])},d4ov:function(e,t,r){"use strict";t.a=angular.module("deskworks.UserField",["ngResource","deskworks.config"]).factory("UserField",["$resource","deskworksConfig",function(e,t){var r=e(t.getApiAbsUrl("/user-fields/:fieldId"),{},{update:{method:"PUT"}});return{query:function(){return r.query().$promise},save:function(e){return e.id?r.update({fieldId:e.id},e).$promise:r.save(e).$promise.then((function(t){e.id=t.id}))},delete:function(e){return r.delete({fieldId:e}).$promise}}}])},iAzO:function(e,t,r){"use strict";r("zyqg");t.a=angular.module("dwModal",["angularModalService"]).factory("dwModal",["ModalService",function(e){return{show:function(t){var r={bodyClass:"dw-modal-open",appendElement:angular.element(document.querySelector(".snap-content"))};return e.showModal(angular.extend({},r,t)).then((function(e){var t=e.element[0].querySelector(".dw-modal-cross");return t&&t.focus(),e}))}}}])},oSeY:function(e,t,r){"use strict";r("wg5g");t.a=angular.module("deskworks.dwSelectUser",["deskworks.state","flexForms","deskworks.helper"]).directive("dwSelectUser",["$route","$rootScope","state","helper",function(e,t,r,n){return{restrict:"E",scope:!0,compile:function(e,t){var r=angular.element('<ff-static snap-close ng-click="searchUser()" role="button" aria-label="{{\'SIDEBAR.CURRENT_USER\' | translate}}" ng-class="{ ava: state.isUserSelected() && state.getCurrentUser().photo.indexOf(\'missing.png\') < 0 }"></ff-static>'),n=angular.element('<span class="placeholder" ng-hide="state.isUserSelected()" translate="SIDEBAR.CURRENT_USER.LABEL"></span>'),a=angular.element('<span class="company" ng-show="state.isUserSelected() && state.getCurrentUser().company" ng-bind="state.getCurrentUser().company"></span>'),s=angular.element('<span class="member" ng-show="state.isUserSelected()" ng-bind="state.getCurrentUser().fullName"></span>'),l=angular.element('<ff-img class="avatar" ff-src="{{state.getCurrentUser().photo}}" ng-if="state.isUserSelected()" ff-alt="{{state.getCurrentUser().fullName}}">'),i=angular.element('<div class="ff-dimmer ff-spin" ng-if="spinning()"></div>');return r.append(n).append(a).append(s).append(l).append(i),e.append(r).append(l),this.link},link:function(a,s,l,i,o){a.state=r,a.helper=n,a.searchUser=function(){r.setParam("redirect",e.current&&e.current.scope&&e.current.scope.backPath?e.current.scope.backPath:r.getPath()),r.setPath("/user-search")},a.spinning=function(){return r.isUserSelected()&&r.getCurrentUser().id!==r.getCurrentUserId()||a.loading},a.$onDestroy=function(){return a.offRouteStart(),a.offRouteSuccess(),void a.offRouteError()},a.offRouteStart=t.$on("$routeChangeStart",(function(e,t){t.$$route&&(a.loading="user-search"===t.$$route.routeBranch)})),a.offRouteSuccess=t.$on("$routeChangeSuccess",(function(){a.loading=!1})),a.offRouteError=t.$on("$routeChangeError",(function(){a.loading=!1}))}}}])},oplH:function(e,t){e.exports='<label ng-if="$ctrl.layout" class="ff-grid" flex="1 0 180px" ng-repeat="filter in $ctrl.filterData" ng-class="\'mf-\' + filter.type"> <ff-label> <ff-checkbox name="role" ff-model="filter.value" ff-change="$ctrl.onChange(filter)">{{filter.name}}</ff-checkbox> </ff-label> </label> <label ng-if="!$ctrl.layout" ng-repeat="filter in $ctrl.filterData" ng-class="\'mf-\' + filter.type"> <ff-checkbox name="role" ff-model="filter.value" ff-change="$ctrl.onChange(filter)">{{filter.name}}</ff-checkbox> </label> '},pMUn:function(e,t,r){},pZrh:function(e,t){e.exports='<label class="ff-row"> <ff-label flex="0 0 132px"> <span translate="BILLING_PROFILE.E_CHECKS.ACCOUNT_HOLDER_TYPE" ng-class="{ req: ffBlock.editMode }"></span> </ff-label> <ff-select name="bankAccountHolderType" ff-model="dwEC.check.bankAccountHolderType" ff-options="type.name for type in dwEC.optsBankAccountHolderType" ff-required="true" ff-validate-alert="{{\'BILLING_PROFILE.E_CHECKS.ACCOUNT_HOLDER_TYPE\' | translate}}"></ff-select> </label> <label class="ff-row"> <ff-label flex="0 0 132px"> <span translate="BILLING_PROFILE.E_CHECKS.ACCOUNT_TYPE" ng-class="{ req: ffBlock.editMode }"></span> </ff-label> <ff-select name="bankAccountType" ff-model="dwEC.check.bankAccountType" ff-options="type.name for type in dwEC.optsBankAccountType" ff-required="true" ff-validate-alert="{{\'BILLING_PROFILE.E_CHECKS.ACCOUNT_TYPE\' | translate}}"></ff-select> </label> <label class="ff-row"> <ff-label flex="0 0 132px"> <span translate="BILLING_PROFILE.E_CHECKS.BANK_NAME" ng-class="{ req: ffBlock.editMode }"></span> </ff-label> <ff-text name="bankName" ff-model="dwEC.check.bankName" placeholder="Bank of America" ff-required="true" ff-validate-alert="{{\'BILLING_PROFILE.E_CHECKS.BANK_NAME\' | translate}}"></ff-text> </label> <label class="ff-row"> <ff-label flex="0 0 132px"> <span translate="BILLING_PROFILE.E_CHECKS.ROUTING_NUMBER" ng-class="{ req: ffBlock.editMode }"></span> </ff-label> <ff-text name="bankRoutingNumber" ff-model="dwEC.check.bankRoutingNumber" ff-required="true" ff-validate-alert="{{\'BILLING_PROFILE.E_CHECKS.ROUTING_NUMBER\' | translate}}"></ff-text> </label> <label class="ff-row"> <ff-label flex="0 0 132px"> <span translate="BILLING_PROFILE.E_CHECKS.ACCOUNT_NUMBER" ng-class="{ req: ffBlock.editMode }"></span> </ff-label> <ff-text name="bankAccountNumber" ff-model="dwEC.check.bankAccountNumber" ff-required="true" ff-validate-alert="{{\'BILLING_PROFILE.E_CHECKS.ACCOUNT_NUMBER\' | translate}}"></ff-text> </label> <label class="ff-row"> <ff-label flex="0 0 132px"> <span translate="BILLING_PROFILE.E_CHECKS.ACCOUNT_NAME" ng-class="{ req: ffBlock.editMode }"></span> </ff-label> <ff-text name="fullName" ff-model="dwEC.check.fullName" placeholder="John Doe" ff-required="true" ff-validate-alert="{{\'BILLING_PROFILE.E_CHECKS.ACCOUNT_NAME\' | translate}}"></ff-text> </label> '},px9Z:function(e,t){e.exports='<span>Check In / Out</span> <ff-btn-group> <ff-btn sense="checkIn" size="sm" ng-hide="$ctrl.log.checkInTime" ff-click="$ctrl.checkInOut(\'checkIn\')">Check In</ff-btn> <ff-btn sense="checkOut" size="sm" ng-show="$ctrl.log.checkInTime" ff-click="$ctrl.checkInOut(\'checkOut\')">Check Out</ff-btn> </ff-btn-group> '},"sh/D":function(e,t,r){"use strict";r("3dw1");var n=r("nbuU"),a=r.n(n);t.a=angular.module("deskworks.ReservationField",["ngResource","deskworks.config"]).factory("ReservationField",["$resource","$filter","$timeout","deskworksConfig","helper",function(e,t,r,n,s){var l=e(n.getApiAbsUrl("/reservation-fields/:id"),{},{update:{method:"PUT"}});return{query:function(){return l.query().$promise.then((function(e){return function(e){var r=function(e){return e||0===e||!1===e},n={date:function(e,n){return r(n)?t("date")(n,"mediumDate"):"-"},customPrice:function(e,n){return r(n)?t("ncurrency")(n):"-"},extraPrice:function(e,n){return r(n)?t("ncurrency")(n):"-"},dropdown:function(e,t){var n;return r(t)?a()(n=e.options).call(n,(function(e){return e.id==t})).name:"-"},checkbox:function(e,n){return r(n)?t("yesno")(n):"-"}};return e.forEach((function(e){e.$$filter=n[e.type]||function(e,t){return r(t)?t:"-"}})),e}(e)})).then((function(e){return function(e){var r={date:function(e,r){return t("toDate")(r)},customPrice:function(e,t){return isNaN(+t)?t:+t},extraPrice:function(e,t){return isNaN(+t)?t:+t},dropdown:function(e,t){return isNaN(+t)?t:+t},number:function(e,t){return isNaN(+t)?t:+t},checkbox:function(e,t){return"true"===t||"false"!==t&&t}};return e.forEach((function(e){e.$$deserialize=r[e.type]||function(e,t){return t}})),e}(e)})).then((function(e){return function(e){var r={date:function(e,r){return t("date")(r,"yyyy-MM-dd")},customPrice:function(e,t){return isNaN(+t)?t:+t},extraPrice:function(e,t){return isNaN(+t)?t:+t},dropdown:function(e,t){return isNaN(+t)?t:+t},number:function(e,t){return isNaN(+t)?t:+t},checkbox:function(e,t){return"true"===t||"false"!==t&&t}};return e.forEach((function(e){e.$$serialize=r[e.type]||function(e,t){return t}})),e}(e)}))},save:function(e){return e.id?l.update({id:e.id},e).$promise:l.save(e).$promise.then((function(t){e.id=t.id}))},delete:function(e){return l.delete({id:e}).$promise}}}])},wg5g:function(e,t,r){},y1jH:function(e,t){e.exports='<label class="ff-row"> <ff-label flex="0 0 116px"><span translate="BILLING_PROFILE.CREDIT_CARDS.NUMBER" ng-class="{ req: ffBlock.editMode }"></span></ff-label> <ff-cc-number name="number" ff-model="$ctrl.cc.number" placeholder="4111 1111 1111 1111" ff-required="true" ff-validate-alert="{{\'BILLING_PROFILE.CREDIT_CARDS.NUMBER\' | translate}}" cc-type="$ctrl.ccType" cc-types="$ctrl.ccTypes"></ff-cc-number> </label> <ff-row> <label flex="0 0 60%"> <ff-label flex="0 0 116px"><span translate="BILLING_PROFILE.CREDIT_CARDS.EXPIRY" ng-class="{ req: ffBlock.editMode }"></span></ff-label> <ff-select flex="1 1 1%" name="expiryMonth" ff-model="$ctrl.cc.expiryMonth" ff-options="opt.name for opt in $ctrl.optsCCExpiryMonth" ff-required="true" ff-validate-alert="{{\'BILLING_PROFILE.CREDIT_CARDS.EXPIRY.MONTH\' | translate}}" aria-label="{{\'BILLING_PROFILE.CREDIT_CARDS.EXPIRY.MONTH\' | translate}}"></ff-select> </label> <label flex="1 1 auto"> <ff-select flex="1 1 1%" name="expiryYear" ff-model="$ctrl.cc.expiryYear" ff-options="opt.name for opt in $ctrl.optsCCExpiryYear" ff-required="true" ff-validate-alert="{{\'BILLING_PROFILE.CREDIT_CARDS.EXPIRY.YEAR\' | translate}}" aria-label="{{\'BILLING_PROFILE.CREDIT_CARDS.EXPIRY.YEAR\' | translate}}"></ff-select> </label> <label flex="0 0 76px" title="Security Code"> <ff-label flex="0 1 40px"><span translate="BILLING_PROFILE.CREDIT_CARDS.CVV" ng-class="{ req: ffBlock.editMode }"></span></ff-label> <ff-text flex="1 1 1%" name="cvv" ff-model="$ctrl.cc.ccv" placeholder="123" ff-required="true" ff-validate-alert="{{\'BILLING_PROFILE.CREDIT_CARDS.CVV\' | translate}}"></ff-text> </label> </ff-row> <ff-row> <label flex="0 0 60%"> <ff-label flex="0 0 116px"><span translate="BILLING_PROFILE.CREDIT_CARDS.NAME_ON_CARD" ng-class="{ req: ffBlock.editMode }"></span></ff-label> <ff-text flex="1 1 1%" name="firstName" ff-model="$ctrl.cc.firstName" placeholder="John" ff-required="true" ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.FIRST_NAME\' | translate}}"></ff-text> </label> <label flex="1 1 auto"> <ff-text flex="1 1 1%" name="lastName" ff-model="$ctrl.cc.lastName" placeholder="Doe" ff-required="true" ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.LAST_NAME\' | translate}}"></ff-text> </label> </ff-row> '},ygJC:function(e,t,r){},yrhy:function(e,t,r){"use strict";t.a=angular.module("dwLoginDirective",[]).directive("dwLogin",["$compile","$translate",function(e,t){return{restrict:"AC",priority:30,terminal:!0,compile:function(r,n){var a=this;n.$set("minlength",n.minlength||4),n.$set("maxlength",n.maxlength||256),n.$set("ffPattern",n.ffPattern||/^\w[\w\.\-_@]+$/),n.$set("placeholder",n.placeholder||"jdoe");var s=t.instant("GLOBAL.LOGIN"),l=t.instant("GLOBAL.LOGIN.INVALID_CHARS");return n.$set("ffValidateAlert",n.ffValidateAlert||"{ field: '"+s+"', pattern: '"+l+"' }"),function(t,r,n){e(r,null,a.priority)(t)}}}}])},zTcH:function(e,t,r){"use strict";angular.module("deskworks.MessageBoardUserSettings",["ngResource","deskworks.config"]).factory("MessageBoardUserSettings",["$resource","$q","deskworksConfig","helper",function(e,t,r,n){var a=e(r.getApiAbsUrl("/dw-mail/message-board/users/:userId"),{},{update:{method:"PUT"}});return{get:function(e){return!e||n.isUid(e)?t.when({notification:"immediately"}):a.get({userId:e}).$promise},save:function(e,t){return a.update({userId:e},t).$promise}}}]),angular.module("deskworks.optsMessageBoardNotices",[]).factory("optsMessageBoardNotices",["$rootScope","$translate",function(e,t){var r=[{id:"immediately",_name:"USER_PROFILE.MESSAGE_BOARD_NOTICES.IMMEDIATELY"},{id:"daily",_name:"USER_PROFILE.MESSAGE_BOARD_NOTICES.DAILY"},{id:"weekly",_name:"USER_PROFILE.MESSAGE_BOARD_NOTICES.WEEKLY"},{id:"never",_name:"USER_PROFILE.MESSAGE_BOARD_NOTICES.NEVER"}];function n(){r.forEach((function(e){e.name=t.instant(e._name)}))}return n(),e.$on("$setTranslationsSuccess",n),r}]);var n=r("Bz93"),a=r.n(n);t.a=angular.module("deskworks.messageBoardUserSettings",["deskworks.MessageBoardUserSettings","deskworks.optsMessageBoardNotices"]).directive("messageBoardUserSettings",(function(){return{template:a.a,restrict:"EAC",scope:!0,controller:"MessageBoardUserSettingsCtrl as $ctrl",bindToController:{userId:"<",save:"="}}})).controller("MessageBoardUserSettingsCtrl",["$scope","$timeout","state","helper","dwAlerts","MessageBoardUserSettings","optsMessageBoardNotices",function(e,t,r,n,a,s,l){var i=this;function o(){return t((function(){return s.save(i.userId,i.settings).catch((function(e){return a.error(e,"Failed to save message board user settings.")}))}))}i.optsMessageBoardNotices=l,i.$onInit=function(){i.save=o,s.get(i.userId).catch((function(e){return a.error(e,"Failed to get message board user settings.")})).then((function(e){i.settings=e}))}}])},zyqg:function(e,t,r){}},[["QfWi",57,76,72,80,75,68,79,77,73,71,85,78,66,65,74,81,83,67,87,84,70,82,86,69,37,42,35,38,41,40,36]]]);