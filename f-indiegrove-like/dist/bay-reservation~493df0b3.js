(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"03gP":function(e,t,r){"use strict";var n=r("yCd9"),a=r.n(n),s=r("6RpP"),i=r.n(s),o=r("ipr/"),l=r.n(o);r("3dw1");t.a=angular.module("deskworks.bayCalDataPreProcess",[]).factory("bayCalDataPreProcess",["state","bayCapacity",function(e,t){return function(r){var n=+e.getParam("guests");if(!r||isNaN(n)||n<=0)return r;var s=Math.ceil(n/t);return r.forEach((function(e){({units:e.reservationUnits}).units.forEach((function(e){e.$$ranges||(e.$$ranges=[],e.availabilities.forEach((function(t){e.$$ranges.push(moment.range(t.from,t.to))})),e.reservations.forEach((function(t){var r,n=moment.range(t.from,t.to);e.$$ranges=a()(r=e.$$ranges).call(r,(function(e){return e.subtract(n)})).reduce((function(e,t){return i()(e).call(e,t)}),[])})))}))})),r.forEach((function(e){e.reservationUnits.forEach((function(t,r){!function(e){for(var t=e.units,r=e.index,n=e.size,s=[],i=r;i<t.length&&i<r+n&&t[i].$$ranges.length>0;i++)s.push(t[i]);for(var o=r-1;o>=0&&o>r-n&&s.length>0&&t[o].$$ranges.length>0;o--)s.unshift(t[o]);var c=s.indexOf(t[r]);if(c<0)return[];for(var f=[],u=function(e){var t=l()(s).call(s,e,e+n);t.length===n&&(t.$$intersections=s[c].$$ranges,t.forEach((function(e){var r=[];t.$$intersections.forEach((function(t){e.$$ranges.forEach((function(e){var n=t.intersect(e);n&&r.push(n)}))})),t.$$intersections=r})),t.$$duration=t.$$intersections.reduce((function(e,t){return e+t.diff("minutes",!0)}),0),f.push(t))},p=0;p+n<=s.length;p++)u(p);if(f.length){var d,g=f.reduce((function(e,t){return e.$$duration>=t.$$duration?e:t}));s[c].availabilities=a()(d=g.$$intersections).call(d,(function(e){return{from:e.start,to:e.end}})),s[c].$$series=g}else s[c].availabilities=[],s[c].$$series=[]}({units:e.reservationUnits,index:r,size:s})}))})),r}}])},"0FnQ":function(e,t,r){"use strict";r.r(t);var n=r("ee+B");t.default=angular.module("deskworks.BayReservationGuestsCountDialogCtrl",[n.a.name]).controller("BayReservationGuestsCountDialogCtrl",["$scope","state","helper","close",function(e,t,r,n){var a=this;isNaN(+t.getParam("guests"))||(a.guestsCount=t.getParam("guests")),a.next=function(){r.pointFirstInvalid("#bayReservation")||(n(),t.setParam("guests",a.guestsCount))},a.back=function(){return t.setPath("/bay-reservation")}}])},"1/Md":function(e,t,r){"use strict";var n=r("NOor"),a=r.n(n),s=r("0zKI"),i=r.n(s);t.a=angular.module("deskworks.dwInvoicePaymentProcessingFee",["deskworks.state","deskworks.helper"]).directive("dwInvoicePaymentProcessingFee",(function(){return{restrict:"A",scope:!0,controller:"DwInvoicePaymentProcessingFeeCtrl as $ctrl",bindToController:{invoice:"<",settings:"<",creditCards:"<",eChecks:"<"}}})).controller("DwInvoicePaymentProcessingFeeCtrl",["$scope","$timeout","state","helper",function(e,t,r,n){var s=this;s.$onChanges=function(){return t((function(){var e,t;if(s.invoice&&s.settings&&s.creditCards&&s.eChecks&&s.settings.enablePaymentProcessingCharges){var r=0;s.creditCards.length?r=s.settings.paymentProcessingRates.cc||0:s.eChecks.length&&(r=s.settings.paymentProcessingRates.ach||0);var o=a()(e=s.invoice.items).call(e,(function(e){return"fake-payment-processing-fee"===e.id}));if(o>=0&&i()(t=s.invoice.items).call(t,o,1),r&&+s.invoice.balance){var l=n.round(r*+s.invoice.balance/100),c={addedBy:"system",amount:l,billedAt:moment(),createdAt:moment(),description:"Payment processing fee",id:"fake-payment-processing-fee",name:"Payment Fee",price:l,quantity:1};s.invoice.items.push(c),angular.isUndefined(s.invoice.chargesTotalInitial)&&(s.invoice.chargesTotalInitial=+s.invoice.chargesTotal),angular.isUndefined(s.invoice.balanceInitial)&&(s.invoice.balanceInitial=+s.invoice.balance),s.invoice.chargesTotal=n.round(s.invoice.chargesTotalInitial+l),s.invoice.balance=n.round(s.invoice.balanceInitial+l)}}}))}}])},"1OaI":function(e,t,r){},"5Rx4":function(e,t,r){var n={"./01-calendar/calendar.controller.js":"X78C","./02-reservation/reservation.controller.js":"sQOk","./03-sign-in/sign-in.controller.js":"dNoX","./04-confirm/confirm.controller.js":"OnA3","./05-complete/complete.controller.js":"fWpV","./06-purchase/purchase.controller.js":"OGm8","./07-sign-up/sign-up.controller.js":"PWIA","./90-dialogs/bay-reservation-dialogs.service.js":"MQNn","./90-dialogs/bay-reservation-guests-count-dialog.controller.js":"0FnQ","./90-dialogs/bay-reservation-info-dialog.controller.js":"ANgY"};function a(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id="5Rx4"},"7U0q":function(e,t){e.exports='<h1 class="page-title">{{state.getPageTitle()}}</h1> <form class="ff-grid gutter-v" style="max-width:480px"> <ff-panel> <ff-row> <ff-label flex="0 1 100px"><span translate="RESERVATIONS.LOCATION"></span></ff-label> <ff-static>{{::$resolve.center.name}}</ff-static> </ff-row> <ff-row ng-repeat="unit in $ctrl.units"> <ff-label flex="0 1 100px"><span translate="BAY_RESERVATION.BAY"></span></ff-label> <ff-static>{{::unit.name}}</ff-static> </ff-row> <ff-row> <ff-label flex="0 1 100px"><span translate="RESERVATIONS.DATE"></span></ff-label> <ff-static>{{::$ctrl.timeStart | date:\'longDate\'}}</ff-static> </ff-row> <ff-row> <ff-label flex="0 1 100px"><span translate="RESERVATIONS.TIME"></span></ff-label> <ff-static> <span><span nice-time="::$ctrl.timeStart"></span> - <span nice-time="::$ctrl.timeEnd"></span></span> </ff-static> </ff-row> <div ng-if="$ctrl.hasRecurring()"> <ff-row> <ff-label flex="0 1 100px"><span translate="RESERVATIONS.REPEAT_FREQUENCY"></span></ff-label> <ff-static name="repeats"><span ng-bind="$ctrl.repeatFrequency.name"></span></ff-static> </ff-row> <ff-row ng-if="$ctrl.repeatFrequency.repeatDurationOptions"> <ff-label flex="0 1 100px"><span translate="RESERVATIONS.REPEAT_DURATION"></span></ff-label> <ff-static>{{$ctrl.repeatFrequency.repeatDurationFilter($ctrl.repeatDuration)}}</ff-static> </ff-row> </div> <label class="ff-row" style="margin-left:.5rem;margin-top:.5rem"> <ff-checkbox name="emailConfirmation" ff-model="$ctrl.emailConfirmation"> <span translate="RESERVATIONS.EMAIL_CONFIRMATION"></span> </ff-checkbox> </label> </ff-panel> <ff-btn-group> <ff-btn sense="back" ff-click="$ctrl.back()"><span translate="GLOBAL.BTN_BACK"></span></ff-btn> <ff-btn sense="ok" type="submit" ff-click="$ctrl.next()"><span translate="GLOBAL.BTN_CONFIRM"></span></ff-btn> </ff-btn-group> </form> '},"7v6b":function(e,t,r){e.exports=r("M381")},ANgY:function(e,t,r){"use strict";r.r(t);r("aZFp"),r("Muwe");var n=r("nbuU"),a=r.n(n),s=r("yCd9"),i=r.n(s),o=r("hsT8"),l=r.n(o),c=r("6RpP"),f=r.n(c),u=r("ee+B");t.default=angular.module("deskworks.BayReservationInfoDialogCtrl",[u.a.name]).controller("BayReservationInfoDialogCtrl",["$scope","state","helper","close","calData","unitId","bayCapacity",function(e,t,r,n,s,o,c){var u,p,d=this;d.bayCapacity=c,d.category=a()(s).call(s,(function(e){var t;return a()(t=e.reservationUnits).call(t,(function(e){return e.id==o}))})),d.series=i()(u=t.getParam("series").split(",")).call(u,(function(e){return+e})),d.units=l()(p=s.reduce((function(e,t){return f()(e).call(e,t.reservationUnits)}),[])).call(p,(function(e){return d.series.indexOf(e.id)>=0})),isNaN(+t.getParam("guests"))||(d.guestsCount=t.getParam("guests")),d.next=function(){r.pointFirstInvalid("#bayReservation")||(n(!0),t.setParam("guests",d.guestsCount))},d.back=function(){return n(!1)}}])},Caj8:function(e,t,r){"use strict";var n=r("YwtS"),a=r.n(n);t.a=angular.module("newUserProfileDirective",[]).directive("newUserProfile",(function(){return{template:a.a,restrict:"E",scope:!0,controller:"NewUserProfileCtrl as $ctrl",bindToController:{reg:"<",user:"<",center:"<"}}})).controller("NewUserProfileCtrl",["$scope","userProfileService",function(e,t){var r=this;r.$onInit=function(){t.bindTestUserGenerator(e,r.user,r.reg)}}])},DDl7:function(e,t,r){r("h2hn");var n=r("/ZBe").Object,a=e.exports=function(e,t,r){return n.defineProperty(e,t,r)};n.defineProperty.sham&&(a.sham=!0)},Ekwr:function(e,t,r){e.exports=r("MK67")},G5Je:function(e,t,r){"use strict";var n=r("IOh7"),a=r.n(n);angular.module("deskworks.StaffHelpCtrl",["ngRoute","deskworks.helper","deskworks.config"]).directive("staffHelp",(function(){return{template:a.a,restrict:"E",scope:!0,controller:"StaffHelpDirectiveCtrl as $ctrl"}})).controller("StaffHelpDirectiveCtrl",["$scope","$translate","dwAlerts","helper","state","deskworksConfig",function(e,t,r,n,a,s){this.notice=a.getParam("notice"),a.setPageTitle(t.instant("SIMPLE_RES.STAFF_HELP.PAGE_TITLE")),e.$on("$routeChangeStart",(function(e,n,a){!n.$$route||"MemberSignUpBillingCtrl"!==n.$$route.controller&&"MemberSignUpPurchaseCtrl"!==n.$$route.controller&&"SimpleReservationBillingCtrl"!==n.$$route.controller&&"SimpleReservationPurchaseCtrl"!==n.$$route.controller&&"BuyPassBillingCtrl"!==n.$$route.controller&&"BuyPassPurchaseCtrl"!==n.$$route.controller||(r.error(t.instant("SIMPLE_RES.STAFF_HELP.BACK_ERROR")),e.preventDefault())})),this.home=function(){return a.resetParams(),a.setPath(s.getDefaultRoute())}}])},HGI2:function(e,t,r){r("BZMQ");var n=r("/ZBe");e.exports=n.Object.getOwnPropertySymbols},IJqC:function(e,t){e.exports='<ff-panel id="reservationAgreement" class="ff-no-frame"> <label> <ff-checkbox ff-model="reservationAgreement" ff-required="true" ff-validate-alert="{ required: (\'RESERVATIONS.RESERVATION_AGREEMENT.REQUIRED\' | translate) }" title="{{\'RESERVATIONS.RESERVATION_AGREEMENT.REQUIRED\' | translate}}"> <div translate="RESERVATIONS.RESERVATION_AGREEMENT.LABEL"></div> <a ng-href="{{::wlLinks.reservationAgreementLinkUrl}}" ng-bind="::wlLinks.reservationAgreementLinkText" target="_blank" rel="noopener"></a> </ff-checkbox> </label> </ff-panel> '},IOh7:function(e,t){e.exports='<h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="gutter-v"> <ff-panel> <span ng-bind="::$ctrl.notice"></span> </ff-panel> <ff-btn-group> <ff-btn sense="home" type="submit" ff-click="$ctrl.home()"><span translate="GLOBAL.BTN_HOME"></span></ff-btn> </ff-btn-group> </div> '},"J/A3":function(e,t,r){var n={"./04-confirm/confirm.tpl.html":"7U0q","./05-complete/complete.tpl.html":"kDfq","./06-purchase/purchase.tpl.html":"xdWW","./07-sign-up/sign-up.tpl.html":"gt1X","./90-dialogs/bay-reservation-guests-count-dialog.tpl.html":"SyYB","./90-dialogs/bay-reservation-info-dialog.tpl.html":"MGkq"};function a(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id="J/A3"},LPPa:function(e,t,r){r("YpQb");var n=r("/ZBe");e.exports=n.Object.getOwnPropertyDescriptors},M381:function(e,t,r){var n=r("DDl7");e.exports=n},MGkq:function(e,t){e.exports='<div class="dw-modal"> <div class="dw-modal-fade"></div> <form name="form" class="dw-modal-dialog ff-col" novalidate id="bayReservation" style="max-width:500px"> <ff-static class="ff-no-frame" ff-style="{ \'line-height\': 1.3 }" ng-if="$ctrl.guestsCount > $ctrl.bayCapacity"> <ff-icon sense="info" class="bay-dialog-big-icon"></ff-icon> <span translate="BAY_RESERVATION.GUESTS_OVERFLOW" translate-values="{ capacity: $ctrl.bayCapacity, category: $ctrl.category.name }"></span> </ff-static> <ff-header class="ff-tmargin"><span translate="BAY_RESERVATION.RESERVING_BAYS"></span></ff-header> <ff-row ng-repeat="unit in $ctrl.units"> <ff-static>{{::unit.name}}</ff-static> </ff-row> <ff-btn-group class="ff-tmargin"> <ff-btn sense="back" ff-click="$ctrl.back()"><span translate="GLOBAL.BTN_BACK"></span></ff-btn> <ff-btn sense="next" type="submit" ff-click="$ctrl.next()"><span translate="BAY_RESERVATION.BTN_CONTINUE"></span></ff-btn> </ff-btn-group> </form> </div> '},MK67:function(e,t,r){var n=r("HGI2");e.exports=n},MQNn:function(e,t,r){"use strict";r.r(t);r("3dw1");var n=r("03wM"),a=r.n(n),s=r("Ekwr"),i=r.n(s),o=r("hsT8"),l=r.n(o),c=r("lvz6"),f=r.n(c),u=r("yKah"),p=r.n(u),d=r("fzuT"),g=r.n(d),v=r("SyYB"),m=r.n(v),h=r("MGkq"),b=r.n(h),$=r("iAzO"),E=r("0FnQ"),C=r("ANgY");function P(e,t){var r=a()(e);if(i.a){var n=i()(e);t&&(n=l()(n).call(n,(function(t){return f()(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){g()(e,t,r[t])})):p.a?Object.defineProperties(e,p()(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,f()(r,t))}))}return e}t.default=angular.module("deskworks.bayReservationDialogs",[$.a.name,E.default.name,C.default.name]).factory("bayReservationDialogs",["dwModal",function(e){return{showGuestsCount:function(t){return e.show(R({template:m.a,controller:"BayReservationGuestsCountDialogCtrl as $ctrl",inputs:{}},t))},showInfo:function(t){return e.show(R({template:b.a,controller:"BayReservationInfoDialogCtrl as $ctrl",inputs:{}},t))}}}])},OGm8:function(e,t,r){"use strict";r.r(t);r("aZFp"),r("Muwe"),r("y89P"),r("FdtR"),r("JBxO"),r("3dw1");var n=r("yCd9"),a=r.n(n),s=r("hsT8"),i=r.n(s),o=r("nbuU"),l=r.n(o),c=r("03wM"),f=r.n(c),u=r("dLOS"),p=r("aIjk"),d=r("tzPS"),g=r("Vtxe"),v=r("1/Md"),m=r("+l1P");t.default=angular.module("deskworks.BayReservationPurchaseCtrl",["ngRoute","deskworks.helper","deskworks.StaffHelpCtrl","deskworks.purchase.service","deskworks.reservationService","deskworks.userProfile.service","deskworks.reservationUnit.optsRepeatFrequency",u.a.name,p.a.name,d.a.name,g.a.name,v.a.name,m.a.name]).controller("BayReservationPurchaseCtrl",["$scope","$filter","$q","$route","$translate","$timeout","dwAlerts","helper","session","state","center","purchase","user","units","settings","reservationFields","purchaseService","reservationService","userProfileService","optsRepeatFrequency",function(e,t,r,n,s,o,c,u,p,d,g,v,m,h,b,$,E,C,P,R){var y,w,k=this;d.setPageTitle(s.instant("SIMPLE_RES.PURCHASE.PAGE_TITLE",{centerName:g.name})),k.center=g,k.user=m,k.purchase=v,k.packages=a()(y=d.getParam("packages").split(",")).call(y,(function(e){return+e})),k.series=a()(w=d.getParam("series").split(",")).call(w,(function(e){return+e})),k.units=i()(h).call(h,(function(e){return k.series.indexOf(e.id)>=0})),k.timeStart=t("toDate")(d.getParam("start")),k.timeEnd=t("toDate")(d.getParam("end")),k.reservationTitle=d.getParam("title")||"",k.reservationNote=d.getParam("note")||"",k.emailConfirmation=!!d.getParam("confirm"),e.$watch("$ctrl.emailConfirmation",(function(e){d.setParam("confirm",e||null).replace()})),k.repeatFrequency=R[0],d.getParam("freq")&&(k.repeatFrequency=l()(R).call(R,(function(e){return e.id===d.getParam("freq")})),k.repeatFrequency&&k.repeatFrequency.repeatDurationOptions&&d.getParam("duration")-1<k.repeatFrequency.repeatDurationOptions.length&&(k.repeatDuration=+d.getParam("duration"))),k.next=function(){if(!u.pointFirstInvalid("#bayReservationPurchase"))return k.spin=!0,P.saveBillingProfile(d.getCurrentCenterId(),m).then((function(e){return+k.purchase.balance<=0?d.setPath("/bay-reservation/complete"):k.createReservationWithPayment().then((function(e){return k.updatePurchase().then((function(t){return e}))})).then((function(e){return d.replace().setParam("accessCode",e.accessCode),o((function(e){return d.setPath("/bay-reservation/complete")}))}))})).finally((function(e){k.spin=!1}))},k.createReservationWithPayment=function(e){var t=JSON.parse(d.getParam("fields")||"{}");f()(t).forEach((function(e){var r=l()($).call($,(function(t){return t.id===+e}));t[e]=r.$$serialize(r,t[e])}));var r={from:k.timeStart,to:k.timeEnd,reservationNote:k.reservationNote,title:k.reservationTitle,reservationUnitIds:k.series,purchasePackageIds:k.packages,emailConfirmation:k.emailConfirmation,repeatFrequency:k.repeatFrequency.id,repeatDuration:k.repeatDuration,fields:t};return C.saveWithPayment(k.center.id,k.user.id,r).catch((function(e){return c.error(e,"Failed to make reservation and payment.")}))},k.updatePurchase=function(e){return E.get(k.center.id,k.user.id,k.purchase.id).catch((function(e){return c.error(e,"Failed to get purchase.")})).then((function(e){k.purchase=e}))},k.back=function(){return d.setPath("/bay-reservation/reservation")},k.staffHelp=function(){return E.createStaffHelp(k.center.id,k.user.id,k.purchase.id).catch((function(e){return c.error(e,"Failed to create staff help.")})).then((function(e){return d.setParam("notice",e.notice),d.setPath("/bay-reservation/staff-help")}))},k.hasRecurring=function(){return p.isAdmin()||!b.hideRecurringReservations}}])},OnA3:function(e,t,r){"use strict";r.r(t);r("aZFp"),r("Muwe"),r("y89P"),r("3dw1");var n=r("yCd9"),a=r.n(n),s=r("hsT8"),i=r.n(s),o=r("nbuU"),l=r.n(o),c=r("03wM"),f=r.n(c),u=r("+l1P");t.default=angular.module("deskworks.BayReservationConfirmCtrl",["deskworks.reservationService","deskworks.reservationUnit.optsRepeatFrequency",u.a.name]).controller("BayReservationConfirmCtrl",["$scope","$q","$filter","$translate","settings","dwAlerts","session","state","reservationService","reservationFields","optsRepeatFrequency","units",function(e,t,r,n,s,o,c,u,p,d,g,v){var m,h,b=this;u.setPageTitle(n.instant("RESERVATIONS.CONFIRM.PAGE_TITLE")),b.timeStart=r("toDate")(u.getParam("start")),b.timeEnd=r("toDate")(u.getParam("end")),b.reservationNote=u.getParam("note")||"",b.emailConfirmation=!!u.getParam("confirm"),b.reservationTitle=u.getParam("title"),b.reservationNote=u.getParam("note"),b.series=a()(m=u.getParam("series").split(",")).call(m,(function(e){return+e})),b.units=i()(v).call(v,(function(e){return b.series.indexOf(e.id)>=0})),b.optsRepeatFrequency=g,b.repeatFrequency=l()(h=b.optsRepeatFrequency).call(h,(function(e){return e.id===u.getParam("freq")}))||b.optsRepeatFrequency[0],b.repeatDuration=u.getParam("duration")&&+u.getParam("duration")||b.repeatFrequency.repeatDurationOptions&&b.repeatFrequency.repeatDurationOptions[0],e.$watch("$ctrl.emailConfirmation",(function(e){u.setParam("confirm",e||null).replace()})),b.next=function(){var e,r=JSON.parse(u.getParam("fields")||"{}");f()(r).forEach((function(e){var t=l()(d).call(d,(function(t){return t.id===+e}));r[e]=t.$$serialize(t,r[e])}));var n=a()(e=b.units).call(e,(function(e){return{from:b.timeStart,to:b.timeEnd,title:b.reservationTitle,reservationNote:b.reservationNote,centerId:u.getCurrentCenterId(),reservationUnitId:e.id,emailConfirmation:b.emailConfirmation,repeatFrequency:b.repeatFrequency.id,repeatDuration:angular.isDefined(b.repeatFrequency.repeatDurationOptions)?b.repeatDuration:"",fields:r}})),s=a()(n).call(n,(function(e){return p.save(u.getCurrentCenterId(),u.getCurrentUserId(),e).catch((function(e){return o.error(e,"Failed to save reservation.")}))}));return t.all(s).then((function(e){return u.setParam("accessCode",e[0].accessCode),u.setPath("/bay-reservation/complete")})).catch((function(e){var r;return t.all(a()(r=i()(n).call(n,(function(e){return!!e.id}))).call(r,(function(e){return p.delete(u.getCurrentCenterId(),u.getCurrentUserId(),e.id)})))}))},b.back=function(){return u.setPath("/bay-reservation/reservation")},b.hasRecurring=function(){return c.isAdmin()||!s.hideRecurringReservations}}])},PWIA:function(e,t,r){"use strict";r.r(t);var n=r("Caj8"),a=r("aIjk");t.default=angular.module("deskworks.BayReservationSignUpCtrl",["ngRoute","deskworks.userProfile.service","deskworks.routeHelper","deskworks.helper",n.a.name,a.a.name]).controller("BayReservationSignUpCtrl",["$scope","$filter","$timeout","$q","$route","$translate","dwAlerts","helper","state","user","center","reg","userProfileService","bayReservationRedirect",function(e,t,r,n,a,s,i,o,l,c,f,u,p,d){l.setPageTitle(s.instant("USER_PROFILE.NEW_USER.PAGE_TITLE")),this.next=function(){if(!o.pointFirstInvalid("#user"))return(u.new?p.registerNewUser(0,c):n.when()).then((function(){if(u.new)return l.login(c.login,c.password).catch((function(e){return i.error(e,"Failed to login under created user.")}))})).then((function(){return d()}))},this.back=function(){return l.setPath("/bay-reservation/sign-in")}}])},QEpw:function(e,t){e.exports='<span translate="BILLING_PROFILE.PAYMENT_METHOD.EMPTY" ng-if="$ctrl.showSwitchCC() && $ctrl.showSwitchACH()"></span> <up-billing-method user="$ctrl.user" settings="$ctrl.settings" ng-if="!$ctrl.isSingleMode()"></up-billing-method> <up-credit-cards user-profile="$ctrl.user" settings="$ctrl.settings" single="$ctrl.isSingleMode()" ng-if="!$ctrl.showSwitchCC()"></up-credit-cards> <up-e-checks user-profile="$ctrl.user" single="$ctrl.isSingleMode()" ng-if="$ctrl.settings.enableEChecks && !$ctrl.showSwitchACH()"></up-e-checks> <ff-btn-group class="ff-btn-full" ng-if="$ctrl.showSwitchCC() || $ctrl.showSwitchACH()"> <ff-btn sense="add" size="sm" ng-if="$ctrl.showSwitchCC()" ff-click="$ctrl.addCC()"> <span translate="BILLING_PROFILE.CREDIT_CARDS.BTN_ADD"></span> </ff-btn> <ff-btn sense="add" size="sm" ng-if="$ctrl.showSwitchACH()" ff-click="$ctrl.addACH()"> <span translate="BILLING_PROFILE.E_CHECKS.BTN_ADD"></span> </ff-btn> </ff-btn-group> '},QPzo:function(e,t,r){var n=r("qqp4");e.exports=n},SxvJ:function(e,t,r){"use strict";r.r(t);r("3dw1"),r("y89P"),r("Muwe");var n=r("yCd9"),a=r.n(n),s=r("lRNC"),i=r.n(s),o=r("hsT8"),l=r.n(o),c=(r("gnMi"),r("1OaI"),r("G5Je"),["$injector",function(e){var t,n,s,o=(n=r("5Rx4"),a()(s=i()(n).call(n)).call(s,n));e.loadNewModules(a()(t=l()(o).call(o,(function(e){return e.default}))).call(t,(function(e){return e.default.name}))),e.invoke(["$templateCache",function(e){var t=r("J/A3");i()(t).call(t).forEach((function(r){return e.put(r.replace(/^\.\//,""),t(r))}))}])}]);t.default=c},SyYB:function(e,t){e.exports='<div class="dw-modal"> <div class="dw-modal-fade"></div> <form name="form" class="dw-modal-dialog ff-col" novalidate id="bayReservation" style="max-width:500px"> <ff-header><span translate="BAY_RESERVATION.HEADER"></span></ff-header> <label class="ff-row"> <ff-label flex="0 0 140px"><span translate="BAY_RESERVATION.GUESTS_COUNT"></span></ff-label> <ff-number flex="0 0 50px" class="ff-center" autofocus ff-model="$ctrl.guestsCount" ff-required="true" ff-gt="0" ff-validate-alert="{{\'BAY_RESERVATION.GUESTS_COUNT\' | translate}}"></ff-number> <ff-label></ff-label> </label> <ff-btn-group class="ff-tmargin"> <ff-btn sense="next" type="submit" ff-click="$ctrl.next()"><span translate="BAY_RESERVATION.BTN_CONTINUE"></span></ff-btn> </ff-btn-group> </form> </div> '},X78C:function(e,t,r){"use strict";r.r(t);var n=r("YoJi"),a=r("MQNn"),s=r("03gP");t.default=angular.module("deskworks.BayReservationCalendarCtrl",[n.a.name,a.default.name,s.a.name]).controller("BayReservationCalendarCtrl",["$rootScope","$scope","$translate","state","calData","bayReservationDialogs","bayCalDataPreProcess",function(e,t,r,n,a,s,i){this.calData=a,this.calDataPreProcess=i,n.setPageTitle(r.instant("RESERVATIONS.CALENDAR.PAGE_TITLE")),e.$emit("CENTERS:REFRESH"),this.next=function(){return n.setPath("/bay-reservation/reservation")},s.showGuestsCount({scope:t}).then((function(e){return e.close})).then((function(e){t.$broadcast("calDataPreProcess")}))}])},YpQb:function(e,t,r){var n=r("iddO"),a=r("loUa"),s=r("cJ2G"),i=r("Btbx"),o=r("3tq3"),l=r("i13M");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){for(var t,r,n=i(e),a=o.f,c=s(n),f={},u=0;c.length>u;)void 0!==(r=a(n,t=c[u++]))&&l(f,t,r);return f}})},YwtS:function(e,t){e.exports='<ff-panel> <ff-panel-header><small translate="GLOBAL.REQUIRED_FIELDS_MARKED_WITH"></small></ff-panel-header> <div class="ff-grid ff-gutter-v ff-gutter-h"> <up-personal-info user="$ctrl.user" schema="$ctrl.user.schema" reg="$ctrl.reg"></up-personal-info> <up-addresses flex="{md: \'0 0 50%\'}" user="$ctrl.user" schema="$ctrl.user.schema" reg="$ctrl.reg" center="$ctrl.center" single="true"></up-addresses> <div flex="{md: \'0 0 50%\'}"> <div class="ff-grid ff-gutter-v"> <up-login-info user="$ctrl.user" schema="$ctrl.user.schema" reg="$ctrl.reg"></up-login-info> <up-phones user="$ctrl.user" schema="$ctrl.user.schema" reg="$ctrl.reg" single="true"></up-phones> </div> </div> <up-photo flex="{md: \'0 0 50%\'}" user="$ctrl.user" schema="$ctrl.user.schema" reg="$ctrl.reg"></up-photo> <div flex="{md: \'0 0 50%\'}"> <div class="ff-grid ff-gutter-v"> <up-lead-source user="$ctrl.user" schema="$ctrl.user.schema" reg="$ctrl.reg"></up-lead-source> <up-terms-of-service user="$ctrl.user" schema="$ctrl.user.schema" reg="$ctrl.reg"></up-terms-of-service> </div> </div> </div> </ff-panel> '},aIjk:function(e,t,r){"use strict";t.a=angular.module("needHelp",[]).directive("needHelp",(function(){return{restrict:"E",scope:!0,controller:function(){},controllerAs:"$ctrl",template:'<span translate="GLOBAL.NEED_HELP" class="need-help" ng-if="$ctrl.phone" translate-values="{ phone: \'<a href=&quot;tel:\' + $ctrl.phone + \'&quot;>\' + $ctrl.phone + \'</a>\' }"></span>',bindToController:{phone:"<"}}}))},cJ2G:function(e,t,r){var n=r("UkRz"),a=r("FkQy"),s=r("/ADo"),i=r("CvrR");e.exports=n("Reflect","ownKeys")||function(e){var t=a.f(i(e)),r=s.f;return r?t.concat(r(e)):t}},dLOS:function(e,t,r){"use strict";r("3dw1");var n=r("hsT8"),a=r.n(n),s=r("nbuU"),i=r.n(s),o=r("6RpP"),l=r.n(o),c=r("QEpw"),f=r.n(c);t.a=angular.module("newBillingProfile",[]).directive("newBillingProfile",(function(){return{template:f.a,restrict:"E",scope:!0,controller:"NewBillingProfileCtrl as $ctrl",bindToController:{settings:"<",user:"<"}}})).controller("NewBillingProfileCtrl",["$scope","userProfileService",function(e,t){var r=this;r.$onInit=function(){var n;if(r.settings.creditCardTypes=a()(n=r.settings.creditCardTypes).call(n,(function(e){return e.enable})),r.user.creditCards.forEach((function(e){var t;e.type=i()(t=r.settings.creditCardTypes).call(t,(function(t){return t.id===e.type}))||e.type||{}})),r.user.creditCards=r.user.creditCards||[],!r.user.creditCards.length&&!r.user.eChecks.length){var s=t.creditCard.new(r.user);s.type=r.settings.creditCardTypes[0],r.user.creditCards.push(s)}e.$watchCollection((function(e){var t;return l()(t=r.user.creditCards).call(t,r.user.eChecks)}),(function(e){e&&r.user.paymentMethodId&&!i()(e).call(e,(function(e){return e.id===r.user.paymentMethodId}))&&(r.user.billingMethod=null,r.user.paymentMethodId=null)})),t.bindTestBillingGenerator(e,r.user)},r.isSingleMode=function(){var e=r.user,n=e.creditCards,a=e.eChecks;return!n.length&&(!a.length||t.eCheck.isNew(a[0]))||!a.length&&(!n.length||t.creditCard.isNew(n[0]))},r.showSwitchCC=function(){var e=r.user,n=e.creditCards,a=e.eChecks;return!n.length&&(!a.length||t.eCheck.isNew(a[0]))},r.showSwitchACH=function(){var e=r.user,n=e.creditCards,a=e.eChecks;return r.settings.enableEChecks&&!a.length&&(!n.length||t.creditCard.isNew(n[0]))},r.addCC=function(){var e=t.creditCard.new(r.user);r.user.creditCards=[e],r.user.eChecks=[]},r.addACH=function(){var e=t.eCheck.new(r.user);r.user.eChecks=[e],r.user.creditCards=[]}}])},dNoX:function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),a=r.n(n);r("y89P"),r("Muwe"),r("aZFp"),r("8cZI");t.default=angular.module("deskworks.BayReservationSignInCtrl",["session","deskworks.ReservationCost","deskworks.purchase.service"]).controller("BayReservationSignInCtrl",["$scope","$filter","$translate","dwAlerts","state","bayReservationRedirect",function(e,t,r,n,a,s){a.setPageTitle(r.instant("SIGN_IN.PAGE_TITLE")),e.$on("dwSignIn:SignIn",(function(e){e.stopPropagation(),a.replace(),s()})),e.$on("dwSignIn:SignUp",(function(e){return e.stopPropagation(),a.replace().setPath("/bay-reservation/sign-up")})),this.back=function(){return a.setPath("/bay-reservation/reservation")}}]).factory("bayReservationRedirect",["session","state","purchaseService","ReservationCost","dwAlerts",function(e,t,r,n,s){return function(){return e.isAnonymous()||e.isRole("nonMember")?n.calcAsync(t.getCurrentCenterId(),t.getCurrentUserId(),t.getParam("unit"),t.getParam("start"),t.getParam("end")).then((function(e){var n;if(!e)return t.setPath("/bay-reservation/confirm");var i=t.getCurrentCenterId(),o=t.getCurrentUserId(),l={reservationUnitIds:a()(n=t.getParam("series").split(",")).call(n,(function(e){return+e})),reservationFrom:t.getParam("start"),reservationTo:t.getParam("end"),reservationRepeatFrequency:t.getParam("freq"),reservationRepeatDuration:t.getParam("duration")};return r.createPurchaseForReservation(i,o,l).catch((function(e){return s.error(e,"Failed to create purchase for reservation.")})).then((function(e){return e.purchasePackageIds&&t.setParam("packages",e.purchasePackageIds.join(",")),t.setParam("purchaseId",e.id),t.setPath("/bay-reservation/purchase")}))})):t.setPath("/bay-reservation/confirm")}}])},"ee+B":function(e,t,r){"use strict";t.a=angular.module("autofocusDirective",[]).directive("autofocus",["$timeout",function(e){return{restrict:"A",link:function(t,r,n){if("false"!==n.autofocus){var a=r[0].parentNode.querySelector("input")||r[0].parentNode.querySelector("select")||r[0].parentNode.querySelector("button");a&&e((function(){return a.focus()}))}}}}])},fWpV:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.BayReservationCompleteCtrl",[]).controller("BayReservationCompleteCtrl",["$scope","$translate","dwAlerts","state","deskworksConfig",function(e,t,r,n,a){n.setPageTitle(t.instant("BOOK_IT_NOW.COMPLETE.PAGE_TITLE")),this.accessCode=n.getParam("accessCode"),e.$on("$locationChangeStart",(function(e,n){n&&n.indexOf("/bay-reservation")>=0&&(e.preventDefault(),r.error(t.instant("SIMPLE_RES.COMPLETE.BACK_ERROR")))})),this.home=function(){return n.resetParams(),n.setPath(a.getDefaultRoute())}}])},fzuT:function(e,t,r){var n=r("7v6b");e.exports=function(e,t,r){return t in e?n(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.default=e.exports,e.exports.__esModule=!0},gnMi:function(e,t,r){},gt1X:function(e,t){e.exports='<h1 class="page-title flex"> <span>{{state.getPageTitle()}}</span> <need-help phone="$resolve.center.phone"></need-help> </h1> <div class="ff-grid gutter-v"> <new-user-profile id="user" user="$resolve.user" reg="$resolve.reg" center="$resolve.center"></new-user-profile> <ff-btn-group> <ff-btn sense="back" ff-click="$ctrl.back()"><span translate="GLOBAL.BTN_BACK"></span></ff-btn> <ff-btn sense="next" ff-click="$ctrl.next()"><span translate="GLOBAL.BTN_NEXT"></span></ff-btn> </ff-btn-group> </div> '},h2hn:function(e,t,r){var n=r("iddO"),a=r("loUa");n({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperty:r("UkIg").f})},iDDw:function(e,t,r){var n=r("LPPa");e.exports=n},kDfq:function(e,t){e.exports='<h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v"> <ff-panel> <span class="ff-center ff-bmargin" ng-if="$ctrl.accessCode && $resolve.settings.enableAccessCodes" translate="BOOK_IT_NOW.COMPLETE.ACCESS_CODE" translate-values="{ accessCode: $ctrl.accessCode }"></span> </ff-panel> <ff-btn-group> <ff-btn sense="home" type="submit" ff-click="$ctrl.home()"><span translate="GLOBAL.BTN_HOME"></span></ff-btn> </ff-btn-group> </div> '},lvz6:function(e,t,r){e.exports=r("QPzo")},qqp4:function(e,t,r){r("zzoj");var n=r("/ZBe").Object,a=e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)};n.getOwnPropertyDescriptor.sham&&(a.sham=!0)},sQOk:function(e,t,r){"use strict";r.r(t);r("8cZI");var n=r("nbuU"),a=r.n(n),s=r("6RpP"),i=r.n(s),o=r("yCd9"),l=r.n(o),c=r("bOPx"),f=r("MQNn"),u=r("03gP");t.default=angular.module("deskworks.BayReservationReservationCtrl",[c.a.name,f.default.name,u.a.name,"session"]).controller("BayReservationReservationCtrl",["$scope","$filter","$translate","dwAlerts","state","session","center","bayReservationRedirect","bayReservationDialogs","calData","bayCalDataPreProcess","bayCapacity",function(e,t,r,n,s,o,c,f,u,p,d,g){var v=this;v.calData=p,v.calDataPreProcess=d,s.setPageTitle(r.instant("RESERVATIONS.NEW.PAGE_TITLE",{centerName:c.name})),v.next=function(){var t=+s.getParam("guests");return!isNaN(t)&&t<=g?r():u.showInfo({scope:e,inputs:{calData:p,unitId:+s.getParam("unit")}}).then((function(e){return e.close})).then((function(e){if(!0===e)return r()}));function r(){return o.isAnonymous()?s.setPath("/bay-reservation/sign-in"):f()}},v.back=function(){return s.setPath("/bay-reservation")},e.$watchGroup(["$ctrl.calData",function(){return s.getParam("unit")}],(function(){return function(){var e,t=+s.getParam("unit");if(!v.calData||isNaN(t))return;var r,n=a()(e=v.calData.reduce((function(e,t){return i()(e).call(e,t.reservationUnits)}),[])).call(e,(function(e){return e.id===t}));n.$$series&&s.setParam("series",l()(r=n.$$series).call(r,(function(e){return e.id})).join(",")||null)}()}))}])},tzPS:function(e,t,r){"use strict";var n=r("IJqC"),a=r.n(n);t.a=angular.module("deskworks.reservationAgreement",["deskworks.helper","deskworks.state"]).directive("reservationAgreement",(function(){return{restrict:"E",scope:!0,template:a.a,translations:["reservations"]}}))},xdWW:function(e,t){e.exports='<div> <h1 class="page-title flex"> <span>{{state.getPageTitle()}}</span> <need-help phone="$ctrl.center.phone"></need-help> </h1> <form id="bayReservationPurchase" class="ff-grid gutter-v gutter-h" novalidate ff-dim="$ctrl.spin"> <ff-panel> <ff-panel-header> <span translate="SIMPLE_RES.PURCHASE.RESERVATION.HEADER"></span> </ff-panel-header> <ff-row> <ff-label flex="0 1 100px"><span translate="RESERVATIONS.LOCATION"></span></ff-label> <ff-static>{{::$ctrl.center.name}}</ff-static> </ff-row> <ff-row ng-repeat="unit in $ctrl.units"> <ff-label flex="0 1 100px"><span translate="BAY_RESERVATION.BAY"></span></ff-label> <ff-static>{{::unit.name}}</ff-static> </ff-row> <ff-row> <ff-label flex="0 1 100px"><span translate="RESERVATIONS.DATE"></span></ff-label> <ff-static>{{::$ctrl.timeStart | date:\'longDate\'}}</ff-static> </ff-row> <ff-row> <ff-label flex="0 1 100px"><span translate="RESERVATIONS.TIME"></span></ff-label> <ff-static> <span><span nice-time="::$ctrl.timeStart"></span> - <span nice-time="::$ctrl.timeEnd"></span></span> </ff-static> </ff-row> <ff-row ng-if="$ctrl.hasRecurring()"> <ff-label flex="0 1 100px"><span translate="RESERVATIONS.REPEAT_FREQUENCY"></span></ff-label> <ff-static>{{::$ctrl.repeatFrequency.name}}</ff-static> </ff-row> <ff-row ng-if="$ctrl.hasRecurring() && $ctrl.repeatFrequency.repeatDurationOptions"> <ff-label flex="0 1 100px"><span translate="RESERVATIONS.REPEAT_DURATION"></span></ff-label> <ff-static>{{::$ctrl.repeatFrequency.repeatDurationFilter($ctrl.repeatDuration)}}</ff-static> </ff-row> </ff-panel> <ff-panel> <ff-panel-header> <span translate="SIMPLE_RES.PURCHASE.ORDER.HEADER" translate-values="{ orderId: $ctrl.purchase.orderId }"></span> </ff-panel-header> <dw-invoice invoice="$ctrl.purchase" center="$ctrl.center" allow-remove="false" dw-invoice-payment-processing-fee settings="$resolve.settings" credit-cards="$resolve.user.creditCards" e-checks="$resolve.user.eChecks"></dw-invoice> </ff-panel> <div> <ff-panel-header> <div translate="BILLING_PROFILE.PAGE_TITLE" translate-values="{ userName: $resolve.user.fullName }"></div> <small translate="GLOBAL.REQUIRED_FIELDS_MARKED_WITH"></small> </ff-panel-header> <new-billing-profile user="$resolve.user" settings="$resolve.settings" id="newBillingProfile" class="ff-grid gutter-v"></new-billing-profile> </div> <ff-col> <div class="ff-grid gutter-h gutter-v" style="justify-content:flex-end"> <reservation-agreement flex="0 0 300px" ng-if="wlLinks.reservationAgreementLinkUrl"></reservation-agreement> <ff-panel flex="0 0 300px"> <label class="ff-row"> <ff-checkbox name="emailConfirmation" ff-model="$ctrl.emailConfirmation"> <span translate="RESERVATIONS.EMAIL_CONFIRMATION"></span> </ff-checkbox> </label> </ff-panel> </div> </ff-col> <ff-btn-group> <ff-btn sense="help" ff-click="$ctrl.staffHelp()"><span translate="GLOBAL.BTN_STAFF_HELP"></span></ff-btn> <ff-btn sense="back" ff-click="$ctrl.back()"><span translate="GLOBAL.BTN_BACK"></span></ff-btn> <ff-btn sense="next" type="submit" ff-click="$ctrl.next()"><span translate="GLOBAL.BTN_NEXT"></span></ff-btn> </ff-btn-group> </form> </div> '},yKah:function(e,t,r){e.exports=r("iDDw")},zzoj:function(e,t,r){var n=r("iddO"),a=r("wkvk"),s=r("Btbx"),i=r("3tq3").f,o=r("loUa"),l=a((function(){i(1)}));n({target:"Object",stat:!0,forced:!o||l,sham:!o},{getOwnPropertyDescriptor:function(e,t){return i(s(e),t)}})}}]);