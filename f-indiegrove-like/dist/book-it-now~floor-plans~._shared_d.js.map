{"version":3,"sources":["webpack:///./shared/dw-invoice/dw-invoice-payment-processing-fee.directive.js","webpack:///./shared/need-help/need-help.directive.js","webpack:///./shared/new-billing-profile/new-billing-profile.directive.js","webpack:///./shared/new-billing-profile/new-billing-profile.tpl.html","webpack:///./shared/new-user-profile/new-user-profile.directive.js","webpack:///./shared/new-user-profile/new-user-profile.tpl.html","webpack:///./shared/reservation-agreement/reservation-agreement.directive.js","webpack:///./shared/reservation-agreement/reservation-agreement.tpl.html","webpack:///./shared/staff-help/staff-help-directive.tpl.html","webpack:///./shared/staff-help/staff-help.directive.js","webpack:///./shared/wizard-reservation/02-reservation/reservation.controller.js","webpack:///./shared/wizard-reservation/03-sign-in/sign-in.controller.js","webpack:///./shared/wizard-reservation/04-confirm/confirm.controller.js","webpack:///./shared/wizard-reservation/04-confirm/confirm.tpl.html","webpack:///./shared/wizard-reservation/05-complete/complete.controller.js","webpack:///./shared/wizard-reservation/05-complete/complete.tpl.html","webpack:///./shared/wizard-reservation/06-purchase/purchase.controller.js","webpack:///./shared/wizard-reservation/06-purchase/purchase.tpl.html","webpack:///./shared/wizard-reservation/07-sign-up/sign-up.controller.js","webpack:///./shared/wizard-reservation/07-sign-up/sign-up.tpl.html","webpack:///./shared/wizard-reservation/purchase-redirect.service.js","webpack:///./shared/wizard-reservation/wizard-reservation.module.js","webpack:///./shared/wizard-reservation/wizard-reservation.scss?4ecf"],"names":["angular","module","directive","restrict","scope","controller","bindToController","invoice","settings","creditCards","eChecks","$scope","$timeout","state","helper","$ctrl","$onChanges","enablePaymentProcessingCharges","rate","length","paymentProcessingRates","cc","ach","prevIdx","items","i","id","balance","fee","round","item","addedBy","amount","billedAt","moment","createdAt","description","name","price","quantity","push","isUndefined","chargesTotalInitial","chargesTotal","balanceInitial","controllerAs","template","phone","user","userProfileService","$onInit","creditCardTypes","ccType","enable","forEach","type","creditCard","new","$watchCollection","_","methods","paymentMethodId","m","billingMethod","bindTestBillingGenerator","isSingleMode","eCheck","isNew","reg","center","bindTestUserGenerator","translations","$translate","dwAlerts","deskworksConfig","notice","getParam","setPageTitle","instant","$on","event","next","current","$$route","error","preventDefault","home","resetParams","setPath","getDefaultRoute","resReservation","wizardReservationPurchaseRedirect","session","origin","getPath","split","centerName","isAnonymous","back","$filter","$event","stopPropagation","replace","niceTimeDirective","$templateCache","reservationService","reservationFields","optsRepeatFrequency","put","timeStart","timeEnd","reservationNote","emailConfirmation","reservationTitle","reservationUnitId","repeatFrequency","o","repeatDuration","repeatDurationOptions","$watch","val","setParam","fields","JSON","parse","key","field","f","$$serialize","data","from","to","title","centerId","getCurrentCenterId","isDefined","save","getCurrentUserId","catch","err","then","result","accessCode","enableAccessCodes","isAdmin","hasRecurring","hideRecurringReservations","newUrl","indexOf","newBillingProfile","needHelp","reservationAgreement","dwInvoice","dwInvoicePaymentProcessingFee","$q","$route","purchase","reservationUnit","purchaseService","purchasePackageId","opt","pointFirstInvalid","spin","saveBillingProfile","createReservationWithPayment","updatePurchase","finally","saveWithPayment","get","staffHelp","createStaffHelp","newUserProfile","registerNewUser","when","login","password","factory","ReservationCost","isRole","userId","unitId","start","end","calcAsync","cost","reservationFrom","reservationTo","reservationRepeatFrequency","reservationRepeatDuration","createPurchaseForReservation","staffHelpDirective","WizardReservationReservationCtrl","WizardReservationSignInCtrl","WizardReservationConfirmCtrl","WizardReservationCompleteCtrl","WizardReservationPurchaseCtrl","WizardReservationSignUpCtrl"],"mappings":"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","file":"book-it-now~floor-plans~._shared_d.js?_rev=40bda20f62bd35eab4f6","sourcesContent":["/**\n * dwInvoicePaymentProcessingFee directive -\n */\nexport default angular.module('deskworks.dwInvoicePaymentProcessingFee', [\n  'deskworks.state',\n  'deskworks.helper',\n])\n\n  .directive('dwInvoicePaymentProcessingFee', function() {\n    return {\n      restrict: 'A',\n      scope: true,\n      controller: 'DwInvoicePaymentProcessingFeeCtrl as $ctrl',\n      bindToController: {\n        invoice: '<',\n        settings: '<',\n        creditCards: '<',\n        eChecks: '<',\n      },\n    };\n  })\n\n  .controller('DwInvoicePaymentProcessingFeeCtrl', function($scope, $timeout, state, helper) {\n    const $ctrl = this;\n\n    $ctrl.$onChanges = () => $timeout(() => {\n      if (!$ctrl.invoice || !$ctrl.settings || !$ctrl.creditCards || !$ctrl.eChecks) return;\n      if (!$ctrl.settings.enablePaymentProcessingCharges) return;\n\n      let rate = 0;\n\n      if ($ctrl.creditCards.length) rate = $ctrl.settings.paymentProcessingRates.cc || 0;\n      else if ($ctrl.eChecks.length) rate = $ctrl.settings.paymentProcessingRates.ach || 0;\n\n      const prevIdx = $ctrl.invoice.items.findIndex(i => i.id === 'fake-payment-processing-fee');\n      if (prevIdx >= 0) $ctrl.invoice.items.splice(prevIdx, 1); // remove exiting fake-payment-processing-fee\n\n      if (!rate || !+$ctrl.invoice.balance) return;\n\n      const fee = helper.round(rate * +$ctrl.invoice.balance / 100);\n\n      const item = {\n        addedBy: 'system',\n        amount: fee,\n        billedAt: moment(),\n        createdAt: moment(),\n        description: \"Payment processing fee\",\n        id: \"fake-payment-processing-fee\",\n        name: \"Payment Fee\",\n        price: fee,\n        quantity: 1,\n      };\n\n      $ctrl.invoice.items.push(item);\n\n      if (angular.isUndefined($ctrl.invoice.chargesTotalInitial)) {\n        $ctrl.invoice.chargesTotalInitial = +$ctrl.invoice.chargesTotal;\n      }\n      if (angular.isUndefined($ctrl.invoice.balanceInitial)) {\n        $ctrl.invoice.balanceInitial = +$ctrl.invoice.balance;\n      }\n\n      $ctrl.invoice.chargesTotal = helper.round($ctrl.invoice.chargesTotalInitial + fee);\n      $ctrl.invoice.balance = helper.round($ctrl.invoice.balanceInitial + fee);\n    });\n  });\n\n","/**\n * Need help? Phone 1-800-000-000.\n */\nexport default angular.module('needHelp', [])\n  .directive('needHelp', function() {\n    return {\n      restrict: 'E',\n      scope: true,\n      controller: function() {},\n      controllerAs: '$ctrl',\n      template: '<span translate=\"GLOBAL.NEED_HELP\" class=\"need-help\" ng-if=\"$ctrl.phone\" ' +\n        'translate-values=\"{ phone: \\'<a href=&quot;tel:\\' + $ctrl.phone + \\'&quot;>\\' + $ctrl.phone + \\'</a>\\' }\"></span>',\n      bindToController: {\n        phone: '<',\n      },\n    };\n  });\n","import template from './new-billing-profile.tpl.html';\n\n/**\n * New Billing Profile\n */\nexport default angular.module('newBillingProfile', [])\n\n  .directive('newBillingProfile', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'NewBillingProfileCtrl as $ctrl',\n      bindToController: {\n        settings: '<',\n        user: '<',\n      },\n    };\n  })\n\n  .controller('NewBillingProfileCtrl', function($scope, userProfileService) {\n    const $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = () => {\n      // filter credit card types according to settings\n      $ctrl.settings.creditCardTypes = $ctrl.settings.creditCardTypes.filter(ccType => ccType.enable);\n\n      $ctrl.user.creditCards.forEach(cc => {\n        cc.type = $ctrl.settings.creditCardTypes.find(type => type.id === cc.type) || cc.type || {};\n      });\n\n      // add one CC if no payment methods\n      $ctrl.user.creditCards = $ctrl.user.creditCards || [];\n      if (!$ctrl.user.creditCards.length && !$ctrl.user.eChecks.length) {\n        const cc = userProfileService.creditCard.new($ctrl.user);\n        cc.type = $ctrl.settings.creditCardTypes[0];\n        $ctrl.user.creditCards.push(cc);\n      }\n\n      $scope.$watchCollection(_ => $ctrl.user.creditCards.concat($ctrl.user.eChecks), methods => {\n        if (methods && $ctrl.user.paymentMethodId && !methods.find(m => m.id === $ctrl.user.paymentMethodId)) {\n          $ctrl.user.billingMethod = null; // reset billing/payment method when payment method deleted\n          $ctrl.user.paymentMethodId = null;\n        }\n      });\n\n      userProfileService.bindTestBillingGenerator($scope, $ctrl.user); // Bind test user data generator\n    };\n\n    $ctrl.isSingleMode = () => {\n      const { creditCards, eChecks } = $ctrl.user;\n      return !creditCards.length && (!eChecks.length || userProfileService.eCheck.isNew(eChecks[0])) ||\n        !eChecks.length && (!creditCards.length || userProfileService.creditCard.isNew(creditCards[0]));\n    };\n  });\n","// Module\nvar code = \"<span translate=\\\"BILLING_PROFILE.PAYMENT_METHOD.EMPTY\\\" ng-if=\\\"$ctrl.showSwitchCC() && $ctrl.showSwitchACH()\\\"></span> <up-billing-method user=\\\"$ctrl.user\\\" settings=\\\"$ctrl.settings\\\" ng-if=\\\"!$ctrl.isSingleMode()\\\"></up-billing-method> <up-credit-cards user-profile=\\\"$ctrl.user\\\" settings=\\\"$ctrl.settings\\\" single=\\\"$ctrl.isSingleMode()\\\" ng-if=\\\"$ctrl.user.creditCards.length || !$ctrl.isSingleMode()\\\"></up-credit-cards> <up-e-checks user-profile=\\\"$ctrl.user\\\" single=\\\"$ctrl.isSingleMode()\\\" ng-if=\\\"$ctrl.settings.enableEChecks && ($ctrl.user.eChecks.length || !$ctrl.isSingleMode())\\\"></up-e-checks> \";\n// Exports\nmodule.exports = code;","import template from './new-user-profile.tpl.html';\n\n/**\n * New User Profile\n */\nexport default angular.module('newUserProfileDirective', [])\n\n  .directive('newUserProfile', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'NewUserProfileCtrl as $ctrl',\n      bindToController: {\n        reg: '<',\n        user: '<',\n        center: '<',\n      },\n    };\n  })\n\n  .controller('NewUserProfileCtrl', function($scope, userProfileService) {\n    const $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = () => {\n      userProfileService.bindTestUserGenerator($scope, $ctrl.user, $ctrl.reg); // Bind test user data generator\n    };\n  });\n","// Module\nvar code = \"<ff-panel> <ff-panel-header><small translate=\\\"GLOBAL.REQUIRED_FIELDS_MARKED_WITH\\\"></small></ff-panel-header> <div class=\\\"ff-grid ff-gutter-v ff-gutter-h\\\"> <up-personal-info user=\\\"$ctrl.user\\\" schema=\\\"$ctrl.user.schema\\\" reg=\\\"$ctrl.reg\\\"></up-personal-info> <up-addresses flex=\\\"{md: '0 0 50%'}\\\" user=\\\"$ctrl.user\\\" schema=\\\"$ctrl.user.schema\\\" reg=\\\"$ctrl.reg\\\" center=\\\"$ctrl.center\\\" single=\\\"true\\\"></up-addresses> <div flex=\\\"{md: '0 0 50%'}\\\"> <div class=\\\"ff-grid ff-gutter-v\\\"> <up-login-info user=\\\"$ctrl.user\\\" schema=\\\"$ctrl.user.schema\\\" reg=\\\"$ctrl.reg\\\"></up-login-info> <up-phones user=\\\"$ctrl.user\\\" schema=\\\"$ctrl.user.schema\\\" reg=\\\"$ctrl.reg\\\" single=\\\"true\\\"></up-phones> </div> </div> <up-photo flex=\\\"{md: '0 0 50%'}\\\" user=\\\"$ctrl.user\\\" schema=\\\"$ctrl.user.schema\\\" reg=\\\"$ctrl.reg\\\"></up-photo> <div flex=\\\"{md: '0 0 50%'}\\\"> <div class=\\\"ff-grid ff-gutter-v\\\"> <up-lead-source user=\\\"$ctrl.user\\\" schema=\\\"$ctrl.user.schema\\\" reg=\\\"$ctrl.reg\\\"></up-lead-source> <up-terms-of-service user=\\\"$ctrl.user\\\" schema=\\\"$ctrl.user.schema\\\" reg=\\\"$ctrl.reg\\\"></up-terms-of-service> </div> </div> </div> </ff-panel> \";\n// Exports\nmodule.exports = code;","/**\n * reservationAgreement directive - 'Reservation Agreement' section in purchase step of Book It Now and Simple Reservation wizards\n */\n\nimport template from './reservation-agreement.tpl.html';\n\nexport default angular.module('deskworks.reservationAgreement', [\n  'deskworks.helper',\n  'deskworks.state',\n])\n\n  .directive('reservationAgreement', function() {\n    return {\n      restrict: 'E',\n      scope: true,\n      template,\n      translations: ['reservations'],\n    };\n  });\n","// Module\nvar code = \"<ff-panel id=\\\"reservationAgreement\\\" class=\\\"ff-no-frame\\\"> <label> <ff-checkbox ff-model=\\\"reservationAgreement\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{ required: ('RESERVATIONS.RESERVATION_AGREEMENT.REQUIRED' | translate) }\\\" title=\\\"{{'RESERVATIONS.RESERVATION_AGREEMENT.REQUIRED' | translate}}\\\"> <div translate=\\\"RESERVATIONS.RESERVATION_AGREEMENT.LABEL\\\"></div> <a ng-href=\\\"{{::wlLinks.reservationAgreementLinkUrl}}\\\" ng-bind=\\\"::wlLinks.reservationAgreementLinkText\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"></a> </ff-checkbox> </label> </ff-panel> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel> <span ng-bind=\\\"::$ctrl.notice\\\"></span> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"home\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.home()\\\"><span translate=\\\"GLOBAL.BTN_HOME\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","import template from './staff-help-directive.tpl.html';\n\nexport default angular.module('deskworks.StaffHelpDirectiveCtrl', [\n  'ngRoute',\n  'deskworks.helper',\n  'deskworks.config',\n])\n\n  .directive('staffHelp', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'StaffHelpDirectiveCtrl as $ctrl',\n    };\n  })\n\n  .controller('StaffHelpDirectiveCtrl', function($scope, $translate, dwAlerts, helper, state, deskworksConfig) {\n    const $ctrl = this;\n\n    $ctrl.notice = state.getParam('notice');\n\n    state.setPageTitle($translate.instant('SIMPLE_RES.STAFF_HELP.PAGE_TITLE'));\n\n    /**\n     * Prevent using Back button\n     */\n    $scope.$on('$routeChangeStart', (event, next, current) => {\n      if (next.$$route && (\n          next.$$route.controller === 'MemberSignUpBillingCtrl' || next.$$route.controller === 'MemberSignUpPurchaseCtrl' ||\n          next.$$route.controller === 'SimpleReservationBillingCtrl' || next.$$route.controller === 'SimpleReservationPurchaseCtrl' ||\n          next.$$route.controller === 'BuyPassBillingCtrl' || next.$$route.controller === 'BuyPassPurchaseCtrl')\n      ) {\n        dwAlerts.error($translate.instant('SIMPLE_RES.STAFF_HELP.BACK_ERROR'));\n        event.preventDefault();\n      }\n    });\n\n    /**\n     * Next button handler\n     */\n    $ctrl.home = function() {\n      state.resetParams();\n      return state.setPath(deskworksConfig.getDefaultRoute());\n    };\n  });\n","import resReservation from 'shared/reservation-form/res-reservation.component';\nimport wizardReservationPurchaseRedirect from 'shared/wizard-reservation/purchase-redirect.service';\n\nexport default angular.module('deskworks.WizardReservationReservationCtrl', [\n  resReservation.name,\n  'session',\n  wizardReservationPurchaseRedirect.name,\n])\n\n  .controller('WizardReservationReservationCtrl', function($scope, $translate, dwAlerts, state, session, center,\n                                                           wizardReservationPurchaseRedirect) {\n    const $ctrl = this;\n    const origin = `/${state.getPath().split('/')[1]}`;\n\n    state.setPageTitle($translate.instant('RESERVATIONS.NEW.PAGE_TITLE', { centerName: center.name }));\n\n    $ctrl.next = () => {\n      if (session.isAnonymous()) {\n        return state.setPath(`${origin}/sign-in`);\n      }\n\n      return wizardReservationPurchaseRedirect(); // authenticated\n    };\n\n    $ctrl.back = () => state.setPath(origin);\n  });\n","import wizardReservationPurchaseRedirect from 'shared/wizard-reservation/purchase-redirect.service';\n\nexport default angular.module('deskworks.WizardReservationSignInCtrl', [\n  'session',\n  'deskworks.ReservationCost',\n  'deskworks.purchase.service',\n  wizardReservationPurchaseRedirect.name,\n])\n\n  .controller('WizardReservationSignInCtrl', function($scope, $filter, $translate, dwAlerts, state, wizardReservationPurchaseRedirect) {\n    const $ctrl = this;\n    const origin = `/${state.getPath().split('/')[1]}`;\n\n    state.setPageTitle($translate.instant('SIGN_IN.PAGE_TITLE'));\n\n    /**\n     * dwSignIn:SignIn event listener\n     */\n    $scope.$on('dwSignIn:SignIn', $event => {\n      $event.stopPropagation();\n      wizardReservationPurchaseRedirect({ replace: true });\n    });\n\n    /**\n     * dwSignIn:SignUp event listener - proceeds to Book It Now -> SignUp\n     */\n    $scope.$on('dwSignIn:SignUp', $event => {\n      $event.stopPropagation();\n      return state.replace().setPath(`${origin}/sign-up`); // hide sign-in step in history to skip it with back button\n    });\n\n    /**\n     * Back\n     */\n    $ctrl.back = () => state.setPath(`${origin}/reservation`);\n  });\n","import niceTimeDirective from 'shared/nice-date-time/nice-time.directive';\nimport template from './confirm.tpl.html';\n\nexport default angular.module('deskworks.WizardReservationConfirmCtrl', [\n  'deskworks.reservationService',\n  'deskworks.reservationUnit.optsRepeatFrequency',\n  niceTimeDirective.name,\n])\n\n  .controller('WizardReservationConfirmCtrl', function($scope, $filter, $translate, $templateCache,\n                                                       settings, dwAlerts, session, state, deskworksConfig,\n                                                       reservationService, reservationFields, optsRepeatFrequency) {\n    const $ctrl = this;\n    const origin = `/${state.getPath().split('/')[1]}`;\n\n    $templateCache.put('wizard-reservation/04-confirm/confirm.tpl.html', template);\n\n    state.setPageTitle($translate.instant('RESERVATIONS.CONFIRM.PAGE_TITLE'));\n\n    $ctrl.timeStart = $filter('toDate')(state.getParam('start'));\n    $ctrl.timeEnd = $filter('toDate')(state.getParam('end'));\n    $ctrl.reservationNote = state.getParam('note') || '';\n    $ctrl.emailConfirmation = !!state.getParam('confirm');\n    $ctrl.reservationTitle = state.getParam('title');\n    $ctrl.reservationNote = state.getParam('note');\n    $ctrl.reservationUnitId = state.getParam('unit');\n\n    $ctrl.optsRepeatFrequency = optsRepeatFrequency;\n    $ctrl.repeatFrequency = $ctrl.optsRepeatFrequency.find(o => o.id === state.getParam('freq')) || $ctrl.optsRepeatFrequency[0];\n    $ctrl.repeatDuration = state.getParam('duration') && +state.getParam('duration')\n      || $ctrl.repeatFrequency.repeatDurationOptions && $ctrl.repeatFrequency.repeatDurationOptions[0];\n\n    $scope.$watch('$ctrl.emailConfirmation', val => { state.setParam('confirm', val || null).replace(); });\n\n    /**\n     * Next\n     */\n    $ctrl.next = () => {\n      const fields = JSON.parse(state.getParam('fields') || \"{}\");\n      Object.keys(fields).forEach(key => {\n        const field = reservationFields.find(f => f.id === +key);\n        fields[key] = field.$$serialize(field, fields[key]);\n      });\n\n      const data = {\n        from: $ctrl.timeStart,\n        to: $ctrl.timeEnd,\n        title: $ctrl.reservationTitle,\n        reservationNote: $ctrl.reservationNote,\n        centerId: state.getCurrentCenterId(),\n        reservationUnitId: $ctrl.reservationUnitId,\n        emailConfirmation: $ctrl.emailConfirmation,\n        repeatFrequency: $ctrl.repeatFrequency.id,\n        repeatDuration: angular.isDefined($ctrl.repeatFrequency.repeatDurationOptions) ? $ctrl.repeatDuration : '',\n        fields,\n      };\n\n      return reservationService.save(state.getCurrentCenterId(), state.getCurrentUserId(), data)\n        .catch(err => dwAlerts.error(err, 'Failed to save reservation.'))\n        .then(result => {\n          if (result.accessCode && settings.enableAccessCodes && !session.isAdmin()) {\n            state.setParam('accessCode', result.accessCode);\n            return state.setPath(`${origin}/complete`);\n          }\n          state.resetParams();\n          return state.setPath(session.isAdmin() ? origin : deskworksConfig.getDefaultRoute());\n        });\n    };\n\n    /**\n     * Back\n     */\n    $ctrl.back = () => state.setPath(`${origin}/reservation`);\n\n    /**\n     * Whether recurring settings are available\n     */\n    $ctrl.hasRecurring = () => session.isAdmin() || !settings.hideRecurringReservations;\n  });\n","// Module\nvar code = \"<h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <form class=\\\"gutter-v\\\" style=\\\"max-width:480px\\\"> <ff-panel> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.LOCATION\\\"></span></ff-label> <ff-static ff-bind=\\\"::$resolve.center.name\\\"></ff-static> </ff-row> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.SPACE\\\"></span></ff-label> <ff-static ff-bind=\\\"::$resolve.reservationUnit.name\\\"></ff-static> </ff-row> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.DATE\\\"></span></ff-label> <ff-static ff-bind=\\\"::$ctrl.timeStart | date:'longDate'\\\"></ff-static> </ff-row> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.TIME\\\"></span></ff-label> <ff-static> <span><span nice-time=\\\"::$ctrl.timeStart\\\"></span> - <span nice-time=\\\"::$ctrl.timeEnd\\\"></span></span> </ff-static> </ff-row> <div ng-if=\\\"$ctrl.hasRecurring()\\\"> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.REPEAT_FREQUENCY\\\"></span></ff-label> <ff-static name=\\\"repeats\\\"><span ng-bind=\\\"$ctrl.repeatFrequency.name\\\"></span></ff-static> </ff-row> <ff-row ng-if=\\\"$ctrl.repeatFrequency.repeatDurationOptions\\\"> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.REPEAT_DURATION\\\"></span></ff-label> <ff-static>{{$ctrl.repeatFrequency.repeatDurationFilter($ctrl.repeatDuration)}}</ff-static> </ff-row> </div> <label class=\\\"ff-row\\\" style=\\\"margin-left:.5rem;margin-top:.5rem\\\"> <ff-checkbox name=\\\"emailConfirmation\\\" ff-model=\\\"$ctrl.emailConfirmation\\\"> <span translate=\\\"RESERVATIONS.EMAIL_CONFIRMATION\\\"></span> </ff-checkbox> </label> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> <ff-btn sense=\\\"ok\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.next()\\\"><span translate=\\\"GLOBAL.BTN_CONFIRM\\\"></span></ff-btn> </ff-btn-group> </form> \";\n// Exports\nmodule.exports = code;","import template from './complete.tpl.html';\n\nexport default angular.module('deskworks.WizardReservationCompleteCtrl', [])\n\n  .controller('WizardReservationCompleteCtrl', function($scope, $translate, $templateCache, dwAlerts, state, deskworksConfig) {\n    const $ctrl = this;\n    const origin = `/${state.getPath().split('/')[1]}`;\n\n    state.setPageTitle($translate.instant('BOOK_IT_NOW.COMPLETE.PAGE_TITLE'));\n\n    $templateCache.put('wizard-reservation/05-complete/complete.tpl.html', template);\n\n    $ctrl.accessCode = state.getParam('accessCode');\n\n    /**\n     * Prevent using Back button\n     */\n    $scope.$on('$locationChangeStart', (event, newUrl) => {\n      if (newUrl && newUrl.indexOf(origin) >= 0) {\n        event.preventDefault();\n        dwAlerts.error($translate.instant('SIMPLE_RES.COMPLETE.BACK_ERROR'));\n      }\n    });\n\n    /**\n     * Back to Home Page button handler\n     */\n    $ctrl.home = () => {\n      state.resetParams();\n      return state.setPath(deskworksConfig.getDefaultRoute());\n    };\n  });\n","// Module\nvar code = \"<h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel ng-if=\\\"$ctrl.accessCode && $resolve.settings.enableAccessCodes\\\"> <span class=\\\"ff-center ff-bmargin\\\" translate=\\\"BOOK_IT_NOW.COMPLETE.ACCESS_CODE\\\" translate-values=\\\"{ accessCode: $ctrl.accessCode }\\\"></span> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"home\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.home()\\\"><span translate=\\\"GLOBAL.BTN_HOME\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","import newBillingProfile from 'shared/new-billing-profile/new-billing-profile.directive';\nimport needHelp from 'shared/need-help/need-help.directive';\nimport reservationAgreement from 'shared/reservation-agreement/reservation-agreement.directive';\nimport dwInvoice from 'shared/dw-invoice/dw-invoice.directive';\nimport dwInvoicePaymentProcessingFee from 'shared/dw-invoice/dw-invoice-payment-processing-fee.directive';\nimport niceTimeDirective from 'shared/nice-date-time/nice-time.directive';\nimport template from './purchase.tpl.html';\n\nexport default angular.module('deskworks.WizardReservationPurchaseCtrl', [\n  'ngRoute',\n  'deskworks.helper',\n  'deskworks.purchase.service',\n  'deskworks.reservationService',\n  'deskworks.userProfile.service',\n  'deskworks.reservationUnit.optsRepeatFrequency',\n  newBillingProfile.name,\n  needHelp.name,\n  reservationAgreement.name,\n  dwInvoice.name,\n  dwInvoicePaymentProcessingFee.name,\n  niceTimeDirective.name,\n])\n\n  .controller('WizardReservationPurchaseCtrl', function($scope, $filter, $q, $route, $translate, $timeout, $templateCache,\n                                                        dwAlerts, helper, session, state, center, purchase, user,\n                                                        reservationUnit, settings, reservationFields, purchaseService,\n                                                        reservationService, userProfileService, optsRepeatFrequency,\n                                                        deskworksConfig) {\n    const $ctrl = this;\n    const origin = `/${state.getPath().split('/')[1]}`;\n\n    $templateCache.put('wizard-reservation/06-purchase/purchase.tpl.html', template);\n\n    state.setPageTitle($translate.instant('SIMPLE_RES.PURCHASE.PAGE_TITLE', { centerName: center.name }));\n\n    $ctrl.center = center;\n    $ctrl.user = user;\n    $ctrl.purchase = purchase;\n    $ctrl.purchasePackageId = +state.getParam('purchasePackageId');\n    $ctrl.reservationUnit = reservationUnit;\n\n    $ctrl.timeStart = $filter('toDate')(state.getParam('start'));\n    $ctrl.timeEnd = $filter('toDate')(state.getParam('end'));\n    $ctrl.reservationTitle = state.getParam('title') || '';\n    $ctrl.reservationNote = state.getParam('note') || '';\n    $ctrl.emailConfirmation = !!state.getParam('confirm');\n\n    $scope.$watch('$ctrl.emailConfirmation', val => { state.setParam('confirm', val || null).replace(); });\n\n    $ctrl.repeatFrequency = optsRepeatFrequency[0];\n    if (state.getParam('freq')) {\n      $ctrl.repeatFrequency = optsRepeatFrequency.find(opt => opt.id === state.getParam('freq'));\n      if ($ctrl.repeatFrequency && $ctrl.repeatFrequency.repeatDurationOptions) {\n        if ((state.getParam('duration') - 1) < $ctrl.repeatFrequency.repeatDurationOptions.length) {\n          $ctrl.repeatDuration = +state.getParam('duration');\n        }\n      }\n    }\n\n    /**\n     * Next button handler\n     */\n    $ctrl.next = function() {\n      if (helper.pointFirstInvalid('#wizardReservationPurchase')) return;\n\n      $ctrl.spin = true;\n      return userProfileService.saveBillingProfile(state.getCurrentCenterId(), user)\n        .then(_ => {\n          if (+$ctrl.purchase.balance <= 0) return state.setPath(`${origin}/complete`);\n\n          return $ctrl.createReservationWithPayment()\n            .then(result => $ctrl.updatePurchase().then(_ => result))\n            .then(result => {\n              if (result.accessCode && settings.enableAccessCodes && !session.isAdmin()) {\n                state.setParam('accessCode', result.accessCode);\n                return state.setPath(`${origin}/complete`);\n              }\n              state.resetParams();\n              return state.setPath(deskworksConfig.getDefaultRoute());\n            });\n        })\n        .finally(_ => { $ctrl.spin = false; });\n    };\n\n    /**\n     * Create reservation with payment\n     */\n    $ctrl.createReservationWithPayment = _ => {\n      const fields = JSON.parse(state.getParam('fields') || \"{}\");\n      Object.keys(fields).forEach(key => {\n        const field = reservationFields.find(f => f.id === +key);\n        fields[key] = field.$$serialize(field, fields[key]);\n      });\n\n      const data = {\n        from: $ctrl.timeStart,\n        to: $ctrl.timeEnd,\n        reservationNote: $ctrl.reservationNote,\n        title: $ctrl.reservationTitle,\n        reservationUnitId: $ctrl.reservationUnit.id,\n        emailConfirmation: $ctrl.emailConfirmation,\n        repeatFrequency: $ctrl.repeatFrequency.id,\n        repeatDuration: $ctrl.repeatDuration,\n        fields,\n      };\n\n      if ($ctrl.purchasePackageId) data.purchasePackageId = $ctrl.purchasePackageId;\n\n      return reservationService.saveWithPayment($ctrl.center.id, $ctrl.user.id, data)\n        .catch(err => dwAlerts.error(err, 'Failed to make reservation and payment.'));\n    };\n\n    /**\n     * Update purchase order\n     */\n    $ctrl.updatePurchase = _ => purchaseService.get($ctrl.center.id, $ctrl.user.id, $ctrl.purchase.id)\n      .catch(err => dwAlerts.error(err, 'Failed to get purchase.'))\n      .then(purchase => { $ctrl.purchase = purchase; });\n\n    /**\n     * Back button handler\n     */\n    $ctrl.back = () => state.setPath(`${origin}/reservation`);\n\n    /**\n     * Staff Help button handler\n     */\n    $ctrl.staffHelp = () => purchaseService.createStaffHelp($ctrl.center.id, $ctrl.user.id, $ctrl.purchase.id)\n      .catch(err => dwAlerts.error(err, 'Failed to create staff help.'))\n      .then(result => {\n        state.setParam('notice', result.notice);\n        return state.setPath(`${origin}/staff-help`);\n      });\n\n    /**\n     * Whether recurring settings are available\n     */\n    $ctrl.hasRecurring = () => session.isAdmin() || !settings.hideRecurringReservations;\n  });\n","// Module\nvar code = \"<div> <h1 class=\\\"page-title flex\\\"> <span>{{state.getPageTitle()}}</span> <need-help phone=\\\"$ctrl.center.phone\\\"></need-help> </h1> <form id=\\\"wizardReservationPurchase\\\" class=\\\"ff-grid gutter-v gutter-h\\\" novalidate ff-dim=\\\"$ctrl.spin\\\"> <ff-panel> <ff-panel-header> <span translate=\\\"SIMPLE_RES.PURCHASE.RESERVATION.HEADER\\\"></span> </ff-panel-header> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.LOCATION\\\"></span></ff-label> <ff-static ff-bind=\\\"::$ctrl.center.name\\\"></ff-static> </ff-row> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.SPACE\\\"></span></ff-label> <ff-static ff-bind=\\\"::$ctrl.reservationUnit.name\\\" name=\\\"reservationUnit\\\"></ff-static> </ff-row> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.DATE\\\"></span></ff-label> <ff-static ff-bind=\\\"::$ctrl.timeStart | date:'longDate'\\\" name=\\\"date\\\"></ff-static> </ff-row> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.TIME\\\"></span></ff-label> <ff-static> <span><span nice-time=\\\"::$ctrl.timeStart\\\"></span> - <span nice-time=\\\"::$ctrl.timeEnd\\\"></span></span> </ff-static> </ff-row> <ff-row ng-if=\\\"$ctrl.hasRecurring()\\\"> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.REPEAT_FREQUENCY\\\"></span></ff-label> <ff-static><span ng-bind=\\\"::$ctrl.repeatFrequency.name\\\"></span></ff-static> </ff-row> <ff-row ng-if=\\\"$ctrl.hasRecurring() && $ctrl.repeatFrequency.repeatDurationOptions\\\"> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.REPEAT_DURATION\\\"></span></ff-label> <ff-static>{{::$ctrl.repeatFrequency.repeatDurationFilter($ctrl.repeatDuration)}}</ff-static> </ff-row> </ff-panel> <ff-panel> <ff-panel-header> <span translate=\\\"SIMPLE_RES.PURCHASE.ORDER.HEADER\\\" translate-values=\\\"{ orderId: $ctrl.purchase.orderId }\\\"></span> </ff-panel-header> <dw-invoice invoice=\\\"$ctrl.purchase\\\" center=\\\"$ctrl.center\\\" allow-remove=\\\"false\\\" dw-invoice-payment-processing-fee settings=\\\"$resolve.settings\\\" credit-cards=\\\"$resolve.user.creditCards\\\" e-checks=\\\"$resolve.user.eChecks\\\"></dw-invoice> </ff-panel> <div> <ff-panel-header> <div translate=\\\"BILLING_PROFILE.PAGE_TITLE\\\" translate-values=\\\"{ userName: $resolve.user.fullName }\\\"></div> <small translate=\\\"GLOBAL.REQUIRED_FIELDS_MARKED_WITH\\\"></small> </ff-panel-header> <new-billing-profile user=\\\"$resolve.user\\\" settings=\\\"$resolve.settings\\\" id=\\\"newBillingProfile\\\" class=\\\"ff-grid gutter-v\\\"></new-billing-profile> </div> <ff-col> <div class=\\\"ff-grid gutter-h gutter-v\\\" style=\\\"justify-content:flex-end\\\"> <reservation-agreement flex=\\\"0 0 300px\\\" ng-if=\\\"wlLinks.reservationAgreementLinkUrl\\\"></reservation-agreement> <ff-panel flex=\\\"0 0 300px\\\"> <label class=\\\"ff-row\\\"> <ff-checkbox name=\\\"emailConfirmation\\\" ff-model=\\\"$ctrl.emailConfirmation\\\"> <span translate=\\\"RESERVATIONS.EMAIL_CONFIRMATION\\\"></span> </ff-checkbox> </label> </ff-panel> </div> </ff-col> <ff-btn-group> <ff-btn sense=\\\"help\\\" ff-click=\\\"$ctrl.staffHelp()\\\"><span translate=\\\"GLOBAL.BTN_STAFF_HELP\\\"></span></ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> <ff-btn sense=\\\"next\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.next()\\\"><span translate=\\\"GLOBAL.BTN_NEXT\\\"></span></ff-btn> </ff-btn-group> </form> </div> \";\n// Exports\nmodule.exports = code;","import newUserProfile from 'shared/new-user-profile/new-user-profile.directive';\nimport needHelp from 'shared/need-help/need-help.directive.js';\nimport template from './sign-up.tpl.html';\nimport wizardReservationPurchaseRedirect from 'shared/wizard-reservation/purchase-redirect.service';\n\nexport default angular.module('deskworks.WizardReservationSignUpCtrl', [\n  'ngRoute',\n  'deskworks.userProfile.service',\n  'deskworks.routeHelper',\n  'deskworks.helper',\n  newUserProfile.name,\n  needHelp.name,\n  wizardReservationPurchaseRedirect.name,\n])\n\n  .controller('WizardReservationSignUpCtrl', function($scope, $filter, $timeout, $q, $route, $translate, $templateCache,\n                                                      dwAlerts, helper, state, user, center, reg, session,\n                                                      userProfileService, wizardReservationPurchaseRedirect) {\n    const $ctrl = this;\n    const origin = `/${state.getPath().split('/')[1]}`;\n\n    $templateCache.put('wizard-reservation/07-sign-up/sign-up.tpl.html', template);\n\n    state.setPageTitle($translate.instant('USER_PROFILE.NEW_USER.PAGE_TITLE'));\n\n    /**\n     * Next button handler\n     */\n    $ctrl.next = function() {\n      if (helper.pointFirstInvalid('#user')) return;\n\n      return (reg.new ? userProfileService.registerNewUser(0, user) : $q.when())\n        .then(() => {\n          if (reg.new) { // Need to login under just created user\n            return state.login(user.login, user.password)\n              .catch(err => dwAlerts.error(err, 'Failed to login under created user.'));\n          }\n        })\n        .then(() => wizardReservationPurchaseRedirect({ replace: true }));\n    };\n\n    /**\n     * Back button handler\n     */\n    $ctrl.back = () => state.setPath(session.isAnonymous() ? `${origin}/sign-in` : `${origin}/reservation`);\n  });\n","// Module\nvar code = \"<h1 class=\\\"page-title flex\\\"> <span>{{state.getPageTitle()}}</span> <need-help phone=\\\"$resolve.center.phone\\\"></need-help> </h1> <div class=\\\"ff-grid gutter-v\\\"> <new-user-profile id=\\\"user\\\" user=\\\"$resolve.user\\\" reg=\\\"$resolve.reg\\\" center=\\\"$resolve.center\\\"></new-user-profile> <ff-btn-group> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> <ff-btn sense=\\\"next\\\" ff-click=\\\"$ctrl.next()\\\"><span translate=\\\"GLOBAL.BTN_NEXT\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.wizardReservationPurchaseRedirect', [\n  'session',\n  'deskworks.ReservationCost',\n  'deskworks.purchase.service',\n])\n\n  .factory('wizardReservationPurchaseRedirect', (session, state, purchaseService, ReservationCost, dwAlerts) => {\n    return ({ replace = false } = {}) => {\n      const origin = `/${state.getPath().split('/')[1]}`;\n\n      if (!session.isAnonymous() && !session.isRole('nonMember')) {\n        return state.setPath(`${origin}/confirm`, replace); // member or admin - no payment\n      }\n\n      const centerId = state.getCurrentCenterId();\n      const userId = state.getCurrentUserId();\n      const unitId = state.getParam('unit');\n      const start = state.getParam('start');\n      const end = state.getParam('end');\n\n      return ReservationCost.calcAsync(centerId, userId, unitId, start, end)\n        .then(cost => {\n          if (!cost) {\n            return state.setPath(`${origin}/confirm`, replace);\n          }\n\n          const data = {\n            reservationUnitId: unitId,\n            reservationFrom: start,\n            reservationTo: end,\n            reservationRepeatFrequency: state.getParam('freq'),\n            reservationRepeatDuration: state.getParam('duration'),\n          };\n\n          return purchaseService.createPurchaseForReservation(centerId, userId, data)\n            .catch(err => dwAlerts.error(err, 'Failed to create purchase for reservation.'))\n            .then(result => {\n              if (result.purchasePackageId) {\n                state.setParam('purchasePackageId', result.purchasePackageId);\n              }\n              state.setParam('purchaseId', result.id);\n              return state.setPath(`${origin}/purchase`, replace);\n            })\n        });\n    };\n  });\n","import './wizard-reservation.scss';\nimport staffHelpDirective from 'shared/staff-help/staff-help.directive';\nimport WizardReservationReservationCtrl from './02-reservation/reservation.controller';\nimport WizardReservationSignInCtrl from './03-sign-in/sign-in.controller';\nimport WizardReservationConfirmCtrl from './04-confirm/confirm.controller';\nimport WizardReservationCompleteCtrl from './05-complete/complete.controller';\nimport WizardReservationPurchaseCtrl from './06-purchase/purchase.controller';\nimport WizardReservationSignUpCtrl from './07-sign-up/sign-up.controller';\n\nexport default angular.module('deskworks.wizardReservation', [\n  staffHelpDirective.name,\n  WizardReservationReservationCtrl.name,\n  WizardReservationSignInCtrl.name,\n  WizardReservationConfirmCtrl.name,\n  WizardReservationCompleteCtrl.name,\n  WizardReservationPurchaseCtrl.name,\n  WizardReservationSignUpCtrl.name,\n]);\n","// extracted by extract-css-chunks-webpack-plugin"],"sourceRoot":""}