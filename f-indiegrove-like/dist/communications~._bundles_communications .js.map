{"version":3,"sources":["webpack:///./bundles/communications sync .*\\.tpl\\.html$","webpack:///./bundles/communications sync \\..+\\/.+\\.js$","webpack:///./bundles/communications/email-all-members/email-all-members.controller.js","webpack:///./bundles/communications/email-all-members/email-all-members.tpl.html","webpack:///./bundles/communications/email-site-members/email-site-members.controller.js","webpack:///./bundles/communications/email-site-members/email-site-members.tpl.html","webpack:///./bundles/communications/index.js","webpack:///./bundles/communications/message-board/message-board.controller.js","webpack:///./bundles/communications/message-board/message-board.scss?5e17","webpack:///./bundles/communications/message-board/message-board.tpl.html","webpack:///./bundles/communications/splash-page/splash-page.controller.js","webpack:///./bundles/communications/splash-page/splash-page.tpl.html"],"names":["angular","module","ffRichtextDirective","name","shortCodesDirective","attachmentsDirective","taToolbarEmail","controller","$translate","dwAlerts","state","helper","emailAllMembers","$ctrl","setPageTitle","instant","toolbar","attachments","shortCodes","id","_name","fetchingTpl","getTpl","catch","err","error","then","result","subject","body","content","finally","send","test","pointFirstInvalid","data","includeNonMembers","info","viewRecipients","query","recipients","forEach","rcpt","fullName","join","firstName","lastName","save","saveTpl","form","$setPristine","emailSiteMembers","membershipCategories","center","centerName","membershipCategory","membershipTypeIds","getSelectedMembershipIds","checkedInOnly","getCurrentCenterId","item","include","index","$injector","importAll","r","js","require","loadNewModules","m","default","invoke","$templateCache","ctx","key","put","replace","niceTimeDirective","$scope","$window","$timeout","MessageBoard","NATS","messageMaxLength","message","messages","params","centerId","offset","limit","subs","onInit","nats","connect","on","console","warn","$on","sub","unsubscribe","close","focus","fetch","onCreate","msg","deserialize","extend","unshift","onUpdate","onDelete","idx","eof","fetching","length","push","subscribe","post","posting","text","keypress","event","which","shiftKey","preventDefault","edit","copy","delete","confirm","splashPage","SplashPage","sp"],"mappings":"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","file":"communications~._bundles_communications .js?_rev=174944015d3ff9125084","sourcesContent":["var map = {\n\t\"./email-all-members/email-all-members.tpl.html\": \"./bundles/communications/email-all-members/email-all-members.tpl.html\",\n\t\"./email-site-members/email-site-members.tpl.html\": \"./bundles/communications/email-site-members/email-site-members.tpl.html\",\n\t\"./message-board/message-board.tpl.html\": \"./bundles/communications/message-board/message-board.tpl.html\",\n\t\"./splash-page/splash-page.tpl.html\": \"./bundles/communications/splash-page/splash-page.tpl.html\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/communications sync recursive .*\\\\.tpl\\\\.html$\";","var map = {\n\t\"./email-all-members/email-all-members.controller.js\": \"./bundles/communications/email-all-members/email-all-members.controller.js\",\n\t\"./email-site-members/email-site-members.controller.js\": \"./bundles/communications/email-site-members/email-site-members.controller.js\",\n\t\"./message-board/message-board.controller.js\": \"./bundles/communications/message-board/message-board.controller.js\",\n\t\"./splash-page/splash-page.controller.js\": \"./bundles/communications/splash-page/splash-page.controller.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/communications sync recursive \\\\..+\\\\/.+\\\\.js$\";","import ffRichtextDirective from 'shared/ff-richtext/ff-richtext.directive';\nimport shortCodesDirective from 'shared/short-codes/short-codes.directive';\nimport taToolbarEmail from 'shared/ff-richtext/ta-toolbar-email.service';\nimport attachmentsDirective from 'shared/attachments/attachments.directive';\n\nexport default angular.module('deskworks.communications.emailAllMembers', [\n  ffRichtextDirective.name,\n  shortCodesDirective.name,\n  attachmentsDirective.name,\n  taToolbarEmail.name,\n  'deskworks.emailAllMembers.service',\n])\n\n  .controller('EmailAllMembersCtrl', function($translate, dwAlerts, state, helper, emailAllMembers, taToolbarEmail) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('EMAIL_MEMBERS.ALL.PAGE_TITLE'));\n\n    $ctrl.toolbar = taToolbarEmail;\n    $ctrl.attachments = [];\n\n    $ctrl.shortCodes = [\n      { id: '{{member-name}}', _name: 'SH_CODES.MEMBER_NAME' },\n      { id: '{{first-name}}', _name: 'SH_CODES.FIRST_NAME' },\n      { id: '{{last-name}}', _name: 'SH_CODES.LAST_NAME' },\n      { id: '{{login}}', _name: 'SH_CODES.LOGIN' },\n      { id: '{{company-name}}', _name: 'SH_CODES.COMPANY_NAME' },\n    ];\n\n    /**\n     * Load template\n     */\n    $ctrl.fetchingTpl = true;\n    emailAllMembers.getTpl()\n      .catch(err => dwAlerts.error(err, 'Failed to get template.'))\n      .then(result => {\n        if (result.subject !== 'Default subject') $ctrl.subject = result.subject;\n        $ctrl.body = result.content === 'Default body' ? $translate.instant('EMAIL_MEMBERS.MESSAGE.ALL.DEFAULT') : result.content;\n      })\n      .finally(() => $ctrl.fetchingTpl = false);\n\n\n    /**\n     * Email All Members handler\n     */\n    $ctrl.send = test => {\n      if (helper.pointFirstInvalid('#emailAllMembers')) return;\n\n      const data = {\n        includeNonMembers: $ctrl.includeNonMembers,\n        subject: $ctrl.subject,\n        body: $ctrl.body,\n        attachments: $ctrl.attachments,\n      };\n\n      return emailAllMembers.send(data, test)\n        .catch(err => dwAlerts.error(err, 'Failed to email all members.'))\n        .then(() => {\n          dwAlerts.info(test ? $translate.instant('EMAIL_MEMBERS.TEST_SUCCESS') : $translate.instant('EMAIL_MEMBERS.SUCCESS'));\n          // if (!test) $ctrl.form.$setPristine();\n        });\n    };\n\n    /**\n     * View Email List handler\n     */\n    $ctrl.viewRecipients = () =>\n      emailAllMembers.query($ctrl.includeNonMembers)\n        .catch(err => dwAlerts.error(err, 'Failed to query recipients.'))\n        .then(result => {\n          $ctrl.recipients = result;\n          $ctrl.recipients.forEach(rcpt => { rcpt.fullName = helper.join([rcpt.firstName, rcpt.lastName], ' '); });\n        });\n\n    /**\n     * Save as Template\n     */\n    $ctrl.save = () => {\n      if (helper.pointFirstInvalid('#emailAllMembers')) return;\n\n      const data = {\n        subject: $ctrl.subject,\n        content: $ctrl.body,\n      };\n\n      return emailAllMembers.saveTpl(data)\n        .catch(err => dwAlerts.error(err, 'Failed to save template.'))\n        .then(() => $ctrl.form.$setPristine())\n    };\n  });\n","// Module\nvar code = \"<form name=\\\"$ctrl.form\\\" id=\\\"emailAllMembers\\\" ng-hide=\\\"$ctrl.recipients\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel style=\\\"max-width:654px\\\"> <ff-panel-header><span translate=\\\"EMAIL_MEMBERS.OPTIONS.HEADER\\\"></span></ff-panel-header> <label> <ff-checkbox ff-model=\\\"$ctrl.includeNonMembers\\\"> <span translate=\\\"EMAIL_MEMBERS.OPTIONS.INCLUDE_NON_MEMBERS\\\"></span> </ff-checkbox> </label> </ff-panel> <ff-panel class=\\\"email-template-panel\\\"> <ff-spin ng-if=\\\"$ctrl.fetchingTpl\\\"></ff-spin> <ff-panel-header><span translate=\\\"EMAIL_MEMBERS.MESSAGE.HEADER\\\"></span></ff-panel-header> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"EMAIL_MEMBERS.MESSAGE.SUBJECT\\\"></req></ff-label> <ff-text ff-model=\\\"$ctrl.subject\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'EMAIL_MEMBERS.MESSAGE.SUBJECT' | translate}}\\\"></ff-text> </label> <ff-row> <ff-richtext ff-model=\\\"$ctrl.body\\\" ta-toolbar=\\\"{{$ctrl.toolbar}}\\\" class=\\\"ta-email\\\"></ff-richtext> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"send\\\" ff-click=\\\"$ctrl.send(true)\\\" title=\\\"{{'EMAIL_MEMBERS.BTN_TEST.HINT' | translate}}\\\"> <span translate=\\\"EMAIL_MEMBERS.BTN_TEST\\\"></span> </ff-btn> <ff-btn sense=\\\"send\\\" ff-click=\\\"$ctrl.send()\\\" title=\\\"{{'EMAIL_MEMBERS.BTN_SEND.HINT' | translate}}\\\"> <span translate=\\\"EMAIL_MEMBERS.BTN_SEND\\\"></span> </ff-btn> <ff-btn sense=\\\"search\\\" ff-click=\\\"$ctrl.viewRecipients()\\\"><span translate=\\\"EMAIL_MEMBERS.BTN_VIEW_RECIPIENTS\\\"></span></ff-btn> <ff-btn sense=\\\"save\\\" ff-click=\\\"$ctrl.save()\\\" ff-disabled=\\\"$ctrl.form.$pristine\\\"><span translate=\\\"EMAIL_MEMBERS.BTN_SAVE_TEMPLATE\\\"></span></ff-btn> </ff-btn-group> <div class=\\\"ff-grid gutter-v gutter-h\\\" style=\\\"margin-bottom:0\\\"> <div flex=\\\"{md: '0 0 50%'}\\\" short-codes=\\\"$ctrl.shortCodes\\\"></div> <div flex=\\\"{md: '0 0 50%'}\\\" attachments=\\\"$ctrl.attachments\\\" form=\\\"$ctrl.form\\\"></div> </div> </div> </form> <div ng-if=\\\"$ctrl.recipients\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-btn-group ng-if=\\\"$ctrl.recipients.length > 10\\\"> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.recipients = null\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> <ff-panel> <ff-panel-header> <span translate=\\\"EMAIL_MEMBERS.RECIPIENTS.HEADER\\\" translate-values=\\\"{ count: $ctrl.recipients.length }\\\"></span> </ff-panel-header> <ff-header ng-show=\\\"$ctrl.recipients.length > 0\\\"> <ff-row> <cell><span translate=\\\"EMAIL_MEMBERS.RECIPIENTS.COMPANY\\\"></span></cell> <cell><span translate=\\\"EMAIL_MEMBERS.RECIPIENTS.NAME\\\"></span></cell> <cell><span translate=\\\"EMAIL_MEMBERS.RECIPIENTS.EMAIL\\\"></span></cell> </ff-row> </ff-header> <ff-row ng-repeat=\\\"rcpt in $ctrl.recipients\\\"> <ff-static ff-bind=\\\"::rcpt.company\\\"></ff-static> <ff-static ff-bind=\\\"::rcpt.fullName\\\"></ff-static> <ff-static><a href=\\\"mailto:{{::rcpt.email}}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\" ng-bind=\\\"::rcpt.email\\\"></a></ff-static> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.recipients = null\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> </div> \";\n// Exports\nmodule.exports = code;","import ffRichtextDirective from 'shared/ff-richtext/ff-richtext.directive';\nimport shortCodesDirective from 'shared/short-codes/short-codes.directive';\nimport taToolbarEmail from 'shared/ff-richtext/ta-toolbar-email.service';\nimport attachmentsDirective from 'shared/attachments/attachments.directive';\n\nexport default angular.module('deskworks.communications.emailSiteMembers', [\n  ffRichtextDirective.name,\n  shortCodesDirective.name,\n  attachmentsDirective.name,\n  taToolbarEmail.name,\n  'deskworks.emailSiteMembers.service',\n])\n\n  .controller('EmailSiteMembersCtrl', function($translate, dwAlerts, state, helper, emailSiteMembers,\n                                               membershipCategories, center, taToolbarEmail) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('EMAIL_MEMBERS.SITE.PAGE_TITLE', { centerName: center.name }));\n\n    $ctrl.toolbar = taToolbarEmail;\n\n    $ctrl.membershipCategories = membershipCategories;\n\n    $ctrl.membershipCategory = $ctrl.membershipCategories[0];\n    $ctrl.attachments = [];\n\n    $ctrl.shortCodes = [\n      { id: '{{center-name}}', _name: 'SH_CODES.CENTER_NAME' },\n      { id: '{{member-name}}', _name: 'SH_CODES.MEMBER_NAME' },\n      { id: '{{first-name}}', _name: 'SH_CODES.FIRST_NAME' },\n      { id: '{{last-name}}', _name: 'SH_CODES.LAST_NAME' },\n      { id: '{{login}}', _name: 'SH_CODES.LOGIN' },\n      { id: '{{company-name}}', _name: 'SH_CODES.COMPANY_NAME' },\n    ];\n\n    /**\n     * Load template\n     */\n    $ctrl.fetchingTpl = true;\n    emailSiteMembers.getTpl()\n      .catch(err => dwAlerts.error(err, 'Failed to get template.'))\n      .then(result => {\n        if (result.subject !== 'Default subject') $ctrl.subject = result.subject;\n        if (result.content !== 'Default body') $ctrl.body = result.content;\n        $ctrl.body = result.content === 'Default body' ? $translate.instant('EMAIL_MEMBERS.MESSAGE.SITE.DEFAULT') : result.content;\n      })\n      .finally(() => $ctrl.fetchingTpl = false);\n\n    /**\n     * Email All Members handler\n     */\n    $ctrl.send = test => {\n      if (helper.pointFirstInvalid('#emailSiteMembers')) return;\n\n      const data = {\n        membershipTypeIds: $ctrl.getSelectedMembershipIds(),\n        subject: $ctrl.subject,\n        body: $ctrl.body,\n        attachments: $ctrl.attachments,\n        checkedInOnly: $ctrl.checkedInOnly,\n      };\n\n      return emailSiteMembers.send(state.getCurrentCenterId(), data, test)\n        .catch(err => dwAlerts.error(err, 'Failed to email site members.'))\n        .then(() => {\n          dwAlerts.info(test ? $translate.instant('EMAIL_MEMBERS.TEST_SUCCESS') : $translate.instant('EMAIL_MEMBERS.SUCCESS'));\n          // if (!test) $ctrl.form.$setPristine();\n        });\n    };\n\n    /**\n     * View Email List handler\n     */\n    $ctrl.viewRecipients = () =>\n      emailSiteMembers.query(state.getCurrentCenterId(), $ctrl.getSelectedMembershipIds(), $ctrl.checkedInOnly)\n        .catch(err => dwAlerts.error(err, 'Failed to query recipients.'))\n        .then(result => {\n          $ctrl.recipients = result;\n          $ctrl.recipients.forEach(rcpt => { rcpt.fullName = helper.join([rcpt.firstName, rcpt.lastName], ' '); });\n        });\n\n    /**\n     * Save as Template\n     */\n    $ctrl.save = () => {\n      if (helper.pointFirstInvalid('#emailSiteMembers')) return;\n\n      const data = {\n        subject: $ctrl.subject,\n        content: $ctrl.body,\n      };\n\n      return emailSiteMembers.saveTpl(data)\n        .catch(err => dwAlerts.error(err, 'Failed to save template.'))\n        .then(() => $ctrl.form.$setPristine())\n    };\n\n    /**\n     * Collect ids of selected membership categories\n     */\n    $ctrl.getSelectedMembershipIds = () =>\n      $ctrl.membershipCategories\n        .filter(item => item.include)\n        .map(item => item.id);\n  });\n","// Module\nvar code = \"<form name=\\\"$ctrl.form\\\" id=\\\"emailSiteMembers\\\" ng-hide=\\\"$ctrl.recipients\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel style=\\\"max-width:654px\\\"> <ff-panel-header><span translate=\\\"EMAIL_MEMBERS.OPTIONS.HEADER\\\"></span></ff-panel-header> <div class=\\\"ff-grid gutter-v-half\\\"> <div> <ff-row> <label flex=\\\"none\\\"><ff-include-all flex=\\\"0 0 30px\\\" items=\\\"$ctrl.membershipCategories\\\" default=\\\"true\\\"></ff-include-all></label> </ff-row> <ff-header> <ff-row> <span flex=\\\"0 0 32px\\\" class=\\\"ff-center\\\" title=\\\"{{'GLOBAL.INCLUDE' | translate}}\\\"><ff-icon sense=\\\"check\\\"></ff-icon></span> <cell><span translate=\\\"EMAIL_MEMBERS.OPTIONS.MEMBERSHIP_CATEGORY\\\"></span></cell> </ff-row> </ff-header> <label class=\\\"ff-row\\\" ng-repeat=\\\"membType in $ctrl.membershipCategories\\\"> <ff-static flex=\\\"0 0 32px\\\" class=\\\"ff-center\\\"><ff-checkbox ff-model=\\\"membType.include\\\"></ff-checkbox></ff-static> <ff-static>{{::membType.name}}</ff-static> </label> </div> <ff-static class=\\\"ff-no-frame\\\"><ff-static> <label> <ff-checkbox ff-model=\\\"$ctrl.checkedInOnly\\\"> <span translate=\\\"EMAIL_MEMBERS.OPTIONS.ONLY_CHECKED_IN\\\"></span> </ff-checkbox> </label> </ff-static></ff-static> </div> </ff-panel> <ff-panel class=\\\"email-template-panel\\\"> <ff-spin ng-if=\\\"$ctrl.fetchingTpl\\\"></ff-spin> <ff-panel-header><span translate=\\\"EMAIL_MEMBERS.MESSAGE.HEADER\\\"></span></ff-panel-header> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"EMAIL_MEMBERS.MESSAGE.SUBJECT\\\"></req></ff-label> <ff-text ff-model=\\\"$ctrl.subject\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'EMAIL_MEMBERS.MESSAGE.SUBJECT' | translate}}\\\"></ff-text> </label> <ff-row> <ff-richtext ff-model=\\\"$ctrl.body\\\" ta-toolbar=\\\"{{$ctrl.toolbar}}\\\" class=\\\"ta-email\\\"></ff-richtext> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"send\\\" ff-click=\\\"$ctrl.send(true)\\\" title=\\\"{{'EMAIL_MEMBERS.BTN_TEST.HINT' | translate}}\\\"> <span translate=\\\"EMAIL_MEMBERS.BTN_TEST\\\"></span> </ff-btn> <ff-btn sense=\\\"send\\\" ff-click=\\\"$ctrl.send()\\\" title=\\\"{{'EMAIL_MEMBERS.BTN_SEND.HINT' | translate}}\\\"> <span translate=\\\"EMAIL_MEMBERS.BTN_SEND\\\"></span> </ff-btn> <ff-btn sense=\\\"search\\\" ff-click=\\\"$ctrl.viewRecipients()\\\"><span translate=\\\"EMAIL_MEMBERS.BTN_VIEW_RECIPIENTS\\\"></span></ff-btn> <ff-btn sense=\\\"save\\\" ff-click=\\\"$ctrl.save()\\\" ff-disabled=\\\"$ctrl.form.$pristine\\\"><span translate=\\\"EMAIL_MEMBERS.BTN_SAVE_TEMPLATE\\\"></span></ff-btn> </ff-btn-group> <div class=\\\"ff-grid gutter-v gutter-h\\\" style=\\\"margin-bottom:0\\\"> <div flex=\\\"{md: '0 0 50%'}\\\" short-codes=\\\"$ctrl.shortCodes\\\"></div> <div flex=\\\"{md: '0 0 50%'}\\\" attachments=\\\"$ctrl.attachments\\\" form=\\\"$ctrl.form\\\"></div> </div> </div> </form> <div ng-if=\\\"$ctrl.recipients\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-btn-group ng-if=\\\"$ctrl.recipients.length > 10\\\"> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.recipients = null\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> <ff-panel> <ff-panel-header> <span translate=\\\"EMAIL_MEMBERS.RECIPIENTS.HEADER\\\" translate-values=\\\"{ count: $ctrl.recipients.length }\\\"></span> </ff-panel-header> <ff-header ng-show=\\\"$ctrl.recipients.length > 0\\\"> <ff-row> <cell><span translate=\\\"EMAIL_MEMBERS.RECIPIENTS.COMPANY\\\"></span></cell> <cell><span translate=\\\"EMAIL_MEMBERS.RECIPIENTS.NAME\\\"></span></cell> <cell><span translate=\\\"EMAIL_MEMBERS.RECIPIENTS.EMAIL\\\"></span></cell> </ff-row> </ff-header> <ff-row ng-repeat=\\\"rcpt in $ctrl.recipients\\\"> <ff-static ff-bind=\\\"::rcpt.company\\\"></ff-static> <ff-static ff-bind=\\\"::rcpt.fullName\\\"></ff-static> <ff-static><a href=\\\"mailto:{{::rcpt.email}}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\" ng-bind=\\\"::rcpt.email\\\"></a></ff-static> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.recipients = null\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> </div> \";\n// Exports\nmodule.exports = code;","const index = ['$injector', function index($injector) {\n  // JS\n  const importAll = r => r.keys().map(r);\n  const js = importAll(require.context('./', true, /\\..+\\/.+\\.js$/));\n  $injector.loadNewModules(js.map(m => m.default.name));\n\n  // Templates\n  $injector.invoke(['$templateCache', function($templateCache) {\n    const ctx = require.context('./', true, /.*\\.tpl\\.html$/);\n    ctx.keys().forEach(key => $templateCache.put(key.replace(/^\\.\\//, ''), ctx(key)));\n  }]);\n}];\n\nexport default index;\n","import './message-board.scss';\nimport niceTimeDirective from 'shared/nice-date-time/nice-time.directive';\n\nexport default angular.module('deskworks.MessageBoardCtrl', [\n  'NATS',\n  'infinite-scroll',\n  'deskworks.MessageBoard',\n  niceTimeDirective.name,\n])\n  .controller('MessageBoardCtrl', function($scope, $translate, $window, $timeout, dwAlerts,\n                                           state, helper, MessageBoard, NATS) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('MESSAGE_BOARD.PAGE_TITLE'));\n\n    $ctrl.messageMaxLength = 1000;\n    $ctrl.message = {};\n    $ctrl.messages = [];\n    $ctrl.params = {\n      centerId: state.getCurrentCenterId(),\n      offset: 0,\n      limit: 100,\n    };\n\n    const subs = [];\n\n    $timeout(function onInit() {\n      $ctrl.nats = NATS.connect();\n      $ctrl.nats.on('error', function(err) { console.warn('NATS error:', err); });\n      $scope.$on('$destroy', function() {\n        subs.forEach(function(sub) { $ctrl.nats.unsubscribe(sub); });\n        $ctrl.nats.close();\n      });\n      helper.focus('.message-board .msg-post textarea');\n      $ctrl.fetch(); // workaround: ngInfiniteScroll may not run initial fetch in some cases\n    });\n\n    /**\n     * Create message event\n     */\n    function onCreate(msg) {\n      msg = MessageBoard.deserialize(msg);\n      var message = helper.find($ctrl.messages, msg.id);\n      if(message) return angular.extend(message, msg);\n      $ctrl.messages.unshift(msg);\n    }\n\n    /**\n     * Update message event\n     */\n    function onUpdate(msg) {\n      const message = helper.find($ctrl.messages, msg.id);\n      if (message) return angular.extend(message, msg);\n    }\n\n    /**\n     * Delete message event\n     */\n    function onDelete(msg) {\n      const idx = helper.findIndex($ctrl.messages, msg.id);\n      if (idx >= 0) $ctrl.messages.splice(idx, 1);\n    }\n\n    /**\n     * Fetch\n     */\n    $ctrl.fetch = function() {\n      if ($ctrl.eof || $ctrl.fetching) return $ctrl.fetching;\n      $ctrl.fetching = MessageBoard.query($ctrl.params)\n        .catch(err => dwAlerts.error(err, 'Failed to query messages.'))\n        .finally(() => { $ctrl.fetching = null; })\n        .then(messages => {\n          $ctrl.messages = $ctrl.messages.concat(messages);\n          $ctrl.params.offset = $ctrl.messages.length;\n          $ctrl.eof = messages.length < $ctrl.params.limit;\n          if (!subs.length) {\n            subs.push($ctrl.nats.subscribe('API.:siteId.centers.:centerId.message-board.messages.create', onCreate));\n            subs.push($ctrl.nats.subscribe('API.:siteId.centers.:centerId.message-board.messages.update', onUpdate));\n            subs.push($ctrl.nats.subscribe('API.:siteId.centers.:centerId.message-board.messages.delete', onDelete));\n          }\n        });\n    };\n\n    /**\n     * Post message\n     */\n    $ctrl.post = function() {\n      if ($ctrl.posting || !$ctrl.message.text) return;\n\n      $ctrl.message.centerId = $ctrl.message.centerId || state.getCurrentCenterId();\n\n      $ctrl.posting = true;\n      MessageBoard.save($ctrl.message) // don't return promise to avoid double spinner\n        .catch(err => dwAlerts.error(err, 'Failed to save message.'))\n        .then(() => { $ctrl.message = {}; })\n        .finally(() => { $ctrl.posting = false; });\n    };\n\n    /**\n     * Post message by enter\n     */\n    $ctrl.keypress = function(event) {\n      if (event.which === 13 && !event.shiftKey) {\n        event.preventDefault();\n        $ctrl.post();\n      }\n    };\n\n    /**\n     * Edit message\n     */\n    $ctrl.edit = function(msg) {\n      $ctrl.message = angular.copy(msg);\n      helper.focus('.msg-post textarea');\n    };\n\n    /**\n     * Delete message\n     */\n    $ctrl.delete = function(msg) {\n      if (!$window.confirm($translate.instant('MESSAGE_BOARD.MESSAGES.CONFIRM_DELETE'))) return;\n\n      if ($ctrl.message.id === msg.id) $ctrl.message = {};\n\n      return MessageBoard.delete(msg.id)\n        .catch(err => dwAlerts.error(err, 'Failed to delete message.'));\n    };\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div class=\\\"message-board\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <ff-panel class=\\\"ff-bmargin\\\"> <ff-col class=\\\"msg-sticky\\\"> <ff-header class=\\\"msg-post-header\\\"> <span translate=\\\"MESSAGE_BOARD.POST_MESSAGE.HEADER\\\" ng-if=\\\"!$ctrl.message.id\\\"></span> <span ng-if=\\\"$ctrl.message.id\\\"> <span translate=\\\"MESSAGE_BOARD.EDIT_MESSAGE.HEADER\\\"></span> <strong>{{$ctrl.message.author.fullName || 'anonymous'}}</strong> at <span nice-time=\\\"$ctrl.message.createdAt\\\"></span> on <span>{{$ctrl.message.createdAt | date: 'mediumDate'}}</span> </span> </ff-header> <form name=\\\"$ctrl.form\\\" class=\\\"ff-row msg-post\\\"> <ff-textarea name=\\\"text\\\" ff-model=\\\"$ctrl.message.text\\\" placeholder=\\\"{{'MESSAGE_BOARD.POST_MESSAGE.PLACEHOLDER' | translate}}\\\" counter=\\\"{{$ctrl.message.text.length}}/{{::$ctrl.messageMaxLength}}\\\" ng-keypress=\\\"$ctrl.keypress($event)\\\"></ff-textarea> <div ff-dim=\\\"$ctrl.posting\\\" class=\\\"msg-buttons\\\" flex=\\\"none\\\"> <ff-btn type=\\\"submit\\\" sense=\\\"ok\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.post()\\\" title=\\\"{{'MESSAGE_BOARD.POST_MESSAGE.BTN_POST' | translate}}\\\" ff-disabled=\\\"!$ctrl.message.text\\\"></ff-btn> <ff-btn sense=\\\"cancel\\\" size=\\\"xs\\\" title=\\\"{{'GLOBAL.BTN_CANCEL' | translate}}\\\" ff-click=\\\"$ctrl.message = {}\\\" ng-if=\\\"$ctrl.message.id\\\"></ff-btn> </div> </form> <ff-header class=\\\"msg-messages-header\\\" translate=\\\"MESSAGE_BOARD.MESSAGES.HEADER\\\"></ff-header> </ff-col> <div class=\\\"msg-scroller\\\" infinite-scroll=\\\"$ctrl.fetch()\\\" infinite-scroll-distance=\\\"2\\\" infinite-scroll-container=\\\"'.snap-content-scroller'\\\"> <ff-row ng-repeat=\\\"msg in $ctrl.messages\\\" class=\\\"msg-container animate-collapse\\\" ng-class=\\\"{ active: msg.id === $ctrl.message.id }\\\"> <div class=\\\"msg-ava\\\"> <ff-img ff-src=\\\"{{::msg.author.photo}}\\\" ng-if=\\\"::msg.author.photo\\\" ff-alt=\\\"{{::msg.author.fullName || 'anonymous'}}\\\"></ff-img> <i class=\\\"fa fa-user\\\" ng-if=\\\"::!msg.author.photo\\\"></i> </div> <div> <div> <div class=\\\"msg-meta\\\"> <span class=\\\"msg-name\\\">{{::msg.author.fullName || 'anonymous'}}</span> <span class=\\\"msg-time\\\" nice-time=\\\"::msg.createdAt\\\"></span> <span class=\\\"msg-date\\\">{{::msg.createdAt | date: 'mediumDate'}}</span> </div> <div class=\\\"msg-body\\\">{{msg.text}}</div> </div> </div> <ff-btn-group class=\\\"floating-toolbar\\\" ng-if=\\\"::state.isLoggedAdmin()\\\"> <ff-row> <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" class=\\\"ff-btn-icon\\\" ff-click=\\\"$ctrl.edit(msg)\\\" title=\\\"{{'GLOBAL.BTN_EDIT' | translate}}\\\"></ff-btn> <ff-btn sense=\\\"delete\\\" size=\\\"xs\\\" class=\\\"ff-btn-icon\\\" ff-click=\\\"$ctrl.delete(msg)\\\" title=\\\"{{'GLOBAL.BTN_DELETE' | translate}}\\\"></ff-btn> </ff-row> </ff-btn-group> </ff-row> <div class=\\\"ff-spin ff-spin-placeholder\\\" ng-if=\\\"$ctrl.fetching\\\"></div> </div> <ff-label ng-if=\\\"!$ctrl.messages.length && !$ctrl.fetching\\\" class=\\\"ff-no-frame\\\"> <span translate=\\\"GLOBAL.NONE\\\"></span> </ff-label> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","import ffRichtextDirective from 'shared/ff-richtext/ff-richtext.directive';\nimport taToolbarEmail from 'shared/ff-richtext/ta-toolbar-email.service';\n\nexport default angular.module('deskworks.SplashPageCtrl', [\n  ffRichtextDirective.name,\n  taToolbarEmail.name,\n  'deskworks.SplashPage',\n])\n  .controller('SplashPageCtrl', function($translate, dwAlerts, state, helper, center, splashPage, SplashPage, taToolbarEmail) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('SPLASH_PAGE.PAGE_TITLE', { centerName: center.name }));\n\n    $ctrl.sp = splashPage;\n    $ctrl.toolbar = taToolbarEmail;\n\n    $ctrl.save = () => {\n      if (helper.pointFirstInvalid('#splashPage')) return;\n\n      return SplashPage.save(state.getCurrentCenterId(), $ctrl.sp)\n        .catch(err => dwAlerts.error(err, 'Failed to save splash page settings.'))\n        .then(() => { $ctrl.form.$setPristine(); });\n    };\n  });\n","// Module\nvar code = \"<form name=\\\"$ctrl.form\\\" id=\\\"splashPage\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel style=\\\"max-width:654px\\\"> <ff-row style=\\\"margin-bottom:1rem\\\"> <label flex=\\\"none\\\"> <ff-checkbox name=\\\"enabled\\\" ff-model=\\\"$ctrl.sp.enabled\\\"> <span translate=\\\"SPLASH_PAGE.ENABLED\\\"></span> </ff-checkbox> </label> <ff-hint flex=\\\"0 0 15px\\\" style=\\\"align-self:center;margin-left:auto\\\"> <span translate=\\\"SPLASH_PAGE.HINT\\\"></span> </ff-hint> </ff-row> <ff-row> <ff-richtext ff-model=\\\"$ctrl.sp.body\\\" ta-toolbar=\\\"{{$ctrl.toolbar}}\\\" class=\\\"ta-html\\\"></ff-richtext> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"save\\\" ff-click=\\\"$ctrl.save()\\\" ff-disabled=\\\"$ctrl.form.$pristine\\\"> <span translate=\\\"GLOBAL.BTN_SAVE\\\"></span> </ff-btn> </ff-btn-group> </div> </form> \";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}