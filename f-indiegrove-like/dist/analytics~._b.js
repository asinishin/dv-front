(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["analytics~._b"],{

/***/ "./bundles/analytics sync recursive .*\\.tpl\\.html$":
/*!***********************************************!*\
  !*** ./bundles/analytics sync .*\.tpl\.html$ ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./dashboard/analytics-dashboard.tpl.html": "./bundles/analytics/dashboard/analytics-dashboard.tpl.html",
	"./widgets/analytics-widget-base.tpl.html": "./bundles/analytics/widgets/analytics-widget-base.tpl.html",
	"./widgets/analytics-widget.tpl.html": "./bundles/analytics/widgets/analytics-widget.tpl.html",
	"./widgets/occupancy-vacancy/analytics-occupancy-vacancy.tpl.html": "./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy.tpl.html",
	"./widgets/recurring-billings/analytics-recurring-billings.tpl.html": "./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings.tpl.html",
	"./widgets/reservation-space-utilization/analytics-reservation-space-utilization.tpl.html": "./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization.tpl.html",
	"./widgets/sales-by-product-category/analytics-sales-by-product-category.tpl.html": "./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category.tpl.html"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./bundles/analytics sync recursive .*\\.tpl\\.html$";

/***/ }),

/***/ "./bundles/analytics sync recursive \\..+\\/.+\\.js$":
/*!**********************************************!*\
  !*** ./bundles/analytics sync \..+\/.+\.js$ ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./dashboard/analytics-dashboard.controller.js": "./bundles/analytics/dashboard/analytics-dashboard.controller.js",
	"./dashboard/analytics-user.service.js": "./bundles/analytics/dashboard/analytics-user.service.js",
	"./widgets/analytics-widget.directive.js": "./bundles/analytics/widgets/analytics-widget.directive.js",
	"./widgets/analytics-widgets-list.service.js": "./bundles/analytics/widgets/analytics-widgets-list.service.js",
	"./widgets/income/analytics-income-chart.service.js": "./bundles/analytics/widgets/income/analytics-income-chart.service.js",
	"./widgets/income/analytics-income.directive.js": "./bundles/analytics/widgets/income/analytics-income.directive.js",
	"./widgets/income/analytics-income.service.js": "./bundles/analytics/widgets/income/analytics-income.service.js",
	"./widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart-units.service.js": "./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart-units.service.js",
	"./widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart.service.js": "./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart.service.js",
	"./widgets/occupancy-vacancy/analytics-occupancy-vacancy.directive.js": "./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy.directive.js",
	"./widgets/occupancy-vacancy/analytics-occupancy-vacancy.service.js": "./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy.service.js",
	"./widgets/recurring-billings/analytics-recurring-billings-chart.service.js": "./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings-chart.service.js",
	"./widgets/recurring-billings/analytics-recurring-billings.directive.js": "./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings.directive.js",
	"./widgets/recurring-billings/analytics-recurring-billings.service.js": "./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings.service.js",
	"./widgets/reservation-space-utilization/analytics-reservation-space-utilization-chart-units.service.js": "./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization-chart-units.service.js",
	"./widgets/reservation-space-utilization/analytics-reservation-space-utilization-chart.service.js": "./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization-chart.service.js",
	"./widgets/reservation-space-utilization/analytics-reservation-space-utilization.directive.js": "./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization.directive.js",
	"./widgets/reservation-space-utilization/analytics-reservation-space-utilization.service.js": "./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization.service.js",
	"./widgets/sales-by-product-category/analytics-sales-by-product-category-chart.service.js": "./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category-chart.service.js",
	"./widgets/sales-by-product-category/analytics-sales-by-product-category-detailed-chart.service.js": "./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category-detailed-chart.service.js",
	"./widgets/sales-by-product-category/analytics-sales-by-product-category.directive.js": "./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category.directive.js",
	"./widgets/sales-by-product-category/analytics-sales-by-product-category.service.js": "./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category.service.js",
	"./widgets/sales/analytics-sales-chart.service.js": "./bundles/analytics/widgets/sales/analytics-sales-chart.service.js",
	"./widgets/sales/analytics-sales.directive.js": "./bundles/analytics/widgets/sales/analytics-sales.directive.js",
	"./widgets/sales/analytics-sales.service.js": "./bundles/analytics/widgets/sales/analytics-sales.service.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./bundles/analytics sync recursive \\..+\\/.+\\.js$";

/***/ }),

/***/ "./bundles/analytics/dashboard/analytics-dashboard.controller.js":
/*!***********************************************************************!*\
  !*** ./bundles/analytics/dashboard/analytics-dashboard.controller.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _analytics_dashboard_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./analytics-dashboard.scss */ "./bundles/analytics/dashboard/analytics-dashboard.scss");
/* harmony import */ var _analytics_dashboard_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_analytics_dashboard_scss__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var shared_drag_n_drop_dnd_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! shared/drag-n-drop/dnd.service */ "./shared/drag-n-drop/dnd.service.js");
/* harmony import */ var shared_drag_n_drop_keese_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared/drag-n-drop/keese.service */ "./shared/drag-n-drop/keese.service.js");
/* harmony import */ var _widgets_analytics_widget_directive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../widgets/analytics-widget.directive */ "./bundles/analytics/widgets/analytics-widget.directive.js");
/* harmony import */ var _widgets_analytics_widgets_list_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../widgets/analytics-widgets-list.service */ "./bundles/analytics/widgets/analytics-widgets-list.service.js");
/* harmony import */ var _analytics_user_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./analytics-user.service */ "./bundles/analytics/dashboard/analytics-user.service.js");






/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.AnalyticsDashboardCtrl', ['deskworks.state', 'session', shared_drag_n_drop_dnd_service__WEBPACK_IMPORTED_MODULE_1__["default"].name, shared_drag_n_drop_keese_service__WEBPACK_IMPORTED_MODULE_2__["default"].name, _widgets_analytics_widget_directive__WEBPACK_IMPORTED_MODULE_3__["default"].name, _widgets_analytics_widgets_list_service__WEBPACK_IMPORTED_MODULE_4__["default"].name, _analytics_user_service__WEBPACK_IMPORTED_MODULE_5__["default"].name]).controller('AnalyticsDashboardCtrl', ["$scope", "$translate", "$timeout", "dwAlerts", "state", "helper", "dnd", "keese", "session", "analyticsWidgetsList", "AnalyticsUser", function ($scope, $translate, $timeout, dwAlerts, state, helper, dnd, keese, session, analyticsWidgetsList, AnalyticsUser) {
  var $ctrl = this;
  state.setPageTitle($translate.instant('ANALYTICS.PAGE_TITLE'));
  $ctrl.widgetsList = analyticsWidgetsList;
  $ctrl.widgetToAdd = $ctrl.widgetsList[0];
  /**
   * onInit
   */

  $ctrl.onInit = function () {
    $ctrl.loadDefaults();
  };
  /**
   * Get settings
   */


  $ctrl.getCenterId = function () {
    return $ctrl.settings.allCenters ? null : state.getCurrentCenterId();
  };
  /**
   * Drop handler
   */


  $ctrl.onDrop = function (srcList, srcIndex, targetList, targetIndex) {
    var item = dnd.move(srcList, srcIndex, targetList, targetIndex);
    return true; // true is required by dnd-callback of dnd-list
  };
  /**
   * Add widget
   */


  $ctrl.addWidget = function () {
    var widgets = $ctrl.settings.widgets;
    widgets.push({
      uid: $ctrl.widgetToAdd.uid,
      order: keese.generate(widgets.length && widgets[widgets.length - 1].order),
      wide: false
    });
  };
  /**
   * Save defaults
   */


  $ctrl.saveDefaults = function () {
    return AnalyticsUser.save({
      userId: session.user.id
    }, $ctrl.settings).catch(function (err) {
      return dwAlerts.error(err, 'Failed to save dashboard settings.');
    }).then(function () {
      $ctrl.defaults = angular.copy($ctrl.settings);
    });
  };
  /**
   * Load defaults
   */


  $ctrl.loadDefaults = function () {
    return AnalyticsUser.get({
      userId: session.user.id
    }).catch(function (err) {
      return dwAlerts.error(err, 'Failed to get dashboard settings.');
    }).then(function (result) {
      $ctrl.settings = helper.purify(result);
      $timeout(function () {
        $ctrl.defaults = angular.copy($ctrl.settings);
      });
    });
  };

  $ctrl.isPristine = function () {
    return angular.equals($ctrl.settings, $ctrl.defaults);
  };

  $ctrl.onInit();
}]));

/***/ }),

/***/ "./bundles/analytics/dashboard/analytics-dashboard.scss":
/*!**************************************************************!*\
  !*** ./bundles/analytics/dashboard/analytics-dashboard.scss ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by extract-css-chunks-webpack-plugin

/***/ }),

/***/ "./bundles/analytics/dashboard/analytics-dashboard.tpl.html":
/*!******************************************************************!*\
  !*** ./bundles/analytics/dashboard/analytics-dashboard.tpl.html ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div class=\"analytics-dashboard\"> <h1 class=\"page-title\">{{state.getPageTitle()}}</h1> <div class=\"ff-spin ff-spin-placeholder\" ng-if=\"!$ctrl.settings\"></div> <div class=\"gutter-v\" ng-if=\"$ctrl.settings\"> <ff-panel ng-if=\"state.getUserCenters().length > 1\"> <div> <label class=\"i-block\"> <ff-checkbox ff-model=\"$ctrl.settings.allCenters\"><span translate=\"ANALYTICS.ALL_CENTERS\"></span></ff-checkbox> </label> <ff-hint><span translate=\"ANALYTICS.ALL_CENTERS.HINT\"></span></ff-hint> </div> </ff-panel> <div> <div class=\"ff-grid gutter-h gutter-v\" dnd-list dnd-drop=\"callback({ targetList: $ctrl.settings.widgets, targetIndex: index })\"> <analytics-widget ng-repeat=\"widget in $ctrl.settings.widgets\" widget=\"widget\" center-id=\"$ctrl.getCenterId()\" dnd-draggable=\"null\" dnd-nodrag dnd-dragstart=\"$w.onDragStart(event)\" dnd-dragend=\"$w.onDragEnd(event)\" dnd-callback=\"$ctrl.onDrop($ctrl.settings.widgets, $index, targetList, targetIndex)\"></analytics-widget> <div class=\"dndPlaceholder\">Drop here.</div> <div class=\"analytics-dashboard-trash\" title=\"{{'ANALYTICS.BTN_TRASH' | translate}}\" dnd-list=\"[]\" dnd-drop=\"callback({ targetList: null, targetIndex: index })\"><i class=\"fa fa-trash\"></i></div> </div> </div> <div> <div class=\"ff-grid gutter-h-half gutter-v-half\"> <ng-form class=\"ff-row\" flex=\"0 1 300px\"> <label class=\"ff-row\"> <ff-label flex=\"none\">Add widget:</ff-label> <ff-select ff-model=\"$ctrl.widgetToAdd\" ff-options=\"widget._name | translate for widget in $ctrl.widgetsList\"></ff-select> </label> <ff-btn-group flex=\"none\" class=\"buttons-row\"> <ff-btn sense=\"add\" size=\"xs\" type=\"submit\" ff-click=\"$ctrl.addWidget()\" title=\"{{ 'GLOBAL.BTN_NEW' | translate }}\"></ff-btn> </ff-btn-group> </ng-form> <ff-btn-group flex=\"none\"> <ff-btn sense=\"makeFavorite\" ff-click=\"$ctrl.saveDefaults()\" ff-disabled=\"$ctrl.isPristine()\"> <span translate=\"ANALYTICS.BTN_SAVE_DEFAULTS\"></span> </ff-btn> </ff-btn-group> </div> </div> </div> </div> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/analytics/dashboard/analytics-user.service.js":
/*!***************************************************************!*\
  !*** ./bundles/analytics/dashboard/analytics-user.service.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.AnalyticsUser', ['ngResource', 'datesDeserializer', 'deskworks.config']).factory('AnalyticsUser', ["$resource", "$timeout", "datesDeserializer", "deskworksConfig", function ($resource, $timeout, datesDeserializer, deskworksConfig) {
  var url = deskworksConfig.getApiAbsUrl('/analytics/users/:userId');
  var desDates = datesDeserializer(['widgets.from', 'widgets.to']);
  var res = $resource(url, {
    userId: '@userId'
  }, {
    get: {
      method: 'GET',
      transformResponse: [angular.fromJson, desDates]
    },
    update: {
      method: 'PUT'
    }
  });
  return {
    get: function get(params) {
      return res.get(params).$promise;
    },
    save: function save(params, data) {
      return res.update(params, data).$promise;
    }
  };
}]));

/***/ }),

/***/ "./bundles/analytics/index.js":
/*!************************************!*\
  !*** ./bundles/analytics/index.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "../node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "../node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_keys__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/keys */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/keys.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_keys__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_keys__WEBPACK_IMPORTED_MODULE_4__);





var index = ['$injector', function index($injector) {
  // JS
  var importAll = function importAll(r) {
    var _context;

    return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default()(_context = _babel_runtime_corejs3_core_js_stable_instance_keys__WEBPACK_IMPORTED_MODULE_4___default()(r).call(r)).call(_context, r);
  };

  var js = importAll(__webpack_require__("./bundles/analytics sync recursive \\..+\\/.+\\.js$"));
  $injector.loadNewModules(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default()(js).call(js, function (m) {
    return m.default.name;
  })); // Templates

  $injector.invoke(['$templateCache', function ($templateCache) {
    var ctx = __webpack_require__("./bundles/analytics sync recursive .*\\.tpl\\.html$");

    _babel_runtime_corejs3_core_js_stable_instance_keys__WEBPACK_IMPORTED_MODULE_4___default()(ctx).call(ctx).forEach(function (key) {
      return $templateCache.put(key.replace(/^\.\//, ''), ctx(key));
    });
  }]);
}];
/* harmony default export */ __webpack_exports__["default"] = (index);

/***/ }),

/***/ "./bundles/analytics/widgets/analytics-widget-base.tpl.html":
/*!******************************************************************!*\
  !*** ./bundles/analytics/widgets/analytics-widget-base.tpl.html ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div> <ng-form name=\"$ctrl.widgetToolbarForm\" class=\"ff-grid\"> <chart-by-period flex=\"none\" period=\"$ctrl.params.byPeriod\"></chart-by-period> <ff-static flex=\"auto\"></ff-static> <chart-period flex=\"0 1 auto\" period=\"$ctrl.params.period\" from=\"$ctrl.params.from\" to=\"$ctrl.params.to\"></chart-period> </ng-form> <chart config=\"$ctrl.chart\" ff-dim=\"$ctrl.spin\"></chart> </div> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/analytics/widgets/analytics-widget.directive.js":
/*!*****************************************************************!*\
  !*** ./bundles/analytics/widgets/analytics-widget.directive.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _analytics_widget_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./analytics-widget.scss */ "./bundles/analytics/widgets/analytics-widget.scss");
/* harmony import */ var _analytics_widget_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_analytics_widget_scss__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _analytics_widget_tpl_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./analytics-widget.tpl.html */ "./bundles/analytics/widgets/analytics-widget.tpl.html");
/* harmony import */ var _analytics_widget_tpl_html__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_analytics_widget_tpl_html__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _analytics_widgets_list_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./analytics-widgets-list.service */ "./bundles/analytics/widgets/analytics-widgets-list.service.js");





/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsWidgetDirective', [_analytics_widgets_list_service__WEBPACK_IMPORTED_MODULE_4__["default"].name]).directive('analyticsWidget', function () {
  return {
    template: _analytics_widget_tpl_html__WEBPACK_IMPORTED_MODULE_3___default.a,
    restrict: 'E',
    scope: true,
    controller: 'AnalyticsWidgetDirectiveCtrl as $w',
    bindToController: {
      widget: '<',
      centerId: '@'
    },
    link: function link($scope, $element) {
      $element.addClass('analytics-widget');
    }
  };
}).controller('AnalyticsWidgetDirectiveCtrl', ["$scope", "$element", "$window", "$compile", "state", "dwAlerts", "helper", "analyticsWidgetsList", function ($scope, $element, $window, $compile, state, dwAlerts, helper, analyticsWidgetsList) {
  var $w = this;

  $w.$onInit = function () {
    $scope.$watch('$w.widget.wide', function () {
      $element.toggleClass('analytics-widget-wide', !!$w.widget.wide);
    });
  };

  $w.$onChanges = function () {
    if ($w.widget) {
      $w.config = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default()(analyticsWidgetsList).call(analyticsWidgetsList, function (w) {
        return w.uid === $w.widget.uid;
      });

      if (!$w.config) {
        // don't show unknown widgets
        $element.css('display', 'none');
        return;
      }

      var body = angular.element($element[0].querySelector('.analytics-widget-body'));
      var tpl = angular.element($w.config.template);
      tpl.attr('params', '$w.widget');
      tpl.attr('center-id', $w.centerId);
      angular.forEach(body.children(), function (el) {
        return el.remove();
      });
      body.append(tpl);
      $compile(tpl)($scope.$new());
    }
  };

  $w.onDragStart = function (event) {
    var list = helper.findParentElement(event.target, function (el) {
      return el.attr('dnd-list') !== undefined;
    });
    list.toggleClass('analytics-wide-placeholder', !!$w.widget.wide);
    list.toggleClass('analytics-dragging', true);
  };

  $w.onDragEnd = function (event) {
    var list = helper.findParentElement(event.target, function (el) {
      return el.attr('dnd-list') !== undefined;
    });
    list.toggleClass('analytics-dragging', false);
  };
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/analytics-widget.scss":
/*!*********************************************************!*\
  !*** ./bundles/analytics/widgets/analytics-widget.scss ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by extract-css-chunks-webpack-plugin

/***/ }),

/***/ "./bundles/analytics/widgets/analytics-widget.tpl.html":
/*!*************************************************************!*\
  !*** ./bundles/analytics/widgets/analytics-widget.tpl.html ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<ff-panel> <ff-panel-header class=\"ff-row\"> <span translate=\"{{$w.config._name}}\"></span> <div class=\"analytics-widget-toolbar\"> <ff-btn sense=\"widen\" size=\"xs\" class=\"ff-btn-icon\" ff-click=\"$w.widget.wide = !$w.widget.wide\" title=\"{{'ANALYTICS.WIDE' | translate}}\"></ff-btn> <ff-btn sense=\"drag\" size=\"xs\" class=\"ff-btn-icon\" dnd-handle title=\"{{'ANALYTICS.DRAG_N_DROP' | translate}}\"></ff-btn> </div> </ff-panel-header> <div class=\"analytics-widget-body\"></div> </ff-panel> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/analytics/widgets/analytics-widgets-list.service.js":
/*!*********************************************************************!*\
  !*** ./bundles/analytics/widgets/analytics-widgets-list.service.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _sales_analytics_sales_directive__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sales/analytics-sales.directive */ "./bundles/analytics/widgets/sales/analytics-sales.directive.js");
/* harmony import */ var _sales_by_product_category_analytics_sales_by_product_category_directive__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sales-by-product-category/analytics-sales-by-product-category.directive */ "./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category.directive.js");
/* harmony import */ var _income_analytics_income_directive__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./income/analytics-income.directive */ "./bundles/analytics/widgets/income/analytics-income.directive.js");
/* harmony import */ var _recurring_billings_analytics_recurring_billings_directive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./recurring-billings/analytics-recurring-billings.directive */ "./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings.directive.js");
/* harmony import */ var _reservation_space_utilization_analytics_reservation_space_utilization_directive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./reservation-space-utilization/analytics-reservation-space-utilization.directive */ "./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization.directive.js");
/* harmony import */ var _occupancy_vacancy_analytics_occupancy_vacancy_directive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./occupancy-vacancy/analytics-occupancy-vacancy.directive */ "./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy.directive.js");




 // import companySnapshotRevenueForecastDirective from './reservation-space-utilization/company-snapshot-reservation-space-utilization.directive';
// import companySnapshotOverallSpaceUtilizationDirective from './overall-space-utilization/company-snapshot-overall-space-utilization.directive';


/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsWidgetsList', [_sales_analytics_sales_directive__WEBPACK_IMPORTED_MODULE_0__["default"].name, _sales_by_product_category_analytics_sales_by_product_category_directive__WEBPACK_IMPORTED_MODULE_1__["default"].name, _income_analytics_income_directive__WEBPACK_IMPORTED_MODULE_2__["default"].name, _recurring_billings_analytics_recurring_billings_directive__WEBPACK_IMPORTED_MODULE_3__["default"].name, // companySnapshotRevenueForecastDirective.name,
_reservation_space_utilization_analytics_reservation_space_utilization_directive__WEBPACK_IMPORTED_MODULE_4__["default"].name, // companySnapshotOverallSpaceUtilizationDirective.name,
_occupancy_vacancy_analytics_occupancy_vacancy_directive__WEBPACK_IMPORTED_MODULE_5__["default"].name]).factory('analyticsWidgetsList', function () {
  return [{
    uid: 'sales',
    _name: 'ANALYTICS.WIDGET.SALES',
    template: '<analytics-sales></analytics-sales>'
  }, {
    uid: 'sales-by-product-category',
    _name: 'ANALYTICS.WIDGET.SALES_BY_PRODUCT_CATEGORY',
    template: '<analytics-sales-by-product-category></analytics-sales-by-product-category>'
  }, {
    uid: 'income',
    _name: 'ANALYTICS.WIDGET.INCOME',
    template: '<analytics-income></analytics-income>'
  }, {
    uid: 'recurring-billings',
    _name: 'ANALYTICS.WIDGET.RECURRING_BILLINGS',
    template: '<analytics-recurring-billings></analytics-recurring-billings>'
  }, // {
  //   uid: 'revenue-forecast',
  //   _name: 'ANALYTICS.WIDGET.REVENUE_FORECAST',
  //   template: '<company-snapshot-revenue-forecast></company-snapshot-revenue-forecast>',
  // },
  {
    uid: 'reservation-space-utilization',
    _name: 'ANALYTICS.WIDGET.RESERVATION_SPACE_UTILIZATION',
    template: '<analytics-reservation-space-utilization></analytics-reservation-space-utilization>'
  }, // {
  //   uid: 'overall-space-utilization',
  //   _name: 'ANALYTICS.WIDGET.OVERALL_SPACE_UTILIZATION',
  //   template: '<company-snapshot-overall-space-utilization></company-snapshot-overall-space-utilization>',
  // },
  {
    uid: 'occupancy-vacancy',
    _name: 'ANALYTICS.WIDGET.OCCUPANCY_VACANCY',
    template: '<analytics-occupancy-vacancy></analytics-occupancy-vacancy>'
  }];
}));

/***/ }),

/***/ "./bundles/analytics/widgets/income/analytics-income-chart.service.js":
/*!****************************************************************************!*\
  !*** ./bundles/analytics/widgets/income/analytics-income-chart.service.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared/charts/chart-colors.service */ "./shared/charts/chart-colors.service.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! chartjs-plugin-datalabels */ "../node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_3__);




/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsIncomeChart', [shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_2__["default"].name, 'deskworks.whitelabel']).factory('analyticsIncomeChart', ["$filter", "$translate", "chartColors", "whitelabel", function ($filter, $translate, chartColors, whitelabel) {
  return function (_ref) {
    var periods = _ref.periods,
        totals = _ref.totals,
        params = _ref.params;

    var labels = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(periods).call(periods, function (period) {
      return period.title;
    });

    var datasets = [{
      data: totals,
      maxBarThickness: 80,
      backgroundColor: whitelabel.getProperty('--brand-color') || chartColors[0]
    }];
    var tpLabel = $translate.instant('ANALYTICS.INCOME');
    var chart = {
      type: 'bar',
      // plugins: [ChartDataLabels],
      data: {
        labels: labels,
        datasets: datasets
      },
      options: {
        // plugins: {
        //   datalabels: {
        //     display: 'auto',
        //     color: '#fff',
        //     backgroundColor: '#000',
        //     padding: 1,
        //     borderRadius: 3,
        //     formatter: (value, context) => $filter('ncurrency')(value, undefined, 0),
        //   }
        // },
        tooltips: {
          callbacks: {
            label: function label(tooltipItem) {
              var _context;

              return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default()(_context = "".concat(tpLabel, ": ")).call(_context, $filter('ncurrency')(totals[tooltipItem.index]));
            }
          }
        },
        layout: {
          padding: {
            top: 15
          }
        },
        legend: {
          display: false
        },
        scales: {
          yAxes: [{
            ticks: {
              min: 0,
              callback: function callback(value) {
                return $filter('ncurrency')(value, undefined, 0);
              }
            }
          }]
        }
      }
    };
    return chart;
  };
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/income/analytics-income.directive.js":
/*!************************************************************************!*\
  !*** ./bundles/analytics/widgets/income/analytics-income.directive.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ "../node_modules/@babel/runtime-corejs3/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "../node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "../node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _analytics_widget_base_tpl_html__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../analytics-widget-base.tpl.html */ "./bundles/analytics/widgets/analytics-widget-base.tpl.html");
/* harmony import */ var _analytics_widget_base_tpl_html__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_analytics_widget_base_tpl_html__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! shared/charts/chart.directive */ "./shared/charts/chart.directive.js");
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var _analytics_income_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./analytics-income.service */ "./bundles/analytics/widgets/income/analytics-income.service.js");
/* harmony import */ var shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! shared/charts/opts-chart-by-period.service */ "./shared/charts/opts-chart-by-period.service.js");
/* harmony import */ var shared_charts_opts_chart_period_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! shared/charts/opts-chart-period.service */ "./shared/charts/opts-chart-period.service.js");
/* harmony import */ var _analytics_income_chart_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./analytics-income-chart.service */ "./bundles/analytics/widgets/income/analytics-income-chart.service.js");
/* harmony import */ var shared_charts_chart_period_directive__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! shared/charts/chart-period.directive */ "./shared/charts/chart-period.directive.js");
/* harmony import */ var shared_charts_chart_by_period_directive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! shared/charts/chart-by-period.directive */ "./shared/charts/chart-by-period.directive.js");










function ownKeys(object, enumerableOnly) { var keys = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default()(object); if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default.a) { var symbols = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default()(object); if (enumerableOnly) { symbols = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default()(symbols).call(symbols, function (sym) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(target, key, source[key]); }); } else if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default.a) { Object.defineProperties(target, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(source, key)); }); } } return target; }










/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsIncomeDirective', ['debounce', shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_10__["default"].name, shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_11__["default"].name, shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_13__["default"].name, shared_charts_opts_chart_period_service__WEBPACK_IMPORTED_MODULE_14__["default"].name, _analytics_income_service__WEBPACK_IMPORTED_MODULE_12__["default"].name, _analytics_income_chart_service__WEBPACK_IMPORTED_MODULE_15__["default"].name, shared_charts_chart_period_directive__WEBPACK_IMPORTED_MODULE_16__["default"].name, shared_charts_chart_by_period_directive__WEBPACK_IMPORTED_MODULE_17__["default"].name]).directive('analyticsIncome', function () {
  return {
    template: _analytics_widget_base_tpl_html__WEBPACK_IMPORTED_MODULE_9___default.a,
    restrict: 'E',
    scope: true,
    controller: 'AnalyticsIncomeDirectiveCtrl as $ctrl',
    bindToController: {
      params: '<',
      centerId: '<'
    }
  };
}).controller('AnalyticsIncomeDirectiveCtrl', ["$scope", "$q", "state", "dwAlerts", "helper", "debounce", "reportHelper", "AnalyticsIncome", "analyticsIncomeChart", "optsChartByPeriod", "optsChartPeriod", function ($scope, $q, state, dwAlerts, helper, debounce, reportHelper, AnalyticsIncome, analyticsIncomeChart, optsChartByPeriod, optsChartPeriod) {
  var $ctrl = this;
  var paramsChanged = reportHelper.paramsChanged;
  $ctrl.optsByPeriod = optsChartByPeriod;
  $ctrl.optsPeriod = optsChartPeriod;
  $ctrl.data = null;

  $ctrl.$onInit = function () {
    watchParams();
  };

  function watchParams() {
    $scope.$watch(function () {
      return _objectSpread(_objectSpread({}, $ctrl.params), {}, {
        centerId: $ctrl.centerId
      });
    }, debounce(function (np, op) {
      $ctrl.params.period = $ctrl.params.period || '12months';
      $ctrl.params.byPeriod = $ctrl.params.byPeriod || 'month';

      if ($ctrl.widgetToolbarForm.$invalid) {
        return;
      }

      if (paramsChanged(np, op, ['byPeriod', 'from', 'to', 'centerId'])) {
        $ctrl.data = null;
      }

      $ctrl.data = $ctrl.data || ($ctrl.spin = true, AnalyticsIncome.get(np).catch(function (err) {
        return dwAlerts.error(err, 'Failed to query Income widget data.');
      }).finally(function () {
        $ctrl.spin = false;
      }));
      $q.all({
        data: $ctrl.data
      }).then(function (result) {
        $ctrl.data = result.data;
      }).then(function () {
        $ctrl.chart = analyticsIncomeChart(_objectSpread(_objectSpread({}, $ctrl.data), {}, {
          params: $ctrl.params
        }));
      });
    }, 100), true);
  }
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/income/analytics-income.service.js":
/*!**********************************************************************!*\
  !*** ./bundles/analytics/widgets/income/analytics-income.service.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared/charts/opts-chart-by-period.service */ "./shared/charts/opts-chart-by-period.service.js");



/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.AnalyticsIncome', ['ngResource', 'datesDeserializer', 'deskworks.config', shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_2__["default"].name]).factory('AnalyticsIncome', ["$resource", "$filter", "$timeout", "datesDeserializer", "deskworksConfig", "helper", "optsChartByPeriod", function ($resource, $filter, $timeout, datesDeserializer, deskworksConfig, helper, optsChartByPeriod) {
  var desDates = datesDeserializer(['periods.from', 'periods.to']);
  var url = deskworksConfig.getApiAbsUrl('/analytics/income');
  var res = $resource(url, {
    byPeriod: '@byPeriod',
    from: '@from',
    to: '@to'
  }, {
    get: {
      method: 'GET',
      isArray: false,
      transformResponse: [angular.fromJson, desDates]
    }
  });
  return {
    get: function get(params) {
      return res.get({
        centerId: params.centerId || null,
        byPeriod: params.byPeriod || 'month',
        from: $filter('date')(params.from, 'yyyy-MM-dd') || null,
        to: $filter('date')(params.to, 'yyyy-MM-dd') || null
      }).$promise.then(function (data) {
        return deserialize({
          data: data,
          params: params
        });
      });
    }
  };

  function deserialize(_ref) {
    var data = _ref.data,
        params = _ref.params;
    var _params$byPeriod = params.byPeriod,
        byPeriod = _params$byPeriod === void 0 ? 'month' : _params$byPeriod;

    var periodConfig = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default()(optsChartByPeriod).call(optsChartByPeriod, function (i) {
      return i.id === byPeriod;
    });

    data.periods.forEach(function (period) {
      period.title = periodConfig.format(period.from, period.to);
    });
    return data;
  }
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart-units.service.js":
/*!********************************************************************************************************!*\
  !*** ./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart-units.service.js ***!
  \********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! shared/charts/chart-colors.service */ "./shared/charts/chart-colors.service.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! chartjs-plugin-datalabels */ "../node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_4__);





/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsOccupancyVacancyChartUnits', [shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_2__["default"].name, shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_3__["default"].name]).factory('analyticsOccupancyVacancyChartUnits', ["$filter", "$translate", "chartColors", "reportHelper", function ($filter, $translate, chartColors, reportHelper) {
  return function (_ref) {
    var _context;

    var periods = _ref.periods,
        data = _ref.data,
        params = _ref.params;

    var labels = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(periods).call(periods, function (period) {
      return period.title;
    });

    var datasets = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(_context = data[params.selected].units).call(_context, function (unit, idx) {
      return {
        label: unit.name,
        data: unit.totals,
        maxBarThickness: 80,
        backgroundColor: chartColors[idx]
      };
    });

    var chart = {
      type: 'bar',
      // plugins: [ChartDataLabels],
      data: {
        labels: labels,
        datasets: datasets
      },
      options: {
        // plugins: {
        //   datalabels: {
        //     display: 'auto',
        //     color: '#fff',
        //     backgroundColor: '#000',
        //     padding: 1,
        //     borderRadius: 3,
        //     formatter: (value, context) => `${Math.round(value)}%`,
        //   }
        // },
        tooltips: {
          mode: 'index',
          intersect: true,
          displayColors: true,
          callbacks: {
            label: function label(tooltipItem) {
              var _context2;

              var _data$params$selected = data[params.selected].units[tooltipItem.datasetIndex],
                  name = _data$params$selected.name,
                  totals = _data$params$selected.totals;
              return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default()(_context2 = "".concat(name, ": ")).call(_context2, totals[tooltipItem.index], "%");
            }
          }
        },
        layout: {
          padding: {
            top: 15
          }
        },
        legend: {
          display: true,
          position: params.wide ? 'right' : 'bottom'
        },
        scales: {
          yAxes: [{
            ticks: {
              min: 0,
              max: 100,
              callback: function callback(value) {
                return "".concat(value, "%");
              }
            }
          }]
        }
      }
    };
    return chart;
  };
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart.service.js":
/*!**************************************************************************************************!*\
  !*** ./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart.service.js ***!
  \**************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! shared/charts/chart-colors.service */ "./shared/charts/chart-colors.service.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! chartjs-plugin-datalabels */ "../node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_4__);





/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsOccupancyVacancyChart', [shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_2__["default"].name, shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_3__["default"].name]).factory('analyticsOccupancyVacancyChart', ["$rootScope", "$filter", "$translate", "chartColors", "reportHelper", function ($rootScope, $filter, $translate, chartColors, reportHelper) {
  return function (_ref) {
    var periods = _ref.periods,
        data = _ref.data,
        params = _ref.params,
        onChartClick = _ref.onChartClick;

    // data = reportHelper.sort(data, 'utilization', true).slice(0, 12);
    var labels = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(periods).call(periods, function (period) {
      return period.title;
    });

    var datasets = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(data).call(data, function (category, idx) {
      return {
        label: category.name,
        data: category.totals,
        maxBarThickness: 80,
        backgroundColor: chartColors[idx]
      };
    });

    var chart = {
      type: 'bar',
      // plugins: [ChartDataLabels],
      data: {
        labels: labels,
        datasets: datasets
      },
      options: {
        // plugins: {
        //   datalabels: {
        //     display: 'auto',
        //     color: '#fff',
        //     backgroundColor: '#000',
        //     padding: 1,
        //     borderRadius: 3,
        //     formatter: (value, context) => `${Math.round(value)}%`,
        //   }
        // },
        tooltips: {
          mode: 'index',
          intersect: true,
          displayColors: true,
          callbacks: {
            label: function label(tooltipItem) {
              var _context;

              var _data$tooltipItem$dat = data[tooltipItem.datasetIndex],
                  name = _data$tooltipItem$dat.name,
                  totals = _data$tooltipItem$dat.totals;
              return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default()(_context = "".concat(name, ": ")).call(_context, totals[tooltipItem.index], "%");
            }
          }
        },
        layout: {
          padding: {
            top: 15
          }
        },
        legend: {
          display: true,
          position: params.wide ? 'right' : 'bottom'
        },
        scales: {
          yAxes: [{
            ticks: {
              min: 0,
              max: 100,
              callback: function callback(value) {
                return "".concat(value, "%");
              }
            }
          }]
        },
        onClick: onClick
      }
    };
    return chart;

    function onClick(event, items) {
      var _this = this;

      $rootScope.$apply(function (_) {
        var el = _this.getElementAtEvent(event)[0];

        if (!el) return;
        onChartClick(el._datasetIndex);
      });
    }
  };
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy.directive.js":
/*!**********************************************************************************************!*\
  !*** ./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy.directive.js ***!
  \**********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ "../node_modules/@babel/runtime-corejs3/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "../node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "../node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _analytics_occupancy_vacancy_tpl_html__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./analytics-occupancy-vacancy.tpl.html */ "./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy.tpl.html");
/* harmony import */ var _analytics_occupancy_vacancy_tpl_html__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_analytics_occupancy_vacancy_tpl_html__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! shared/charts/chart.directive */ "./shared/charts/chart.directive.js");
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var _analytics_occupancy_vacancy_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./analytics-occupancy-vacancy.service */ "./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy.service.js");
/* harmony import */ var shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! shared/charts/opts-chart-by-period.service */ "./shared/charts/opts-chart-by-period.service.js");
/* harmony import */ var shared_charts_opts_chart_period_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! shared/charts/opts-chart-period.service */ "./shared/charts/opts-chart-period.service.js");
/* harmony import */ var _analytics_occupancy_vacancy_chart_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./analytics-occupancy-vacancy-chart.service */ "./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart.service.js");
/* harmony import */ var _analytics_occupancy_vacancy_chart_units_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./analytics-occupancy-vacancy-chart-units.service */ "./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart-units.service.js");
/* harmony import */ var shared_charts_chart_period_directive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! shared/charts/chart-period.directive */ "./shared/charts/chart-period.directive.js");
/* harmony import */ var shared_charts_chart_by_period_directive__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! shared/charts/chart-by-period.directive */ "./shared/charts/chart-by-period.directive.js");










function ownKeys(object, enumerableOnly) { var keys = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default()(object); if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default.a) { var symbols = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default()(object); if (enumerableOnly) { symbols = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default()(symbols).call(symbols, function (sym) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(target, key, source[key]); }); } else if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default.a) { Object.defineProperties(target, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(source, key)); }); } } return target; }











/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsOccupancyVacancyDirective', ['debounce', shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_10__["default"].name, shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_11__["default"].name, shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_13__["default"].name, shared_charts_opts_chart_period_service__WEBPACK_IMPORTED_MODULE_14__["default"].name, _analytics_occupancy_vacancy_service__WEBPACK_IMPORTED_MODULE_12__["default"].name, _analytics_occupancy_vacancy_chart_service__WEBPACK_IMPORTED_MODULE_15__["default"].name, _analytics_occupancy_vacancy_chart_units_service__WEBPACK_IMPORTED_MODULE_16__["default"].name, shared_charts_chart_period_directive__WEBPACK_IMPORTED_MODULE_17__["default"].name, shared_charts_chart_by_period_directive__WEBPACK_IMPORTED_MODULE_18__["default"].name]).directive('analyticsOccupancyVacancy', function () {
  return {
    template: _analytics_occupancy_vacancy_tpl_html__WEBPACK_IMPORTED_MODULE_9___default.a,
    restrict: 'E',
    scope: true,
    controller: 'AnalyticsOccupancyVacancyDirectiveCtrl as $ctrl',
    bindToController: {
      params: '<',
      centerId: '<'
    }
  };
}).controller('AnalyticsOccupancyVacancyDirectiveCtrl', ["$scope", "$q", "state", "dwAlerts", "helper", "debounce", "reportHelper", "AnalyticsOccupancyVacancy", "analyticsOccupancyVacancyChart", "analyticsOccupancyVacancyChartUnits", "optsChartByPeriod", "optsChartPeriod", function ($scope, $q, state, dwAlerts, helper, debounce, reportHelper, AnalyticsOccupancyVacancy, analyticsOccupancyVacancyChart, analyticsOccupancyVacancyChartUnits, optsChartByPeriod, optsChartPeriod) {
  var $ctrl = this;
  var paramsChanged = reportHelper.paramsChanged;
  $ctrl.optsByPeriod = optsChartByPeriod;
  $ctrl.optsPeriod = optsChartPeriod;
  $ctrl.data = null;

  $ctrl.$onInit = function () {
    watchParams();
  };

  function watchParams() {
    $scope.$watch(function () {
      return _objectSpread(_objectSpread({}, $ctrl.params), {}, {
        centerId: $ctrl.centerId
      });
    }, debounce(function (np, op) {
      $ctrl.params.period = $ctrl.params.period || '12months';
      $ctrl.params.byPeriod = $ctrl.params.byPeriod || 'quarter';

      if ($ctrl.widgetToolbarForm.$invalid) {
        return;
      }

      if (paramsChanged(np, op, ['byPeriod', 'from', 'to', 'centerId'])) {
        $ctrl.data = null;
        $ctrl.params.selected = null;
      }

      $ctrl.data = $ctrl.data || ($ctrl.spin = true, AnalyticsOccupancyVacancy.get(np).catch(function (err) {
        return dwAlerts.error(err, 'Failed to query Occupancy Vacancy widget data.');
      }).finally(function () {
        $ctrl.spin = false;
      }));
      $q.all({
        data: $ctrl.data
      }).then(function (result) {
        $ctrl.data = result.data;
      }).then(function () {
        if ($ctrl.params.selected !== null) {
          $ctrl.chart = analyticsOccupancyVacancyChartUnits(_objectSpread(_objectSpread({}, $ctrl.data), {}, {
            params: $ctrl.params
          }));
        } else {
          $ctrl.chart = analyticsOccupancyVacancyChart(_objectSpread(_objectSpread({}, $ctrl.data), {}, {
            params: $ctrl.params,
            onChartClick: onChartClick
          }));
        }
      });
    }, 100), true);
  }

  function onChartClick(index) {
    $ctrl.params.selected = index;
  }
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy.service.js":
/*!********************************************************************************************!*\
  !*** ./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy.service.js ***!
  \********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared/charts/opts-chart-by-period.service */ "./shared/charts/opts-chart-by-period.service.js");



/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.AnalyticsOccupancyVacancy', ['ngResource', 'datesDeserializer', 'deskworks.config', shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_2__["default"].name]).factory('AnalyticsOccupancyVacancy', ["$resource", "$filter", "$timeout", "datesDeserializer", "deskworksConfig", "helper", "optsChartByPeriod", function ($resource, $filter, $timeout, datesDeserializer, deskworksConfig, helper, optsChartByPeriod) {
  var desDates = datesDeserializer(['periods.from', 'periods.to']);
  var url = deskworksConfig.getApiAbsUrl('/analytics/occupancy-vacancy');
  var res = $resource(url, {
    byPeriod: '@byPeriod',
    from: '@from',
    to: '@to'
  }, {
    get: {
      method: 'GET',
      isArray: false,
      transformResponse: [angular.fromJson, desDates]
    }
  });
  return {
    get: function get(params) {
      return res.get({
        centerId: params.centerId || null,
        byPeriod: params.byPeriod || 'quarter',
        from: $filter('date')(params.from, 'yyyy-MM-dd') || null,
        to: $filter('date')(params.to, 'yyyy-MM-dd') || null
      }).$promise.then(function (data) {
        return deserialize({
          data: data,
          params: params
        });
      });
    }
  };

  function deserialize(_ref) {
    var data = _ref.data,
        params = _ref.params;
    var _params$byPeriod = params.byPeriod,
        byPeriod = _params$byPeriod === void 0 ? 'month' : _params$byPeriod;

    var periodConfig = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default()(optsChartByPeriod).call(optsChartByPeriod, function (i) {
      return i.id === byPeriod;
    });

    data.periods.forEach(function (period) {
      period.title = periodConfig.format(period.from, period.to);
    }); // data.data.forEach(unit => {
    //   unit.utilizations = unit.occupiedTotals.map((ot, idx) => helper.round(ot * 100 / (ot + unit.vacantTotals[idx]), 1));
    //   unit.utilization = helper.round(unit.utilizations.reduce((sum, i) => sum + i, 0));
    // });

    return data;
  }
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy.tpl.html":
/*!******************************************************************************************!*\
  !*** ./bundles/analytics/widgets/occupancy-vacancy/analytics-occupancy-vacancy.tpl.html ***!
  \******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div> <ng-form name=\"$ctrl.widgetToolbarForm\" class=\"ff-grid\"> <chart-by-period flex=\"none\" period=\"$ctrl.params.byPeriod\"></chart-by-period> <ff-static flex=\"auto\"> <ff-hint ng-if=\"$ctrl.params.selected === null\"><span translate=\"ANALYTICS.WIDGET.OCCUPANCY_VACANCY.HINT\"></span></ff-hint> <ff-btn sense=\"back\" size=\"sm\" ng-if=\"$ctrl.params.selected !== null\" ff-click=\"$ctrl.params.selected = null\"> <span translate=\"GLOBAL.BTN_BACK\"></span> </ff-btn> </ff-static> <chart-period flex=\"0 1 auto\" period=\"$ctrl.params.period\" from=\"$ctrl.params.from\" to=\"$ctrl.params.to\"></chart-period> </ng-form> <chart config=\"$ctrl.chart\" ff-dim=\"$ctrl.spin\"></chart> </div> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings-chart.service.js":
/*!****************************************************************************************************!*\
  !*** ./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings-chart.service.js ***!
  \****************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/slice */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/slice.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/sort */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/sort.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! shared/charts/chart-colors.service */ "./shared/charts/chart-colors.service.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! chartjs-plugin-datalabels */ "../node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_6__);







/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsRecurringBillingsChart', [shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_4__["default"].name, shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_5__["default"].name]).factory('analyticsRecurringBillingsChart', ["$filter", "$translate", "chartColors", "reportHelper", function ($filter, $translate, chartColors, reportHelper) {
  return function (_ref) {
    var _context, _context2;

    var periods = _ref.periods,
        data = _ref.data,
        totals = _ref.totals,
        params = _ref.params;
    data = _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0___default()(_context = _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_1___default()(reportHelper).call(reportHelper, data, 'total', true)).call(_context, 0, 12);

    var labels = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default()(periods).call(periods, function (period) {
      return period.title;
    });

    var datasets = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_3___default()(_context2 = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default()(data).call(data, function (item, idx) {
      return {
        label: item.name,
        data: item.totals,
        backgroundColor: chartColors[idx],
        maxBarThickness: 80
      };
    })).call(_context2, [{
      label: $translate.instant('GLOBAL.TOTAL'),
      data: _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default()(totals).call(totals, function (_) {
        return 0;
      }),
      backgroundColor: 'transparent',
      maxBarThickness: 80 // datalabels: {
      //   display: true,
      //   align: 'end',
      //   offset: -3,
      //   color: '#000',
      //   textStrokeWidth: 0,
      //   font: { weight: 'bold' },
      // },

    }]);

    var chart = {
      type: 'bar',
      // plugins: [ChartDataLabels],
      data: {
        labels: labels,
        datasets: datasets
      },
      options: {
        // plugins: {
        //   datalabels: {
        //     display: 'auto',
        //     color: '#fff',
        //     textStrokeColor: '#000',
        //     textStrokeWidth: 2,
        //     formatter: (value, context) => $filter('ncurrency')(context.datasetIndex < datasets.length - 1 ? value : totals[context.dataIndex], undefined, 0),
        //   }
        // },
        tooltips: {
          mode: 'index',
          intersect: true,
          displayColors: true,
          callbacks: {
            label: function label(tooltipItem, data) {
              var dataset = data.datasets[tooltipItem.datasetIndex];
              return dataset.label + ': ' + $filter('ncurrency')(tooltipItem.datasetIndex < datasets.length - 1 ? dataset.data[tooltipItem.index] : totals[tooltipItem.index]);
            }
          }
        },
        layout: {
          padding: {
            top: 15
          }
        },
        legend: {
          display: true,
          position: params.wide ? 'right' : 'bottom'
        },
        scales: {
          xAxes: [{
            stacked: true
          }],
          yAxes: [{
            stacked: true,
            ticks: {
              min: 0,
              callback: function callback(value) {
                return $filter('ncurrency')(value, undefined, 0);
              }
            }
          }]
        }
      }
    };
    return chart;
  };
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings.directive.js":
/*!************************************************************************************************!*\
  !*** ./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings.directive.js ***!
  \************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ "../node_modules/@babel/runtime-corejs3/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "../node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "../node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _analytics_recurring_billings_tpl_html__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./analytics-recurring-billings.tpl.html */ "./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings.tpl.html");
/* harmony import */ var _analytics_recurring_billings_tpl_html__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_analytics_recurring_billings_tpl_html__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! shared/charts/chart.directive */ "./shared/charts/chart.directive.js");
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var _analytics_recurring_billings_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./analytics-recurring-billings.service */ "./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings.service.js");
/* harmony import */ var shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! shared/charts/opts-chart-by-period.service */ "./shared/charts/opts-chart-by-period.service.js");
/* harmony import */ var shared_charts_opts_chart_period_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! shared/charts/opts-chart-period.service */ "./shared/charts/opts-chart-period.service.js");
/* harmony import */ var _analytics_recurring_billings_chart_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./analytics-recurring-billings-chart.service */ "./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings-chart.service.js");
/* harmony import */ var shared_charts_chart_period_directive__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! shared/charts/chart-period.directive */ "./shared/charts/chart-period.directive.js");
/* harmony import */ var shared_charts_chart_by_period_directive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! shared/charts/chart-by-period.directive */ "./shared/charts/chart-by-period.directive.js");










function ownKeys(object, enumerableOnly) { var keys = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default()(object); if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default.a) { var symbols = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default()(object); if (enumerableOnly) { symbols = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default()(symbols).call(symbols, function (sym) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(target, key, source[key]); }); } else if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default.a) { Object.defineProperties(target, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(source, key)); }); } } return target; }










/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsRecurringBillingsDirective', ['debounce', shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_10__["default"].name, shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_11__["default"].name, _analytics_recurring_billings_service__WEBPACK_IMPORTED_MODULE_12__["default"].name, shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_13__["default"].name, shared_charts_opts_chart_period_service__WEBPACK_IMPORTED_MODULE_14__["default"].name, _analytics_recurring_billings_chart_service__WEBPACK_IMPORTED_MODULE_15__["default"].name, shared_charts_chart_period_directive__WEBPACK_IMPORTED_MODULE_16__["default"].name, shared_charts_chart_by_period_directive__WEBPACK_IMPORTED_MODULE_17__["default"].name]).directive('analyticsRecurringBillings', function () {
  return {
    template: _analytics_recurring_billings_tpl_html__WEBPACK_IMPORTED_MODULE_9___default.a,
    restrict: 'E',
    scope: true,
    controller: 'AnalyticsRecurringBillingsDirectiveCtrl as $ctrl',
    bindToController: {
      params: '<',
      centerId: '<'
    }
  };
}).controller('AnalyticsRecurringBillingsDirectiveCtrl', ["$scope", "$q", "state", "dwAlerts", "helper", "debounce", "reportHelper", "AnalyticsRecurringBillings", "analyticsRecurringBillingsChart", "optsChartByPeriod", "optsChartPeriod", function ($scope, $q, state, dwAlerts, helper, debounce, reportHelper, AnalyticsRecurringBillings, analyticsRecurringBillingsChart, optsChartByPeriod, optsChartPeriod) {
  var $ctrl = this;
  var paramsChanged = reportHelper.paramsChanged;
  $ctrl.optsByPeriod = optsChartByPeriod;
  $ctrl.optsPeriod = optsChartPeriod;
  $ctrl.data = null;

  $ctrl.$onInit = function () {
    watchParams();
  };

  function watchParams() {
    $scope.$watch(function () {
      return _objectSpread(_objectSpread({}, $ctrl.params), {}, {
        centerId: $ctrl.centerId
      });
    }, debounce(function (np, op) {
      $ctrl.params.period = $ctrl.params.period || '12months';
      $ctrl.params.byPeriod = $ctrl.params.byPeriod || 'month';

      if ($ctrl.widgetToolbarForm.$invalid) {
        return;
      }

      if (paramsChanged(np, op, ['byPeriod', 'from', 'to', 'centerId'])) {
        $ctrl.data = null;
      }

      $ctrl.data = $ctrl.data || ($ctrl.spin = true, AnalyticsRecurringBillings.get(_objectSpread(_objectSpread({}, $ctrl.params), {}, {
        centerId: $ctrl.centerId
      })).catch(function (err) {
        return dwAlerts.error(err, 'Failed to get Recurring Billings widget data.');
      }).finally(function () {
        $ctrl.spin = false;
      }));
      $q.all({
        data: $ctrl.data
      }).then(function (result) {
        $ctrl.data = result.data;
      }).then(function () {
        $ctrl.chart = analyticsRecurringBillingsChart(_objectSpread(_objectSpread({}, $ctrl.data), {}, {
          params: $ctrl.params
        }));
      });
    }, 100), true);
  }
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings.service.js":
/*!**********************************************************************************************!*\
  !*** ./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings.service.js ***!
  \**********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! shared/charts/opts-chart-by-period.service */ "./shared/charts/opts-chart-by-period.service.js");




/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.AnalyticsRecurringBillings', ['ngResource', 'datesDeserializer', 'deskworks.config', shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_3__["default"].name]).factory('AnalyticsRecurringBillings', ["$resource", "$filter", "$timeout", "datesDeserializer", "deskworksConfig", "helper", "optsChartByPeriod", function ($resource, $filter, $timeout, datesDeserializer, deskworksConfig, helper, optsChartByPeriod) {
  var desDates = datesDeserializer(['periods.from', 'periods.to']);
  var url = deskworksConfig.getApiAbsUrl('/analytics/recurring-billings');
  var res = $resource(url, {
    byPeriod: '@byPeriod',
    from: '@from',
    to: '@to'
  }, {
    get: {
      method: 'GET',
      isArray: false,
      transformResponse: [angular.fromJson, desDates]
    }
  });
  return {
    get: function get(params) {
      return res.get({
        centerId: params.centerId || null,
        byPeriod: params.byPeriod || 'month',
        from: $filter('date')(params.from, 'yyyy-MM-dd'),
        to: $filter('date')(params.to, 'yyyy-MM-dd')
      }).$promise.then(function (data) {
        return deserialize({
          data: data,
          params: params
        });
      });
    }
  };

  function deserialize(_ref) {
    var _context;

    var data = _ref.data,
        params = _ref.params;
    var _params$byPeriod = params.byPeriod,
        byPeriod = _params$byPeriod === void 0 ? 'month' : _params$byPeriod;

    var periodConfig = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default()(optsChartByPeriod).call(optsChartByPeriod, function (i) {
      return i.id === byPeriod;
    });

    data.periods.forEach(function (period) {
      period.title = periodConfig.format(period.from, period.to);
    });
    data.totals = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default()(_context = data.periods).call(_context, function (p, idx) {
      return helper.round(data.data.reduce(function (sum, i) {
        return sum + i.totals[idx];
      }, 0));
    });
    data.data.forEach(function (cat) {
      cat.total = helper.round(cat.totals.reduce(function (sum, i) {
        return sum + i;
      }, 0));
    });
    return data;
  }
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings.tpl.html":
/*!********************************************************************************************!*\
  !*** ./bundles/analytics/widgets/recurring-billings/analytics-recurring-billings.tpl.html ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div> <ng-form name=\"$ctrl.widgetToolbarForm\" class=\"ff-grid\"> <chart-by-period flex=\"none\" period=\"$ctrl.params.byPeriod\"></chart-by-period> <ff-static flex=\"auto\"> <ff-hint><span translate=\"ANALYTICS.WIDGET.RECURRING_BILLINGS.HINT\"></span></ff-hint> </ff-static> <chart-period flex=\"0 1 auto\" period=\"$ctrl.params.period\" from=\"$ctrl.params.from\" to=\"$ctrl.params.to\"></chart-period> </ng-form> <chart config=\"$ctrl.chart\" ff-dim=\"$ctrl.spin\"></chart> </div> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization-chart-units.service.js":
/*!********************************************************************************************************************************!*\
  !*** ./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization-chart-units.service.js ***!
  \********************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! shared/charts/chart-colors.service */ "./shared/charts/chart-colors.service.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! chartjs-plugin-datalabels */ "../node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_4__);





/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsReservationSpaceUtilizationChartUnits', [shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_2__["default"].name, shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_3__["default"].name]).factory('analyticsReservationSpaceUtilizationChartUnits', ["$filter", "$translate", "chartColors", "reportHelper", function ($filter, $translate, chartColors, reportHelper) {
  return function (_ref) {
    var _context;

    var periods = _ref.periods,
        data = _ref.data,
        params = _ref.params;

    var labels = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(periods).call(periods, function (period) {
      return period.title;
    });

    var datasets = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(_context = data[params.selected].units).call(_context, function (unit, idx) {
      return {
        label: unit.name,
        data: unit.utilization,
        maxBarThickness: 80,
        backgroundColor: chartColors[idx]
      };
    });

    var chart = {
      type: 'bar',
      // plugins: [ChartDataLabels],
      data: {
        labels: labels,
        datasets: datasets
      },
      options: {
        // plugins: {
        //   datalabels: {
        //     display: 'auto',
        //     color: '#fff',
        //     backgroundColor: '#000',
        //     padding: 1,
        //     borderRadius: 3,
        //     formatter: (value, context) => `${Math.round(value)}%`,
        //   }
        // },
        tooltips: {
          mode: 'index',
          intersect: true,
          displayColors: true,
          callbacks: {
            label: function label(tooltipItem) {
              var _context2, _context3, _context4;

              var _data$params$selected = data[params.selected].units[tooltipItem.datasetIndex],
                  name = _data$params$selected.name,
                  utilization = _data$params$selected.utilization,
                  usage = _data$params$selected.usage,
                  expected = _data$params$selected.expected;
              var idx = tooltipItem.index;
              return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default()(_context2 = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default()(_context3 = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default()(_context4 = "".concat(name, ": ")).call(_context4, utilization[idx], "% (")).call(_context3, usage[idx], " of ")).call(_context2, expected[idx], " hr)");
            }
          }
        },
        layout: {
          padding: {
            top: 15
          }
        },
        legend: {
          display: true,
          position: params.wide ? 'right' : 'bottom'
        },
        scales: {
          yAxes: [{
            ticks: {
              min: 0,
              max: 100,
              callback: function callback(value) {
                return "".concat(value, "%");
              }
            }
          }]
        }
      }
    };
    return chart;
  };
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization-chart.service.js":
/*!**************************************************************************************************************************!*\
  !*** ./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization-chart.service.js ***!
  \**************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! shared/charts/chart-colors.service */ "./shared/charts/chart-colors.service.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! chartjs-plugin-datalabels */ "../node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_4__);





/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsReservationSpaceUtilizationChart', [shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_2__["default"].name, shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_3__["default"].name]).factory('analyticsReservationSpaceUtilizationChart', ["$filter", "$translate", "$rootScope", "chartColors", "reportHelper", function ($filter, $translate, $rootScope, chartColors, reportHelper) {
  return function (_ref) {
    var periods = _ref.periods,
        data = _ref.data,
        params = _ref.params,
        onChartClick = _ref.onChartClick;

    // data = reportHelper.sort(data, 'utilization', true).slice(0, 12);
    var labels = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(periods).call(periods, function (period) {
      return period.title;
    });

    var datasets = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(data).call(data, function (category, idx) {
      return {
        label: category.name,
        data: category.utilization,
        maxBarThickness: 80,
        backgroundColor: chartColors[idx]
      };
    });

    var chart = {
      type: 'bar',
      // plugins: [ChartDataLabels],
      data: {
        labels: labels,
        datasets: datasets
      },
      options: {
        // plugins: {
        //   datalabels: {
        //     display: 'auto',
        //     color: '#fff',
        //     backgroundColor: '#000',
        //     padding: 1,
        //     borderRadius: 3,
        //     formatter: (value, context) => `${Math.round(value)}%`,
        //   }
        // },
        tooltips: {
          mode: 'index',
          intersect: true,
          displayColors: true,
          callbacks: {
            label: function label(tooltipItem) {
              var _context, _context2, _context3;

              var _data$tooltipItem$dat = data[tooltipItem.datasetIndex],
                  name = _data$tooltipItem$dat.name,
                  utilization = _data$tooltipItem$dat.utilization,
                  usage = _data$tooltipItem$dat.usage,
                  expected = _data$tooltipItem$dat.expected;
              var idx = tooltipItem.index;
              return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default()(_context = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default()(_context2 = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default()(_context3 = "".concat(name, ": ")).call(_context3, utilization[idx], "% (")).call(_context2, usage[idx], " of ")).call(_context, expected[idx], " hr)");
            }
          }
        },
        layout: {
          padding: {
            top: 15
          }
        },
        legend: {
          display: true,
          position: params.wide ? 'right' : 'bottom'
        },
        scales: {
          yAxes: [{
            ticks: {
              min: 0,
              max: 100,
              callback: function callback(value) {
                return "".concat(value, "%");
              }
            }
          }]
        },
        onClick: onClick
      }
    };
    return chart;

    function onClick(event, items) {
      var _this = this;

      $rootScope.$apply(function (_) {
        var el = _this.getElementAtEvent(event)[0];

        if (!el) return;
        onChartClick(el._datasetIndex);
      });
    }
  };
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization.directive.js":
/*!**********************************************************************************************************************!*\
  !*** ./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization.directive.js ***!
  \**********************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ "../node_modules/@babel/runtime-corejs3/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "../node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "../node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _analytics_reservation_space_utilization_tpl_html__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./analytics-reservation-space-utilization.tpl.html */ "./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization.tpl.html");
/* harmony import */ var _analytics_reservation_space_utilization_tpl_html__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_analytics_reservation_space_utilization_tpl_html__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! shared/charts/chart.directive */ "./shared/charts/chart.directive.js");
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var _analytics_reservation_space_utilization_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./analytics-reservation-space-utilization.service */ "./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization.service.js");
/* harmony import */ var shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! shared/charts/opts-chart-by-period.service */ "./shared/charts/opts-chart-by-period.service.js");
/* harmony import */ var shared_charts_opts_chart_period_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! shared/charts/opts-chart-period.service */ "./shared/charts/opts-chart-period.service.js");
/* harmony import */ var _analytics_reservation_space_utilization_chart_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./analytics-reservation-space-utilization-chart.service */ "./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization-chart.service.js");
/* harmony import */ var _analytics_reservation_space_utilization_chart_units_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./analytics-reservation-space-utilization-chart-units.service */ "./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization-chart-units.service.js");
/* harmony import */ var shared_charts_chart_period_directive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! shared/charts/chart-period.directive */ "./shared/charts/chart-period.directive.js");
/* harmony import */ var shared_charts_chart_by_period_directive__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! shared/charts/chart-by-period.directive */ "./shared/charts/chart-by-period.directive.js");










function ownKeys(object, enumerableOnly) { var keys = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default()(object); if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default.a) { var symbols = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default()(object); if (enumerableOnly) { symbols = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default()(symbols).call(symbols, function (sym) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(target, key, source[key]); }); } else if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default.a) { Object.defineProperties(target, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(source, key)); }); } } return target; }











/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsReservationSpaceUtilizationDirective', ['debounce', shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_10__["default"].name, shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_11__["default"].name, shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_13__["default"].name, shared_charts_opts_chart_period_service__WEBPACK_IMPORTED_MODULE_14__["default"].name, _analytics_reservation_space_utilization_service__WEBPACK_IMPORTED_MODULE_12__["default"].name, _analytics_reservation_space_utilization_chart_service__WEBPACK_IMPORTED_MODULE_15__["default"].name, _analytics_reservation_space_utilization_chart_units_service__WEBPACK_IMPORTED_MODULE_16__["default"].name, shared_charts_chart_period_directive__WEBPACK_IMPORTED_MODULE_17__["default"].name, shared_charts_chart_by_period_directive__WEBPACK_IMPORTED_MODULE_18__["default"].name]).directive('analyticsReservationSpaceUtilization', function () {
  return {
    template: _analytics_reservation_space_utilization_tpl_html__WEBPACK_IMPORTED_MODULE_9___default.a,
    restrict: 'E',
    scope: true,
    controller: 'AnalyticsReservationSpaceUtilizationDirectiveCtrl as $ctrl',
    bindToController: {
      params: '<',
      centerId: '<'
    }
  };
}).controller('AnalyticsReservationSpaceUtilizationDirectiveCtrl', ["$scope", "$q", "state", "dwAlerts", "helper", "debounce", "reportHelper", "AnalyticsReservationSpaceUtilization", "analyticsReservationSpaceUtilizationChart", "analyticsReservationSpaceUtilizationChartUnits", "optsChartByPeriod", "optsChartPeriod", function ($scope, $q, state, dwAlerts, helper, debounce, reportHelper, AnalyticsReservationSpaceUtilization, analyticsReservationSpaceUtilizationChart, analyticsReservationSpaceUtilizationChartUnits, optsChartByPeriod, optsChartPeriod) {
  var $ctrl = this;
  var paramsChanged = reportHelper.paramsChanged;
  $ctrl.optsByPeriod = optsChartByPeriod;
  $ctrl.optsPeriod = optsChartPeriod;
  $ctrl.data = null;

  $ctrl.$onInit = function () {
    watchParams();
  };

  function watchParams() {
    $scope.$watch(function () {
      return _objectSpread(_objectSpread({}, $ctrl.params), {}, {
        centerId: $ctrl.centerId
      });
    }, debounce(function (np, op) {
      $ctrl.params.period = $ctrl.params.period || '12months';
      $ctrl.params.byPeriod = $ctrl.params.byPeriod || 'quarter';

      if ($ctrl.widgetToolbarForm.$invalid) {
        return;
      }

      if (paramsChanged(np, op, ['byPeriod', 'from', 'to', 'centerId'])) {
        $ctrl.data = null;
        $ctrl.params.selected = null;
      }

      $ctrl.data = $ctrl.data || ($ctrl.spin = true, AnalyticsReservationSpaceUtilization.get(_objectSpread(_objectSpread({}, $ctrl.params), {}, {
        centerId: $ctrl.centerId
      })).catch(function (err) {
        return dwAlerts.error(err, 'Failed to query Reservation Space Utilization widget data.');
      }).finally(function () {
        $ctrl.spin = false;
      }));
      $q.all({
        data: $ctrl.data
      }).then(function (result) {
        $ctrl.data = result.data;
      }).then(function () {
        if ($ctrl.params.selected !== null) {
          $ctrl.chart = analyticsReservationSpaceUtilizationChartUnits(_objectSpread(_objectSpread({}, $ctrl.data), {}, {
            params: $ctrl.params
          }));
        } else {
          $ctrl.chart = analyticsReservationSpaceUtilizationChart(_objectSpread(_objectSpread({}, $ctrl.data), {}, {
            params: $ctrl.params,
            onChartClick: onChartClick
          }));
        }
      });
    }, 100), true);
  }

  function onChartClick(index) {
    $ctrl.params.selected = index;
  }
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization.service.js":
/*!********************************************************************************************************************!*\
  !*** ./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization.service.js ***!
  \********************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! shared/charts/opts-chart-by-period.service */ "./shared/charts/opts-chart-by-period.service.js");




/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.AnalyticsReservationSpaceUtilization', ['ngResource', 'datesDeserializer', 'deskworks.config', shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_3__["default"].name]).factory('AnalyticsReservationSpaceUtilization', ["$resource", "$filter", "$timeout", "datesDeserializer", "deskworksConfig", "helper", "optsChartByPeriod", function ($resource, $filter, $timeout, datesDeserializer, deskworksConfig, helper, optsChartByPeriod) {
  var desDates = datesDeserializer(['periods.from', 'periods.to']);
  var url = deskworksConfig.getApiAbsUrl('/analytics/reservation-space-utilization');
  var res = $resource(url, {
    byPeriod: '@byPeriod',
    from: '@from',
    to: '@to'
  }, {
    get: {
      method: 'GET',
      isArray: false,
      transformResponse: [angular.fromJson, desDates]
    }
  });
  return {
    get: function get(params) {
      return res.get({
        centerId: params.centerId || null,
        byPeriod: params.byPeriod || 'quarter',
        from: $filter('date')(params.from, 'yyyy-MM-dd'),
        to: $filter('date')(params.to, 'yyyy-MM-dd')
      }).$promise.then(function (data) {
        return deserialize({
          data: data,
          params: params
        });
      });
    }
  };

  function deserialize(_ref) {
    var data = _ref.data,
        params = _ref.params;
    var _params$byPeriod = params.byPeriod,
        byPeriod = _params$byPeriod === void 0 ? 'month' : _params$byPeriod;

    var periodConfig = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default()(optsChartByPeriod).call(optsChartByPeriod, function (i) {
      return i.id === byPeriod;
    });

    data.periods.forEach(function (period) {
      period.title = periodConfig.format(period.from, period.to);
    });
    data.data.forEach(function (cat) {
      var _context2;

      cat.units.forEach(function (unit) {
        var _context;

        unit.utilization = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default()(_context = unit.usage).call(_context, function (u, i) {
          return unit.expected[i] ? helper.round(u * 100 / unit.expected[i], 1) : 0;
        });
      });
      cat.utilization = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default()(_context2 = cat.usage).call(_context2, function (u, i) {
        return cat.expected[i] ? helper.round(u * 100 / cat.expected[i], 1) : 0;
      });
    });
    return data;
  }
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization.tpl.html":
/*!******************************************************************************************************************!*\
  !*** ./bundles/analytics/widgets/reservation-space-utilization/analytics-reservation-space-utilization.tpl.html ***!
  \******************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div> <ng-form name=\"$ctrl.widgetToolbarForm\" class=\"ff-grid\"> <chart-by-period flex=\"none\" period=\"$ctrl.params.byPeriod\"></chart-by-period> <ff-static flex=\"auto\"> <ff-hint ng-if=\"$ctrl.params.selected === null\"><span translate=\"ANALYTICS.WIDGET.OCCUPANCY_VACANCY.HINT\"></span></ff-hint> <ff-btn sense=\"back\" size=\"sm\" ng-if=\"$ctrl.params.selected !== null\" ff-click=\"$ctrl.params.selected = null\"> <span translate=\"GLOBAL.BTN_BACK\"></span> </ff-btn> </ff-static> <chart-period flex=\"0 1 auto\" period=\"$ctrl.params.period\" from=\"$ctrl.params.from\" to=\"$ctrl.params.to\"></chart-period> </ng-form> <chart config=\"$ctrl.chart\" ff-dim=\"$ctrl.spin\"></chart> </div> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category-chart.service.js":
/*!******************************************************************************************************************!*\
  !*** ./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category-chart.service.js ***!
  \******************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! chartjs-plugin-datalabels */ "../node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_3__);




/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsSalesByProductCategoryChart', [shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_2__["default"].name]).factory('analyticsSalesByProductCategoryChart', ["$filter", "$rootScope", "reportHelper", function ($filter, $rootScope, reportHelper) {
  return function (_ref) {
    var data = _ref.data,
        onChartClick = _ref.onChartClick,
        params = _ref.params;

    var labels = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(data).call(data, function (i) {
      return i.name;
    });

    var datasets = [{
      data: _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(data).call(data, function (i) {
        return i.totalPercentage;
      })
    }];
    var chart = {
      type: 'pie',
      // plugins: [ChartDataLabels],
      data: {
        labels: labels,
        datasets: datasets
      },
      options: {
        // plugins: {
        //   datalabels: {
        //     display: 'auto',
        //     color: '#fff',
        //     textStrokeColor: '#000',
        //     textStrokeWidth: 2,
        //     formatter: (value, context) => {
        //       const { name, totalPercentage } = data[context.dataIndex];
        //       return `${name}\n${totalPercentage}%`;
        //     },
        //   }
        // },
        tooltips: {
          displayColors: true,
          callbacks: {
            label: function label(tooltipItem) {
              var _context, _context2;

              var _data$tooltipItem$ind = data[tooltipItem.index],
                  name = _data$tooltipItem$ind.name,
                  totalPercentage = _data$tooltipItem$ind.totalPercentage,
                  total = _data$tooltipItem$ind.total;
              return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default()(_context = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default()(_context2 = "".concat(name, ": ")).call(_context2, totalPercentage, "% (")).call(_context, $filter('ncurrency')(total), ")");
            }
          }
        },
        layout: {
          padding: {
            top: 15
          }
        },
        legend: {
          display: true,
          position: 'right'
        },
        onClick: onClick
      }
    };
    return chart;

    function onClick(event, items) {
      $rootScope.$apply(function (_) {
        var idx = items[0] && items[0]._index;
        if (!angular.isNumber(idx)) return;
        onChartClick(idx);
      });
    }
  };
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category-detailed-chart.service.js":
/*!***************************************************************************************************************************!*\
  !*** ./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category-detailed-chart.service.js ***!
  \***************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! chartjs-plugin-datalabels */ "../node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! shared/charts/chart-colors.service */ "./shared/charts/chart-colors.service.js");




/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsSalesByProductCategoryDetailedChart', [shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_3__["default"].name]).factory('analyticsSalesByProductCategoryDetailedChart', ["$filter", "chartColors", function ($filter, chartColors) {
  return function (_ref) {
    var periods = _ref.periods,
        data = _ref.data,
        params = _ref.params;
    data = data[params.selected];

    var labels = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(periods).call(periods, function (period) {
      return period.title;
    });

    var datasets = [{
      data: data.totals,
      maxBarThickness: 80,
      backgroundColor: chartColors[params.selected]
    }];

    var _data$totals$reduce = data.totals.reduce(function (res, t) {
      if (t < res.min) {
        res.min = t;
      }

      if (t > res.max) {
        res.max = t;
      }

      return res;
    }, {
      min: 0,
      max: 0
    }),
        min = _data$totals$reduce.min,
        max = _data$totals$reduce.max;

    var chart = {
      type: 'bar',
      // plugins: [ChartDataLabels],
      data: {
        labels: labels,
        datasets: datasets
      },
      options: {
        // plugins: {
        //   datalabels: {
        //     display: 'auto',
        //     color: '#fff',
        //     textStrokeColor: '#000',
        //     textStrokeWidth: 2,
        //     formatter: (value, context) => $filter('ncurrency')(value, undefined, 0),
        //   }
        // },
        tooltips: {
          callbacks: {
            label: function label(tooltipItem) {
              var _context;

              var _data = data,
                  name = _data.name,
                  totals = _data.totals;
              return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default()(_context = "".concat(name, ": ")).call(_context, $filter('ncurrency')(totals[tooltipItem.index]));
            }
          }
        },
        legend: {
          display: false
        },
        scales: {
          yAxes: [{
            ticks: {
              min: min,
              max: max,
              callback: function callback(value) {
                return $filter('ncurrency')(value, undefined, 0);
              }
            }
          }]
        }
      }
    };
    return chart;
  };
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category.directive.js":
/*!**************************************************************************************************************!*\
  !*** ./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category.directive.js ***!
  \**************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ "../node_modules/@babel/runtime-corejs3/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "../node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "../node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _analytics_sales_by_product_category_tpl_html__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./analytics-sales-by-product-category.tpl.html */ "./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category.tpl.html");
/* harmony import */ var _analytics_sales_by_product_category_tpl_html__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_analytics_sales_by_product_category_tpl_html__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! shared/charts/chart.directive */ "./shared/charts/chart.directive.js");
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var _analytics_sales_by_product_category_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./analytics-sales-by-product-category.service */ "./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category.service.js");
/* harmony import */ var shared_charts_opts_chart_period_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! shared/charts/opts-chart-period.service */ "./shared/charts/opts-chart-period.service.js");
/* harmony import */ var _analytics_sales_by_product_category_chart_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./analytics-sales-by-product-category-chart.service */ "./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category-chart.service.js");
/* harmony import */ var _analytics_sales_by_product_category_detailed_chart_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./analytics-sales-by-product-category-detailed-chart.service */ "./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category-detailed-chart.service.js");
/* harmony import */ var shared_charts_chart_period_directive__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! shared/charts/chart-period.directive */ "./shared/charts/chart-period.directive.js");
/* harmony import */ var shared_charts_chart_by_period_directive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! shared/charts/chart-by-period.directive */ "./shared/charts/chart-by-period.directive.js");










function ownKeys(object, enumerableOnly) { var keys = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default()(object); if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default.a) { var symbols = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default()(object); if (enumerableOnly) { symbols = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default()(symbols).call(symbols, function (sym) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(target, key, source[key]); }); } else if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default.a) { Object.defineProperties(target, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(source, key)); }); } } return target; }










/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsSalesByProductCategoryDirective', ['debounce', 'deskworks.setup.service', shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_10__["default"].name, shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_11__["default"].name, _analytics_sales_by_product_category_service__WEBPACK_IMPORTED_MODULE_12__["default"].name, shared_charts_opts_chart_period_service__WEBPACK_IMPORTED_MODULE_13__["default"].name, _analytics_sales_by_product_category_chart_service__WEBPACK_IMPORTED_MODULE_14__["default"].name, _analytics_sales_by_product_category_detailed_chart_service__WEBPACK_IMPORTED_MODULE_15__["default"].name, shared_charts_chart_period_directive__WEBPACK_IMPORTED_MODULE_16__["default"].name, shared_charts_chart_by_period_directive__WEBPACK_IMPORTED_MODULE_17__["default"].name]).directive('analyticsSalesByProductCategory', function () {
  return {
    template: _analytics_sales_by_product_category_tpl_html__WEBPACK_IMPORTED_MODULE_9___default.a,
    restrict: 'E',
    scope: true,
    controller: 'AnalyticsSalesByProductCategoryDirectiveCtrl as $ctrl',
    bindToController: {
      params: '<',
      centerId: '<'
    }
  };
}).controller('AnalyticsSalesByProductCategoryDirectiveCtrl', ["$scope", "$q", "state", "dwAlerts", "helper", "debounce", "reportHelper", "AnalyticsSalesByProductCategory", "analyticsSalesByProductCategoryChart", "analyticsSalesByProductCategoryDetailedChart", "optsChartPeriod", function ($scope, $q, state, dwAlerts, helper, debounce, reportHelper, AnalyticsSalesByProductCategory, analyticsSalesByProductCategoryChart, analyticsSalesByProductCategoryDetailedChart, optsChartPeriod) {
  var $ctrl = this;
  var paramsChanged = reportHelper.paramsChanged;
  $ctrl.optsPeriod = optsChartPeriod;
  $ctrl.data = null;
  $ctrl.chartLevels = [];

  $ctrl.$onInit = function () {
    watchParams();
  };

  function watchParams() {
    $scope.$watch(function () {
      return _objectSpread(_objectSpread({}, $ctrl.params), {}, {
        centerId: $ctrl.centerId
      });
    }, debounce(function (np, op) {
      $ctrl.params.period = $ctrl.params.period || 'lastMonth';
      $ctrl.params.byPeriod = $ctrl.params.byPeriod || 'month';

      if ($ctrl.widgetToolbarForm.$invalid) {
        return;
      }

      if (paramsChanged(np, op, ['from', 'to', 'centerId'])) {
        $ctrl.data = null;
        $ctrl.params.selected = null;
      }

      $ctrl.data = $ctrl.data || ($ctrl.spin = true, AnalyticsSalesByProductCategory.get(_objectSpread(_objectSpread({}, $ctrl.params), {}, {
        centerId: $ctrl.centerId
      })).catch(function (err) {
        return dwAlerts.error(err, 'Failed to get Sales By Product Category widget data.');
      })).finally(function () {
        $ctrl.spin = false;
      });
      $q.all({
        data: $ctrl.data
      }).then(function (result) {
        $ctrl.data = result.data;
      }).then(function () {
        if ($ctrl.params.selected !== null) {
          $ctrl.chart = analyticsSalesByProductCategoryDetailedChart(_objectSpread(_objectSpread({}, $ctrl.data), {}, {
            params: $ctrl.params
          }));
        } else {
          $ctrl.chart = analyticsSalesByProductCategoryChart(_objectSpread(_objectSpread({}, $ctrl.data), {}, {
            params: $ctrl.params,
            onChartClick: onChartClick
          }));
        }
      });
    }, 100), true);
  }

  function onChartClick(index) {
    $ctrl.params.selected = index;
  }
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category.service.js":
/*!************************************************************************************************************!*\
  !*** ./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category.service.js ***!
  \************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared/charts/opts-chart-by-period.service */ "./shared/charts/opts-chart-by-period.service.js");



/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.AnalyticsSalesByProductCategory', ['ngResource', 'datesDeserializer', 'deskworks.config', shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_2__["default"].name]).factory('AnalyticsSalesByProductCategory', ["$resource", "$filter", "$timeout", "datesDeserializer", "deskworksConfig", "helper", "optsChartByPeriod", function ($resource, $filter, $timeout, datesDeserializer, deskworksConfig, helper, optsChartByPeriod) {
  var desDates = datesDeserializer(['periods.from', 'periods.to']);
  var url = deskworksConfig.getApiAbsUrl('/analytics/sales-by-product-category');
  var res = $resource(url, {
    byPeriod: '@byPeriod',
    from: '@from',
    to: '@to'
  }, {
    get: {
      method: 'GET',
      isArray: false,
      transformResponse: [angular.fromJson, desDates]
    }
  });
  return {
    get: function get(params) {
      return res.get({
        centerId: params.centerId || null,
        byPeriod: params.byPeriod || 'month',
        from: $filter('date')(params.from, 'yyyy-MM-dd'),
        to: $filter('date')(params.to, 'yyyy-MM-dd')
      }).$promise.then(function (data) {
        return deserialize({
          data: data,
          params: params
        });
      });
    }
  };

  function deserialize(_ref) {
    var data = _ref.data,
        params = _ref.params;
    var _params$byPeriod = params.byPeriod,
        byPeriod = _params$byPeriod === void 0 ? 'month' : _params$byPeriod;

    var periodConfig = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default()(optsChartByPeriod).call(optsChartByPeriod, function (i) {
      return i.id === byPeriod;
    });

    data.periods.forEach(function (period) {
      period.title = periodConfig.format(period.from, period.to);
    });
    data.grandTotal = 0;
    data.data.forEach(function (i) {
      i.total = i.totals.reduce(function (sum, t) {
        return sum + t;
      }, 0);
      data.grandTotal += i.total;
    });
    data.data.forEach(function (i) {
      i.totalPercentage = data.grandTotal ? helper.round(i.total * 100 / data.grandTotal, 1) : 0;
      i.total = helper.round(i.total);
    });
    return data;
  }
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category.tpl.html":
/*!**********************************************************************************************************!*\
  !*** ./bundles/analytics/widgets/sales-by-product-category/analytics-sales-by-product-category.tpl.html ***!
  \**********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div ng-class=\"{ 'empty-chart': $ctrl.data.data.length === 0 || $ctrl.data.grandTotal === 0 }\"> <ng-form name=\"$ctrl.widgetToolbarForm\" class=\"ff-grid\"> <ff-static flex=\"auto\"> <ff-hint ng-if=\"$ctrl.params.selected === null\"><span translate=\"ANALYTICS.WIDGET.SALES_BY_PRODUCT_CATEGORY.HINT\"></span></ff-hint> <ff-btn sense=\"back\" size=\"sm\" ng-if=\"$ctrl.params.selected !== null\" ff-click=\"$ctrl.params.selected = null\"> <span translate=\"GLOBAL.BTN_BACK\"></span> </ff-btn> </ff-static> <chart-period flex=\"0 1 auto\" period=\"$ctrl.params.period\" from=\"$ctrl.params.from\" to=\"$ctrl.params.to\"></chart-period> </ng-form> <chart config=\"$ctrl.chart\" ff-dim=\"$ctrl.spin\"></chart> </div> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/analytics/widgets/sales/analytics-sales-chart.service.js":
/*!**************************************************************************!*\
  !*** ./bundles/analytics/widgets/sales/analytics-sales-chart.service.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! shared/charts/chart-colors.service */ "./shared/charts/chart-colors.service.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! chartjs-plugin-datalabels */ "../node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_4__);





/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsSalesChart', [shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_2__["default"].name, shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_3__["default"].name]).factory('analyticsSalesChart', ["$filter", "$translate", "chartColors", function ($filter, $translate, chartColors) {
  return function (_ref) {
    var _context;

    var periods = _ref.periods,
        data = _ref.data,
        totals = _ref.totals,
        params = _ref.params;

    var labels = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(periods).call(periods, function (period) {
      return period.title;
    });

    var datasets = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_1___default()(_context = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(data).call(data, function (type, idx) {
      return {
        label: type.name,
        data: type.totals,
        backgroundColor: chartColors[idx],
        maxBarThickness: 80
      };
    })).call(_context, [{
      label: $translate.instant('GLOBAL.TOTAL'),
      data: _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(totals).call(totals, function (_) {
        return 0;
      }),
      backgroundColor: 'transparent',
      maxBarThickness: 80 // datalabels: {
      //   display: true,
      //   align: 'end',
      //   offset: -3,
      //   color: '#fff',
      //   backgroundColor: '#000',
      //   padding: 1,
      //   borderRadius: 3,
      //   font: { weight: 'bold' },
      // },

    }]);

    var chart = {
      type: 'bar',
      // plugins: [ChartDataLabels],
      data: {
        labels: labels,
        datasets: datasets
      },
      options: {
        // plugins: {
        //   datalabels: {
        //     display: 'auto',
        //     color: '#fff',
        //     backgroundColor: '#000',
        //     padding: 1,
        //     borderRadius: 3,
        //     formatter: (value, context) => $filter('ncurrency')(context.datasetIndex < datasets.length - 1 ? value : totals[context.dataIndex], undefined, 0),
        //   }
        // },
        tooltips: {
          mode: 'index',
          intersect: true,
          displayColors: true,
          callbacks: {
            label: function label(tooltipItem, data) {
              var dataset = data.datasets[tooltipItem.datasetIndex];
              return dataset.label + ': ' + $filter('ncurrency')(tooltipItem.datasetIndex < datasets.length - 1 ? dataset.data[tooltipItem.index] : totals[tooltipItem.index]);
            }
          }
        },
        layout: {
          padding: {
            top: 15
          }
        },
        legend: {
          display: true,
          position: params.wide ? 'right' : 'bottom'
        },
        scales: {
          xAxes: [{
            stacked: true
          }],
          yAxes: [{
            stacked: true,
            ticks: {
              // min: 0,
              callback: function callback(value) {
                return $filter('ncurrency')(value, undefined, 0);
              }
            }
          }]
        }
      }
    };
    return chart;
  };
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/sales/analytics-sales.directive.js":
/*!**********************************************************************!*\
  !*** ./bundles/analytics/widgets/sales/analytics-sales.directive.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ "../node_modules/@babel/runtime-corejs3/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "../node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.promise.js */ "../node_modules/core-js/modules/es.promise.js");
/* harmony import */ var core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _analytics_widget_base_tpl_html__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../analytics-widget-base.tpl.html */ "./bundles/analytics/widgets/analytics-widget-base.tpl.html");
/* harmony import */ var _analytics_widget_base_tpl_html__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_analytics_widget_base_tpl_html__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! shared/charts/chart.directive */ "./shared/charts/chart.directive.js");
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var _analytics_sales_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./analytics-sales.service */ "./bundles/analytics/widgets/sales/analytics-sales.service.js");
/* harmony import */ var shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! shared/charts/opts-chart-by-period.service */ "./shared/charts/opts-chart-by-period.service.js");
/* harmony import */ var shared_charts_opts_chart_period_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! shared/charts/opts-chart-period.service */ "./shared/charts/opts-chart-period.service.js");
/* harmony import */ var _analytics_sales_chart_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./analytics-sales-chart.service */ "./bundles/analytics/widgets/sales/analytics-sales-chart.service.js");
/* harmony import */ var shared_charts_chart_period_directive__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! shared/charts/chart-period.directive */ "./shared/charts/chart-period.directive.js");
/* harmony import */ var shared_charts_chart_by_period_directive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! shared/charts/chart-by-period.directive */ "./shared/charts/chart-by-period.directive.js");










function ownKeys(object, enumerableOnly) { var keys = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default()(object); if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default.a) { var symbols = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default()(object); if (enumerableOnly) { symbols = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default()(symbols).call(symbols, function (sym) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(target, key, source[key]); }); } else if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default.a) { Object.defineProperties(target, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(source, key)); }); } } return target; }










/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.analyticsSalesDirective', ['debounce', shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_10__["default"].name, shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_11__["default"].name, _analytics_sales_service__WEBPACK_IMPORTED_MODULE_12__["default"].name, shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_13__["default"].name, shared_charts_opts_chart_period_service__WEBPACK_IMPORTED_MODULE_14__["default"].name, _analytics_sales_chart_service__WEBPACK_IMPORTED_MODULE_15__["default"].name, shared_charts_chart_period_directive__WEBPACK_IMPORTED_MODULE_16__["default"].name, shared_charts_chart_by_period_directive__WEBPACK_IMPORTED_MODULE_17__["default"].name]).directive('analyticsSales', function () {
  return {
    template: _analytics_widget_base_tpl_html__WEBPACK_IMPORTED_MODULE_9___default.a,
    restrict: 'E',
    scope: true,
    controller: 'AnalyticsSalesDirectiveCtrl as $ctrl',
    bindToController: {
      params: '<',
      centerId: '<'
    }
  };
}).controller('AnalyticsSalesDirectiveCtrl', ["$scope", "$q", "state", "dwAlerts", "helper", "debounce", "reportHelper", "AnalyticsSales", "analyticsSalesChart", "optsChartByPeriod", "optsChartPeriod", function ($scope, $q, state, dwAlerts, helper, debounce, reportHelper, AnalyticsSales, analyticsSalesChart, optsChartByPeriod, optsChartPeriod) {
  var $ctrl = this;
  var paramsChanged = reportHelper.paramsChanged;
  $ctrl.optsByPeriod = optsChartByPeriod;
  $ctrl.optsPeriod = optsChartPeriod;
  $ctrl.data = null;

  $ctrl.$onInit = function () {
    watchParams();
  };

  function watchParams() {
    $scope.$watch(function () {
      return _objectSpread(_objectSpread({}, $ctrl.params), {}, {
        centerId: $ctrl.centerId
      });
    }, debounce(function (np, op) {
      $ctrl.params.period = $ctrl.params.period || '12months';
      $ctrl.params.byPeriod = $ctrl.params.byPeriod || 'month';

      if ($ctrl.widgetToolbarForm.$invalid) {
        return;
      }

      if (paramsChanged(np, op, ['centerId', 'from', 'to', 'byPeriod'])) {
        $ctrl.data = null;
      }

      $ctrl.data = $ctrl.data || ($ctrl.spin = true, AnalyticsSales.get(np).catch(function (err) {
        return dwAlerts.error(err, 'Failed to get Sales widget data.');
      }).finally(function () {
        $ctrl.spin = false;
      }));
      $q.all({
        data: $ctrl.data
      }).then(function (result) {
        $ctrl.data = result.data;
      }).then(function () {
        $ctrl.chart = analyticsSalesChart(_objectSpread(_objectSpread({}, $ctrl.data), {}, {
          params: $ctrl.params
        }));
      });
    }, 100), true);
  }
}]));

/***/ }),

/***/ "./bundles/analytics/widgets/sales/analytics-sales.service.js":
/*!********************************************************************!*\
  !*** ./bundles/analytics/widgets/sales/analytics-sales.service.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! shared/charts/opts-chart-by-period.service */ "./shared/charts/opts-chart-by-period.service.js");




/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.AnalyticsSales', ['ngResource', 'datesDeserializer', 'deskworks.config', shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_3__["default"].name]).factory('AnalyticsSales', ["$resource", "$filter", "$timeout", "datesDeserializer", "deskworksConfig", "helper", "optsChartByPeriod", function ($resource, $filter, $timeout, datesDeserializer, deskworksConfig, helper, optsChartByPeriod) {
  var desDates = datesDeserializer(['periods.from', 'periods.to']);
  var url = deskworksConfig.getApiAbsUrl('/analytics/sales');
  var res = $resource(url, {
    byPeriod: '@byPeriod',
    from: '@from',
    to: '@to'
  }, {
    get: {
      method: 'GET',
      isArray: false,
      transformResponse: [angular.fromJson, desDates]
    }
  });
  return {
    get: function get(params) {
      return res.get({
        centerId: params.centerId || null,
        byPeriod: params.byPeriod || 'month',
        from: $filter('date')(params.from, 'yyyy-MM-dd'),
        to: $filter('date')(params.to, 'yyyy-MM-dd')
      }).$promise.then(function (data) {
        return deserialize({
          data: data,
          params: params
        });
      });
    }
  };

  function deserialize(_ref) {
    var _context;

    var data = _ref.data,
        params = _ref.params;
    var _params$byPeriod = params.byPeriod,
        byPeriod = _params$byPeriod === void 0 ? 'month' : _params$byPeriod;

    var periodConfig = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_1___default()(optsChartByPeriod).call(optsChartByPeriod, function (i) {
      return i.id === byPeriod;
    });

    data.periods.forEach(function (period) {
      period.title = periodConfig.format(period.from, period.to);
    });
    data.totals = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default()(_context = data.periods).call(_context, function (p, idx) {
      return helper.round(data.data.reduce(function (sum, i) {
        return sum + i.totals[idx];
      }, 0));
    });
    data.data.forEach(function (type) {
      type.total = helper.round(type.totals.reduce(function (sum, i) {
        return sum + i;
      }, 0));
    });
    return data;
  }
}]));

/***/ }),

/***/ "./shared/charts/chart-by-period.directive.js":
/*!****************************************************!*\
  !*** ./shared/charts/chart-by-period.directive.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _chart_by_period_tpl_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chart-by-period.tpl.html */ "./shared/charts/chart-by-period.tpl.html");
/* harmony import */ var _chart_by_period_tpl_html__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_chart_by_period_tpl_html__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! shared/charts/opts-chart-by-period.service */ "./shared/charts/opts-chart-by-period.service.js");


/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.chartByPeriodDirective', [shared_charts_opts_chart_by_period_service__WEBPACK_IMPORTED_MODULE_1__["default"].name]).directive('chartByPeriod', function () {
  return {
    template: _chart_by_period_tpl_html__WEBPACK_IMPORTED_MODULE_0___default.a,
    restrict: 'E',
    scope: true,
    controller: 'ChartByPeriodCtrl as $ctrl',
    bindToController: {
      period: '='
    }
  };
}).controller('ChartByPeriodCtrl', ["$scope", "optsChartByPeriod", function ($scope, optsChartByPeriod) {
  var $ctrl = this;
  $ctrl.optsPeriod = optsChartByPeriod;
}]));

/***/ }),

/***/ "./shared/charts/chart-by-period.tpl.html":
/*!************************************************!*\
  !*** ./shared/charts/chart-by-period.tpl.html ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<label class=\"ff-row\" style=\"min-width:130px\"> <ff-label flex=\"none\"><span translate=\"CHARTS.BY_PERIOD\"></span></ff-label> <ff-select ff-model=\"$ctrl.period\" ff-options=\"opt.id as opt.name for opt in $ctrl.optsPeriod\"></ff-select> </label> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./shared/charts/chart-colors.service.js":
/*!***********************************************!*\
  !*** ./shared/charts/chart-colors.service.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (angular.module('chartColors', []).factory('chartColors', function () {
  return ['#317da3', '#e6194b', '#3cb44b', '#ffe119', '#f58231', '#911eb4', '#aa6e28', '#008080', '#808080', '#800000', '#3244a1', '#e64c19', '#3db372', '#d1ff1a', '#f5c131', '#b31e81', '#a89728', '#005580', '#806659', '#804000'];
}));

/***/ }),

/***/ "./shared/charts/chart-period.directive.js":
/*!*************************************************!*\
  !*** ./shared/charts/chart-period.directive.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _chart_period_tpl_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chart-period.tpl.html */ "./shared/charts/chart-period.tpl.html");
/* harmony import */ var _chart_period_tpl_html__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_chart_period_tpl_html__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _chart_period_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chart-period.scss */ "./shared/charts/chart-period.scss");
/* harmony import */ var _chart_period_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_chart_period_scss__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var shared_charts_opts_chart_period_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! shared/charts/opts-chart-period.service */ "./shared/charts/opts-chart-period.service.js");




/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.chartPeriodDirective', [shared_charts_opts_chart_period_service__WEBPACK_IMPORTED_MODULE_3__["default"].name]).directive('chartPeriod', function () {
  return {
    template: _chart_period_tpl_html__WEBPACK_IMPORTED_MODULE_1___default.a,
    restrict: 'E',
    scope: true,
    controller: 'ChartPeriodCtrl as $ctrl',
    bindToController: {
      period: '=',
      from: '=',
      to: '='
    }
  };
}).controller('ChartPeriodCtrl', ["$scope", "optsChartPeriod", function ($scope, optsChartPeriod) {
  var $ctrl = this;
  $ctrl.optsPeriod = optsChartPeriod;
  $scope.$watchGroup(['$ctrl.period', '$ctrl.from', '$ctrl.to'], function (nv, ov) {
    if ($ctrl.period === 'custom' && $ctrl.to) $ctrl.to.endOf('month');
    if (nv[0] === ov[0] && (!$ctrl.period || $ctrl.from || $ctrl.to)) return;

    var period = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0___default()(optsChartPeriod).call(optsChartPeriod, function (i) {
      return i.id === $ctrl.period;
    });

    $ctrl.from = period.from();
    $ctrl.to = period.to();
  });
}]));

/***/ }),

/***/ "./shared/charts/chart-period.scss":
/*!*****************************************!*\
  !*** ./shared/charts/chart-period.scss ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by extract-css-chunks-webpack-plugin

/***/ }),

/***/ "./shared/charts/chart-period.tpl.html":
/*!*********************************************!*\
  !*** ./shared/charts/chart-period.tpl.html ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<label class=\"ff-row\" style=\"min-width:190px\"> <ff-label flex=\"none\"><span translate=\"CHARTS.PERIOD\"></span></ff-label> <ff-select ff-model=\"$ctrl.period\" ff-options=\"opt.id as opt.name for opt in $ctrl.optsPeriod\"></ff-select> </label> <ff-row style=\"z-index:1;margin-left:-108px\" ng-style=\"{ 'min-width': $ctrl.period === 'custom' ? '300px' : 'none' }\"> <label class=\"ff-row\" flex=\"0 1 158px\" ng-if=\"$ctrl.period === 'custom'\"> <ff-label flex=\"none\"><span translate=\"CHARTS.FROM\"></span></ff-label> <ff-date name=\"from\" ff-model=\"$ctrl.from\" monthly=\"true\" ff-required=\"true\" ff-validate-alert=\"{{'CHARTS.FROM' | translate}}\"></ff-date> </label> <label class=\"ff-row\" flex=\"0 1 140px\" ng-if=\"$ctrl.period === 'custom'\"> <ff-label flex=\"none\"><span translate=\"CHARTS.TO\"></span></ff-label> <ff-date name=\"to\" ff-model=\"$ctrl.to\" monthly=\"true\" ff-required=\"true\" ff-validate-alert=\"{{'CHARTS.TO' | translate}}\"></ff-date> </label> </ff-row> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./shared/charts/chart.directive.js":
/*!******************************************!*\
  !*** ./shared/charts/chart.directive.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ "../node_modules/@babel/runtime-corejs3/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/slice */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/slice.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! chart.js */ "../node_modules/chart.js/dist/Chart.js");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(chart_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _chart_scss__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./chart.scss */ "./shared/charts/chart.scss");
/* harmony import */ var _chart_scss__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_chart_scss__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var shared_charts_system_colors_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! shared/charts/system-colors.service */ "./shared/charts/system-colors.service.js");
/* harmony import */ var shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! shared/charts/chart-colors.service */ "./shared/charts/chart-colors.service.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! chartjs-plugin-datalabels */ "../node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.js");
/* harmony import */ var chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_13__);










function ownKeys(object, enumerableOnly) { var keys = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default()(object); if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default.a) { var symbols = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default()(object); if (enumerableOnly) { symbols = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default()(symbols).call(symbols, function (sym) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(target, key, source[key]); }); } else if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default.a) { Object.defineProperties(target, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(source, key)); }); } } return target; }






/**
 * Chart directive - wrapper for chart.js
 */

/* harmony default export */ __webpack_exports__["default"] = (angular.module('chartDirective', ['deskworks.helper', shared_charts_system_colors_service__WEBPACK_IMPORTED_MODULE_11__["default"].name, shared_charts_chart_colors_service__WEBPACK_IMPORTED_MODULE_12__["default"].name]).directive('chart', ["$window", "systemColors", function ($window, systemColors) {
  $window.Chart.defaults.global.legend.labels.boxWidth = 12;
  $window.Chart.defaults.global.tooltips.cornerRadius = 3;
  $window.Chart.defaults.global.tooltips.displayColors = false;
  $window.Chart.defaults.global.tooltips.backgroundColor = 'rgba(0,0,0,0.65)';
  $window.Chart.defaults.global.elements.rectangle.borderWidth = 1;
  $window.Chart.defaults.global.elements.rectangle.backgroundColor = systemColors.primary;
  $window.Chart.defaults.global.elements.arc.borderWidth = 1;
  $window.Chart.plugins.unregister(chartjs_plugin_datalabels__WEBPACK_IMPORTED_MODULE_13___default.a);
  return {
    restrict: 'E',
    scope: true,
    controller: 'ChartCtrl as $ctrl',
    bindToController: {
      type: '@chartType',
      labels: '<chartLabels',
      data: '<chartData',
      options: '<chartOptions',
      config: '<'
    },
    template: '<canvas></canvas>'
  };
}]).controller('ChartCtrl', ["$scope", "$element", "$window", "chartColors", function ($scope, $element, $window, chartColors) {
  var $ctrl = this;
  var chart;
  var chartOptions = {
    maintainAspectRatio: false
  };
  var defaults = {
    backgroundColor: chartColors,
    hoverBorderWidth: 2,
    hoverBorderColor: '#fff'
  };
  /**
   * $onInit
   */
  // $ctrl.$onInit = function() {
  // };

  /**
   * $onDestroy
   */

  $ctrl.$onDestroy = function () {
    if (chart) chart.destroy();
  };
  /**
   * $onChanges
   */


  $ctrl.$onChanges = function (changes) {
    var _context2;

    // NEW APPROACH
    if ($ctrl.config) {
      var _context;

      if (chart) chart.destroy();

      var config = _objectSpread({}, $ctrl.config);

      config.options = _objectSpread(_objectSpread({}, config.options), chartOptions);
      config.data = _objectSpread({}, config.data);
      config.data.datasets = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_7___default()(_context = config.data.datasets).call(_context, function (ds) {
        return _objectSpread(_objectSpread({}, defaults), ds);
      });
      chart = new $window.Chart($element.children(), config);
      return;
    } // OLD APPROACH


    if (!$ctrl.options) return;
    var chartData = {
      labels: $ctrl.labels,
      datasets: _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_8___default()(_context2 = $ctrl.data).call(_context2)
    };
    chartData.datasets[0] = angular.extend({}, defaults, chartData.datasets[0]);

    if (chart && (!changes.type || changes.type.currentValue === changes.type.previousValue)) {
      angular.extend(chart.data, chartData);
      angular.extend(chart.options, chartOptions, $ctrl.options);
      chart.update();
    } else {
      if (chart) chart.destroy();
      chart = new $window.Chart($element.children(), {
        type: $ctrl.type,
        data: chartData,
        options: angular.extend({}, chartOptions, $ctrl.options)
      });
    }
  };
}]));

/***/ }),

/***/ "./shared/charts/chart.scss":
/*!**********************************!*\
  !*** ./shared/charts/chart.scss ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by extract-css-chunks-webpack-plugin

/***/ }),

/***/ "./shared/charts/opts-chart-by-period.service.js":
/*!*******************************************************!*\
  !*** ./shared/charts/opts-chart-by-period.service.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);


/**
 * Options for Chart / Group By Period
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.optsChartByPeriod', []).factory('optsChartByPeriod', ["$rootScope", "$translate", "$filter", function ($rootScope, $translate, $filter) {
  var df = $filter('date');
  var opts = [{
    id: 'week',
    _name: 'CHARTS.BY_PERIOD.WEEK',
    format: function format(from, to) {
      return df(from, 'MMM d') + ' - ' + df(to, 'MMM d');
    }
  }, {
    id: 'month',
    _name: 'CHARTS.BY_PERIOD.MONTH',
    format: function format(from, to) {
      return df(from, 'MMM');
    }
  }, {
    id: 'quarter',
    _name: 'CHARTS.BY_PERIOD.QUARTER',
    format: function format(from, to) {
      return df(from, 'MMM') + ' - ' + df(to, 'MMM');
    }
  }, {
    id: 'year',
    _name: 'CHARTS.BY_PERIOD.YEAR',
    format: function format(from, to) {
      return df(from, 'yyyy');
    }
  }];
  translate();
  $rootScope.$on('$setTranslationsSuccess', translate);

  function translate() {
    opts.forEach(function (opt) {
      opt.name = $translate.instant(opt._name);
    });
  }

  return opts;
}]));

/***/ }),

/***/ "./shared/charts/opts-chart-period.service.js":
/*!****************************************************!*\
  !*** ./shared/charts/opts-chart-period.service.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);

/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.optsChartPeriod', []).factory('optsChartPeriod', ["$rootScope", "$translate", function ($rootScope, $translate) {
  var opts = [{
    id: 'lastMonth',
    _name: 'CHARTS.PERIOD.LAST_MONTH',
    from: function from() {
      return moment().subtract(1, 'month').startOf('month');
    },
    to: function to() {
      return moment().subtract(1, 'month').endOf('month');
    }
  }, {
    id: 'thisMonth',
    _name: 'CHARTS.PERIOD.THIS_MONTH',
    from: function from() {
      return moment().startOf('month');
    },
    to: function to() {
      return moment().endOf('month');
    }
  }, {
    id: 'lastQuarter',
    _name: 'CHARTS.PERIOD.LAST_QUARTER',
    from: function from() {
      return moment().subtract(1, 'quarter').startOf('quarter');
    },
    to: function to() {
      return moment().subtract(1, 'quarter').endOf('quarter');
    }
  }, {
    id: 'thisQuarter',
    _name: 'CHARTS.PERIOD.THIS_QUARTER',
    from: function from() {
      return moment().startOf('quarter');
    },
    to: function to() {
      return moment().endOf('quarter');
    }
  }, {
    id: '12months',
    _name: 'CHARTS.PERIOD.12_MONTHS',
    from: function from() {
      return moment().subtract(12, 'month');
    },
    to: function to() {
      return moment();
    }
  }, {
    id: 'lastYear',
    _name: 'CHARTS.PERIOD.LAST_YEAR',
    from: function from() {
      return moment().subtract(1, 'year').startOf('year');
    },
    to: function to() {
      return moment().subtract(1, 'year').endOf('year');
    }
  }, {
    id: 'thisYear',
    _name: 'CHARTS.PERIOD.THIS_YEAR',
    from: function from() {
      return moment().startOf('year');
    },
    to: function to() {
      return moment().endOf('year');
    }
  }, {
    id: 'allTime',
    _name: 'CHARTS.PERIOD.ALL_TIME',
    from: function from() {
      return null;
    },
    to: function to() {
      return null;
    }
  }, {
    id: 'custom',
    _name: 'CHARTS.PERIOD.CUSTOM',
    from: function from() {
      return moment().subtract(1, 'month').startOf('month');
    },
    to: function to() {
      return moment().subtract(1, 'month').endOf('month');
    }
  }];
  translate();
  $rootScope.$on('$setTranslationsSuccess', translate);

  function translate() {
    opts.forEach(function (opt) {
      opt.name = $translate.instant(opt._name);
    });
  }

  return opts;
}]));

/***/ }),

/***/ "./shared/charts/system-colors.service.js":
/*!************************************************!*\
  !*** ./shared/charts/system-colors.service.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * systemColors service - sniffs and keeps system colors for using in JS
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('systemColors', ['deskworks.helper']).factory('systemColors', ["$window", "helper", function ($window, helper) {
  var colors = {};
  var picker = angular.element('<div style="display: none"></div>');
  picker.append('<div class="text-text"></div>');
  picker.append('<div class="text-brand"></div>');
  picker.append('<div class="text-brand"></div>');
  picker.append('<div class="text-danger"></div>');
  picker.append('<div></div>');
  picker.append('<div class="sidebar-group-header"></div>');
  document.body.appendChild(picker[0]);
  colors.text = helper.rgb2hex($window.getComputedStyle(picker.children()[0]).getPropertyValue('color')) || '#444';
  colors.info = helper.rgb2hex($window.getComputedStyle(picker.children()[4]).getPropertyValue('color')) || '#4d4e4c';
  colors.primary = helper.rgb2hex($window.getComputedStyle(picker.children()[5]).getPropertyValue('background-color')) || '#949594';
  colors.warning = helper.rgb2hex($window.getComputedStyle(picker.children()[3]).getPropertyValue('color')) || '#ff9b00';
  picker.remove();
  return colors;
}]));

/***/ }),

/***/ "./shared/drag-n-drop/dnd.service.js":
/*!*******************************************!*\
  !*** ./shared/drag-n-drop/dnd.service.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/splice */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/splice.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var angular_drag_and_drop_lists__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! angular-drag-and-drop-lists */ "../node_modules/angular-drag-and-drop-lists/angular-drag-and-drop-lists.js");
/* harmony import */ var angular_drag_and_drop_lists__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(angular_drag_and_drop_lists__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _drag_n_drop_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./drag-n-drop.scss */ "./shared/drag-n-drop/drag-n-drop.scss");
/* harmony import */ var _drag_n_drop_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_drag_n_drop_scss__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _keese_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./keese.service */ "./shared/drag-n-drop/keese.service.js");




/**
 * Drag'n'Drop helper service
 */

/* harmony default export */ __webpack_exports__["default"] = (angular.module('dnd', ['dndLists', _keese_service__WEBPACK_IMPORTED_MODULE_3__["default"].name]).factory('dnd', ["keese", function (keese) {
  return {
    move: move
  };
  /**
   * Move item from srcList[srcIndex] to targetList[targetIndex], auto-generates new order. Returns moved item.
   */

  function move(srcList, srcIndex, targetList, targetIndex) {
    var item = srcList[srcIndex];
    if (targetList) _babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_0___default()(targetList).call(targetList, targetIndex, 0, item); // copy item from source to target
    // remove source item, possibly correcting index. We must do this immediately, otherwise ng-repeat complains about duplicates

    if (srcList === targetList && targetIndex <= srcIndex) srcIndex++;

    _babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_0___default()(srcList).call(srcList, srcIndex, 1); // remove source item


    if (targetList) {
      var index = targetList.indexOf(item); // find new index of item

      item.order = keese.generate(targetList[index - 1] && targetList[index - 1].order, targetList[index + 1] && targetList[index + 1].order);
    }

    return item;
  }
}]));

/***/ }),

/***/ "./shared/drag-n-drop/drag-n-drop.scss":
/*!*********************************************!*\
  !*** ./shared/drag-n-drop/drag-n-drop.scss ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by extract-css-chunks-webpack-plugin

/***/ }),

/***/ "./shared/drag-n-drop/keese.service.js":
/*!*********************************************!*\
  !*** ./shared/drag-n-drop/keese.service.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/json/stringify */ "../node_modules/@babel/runtime-corejs3/core-js-stable/json/stringify.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_0__);


/**
 * Sort keys generator. Based on node-keese v1.1.1: https://github.com/thejoshwolfe/node-keese
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('keese', []).factory('keese', function () {
  var alphabet = "0123456789?@ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
  var radix = alphabet.length;
  var order_specifier = '~'; // bigger than any from the alphabet

  /**
   * Character to numerical value aka index of the character: "0": 0, "z": 63, etc.
   */

  var values = function () {
    var values = {};

    for (var i = 0; i < alphabet.length; i++) {
      values[alphabet[i]] = i;
    }

    return values;
  }();

  return {
    /**
     * Main exported function. Generates new sort key.
     * @param low - previous sort key or null/undefined
     * @param high - next sort key or null/undefined
     * @param count - if defined - the result is an Array of size count values
     * @returns {*} - single key or array of keys, depending on count
     */
    generate: function keese(low, high, count) {
      if (count) {
        return multi_keese(low, high, count);
      } else {
        return single_keese(low, high);
      }
    }
  };

  function single_keese(low, high) {
    if (!low) {
      if (!high) {
        return '1'; // return anything above 0
      } else {
        return average('0', high); // go smaller
      }
    } else {
      if (!high) {
        return increment(low); // go bigger
      } else {
        return average(low, high); // go in between
      }
    }
  }

  function multi_keese(low, high, count) {
    var result = new Array(count);

    if (count > 0) {
      if (!high) {
        for (var i = 0; i < count; i++) {
          // just allocate straight forward
          var value = keese(low, null);
          result[i] = value;
          low = value;
        }
      } else {
        recurse(low, high, 0, count); // binary tree descent
      }
    }

    return result;

    function recurse(low_value, high_value, low_index, high_index) {
      var mid_index = Math.floor((low_index + high_index) / 2);
      var mid_value = single_keese(low_value, high_value);
      result[mid_index] = mid_value;
      if (low_index < mid_index) recurse(low_value, mid_value, low_index, mid_index);
      if (mid_index + 1 < high_index) recurse(mid_value, high_value, mid_index + 1, high_index);
    }
  }

  function increment(value) {
    var n = parse(value);
    n.digits = n.digits.substr(0, n.order_length + 1); // drop the fraction

    return add(n, parse("1"));
  }

  function average(low, high) {
    if (low > high) {
      throw new Error('assertion failed: ' + _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_0___default()(low) + " < " + _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_0___default()(high));
    }

    var a = parse(low);
    var b = parse(high);
    pad_to_equal_order(a, b);
    var b_carry = 0;
    var max_digit_length = Math.max(a.digits.length, b.digits.length);

    for (var i = 0; i < max_digit_length || b_carry > 0; i++) {
      var a_value = values[a.digits[i]] || 0;
      var b_value = b_carry + (values[b.digits[i]] || 0);
      if (a_value === b_value) continue;

      if (a_value === b_value - 1) {
        b_carry = radix; // we need more digits, but remember that b is ahead

        continue;
      } // we have a distance of at least 2 between the values.
      // half the distance floored is sure to be a positive single digit.


      var half_distance_value = Math.floor((b_value - a_value) / 2);
      var half_distance_digits = '';

      for (var j = 0; j < i; j++) {
        half_distance_digits += '0';
      }

      half_distance_digits += alphabet[half_distance_value];
      var half_distance = parse(construct(a.order_length, half_distance_digits)); // truncate insignificant digits of a

      a.digits = a.digits.substr(0, i + 1);
      return add(a, half_distance);
    }

    throw new Error(); // unreachable
  }

  function add(a, b) {
    pad_to_equal_order(a, b);
    var result_digits = "";
    var order_length = a.order_length;
    var value = 0;

    for (var i = Math.max(a.digits.length, b.digits.length) - 1; i >= 0; i--) {
      value += values[a.digits[i]] || 0;
      value += values[b.digits[i]] || 0;
      result_digits = alphabet[value % radix] + result_digits;
      value = Math.floor(value / radix);
    } // overflow up to moar digits


    while (value > 0) {
      result_digits = alphabet[value % radix] + result_digits;
      value = Math.floor(value / radix);
      order_length++;
    }

    return construct(order_length, result_digits);
  }

  function parse(value) {
    var order_length = value.lastIndexOf(order_specifier) + 1;
    return {
      order_length: order_length,
      digits: value.substr(order_length)
    };
  }

  function construct(order_length, digits) {
    while (order_length > 0 && digits.charAt(0) == '0') {
      // strip unnecessary leading zeros
      digits = digits.substr(1);
      order_length--;
    }

    var result = "";

    for (var i = 0; i < order_length; i++) {
      result += order_specifier;
    }

    return result + digits;
  }

  function pad_to_equal_order(a, b) {
    pad_in_place(a, b.order_length);
    pad_in_place(b, a.order_length);
  }

  function pad_in_place(n, order_length) {
    while (n.order_length < order_length) {
      n.digits = "0" + n.digits;
      n.order_length++;
    }
  }
}));

/***/ })

}]);
//# sourceMappingURL=analytics~._b.js.map?_rev=8470539a2d7f2e21dbf5