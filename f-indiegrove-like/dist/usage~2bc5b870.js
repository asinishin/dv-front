(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"/Ofy":function(e,t){e.exports='<form name="$ctrl.form" id="usageEntryEdit" ff-bulk-read-only> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h-half"> <ff-panel flex="{lg: \'0 0 50%\'}"> <ff-header><span translate="USAGE_ENTRY.PERIOD.HEADER"></span></ff-header> <dw-date-time ff-label="{{\'USAGE_ENTRY.CHECK_IN_TIME\' | translate}}" ff-model="$ctrl.editingUsage.checkInTime" label-flex="0 0 126px" ff-required="true" ff-date-diff="23" ff-date-order="{ early: $ctrl.editingUsage.checkInTime, late: $ctrl.editingUsage.checkOutTime }" ff-validate-alert="{ field: \'Start Date\', late: \'End Date\' }"> </dw-date-time> <dw-date-time ff-label="{{\'USAGE_ENTRY.CHECK_OUT_TIME\' | translate}}" ff-model="$ctrl.editingUsage.checkOutTime" label-flex="0 0 126px" ff-required="true" ff-date-diff="23" ff-date-order="{ early: $ctrl.editingUsage.checkInTime, late: $ctrl.editingUsage.checkOutTime }" ff-validate-alert="{ field: \'End Date\', early: \'Start Date\' }"> </dw-date-time> </ff-panel> <ff-panel flex="{lg: \'0 0 50%\'}"> <ff-header><span translate="USAGE_ENTRY.NOTES"></span></ff-header> <label class="ff-row"> <ff-textarea ff-model="$ctrl.editingUsage.notes" rowspan="2"></ff-textarea> </label> </ff-panel> <ff-btn-group> <ff-btn sense="save" type="submit" ff-disabled="$ctrl.form.$pristine" ff-click="$ctrl.save()"><span translate="GLOBAL.BTN_SAVE"></span></ff-btn> <ff-btn sense="back" ff-click="$ctrl.back()"><span translate="GLOBAL.BTN_BACK"></span></ff-btn> </ff-btn-group> </div> </form> '},"20Qt":function(e,t,a){"use strict";a.r(t);var f=a("nbuU"),s=a.n(f),n=a("0zKI"),r=a.n(n),l=a("NOor"),c=a.n(l),i=(a("JBxO"),a("FdtR"),a("3dw1"),a("vWHn")),o=a("+l1P");t.default=angular.module("deskworks.members.checkInLog.list",["deskworks.checkInLog.service",i.a.name,o.a.name]).controller("CheckInLogCtrl",["$scope","$timeout","$translate","dwAlerts","state","helper","user","checkInLogService",function(e,t,a,f,n,l,i,o){var u=this;u.state=n,u.operations=[{id:"checkIn",name:a.instant("CHECK_IN_LOG.CHECK_IN")},{id:"checkOut",name:a.instant("CHECK_IN_LOG.CHECK_OUT")}],n.setPageTitle(a.instant("CHECK_IN_LOG.PAGE_TITLE",{userName:i.fullNameCompany})),u.fetch=function(e){return u.fetching=!0,o.getLog(n.getCurrentCenterId(),n.getCurrentUserId(),e||u.memberLog&&u.memberLog.page||1,100,u.mac||null).catch((function(e){return f.error(e,"Failed to query check-in log.")})).then((function(e){u.memberLog=e,angular.forEach(u.memberLog&&u.memberLog.log,(function(e){e.operation=s()(l).call(l,u.operations,e.operation)||u.operations[0]}))})).finally((function(){u.fetching=!1}))},u.fetch(),u.delete=function(e){return o.deleteLog(n.getCurrentCenterId(),n.getCurrentUserId(),e.id).catch((function(e){return f.error(e,"Failed to delete check-in log record.")})).then((function(){var a;r()(a=u.memberLog.log).call(a,c()(l).call(l,u.memberLog.log,e.id),1),0===u.memberLog.log.length&&t((function(){+u.memberLog.page>1?u.fetch(+u.memberLog.page-1):u.fetch(+u.memberLog.page)}),3e3)}))},u.create=function(){u.rec={id:"new",operation:u.operations[0],time:moment()},window.scrollTo(0,0)},u.save=function(){if(!l.pointFirstInvalid("#checkInLogRec"))return o.checkInOut(n.getCurrentCenterId(),n.getCurrentUserId(),u.rec.operation.id,u.rec.time).catch((function(e){return f.error(e,"Failed to save check-in log record.")})).then((function(e){return u.rec.id=e.id,u.rec=null,u.fetch()}))},u.setMac=function(e,t){e&&e.preventDefault(),u.mac!==t&&(u.mac=t,u.fetch(1))}}])},"2GOb":function(e,t){e.exports='<div class="usage-tracking" ff-bulk-read-only> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="gutter-v"> <ff-panel> <ff-row ng-if="!$ctrl.usage" class="animate-collapse"> <ff-spin class="ff-spin-placeholder"></ff-spin> </ff-row> <ff-static class="ff-no-frame" ng-if="$ctrl.usage && !$ctrl.usage.days.length"> <span translate="GLOBAL.NONE"></span> </ff-static> <ff-header ng-if="$ctrl.usage.days.length" class="ff-row"> <cell flex="0 1 120px" class="ff-right" translate="USAGE_TRACKING.DATE"></cell> <cell flex="1 1 25%" class="ff-right" translate="USAGE_TRACKING.USAGE_AMOUNT"></cell> <cell flex="1 1 25%" class="ff-right" translate="USAGE_TRACKING.CREDITS_APPLIED"></cell> <cell flex="1 1 12%" class="ff-center show-sm" translate="USAGE_TRACKING.REFILL"></cell> <cell flex="1 1 12%" class="ff-center" translate="USAGE_TRACKING.IS_BILLED"></cell> <ff-btn-group flex="0 0 auto" class="zero-height buttons-row"> <ff-btn sense="collapse" size="xs"></ff-btn> </ff-btn-group> </ff-header> <ff-col ng-repeat="day in $ctrl.usage.days"> <ff-row ng-class="{ active: !day.collapsed }" ff-click="day.collapsed = !day.collapsed"> <ff-static flex="0 1 120px" class="ff-right">{{::day.date | date:\'mediumDate\'}}</ff-static> <ff-static flex="1 1 25%" class="ff-right">{{::day.usageAmount | ncurrency}}</ff-static> <ff-static flex="1 1 25%" class="ff-right">{{::day.appliedAmount | ncurrency}}</ff-static> <ff-static flex="1 1 12%" class="ff-center show-sm">{{::day.refills.length | yesno}}</ff-static> <ff-static flex="1 1 12%" class="ff-center">{{::day.isBilled | yesno}}</ff-static> <ff-btn-group flex="0 0 auto" class="buttons-row"> <ff-btn sense="collapse" size="xs" ng-class="{ collapsed: day.collapsed }" ff-click="day.collapsed = !day.collapsed" title="{{\'USAGE_TRACKING.BTN_COLLAPSE.HINT\' | translate}}"></ff-btn> </ff-btn-group> </ff-row> <ff-row ng-if="!day.collapsed" class="animate-collapse usage-details"> <ff-col> <ff-header class="ff-row"> <cell flex="1 1 150px" class="show-lg" translate="USAGE_TRACKING.FACILITY"></cell> <cell flex="1 1 200px" translate="USAGE_TRACKING.PRODUCT"></cell> <cell flex="0 1 150px" class="show-lg" translate="USAGE_TRACKING.SOURCE"></cell> <cell flex="0 0 68px" class="ff-center show-md" translate="USAGE_TRACKING.FROM"></cell> <cell flex="0 0 68px" class="ff-center show-md" translate="USAGE_TRACKING.TO"></cell> <cell flex="0 0 64px" class="ff-right" translate="USAGE_TRACKING.HOURS"></cell> <cell flex="0 0 64px" class="ff-right" translate="USAGE_TRACKING.PASSES"></cell> <cell flex="0 1 110px" class="ff-right show-sm" translate="USAGE_TRACKING.PRICE"></cell> <cell flex="0 1 110px" class="ff-right" translate="USAGE_TRACKING.AMOUNT"></cell> </ff-header> <ff-header ng-if="::day.openingBalance.length"><span translate="USAGE_TRACKING.OPENING_BALANCE"></span></ff-header> <ff-row ng-repeat="usage in ::day.openingBalance"> <ff-static flex="1 1 150px" class="show-lg">{{$ctrl.centers[usage.centerId].name}}</ff-static> <ff-static flex="1 1 200px">{{$ctrl.products[usage.productId].name}}</ff-static> <ff-static flex="0 1 150px" class="show-lg">{{::usage.typeName}}</ff-static> <ff-static flex="0 0 68px" class="show-md"></ff-static> <ff-static flex="0 0 68px" class="show-md"></ff-static> <ff-static flex="0 0 64px" class="ff-right">{{::usage.hours}}</ff-static> <ff-static flex="0 0 64px" class="ff-right">{{::usage.passes}}</ff-static> <ff-static flex="0 1 110px" class="ff-right show-sm"></ff-static> <ff-static flex="0 1 110px" class="ff-right">{{::usage.amount | ncurrency}}</ff-static> </ff-row> <ff-header ng-if="::day.refills.length"><span translate="USAGE_TRACKING.REFILLS"></span></ff-header> <ff-row ng-repeat="usage in ::day.refills"> <ff-static flex="1 1 150px" class="show-lg">{{$ctrl.centers[usage.centerId].name}}</ff-static> <ff-static flex="1 1 200px">{{$ctrl.products[usage.productId].name}}</ff-static> <ff-static flex="0 1 150px" class="show-lg"></ff-static> <ff-static flex="0 0 68px" class="show-md"></ff-static> <ff-static flex="0 0 68px" class="show-md"></ff-static> <ff-static flex="0 0 64px" class="ff-right"></ff-static> <ff-static flex="0 0 64px" class="ff-right">{{::usage.passes}}</ff-static> <ff-static flex="0 1 110px" class="ff-right show-sm"></ff-static> <ff-static flex="0 1 110px" class="ff-right"></ff-static> <ff-btn-group flex="0 0 auto" class="buttons-row" style="position:absolute;left:calc(100% - .5px);top:2px"> <ff-btn size="xs" sense="delete" title="{{\'GLOBAL.BTN_DELETE\' | translate}}" ff-click="$ctrl.delete(day, usage)"></ff-btn> </ff-btn-group> </ff-row> <ff-header ng-if="::day.usages.length"><span translate="USAGE_TRACKING.USAGE_LOG"></span></ff-header> <ff-row ng-repeat="usage in ::day.usages"> <ff-static flex="1 1 150px" class="show-lg">{{$ctrl.centers[usage.centerId].name}}</ff-static> <ff-static flex="1 1 200px">{{$ctrl.products[usage.productId].name}}</ff-static> <ff-static flex="0 1 150px" class="show-lg">{{::usage.sourceName}}</ff-static> <ff-static flex="0 0 68px" class="show-md"><span nice-time="::usage.from"></span></ff-static> <ff-static flex="0 0 68px" class="show-md"><span nice-time="::usage.to"></span></ff-static> <ff-static flex="0 0 64px" class="ff-right">{{::usage.hours}}</ff-static> <ff-static flex="0 0 64px" class="ff-right"></ff-static> <ff-static flex="0 1 110px" class="ff-right show-sm"></ff-static> <ff-static flex="0 1 110px" class="ff-right"></ff-static> </ff-row> <ff-header ng-if="::day.usageTotals.length"><span translate="USAGE_TRACKING.USAGE_TOTALS"></span></ff-header> <ff-row ng-repeat="usage in ::day.usageTotals"> <ff-static flex="1 1 150px" class="show-lg">{{$ctrl.centers[usage.centerId].name}}</ff-static> <ff-static flex="1 1 200px">{{$ctrl.products[usage.productId].name}}</ff-static> <ff-static flex="0 1 150px" class="show-lg"></ff-static> <ff-static flex="0 0 68px" class="show-md"></ff-static> <ff-static flex="0 0 68px" class="show-md"></ff-static> <ff-static flex="0 0 64px" class="ff-right">{{::usage.hours}}</ff-static> <ff-static flex="0 0 64px" class="ff-right">{{::usage.passes}}</ff-static> <ff-static flex="0 1 110px" class="ff-right show-sm">{{::usage.price | ncurrency}}</ff-static> <ff-static flex="0 1 110px" class="ff-right">{{::usage.amount | ncurrency}}</ff-static> </ff-row> <ff-header ng-if="::day.creditsApplied.length"><span translate="USAGE_TRACKING.CREDITS_APPLIED"></span></ff-header> <ff-row ng-repeat="usage in ::day.creditsApplied"> <ff-static flex="1 1 150px" class="show-lg">{{$ctrl.centers[usage.centerId].name}}</ff-static> <ff-static flex="1 1 200px">{{$ctrl.products[usage.productId].name}}</ff-static> <ff-static flex="0 1 150px" class="show-lg">{{::usage.typeName}}</ff-static> <ff-static flex="0 0 68px" class="show-md"></ff-static> <ff-static flex="0 0 68px" class="show-md"></ff-static> <ff-static flex="0 0 64px" class="ff-right">{{::usage.hours}}</ff-static> <ff-static flex="0 0 64px" class="ff-right">{{::usage.passes}}</ff-static> <ff-static flex="0 1 110px" class="ff-right show-sm"></ff-static> <ff-static flex="0 1 110px" class="ff-right">{{::usage.amount | ncurrency}}</ff-static> </ff-row> <ff-row class="usage-to-charge"> <ff-static flex="auto" class="ff-right"><strong translate="USAGE_TRACKING.USAGE_TO_CHARGE"></strong></ff-static> <ff-static flex="0 1 110px" class="ff-right">{{::day.chargeAmount | ncurrency}}</ff-static> </ff-row> <ff-header ng-if="::day.closingBalance.length"><span translate="USAGE_TRACKING.CLOSING_BALANCE"></span></ff-header> <ff-row ng-repeat="usage in ::day.closingBalance"> <ff-static flex="1 1 150px" class="show-lg">{{$ctrl.centers[usage.centerId].name}}</ff-static> <ff-static flex="1 1 200px">{{$ctrl.products[usage.productId].name}}</ff-static> <ff-static flex="0 1 150px" class="show-lg">{{::usage.typeName}}</ff-static> <ff-static flex="0 0 68px" class="show-md"></ff-static> <ff-static flex="0 0 68px" class="show-md"></ff-static> <ff-static flex="0 0 64px" class="ff-right">{{::usage.hours}}</ff-static> <ff-static flex="0 0 64px" class="ff-right">{{::usage.passes}}</ff-static> <ff-static flex="0 1 110px" class="ff-right show-sm"></ff-static> <ff-static flex="0 1 110px" class="ff-right">{{::usage.amount | ncurrency}}</ff-static> </ff-row> </ff-col> <ff-btn-group flex="0 0 auto" class="zero-height buttons-row"> <ff-btn sense="collapse" size="xs"></ff-btn> </ff-btn-group> </ff-row> </ff-col> <ff-pagination props="$ctrl.usage" ff-click="$ctrl.navPage($page)" ng-if="$ctrl.usage.pageCount > 1"></ff-pagination> </ff-panel> </div> </div> '},"3/40":function(e,t){e.exports='<div class="view-usage" ff-bulk-read-only> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="gutter-v"> <ff-panel ng-if="$ctrl.inactiveCount"> <label> <ff-checkbox name="show-inactive" ff-model="$ctrl.showInactive"> <span translate="MEMBER_USAGE.SHOW_INACTIVE"></span> </ff-checkbox> </label> </ff-panel> <ff-panel ng-if="!$ctrl.memberUsageList.length || $ctrl.inactiveCount === $ctrl.memberUsageList.length && !$ctrl.showInactive"> <span translate="MEMBER_USAGE.EMPTY"></span> </ff-panel> <ff-panel ng-repeat="memberUsage in ::$ctrl.memberUsageList" ng-if="memberUsage.status === \'active\' || $ctrl.showInactive"> <ff-panel-header> <div class="ff-grid ff-gutter-v-half"> <span flex="{lg: \'1 1 auto\'}">{{::memberUsage.productName}}</span> <span flex="{lg: \'0 0 auto\'}">{{::memberUsage.passProductName}}</span> </div> </ff-panel-header> <ff-header class="pass-balance"> <span translate="MEMBER_USAGE.PASS_BALANCE" translate-values="{ passBalance: (memberUsage.passBalance | nd) }"></span> </ff-header> <ff-header class="usage-header" ng-if="::memberUsage.usages.length"> <cell flex="0 1 18%" class="ff-center" translate="MEMBER_USAGE.DATE"></cell> <cell flex="0 1 30%" class="ff-center ff-col" translate="MEMBER_USAGE.RESERVATION_DURATION"></cell> <cell flex="0 1 30%" class="ff-center ff-col" translate="MEMBER_USAGE.USAGE_DURATION"></cell> <cell flex="0 1 30%" class="ff-center ff-col" translate="MEMBER_USAGE.BILLING"></cell> <cell flex="0 1 72px" class="ff-center show-sm" ng-if="::!memberUsage.isBucket" translate="MEMBER_USAGE.IS_BILLED"></cell> <ff-btn-group flex="0 0 auto" class="zero-height"> <ff-btn sense="collapse" size="xs"></ff-btn> </ff-btn-group> </ff-header> <ff-static class="ff-no-frame" ng-if="::!memberUsage.usages.length"> <span translate="GLOBAL.NONE"></span> </ff-static> <ff-col ng-repeat="usage in memberUsage.usages" ng-init="usage.collapsed = true"> <ff-row ng-class="{active: !usage.collapsed}" ff-click="usage.collapsed = !usage.collapsed" ng-if="!usage.passIncome"> <ff-static flex="0 1 18%" class="ff-center" ff-bind="::usage.date | date:\'mediumDate\'"></ff-static> <ff-static flex="0 1 30%" class="ff-center" ff-bind="::(usage.reservationDurationHours | nd) + \' / \' + (usage.reservationDurationUnits | nd)"></ff-static> <ff-static flex="0 1 30%" class="ff-center" ff-bind="::(usage.usageDurationHours | nd) + \' / \' + (usage.usageDurationUnits | nd)"></ff-static> <ff-static flex="0 1 30%" class="ff-center" ff-bind="::(usage.billingAmount | ncurrency) + \' / \' + (usage.billingPasses || 0)"></ff-static> <ff-static flex="0 1 72px" class="ff-center show-sm" ff-bind="::usage.isBilled | yesno" ng-if="::!memberUsage.isBucket"></ff-static> <ff-btn-group flex="0 0 auto"> <ff-btn sense="collapse" size="xs" ng-class="{ collapsed: usage.collapsed }" ff-click="usage.collapsed = !usage.collapsed" title="{{\'MEMBER_USAGE.BTN_COLLAPSE.HINT\' | translate}}"> </ff-btn> </ff-btn-group> </ff-row> <ff-row ng-collapse="usage.collapsed" ng-if="!usage.passIncome"> <ff-col> <div class="ff-grid gutter-h-half"> <div flex="{lg: \'0 0 50%\'}" class="log-container"> <ff-col> <ff-col> <ff-header class="log-block-header"><span translate="MEMBER_USAGE.RESERVATION_LOG"></span></ff-header> <ff-header class="log-header" ng-if="::usage.reservationLog.length"> <ff-row> <span class="show-xs" translate="MEMBER_USAGE.FROM"></span> <span class="show-xs" translate="MEMBER_USAGE.TO"></span> <span class="ff-center" translate="MEMBER_USAGE.DURATION_HOURS"></span> <span class="ff-center" translate="MEMBER_USAGE.DURATION_PASSES"></span> <span class="ff-right" translate="MEMBER_USAGE.AMOUNT"></span> </ff-row> </ff-header> <ff-row ng-repeat="log in ::usage.reservationLog"> <ff-static class="show-xs"><span nice-time="::log.startTime"></span></ff-static> <ff-static class="show-xs"><span nice-time="::log.endTime"></span></ff-static> <ff-static class="ff-center" ff-bind="::log.durationHours"></ff-static> <ff-static class="ff-center" ff-bind="::log.durationUnits"></ff-static> <ff-static class="ff-right" ff-bind="::log.amount | ncurrency"></ff-static> </ff-row> <ff-static ng-if="::!usage.reservationLog.length" class="ff-no-frame"> <span translate="GLOBAL.NONE"></span> </ff-static> </ff-col> </ff-col> </div> <div flex="{lg: \'0 0 50%\'}" class="log-container"> <ff-col> <ff-col> <ff-header class="log-block-header"><span translate="MEMBER_USAGE.USAGE_LOG"></span></ff-header> <ff-header class="log-header" ng-if="::usage.checkInLog.length"> <ff-row> <span class="show-xs" translate="MEMBER_USAGE.FROM"></span> <span class="show-xs" translate="MEMBER_USAGE.TO"></span> <span class="ff-center" translate="MEMBER_USAGE.DURATION_HOURS"></span> <span class="ff-center" translate="MEMBER_USAGE.DURATION_PASSES"></span> <span class="ff-right" translate="MEMBER_USAGE.AMOUNT"></span> </ff-row> </ff-header> <ff-row ng-repeat="log in ::usage.checkInLog"> <ff-static class="show-xs"><span nice-time="::log.startTime"></span></ff-static> <ff-static class="show-xs"><span nice-time="::log.endTime"></span></ff-static> <ff-static class="ff-center" ff-bind="::log.durationHours"></ff-static> <ff-static class="ff-center" ff-bind="::log.durationUnits"></ff-static> <ff-static class="ff-right" ff-bind="::log.amount | ncurrency"></ff-static> </ff-row> <ff-static ng-if="::!usage.checkInLog.length" class="ff-no-frame"> <span translate="GLOBAL.NONE"></span> </ff-static> </ff-col> </ff-col> </div> </div> </ff-col> <ff-btn-group flex="0 0 auto" class="zero-height"> <ff-btn sense="collapse" size="xs"></ff-btn> </ff-btn-group> </ff-row> <ff-row ng-if="usage.passIncome"> <ff-static flex="0 1 25%" ff-bind="::usage.date | date:\'mediumDate\'"></ff-static> <ff-label flex="0 1 75%" class="ff-right em">{{\'+\' + usage.passIncome | passes}}</ff-label> <ff-static flex="0 1 15px"></ff-static> <ff-static flex="0 1 72px" class="ff-center" ng-if="::!memberUsage.isBucket">-</ff-static> <ff-btn-group flex="0 0 auto"> <ff-btn sense="remove" size="xs" ff-click="$ctrl.delete(memberUsage, usage)"> <span translate="GLOBAL.BTN_DELETE"></span> </ff-btn> </ff-btn-group> </ff-row> </ff-col> <ff-pagination props="memberUsage" ff-click="$ctrl.navPage(memberUsage, $page)" ng-if="memberUsage.pageCount > 1"></ff-pagination> </ff-panel> </div> </div> '},"3CGw":function(e,t,a){},"4pnD":function(e,t,a){"use strict";a.r(t);a("3dw1"),a("Muwe"),a("y89P");var f=a("yCd9"),s=a.n(f),n=a("lRNC"),r=a.n(n),l=["$injector",function(e){var t,f,n=(t=a("ALy3"),s()(f=r()(t).call(t)).call(f,t));e.loadNewModules(s()(n).call(n,(function(e){return e.default.name}))),e.invoke(["$templateCache",function(e){var t=a("IhB+");r()(t).call(t).forEach((function(a){return e.put(a.replace(/^\.\//,""),t(a))}))}])}];t.default=l},ALy3:function(e,t,a){var f={"./check-in-log/check-in-log.controller.js":"20Qt","./manual-check-in-log/manual-check-in-log.controller.js":"MGlp","./usage-entry/usage-entry-edit.controller.js":"JzwU","./usage-entry/usage-entry-list.controller.js":"Dfvh","./usage-tracking/usage-tracking.controller.js":"U6Wo","./view-usage/view-usage.controller.js":"DgEK"};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(f,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return f[e]}s.keys=function(){return Object.keys(f)},s.resolve=n,e.exports=s,s.id="ALy3"},BGir:function(e,t,a){"use strict";var f=a("03wM"),s=a.n(f),n=a("Ekwr"),r=a.n(n),l=a("hsT8"),c=a.n(l),i=a("lvz6"),o=a.n(i),u=a("yKah"),g=a.n(u),d=a("fzuT"),p=a.n(d),m=a("nbuU"),h=a.n(m),E=(a("3dw1"),angular.module("deskworks.optsUsageSource",[]).factory("optsUsageSource",["$rootScope","$translate",function(e,t){var a=[{id:"reservation",_name:"USAGE_TRACKING.SOURCE.RESERVATION"},{id:"network",_name:"USAGE_TRACKING.SOURCE.NETWORK"},{id:"manual",_name:"USAGE_TRACKING.SOURCE.MANUAL"}];function f(){a.forEach((function(e){e.name=t.instant(e._name)}))}return f(),e.$on("$setTranslationsSuccess",f),a}])),x=angular.module("deskworks.optsCreditType",[]).factory("optsCreditType",["$rootScope","$translate",function(e,t){var a=[{id:"reservation",_name:"USAGE_TRACKING.CREDIT_TYPE.RESERVATION"},{id:"pass",_name:"USAGE_TRACKING.CREDIT_TYPE.PASS"},{id:"bucket",_name:"USAGE_TRACKING.CREDIT_TYPE.BUCKET"}];function f(){a.forEach((function(e){e.name=t.instant(e._name)}))}return f(),e.$on("$setTranslationsSuccess",f),a}]);function b(e,t){var a=s()(e);if(r.a){var f=r()(e);t&&(f=c()(f).call(f,(function(t){return o()(e,t).enumerable}))),a.push.apply(a,f)}return a}t.a=angular.module("deskworks.UsageTracking",["ngResource","deskworks.config","datesDeserializer",E.name,x.name]).factory("UsageTracking",["$resource","$filter","$timeout","deskworksConfig","helper","datesDeserializer","optsUsageSource","optsCreditType",function(e,t,a,f,s,n,r,l){var c=n(["days.date","days.usages.from","days.usages.to"]),i=e(f.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/usage-tracking/:usageId"),{},{query:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,c]}});return{query:function(e){return i.query(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){p()(e,t,a[t])})):g.a?Object.defineProperties(e,g()(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,o()(a,t))}))}return e}({page:1,pageSize:20},e)).$promise.then((function(e){return angular.forEach(e.days,(function(e){e.usages.forEach((function(e){e.sourceName=(h()(r).call(r,(function(t){return t.id===e.sourceId}))||{}).name||e.sourceId})),e.usageAmount=s.round(e.usageTotals.reduce((function(e,t){return+t.amount+e}),0)),e.appliedAmount=s.round(e.creditsApplied.reduce((function(e,t){return+t.amount+e}),0)),u(e.openingBalance),u(e.creditsApplied),u(e.closingBalance)})),e}))},delete:function(e){return i.delete(e).$promise}};function u(e){e.forEach((function(e){angular.isDefined(e.passes)?e.typeId="pass":angular.isDefined(e.bucketPasses)?(e.typeId="bucket",e.passes=e.bucketPasses,delete e.bucketPasses):e.typeId="reservation",e.typeName=(h()(l).call(l,(function(t){return t.id===e.typeId}))||{}).name}))}}])},Dfvh:function(e,t,a){"use strict";a.r(t);var f=a("0zKI"),s=a.n(f),n=a("+l1P");t.default=angular.module("deskworks.UsageEntryListCtrl",["deskworks.usageEntryService",n.a.name]).controller("UsageEntryListCtrl",["$scope","$timeout","$translate","dwAlerts","usageList","user","usageEntryService","state","helper",function(e,t,a,f,n,r,l,c,i){var o=this;o.usageList=n,c.setPageTitle(a.instant("USAGE_ENTRY.PAGE_TITLE",{userName:r.fullNameCompany})),o.create=function(){return c.setPath("/usage-entry/new")},o.delete=function(e){if(confirm("Are you sure to delete the usage?"))return l.delete(c.getCurrentCenterId(),c.getCurrentUserId(),e.id).catch((function(e){return f.error(e,"Failed to delete usage entry.")})).then((function(){var a;if(s()(a=o.usageList.usages).call(a,i.findIndexByKeyValue(o.usageList.usages,"id",e.id),1),0===o.usageList.usages.length)return t((function(){return+o.usageList.page>1?o.navPage(+o.usageList.page-1):o.navPage(+o.usageList.page)}),3e3)}))},o.navPage=function(e){return l.query(c.getCurrentCenterId(),c.getCurrentUserId(),e,15).catch((function(e){return f.error(e,"Failed to query usage entry.")})).then((function(e){return o.usageList=e}))}}])},DgEK:function(e,t,a){"use strict";a.r(t);a("3CGw");var f=a("+l1P");t.default=angular.module("deskworks.ViewUsageCtrl",["deskworks.memberUsageService",f.a.name]).controller("ViewUsageCtrl",["$scope","$translate","dwAlerts","memberUsageList","state","helper","user","memberUsageService",function(e,t,a,f,s,n,r,l){var c=this;s.setPageTitle(t.instant("MEMBER_USAGE.PAGE_TITLE",{userName:r.fullNameCompany})),c.memberUsageList=f,c.inactiveCount=c.memberUsageList.reduce((function(e,t){return"inactive"===t.status?++e:e}),0),c.navPage=function(e,t){return l.get(s.getCurrentCenterId(),s.getCurrentUserId(),e.id,t).catch((function(e){return a.error(e,"Failed to query member usages.")})).then((function(t){return angular.copy(t,e)}))},c.delete=function(e,t){return l.deletePassRefill(s.getCurrentCenterId(),s.getCurrentUserId(),e.id,t.id).catch((function(e){return a.error(e,"Failed to remove pass refill.")})).then((function(t){return c.navPage(e,e.page)}))}}])},ETuO:function(e,t){e.exports='<div id="checkInLog" ng-if="!$ctrl.rec" ff-bulk-read-only> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="gutter-v"> <ff-btn-group> <ff-btn sense="new" ff-click="$ctrl.create()"><span translate="CHECK_IN_LOG.BTN_CREATE"></span></ff-btn> </ff-btn-group> <ff-panel ff-dim="$ctrl.fetching"> <ff-row class="ff-bmargin ff-read-only-ignore" ng-if="state.isLoggedAdmin()"> <label flex="auto"> <span flex="0 0 120px" class="em" translate="CHECK_IN_LOG.FILTER_BY_MAC" style="align-self:center"></span> <ff-text flex="1 1 1%" placeholder="00:00:00:00:00:00" ff-model="$ctrl.mac" ff-model-options="{ debounce: 500 }" ff-change="$ctrl.fetch()"></ff-text> </label> <ff-btn-group flex="none" class="buttons-row" ng-show="$ctrl.mac"> <ff-btn sense="delete" size="xs" ff-click="$ctrl.setMac()" title="{{\'GLOBAL.BTN_CANCEL\' | translate}}"></ff-btn> </ff-btn-group> </ff-row> <span translate="CHECK_IN_LOG.EMPTY" ng-if="!$ctrl.memberLog || $ctrl.memberLog.pageCount === 0"></span> <ff-header ng-if="$ctrl.memberLog.pageCount > 0"> <ff-row> <cell flex="3 0 55px"><span translate="CHECK_IN_LOG.TIME"></span></cell> <cell flex="2 0 45px"><span translate="CHECK_IN_LOG.ACTION"></span></cell> <cell flex="4 0 1px" class="show-xs" ng-if="state.isLoggedAdmin()"><span translate="CHECK_IN_LOG.LOGIN"></span></cell> <cell flex="4 0 1px" class="show-sm" ng-if="state.isLoggedAdmin()"><span translate="CHECK_IN_LOG.MAC"></span></cell> <ff-btn-group flex="none" class="buttons-row zero-height" ng-if="state.isLoggedAdmin()"> <ff-btn sense="remove" size="xs"></ff-btn> </ff-btn-group> </ff-row> </ff-header> <ff-row ng-repeat="rec in $ctrl.memberLog.log"> <ff-static flex="3 0 55px"> <span ng-bind="rec.time | date:\'mediumDate\'" style="font-size:.9em"></span>&nbsp;&nbsp;<span nice-time="rec.time"></span> </ff-static> <ff-static flex="2 0 45px"><ff-icon sense="rec.operation.id + \'Status\'"></ff-icon>&nbsp;&nbsp;{{rec.operation.name}}</ff-static> <ff-static flex="4 0 1px" class="show-xs" ff-bind="rec.login" ng-if="state.isLoggedAdmin()"></ff-static> <ff-static flex="4 0 1px" class="show-sm" ng-if="state.isLoggedAdmin()"> <a href="#" ng-click="$ctrl.setMac($event, rec.macAddress)" ng-bind="rec.macAddress"></a> </ff-static> <ff-btn-group flex="0 0 auto" class="buttons-row" ng-if="state.isLoggedAdmin()"> <ff-btn sense="remove" size="xs" ff-click="$ctrl.delete(rec)" title="{{\'GLOBAL.BTN_DELETE\' | translate}}"></ff-btn> </ff-btn-group> </ff-row> <ff-pagination props="$ctrl.memberLog" ff-click="$ctrl.fetch($page)"></ff-pagination> </ff-panel> <ff-btn-group ng-if="state.isLoggedAdmin() && $ctrl.memberLog.log.length > 0"> <ff-btn sense="new" ff-click="$ctrl.create()"><span translate="CHECK_IN_LOG.BTN_CREATE"></span></ff-btn> </ff-btn-group> </div> </div> <form name="formCheckInLogRec" id="checkInLogRec" ng-if="$ctrl.rec" ff-bulk-read-only> <h1 class="page-title"><span translate="CHECK_IN_LOG.NEW.PAGE_TITLE"></span></h1> <div class="ff-grid gutter-v"> <ff-panel style="max-width:400px"> <dw-date-time label-flex="0 0 100px" ff-model="$ctrl.rec.time" ff-required="true" ff-label="{{\'CHECK_IN_LOG.TIME\' | translate}}" ff-validate-alert="{{\'CHECK_IN_LOG.TIME\' | translate}}"></dw-date-time> <label class="ff-row"> <ff-label flex="0 0 100px"><req translate="CHECK_IN_LOG.ACTION"></req></ff-label> <ff-select ff-model="$ctrl.rec.operation" ff-required="true" ff-options="operation.name for operation in $ctrl.operations" ff-validate-alert="{{\'CHECK_IN_LOG.ACTION\' | translate}}"></ff-select> </label> </ff-panel> <ff-btn-group> <ff-btn type="submit" sense="save" ff-click="$ctrl.save()"><span translate="GLOBAL.BTN_SAVE"></span></ff-btn> <ff-btn sense="back" ff-click="$ctrl.rec = null"><span translate="GLOBAL.BTN_BACK"></span></ff-btn> </ff-btn-group> </div> </form> '},"IhB+":function(e,t,a){var f={"./check-in-log/check-in-log.tpl.html":"ETuO","./manual-check-in-log/manual-check-in-log.tpl.html":"VETU","./usage-entry/usage-entry-edit.tpl.html":"/Ofy","./usage-entry/usage-entry-list.tpl.html":"POzD","./usage-tracking/usage-tracking.tpl.html":"2GOb","./view-usage/view-usage.tpl.html":"3/40"};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(f,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return f[e]}s.keys=function(){return Object.keys(f)},s.resolve=n,e.exports=s,s.id="IhB+"},JzwU:function(e,t,a){"use strict";a.r(t);var f=a("vWHn");t.default=angular.module("deskworks.UsageEntryEditCtrl",["deskworks.usageEntryService",f.a.name]).controller("UsageEntryEditCtrl",["$scope","$filter","$timeout","$route","$translate","dwAlerts","usage","user","usageEntryService","state","helper",function(e,t,a,f,s,n,r,l,c,i,o){var u=this;e.backPath="/usage-entry",i.setPageTitle(s.instant("USAGE_ENTRY.NEW.PAGE_TITLE",{userName:l.fullNameCompany})),u.editingUsage=r,"new"===r.id&&a((function(){return u.form.$setDirty()})),e.$watch("$ctrl.editingUsage.checkInTime",(function(e,t){moment.isMoment(e)&&moment.isMoment(t)&&(e.date()===t.date()&&e.month()===t.month()&&e.year()===t.year()||(u.editingUsage.checkOutTime=moment([e.year(),e.month(),e.date(),u.editingUsage.checkOutTime.hour()||e.hour(),u.editingUsage.checkOutTime.minute()||e.minute(),0,0])))})),u.back=function(){return i.setPath("/usage-entry")},u.save=function(){if(!o.pointFirstInvalid("#usageEntryEdit"))return c.save(i.getCurrentCenterId(),i.getCurrentUserId(),u.editingUsage).catch((function(e){return n.error(e,"Failed to save usage entry.")})).then((function(){u.form.$setPristine(),f.reload()}))}}])},MGlp:function(e,t,a){"use strict";a.r(t);var f=a("nbuU"),s=a.n(f),n=a("0zKI"),r=a.n(n),l=a("NOor"),c=a.n(l),i=(a("JBxO"),a("FdtR"),a("3dw1"),a("vWHn")),o=a("+l1P"),u=angular.module("deskworks.ManualCheckInLog",["ngResource","deskworks.config","datesDeserializer"]).factory("ManualCheckInLog",["$resource","$filter","$timeout","deskworksConfig","datesDeserializer",function(e,t,a,f,s){var n=s(["log.time"]),r=e(f.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/manual-check-in-logs/:logId"),{},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,n]}});return{get:function(e){var t=e.centerId,a=e.userId,f=e.page,s=e.pageSize,n=e.macAddress;return r.get({centerId:t,userId:a,page:f,pageSize:s,macAddress:n}).$promise},delete:function(e){var t=e.centerId,a=e.userId,f=e.logId;return r.delete({centerId:t,userId:a,logId:f}).$promise},save:function(e){var a=e.centerId,f=e.userId,s=e.recurringId,n=e.checkedIn,l=e.time;return r.save({centerId:a,userId:f},{recurringId:s,checkedIn:n,time:t("date")(l,"iso")}).$promise}}}]),g=a("5vv4");t.default=angular.module("deskworks.ManualCheckInLogCtrl",["session","deskworks.checkInLog.service",i.a.name,o.a.name,u.name,g.a.name]).controller("ManualCheckInLogCtrl",["$scope","$timeout","$translate","dwAlerts","state","helper","session","user","ManualCheckInLog","ManualCheckIn",function(e,t,a,f,n,l,i,o,u,g){var d=this;d.operations=[{id:"checkIn",name:a.instant("CHECK_IN_LOG.CHECK_IN"),value:!0},{id:"checkOut",name:a.instant("CHECK_IN_LOG.CHECK_OUT"),value:!1}],d.isAdmin=function(){return i.isAdmin()},d.onInit=function(){n.setPageTitle(a.instant("CHECK_IN_LOG.MANUAL.PAGE_TITLE",{userName:o.fullNameCompany})),d.fetch(),g.query({centerId:n.getCurrentCenterId(),userId:n.getCurrentUserId()}).catch((function(e){return f.error(e,"Failed to query check-in log.")})).then((function(e){d.rbs=e}))},d.fetch=function(e){return d.fetching=!0,u.get({centerId:n.getCurrentCenterId(),userId:n.getCurrentUserId(),page:e||(d.data?d.data.page:1),pageSize:30,mac:d.mac||null}).catch((function(e){return f.error(e,"Failed to query check-in log.")})).then((function(e){d.data=e,d.data.log.forEach((function(e){var t;e.$$op=s()(t=d.operations).call(t,(function(t){return t.value===e.checkedIn}))}))})).finally((function(){d.fetching=!1}))},d.delete=function(e){return u.delete({centerId:n.getCurrentCenterId(),userId:n.getCurrentUserId(),logId:e.id}).catch((function(e){return f.error(e,"Failed to delete check-in log record.")})).then((function(){var t,a;r()(t=d.data.log).call(t,c()(a=d.data.log).call(a,(function(t){return t.id===e.id})),1),0===d.data.log.length&&(+d.data.page>1?d.fetch(+d.data.page-1):d.fetch(+d.data.page))}))},d.create=function(){if(!d.rbs||!d.rbs.length)return f.error("User has no recurring billings to check in.");d.rec={time:moment(),recurringId:d.rbs[0].id,$$op:d.operations[0]},window.scrollTo(0,0)},d.save=function(){if(!l.pointFirstInvalid("#manualCheckInLogRec"))return u.save({centerId:n.getCurrentCenterId(),userId:n.getCurrentUserId(),recurringId:d.rec.recurringId,checkedIn:"checkIn"===d.rec.$$op.id,time:d.rec.time}).catch((function(e){return f.error(e,"Failed to save check-in log record.")})).then((function(e){return d.rec.id=e.id,d.rec=null,d.fetch()}))},d.onInit()}])},POzD:function(e,t){e.exports='<div class="usage-entry" ff-bulk-read-only> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="gutter-v"> <ff-btn-group ng-if="state.isLoggedAdmin() && $ctrl.usageList.usages.length > 0"> <ff-btn sense="new" ff-click="$ctrl.create()"><span translate="USAGE_ENTRY.BTN_CREATE"></span></ff-btn> </ff-btn-group> <ff-panel ng-if="$ctrl.usageList.pageCount === 0"><span translate="USAGE_ENTRY.EMPTY"></span></ff-panel> <ff-panel ng-if="$ctrl.usageList.pageCount > 0"> <ff-header> <ff-row> <cell flex="2 0 15%" class="ff-center"><span translate="USAGE_ENTRY.DATE"></span></cell> <cell flex="2 0 15%" class="ff-center"><span translate="USAGE_ENTRY.CHECK_IN_TIME"></span></cell> <cell flex="2 0 15%" class="ff-center"><span translate="USAGE_ENTRY.CHECK_OUT_TIME"></span></cell> <cell flex="5 1 40%" class="ff-center show-sm"><span translate="USAGE_ENTRY.NOTES"></span></cell> <cell flex="1 0 15%" class="ff-center"><ff-col translate="USAGE_ENTRY.USAGE"></ff-col></cell> <ff-btn-group flex="0 0 auto" class="buttons-row zero-height" ng-if="state.isLoggedAdmin()"> <ff-btn sense="remove" size="xs"></ff-btn> </ff-btn-group> </ff-row> </ff-header> <ff-row ng-repeat="usage in $ctrl.usageList.usages"> <ff-static flex="2 0 15%" class="ff-center" ff-bind="(usage.checkInTime || usage.checkOutTime) | date:\'mediumDate\'"></ff-static> <ff-static flex="2 0 15%" class="ff-center"><span nice-time="usage.checkInTime"></span></ff-static> <ff-static flex="2 0 15%" class="ff-center"><span nice-time="usage.checkOutTime"></span></ff-static> <ff-static flex="5 1 40%" class="ff-center show-sm" ff-bind="usage.notes | nd"></ff-static> <ff-static flex="1 0 15%" class="ff-center" ff-bind="(usage.usageDurationHours | nd) + \' / \' + (usage.usageDurationUnits | nd)"></ff-static> <ff-btn-group flex="0 0 auto" class="buttons-row" ng-if="state.isLoggedAdmin()"> <ff-btn sense="remove" size="xs" ff-click="$ctrl.delete(usage)" title="{{\'GLOBAL.BTN_DELETE\' | translate}}"></ff-btn> </ff-btn-group> </ff-row> <ff-pagination props="$ctrl.usageList" ff-click="$ctrl.navPage($page)" ng-if="$ctrl.usageList.pageCount > 1"></ff-pagination> </ff-panel> <ff-btn-group ng-if="state.isLoggedAdmin()"> <ff-btn sense="new" ff-click="$ctrl.create()"><span translate="USAGE_ENTRY.BTN_CREATE"></span></ff-btn> </ff-btn-group> </div> </div> '},U6Wo:function(e,t,a){"use strict";a.r(t);var f=a("nbuU"),s=a.n(f),n=(a("3dw1"),a("nhGK"),a("+l1P")),r=a("BGir");t.default=angular.module("deskworks.UsageTrackingCtrl",["deskworks.inventory.product.service","deskworks.center.service",r.a.name,n.a.name]).controller("UsageTrackingCtrl",["$scope","$translate","dwAlerts","state","helper","user","UsageTracking","productService","centerService",function(e,t,a,f,n,r,l,c,i){var o=this;f.setPageTitle(t.instant("USAGE_TRACKING.PAGE_TITLE",{userName:r.fullNameCompany})),o.onInit=function(){o.navPage(1),i.getCenters().catch((function(e){return a.error(e,"Failed to query centers.")})).then((function(e){o.centers=e.reduce((function(e,t){return e[t.id]=t,e}),{}),o.centers[0]={id:0,name:t.instant("USAGE_TRACKING.FACILITY.ALL")}})),c.getProducts().catch((function(e){return a.error(e,"Failed to query products.")})).then((function(e){o.products=e.reduce((function(e,t){return e[t.id]=t,e}),{})}))},o.navPage=function(e){return l.query({centerId:f.getCurrentCenterId(),userId:f.getCurrentUserId(),page:e}).catch((function(e){return a.error(e,"Failed to query member usages.")})).then((function(e){o.usage=e,o.usage.days.forEach((function(e){e.collapsed=!0}))}))},o.delete=function(e,t){return l.delete({centerId:f.getCurrentCenterId(),userId:f.getCurrentUserId(),usageId:t.id}).catch((function(e){return a.error(e,"Failed to delete bucket refill.")})).then((function(){return o.navPage(o.usage.page)})).then((function(){var t,a=s()(t=o.usage.days).call(t,(function(t){return t.date.valueOf()===e.date.valueOf()}));a&&(a.collapsed=e.collapsed)}))},o.onInit()}])},VETU:function(e,t){e.exports='<div id="manualCheckInLog" ng-if="!$ctrl.rec" ff-bulk-read-only> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="gutter-v" style="max-width:720px"> <ff-panel ff-dim="$ctrl.fetching"> <span translate="CHECK_IN_LOG.EMPTY" ng-if="$ctrl.data && $ctrl.data.pageCount === 0"></span> <ff-header ng-if="$ctrl.data.pageCount > 0"> <ff-row> <cell flex="1 0 95px"><span translate="CHECK_IN_LOG.TIME"></span></cell> <cell flex="0 0 110px"><span translate="CHECK_IN_LOG.ACTION"></span></cell> <cell flex="6 1 5px" class="show-xs"><span translate="CHECK_IN_LOG.NAME"></span></cell> <ff-btn-group flex="none" class="buttons-row zero-height" ng-if="$ctrl.isAdmin()"> <ff-btn sense="remove" size="xs"></ff-btn> </ff-btn-group> </ff-row> </ff-header> <ff-row ng-repeat="rec in $ctrl.data.log"> <ff-static flex="1 0 95px"> <span><span ng-bind="rec.time | date:\'mediumDate\'" style="font-size:.9em"></span> <span nice-time="rec.time"></span></span> </ff-static> <ff-static flex="0 0 110px"><ff-icon sense="rec.$$op.id + \'Status\'"></ff-icon>&nbsp;&nbsp;{{rec.$$op.name}}</ff-static> <ff-static flex="6 1 5px" class="show-xs" ff-bind="rec.name"></ff-static> <ff-btn-group flex="0 0 auto" class="buttons-row" ng-if="$ctrl.isAdmin()"> <ff-btn sense="remove" size="xs" ff-click="$ctrl.delete(rec)" title="{{\'GLOBAL.BTN_DELETE\' | translate}}"></ff-btn> </ff-btn-group> </ff-row> <ff-pagination props="$ctrl.data" ff-click="$ctrl.fetch($page)" ng-if="$ctrl.data.pageCount > 1"></ff-pagination> </ff-panel> <ff-btn-group ng-if="$ctrl.isAdmin()"> <ff-btn sense="new" ff-click="$ctrl.create()"><span translate="CHECK_IN_LOG.BTN_CREATE"></span></ff-btn> </ff-btn-group> </div> </div> <form id="manualCheckInLogRec" ng-if="$ctrl.rec" ff-bulk-read-only> <h1 class="page-title"><span translate="CHECK_IN_LOG.NEW.PAGE_TITLE"></span></h1> <div class="ff-grid gutter-v" style="max-width:400px"> <ff-panel> <dw-date-time label-flex="0 0 100px" ff-model="$ctrl.rec.time" ff-required="true" ff-label="{{\'CHECK_IN_LOG.TIME\' | translate}}" ff-validate-alert="{{\'CHECK_IN_LOG.TIME\' | translate}}"></dw-date-time> <label class="ff-row"> <ff-label flex="0 0 100px"><req translate="CHECK_IN_LOG.NAME"></req></ff-label> <ff-select ff-model="$ctrl.rec.recurringId" ff-required="true" ff-options="rb.id as rb.name for rb in $ctrl.rbs" ff-validate-alert="{{\'CHECK_IN_LOG.NAME\' | translate}}"></ff-select> </label> <label class="ff-row"> <ff-label flex="0 0 100px"><req translate="CHECK_IN_LOG.ACTION"></req></ff-label> <ff-select ff-model="$ctrl.rec.$$op" ff-required="true" ff-options="operation.name for operation in $ctrl.operations" ff-validate-alert="{{\'CHECK_IN_LOG.ACTION\' | translate}}"></ff-select> </label> </ff-panel> <ff-btn-group> <ff-btn type="submit" sense="save" ff-click="$ctrl.save()"><span translate="GLOBAL.BTN_SAVE"></span></ff-btn> <ff-btn sense="back" ff-click="$ctrl.rec = null"><span translate="GLOBAL.BTN_BACK"></span></ff-btn> </ff-btn-group> </div> </form> '},nhGK:function(e,t,a){},vWHn:function(e,t,a){"use strict";t.a=angular.module("deskworks.dwDateTime",["flexForms"]).directive("dwDateTime",(function(){return{restrict:"E",scope:!0,compile:function(e,t){var a=t.ngDisabled?' ng-disabled="'+t.ngDisabled+'"':"",f=t.ngDisabled?' ff-disabled="'+t.ngDisabled+'"':"",s=t.ffRequired?' ff-required="'+t.ffRequired+'"':"",n=t.ffDateOrder?' ff-date-order="'+t.ffDateOrder+'"':"",r=t.ffDateDiff?' ff-date-diff="'+t.ffDateDiff+'"':"",l=t.ffValidateAlert?' ff-validate-alert="'+t.ffValidateAlert+'"':"",c=t.labelClass?' class="'+t.labelClass+'"':"",i='<ff-row><label flex="1 1 auto"><ff-label flex="'+t.labelFlex+'"'+s+a+c+">"+t.ffLabel+'</ff-label><ff-row flex="1 1 1%"><ff-date name="{{\''+(t.name||t.ffModel)+'date\'}}" flex="1 2 150px" ff-model="inner.date"'+s+f+n+r+l+"></ff-date><ff-time name=\"{{'"+(t.name||t.ffModel)+'time\'}}" flex="1 3 150px" ff-model="inner.time"'+s+f+n+r+l+"></ff-time></ff-row></label></ff-row>";return e.append(i),this.link},link:function(e,t,a){e.inner={};var f=e.$eval(a.ffModel);function s(t,a){!moment.isMoment(t)||moment.isMoment(a)&&t.isSame(a)||(e.inner.date=t.clone().second(0).millisecond(0),e.inner.time=t.clone().second(0).millisecond(0))}f instanceof moment&&s(f),e.$watch(a.ffModel,s),e.$watch("inner.date",(function(t,f){var s=e.$eval(a.ffModel);moment.isMoment(t)&&moment.isMoment(s)&&(moment.isMoment(f)&&t.isSame(f)||(e.newDate=t.clone().hour(s.hour()).minute(s.minute()),e.$eval(a.ffModel+" = newDate")))})),e.$watch("inner.time",(function(t,f){var s=e.$eval(a.ffModel);moment.isMoment(t)&&moment.isMoment(s)&&(moment.isMoment(f)&&t.isSame(f)||(e.newDate=s.clone().hour(t.hour()).minute(t.minute()),e.$eval(a.ffModel+" = newDate")))}))}}}))}}]);