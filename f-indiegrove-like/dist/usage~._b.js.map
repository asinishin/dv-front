{"version":3,"sources":["webpack:///./bundles/usage sync .*\\.tpl\\.html$","webpack:///./bundles/usage sync \\..+\\/.+\\.js$","webpack:///./bundles/usage/check-in-log/check-in-log.controller.js","webpack:///./bundles/usage/check-in-log/check-in-log.tpl.html","webpack:///./bundles/usage/index.js","webpack:///./bundles/usage/manual-check-in-log/manual-check-in-log.controller.js","webpack:///./bundles/usage/manual-check-in-log/manual-check-in-log.tpl.html","webpack:///./bundles/usage/usage-entry/usage-entry-edit.controller.js","webpack:///./bundles/usage/usage-entry/usage-entry-edit.tpl.html","webpack:///./bundles/usage/usage-entry/usage-entry-list.controller.js","webpack:///./bundles/usage/usage-entry/usage-entry-list.tpl.html","webpack:///./bundles/usage/usage-tracking/usage-tracking.controller.js","webpack:///./bundles/usage/usage-tracking/usage-tracking.scss?3f3a","webpack:///./bundles/usage/usage-tracking/usage-tracking.tpl.html","webpack:///./bundles/usage/view-usage/view-usage.controller.js","webpack:///./bundles/usage/view-usage/view-usage.scss?0d11","webpack:///./bundles/usage/view-usage/view-usage.tpl.html","webpack:///./shared/dw-controls/dw-date-time/dw-date-time.directive.js","webpack:///./shared/services/usage/manual-check-in-log.service.js","webpack:///./shared/services/usage/opts-credit-type.service.js","webpack:///./shared/services/usage/opts-usage-source.service.js","webpack:///./shared/services/usage/usage-tracking.service.js"],"names":["angular","module","dwDateTimeDirective","name","niceTimeDirective","controller","$scope","$timeout","$translate","dwAlerts","state","helper","user","checkInLogService","$ctrl","operations","id","instant","setPageTitle","userName","fullNameCompany","fetch","page","fetching","getLog","getCurrentCenterId","getCurrentUserId","memberLog","mac","catch","err","error","then","result","forEach","log","operation","finally","delete","rec","deleteLog","length","create","time","moment","window","scrollTo","save","pointFirstInvalid","checkInOut","setMac","$event","preventDefault","index","$injector","importAll","r","js","require","loadNewModules","m","default","invoke","$templateCache","ctx","key","put","replace","ManualCheckInLog","ManualCheckIn","session","value","isAdmin","onInit","query","centerId","userId","rbs","get","data","pageSize","$$op","o","checkedIn","logId","i","recurringId","$filter","$route","usage","usageEntryService","backPath","editingUsage","form","$setDirty","$watch","newVal","oldVal","isMoment","date","month","year","checkOutTime","hour","minute","back","setPath","$setPristine","reload","usageList","confirm","usages","findIndexByKeyValue","navPage","$page","UsageTracking","productService","centerService","getCenters","centers","reduce","map","obj","getProducts","products","days","day","collapsed","usageId","newDay","valueOf","memberUsageList","memberUsageService","inactiveCount","prev","curr","status","memberUsage","copy","deletePassRefill","directive","restrict","scope","compile","tElement","tAttrs","ngDisabled","ffDisabled","ffRequired","ffDateOrder","ffDateDiff","ffValidateAlert","labelClass","tpl","labelFlex","ffLabel","ffModel","append","link","$element","$attrs","inner","initDate","$eval","innerFromModel","oldDate","model","isSame","newDate","clone","oldTime","oldModel","second","millisecond","factory","$resource","deskworksConfig","datesDeserializer","desDates","res","getApiAbsUrl","method","isArray","transformResponse","fromJson","params","macAddress","$promise","$rootScope","opts","_name","translate","$on","opt","optsUsageSource","optsCreditType","sourceName","sourceId","usageAmount","round","usageTotals","sum","amount","appliedAmount","creditsApplied","credit","setCreditType","openingBalance","closingBalance","credits","isDefined","passes","typeId","bucketPasses","typeName"],"mappings":"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","file":"usage~._b.js?_rev=3a0f71832b290220c688","sourcesContent":["var map = {\n\t\"./check-in-log/check-in-log.tpl.html\": \"./bundles/usage/check-in-log/check-in-log.tpl.html\",\n\t\"./manual-check-in-log/manual-check-in-log.tpl.html\": \"./bundles/usage/manual-check-in-log/manual-check-in-log.tpl.html\",\n\t\"./usage-entry/usage-entry-edit.tpl.html\": \"./bundles/usage/usage-entry/usage-entry-edit.tpl.html\",\n\t\"./usage-entry/usage-entry-list.tpl.html\": \"./bundles/usage/usage-entry/usage-entry-list.tpl.html\",\n\t\"./usage-tracking/usage-tracking.tpl.html\": \"./bundles/usage/usage-tracking/usage-tracking.tpl.html\",\n\t\"./view-usage/view-usage.tpl.html\": \"./bundles/usage/view-usage/view-usage.tpl.html\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/usage sync recursive .*\\\\.tpl\\\\.html$\";","var map = {\n\t\"./check-in-log/check-in-log.controller.js\": \"./bundles/usage/check-in-log/check-in-log.controller.js\",\n\t\"./manual-check-in-log/manual-check-in-log.controller.js\": \"./bundles/usage/manual-check-in-log/manual-check-in-log.controller.js\",\n\t\"./usage-entry/usage-entry-edit.controller.js\": \"./bundles/usage/usage-entry/usage-entry-edit.controller.js\",\n\t\"./usage-entry/usage-entry-list.controller.js\": \"./bundles/usage/usage-entry/usage-entry-list.controller.js\",\n\t\"./usage-tracking/usage-tracking.controller.js\": \"./bundles/usage/usage-tracking/usage-tracking.controller.js\",\n\t\"./view-usage/view-usage.controller.js\": \"./bundles/usage/view-usage/view-usage.controller.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/usage sync recursive \\\\..+\\\\/.+\\\\.js$\";","import dwDateTimeDirective from 'shared/dw-controls/dw-date-time/dw-date-time.directive';\nimport niceTimeDirective from 'shared/nice-date-time/nice-time.directive';\n\nexport default angular.module('deskworks.members.checkInLog.list', [\n  'deskworks.checkInLog.service',\n  dwDateTimeDirective.name,\n  niceTimeDirective.name,\n])\n\n  .controller('CheckInLogCtrl', function($scope, $timeout, $translate, dwAlerts, state, helper, user, checkInLogService) {\n    const $ctrl = this;\n\n    $ctrl.state = state;\n    $ctrl.operations = [\n      { id: 'checkIn', name: $translate.instant('CHECK_IN_LOG.CHECK_IN') },\n      { id: 'checkOut', name: $translate.instant('CHECK_IN_LOG.CHECK_OUT') },\n    ];\n\n    state.setPageTitle($translate.instant('CHECK_IN_LOG.PAGE_TITLE', { userName: user.fullNameCompany }));\n\n    /**\n     * Fetch log data from server\n     */\n    $ctrl.fetch = page => {\n      $ctrl.fetching = true;\n      return checkInLogService.getLog(state.getCurrentCenterId(), state.getCurrentUserId(), page || $ctrl.memberLog && $ctrl.memberLog.page || 1, 100, $ctrl.mac || null)\n        .catch(err => dwAlerts.error(err, 'Failed to query check-in log.'))\n        .then(result => {\n          $ctrl.memberLog = result;\n          angular.forEach($ctrl.memberLog && $ctrl.memberLog.log, log => {\n            log.operation = helper.find($ctrl.operations, log.operation) || $ctrl.operations[0];\n          });\n        })\n        .finally(() => { $ctrl.fetching = false; });\n    };\n\n    /**\n     * Start initial fetching\n     */\n    $ctrl.fetch();\n\n    /**\n     * Delete log record handler\n     */\n    $ctrl.delete = rec => {\n      return checkInLogService.deleteLog(state.getCurrentCenterId(), state.getCurrentUserId(), rec.id)\n        .catch(err => dwAlerts.error(err, 'Failed to delete check-in log record.'))\n        .then(() => {\n          $ctrl.memberLog.log.splice(helper.findIndex($ctrl.memberLog.log, rec.id), 1);\n\n          if ($ctrl.memberLog.log.length === 0) { // if current page is empty, navigate previous/next page\n            $timeout(() => {\n              if (+$ctrl.memberLog.page > 1) {\n                $ctrl.fetch(+$ctrl.memberLog.page - 1);\n              } else {\n                $ctrl.fetch(+$ctrl.memberLog.page);\n              }\n            }, 3000); // 3sec timeout to let API complete background work\n          }\n        });\n    };\n\n    /**\n     * Create new log record handler\n     */\n    $ctrl.create = () => {\n      $ctrl.rec = {\n        id: 'new',\n        operation: $ctrl.operations[0],\n        time: moment(),\n      };\n\n      window.scrollTo(0, 0); // scroll to top of page\n    };\n\n    /**\n     * Save new log record handler\n     */\n    $ctrl.save = () => {\n      if (helper.pointFirstInvalid('#checkInLogRec')) return;\n\n      return checkInLogService.checkInOut(state.getCurrentCenterId(), state.getCurrentUserId(), $ctrl.rec.operation.id, $ctrl.rec.time)\n        .catch(err => dwAlerts.error(err, 'Failed to save check-in log record.'))\n        .then(result => {\n          $ctrl.rec.id = result.id;\n          $ctrl.rec = null;\n          return $ctrl.fetch();\n        });\n    };\n\n    /**\n     * Reset MAC Address filter\n     */\n    $ctrl.setMac = ($event, mac) => {\n      if ($event) $event.preventDefault();\n      if ($ctrl.mac !== mac) {\n        $ctrl.mac = mac;\n        $ctrl.fetch(1);\n      }\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"checkInLog\\\" ng-if=\\\"!$ctrl.rec\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-btn-group> <ff-btn sense=\\\"new\\\" ff-click=\\\"$ctrl.create()\\\"><span translate=\\\"CHECK_IN_LOG.BTN_CREATE\\\"></span></ff-btn> </ff-btn-group> <ff-panel ff-dim=\\\"$ctrl.fetching\\\"> <ff-row class=\\\"ff-bmargin ff-read-only-ignore\\\" ng-if=\\\"state.isLoggedAdmin()\\\"> <label flex=\\\"auto\\\"> <span flex=\\\"0 0 120px\\\" class=\\\"em\\\" translate=\\\"CHECK_IN_LOG.FILTER_BY_MAC\\\" style=\\\"align-self:center\\\"></span> <ff-text flex=\\\"1 1 1%\\\" placeholder=\\\"00:00:00:00:00:00\\\" ff-model=\\\"$ctrl.mac\\\" ff-model-options=\\\"{ debounce: 500 }\\\" ff-change=\\\"$ctrl.fetch()\\\"></ff-text> </label> <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row\\\" ng-show=\\\"$ctrl.mac\\\"> <ff-btn sense=\\\"delete\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.setMac()\\\" title=\\\"{{'GLOBAL.BTN_CANCEL' | translate}}\\\"></ff-btn> </ff-btn-group> </ff-row> <span translate=\\\"CHECK_IN_LOG.EMPTY\\\" ng-if=\\\"!$ctrl.memberLog || $ctrl.memberLog.pageCount === 0\\\"></span> <ff-header ng-if=\\\"$ctrl.memberLog.pageCount > 0\\\"> <ff-row> <cell flex=\\\"3 0 55px\\\"><span translate=\\\"CHECK_IN_LOG.TIME\\\"></span></cell> <cell flex=\\\"2 0 45px\\\"><span translate=\\\"CHECK_IN_LOG.ACTION\\\"></span></cell> <cell flex=\\\"4 0 1px\\\" class=\\\"show-xs\\\" ng-if=\\\"state.isLoggedAdmin()\\\"><span translate=\\\"CHECK_IN_LOG.LOGIN\\\"></span></cell> <cell flex=\\\"4 0 1px\\\" class=\\\"show-sm\\\" ng-if=\\\"state.isLoggedAdmin()\\\"><span translate=\\\"CHECK_IN_LOG.MAC\\\"></span></cell> <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row zero-height\\\" ng-if=\\\"state.isLoggedAdmin()\\\"> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\"></ff-btn> </ff-btn-group> </ff-row> </ff-header> <ff-row ng-repeat=\\\"rec in $ctrl.memberLog.log\\\"> <ff-static flex=\\\"3 0 55px\\\"> <span ng-bind=\\\"rec.time | date:'mediumDate'\\\" style=\\\"font-size:.9em\\\"></span>&nbsp;&nbsp;<span nice-time=\\\"rec.time\\\"></span> </ff-static> <ff-static flex=\\\"2 0 45px\\\"><ff-icon sense=\\\"rec.operation.id + 'Status'\\\"></ff-icon>&nbsp;&nbsp;{{rec.operation.name}}</ff-static> <ff-static flex=\\\"4 0 1px\\\" class=\\\"show-xs\\\" ff-bind=\\\"rec.login\\\" ng-if=\\\"state.isLoggedAdmin()\\\"></ff-static> <ff-static flex=\\\"4 0 1px\\\" class=\\\"show-sm\\\" ng-if=\\\"state.isLoggedAdmin()\\\"> <a href=\\\"#\\\" ng-click=\\\"$ctrl.setMac($event, rec.macAddress)\\\" ng-bind=\\\"rec.macAddress\\\"></a> </ff-static> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"buttons-row\\\" ng-if=\\\"state.isLoggedAdmin()\\\"> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.delete(rec)\\\" title=\\\"{{'GLOBAL.BTN_DELETE' | translate}}\\\"></ff-btn> </ff-btn-group> </ff-row> <ff-pagination props=\\\"$ctrl.memberLog\\\" ff-click=\\\"$ctrl.fetch($page)\\\"></ff-pagination> </ff-panel> <ff-btn-group ng-if=\\\"state.isLoggedAdmin() && $ctrl.memberLog.log.length > 0\\\"> <ff-btn sense=\\\"new\\\" ff-click=\\\"$ctrl.create()\\\"><span translate=\\\"CHECK_IN_LOG.BTN_CREATE\\\"></span></ff-btn> </ff-btn-group> </div> </div> <form name=\\\"formCheckInLogRec\\\" id=\\\"checkInLogRec\\\" ng-if=\\\"$ctrl.rec\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\"><span translate=\\\"CHECK_IN_LOG.NEW.PAGE_TITLE\\\"></span></h1> <div class=\\\"ff-grid gutter-v\\\"> <ff-panel style=\\\"max-width:400px\\\"> <dw-date-time label-flex=\\\"0 0 100px\\\" ff-model=\\\"$ctrl.rec.time\\\" ff-required=\\\"true\\\" ff-label=\\\"{{'CHECK_IN_LOG.TIME' | translate}}\\\" ff-validate-alert=\\\"{{'CHECK_IN_LOG.TIME' | translate}}\\\"></dw-date-time> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"CHECK_IN_LOG.ACTION\\\"></req></ff-label> <ff-select ff-model=\\\"$ctrl.rec.operation\\\" ff-required=\\\"true\\\" ff-options=\\\"operation.name for operation in $ctrl.operations\\\" ff-validate-alert=\\\"{{'CHECK_IN_LOG.ACTION' | translate}}\\\"></ff-select> </label> </ff-panel> <ff-btn-group> <ff-btn type=\\\"submit\\\" sense=\\\"save\\\" ff-click=\\\"$ctrl.save()\\\"><span translate=\\\"GLOBAL.BTN_SAVE\\\"></span></ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.rec = null\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> </form> \";\n// Exports\nmodule.exports = code;","const index = ['$injector', function index($injector) {\n  // JS\n  const importAll = r => r.keys().map(r);\n  const js = importAll(require.context('./', true, /\\..+\\/.+\\.js$/));\n  $injector.loadNewModules(js.map(m => m.default.name));\n\n  // Templates\n  $injector.invoke(['$templateCache', function($templateCache) {\n    const ctx = require.context('./', true, /.*\\.tpl\\.html$/);\n    ctx.keys().forEach(key => $templateCache.put(key.replace(/^\\.\\//, ''), ctx(key)));\n  }]);\n}];\n\nexport default index;\n","import dwDateTimeDirective from 'shared/dw-controls/dw-date-time/dw-date-time.directive';\nimport niceTimeDirective from 'shared/nice-date-time/nice-time.directive';\nimport ManualCheckInLog from 'shared/services/usage/manual-check-in-log.service';\nimport ManualCheckIn from 'shared/services/usage/manual-check-in.service';\n\nexport default angular.module('deskworks.ManualCheckInLogCtrl', [\n  'session',\n  'deskworks.checkInLog.service',\n  dwDateTimeDirective.name,\n  niceTimeDirective.name,\n  ManualCheckInLog.name,\n  ManualCheckIn.name,\n])\n\n  .controller('ManualCheckInLogCtrl', function($scope, $timeout, $translate, dwAlerts, state, helper, session,\n                                               user, ManualCheckInLog, ManualCheckIn) {\n    const $ctrl = this;\n\n    $ctrl.operations = [\n      { id: 'checkIn', name: $translate.instant('CHECK_IN_LOG.CHECK_IN'), value: true },\n      { id: 'checkOut', name: $translate.instant('CHECK_IN_LOG.CHECK_OUT'), value: false },\n    ];\n\n    $ctrl.isAdmin = () => session.isAdmin();\n\n    $ctrl.onInit = () => {\n      state.setPageTitle($translate.instant('CHECK_IN_LOG.MANUAL.PAGE_TITLE', { userName: user.fullNameCompany }));\n\n      $ctrl.fetch();\n\n      ManualCheckIn.query({ centerId: state.getCurrentCenterId(), userId: state.getCurrentUserId() })\n        .catch(err => dwAlerts.error(err, 'Failed to query check-in log.'))\n        .then(result => { $ctrl.rbs = result; });\n    };\n\n    /**\n     * Fetch log data from server\n     */\n    $ctrl.fetch = page => {\n      $ctrl.fetching = true;\n      return ManualCheckInLog.get({\n        centerId: state.getCurrentCenterId(),\n        userId: state.getCurrentUserId(),\n        page: page || ($ctrl.data ? $ctrl.data.page : 1),\n        pageSize: 30,\n        mac: $ctrl.mac || null,\n      })\n        .catch(err => dwAlerts.error(err, 'Failed to query check-in log.'))\n        .then(result => {\n          $ctrl.data = result;\n          $ctrl.data.log.forEach(rec => { rec.$$op = $ctrl.operations.find(o => o.value === rec.checkedIn); });\n        })\n        .finally(() => { $ctrl.fetching = false; });\n    };\n\n    /**\n     * Delete log record handler\n     */\n    $ctrl.delete = rec => {\n      return ManualCheckInLog.delete({ centerId: state.getCurrentCenterId(), userId: state.getCurrentUserId(), logId: rec.id })\n        .catch(err => dwAlerts.error(err, 'Failed to delete check-in log record.'))\n        .then(() => {\n          $ctrl.data.log.splice($ctrl.data.log.findIndex(i => i.id === rec.id), 1);\n\n          if ($ctrl.data.log.length === 0) { // if current page is empty, navigate previous/next page\n            if (+$ctrl.data.page > 1) {\n              $ctrl.fetch(+$ctrl.data.page - 1);\n            } else {\n              $ctrl.fetch(+$ctrl.data.page);\n            }\n          }\n        });\n    };\n\n    /**\n     * Create new log record handler\n     */\n    $ctrl.create = () => {\n      if (!$ctrl.rbs || !$ctrl.rbs.length) return dwAlerts.error('User has no recurring billings to check in.');\n\n      $ctrl.rec = {\n        time: moment(),\n        recurringId: $ctrl.rbs[0].id,\n        $$op: $ctrl.operations[0],\n      };\n\n      window.scrollTo(0, 0); // scroll to top of page\n    };\n\n    /**\n     * Save new log record handler\n     */\n    $ctrl.save = () => {\n      if (helper.pointFirstInvalid('#manualCheckInLogRec')) return;\n\n      return ManualCheckInLog.save({\n        centerId: state.getCurrentCenterId(),\n        userId: state.getCurrentUserId(),\n        recurringId: $ctrl.rec.recurringId,\n        checkedIn: $ctrl.rec.$$op.id === 'checkIn',\n        time: $ctrl.rec.time,\n      })\n        .catch(err => dwAlerts.error(err, 'Failed to save check-in log record.'))\n        .then(result => {\n          $ctrl.rec.id = result.id;\n          $ctrl.rec = null;\n          return $ctrl.fetch();\n        });\n    };\n\n    $ctrl.onInit();\n  });\n","// Module\nvar code = \"<div id=\\\"manualCheckInLog\\\" ng-if=\\\"!$ctrl.rec\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\" style=\\\"max-width:720px\\\"> <ff-panel ff-dim=\\\"$ctrl.fetching\\\"> <span translate=\\\"CHECK_IN_LOG.EMPTY\\\" ng-if=\\\"$ctrl.data && $ctrl.data.pageCount === 0\\\"></span> <ff-header ng-if=\\\"$ctrl.data.pageCount > 0\\\"> <ff-row> <cell flex=\\\"1 0 95px\\\"><span translate=\\\"CHECK_IN_LOG.TIME\\\"></span></cell> <cell flex=\\\"0 0 110px\\\"><span translate=\\\"CHECK_IN_LOG.ACTION\\\"></span></cell> <cell flex=\\\"6 1 5px\\\" class=\\\"show-xs\\\"><span translate=\\\"CHECK_IN_LOG.NAME\\\"></span></cell> <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row zero-height\\\" ng-if=\\\"$ctrl.isAdmin()\\\"> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\"></ff-btn> </ff-btn-group> </ff-row> </ff-header> <ff-row ng-repeat=\\\"rec in $ctrl.data.log\\\"> <ff-static flex=\\\"1 0 95px\\\"> <span><span ng-bind=\\\"rec.time | date:'mediumDate'\\\" style=\\\"font-size:.9em\\\"></span> <span nice-time=\\\"rec.time\\\"></span></span> </ff-static> <ff-static flex=\\\"0 0 110px\\\"><ff-icon sense=\\\"rec.$$op.id + 'Status'\\\"></ff-icon>&nbsp;&nbsp;{{rec.$$op.name}}</ff-static> <ff-static flex=\\\"6 1 5px\\\" class=\\\"show-xs\\\" ff-bind=\\\"rec.name\\\"></ff-static> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"buttons-row\\\" ng-if=\\\"$ctrl.isAdmin()\\\"> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.delete(rec)\\\" title=\\\"{{'GLOBAL.BTN_DELETE' | translate}}\\\"></ff-btn> </ff-btn-group> </ff-row> <ff-pagination props=\\\"$ctrl.data\\\" ff-click=\\\"$ctrl.fetch($page)\\\" ng-if=\\\"$ctrl.data.pageCount > 1\\\"></ff-pagination> </ff-panel> <ff-btn-group ng-if=\\\"$ctrl.isAdmin()\\\"> <ff-btn sense=\\\"new\\\" ff-click=\\\"$ctrl.create()\\\"><span translate=\\\"CHECK_IN_LOG.BTN_CREATE\\\"></span></ff-btn> </ff-btn-group> </div> </div> <form id=\\\"manualCheckInLogRec\\\" ng-if=\\\"$ctrl.rec\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\"><span translate=\\\"CHECK_IN_LOG.NEW.PAGE_TITLE\\\"></span></h1> <div class=\\\"ff-grid gutter-v\\\" style=\\\"max-width:400px\\\"> <ff-panel> <dw-date-time label-flex=\\\"0 0 100px\\\" ff-model=\\\"$ctrl.rec.time\\\" ff-required=\\\"true\\\" ff-label=\\\"{{'CHECK_IN_LOG.TIME' | translate}}\\\" ff-validate-alert=\\\"{{'CHECK_IN_LOG.TIME' | translate}}\\\"></dw-date-time> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"CHECK_IN_LOG.NAME\\\"></req></ff-label> <ff-select ff-model=\\\"$ctrl.rec.recurringId\\\" ff-required=\\\"true\\\" ff-options=\\\"rb.id as rb.name for rb in $ctrl.rbs\\\" ff-validate-alert=\\\"{{'CHECK_IN_LOG.NAME' | translate}}\\\"></ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"CHECK_IN_LOG.ACTION\\\"></req></ff-label> <ff-select ff-model=\\\"$ctrl.rec.$$op\\\" ff-required=\\\"true\\\" ff-options=\\\"operation.name for operation in $ctrl.operations\\\" ff-validate-alert=\\\"{{'CHECK_IN_LOG.ACTION' | translate}}\\\"></ff-select> </label> </ff-panel> <ff-btn-group> <ff-btn type=\\\"submit\\\" sense=\\\"save\\\" ff-click=\\\"$ctrl.save()\\\"><span translate=\\\"GLOBAL.BTN_SAVE\\\"></span></ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.rec = null\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> </form> \";\n// Exports\nmodule.exports = code;","import dwDateTimeDirective from 'shared/dw-controls/dw-date-time/dw-date-time.directive';\n\nexport default angular.module('deskworks.UsageEntryEditCtrl', [\n  'deskworks.usageEntryService',\n  dwDateTimeDirective.name,\n])\n\n  .controller('UsageEntryEditCtrl', function($scope, $filter, $timeout, $route, $translate, dwAlerts, usage, user,\n                                             usageEntryService, state, helper) {\n    const $ctrl = this;\n\n    $scope.backPath = '/usage-entry';\n\n    state.setPageTitle($translate.instant('USAGE_ENTRY.NEW.PAGE_TITLE', { userName: user.fullNameCompany }));\n\n    $ctrl.editingUsage = usage;\n\n    if (usage.id === 'new') {\n      $timeout(() => $ctrl.form.$setDirty());\n    }\n\n    /**\n     * Watch for $ctrl.editingUsage.startTime and if date is changed (but not time), synchronize date of $ctrl.editingUsage.endTime with date of $ctrl.editingUsage.startTime\n     */\n    $scope.$watch('$ctrl.editingUsage.checkInTime', function(newVal, oldVal) {\n      if (!moment.isMoment(newVal) || !moment.isMoment(oldVal)) return;\n      if (newVal.date() !== oldVal.date() || newVal.month() !== oldVal.month() || newVal.year() !== oldVal.year()) {\n        $ctrl.editingUsage.checkOutTime = moment([\n          newVal.year(), newVal.month(), newVal.date(),\n          $ctrl.editingUsage.checkOutTime.hour() || newVal.hour(),\n          $ctrl.editingUsage.checkOutTime.minute() || newVal.minute(),\n          0, 0\n        ]);\n      }\n    });\n\n\n    /**\n     * Back button handler\n     */\n    $ctrl.back = () => state.setPath('/usage-entry');\n\n    /**\n     * Save usage handler\n     */\n    $ctrl.save = function() {\n      if (helper.pointFirstInvalid('#usageEntryEdit')) return;\n\n      return usageEntryService.save(state.getCurrentCenterId(), state.getCurrentUserId(), $ctrl.editingUsage)\n        .catch(err => dwAlerts.error(err, 'Failed to save usage entry.'))\n        .then(() => {\n          $ctrl.form.$setPristine();\n          $route.reload();\n        });\n    };\n  });\n","// Module\nvar code = \"<form name=\\\"$ctrl.form\\\" id=\\\"usageEntryEdit\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h-half\\\"> <ff-panel flex=\\\"{lg: '0 0 50%'}\\\"> <ff-header><span translate=\\\"USAGE_ENTRY.PERIOD.HEADER\\\"></span></ff-header> <dw-date-time ff-label=\\\"{{'USAGE_ENTRY.CHECK_IN_TIME' | translate}}\\\" ff-model=\\\"$ctrl.editingUsage.checkInTime\\\" label-flex=\\\"0 0 126px\\\" ff-required=\\\"true\\\" ff-date-diff=\\\"23\\\" ff-date-order=\\\"{ early: $ctrl.editingUsage.checkInTime, late: $ctrl.editingUsage.checkOutTime }\\\" ff-validate-alert=\\\"{ field: 'Start Date', late: 'End Date' }\\\"> </dw-date-time> <dw-date-time ff-label=\\\"{{'USAGE_ENTRY.CHECK_OUT_TIME' | translate}}\\\" ff-model=\\\"$ctrl.editingUsage.checkOutTime\\\" label-flex=\\\"0 0 126px\\\" ff-required=\\\"true\\\" ff-date-diff=\\\"23\\\" ff-date-order=\\\"{ early: $ctrl.editingUsage.checkInTime, late: $ctrl.editingUsage.checkOutTime }\\\" ff-validate-alert=\\\"{ field: 'End Date', early: 'Start Date' }\\\"> </dw-date-time> </ff-panel> <ff-panel flex=\\\"{lg: '0 0 50%'}\\\"> <ff-header><span translate=\\\"USAGE_ENTRY.NOTES\\\"></span></ff-header> <label class=\\\"ff-row\\\"> <ff-textarea ff-model=\\\"$ctrl.editingUsage.notes\\\" rowspan=\\\"2\\\"></ff-textarea> </label> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"save\\\" type=\\\"submit\\\" ff-disabled=\\\"$ctrl.form.$pristine\\\" ff-click=\\\"$ctrl.save()\\\"><span translate=\\\"GLOBAL.BTN_SAVE\\\"></span></ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> </form> \";\n// Exports\nmodule.exports = code;","import niceTimeDirective from 'shared/nice-date-time/nice-time.directive';\n\nexport default angular.module('deskworks.UsageEntryListCtrl', [\n  'deskworks.usageEntryService',\n  niceTimeDirective.name,\n])\n\n  .controller('UsageEntryListCtrl', function($scope, $timeout, $translate, dwAlerts, usageList, user,\n                                             usageEntryService, state, helper) {\n    const $ctrl = this;\n\n    $ctrl.usageList = usageList;\n\n    state.setPageTitle($translate.instant('USAGE_ENTRY.PAGE_TITLE', { userName: user.fullNameCompany }));\n\n    /**\n     * Create usage handler\n     */\n    $ctrl.create = () => state.setPath('/usage-entry/new');\n\n    /**\n     * Delete Usage handler\n     */\n    $ctrl.delete = usage => {\n      if (confirm('Are you sure to delete the usage?')) {\n        return usageEntryService.delete(state.getCurrentCenterId(), state.getCurrentUserId(), usage.id)\n          .catch(err => dwAlerts.error(err, 'Failed to delete usage entry.'))\n          .then(() => {\n            $ctrl.usageList.usages.splice(helper.findIndexByKeyValue($ctrl.usageList.usages, 'id', usage.id), 1);\n\n            // If current page is empty, navigate previous/next page\n            if ($ctrl.usageList.usages.length === 0) {\n              return $timeout(function() {\n                if (+$ctrl.usageList.page > 1) return $ctrl.navPage(+$ctrl.usageList.page - 1);\n                return $ctrl.navPage(+$ctrl.usageList.page);\n              }, 3000); // 3sec timeout to let API complete background work\n            }\n          });\n      }\n    };\n\n    /**\n     * Navigate Page handler\n     */\n    $ctrl.navPage = $page => {\n      return usageEntryService.query(state.getCurrentCenterId(), state.getCurrentUserId(), $page, 15)\n        .catch(err => dwAlerts.error(err, 'Failed to query usage entry.'))\n        .then(result => $ctrl.usageList = result)\n    };\n  });\n","// Module\nvar code = \"<div class=\\\"usage-entry\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-btn-group ng-if=\\\"state.isLoggedAdmin() && $ctrl.usageList.usages.length > 0\\\"> <ff-btn sense=\\\"new\\\" ff-click=\\\"$ctrl.create()\\\"><span translate=\\\"USAGE_ENTRY.BTN_CREATE\\\"></span></ff-btn> </ff-btn-group> <ff-panel ng-if=\\\"$ctrl.usageList.pageCount === 0\\\"><span translate=\\\"USAGE_ENTRY.EMPTY\\\"></span></ff-panel> <ff-panel ng-if=\\\"$ctrl.usageList.pageCount > 0\\\"> <ff-header> <ff-row> <cell flex=\\\"2 0 15%\\\" class=\\\"ff-center\\\"><span translate=\\\"USAGE_ENTRY.DATE\\\"></span></cell> <cell flex=\\\"2 0 15%\\\" class=\\\"ff-center\\\"><span translate=\\\"USAGE_ENTRY.CHECK_IN_TIME\\\"></span></cell> <cell flex=\\\"2 0 15%\\\" class=\\\"ff-center\\\"><span translate=\\\"USAGE_ENTRY.CHECK_OUT_TIME\\\"></span></cell> <cell flex=\\\"5 1 40%\\\" class=\\\"ff-center show-sm\\\"><span translate=\\\"USAGE_ENTRY.NOTES\\\"></span></cell> <cell flex=\\\"1 0 15%\\\" class=\\\"ff-center\\\"><ff-col translate=\\\"USAGE_ENTRY.USAGE\\\"></ff-col></cell> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"buttons-row zero-height\\\" ng-if=\\\"state.isLoggedAdmin()\\\"> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\"></ff-btn> </ff-btn-group> </ff-row> </ff-header> <ff-row ng-repeat=\\\"usage in $ctrl.usageList.usages\\\"> <ff-static flex=\\\"2 0 15%\\\" class=\\\"ff-center\\\" ff-bind=\\\"(usage.checkInTime || usage.checkOutTime) | date:'mediumDate'\\\"></ff-static> <ff-static flex=\\\"2 0 15%\\\" class=\\\"ff-center\\\"><span nice-time=\\\"usage.checkInTime\\\"></span></ff-static> <ff-static flex=\\\"2 0 15%\\\" class=\\\"ff-center\\\"><span nice-time=\\\"usage.checkOutTime\\\"></span></ff-static> <ff-static flex=\\\"5 1 40%\\\" class=\\\"ff-center show-sm\\\" ff-bind=\\\"usage.notes | nd\\\"></ff-static> <ff-static flex=\\\"1 0 15%\\\" class=\\\"ff-center\\\" ff-bind=\\\"(usage.usageDurationHours | nd) + ' / ' + (usage.usageDurationUnits | nd)\\\"></ff-static> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"buttons-row\\\" ng-if=\\\"state.isLoggedAdmin()\\\"> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.delete(usage)\\\" title=\\\"{{'GLOBAL.BTN_DELETE' | translate}}\\\"></ff-btn> </ff-btn-group> </ff-row> <ff-pagination props=\\\"$ctrl.usageList\\\" ff-click=\\\"$ctrl.navPage($page)\\\" ng-if=\\\"$ctrl.usageList.pageCount > 1\\\"></ff-pagination> </ff-panel> <ff-btn-group ng-if=\\\"state.isLoggedAdmin()\\\"> <ff-btn sense=\\\"new\\\" ff-click=\\\"$ctrl.create()\\\"><span translate=\\\"USAGE_ENTRY.BTN_CREATE\\\"></span></ff-btn> </ff-btn-group> </div> </div> \";\n// Exports\nmodule.exports = code;","import './usage-tracking.scss';\nimport niceTimeDirective from 'shared/nice-date-time/nice-time.directive';\nimport UsageTracking from 'shared/services/usage/usage-tracking.service'\n\nexport default angular.module('deskworks.UsageTrackingCtrl', [\n  'deskworks.inventory.product.service',\n  'deskworks.center.service',\n  UsageTracking.name,\n  niceTimeDirective.name,\n])\n\n  .controller('UsageTrackingCtrl', function($scope, $translate, dwAlerts, state, helper, user,\n                                            UsageTracking, productService, centerService) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('USAGE_TRACKING.PAGE_TITLE', { userName: user.fullNameCompany }));\n\n    $ctrl.onInit = () => {\n      $ctrl.navPage(1);\n\n      centerService.getCenters()\n        .catch(err => dwAlerts.error(err, 'Failed to query centers.'))\n        .then(centers => {\n          $ctrl.centers = centers.reduce((map, obj) => (map[obj.id] = obj, map), {});\n          $ctrl.centers[0] = { id: 0, name: $translate.instant('USAGE_TRACKING.FACILITY.ALL') };\n        });\n\n      productService.getProducts()\n        .catch(err => dwAlerts.error(err, 'Failed to query products.'))\n        .then(products => {\n          $ctrl.products = products.reduce((map, obj) => (map[obj.id] = obj, map), {});\n        });\n    };\n\n    /**\n     * Navigate Page handler\n     */\n    $ctrl.navPage = (page) => UsageTracking.query({ centerId: state.getCurrentCenterId(), userId: state.getCurrentUserId(), page })\n      .catch(err => dwAlerts.error(err, 'Failed to query member usages.'))\n      .then(result => {\n        $ctrl.usage = result;\n        $ctrl.usage.days.forEach(day => { day.collapsed = true; });\n      });\n\n    /**\n     * Remove Pass Refill\n     */\n    $ctrl.delete = (day, usage) => {\n      return UsageTracking.delete({ centerId: state.getCurrentCenterId(), userId: state.getCurrentUserId(), usageId: usage.id })\n        .catch(err => dwAlerts.error(err, 'Failed to delete bucket refill.'))\n        .then(() => $ctrl.navPage($ctrl.usage.page))\n        .then(() => {\n          const newDay = $ctrl.usage.days.find(i => i.date.valueOf() === day.date.valueOf());\n          if (newDay) newDay.collapsed = day.collapsed;\n        });\n    };\n\n    $ctrl.onInit();\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div class=\\\"usage-tracking\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel> <ff-row ng-if=\\\"!$ctrl.usage\\\" class=\\\"animate-collapse\\\"> <ff-spin class=\\\"ff-spin-placeholder\\\"></ff-spin> </ff-row> <ff-static class=\\\"ff-no-frame\\\" ng-if=\\\"$ctrl.usage && !$ctrl.usage.days.length\\\"> <span translate=\\\"GLOBAL.NONE\\\"></span> </ff-static> <ff-header ng-if=\\\"$ctrl.usage.days.length\\\" class=\\\"ff-row\\\"> <cell flex=\\\"0 1 120px\\\" class=\\\"ff-right\\\" translate=\\\"USAGE_TRACKING.DATE\\\"></cell> <cell flex=\\\"1 1 25%\\\" class=\\\"ff-right\\\" translate=\\\"USAGE_TRACKING.USAGE_AMOUNT\\\"></cell> <cell flex=\\\"1 1 25%\\\" class=\\\"ff-right\\\" translate=\\\"USAGE_TRACKING.CREDITS_APPLIED\\\"></cell> <cell flex=\\\"1 1 12%\\\" class=\\\"ff-center show-sm\\\" translate=\\\"USAGE_TRACKING.REFILL\\\"></cell> <cell flex=\\\"1 1 12%\\\" class=\\\"ff-center\\\" translate=\\\"USAGE_TRACKING.IS_BILLED\\\"></cell> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"zero-height buttons-row\\\"> <ff-btn sense=\\\"collapse\\\" size=\\\"xs\\\"></ff-btn> </ff-btn-group> </ff-header> <ff-col ng-repeat=\\\"day in $ctrl.usage.days\\\"> <ff-row ng-class=\\\"{ active: !day.collapsed }\\\" ff-click=\\\"day.collapsed = !day.collapsed\\\"> <ff-static flex=\\\"0 1 120px\\\" class=\\\"ff-right\\\">{{::day.date | date:'mediumDate'}}</ff-static> <ff-static flex=\\\"1 1 25%\\\" class=\\\"ff-right\\\">{{::day.usageAmount | ncurrency}}</ff-static> <ff-static flex=\\\"1 1 25%\\\" class=\\\"ff-right\\\">{{::day.appliedAmount | ncurrency}}</ff-static> <ff-static flex=\\\"1 1 12%\\\" class=\\\"ff-center show-sm\\\">{{::day.refills.length | yesno}}</ff-static> <ff-static flex=\\\"1 1 12%\\\" class=\\\"ff-center\\\">{{::day.isBilled | yesno}}</ff-static> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"buttons-row\\\"> <ff-btn sense=\\\"collapse\\\" size=\\\"xs\\\" ng-class=\\\"{ collapsed: day.collapsed }\\\" ff-click=\\\"day.collapsed = !day.collapsed\\\" title=\\\"{{'USAGE_TRACKING.BTN_COLLAPSE.HINT' | translate}}\\\"></ff-btn> </ff-btn-group> </ff-row> <ff-row ng-if=\\\"!day.collapsed\\\" class=\\\"animate-collapse usage-details\\\"> <ff-col> <ff-header class=\\\"ff-row\\\"> <cell flex=\\\"1 1 150px\\\" class=\\\"show-lg\\\" translate=\\\"USAGE_TRACKING.FACILITY\\\"></cell> <cell flex=\\\"1 1 200px\\\" translate=\\\"USAGE_TRACKING.PRODUCT\\\"></cell> <cell flex=\\\"0 1 150px\\\" class=\\\"show-lg\\\" translate=\\\"USAGE_TRACKING.SOURCE\\\"></cell> <cell flex=\\\"0 0 68px\\\" class=\\\"ff-center show-md\\\" translate=\\\"USAGE_TRACKING.FROM\\\"></cell> <cell flex=\\\"0 0 68px\\\" class=\\\"ff-center show-md\\\" translate=\\\"USAGE_TRACKING.TO\\\"></cell> <cell flex=\\\"0 0 64px\\\" class=\\\"ff-right\\\" translate=\\\"USAGE_TRACKING.HOURS\\\"></cell> <cell flex=\\\"0 0 64px\\\" class=\\\"ff-right\\\" translate=\\\"USAGE_TRACKING.PASSES\\\"></cell> <cell flex=\\\"0 1 110px\\\" class=\\\"ff-right show-sm\\\" translate=\\\"USAGE_TRACKING.PRICE\\\"></cell> <cell flex=\\\"0 1 110px\\\" class=\\\"ff-right\\\" translate=\\\"USAGE_TRACKING.AMOUNT\\\"></cell> </ff-header> <ff-header ng-if=\\\"::day.openingBalance.length\\\"><span translate=\\\"USAGE_TRACKING.OPENING_BALANCE\\\"></span></ff-header> <ff-row ng-repeat=\\\"usage in ::day.openingBalance\\\"> <ff-static flex=\\\"1 1 150px\\\" class=\\\"show-lg\\\">{{$ctrl.centers[usage.centerId].name}}</ff-static> <ff-static flex=\\\"1 1 200px\\\">{{$ctrl.products[usage.productId].name}}</ff-static> <ff-static flex=\\\"0 1 150px\\\" class=\\\"show-lg\\\">{{::usage.typeName}}</ff-static> <ff-static flex=\\\"0 0 68px\\\" class=\\\"show-md\\\"></ff-static> <ff-static flex=\\\"0 0 68px\\\" class=\\\"show-md\\\"></ff-static> <ff-static flex=\\\"0 0 64px\\\" class=\\\"ff-right\\\">{{::usage.hours}}</ff-static> <ff-static flex=\\\"0 0 64px\\\" class=\\\"ff-right\\\">{{::usage.passes}}</ff-static> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-right show-sm\\\"></ff-static> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-right\\\">{{::usage.amount | ncurrency}}</ff-static> </ff-row> <ff-header ng-if=\\\"::day.refills.length\\\"><span translate=\\\"USAGE_TRACKING.REFILLS\\\"></span></ff-header> <ff-row ng-repeat=\\\"usage in ::day.refills\\\"> <ff-static flex=\\\"1 1 150px\\\" class=\\\"show-lg\\\">{{$ctrl.centers[usage.centerId].name}}</ff-static> <ff-static flex=\\\"1 1 200px\\\">{{$ctrl.products[usage.productId].name}}</ff-static> <ff-static flex=\\\"0 1 150px\\\" class=\\\"show-lg\\\"></ff-static> <ff-static flex=\\\"0 0 68px\\\" class=\\\"show-md\\\"></ff-static> <ff-static flex=\\\"0 0 68px\\\" class=\\\"show-md\\\"></ff-static> <ff-static flex=\\\"0 0 64px\\\" class=\\\"ff-right\\\"></ff-static> <ff-static flex=\\\"0 0 64px\\\" class=\\\"ff-right\\\">{{::usage.passes}}</ff-static> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-right show-sm\\\"></ff-static> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-right\\\"></ff-static> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"buttons-row\\\" style=\\\"position:absolute;left:calc(100% - .5px);top:2px\\\"> <ff-btn size=\\\"xs\\\" sense=\\\"delete\\\" title=\\\"{{'GLOBAL.BTN_DELETE' | translate}}\\\" ff-click=\\\"$ctrl.delete(day, usage)\\\"></ff-btn> </ff-btn-group> </ff-row> <ff-header ng-if=\\\"::day.usages.length\\\"><span translate=\\\"USAGE_TRACKING.USAGE_LOG\\\"></span></ff-header> <ff-row ng-repeat=\\\"usage in ::day.usages\\\"> <ff-static flex=\\\"1 1 150px\\\" class=\\\"show-lg\\\">{{$ctrl.centers[usage.centerId].name}}</ff-static> <ff-static flex=\\\"1 1 200px\\\">{{$ctrl.products[usage.productId].name}}</ff-static> <ff-static flex=\\\"0 1 150px\\\" class=\\\"show-lg\\\">{{::usage.sourceName}}</ff-static> <ff-static flex=\\\"0 0 68px\\\" class=\\\"show-md\\\"><span nice-time=\\\"::usage.from\\\"></span></ff-static> <ff-static flex=\\\"0 0 68px\\\" class=\\\"show-md\\\"><span nice-time=\\\"::usage.to\\\"></span></ff-static> <ff-static flex=\\\"0 0 64px\\\" class=\\\"ff-right\\\">{{::usage.hours}}</ff-static> <ff-static flex=\\\"0 0 64px\\\" class=\\\"ff-right\\\"></ff-static> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-right show-sm\\\"></ff-static> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-right\\\"></ff-static> </ff-row> <ff-header ng-if=\\\"::day.usageTotals.length\\\"><span translate=\\\"USAGE_TRACKING.USAGE_TOTALS\\\"></span></ff-header> <ff-row ng-repeat=\\\"usage in ::day.usageTotals\\\"> <ff-static flex=\\\"1 1 150px\\\" class=\\\"show-lg\\\">{{$ctrl.centers[usage.centerId].name}}</ff-static> <ff-static flex=\\\"1 1 200px\\\">{{$ctrl.products[usage.productId].name}}</ff-static> <ff-static flex=\\\"0 1 150px\\\" class=\\\"show-lg\\\"></ff-static> <ff-static flex=\\\"0 0 68px\\\" class=\\\"show-md\\\"></ff-static> <ff-static flex=\\\"0 0 68px\\\" class=\\\"show-md\\\"></ff-static> <ff-static flex=\\\"0 0 64px\\\" class=\\\"ff-right\\\">{{::usage.hours}}</ff-static> <ff-static flex=\\\"0 0 64px\\\" class=\\\"ff-right\\\">{{::usage.passes}}</ff-static> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-right show-sm\\\">{{::usage.price | ncurrency}}</ff-static> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-right\\\">{{::usage.amount | ncurrency}}</ff-static> </ff-row> <ff-header ng-if=\\\"::day.creditsApplied.length\\\"><span translate=\\\"USAGE_TRACKING.CREDITS_APPLIED\\\"></span></ff-header> <ff-row ng-repeat=\\\"usage in ::day.creditsApplied\\\"> <ff-static flex=\\\"1 1 150px\\\" class=\\\"show-lg\\\">{{$ctrl.centers[usage.centerId].name}}</ff-static> <ff-static flex=\\\"1 1 200px\\\">{{$ctrl.products[usage.productId].name}}</ff-static> <ff-static flex=\\\"0 1 150px\\\" class=\\\"show-lg\\\">{{::usage.typeName}}</ff-static> <ff-static flex=\\\"0 0 68px\\\" class=\\\"show-md\\\"></ff-static> <ff-static flex=\\\"0 0 68px\\\" class=\\\"show-md\\\"></ff-static> <ff-static flex=\\\"0 0 64px\\\" class=\\\"ff-right\\\">{{::usage.hours}}</ff-static> <ff-static flex=\\\"0 0 64px\\\" class=\\\"ff-right\\\">{{::usage.passes}}</ff-static> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-right show-sm\\\"></ff-static> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-right\\\">{{::usage.amount | ncurrency}}</ff-static> </ff-row> <ff-row class=\\\"usage-to-charge\\\"> <ff-static flex=\\\"auto\\\" class=\\\"ff-right\\\"><strong translate=\\\"USAGE_TRACKING.USAGE_TO_CHARGE\\\"></strong></ff-static> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-right\\\">{{::day.chargeAmount | ncurrency}}</ff-static> </ff-row> <ff-header ng-if=\\\"::day.closingBalance.length\\\"><span translate=\\\"USAGE_TRACKING.CLOSING_BALANCE\\\"></span></ff-header> <ff-row ng-repeat=\\\"usage in ::day.closingBalance\\\"> <ff-static flex=\\\"1 1 150px\\\" class=\\\"show-lg\\\">{{$ctrl.centers[usage.centerId].name}}</ff-static> <ff-static flex=\\\"1 1 200px\\\">{{$ctrl.products[usage.productId].name}}</ff-static> <ff-static flex=\\\"0 1 150px\\\" class=\\\"show-lg\\\">{{::usage.typeName}}</ff-static> <ff-static flex=\\\"0 0 68px\\\" class=\\\"show-md\\\"></ff-static> <ff-static flex=\\\"0 0 68px\\\" class=\\\"show-md\\\"></ff-static> <ff-static flex=\\\"0 0 64px\\\" class=\\\"ff-right\\\">{{::usage.hours}}</ff-static> <ff-static flex=\\\"0 0 64px\\\" class=\\\"ff-right\\\">{{::usage.passes}}</ff-static> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-right show-sm\\\"></ff-static> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-right\\\">{{::usage.amount | ncurrency}}</ff-static> </ff-row> </ff-col> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"zero-height buttons-row\\\"> <ff-btn sense=\\\"collapse\\\" size=\\\"xs\\\"></ff-btn> </ff-btn-group> </ff-row> </ff-col> <ff-pagination props=\\\"$ctrl.usage\\\" ff-click=\\\"$ctrl.navPage($page)\\\" ng-if=\\\"$ctrl.usage.pageCount > 1\\\"></ff-pagination> </ff-panel> </div> </div> \";\n// Exports\nmodule.exports = code;","import './view-usage.scss';\nimport niceTimeDirective from 'shared/nice-date-time/nice-time.directive';\n\nexport default angular.module('deskworks.ViewUsageCtrl', [\n  'deskworks.memberUsageService',\n  niceTimeDirective.name,\n])\n\n  .controller('ViewUsageCtrl', function($scope, $translate, dwAlerts, memberUsageList, state, helper, user,\n                                        memberUsageService) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('MEMBER_USAGE.PAGE_TITLE', { userName: user.fullNameCompany }));\n\n    $ctrl.memberUsageList = memberUsageList;\n    $ctrl.inactiveCount = $ctrl.memberUsageList\n      .reduce((prev, curr) => curr.status === 'inactive' ? ++prev : prev, 0);\n\n    /**\n     * Navigate Page handler\n     */\n    $ctrl.navPage = (memberUsage, $page) =>\n      memberUsageService.get(state.getCurrentCenterId(), state.getCurrentUserId(), memberUsage.id, $page)\n        .catch(err => dwAlerts.error(err, 'Failed to query member usages.'))\n        .then(result => angular.copy(result, memberUsage));\n\n    /**\n     * Remove Pass Refill\n     */\n    $ctrl.delete = (memberUsage, usage) =>\n      memberUsageService.deletePassRefill(state.getCurrentCenterId(), state.getCurrentUserId(), memberUsage.id, usage.id)\n        .catch(err => dwAlerts.error(err, 'Failed to remove pass refill.'))\n        .then(result => $ctrl.navPage(memberUsage, memberUsage.page));\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div class=\\\"view-usage\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel ng-if=\\\"$ctrl.inactiveCount\\\"> <label> <ff-checkbox name=\\\"show-inactive\\\" ff-model=\\\"$ctrl.showInactive\\\"> <span translate=\\\"MEMBER_USAGE.SHOW_INACTIVE\\\"></span> </ff-checkbox> </label> </ff-panel> <ff-panel ng-if=\\\"!$ctrl.memberUsageList.length || $ctrl.inactiveCount === $ctrl.memberUsageList.length && !$ctrl.showInactive\\\"> <span translate=\\\"MEMBER_USAGE.EMPTY\\\"></span> </ff-panel> <ff-panel ng-repeat=\\\"memberUsage in ::$ctrl.memberUsageList\\\" ng-if=\\\"memberUsage.status === 'active' || $ctrl.showInactive\\\"> <ff-panel-header> <div class=\\\"ff-grid ff-gutter-v-half\\\"> <span flex=\\\"{lg: '1 1 auto'}\\\">{{::memberUsage.productName}}</span> <span flex=\\\"{lg: '0 0 auto'}\\\">{{::memberUsage.passProductName}}</span> </div> </ff-panel-header> <ff-header class=\\\"pass-balance\\\"> <span translate=\\\"MEMBER_USAGE.PASS_BALANCE\\\" translate-values=\\\"{ passBalance: (memberUsage.passBalance | nd) }\\\"></span> </ff-header> <ff-header class=\\\"usage-header\\\" ng-if=\\\"::memberUsage.usages.length\\\"> <cell flex=\\\"0 1 18%\\\" class=\\\"ff-center\\\" translate=\\\"MEMBER_USAGE.DATE\\\"></cell> <cell flex=\\\"0 1 30%\\\" class=\\\"ff-center ff-col\\\" translate=\\\"MEMBER_USAGE.RESERVATION_DURATION\\\"></cell> <cell flex=\\\"0 1 30%\\\" class=\\\"ff-center ff-col\\\" translate=\\\"MEMBER_USAGE.USAGE_DURATION\\\"></cell> <cell flex=\\\"0 1 30%\\\" class=\\\"ff-center ff-col\\\" translate=\\\"MEMBER_USAGE.BILLING\\\"></cell> <cell flex=\\\"0 1 72px\\\" class=\\\"ff-center show-sm\\\" ng-if=\\\"::!memberUsage.isBucket\\\" translate=\\\"MEMBER_USAGE.IS_BILLED\\\"></cell> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"zero-height\\\"> <ff-btn sense=\\\"collapse\\\" size=\\\"xs\\\"></ff-btn> </ff-btn-group> </ff-header> <ff-static class=\\\"ff-no-frame\\\" ng-if=\\\"::!memberUsage.usages.length\\\"> <span translate=\\\"GLOBAL.NONE\\\"></span> </ff-static> <ff-col ng-repeat=\\\"usage in memberUsage.usages\\\" ng-init=\\\"usage.collapsed = true\\\"> <ff-row ng-class=\\\"{active: !usage.collapsed}\\\" ff-click=\\\"usage.collapsed = !usage.collapsed\\\" ng-if=\\\"!usage.passIncome\\\"> <ff-static flex=\\\"0 1 18%\\\" class=\\\"ff-center\\\" ff-bind=\\\"::usage.date | date:'mediumDate'\\\"></ff-static> <ff-static flex=\\\"0 1 30%\\\" class=\\\"ff-center\\\" ff-bind=\\\"::(usage.reservationDurationHours | nd) + ' / ' + (usage.reservationDurationUnits | nd)\\\"></ff-static> <ff-static flex=\\\"0 1 30%\\\" class=\\\"ff-center\\\" ff-bind=\\\"::(usage.usageDurationHours | nd) + ' / ' + (usage.usageDurationUnits | nd)\\\"></ff-static> <ff-static flex=\\\"0 1 30%\\\" class=\\\"ff-center\\\" ff-bind=\\\"::(usage.billingAmount | ncurrency) + ' / ' + (usage.billingPasses || 0)\\\"></ff-static> <ff-static flex=\\\"0 1 72px\\\" class=\\\"ff-center show-sm\\\" ff-bind=\\\"::usage.isBilled | yesno\\\" ng-if=\\\"::!memberUsage.isBucket\\\"></ff-static> <ff-btn-group flex=\\\"0 0 auto\\\"> <ff-btn sense=\\\"collapse\\\" size=\\\"xs\\\" ng-class=\\\"{ collapsed: usage.collapsed }\\\" ff-click=\\\"usage.collapsed = !usage.collapsed\\\" title=\\\"{{'MEMBER_USAGE.BTN_COLLAPSE.HINT' | translate}}\\\"> </ff-btn> </ff-btn-group> </ff-row> <ff-row ng-collapse=\\\"usage.collapsed\\\" ng-if=\\\"!usage.passIncome\\\"> <ff-col> <div class=\\\"ff-grid gutter-h-half\\\"> <div flex=\\\"{lg: '0 0 50%'}\\\" class=\\\"log-container\\\"> <ff-col> <ff-col> <ff-header class=\\\"log-block-header\\\"><span translate=\\\"MEMBER_USAGE.RESERVATION_LOG\\\"></span></ff-header> <ff-header class=\\\"log-header\\\" ng-if=\\\"::usage.reservationLog.length\\\"> <ff-row> <span class=\\\"show-xs\\\" translate=\\\"MEMBER_USAGE.FROM\\\"></span> <span class=\\\"show-xs\\\" translate=\\\"MEMBER_USAGE.TO\\\"></span> <span class=\\\"ff-center\\\" translate=\\\"MEMBER_USAGE.DURATION_HOURS\\\"></span> <span class=\\\"ff-center\\\" translate=\\\"MEMBER_USAGE.DURATION_PASSES\\\"></span> <span class=\\\"ff-right\\\" translate=\\\"MEMBER_USAGE.AMOUNT\\\"></span> </ff-row> </ff-header> <ff-row ng-repeat=\\\"log in ::usage.reservationLog\\\"> <ff-static class=\\\"show-xs\\\"><span nice-time=\\\"::log.startTime\\\"></span></ff-static> <ff-static class=\\\"show-xs\\\"><span nice-time=\\\"::log.endTime\\\"></span></ff-static> <ff-static class=\\\"ff-center\\\" ff-bind=\\\"::log.durationHours\\\"></ff-static> <ff-static class=\\\"ff-center\\\" ff-bind=\\\"::log.durationUnits\\\"></ff-static> <ff-static class=\\\"ff-right\\\" ff-bind=\\\"::log.amount | ncurrency\\\"></ff-static> </ff-row> <ff-static ng-if=\\\"::!usage.reservationLog.length\\\" class=\\\"ff-no-frame\\\"> <span translate=\\\"GLOBAL.NONE\\\"></span> </ff-static> </ff-col> </ff-col> </div> <div flex=\\\"{lg: '0 0 50%'}\\\" class=\\\"log-container\\\"> <ff-col> <ff-col> <ff-header class=\\\"log-block-header\\\"><span translate=\\\"MEMBER_USAGE.USAGE_LOG\\\"></span></ff-header> <ff-header class=\\\"log-header\\\" ng-if=\\\"::usage.checkInLog.length\\\"> <ff-row> <span class=\\\"show-xs\\\" translate=\\\"MEMBER_USAGE.FROM\\\"></span> <span class=\\\"show-xs\\\" translate=\\\"MEMBER_USAGE.TO\\\"></span> <span class=\\\"ff-center\\\" translate=\\\"MEMBER_USAGE.DURATION_HOURS\\\"></span> <span class=\\\"ff-center\\\" translate=\\\"MEMBER_USAGE.DURATION_PASSES\\\"></span> <span class=\\\"ff-right\\\" translate=\\\"MEMBER_USAGE.AMOUNT\\\"></span> </ff-row> </ff-header> <ff-row ng-repeat=\\\"log in ::usage.checkInLog\\\"> <ff-static class=\\\"show-xs\\\"><span nice-time=\\\"::log.startTime\\\"></span></ff-static> <ff-static class=\\\"show-xs\\\"><span nice-time=\\\"::log.endTime\\\"></span></ff-static> <ff-static class=\\\"ff-center\\\" ff-bind=\\\"::log.durationHours\\\"></ff-static> <ff-static class=\\\"ff-center\\\" ff-bind=\\\"::log.durationUnits\\\"></ff-static> <ff-static class=\\\"ff-right\\\" ff-bind=\\\"::log.amount | ncurrency\\\"></ff-static> </ff-row> <ff-static ng-if=\\\"::!usage.checkInLog.length\\\" class=\\\"ff-no-frame\\\"> <span translate=\\\"GLOBAL.NONE\\\"></span> </ff-static> </ff-col> </ff-col> </div> </div> </ff-col> <ff-btn-group flex=\\\"0 0 auto\\\" class=\\\"zero-height\\\"> <ff-btn sense=\\\"collapse\\\" size=\\\"xs\\\"></ff-btn> </ff-btn-group> </ff-row> <ff-row ng-if=\\\"usage.passIncome\\\"> <ff-static flex=\\\"0 1 25%\\\" ff-bind=\\\"::usage.date | date:'mediumDate'\\\"></ff-static> <ff-label flex=\\\"0 1 75%\\\" class=\\\"ff-right em\\\">{{'+' + usage.passIncome | passes}}</ff-label> <ff-static flex=\\\"0 1 15px\\\"></ff-static> <ff-static flex=\\\"0 1 72px\\\" class=\\\"ff-center\\\" ng-if=\\\"::!memberUsage.isBucket\\\">-</ff-static> <ff-btn-group flex=\\\"0 0 auto\\\"> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.delete(memberUsage, usage)\\\"> <span translate=\\\"GLOBAL.BTN_DELETE\\\"></span> </ff-btn> </ff-btn-group> </ff-row> </ff-col> <ff-pagination props=\\\"memberUsage\\\" ff-click=\\\"$ctrl.navPage(memberUsage, $page)\\\" ng-if=\\\"memberUsage.pageCount > 1\\\"></ff-pagination> </ff-panel> </div> </div> \";\n// Exports\nmodule.exports = code;","/**\n * dwDateTime directive - wrapper for ffLabel + ffDate + ffTime date/time selection\n */\nexport default angular.module('deskworks.dwDateTime', ['flexForms'])\n\n  .directive('dwDateTime', function() {\n    return {\n      restrict: 'E',\n      scope: true,\n\n      compile: function(tElement, tAttrs) {\n        const ngDisabled = tAttrs.ngDisabled ? ' ng-disabled=\"' + tAttrs.ngDisabled + '\"' : '';\n        const ffDisabled = tAttrs.ngDisabled ? ' ff-disabled=\"' + tAttrs.ngDisabled + '\"' : '';\n        const ffRequired = tAttrs.ffRequired ? ' ff-required=\"' + tAttrs.ffRequired + '\"' : '';\n        const ffDateOrder = tAttrs.ffDateOrder ? ' ff-date-order=\"' + tAttrs.ffDateOrder + '\"' : '';\n        const ffDateDiff = tAttrs.ffDateDiff ? ' ff-date-diff=\"' + tAttrs.ffDateDiff + '\"' : '';\n        const ffValidateAlert = tAttrs.ffValidateAlert ? ' ff-validate-alert=\"' + tAttrs.ffValidateAlert + '\"' : '';\n        const labelClass = tAttrs.labelClass ? ' class=\"' + tAttrs.labelClass + '\"' : '';\n\n        const tpl =\n          '<ff-row>' +\n\n            '<label flex=\"1 1 auto\">' +\n              '<ff-label flex=\"' + tAttrs.labelFlex + '\"' + ffRequired + ngDisabled + labelClass + '>' + tAttrs.ffLabel + '</ff-label>' +\n              '<ff-row flex=\"1 1 1%\">' +\n                '<ff-date name=\"{{\\'' + (tAttrs.name || tAttrs.ffModel) + 'date\\'}}\" flex=\"1 2 150px\" ff-model=\"inner.date\"' + ffRequired + ffDisabled + ffDateOrder + ffDateDiff + ffValidateAlert + '></ff-date>' +\n                '<ff-time name=\"{{\\'' + (tAttrs.name || tAttrs.ffModel) + 'time\\'}}\" flex=\"' + '1 3 150px' + '\" ff-model=\"inner.time\"' + ffRequired + ffDisabled + ffDateOrder + ffDateDiff + ffValidateAlert + '></ff-time>' +\n              '</ff-row>' +\n             '</label>' +\n          '</ff-row>';\n\n        tElement.append(tpl);\n\n        return this.link;\n      },\n\n      link: function($scope, $element, $attrs) {\n        $scope.inner = {};\n\n        const initDate = $scope.$eval($attrs.ffModel);\n        if (initDate instanceof moment) innerFromModel(initDate); // init inner date and time with initial date\n        $scope.$watch($attrs.ffModel, innerFromModel); // update inner date and time with ffModel\n\n        /**\n         * Watch for inner date and update ffModel\n         */\n        $scope.$watch('inner.date', (date, oldDate) => {\n          const model = $scope.$eval($attrs.ffModel);\n\n          if (!moment.isMoment(date) || !moment.isMoment(model)) return;\n          if (moment.isMoment(oldDate) && date.isSame(oldDate)) return;\n\n          $scope.newDate = date.clone().hour(model.hour()).minute(model.minute());\n          $scope.$eval($attrs.ffModel + ' = newDate');\n        });\n\n        /**\n         * Watch for inner time and update ffModel\n         */\n        $scope.$watch('inner.time', (time, oldTime) => {\n          const model = $scope.$eval($attrs.ffModel);\n\n          if (!moment.isMoment(time) || !moment.isMoment(model)) return;\n          if (moment.isMoment(oldTime) && time.isSame(oldTime)) return;\n\n          $scope.newDate = model.clone().hour(time.hour()).minute(time.minute());\n          $scope.$eval($attrs.ffModel + ' = newDate');\n        });\n\n        /**\n         * Updates inner date and time only if ffModel is really changed\n         */\n        function innerFromModel(model, oldModel) {\n          if (!moment.isMoment(model) || moment.isMoment(oldModel) && model.isSame(oldModel)) return;\n          $scope.inner.date = model.clone().second(0).millisecond(0);\n          $scope.inner.time = model.clone().second(0).millisecond(0);\n        }\n      }\n    };\n  });\n","export default angular.module('deskworks.ManualCheckInLog', [\n  'ngResource',\n  'deskworks.config',\n  'datesDeserializer',\n])\n  .factory('ManualCheckInLog', function($resource, $filter, $timeout, deskworksConfig, datesDeserializer) {\n    const desDates = datesDeserializer(['log.time']);\n\n\n    const res = $resource(deskworksConfig.getApiAbsUrl('/centers/:centerId/user-profiles/:userId/manual-check-in-logs/:logId'), {}, {\n      get: { method: 'GET', isArray: false, transformResponse: [angular.fromJson, desDates] },\n    });\n\n    return {\n      /**\n       * @param params.centerId\n       * @param params.userId\n       * @param params.page\n       * @param params.pageSize\n       * @param params.macAddress\n       * @returns {*}\n       */\n      get: function(params) {\n        const { centerId, userId, page, pageSize, macAddress } = params;\n        return res.get({ centerId, userId, page, pageSize, macAddress }).$promise;\n      },\n\n      /**\n       * @param params.centerId\n       * @param params.userId\n       * @param params.logId\n       * @returns {*}\n       */\n      delete: function(params) {\n        const { centerId, userId, logId } = params;\n        return res.delete({ centerId, userId, logId }).$promise;\n      },\n\n      /**\n       * @param params.centerId\n       * @param params.userId\n       * @param params.recurringId\n       * @param params.checkedIn\n       * @param params.time\n       * @returns {*}\n       */\n      save: function(params) {\n        const { centerId, userId, recurringId, checkedIn, time } = params;\n        return res.save({ centerId, userId }, { recurringId, checkedIn, time: $filter('date')(time, 'iso') }).$promise;\n      }\n    };\n  });\n","/**\n * Options for Usage -> View Usage -> Source\n */\nexport default angular.module('deskworks.optsCreditType', [])\n\n  .factory('optsCreditType', function($rootScope, $translate) {\n    const opts = [\n      { id: 'reservation', _name: 'USAGE_TRACKING.CREDIT_TYPE.RESERVATION' },\n      { id: 'pass', _name: 'USAGE_TRACKING.CREDIT_TYPE.PASS' },\n      { id: 'bucket', _name: 'USAGE_TRACKING.CREDIT_TYPE.BUCKET' },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { opts.forEach(opt => { opt.name = $translate.instant(opt._name); }); }\n\n    return opts;\n  });\n","/**\n * Options for Usage -> View Usage -> Source\n */\nexport default angular.module('deskworks.optsUsageSource', [])\n\n  .factory('optsUsageSource', function($rootScope, $translate) {\n    const opts = [\n      { id: 'reservation', _name: 'USAGE_TRACKING.SOURCE.RESERVATION' },\n      { id: 'network', _name: 'USAGE_TRACKING.SOURCE.NETWORK' },\n      { id: 'manual', _name: 'USAGE_TRACKING.SOURCE.MANUAL' },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { opts.forEach(opt => { opt.name = $translate.instant(opt._name); }); }\n\n    return opts;\n  });\n","import optsUsageSource from 'shared/services/usage/opts-usage-source.service';\nimport optsCreditType from 'shared/services/usage/opts-credit-type.service';\n\nexport default angular.module('deskworks.UsageTracking', [\n  'ngResource',\n  'deskworks.config',\n  'datesDeserializer',\n  optsUsageSource.name,\n  optsCreditType.name,\n])\n\n  .factory('UsageTracking', function($resource, $filter, $timeout, deskworksConfig, helper, datesDeserializer,\n                                     optsUsageSource, optsCreditType) {\n    const desDates = datesDeserializer(['days.date', 'days.usages.from', 'days.usages.to']);\n\n    const res = $resource(deskworksConfig.getApiAbsUrl('/centers/:centerId/user-profiles/:userId/usage-tracking/:usageId'), {}, {\n      query: { method: 'GET', isArray: false, transformResponse: [angular.fromJson, desDates] },\n    });\n\n    return {\n      /**\n       * @param params.centerId\n       * @param params.userId\n       * @param params.page\n       * @param params.pageSize\n       * @returns {*}\n       */\n      query: params => res.query({ page: 1, pageSize: 20, ...params }).$promise\n        .then(result => {\n          angular.forEach(result.days, day => {\n            day.usages.forEach(usage => {\n              usage.sourceName = (optsUsageSource.find(i => i.id === usage.sourceId) || {}).name || usage.sourceId;\n            });\n            day.usageAmount = helper.round(day.usageTotals.reduce((sum, usage) => +usage.amount + sum, 0));\n            day.appliedAmount = helper.round(day.creditsApplied.reduce((sum, credit) => +credit.amount + sum, 0));\n            setCreditType(day.openingBalance);\n            setCreditType(day.creditsApplied);\n            setCreditType(day.closingBalance);\n          });\n          return result;\n        }),\n\n      /**\n       * @param params.centerId\n       * @param params.userId\n       * @param params.usageId\n       * @returns {*}\n       */\n      delete: params => res.delete(params).$promise,\n    };\n\n    function setCreditType(credits) {\n      credits.forEach(credit => {\n        if(angular.isDefined(credit.passes)) {\n          credit.typeId = 'pass';\n        }\n        else if(angular.isDefined(credit.bucketPasses)) {\n          credit.typeId = 'bucket';\n          credit.passes = credit.bucketPasses;\n          delete credit.bucketPasses;\n        }\n        else credit.typeId = 'reservation';\n        credit.typeName = (optsCreditType.find(i => i.id === credit.typeId) || {}).name;\n      });\n    }\n  });\n"],"sourceRoot":""}