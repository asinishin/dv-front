{"version":3,"sources":["webpack:///./shared/attachments/attachments.directive.js","webpack:///./shared/attachments/attachments.tpl.html","webpack:///./shared/attachments/get-attachments.service.js","webpack:///./shared/ff-richtext/ff-richtext.directive.js","webpack:///./shared/ff-richtext/ff-richtext.scss?b1d6","webpack:///./shared/ff-richtext/ta-toolbar-email.service.js","webpack:///./shared/short-codes/short-codes.directive.js","webpack:///./shared/short-codes/short-codes.scss?2a28","webpack:///./shared/short-codes/short-codes.tpl.html"],"names":["angular","module","getAttachments","name","directive","template","restrict","scope","controller","bindToController","attachments","form","attacher","detacher","$window","dwAlerts","$ctrl","attach","$files","then","forEach","att","idx","$$spin","response","id","url","fileData","catch","err","indexOf","error","$$url","URL","createObjectURL","$setDirty","detach","index","revokeObjectURL","$onDestroy","factory","$q","$timeout","all","file","resolve","fileReader","FileReader","onload","e","fileName","target","result","readAsDataURL","ffHelper","compile","tElement","tAttrs","input","element","copyInnerAttrs","append","link","$scope","$element","$attrs","content","querySelector","$watch","editMode","isUndefined","toggleClass","attr","shortCodes"],"mappings":"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","file":"communications~notifications~._shared_a.js?_rev=e395f41fbfc36d250051","sourcesContent":["import template from './attachments.tpl.html';\nimport getAttachments from './get-attachments.service';\n\n/**\n * attachments directive - attachments list for email attachments in Communications and Notifications\n */\nexport default angular.module('deskworks.attachments', [\n  getAttachments.name,\n])\n\n  .directive('attachments', function() {\n    return {\n      template,\n      restrict: 'EAC',\n      scope: true,\n      controller: 'AttachmentsCtrl as $ctrl',\n      bindToController: {\n        attachments: '=',\n        form: '<?',\n        attacher: '<?',\n        detacher: '<?',\n      },\n    };\n  })\n\n  .controller('AttachmentsCtrl', function($window, dwAlerts, getAttachments) {\n    const $ctrl = this;\n\n    /**\n     * Attach Files\n     */\n    $ctrl.attach = $files =>\n      getAttachments($files)\n        .then(attachments => {\n          $ctrl.attachments = $ctrl.attachments.concat(attachments);\n\n          if ($ctrl.attacher) {\n            attachments.forEach((att, idx) => {\n              att.$$spin = true;\n              $ctrl.attacher(att)\n                .then(function(response) {\n                  att.$$spin = false;\n                  att.id = response.id;\n                  att.url = response.url;\n                  delete att.fileData;\n                })\n                .catch(err => {\n                  $ctrl.attachments.splice($ctrl.attachments.indexOf(att), 1); // remove failed attachment\n                  return dwAlerts.error(err, 'Failed to attach file.');\n                });\n            });\n          } else {\n            attachments.forEach((att, idx) => { att.$$url = $window.URL.createObjectURL($files[idx]); });\n            if ($ctrl.form) $ctrl.form.$setDirty();\n          }\n        });\n\n    /**\n     * Detach File\n     */\n    $ctrl.detach = index => {\n      if ($ctrl.detacher) {\n        const att = $ctrl.attachments[index];\n        return $ctrl.detacher(att)\n          .then(() => { $ctrl.attachments.splice($ctrl.attachments.indexOf(att), 1); })\n          .catch(err => dwAlerts.error(err, 'Failed to detach file.'));\n      } else {\n        $window.URL.revokeObjectURL($ctrl.attachments[index].$$url);\n        $ctrl.attachments.splice(index, 1);\n        if ($ctrl.form) $ctrl.form.$setDirty();\n      }\n    };\n\n    /**\n     * $onDestroy\n     */\n    $ctrl.$onDestroy = () => {\n      $ctrl.attachments.forEach((att) => $window.URL.revokeObjectURL(att.$$url));\n    };\n  });\n","// Module\nvar code = \"<ff-panel ngf-drop=\\\"$ctrl.attach($files)\\\" ngf-multiple=\\\"true\\\" ngf-drag-over-class=\\\"dragover\\\"> <ff-panel-header><span translate=\\\"ATTACHMENTS.HEADER\\\"></span></ff-panel-header> <ff-row ng-repeat=\\\"att in $ctrl.attachments\\\" ff-dim=\\\"att.$$spin\\\"> <ff-static name=\\\"attachment\\\"><a href=\\\"{{att.url || att.$$url}}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">{{att.fileName}}</a></ff-static> <ff-btn sense=\\\"delete\\\" size=\\\"xs\\\" class=\\\"buttons-row\\\" ff-click=\\\"$ctrl.detach($index)\\\" flex=\\\"none\\\" title=\\\"{{'ATTACHMENTS.BTN_DELETE.HINT' | translate}}\\\"></ff-btn> </ff-row> <ff-btn-group class=\\\"ff-section-buttons\\\"> <ff-btn sense=\\\"new\\\" size=\\\"sm\\\" ngf-select=\\\"$ctrl.attach($files)\\\" ngf-multiple=\\\"true\\\"> <span translate=\\\"ATTACHMENTS.BTN_ADD\\\"></span> </ff-btn> </ff-btn-group> </ff-panel> \";\n// Exports\nmodule.exports = code;","/**\n * Get email attachments service - gets attachments as data-urls from array of passed files\n */\nexport default angular.module('deskworks.getAttachments.service', [])\n\n  .factory('getAttachments', function($q, $timeout) {\n    return function getAttachments($files) {\n      return $q.all($files.map(file => $q(resolve => {\n        const fileReader = new FileReader();\n        fileReader.onload = e => $timeout(() => resolve({ fileName: file.name, fileData: e.target.result }));\n        fileReader.readAsDataURL(file);\n      })));\n    };\n  });\n","import 'textangularjs';\nimport 'textangularjs/dist/textAngular.css';\nimport './ff-richtext.scss';\n\n/**\n * ffRichtext directive - wrapper for 3rd party textAngular\n */\nexport default angular.module('ffRichtext', ['textAngular'])\n\n  .directive('ffRichtext', function(ffHelper) {\n    return {\n      restrict: 'E',\n      scope: true,\n\n      compile: function(tElement, tAttrs) {\n        const input = angular.element('<text-angular></text-angular>');\n        ffHelper.copyInnerAttrs(tElement, tAttrs, input);\n        tElement.append(input);\n\n        return this.link;\n      },\n\n      link: function($scope, $element, $attrs) {\n        const content = angular.element($element[0].querySelector('[contenteditable]'));\n\n        $scope.$watch('ffBlock.editMode', function(editMode) {\n          if (angular.isUndefined(editMode)) return;\n          $element.toggleClass('ff-read-only', !editMode);\n          content.attr('contenteditable', editMode);\n        });\n      },\n    };\n  });\n","// extracted by extract-css-chunks-webpack-plugin","/**\n * taToolbarEmail service - ffRichtext (textAngular) toolbar for email templates\n */\nexport default angular.module('deskworks.taToolbarEmail', [])\n  .factory('taToolbarEmail', function() {\n    return [\n      ['h1', 'h2', 'h3', 'h4', 'p', 'quote'],\n      ['bold', 'italics', 'underline', 'strikeThrough', 'ul', 'ol', 'redo', 'undo', 'clear'],\n      ['justifyLeft', 'justifyCenter', 'justifyRight'],\n      ['html', 'insertImage', 'insertLink', 'wordcount', 'charcount']\n    ];\n  });\n","import './short-codes.scss';\nimport template from './short-codes.tpl.html';\n\n/**\n * shortCodes directive - short codes list for email short-codes in Communications and Notifications\n */\nexport default angular.module('deskworks.shortCodes', [])\n\n  .directive('shortCodes', function() {\n    return {\n      template,\n      restrict: 'EAC',\n      scope: true,\n      controller: 'ShortCodesCtrl as $ctrl',\n      bindToController: {\n        shortCodes: '<',\n      },\n    };\n  })\n\n  .controller('ShortCodesCtrl', function() {\n    // const $ctrl = this;\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<ff-panel> <ff-panel-header><span> <span translate=\\\"SH_CODES.HEADER\\\"></span> <ff-hint><span translate=\\\"SH_CODES.HINT\\\"></span></ff-hint> </span></ff-panel-header> <ff-row ng-repeat=\\\"code in $ctrl.shortCodes\\\"> <ff-label flex=\\\"1 0 140px\\\" ff-bind-html=\\\"code.id\\\"></ff-label> <ff-static flex=\\\"1 1 350px\\\">{{code._name | translate}}</ff-static> </ff-row> </ff-panel> \";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}