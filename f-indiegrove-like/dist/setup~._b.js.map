{"version":3,"sources":["webpack:///./bundles/setup sync .*\\.tpl\\.html$","webpack:///./bundles/setup sync \\..+\\/.+\\.js$","webpack:///./bundles/setup/api-settings/api-settings.controller.js","webpack:///./bundles/setup/api-settings/api-settings.tpl.html","webpack:///./bundles/setup/banks/bank-edit.controller.js","webpack:///./bundles/setup/banks/bank-edit.tpl.html","webpack:///./bundles/setup/banks/banks.controller.js","webpack:///./bundles/setup/banks/banks.tpl.html","webpack:///./bundles/setup/bar-upload-settings/bar-upload-settings.controller.js","webpack:///./bundles/setup/bar-upload-settings/bar-upload-settings.tpl.html","webpack:///./bundles/setup/bundles/bundles.controller.js","webpack:///./bundles/setup/bundles/bundles.tpl.html","webpack:///./bundles/setup/center/center-edit.controller.js","webpack:///./bundles/setup/center/center-edit.tpl.html","webpack:///./bundles/setup/center/center-list.controller.js","webpack:///./bundles/setup/center/center-list.tpl.html","webpack:///./bundles/setup/index.js","webpack:///./bundles/setup/integrations-setup/integrations-setup.controller.js","webpack:///./bundles/setup/integrations-setup/integrations-setup.tpl.html","webpack:///./bundles/setup/owners-regions/owners-regions.controller.js","webpack:///./bundles/setup/owners-regions/owners-regions.tpl.html","webpack:///./bundles/setup/reservation-fields/reservation-field-edit.controller.js","webpack:///./bundles/setup/reservation-fields/reservation-field-edit.tpl.html","webpack:///./bundles/setup/reservation-fields/reservation-field-types.service.js","webpack:///./bundles/setup/reservation-fields/reservation-fields.controller.js","webpack:///./bundles/setup/reservation-fields/reservation-fields.tpl.html","webpack:///./bundles/setup/settings/settings.controller.js","webpack:///./bundles/setup/settings/settings.tpl.html","webpack:///./bundles/setup/system-email/system-email-edit.controller.js","webpack:///./bundles/setup/system-email/system-email-edit.tpl.html","webpack:///./bundles/setup/system-email/system-email-list.controller.js","webpack:///./bundles/setup/system-email/system-email-list.tpl.html","webpack:///./bundles/setup/task/task-edit.controller.js","webpack:///./bundles/setup/task/task-edit.tpl.html","webpack:///./bundles/setup/task/task-list.controller.js","webpack:///./bundles/setup/task/task-list.tpl.html","webpack:///./bundles/setup/user-fields/user-field-types.service.js","webpack:///./bundles/setup/user-fields/user-fields.controller.js","webpack:///./bundles/setup/user-fields/user-fields.tpl.html","webpack:///./shared/form-design/fd-toolbar.directive.js","webpack:///./shared/form-design/fd-toolbar.scss?50ce","webpack:///./shared/form-design/fd-toolbar.tpl.html","webpack:///./shared/services/setup/opts-invoice-template.service.js","webpack:///./shared/services/setup/reservation-field-option.service.js"],"names":["angular","module","controller","$scope","$translate","$window","dwAlerts","state","helper","debounce","allowedHosts","allowedHostService","$ctrl","setPageTitle","instant","save","allowedHost","form","index","$invalid","$$spin","catch","err","error","finally","new","push","isActive","delete","id","confirm","then","bank","bankService","optsTimezone","pointFirstInvalid","setPath","back","niceTimeDirective","name","banks","forEach","timezone","edit","setupService","settings","centerId","getCurrentCenterId","updateBarUploadSettings","result","$setPristine","bundlesConfig","autoSave","bundles","getOptionalBundles","get","config","wrap","saveFunc","saving","purify","reservationRulesDirective","dwAddressDirective","dwPhoneDirective","$timeout","center","Owner","Region","centerService","optsFreeAccessLength","NetCheckInSettings","vm","options","isNew","isFranchise","ownerRegionReadOnly","getLoggedUser","role","query","owners","unshift","regions","netCheckInSettings","freeAccessLength","$emit","nexkeySave","noop","remove","deleteCenter","uploadPhoto","$files","$invalidFiles","length","spinUpload","uploadThumbnail","thumbnail","data","photo","deletePhoto","promise","addTax","tax","taxRates","$setDirty","deleteTax","indexOf","centers","admin","permission","$injector","importAll","r","js","require","loadNewModules","m","default","invoke","$templateCache","ctx","key","put","replace","onInit","appointmentPlus","has","quickBooks","teamgo","kisi","nexkey","ezeep","greetly","saveOwner","owner","saveRegion","region","newOwner","newRegion","deleteOwner","deleteRegion","reservationFieldTypes","ReservationFieldOption","$q","close","field","roles","types","newOption","saveOption","option","fieldId","deleteOption","when","o","factory","$rootScope","icon","_name","t","translate","$on","type","dnd","fdToolbar","ReservationField","dwModal","ReservationFieldEditCtrl","Roles","reservationCategoryService","categories","fields","fieldsPromise","newFieldTpl","reservationCategoryId","required","access","reduce","res","all","category","c","onDrop","srcList","srcIndex","targetList","targetIndex","target","item","move","deleteField","saveField","editField","show","scope","templateUrl","inputs","deleting","dwSearchUserDirective","optsInvoiceTemplate","$route","userProfileService","optsInvoiceDate","optsProrateAtStart","optsProrateAtTermination","optsDashboardIncome","optsReservationCreditsUnit","optsMinPassFractionUnit","optsDeclinedPaymentAutoRetryPeriod","optsDeclinedPaymentAutoRetryAttempts","optsPassGracePeriod","advanceInvoicingDays","i","d","fetchOwners","fetchAdminRoles","updateSetupSettings","reload","calendarOwners","calOwner","fullName","firstName","lastName","company","email","adminRoles","addCalendarOwner","deleteCalendarOwner","idx","disconnectCalendar","window","updateSetupSettingsRaw","calendarConnected","ccTypeRequired","creditCardTypes","every","ccType","enable","systemEmail","systemService","optsSystemEmailFunction","functions","function","f","updateSystemEmail","createSystemEmail","removeSystemEmail","systemEmails","task","Task","optsTaskPermission","permissions","onChangeIsGroup","isGroup","tasks","tasksHidden","tasksHiddenCollapse","position","viewRoles","editRoles","join","UserField","userFieldTypes","userFields","sections","customFields","section","shareable","directive","template","bindToController","newItem","$element","scroller","$onInit","document","querySelector","addEventListener","onScroll","copy","subst","split","$onDestroy","removeEventListener","event","rect","parentNode","getBoundingClientRect","css","Math","min","top","opts","opt","$resource","$filter","deskworksConfig","getApiAbsUrl","update","method","params","$promise"],"mappings":"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","file":"setup~._b.js?_rev=ff44b22b81c13efae649","sourcesContent":["var map = {\n\t\"./api-settings/api-settings.tpl.html\": \"./bundles/setup/api-settings/api-settings.tpl.html\",\n\t\"./banks/bank-edit.tpl.html\": \"./bundles/setup/banks/bank-edit.tpl.html\",\n\t\"./banks/banks.tpl.html\": \"./bundles/setup/banks/banks.tpl.html\",\n\t\"./bar-upload-settings/bar-upload-settings.tpl.html\": \"./bundles/setup/bar-upload-settings/bar-upload-settings.tpl.html\",\n\t\"./bundles/bundles.tpl.html\": \"./bundles/setup/bundles/bundles.tpl.html\",\n\t\"./center/center-edit.tpl.html\": \"./bundles/setup/center/center-edit.tpl.html\",\n\t\"./center/center-list.tpl.html\": \"./bundles/setup/center/center-list.tpl.html\",\n\t\"./integrations-setup/integrations-setup.tpl.html\": \"./bundles/setup/integrations-setup/integrations-setup.tpl.html\",\n\t\"./owners-regions/owners-regions.tpl.html\": \"./bundles/setup/owners-regions/owners-regions.tpl.html\",\n\t\"./reservation-fields/reservation-field-edit.tpl.html\": \"./bundles/setup/reservation-fields/reservation-field-edit.tpl.html\",\n\t\"./reservation-fields/reservation-fields.tpl.html\": \"./bundles/setup/reservation-fields/reservation-fields.tpl.html\",\n\t\"./settings/settings.tpl.html\": \"./bundles/setup/settings/settings.tpl.html\",\n\t\"./system-email/system-email-edit.tpl.html\": \"./bundles/setup/system-email/system-email-edit.tpl.html\",\n\t\"./system-email/system-email-list.tpl.html\": \"./bundles/setup/system-email/system-email-list.tpl.html\",\n\t\"./task/task-edit.tpl.html\": \"./bundles/setup/task/task-edit.tpl.html\",\n\t\"./task/task-list.tpl.html\": \"./bundles/setup/task/task-list.tpl.html\",\n\t\"./user-fields/user-fields.tpl.html\": \"./bundles/setup/user-fields/user-fields.tpl.html\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/setup sync recursive .*\\\\.tpl\\\\.html$\";","var map = {\n\t\"./api-settings/api-settings.controller.js\": \"./bundles/setup/api-settings/api-settings.controller.js\",\n\t\"./banks/bank-edit.controller.js\": \"./bundles/setup/banks/bank-edit.controller.js\",\n\t\"./banks/banks.controller.js\": \"./bundles/setup/banks/banks.controller.js\",\n\t\"./bar-upload-settings/bar-upload-settings.controller.js\": \"./bundles/setup/bar-upload-settings/bar-upload-settings.controller.js\",\n\t\"./bundles/bundles.controller.js\": \"./bundles/setup/bundles/bundles.controller.js\",\n\t\"./center/center-edit.controller.js\": \"./bundles/setup/center/center-edit.controller.js\",\n\t\"./center/center-list.controller.js\": \"./bundles/setup/center/center-list.controller.js\",\n\t\"./integrations-setup/integrations-setup.controller.js\": \"./bundles/setup/integrations-setup/integrations-setup.controller.js\",\n\t\"./owners-regions/owners-regions.controller.js\": \"./bundles/setup/owners-regions/owners-regions.controller.js\",\n\t\"./reservation-fields/reservation-field-edit.controller.js\": \"./bundles/setup/reservation-fields/reservation-field-edit.controller.js\",\n\t\"./reservation-fields/reservation-field-types.service.js\": \"./bundles/setup/reservation-fields/reservation-field-types.service.js\",\n\t\"./reservation-fields/reservation-fields.controller.js\": \"./bundles/setup/reservation-fields/reservation-fields.controller.js\",\n\t\"./settings/settings.controller.js\": \"./bundles/setup/settings/settings.controller.js\",\n\t\"./system-email/system-email-edit.controller.js\": \"./bundles/setup/system-email/system-email-edit.controller.js\",\n\t\"./system-email/system-email-list.controller.js\": \"./bundles/setup/system-email/system-email-list.controller.js\",\n\t\"./task/task-edit.controller.js\": \"./bundles/setup/task/task-edit.controller.js\",\n\t\"./task/task-list.controller.js\": \"./bundles/setup/task/task-list.controller.js\",\n\t\"./user-fields/user-field-types.service.js\": \"./bundles/setup/user-fields/user-field-types.service.js\",\n\t\"./user-fields/user-fields.controller.js\": \"./bundles/setup/user-fields/user-fields.controller.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/setup sync recursive \\\\..+\\\\/.+\\\\.js$\";","export default angular.module('deskworks.ApiSettingsCtrl', [\n  'debounce',\n  'deskworks.allowedHost.service',\n])\n\n  .controller('ApiSettingsCtrl', function($scope, $translate, $window, dwAlerts, state, helper, debounce,\n                                          allowedHosts, allowedHostService) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('API_SETTINGS.PAGE_TITLE'));\n\n    $ctrl.allowedHosts = allowedHosts;\n\n    /**\n     * Save handler\n     */\n    $ctrl.save = debounce(save, 1000);\n    function save(allowedHost, form, index) {\n      if (form.$invalid) return;\n\n      allowedHost.$$spin = true;\n      return allowedHostService.save(allowedHost)\n        .catch(err => dwAlerts.error(err, 'Failed to save allowed host.'))\n        .finally(() => { allowedHost.$$spin = false; });\n    }\n\n    /**\n     * New handler\n     */\n    $ctrl.new = () => { $ctrl.allowedHosts.push({ isActive: true }); };\n\n    /**\n     * Delete LeadSource handler\n     */\n    $ctrl.delete = (allowedHost, index) => {\n      if (allowedHost.id) { // existing allowed host\n        if (!$window.confirm($translate.instant('API_SETTINGS.ALLOWED_HOSTS.CONFIRM_DELETE'))) return;\n        allowedHost.$$spin = true;\n        return allowedHostService.delete(allowedHost.id)\n          .catch(err => dwAlerts.error(err, 'Failed to delete allowed host.'))\n          .then(() => { $ctrl.allowedHosts.splice(index, 1); })\n          .finally(() => { allowedHost.$$spin = false; });\n      } else { // new allowed host\n        $ctrl.allowedHosts.splice(index, 1);\n      }\n    };\n  });\n","// Module\nvar code = \"<div class=\\\"lead-source-list\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel style=\\\"max-width:815px\\\"> <ff-panel-header> <span translate=\\\"API_SETTINGS.ALLOWED_HOSTS.HEADER\\\"></span> <ff-hint><span translate=\\\"API_SETTINGS.ALLOWED_HOSTS.HINT\\\"></span></ff-hint> </ff-panel-header> <ff-header> <ff-row> <cell flex=\\\"0 0 60px\\\" class=\\\"ff-center\\\"><span translate=\\\"API_SETTINGS.ALLOWED_HOSTS.ACTIVE\\\"></span></cell> <cell><req translate=\\\"API_SETTINGS.ALLOWED_HOSTS.URL\\\"></req></cell> </ff-row> </ff-header> <form name=\\\"form\\\" ng-repeat=\\\"host in $ctrl.allowedHosts\\\" novalidate> <ff-row ff-dim=\\\"host.$$spin\\\"> <ff-checkbox flex=\\\"0 0 60px\\\" ff-model=\\\"host.isActive\\\" class=\\\"ff-center ff-control\\\" ff-change=\\\"$ctrl.save(host, form, $index)\\\"></ff-checkbox> <ff-text ff-model=\\\"host.hostUrl\\\" ff-required=\\\"true\\\" placeholder=\\\"https://thesatellite.satellitedeskworks.com\\\" ff-validate-alert=\\\"{{'API_SETTINGS.ALLOWED_HOSTS.URL' | translate}}\\\" ff-change=\\\"$ctrl.save(host, form, $index)\\\"></ff-text> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\" flex=\\\"none\\\" class=\\\"buttons-row\\\" ff-click=\\\"$ctrl.delete(host, $index)\\\" title=\\\"{{'GLOBAL.BTN_DELETE' | translate}}\\\"></ff-btn> </ff-row> </form> <ff-btn-group class=\\\"ff-section-buttons\\\"> <ff-btn sense=\\\"new\\\" size=\\\"sm\\\" ff-click=\\\"$ctrl.new()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> </ff-panel> </div> </div> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.SetupBankEditCtrl', [\n  'deskworks.bank.service',\n  'deskworks.routeHelper',\n  'deskworks.optsTimezone',\n])\n\n  .controller('SetupBankEditCtrl', function($scope, $window, $translate, dwAlerts, state, helper, bank,\n                                            bankService, optsTimezone) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant(bank.id === 'new' ? 'BANKS.NEW.PAGE_TITLE' : 'BANKS.EDIT.PAGE_TITLE'));\n\n    $ctrl.bank = bank;\n    $ctrl.optsTimezone = optsTimezone;\n\n    $ctrl.save = () => {\n      if (helper.pointFirstInvalid('#bankEdit')) return;\n\n      return bankService.save($ctrl.bank)\n        .catch(err => dwAlerts.error(err, 'Failed to save bank'))\n        .then(() => state.setPath('/banks'));\n    };\n\n    $ctrl.delete = () => {\n      if ($window.confirm($translate.instant('BANKS.CONFIRM_DELETE'))) {\n        return bankService.delete($ctrl.bank.id)\n          .catch(err => dwAlerts.error(err, 'Failed to delete bank'))\n          .then(() => state.setPath('/banks'));\n      }\n    };\n\n    $ctrl.back = state.back;\n  });\n","// Module\nvar code = \"<form name=\\\"$ctrl.form\\\" id=\\\"bankEdit\\\" novalidate ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel style=\\\"max-width:815px\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 200px\\\"><req translate=\\\"BANKS.NAME\\\"></req></ff-label> <ff-text flex=\\\"1 1 290px\\\" name=\\\"name\\\" ff-model=\\\"$ctrl.bank.name\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'BANKS.NAME' | translate}}\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 200px\\\"><req translate=\\\"BANKS.TIMEZONE\\\"></req></ff-label> <ff-select flex=\\\"1 1 290px\\\" name=\\\"timezone\\\" ff-model=\\\"$ctrl.bank.timezone\\\" ff-options=\\\"tz.id as tz.name for tz in $ctrl.optsTimezone\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'BANKS.TIMEZONE' | translate}}\\\"></ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 200px\\\"><req translate=\\\"BANKS.CC_CUT_OFF_TIME\\\"></req></ff-label> <ff-time flex=\\\"1 1 290px\\\" name=\\\"creditCardCutOffTime\\\" ff-model=\\\"$ctrl.bank.creditCardCutOffTime\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'BANKS.CC_CUT_OFF_TIME' | translate}}\\\"></ff-time> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 200px\\\"><span translate=\\\"BANKS.NOTES\\\"></span></ff-label> <ff-text flex=\\\"1 1 290px\\\" name=\\\"notes\\\" ff-model=\\\"$ctrl.bank.notes\\\"></ff-text> </label> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"save\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.save()\\\" ff-disabled=\\\"$ctrl.form.$pristine\\\"> <span translate=\\\"GLOBAL.BTN_SAVE\\\"></span> </ff-btn> <ff-btn sense=\\\"delete\\\" ff-click=\\\"$ctrl.delete()\\\" ng-if=\\\"$ctrl.bank.id !== 'new'\\\"> <span translate=\\\"GLOBAL.BTN_DELETE\\\"></span> </ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> </form> \";\n// Exports\nmodule.exports = code;","import niceTimeDirective from 'shared/nice-date-time/nice-time.directive';\n\nexport default angular.module('deskworks.SetupBanksCtrl', [\n  'deskworks.SetupBankEditCtrl',\n  'deskworks.bank.service',\n  'deskworks.routeHelper',\n  'deskworks.optsTimezone',\n  niceTimeDirective.name,\n])\n\n  .controller('SetupBanksCtrl', function($scope, $translate, state, helper, banks, optsTimezone) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('BANKS.PAGE_TITLE'));\n\n    $ctrl.banks = banks;\n\n    $ctrl.banks.forEach(bank => {\n      bank.timezone = (helper.find(optsTimezone, bank.timezone) || {}).name || bank.timezone;\n    });\n\n    /**\n     * Edit Bank handler\n     */\n    $ctrl.edit = bank => state.setPath('/banks/' + bank.id);\n\n    /**\n     * New Bank handler\n     */\n    $ctrl.new = () => state.setPath('/banks/new');\n  });\n","// Module\nvar code = \"<div class=\\\"banks\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel> <span ng-if=\\\"!$ctrl.banks.length\\\" translate=\\\"BANKS.LIST.EMPTY\\\"></span> <ff-header ng-show=\\\"$ctrl.banks.length > 0\\\"> <ff-row> <cell flex=\\\"1 1 25%\\\"><span translate=\\\"BANKS.NAME\\\"></span></cell> <cell flex=\\\"1 1 25%\\\"><span translate=\\\"BANKS.TIMEZONE\\\"></span></cell> <cell flex=\\\"1 1 25%\\\" class=\\\"ff-center\\\"><span translate=\\\"BANKS.CC_CUT_OFF_TIME\\\"></span></cell> <cell flex=\\\"1 1 25%\\\" class=\\\"show-sm\\\"><span translate=\\\"BANKS.NOTES\\\"></span></cell> <ff-btn size=\\\"xs\\\" class=\\\"buttons-row zero-height\\\"></ff-btn> </ff-row> </ff-header> <ff-row ng-repeat=\\\"bank in $ctrl.banks\\\"> <ff-static flex=\\\"1 1 25%\\\" ff-bind=\\\"bank.name\\\"></ff-static> <ff-static flex=\\\"1 1 25%\\\" ff-bind=\\\"bank.timezone\\\"></ff-static> <ff-static flex=\\\"1 1 25%\\\" class=\\\"ff-center\\\"><span nice-time=\\\"bank.creditCardCutOffTime\\\"></span></ff-static> <ff-static flex=\\\"1 1 25%\\\" ff-bind=\\\"bank.notes\\\" class=\\\"show-sm\\\"></ff-static> <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" flex=\\\"none\\\" class=\\\"buttons-row\\\" ff-click=\\\"$ctrl.edit(bank)\\\" title=\\\"{{'GLOBAL.BTN_EDIT' | translate}}\\\"></ff-btn> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"new\\\" ff-click=\\\"$ctrl.new()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> </div> </div> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.BarUploadSettingsCtrl', [\n  'deskworks.state',\n  'deskworks.setup.service'\n])\n\n  .controller('BarUploadSettingsCtrl', function($scope, $translate, dwAlerts, state, helper, setupService, settings) {\n    var $ctrl = this;\n\n    state.setPageTitle($translate.instant('BAR_UPLOAD_SETTINGS.PAGE_TITLE'));\n\n    $ctrl.settings = settings;\n    $ctrl.settings.centerId = state.getCurrentCenterId();\n\n    /**\n     * Save settings\n     */\n    $ctrl.save = function() {\n      if(helper.pointFirstInvalid('#setupBarUploadSettings')) { return; }\n\n      return setupService.updateBarUploadSettings($ctrl.settings)\n        .then(function(result) { $ctrl.form.$setPristine(); })\n        .catch(function(err) { return dwAlerts.error(err, 'Failed to save bar upload settings.'); });\n    };\n  });\n","// Module\nvar code = \"<form name=\\\"$ctrl.form\\\" id=\\\"setupBarUploadSettings\\\" novalidate ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <flex-form style=\\\"max-width:640px\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 220px\\\"><req translate=\\\"BAR_UPLOAD_SETTINGS.PRODUCT\\\"></req></ff-label> <ff-select flex=\\\"1 1 370px\\\" name=\\\"product\\\" ff-model=\\\"$ctrl.settings.product\\\" ff-required=\\\"true\\\" ff-options=\\\"product.name for product in $ctrl.settings.options.serviceProducts\\\" ff-validate-alert=\\\"{{'BAR_UPLOAD_SETTINGS.PRODUCT' | translate}}\\\"></ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 220px\\\"><req translate=\\\"BAR_UPLOAD_SETTINGS.MEMBER_NAME\\\"></req></ff-label> <ff-text flex=\\\"1 1 370px\\\" name=\\\"colMemberName\\\" ff-model=\\\"$ctrl.settings.colMemberName\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'BAR_UPLOAD_SETTINGS.MEMBER_NAME' | translate}}\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 220px\\\"><req translate=\\\"BAR_UPLOAD_SETTINGS.CHARGE_AMOUNT\\\"></req></ff-label> <ff-text flex=\\\"1 1 370px\\\" name=\\\"colChargeAmount\\\" ff-model=\\\"$ctrl.settings.colChargeAmount\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'BAR_UPLOAD_SETTINGS.CHARGE_AMOUNT' | translate}}\\\"></ff-text> </label> </flex-form> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"save\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.save()\\\" ff-disabled=\\\"$ctrl.form.$pristine\\\"> <span translate=\\\"GLOBAL.BTN_SAVE\\\"></span> </ff-btn> </ff-btn-group> </form> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.BundlesCtrl', [\n  'autoSave',\n  'deskworks.bundlesConfig',\n])\n\n  .controller('BundlesCtrl', function($scope, state, helper, dwAlerts, bundlesConfig, autoSave) {\n    const $ctrl = this;\n\n    state.setPageTitle('Bundles Configuration');\n\n    $ctrl.bundles = bundlesConfig.getOptionalBundles();\n\n    bundlesConfig.get()\n      .catch(err => dwAlerts.error(err, 'Failed to get bundles config'))\n      .then(config => { $ctrl.config = config; });\n\n    $ctrl.save = autoSave.wrap(saveFunc);\n\n    function saveFunc() {\n      $ctrl.saving = true;\n      return bundlesConfig.save(helper.purify($ctrl.config))\n        .catch(err => dwAlerts.error(err, 'Failed to save bundles config.'))\n        .finally(() => { $ctrl.saving = false; });\n    }\n  });\n","// Module\nvar code = \"<div> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <ff-panel style=\\\"max-width:815px\\\" ff-dim=\\\"!$ctrl.config\\\" class=\\\"ff-bmargin\\\"> <ff-header> <ff-row> <cell flex=\\\"0 0 36px\\\" class=\\\"ff-center\\\" ff-dim=\\\"$ctrl.saving\\\"><ff-icon sense=\\\"checkMark\\\"></ff-icon></cell> <cell>Bundle</cell> </ff-row> </ff-header> <label class=\\\"ff-row\\\" ng-repeat=\\\"bundle in $ctrl.bundles\\\"> <ff-static flex=\\\"0 0 36px\\\" class=\\\"ff-center\\\"> <ff-checkbox name=\\\"enable\\\" ff-model=\\\"$ctrl.config[bundle.id]\\\" ff-change=\\\"$ctrl.save()\\\"></ff-checkbox> </ff-static> <ff-static>{{::bundle.name}}</ff-static> </label> </ff-panel> </div> \";\n// Exports\nmodule.exports = code;","import reservationRulesDirective from 'shared/reservation-rules/reservation-rules.component';\nimport dwAddressDirective from 'shared/dw-controls/dw-address/dw-address.directive';\nimport dwPhoneDirective from 'shared/dw-controls/dw-phone.directive';\n\nexport default angular.module('deskworks.CenterEditCtrl', [\n  'deskworks.center.service',\n  'deskworks.optsTimezone',\n  'deskworks.Owner',\n  'deskworks.Region',\n  'deskworks.NetCheckInSettings',\n  'deskworks.setup.optsFreeAccessLength',\n  reservationRulesDirective.name,\n  dwAddressDirective.name,\n  dwPhoneDirective.name,\n])\n\n  .controller('CenterEditCtrl', function($scope, $translate, $window, $timeout, dwAlerts, state, helper, center, settings,\n                                         Owner, Region, centerService, optsTimezone, optsFreeAccessLength,\n                                         NetCheckInSettings) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant(center.id ? 'CENTERS.EDIT.PAGE_TITLE' : 'CENTERS.NEW.PAGE_TITLE'));\n\n    vm.center = center;\n    vm.banks = center.options.banks;\n    vm.optsTimezone = optsTimezone;\n    vm.optsFreeAccessLength = optsFreeAccessLength;\n\n    const isNew = !vm.center.id || vm.center.id === 'new';\n\n    if (settings.isFranchise) {\n      vm.ownerRegionReadOnly = state.getLoggedUser().role !== 'master';\n      Owner.query()\n        .catch(err => dwAlerts.error(err, 'Failed to query owners.'))\n        .then(owners => { vm.owners = owners; vm.owners.unshift({ id: null, name: $translate.instant('GLOBAL.NONE') }); });\n\n      Region.query()\n        .catch(err => dwAlerts.error(err, 'Failed to query regions.'))\n        .then(regions => { vm.regions = regions; vm.regions.unshift({ id: null, name: $translate.instant('GLOBAL.NONE') }); });\n    }\n\n    if (isNew) {\n      vm.netCheckInSettings = { freeAccessLength: 120 };\n    } else {\n      NetCheckInSettings.get(vm.center.id)\n        .catch(err => dwAlerts.error(err, 'Failed to get net check-in settings.'))\n        .then(settings => { vm.netCheckInSettings = settings; });\n    }\n\n    /**\n     * Save Center handler\n     */\n    vm.save = function() {\n      if (helper.pointFirstInvalid('#centerEdit')) return;\n\n      return centerService.save(vm.center)\n        .catch(err => dwAlerts.error(err, 'Failed to save center.'))\n        .then(result => NetCheckInSettings.save(vm.center.id, vm.netCheckInSettings)\n          .catch(err => { dwAlerts.error(err, 'Failed to save net check-in settings.'); }) // skip errors\n          .then(() => result)\n        )\n        .then(result => {\n          $scope.$emit('CENTERS:REFRESH');\n\n          if (isNew) return state.setPath('/centers/' + result.id);\n\n          if (vm.nexkeySave) {\n            return vm.nexkeySave().catch(angular.noop);\n          }\n        })\n        .then(() => centerService.get(vm.center.id)\n          .catch(err => dwAlerts.error(err, 'Failed to get center.'))\n          .then(center => {\n            vm.center = center;\n            vm.form.$setPristine();\n          }));\n    };\n\n    /**\n     * Remove Center handler\n     */\n    vm.remove = function() {\n      if (!confirm($translate.instant('CENTERS.CONFIRM_DELETE'))) return;\n\n      return centerService.deleteCenter(vm.center.id)\n        .catch(err => dwAlerts.error(err, 'Failed to delete center.'))\n        .then(result => {\n          $scope.$emit('CENTERS:REFRESH');\n          return state.setPath('/centers');\n        });\n    };\n\n    /**\n     * Back button handler\n     */\n    vm.back = function() {\n      return state.setPath('/centers');\n    };\n\n    /**\n     * Upload Photo handler\n     * @param $files - files to upload\n     * @param $invalidFiles - files rejected by ngfPattern directive\n     */\n    vm.uploadPhoto = function($files, $invalidFiles) {\n      if ($invalidFiles && $invalidFiles.length > 0) return dwAlerts.error($translate.instant('CENTERS.PHOTO.INVALID_FORMAT'));\n\n      if ($files && $files.length > 0) {\n        vm.spinUpload = true;\n        return centerService.uploadThumbnail(vm.center.id, $files[0])\n          .catch(err => {\n            vm.spinUpload = false;\n            return dwAlerts.error(err, 'Failed to upload center thumbnail.');\n          })\n          .then(result => {\n            vm.spinUpload = false;\n            vm.center.thumbnail = result.data.photo;\n            vm.center.photo = result.data.photo;\n            $scope.$emit('CENTERS:REFRESH');\n            return result.data;\n          });\n      }\n    };\n\n    /**\n     * Delete photo\n     */\n    vm.deletePhoto = () => {\n      if (!$window.confirm($translate.instant('GLOBAL.CONFIRM_DELETE_PHOTO'))) return;\n\n      const promise = centerService.deletePhoto({ centerId: state.getCurrentCenterId() })\n        .catch(err => dwAlerts.error(err, 'Failed to delete photo.'));\n\n      promise\n        .then(() => $timeout())\n        .then(() => {\n          vm.center.thumbnail = null;\n          vm.center.photo = null;\n        });\n\n      return promise;\n    };\n\n    vm.addTax = function() {\n      const tax = {};\n      if (!vm.center.taxRates.length) tax.name = $translate.instant('CENTERS.TAX.NAME.DEFAULT');\n      vm.center.taxRates.push(tax);\n      vm.form.$setDirty();\n    };\n\n    vm.deleteTax = function(tax) {\n      vm.center.taxRates.splice(vm.center.taxRates.indexOf(tax), 1);\n      vm.form.$setDirty();\n    };\n  });\n","// Module\nvar code = \"<div class=\\\"ff-grid gutter-v\\\"> <form name=\\\"vm.form\\\" id=\\\"centerEdit\\\" novalidate ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-h gutter-v\\\"> <ff-panel flex=\\\"{ md: '0 0 50%' }\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"CENTERS.NAME\\\"></req></ff-label> <ff-text name=\\\"name\\\" ff-model=\\\"vm.center.name\\\" ff-required=\\\"true\\\" placeholder=\\\"The Satellite Felton\\\" ff-validate-alert=\\\"{{'CENTERS.NAME' | translate}}\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"CENTERS.SHORT_NAME\\\"></req></ff-label> <ff-text name=\\\"shortName\\\" ff-model=\\\"vm.center.shortName\\\" ff-required=\\\"true\\\" placeholder=\\\"Felton\\\" ff-validate-alert=\\\"{{'CENTERS.SHORT_NAME' | translate}}\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"CENTERS.PHONE\\\"></req></ff-label> <ff-text name=\\\"phone\\\" ff-model=\\\"vm.center.phone\\\" ff-required=\\\"true\\\" dw-phone ff-validate-alert=\\\"{ field: ('CENTERS.PHONE' | translate), pattern: ('GLOBAL.VALIDATION.PHONE' | translate) }\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"CENTERS.FAX\\\"></req></ff-label> <ff-text name=\\\"fax\\\" ff-model=\\\"vm.center.fax\\\" ff-required=\\\"true\\\" dw-phone ff-validate-alert=\\\"{ field: ('CENTERS.FAX' | translate), pattern: ('GLOBAL.VALIDATION.PHONE' | translate) }\\\"> </ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"CENTERS.EMAIL\\\"></req></ff-label> <ff-email name=\\\"email\\\" ff-model=\\\"vm.center.email\\\" ff-required=\\\"true\\\" placeholder=\\\"felton@thesatelliteinc.com\\\" ff-validate-alert=\\\"{{'CENTERS.EMAIL' | translate}}\\\"></ff-email> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><span translate=\\\"CENTERS.COLOR\\\"></span></ff-label> <ff-text name=\\\"color\\\" ff-model=\\\"vm.center.color\\\" placeholder=\\\"red, blue, #fe00d3, #0f0\\\" ff-validate-alert=\\\"{{'CENTERS.COLOR' | translate}}\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"CENTERS.TIMEZONE\\\"></req></ff-label> <ff-select name=\\\"timezone\\\" ff-model=\\\"vm.center.timezone\\\" ff-required=\\\"true\\\" ff-options=\\\"tz.id as tz.name for tz in vm.optsTimezone\\\" ff-validate-alert=\\\"{{'CENTERS.TIMEZONE' | translate}}\\\"></ff-select> </label> <label class=\\\"ff-row\\\" ng-if=\\\"$resolve.settings.isFranchise\\\"> <ff-label flex=\\\"0 0 100px\\\"><span translate=\\\"CENTERS.OWNER\\\"></span></ff-label> <ff-select name=\\\"owner\\\" ff-model=\\\"vm.center.ownerId\\\" ff-bulk-read-only=\\\"vm.ownerRegionReadOnly\\\" ff-options=\\\"owner.id as owner.name for owner in vm.owners\\\" ff-validate-alert=\\\"{{'CENTERS.OWNER' | translate}}\\\"></ff-select> </label> <label class=\\\"ff-row\\\" ng-if=\\\"$resolve.settings.isFranchise\\\"> <ff-label flex=\\\"0 0 100px\\\"><span translate=\\\"CENTERS.REGION\\\"></span></ff-label> <ff-select name=\\\"region\\\" ff-model=\\\"vm.center.regionId\\\" ff-bulk-read-only=\\\"vm.ownerRegionReadOnly\\\" ff-options=\\\"region.id as region.name for region in vm.regions\\\" ff-validate-alert=\\\"{{'CENTERS.REGION' | translate}}\\\"></ff-select> </label> </ff-panel> <ff-panel flex=\\\"{ md: '0 0 50%' }\\\"> <fieldset dw-address=\\\"vm.center\\\" second-street=\\\"true\\\"></fieldset> <label class=\\\"ff-row\\\" ng-if=\\\"vm.center.options.qboClasses\\\"> <ff-label flex=\\\"0 0 116px\\\"><span translate=\\\"CENTERS.QBO_CLASS\\\"></span></ff-label> <ff-select name=\\\"qboAccount\\\" ff-model=\\\"vm.center.qboClassId\\\"> <option value=\\\"\\\">-</option> <option ng-repeat=\\\"class in vm.center.options.qboClasses\\\" value=\\\"{{class.id}}\\\">{{class.name}}</option> </ff-select> </label> </ff-panel> <ff-panel flex=\\\"{ md: '0 0 50%' }\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"CENTERS.BANK\\\"></req></ff-label> <ff-select name=\\\"bank\\\" ff-model=\\\"vm.center.bankId\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'CENTERS.BANK' | translate}}\\\" ff-options=\\\"bank.id as bank.name for bank in vm.banks\\\"></ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"> <span> <span translate=\\\"CENTERS.TAX.ID\\\"></span> <ff-hint><span translate=\\\"CENTERS.TAX.ID.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-text name=\\\"taxId\\\" ff-model=\\\"vm.center.taxId\\\"></ff-text> </label> <ff-row ng-repeat=\\\"tax in vm.center.taxRates\\\"> <label> <ff-label flex=\\\"0 0 100px\\\"> <span translate=\\\"CENTERS.TAX.INDEX\\\" translate-values=\\\"{ index: $index + 1 }\\\"></span> </ff-label> <ff-text flex=\\\"auto\\\" name=\\\"taxName\\\" ff-model=\\\"tax.name\\\" placeholder=\\\"{{'CENTERS.TAX.NAME' | translate}}\\\" ff-required=\\\"true\\\" ff-unique=\\\"{ array: vm.center.taxRates, prop: 'name' }\\\" ff-model-options=\\\"{ allowInvalid: true }\\\" flex=\\\"auto\\\" ff-validate-alert=\\\"{{'CENTERS.TAX.NAME' | translate}}\\\"></ff-text> </label> <ff-number name=\\\"taxRate\\\" ff-model=\\\"tax.rate\\\" flex=\\\"0 1 72px\\\" placeholder=\\\"{{'CENTERS.TAX.RATE' | translate}}\\\" ff-required=\\\"true\\\" ff-gt=\\\"0\\\" ff-validate-alert=\\\"{{'CENTERS.TAX.RATE' | translate}}\\\"></ff-number> <ff-btn flex=\\\"none\\\" class=\\\"buttons-row\\\" sense=\\\"delete\\\" size=\\\"xs\\\" ff-click=\\\"vm.deleteTax(tax)\\\" title=\\\"{{'CENTERS.TAX.BTN_DELETE.HINT' | translate}}\\\"></ff-btn> </ff-row> <ff-btn-group class=\\\"ff-section-buttons\\\"> <ff-btn sense=\\\"add\\\" size=\\\"sm\\\" ff-click=\\\"vm.addTax()\\\"><span translate=\\\"CENTERS.TAX.BTN_ADD\\\"></span></ff-btn> </ff-btn-group> </ff-panel> <ff-panel flex=\\\"{ md: '0 0 50%' }\\\"> <ff-label> <label> <ff-checkbox name=\\\"forInternalUse\\\" ff-model=\\\"vm.center.forInternalUse\\\"> <span translate=\\\"CENTERS.INTERNAL_USE\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"CENTERS.INTERNAL_USE.HINT\\\"></span></ff-hint> </ff-label> <ff-label> <label> <ff-checkbox name=\\\"hideInMemberSignUp\\\" ff-model=\\\"vm.center.hideInMemberSignUp\\\"> <span translate=\\\"CENTERS.HIDE_IN_MEMBER_SIGN_UP\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"CENTERS.HIDE_IN_MEMBER_SIGN_UP.HINT\\\"></span></ff-hint> </ff-label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 160px\\\"> <span translate=\\\"CENTERS.FREE_ACCESS\\\"></span> &nbsp; <ff-hint><span translate=\\\"CENTERS.FREE_ACCESS.HINT\\\"></span></ff-hint> </ff-label> <ff-select name=\\\"freeAccessLength\\\" ff-model=\\\"vm.netCheckInSettings.freeAccessLength\\\" ff-options=\\\"opt.id as opt.name for opt in vm.optsFreeAccessLength\\\" ff-disabled=\\\"!vm.netCheckInSettings\\\"></ff-select> </label> <nexkey-locks center-id=\\\"vm.center.id\\\" save=\\\"vm.nexkeySave\\\" ng-if=\\\"vm.center.id && vm.center.id !== 'new'\\\"></nexkey-locks> </ff-panel> <ff-panel flex=\\\"{ md: '0 0 50%' }\\\" ng-if=\\\"vm.center.id && vm.center.id !== 'new'\\\" ngf-drop=\\\"vm.uploadPhoto($files, $invalidFiles)\\\" ngf-pattern=\\\"'image/png,image/jpeg'\\\" ngf-drag-over-class=\\\"dragover\\\"> <ff-panel-header> <span translate=\\\"CENTERS.PHOTO.HEADER\\\"></span> <ff-hint><span translate=\\\"CENTERS.PHOTO.HINT\\\"></span></ff-hint> </ff-panel-header> <ff-col style=\\\"height:240px\\\"> <ff-col flex=\\\"auto\\\"> <ff-img flex=\\\"auto\\\" ff-style=\\\"{ height: '100%', width: 'auto', 'object-fit': 'contain' }\\\" ff-src=\\\"{{vm.center.thumbnail}}\\\" ff-src-hq=\\\"{{vm.center.photo}}\\\" ff-alt=\\\"{{vm.center.name}}\\\" img-placeholder=\\\"1280 x 640\\\"></ff-img> </ff-col> <ff-btn-group flex=\\\"none\\\" class=\\\"ff-section-buttons\\\"> <ff-btn sense=\\\"upload\\\" size=\\\"sm\\\" ff-spin=\\\"vm.spinUpload\\\" ngf-select=\\\"vm.uploadPhoto($files, $invalidFiles)\\\" ngf-pattern=\\\"'image/png,image/jpeg'\\\" accept=\\\"image/png,image/jpeg\\\"> <span translate=\\\"CENTERS.PHOTO.BTN_UPLOAD\\\"></span> </ff-btn> </ff-btn-group> </ff-col> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"save\\\" type=\\\"submit\\\" ff-click=\\\"vm.save()\\\" ff-disabled=\\\"vm.form.$pristine\\\"> <span translate=\\\"GLOBAL.BTN_SAVE\\\"></span> </ff-btn> <ff-btn sense=\\\"remove\\\" ff-click=\\\"vm.remove()\\\" ng-if=\\\"vm.center.id && vm.center.id !== 'new'\\\"> <span translate=\\\"GLOBAL.BTN_DELETE\\\"></span> </ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> </form> <reservation-rules center-id=\\\"vm.center.id\\\" ng-if=\\\"vm.center.id !== 'new'\\\" ff-bulk-read-only></reservation-rules> </div> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.CenterListCtrl', [])\n\n  .controller('CenterListCtrl', function($scope, $translate, state, helper, centers, admin) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('CENTERS.PAGE_TITLE'));\n\n    vm.centers = centers.filter(center => { // hide centers without permission\n      if (admin) return !!(helper.find(admin.centers, center.id) || {}).permission;\n      return true;\n    });\n\n    /**\n     * Edit Center handler\n     */\n    vm.edit = function(center) {\n      return state.setPath('/centers/' + center.id);\n    };\n\n    /**\n     * New Center handler\n     */\n    vm.new = function() {\n      return state.setPath('/centers/new');\n    };\n  });\n","// Module\nvar code = \"<div class=\\\"gutter-v\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <ff-panel style=\\\"max-width:600px\\\"> <ff-header> <ff-row> <cell flex=\\\"0 0 50%\\\"><span translate=\\\"CENTERS.CENTER\\\"></span></cell> <cell> <span translate=\\\"GLOBAL.ADDRESS.CITY\\\"></span>, <span translate=\\\"GLOBAL.ADDRESS.STATE\\\"></span> </cell> <ff-btn flex=\\\"none\\\" sense=\\\"edit\\\" size=\\\"xs\\\" class=\\\"buttons-row zero-height\\\"></ff-btn> </ff-row> </ff-header> <ff-row ng-repeat=\\\"center in vm.centers\\\"> <ff-static flex=\\\"0 0 50%\\\" ff-bind=\\\"::center.name\\\" ff-style=\\\"::center.color ? { color: center.color } : {}\\\"></ff-static> <ff-static ff-bind=\\\"::center.city + ', ' + center.state\\\"></ff-static> <ff-btn flex=\\\"none\\\" sense=\\\"edit\\\" size=\\\"xs\\\" class=\\\"buttons-row\\\" ff-click=\\\"vm.edit(center)\\\" title=\\\"{{'GLOBAL.BTN_EDIT' | translate}}\\\"></ff-btn> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"new\\\" ff-click=\\\"vm.new()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","const index = ['$injector', function index($injector) {\n  // JS\n  const importAll = r => r.keys().map(r);\n  const js = importAll(require.context('./', true, /\\..+\\/.+\\.js$/));\n  $injector.loadNewModules(js.map(m => m.default.name));\n\n  // Templates\n  $injector.invoke(['$templateCache', function($templateCache) {\n    const ctx = require.context('./', true, /.*\\.tpl\\.html$/);\n    ctx.keys().forEach(key => $templateCache.put(key.replace(/^\\.\\//, ''), ctx(key)));\n  }]);\n}];\n\nexport default index;\n","export default angular.module('deskworks.IntegrationsSetupCtrl', [])\n\n  .controller('IntegrationsSetupCtrl', function($scope, $translate, $injector, dwAlerts, state, helper) {\n    const $ctrl = this;\n\n    (function onInit() {\n      state.setPageTitle($translate.instant('INTEGRATIONS_SETUP.PAGE_TITLE'));\n      $ctrl.appointmentPlus = $injector.has('appointmentPlusSettingsDirective');\n      $ctrl.quickBooks = $injector.has('quickBooksCentersDirective');\n      $ctrl.teamgo = $injector.has('teamgoSettingsDirective');\n      $ctrl.kisi = $injector.has('kisiSettingsDirective');\n      $ctrl.nexkey = $injector.has('nexkeySettingsDirective');\n      $ctrl.ezeep = $injector.has('ezeepSettingsDirective');\n      $ctrl.greetly = $injector.has('greetlySettingsDirective');\n    })();\n  });\n","// Module\nvar code = \"<div id=\\\"integrationsSetup\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <quick-books-centers flex=\\\"{lg: '0 0 50%'}\\\" ng-if=\\\"$ctrl.quickBooks\\\" qb-apps=\\\"$ctrl.qbApps\\\"></quick-books-centers> <quick-books-apps flex=\\\"{lg: '0 0 50%'}\\\" ng-if=\\\"$ctrl.quickBooks\\\" qb-apps=\\\"$ctrl.qbApps\\\"></quick-books-apps> <appointment-plus-settings flex=\\\"{lg: '0 0 50%'}\\\" ng-if=\\\"$ctrl.appointmentPlus\\\"></appointment-plus-settings> <teamgo-settings flex=\\\"{lg: '0 0 50%'}\\\" ng-if=\\\"$ctrl.teamgo\\\"></teamgo-settings> <kisi-settings flex=\\\"{lg: '0 0 50%'}\\\" ng-if=\\\"$ctrl.kisi\\\"></kisi-settings> <nexkey-settings flex=\\\"{lg: '0 0 50%'}\\\" ng-if=\\\"$ctrl.nexkey\\\"></nexkey-settings> <ezeep-settings flex=\\\"{lg: '0 0 50%'}\\\" ng-if=\\\"$ctrl.ezeep\\\"></ezeep-settings> <greetly-settings flex=\\\"{lg: '0 0 50%'}\\\" ng-if=\\\"$ctrl.greetly\\\"></greetly-settings> </div> </div> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.OwnersRegionsCtrl', [\n  'debounce',\n  'deskworks.Owner',\n  'deskworks.Region',\n])\n\n  .controller('OwnersRegionsCtrl', function($scope, $translate, dwAlerts, state, debounce,\n                                             owners, regions, Owner, Region) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('OWNERS_REGIONS.PAGE_TITLE'));\n\n    $ctrl.owners = owners;\n    $ctrl.regions = regions;\n\n    /**\n     * Save handler\n     */\n    $ctrl.saveOwner = debounce(saveOwner, 1000);\n    function saveOwner(owner, form, index) {\n      if (form.$invalid) return;\n\n      owner.$$spin = true;\n      return Owner.save(owner)\n        .catch(err => dwAlerts.error(err, 'Failed to save owner.'))\n        .finally(() => { owner.$$spin = false; });\n    }\n\n    $ctrl.saveRegion = debounce(saveRegion, 1000);\n    function saveRegion(region, form, index) {\n      if (form.$invalid) return;\n\n      region.$$spin = true;\n      return Region.save(region)\n        .catch(err => dwAlerts.error(err, 'Failed to save region.'))\n        .finally(() => { region.$$spin = false; });\n    }\n\n    /**\n     * New handler\n     */\n    $ctrl.newOwner = () => { $ctrl.owners.push({}); };\n\n    $ctrl.newRegion = () => { $ctrl.regions.push({}); };\n\n    /**\n     * Delete handler\n     */\n    $ctrl.deleteOwner = (owner, index) => {\n      if (owner.id) { // existing\n        owner.$$spin = true;\n        return Owner.delete(owner.id)\n          .catch(err => dwAlerts.error(err, 'Failed to delete owner.'))\n          .then(() => { $ctrl.owners.splice(index, 1); })\n          .finally(() => { owner.$$spin = false; });\n      } else { // new\n        $ctrl.owners.splice(index, 1);\n      }\n    };\n\n    $ctrl.deleteRegion = (region, index) => {\n      if (region.id) { // existing\n        region.$$spin = true;\n        return Region.delete(region.id)\n          .catch(err => dwAlerts.error(err, 'Failed to delete region.'))\n          .then(() => { $ctrl.regions.splice(index, 1); })\n          .finally(() => { region.$$spin = false; });\n      } else { // new\n        $ctrl.regions.splice(index, 1);\n      }\n    };\n  });\n","// Module\nvar code = \"<div class=\\\"owners-regions\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <ff-panel flex=\\\"{md: '0 0 50%'}\\\" class=\\\"ff-flex-start\\\"> <ff-panel-header><span translate=\\\"OWNERS_REGIONS.OWNERS.HEADER\\\"></span></ff-panel-header> <ff-header> <ff-row> <cell><req translate=\\\"OWNERS_REGIONS.OWNERS.NAME\\\"></req></cell> </ff-row> </ff-header> <form name=\\\"form\\\" ng-repeat=\\\"owner in $ctrl.owners\\\" novalidate> <ff-row ff-dim=\\\"owner.$$spin\\\"> <ff-text ff-model=\\\"owner.name\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'OWNERS_REGIONS.OWNERS.NAME' | translate}}\\\" ff-change=\\\"$ctrl.saveOwner(owner, form, $index)\\\"></ff-text> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\" flex=\\\"none\\\" class=\\\"buttons-row\\\" ff-click=\\\"$ctrl.deleteOwner(owner, $index)\\\" title=\\\"{{'GLOBAL.BTN_DELETE' | translate}}\\\"></ff-btn> </ff-row> </form> <ff-btn-group class=\\\"ff-section-buttons\\\"> <ff-btn sense=\\\"new\\\" size=\\\"sm\\\" ff-click=\\\"$ctrl.newOwner()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> </ff-panel> <ff-panel flex=\\\"{md: '0 0 50%'}\\\" class=\\\"ff-flex-start\\\"> <ff-panel-header><span translate=\\\"OWNERS_REGIONS.REGIONS.HEADER\\\"></span></ff-panel-header> <ff-header> <ff-row> <cell><req translate=\\\"OWNERS_REGIONS.REGIONS.NAME\\\"></req></cell> </ff-row> </ff-header> <form name=\\\"form\\\" ng-repeat=\\\"region in $ctrl.regions\\\" novalidate> <ff-row ff-dim=\\\"region.$$spin\\\"> <ff-text ff-model=\\\"region.name\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'OWNERS_REGIONS.REGIONS.NAME' | translate}}\\\" ff-change=\\\"$ctrl.saveRegion(region, form, $index)\\\"></ff-text> <ff-btn sense=\\\"remove\\\" size=\\\"xs\\\" flex=\\\"none\\\" class=\\\"buttons-row\\\" ff-click=\\\"$ctrl.deleteRegion(region, $index)\\\" title=\\\"{{'GLOBAL.BTN_DELETE' | translate}}\\\"></ff-btn> </ff-row> </form> <ff-btn-group class=\\\"ff-section-buttons\\\"> <ff-btn sense=\\\"new\\\" size=\\\"sm\\\" ff-click=\\\"$ctrl.newRegion()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> </ff-panel> </div> </div> \";\n// Exports\nmodule.exports = code;","import reservationFieldTypes from './reservation-field-types.service';\nimport ReservationFieldOption from 'shared/services/setup/reservation-field-option.service';\n\nexport default angular.module('deskworks.ReservationFieldEditCtrl', [\n  'debounce',\n  reservationFieldTypes.name,\n  ReservationFieldOption.name,\n])\n\n  .controller('ReservationFieldEditCtrl', function($scope, $q, close, dwAlerts, debounce, field,\n                                                   reservationFieldTypes, save, roles, ReservationFieldOption) {\n    // const $ctrl = this;\n\n    $scope.close = close;\n    $scope.field = field;\n    $scope.roles = roles;\n    $scope.save = save;\n    $scope.types = reservationFieldTypes;\n\n    $scope.newOption = (field) => {\n      field.options = field.options || [];\n      field.options.push({ name: '' })\n    };\n\n    $scope.saveOption = debounce(saveOption, 1000);\n    function saveOption(field, option, form) {\n      if (form.$invalid) return;\n\n      field.$$spin = true;\n      return ReservationFieldOption.save({ fieldId: field.id, option })\n        .catch(err => dwAlerts.error(err, 'Failed to save reservation field option.'))\n        .finally(() => { field.$$spin = false; })\n        .catch(angular.noop);\n    }\n\n    $scope.deleteOption = (field, option) => {\n      let promise = $q.when();\n      if (option.id) {\n        promise = ReservationFieldOption.delete({ fieldId: field.id, id: option.id })\n          .catch(err => dwAlerts.error(err, 'Failed to delete reservation field option.'));\n      }\n\n      promise.then(() => field.options.splice(field.options.find(o => o === option), 1));\n    };\n  });\n","// Module\nvar code = \"<div class=\\\"dw-modal\\\"> <div class=\\\"dw-modal-fade\\\" ng-click=\\\"close()\\\"></div> <div class=\\\"dw-modal-dialog\\\"> <div class=\\\"dw-modal-scroll\\\"> <div style=\\\"max-width:440px\\\"> <form name=\\\"form\\\" novalidate> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 70px\\\"><span translate=\\\"FORM_DESIGN.TYPE\\\"></span></ff-label> <ff-static>{{types[field.type].name}}</ff-static> <ff-static flex=\\\"0 0 36px\\\" ff-dim=\\\"field.$$spin\\\" class=\\\"ff-center\\\"> <i ng-class=\\\"types[field.type].icon\\\" class=\\\"text-brand\\\"></i> </ff-static> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 70px\\\"><req translate=\\\"FORM_DESIGN.NAME\\\"></req></ff-label> <ff-text ff-model=\\\"field.name\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'FORM_DESIGN.NAME' | translate}}\\\" ff-change=\\\"save(field, form)\\\"></ff-text> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 70px\\\"><span translate=\\\"FORM_DESIGN.REQUIRED\\\"></span></ff-label> <ff-static> <ff-checkbox ff-model=\\\"field.required\\\" ff-validate-alert=\\\"{{'FORM_DESIGN.REQUIRED' | translate}}\\\" ff-change=\\\"save(field, form)\\\"></ff-checkbox> </ff-static> </label> <ff-row> <ff-label flex=\\\"0 0 70px\\\"><span translate=\\\"FORM_DESIGN.ACCESS\\\"></span></ff-label> <ff-static> <div class=\\\"ff-grid gutter-h-half\\\" flex=\\\"auto\\\" style=\\\"justify-content:flex-start\\\"> <label flex=\\\"0 0 120px\\\" ng-repeat=\\\"role in roles\\\"> <ff-checkbox ff-model=\\\"field.access[role.id]\\\" ff-disabled=\\\"role.id === 'admin'\\\" ff-change=\\\"save(field, form)\\\">{{role.name}}</ff-checkbox> </label> </div> </ff-static> </ff-row> </form> <ff-row ng-if=\\\"field.type === 'dropdown'\\\"> <ff-label flex=\\\"0 0 70px\\\"><span translate=\\\"FORM_DESIGN.OPTIONS\\\"></span></ff-label> <ff-col> <ff-static ng-if=\\\"!field.options.length\\\"><span translate=\\\"GLOBAL.NONE\\\"></span></ff-static> <ng-form name=\\\"form\\\" class=\\\"ff-row\\\" ng-repeat=\\\"opt in field.options\\\"> <ff-text ff-model=\\\"opt.name\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'FORM_DESIGN.NAME' | translate}}\\\" ff-change=\\\"saveOption(field, opt, form)\\\" placeholder=\\\"{{'FORM_DESIGN.OPTION' | translate}}\\\"></ff-text> <ff-btn-group flex=\\\"none\\\" style=\\\"margin:0 .5rem\\\"> <ff-btn sense=\\\"delete\\\" size=\\\"xs\\\" ff-click=\\\"deleteOption(field, opt)\\\"></ff-btn> </ff-btn-group> </ng-form> </ff-col> </ff-row> <ff-btn-group style=\\\"margin:.5rem\\\" ng-if=\\\"field.type === 'dropdown'\\\"> <ff-btn sense=\\\"add\\\" size=\\\"xs\\\" title=\\\"{{'GLOBAL.BTN_NEW' | translate}}\\\" ff-click=\\\"newOption(field)\\\"></ff-btn> </ff-btn-group> </div> </div> <button class=\\\"dw-modal-cross\\\" ng-click=\\\"close()\\\"></button> </div> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Form Design field types\n */\nexport default angular.module('deskworks.reservationFieldTypes', [])\n\n  .factory('reservationFieldTypes', function($rootScope, $translate) {\n    const types = [\n      { id: 'customPrice', icon: 'fa fa-dollar', _name: 'FORM_DESIGN.TYPE.CUSTOM_PRICE' },\n      { id: 'extraPrice', icon: 'fa fa-plus', _name: 'FORM_DESIGN.TYPE.EXTRA_PRICE' },\n      { id: 'text', icon: 'fa fa-text-width', _name: 'FORM_DESIGN.TYPE.TEXT' },\n      { id: 'date', icon: 'fa fa-calendar', _name: 'FORM_DESIGN.TYPE.DATE' },\n      { id: 'url', icon: 'fa fa-chain', _name: 'FORM_DESIGN.TYPE.URL' },\n      { id: 'email', icon: 'fa fa-at', _name: 'FORM_DESIGN.TYPE.EMAIL' },\n      { id: 'phone', icon: 'fa fa-phone', _name: 'FORM_DESIGN.TYPE.PHONE' },\n      { id: 'number', icon: 'fa fa-hashtag', _name: 'FORM_DESIGN.TYPE.NUMBER' },\n      { id: 'dropdown', icon: 'fa fa-caret-down', _name: 'FORM_DESIGN.TYPE.DROPDOWN' },\n      { id: 'checkbox', icon: 'fa fa-check', _name: 'FORM_DESIGN.TYPE.CHECKBOX' },\n    ];\n\n    types.forEach(t => { types[t.id] = t; }); // array/object duality\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { types.forEach(type => { type.name = $translate.instant(type._name); }); }\n\n    return types;\n  });\n","import dnd from 'shared/drag-n-drop/dnd.service';\nimport ReservationField from 'shared/services/setup/reservation-field.service';\nimport reservationFieldTypes from './reservation-field-types.service';\nimport fdToolbar from 'shared/form-design/fd-toolbar.directive';\nimport dwModal from 'shared/dw-modal/dw-modal.service';\nimport ReservationFieldEditCtrl from './reservation-field-edit.controller';\n\nexport default angular.module('deskworks.ReservationFieldsCtrl', [\n  'debounce',\n  dnd.name,\n  'deskworks.UserField',\n  fdToolbar.name,\n  reservationFieldTypes.name,\n  ReservationField.name,\n  'deskworks.reservationCategory.service',\n  dwModal.name,\n  ReservationFieldEditCtrl.name,\n  'deskworks.Roles',\n])\n\n  .controller('ReservationFieldsCtrl', function($scope, $translate, $window, $q, dwAlerts, state, helper, debounce, dnd,\n                                                dwModal, Roles, ReservationField,\n                                                reservationCategoryService, reservationFieldTypes) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('RESERVATION_FIELDS.PAGE_TITLE'));\n\n    $ctrl.types = reservationFieldTypes;\n\n    /**\n     * Init\n     */\n    (onInit => {\n      $ctrl.categories = [{\n        id: 0, fields: [], name: $translate.instant('RESERVATION_FIELDS.SHARED.HEADER'),\n        // hint: $translate.instant('RESERVATION_FIELDS.SHARED.HINT'),\n      }];\n      // const categoriesPromise = reservationCategoryService.query(state.getCurrentCenterId())\n      //   .catch(err => dwAlerts.error(err, 'Failed to query reservation categories.'))\n      //   .then(res => {\n      //     $ctrl.categories = res.map(cat => ({ id: cat.id, name: cat.name, fields: [] }));\n      //     $ctrl.categories.unshift({\n      //       id: 0, fields: [], name: $translate.instant('RESERVATION_FIELDS.SHARED.HEADER'),\n      //       hint: $translate.instant('RESERVATION_FIELDS.SHARED.HINT'),\n      //     });\n      //   });\n\n      const fieldsPromise = ReservationField.query()\n        .catch(err => dwAlerts.error(err, 'Failed to query reservation fields.'));\n\n      Roles.query()\n        .catch(err => dwAlerts.error(err, 'Failed to query roles.'))\n        .then(roles => { $ctrl.roles = roles; })\n        .then(() => {\n          $ctrl.newFieldTpl = {\n            type: '$type.id', name: '', reservationCategoryId: '$target.id', required: false,\n            access: $ctrl.roles.reduce((res, role) => (res[role.id] = true, res) , {}),\n          }\n        });\n\n      // $q.all({ categoriesPromise, fields: fieldsPromise })\n      $q.all({ fields: fieldsPromise })\n        .then(({ fields }) => {\n          fields.forEach(field => {\n            const category = $ctrl.categories.find(c => c.id === field.reservationCategoryId);\n            if (!category) return;\n            category.fields.push(field);\n          });\n        });\n    })();\n\n    /**\n     * Drop handler\n     */\n    $ctrl.onDrop = (srcList, srcIndex, targetList, targetIndex, form, target) => {\n      let item = srcList[srcIndex];\n      if (!targetList && item.id && !$window.confirm($translate.instant('FORM_DESIGN.TRASH.CONFIRM'))) return false;\n      item = dnd.move(srcList, srcIndex, targetList, targetIndex);\n\n      if (item && target) item.reservationCategoryId = target.id;\n\n      if (!targetList) { // delete\n        if (!item.id) return true; // don't delete uncreated\n        deleteField(item);\n      } else { // update\n        if (form.$invalid) return true; // don't save invalid\n        saveField(item, form);\n      }\n\n      return true; // true is required by dnd-callback of dnd-list\n    };\n\n\n    /**\n     * Save handler\n     */\n    $ctrl.saveField = debounce(saveField, 1000);\n    function saveField(field, form) {\n      if (form.$invalid) return;\n\n      field.$$spin = true;\n      return ReservationField.save(field)\n        .catch(err => dwAlerts.error(err, 'Failed to save reservation field.'))\n        .finally(() => { field.$$spin = false; })\n        .catch(angular.noop);\n    }\n\n    /**\n     * Edit handler\n     */\n    $ctrl.editField = (field) => {\n      dwModal.show({\n        scope: $scope,\n        templateUrl: 'reservation-fields/reservation-field-edit.tpl.html',\n        controller: 'ReservationFieldEditCtrl as $ctrl',\n        inputs: { field, save: $ctrl.saveField, roles: $ctrl.roles },\n      });\n    };\n\n    /**\n     * Delete handler\n     */\n    function deleteField(field) {\n      if (!field.id) return; // not existing\n      field.$$spin = true;\n      $ctrl.deleting = true;\n      return ReservationField.delete(field.id)\n        .catch(err => dwAlerts.error(err, 'Failed to delete reservation field.'))\n        .finally(() => { field.$$spin = false; $ctrl.deleting = false; })\n        .catch(angular.noop);\n    }\n  });\n","// Module\nvar code = \"<div ff-bulk-read-only> <h4 class=\\\"page-title\\\"> <span>{{state.getPageTitle()}}</span> <ff-hint style=\\\"vertical-align:top;line-height:.8rem\\\"><span translate=\\\"RESERVATION_FIELDS.HINT\\\"></span></ff-hint> </h4> <div class=\\\"fd-container\\\"> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <ff-spin class=\\\"ff-spin-placeholder\\\" ng-if=\\\"!$ctrl.categories\\\"></ff-spin> <ff-panel flex=\\\"{md: '0 0 50%'}\\\" ng-repeat=\\\"category in $ctrl.categories\\\"> <ff-panel-header> <span>{{category.name}}</span> <ff-hint><span translate=\\\"FORM_DESIGN.HINT\\\"></span></ff-hint> <ff-hint ng-if=\\\"category.hint\\\">{{category.hint}}</ff-hint> </ff-panel-header> <ng-include src=\\\"'reservationFieldsTpl'\\\"></ng-include> </ff-panel> </div> <fd-toolbar types=\\\"$ctrl.types\\\" deleting=\\\"$ctrl.deleting\\\" new-item=\\\"$ctrl.newFieldTpl\\\"></fd-toolbar> </div> </div> <script type=\\\"text/ng-template\\\" id=\\\"reservationFieldsTpl\\\"> <ff-header>\\n    <ff-row>\\n      <cell flex=\\\"0 0 36px\\\"><span translate=\\\"FORM_DESIGN.TYPE\\\" style=\\\"letter-spacing: -1px;\\\"></span></cell>\\n      <cell><req translate=\\\"FORM_DESIGN.NAME\\\"></req></cell>\\n    </ff-row>\\n  </ff-header>\\n\\n  <div dnd-list dnd-drop=\\\"callback({ targetList: category.fields, targetIndex: index, target: category })\\\">\\n    <form name=\\\"form\\\" novalidate class=\\\"ff-row\\\"\\n          ng-repeat=\\\"field in category.fields\\\"\\n          dnd-draggable=\\\"null\\\" dnd-callback=\\\"$ctrl.onDrop(category.fields, $index, targetList, targetIndex, form, target)\\\">\\n      <ff-static flex=\\\"0 0 36px\\\" ff-dim=\\\"field.$$spin\\\" class=\\\"ff-center\\\">\\n        <i ng-class=\\\"$ctrl.types[field.type].icon\\\"></i>\\n      </ff-static>\\n      <ff-text ff-model=\\\"field.name\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'FORM_DESIGN.NAME' | translate}}\\\"\\n               ff-change=\\\"$ctrl.saveField(field, form)\\\" dnd-nodrag></ff-text>\\n      <ff-btn-group flex=\\\"none\\\">\\n        <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.editField(field)\\\"></ff-btn>\\n      </ff-btn-group>\\n    </form>\\n    <div ng-if=\\\"!category.fields.length\\\" translate=\\\"FORM_DESIGN.EMPTY\\\" style=\\\"padding: 10px 0 0\\\"></div>\\n  </div> </script> \";\n// Exports\nmodule.exports = code;","import dwSearchUserDirective from 'shared/dw-controls/dw-search-user.directive';\nimport optsInvoiceTemplate from 'shared/services/setup/opts-invoice-template.service';\n\nexport default angular.module('deskworks.SetupSettingsCtrl', [\n  'deskworks.state',\n  'deskworks.setup.service',\n  'deskworks.userProfile.service',\n  'setLocale',\n  'setTranslations',\n  'deskworks.setup.optsProrateAtStart',\n  'deskworks.setup.optsProrateAtTermination',\n  'deskworks.setup.optsMinPassFractionUnit',\n  'deskworks.optsDashboardIncome',\n  'deskworks.Roles',\n  dwSearchUserDirective.name,\n  optsInvoiceTemplate.name,\n])\n\n  .controller('SetupSettingsCtrl', function($scope, $window, $timeout, $route, $translate, $q, dwAlerts, state, helper,\n                                            setupService, settings, userProfileService, optsInvoiceDate,\n                                            optsProrateAtStart, optsProrateAtTermination, optsDashboardIncome,\n                                            optsReservationCreditsUnit, optsMinPassFractionUnit, Roles, optsInvoiceTemplate) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('SETUP_SETTINGS.PAGE_TITLE'));\n\n    vm.settings = settings;\n\n    vm.optsDeclinedPaymentAutoRetryPeriod = [1, 2, 3, 7];\n    vm.optsDeclinedPaymentAutoRetryAttempts = [0, 1, 2, 3];\n    vm.optsPassGracePeriod = [15, 20, 30];\n    vm.optsInvoiceTemplate = optsInvoiceTemplate;\n\n    /**\n     * Populate 'Create Invoice __ days in advance of charge' dropdown and select default value\n     */\n    vm.advanceInvoicingDays = [{ id: 1, name: '1 day' }];\n    for (let i = 2; i < 31; i++) {\n      vm.advanceInvoicingDays.push({ id: i, name: i + ' days' });\n    }\n\n    vm.settings.advanceInvoicingDays = vm.advanceInvoicingDays.find(d => d.id === vm.settings.advanceInvoicingDays);\n\n    if (!vm.settings.advanceInvoicingDays) {\n      vm.settings.advanceInvoicingDays = vm.advanceInvoicingDays[0];\n    }\n\n    vm.optsInvoiceDate = optsInvoiceDate;\n    vm.optsProrateAtStart = optsProrateAtStart;\n    vm.optsProrateAtTermination = optsProrateAtTermination;\n    vm.optsReservationCreditsUnit = optsReservationCreditsUnit;\n    vm.optsMinPassFractionUnit = optsMinPassFractionUnit;\n    vm.optsDashboardIncome = optsDashboardIncome;\n\n    fetchOwners();\n    fetchAdminRoles();\n\n    /**\n     * Save settings\n     */\n    vm.save = () => {\n      if (helper.pointFirstInvalid('#setupSettings')) return;\n\n      return setupService.updateSetupSettings(vm.settings)\n        .catch(err => dwAlerts.error(err, 'Failed to save setup settings.'))\n        .then(() => { $route.reload(); });\n    };\n\n    /**\n     * Fetch calendarOwners and replace owner.id with short user object\n     */\n    function fetchOwners() {\n      vm.settings.calendarOwners.forEach(calOwner => {\n        userProfileService.get(state.getCurrentCenterId(), calOwner.owner)\n          .then(result => {\n            calOwner.owner = { id: result.id, fullName: result.firstName + ' ' + result.lastName, company: result.company, email: result.email };\n          });\n      });\n    }\n\n    /**\n     * Fetch admin roles to use in limitRefundProcessingTo section\n     */\n    function fetchAdminRoles() {\n      return Roles.query()\n        .catch(err => dwAlerts.error(err, 'Failed to query user roles.'))\n        .then(result => { vm.adminRoles = result.filter(role => role.type === 'admin') });\n    }\n\n    /**\n     * Add Calendar Owner\n     */\n    vm.addCalendarOwner = () => {\n      vm.settings.calendarOwners.push({});\n      vm.form.$setDirty();\n    };\n\n    /**\n     * Delete Calendar Owner\n     */\n    vm.deleteCalendarOwner = calOwner => {\n      const idx = vm.settings.calendarOwners.indexOf(calOwner);\n      if (idx >= 0) vm.settings.calendarOwners.splice(idx, 1);\n      vm.form.$setDirty();\n    };\n\n    /**\n     * Disconnect Calendar button handler\n     */\n    vm.disconnectCalendar = () => {\n      if (!window.confirm($translate.instant('CALENDAR.CONFIRM_DISCONNECT'))) return;\n      return setupService.updateSetupSettingsRaw({ calendarConnected: false })\n        .catch(err => dwAlerts.error(err, 'Failed to disconnect calendar.'))\n        .then(() => { vm.settings.calendarConnected = false; });\n    };\n\n    vm.ccTypeRequired = () => {\n      return vm.settings.creditCardTypes.every(ccType => !ccType.enable);\n    };\n  });\n","// Module\nvar code = \"<form name=\\\"vm.form\\\" id=\\\"setupSettings\\\" novalidate ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <ff-panel flex=\\\"{lg: '0 0 50%'}\\\"> <ff-panel-header><span translate=\\\"SETUP_SETTINGS.GENERAL.HEADER\\\"></span></ff-panel-header> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"{xs: '0 1 140px', sm: '0 1 220px'}\\\"><req translate=\\\"SETUP_SETTINGS.LANGUAGE\\\"></req></ff-label> <ff-select name=\\\"locale\\\" ff-model=\\\"vm.settings.locale\\\" ff-options=\\\"locale.id as locale.name for locale in $resolve.locales\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'SETUP_SETTINGS.LANGUAGE' | translate}}\\\"></ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"{xs: '0 1 140px', sm: '0 1 220px'}\\\"><span translate=\\\"SETUP_SETTINGS.DASHBOARD_INCOME\\\"></span></ff-label> <ff-select name=\\\"dashboardIncome\\\" ff-model=\\\"vm.settings.dashboardIncome\\\" ff-required=\\\"true\\\" ff-options=\\\"opt.id as opt.name for opt in vm.optsDashboardIncome\\\"></ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"{xs: '0 1 140px', sm: '0 1 220px'}\\\"><span translate=\\\"SETUP_SETTINGS.PASS_GRACE_PERIOD\\\"></span></ff-label> <ff-select name=\\\"passGracePeriod\\\" ff-model=\\\"vm.settings.passGracePeriod\\\"> <option ng-repeat=\\\"opt in vm.optsPassGracePeriod\\\" ng-value=\\\"opt\\\">{{opt | minutes}}</option> </ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"{xs: '0 1 140px', sm: '0 1 220px'}\\\"><span translate=\\\"SETUP_SETTINGS.INVOICE_TEMPLATE\\\"></span></ff-label> <ff-select name=\\\"invoiceTemplate\\\" ff-model=\\\"vm.settings.invoiceTemplate\\\" ff-options=\\\"opt.id as opt.name for opt in vm.optsInvoiceTemplate\\\"> </ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"{xs: '0 1 160px', sm: '0 1 250px'}\\\"> <span> <span translate=\\\"SETUP_SETTINGS.GTM_CONTAINER_ID\\\"></span> <ff-hint><span translate=\\\"SETUP_SETTINGS.GTM_CONTAINER_ID.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-text name=\\\"gtmContainerId\\\" ff-model=\\\"vm.settings.gtmContainerId\\\" placeholder=\\\"GTM-XXXXXXX\\\" ff-validate-alert=\\\"{{'SETUP_SETTINGS.GTM_CONTAINER_ID' | translate}}\\\"></ff-text> </label> <ff-static> <label class=\\\"ff-row\\\"> <ff-checkbox name=\\\"enableAddOnProductsAtRegistration\\\" ff-model=\\\"vm.settings.enableAddOnProductsAtRegistration\\\"> <span translate=\\\"SETUP_SETTINGS.ADD_ON_PRODUCTS_REGISTRATION\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"SETUP_SETTINGS.ADD_ON_PRODUCTS_REGISTRATION.HINT\\\"></span></ff-hint> </ff-static> <ff-static> <label class=\\\"ff-row\\\"> <ff-checkbox name=\\\"enableExtraFieldsAtRegistration\\\" ff-model=\\\"vm.settings.enableExtraFieldsAtRegistration\\\"> <span translate=\\\"SETUP_SETTINGS.EXTRA_FIELDS_REGISTRATION\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"SETUP_SETTINGS.EXTRA_FIELDS_REGISTRATION.HINT\\\"></span></ff-hint> </ff-static> <affiliatly-settings settings=\\\"vm.settings\\\"></affiliatly-settings> </ff-panel> <ff-panel flex=\\\"{lg: '0 0 50%'}\\\"> <ff-panel-header><span translate=\\\"SETUP_SETTINGS.FEATURES.HEADER\\\"></span></ff-panel-header> <ff-static> <label class=\\\"ff-row\\\"> <ff-checkbox name=\\\"timeFormat\\\" ff-model=\\\"vm.settings.timeFormat\\\" ff-true-value=\\\"24\\\" ff-false-value=\\\"12\\\"> <span translate=\\\"SETUP_SETTINGS.TIME_FORMAT\\\"></span> </ff-checkbox> </label> </ff-static> <ff-static> <label> <ff-checkbox name=\\\"enableEmailing\\\" ff-model=\\\"vm.settings.enableEmailing\\\"> <span translate=\\\"SETUP_SETTINGS.ENABLE_EMAILING\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"SETUP_SETTINGS.ENABLE_EMAILING.HINT\\\"></span></ff-hint> </ff-static> <ff-static> <label class=\\\"ff-row\\\"> <ff-checkbox name=\\\"sendNoticesFromLocalCenter\\\" ff-model=\\\"vm.settings.sendNoticesFromLocalCenter\\\"> <span translate=\\\"SETUP_SETTINGS.NOTICES_FROM_LOCAL_FACILITY\\\"></span> </ff-checkbox> </label> </ff-static> <ff-static> <label class=\\\"ff-row\\\"> <ff-checkbox name=\\\"isFranchise\\\" ff-model=\\\"vm.settings.isFranchise\\\"> <span translate=\\\"SETUP_SETTINGS.IS_FRANCHISE\\\"></span> </ff-checkbox> </label> </ff-static> <ff-static> <label class=\\\"ff-row\\\"> <ff-checkbox name=\\\"enableAccessCodes\\\" ff-model=\\\"vm.settings.enableAccessCodes\\\"> <span translate=\\\"SETUP_SETTINGS.ENABLE_ACCESS_CODES\\\"></span> </ff-checkbox> </label> </ff-static> <ff-static> <label> <ff-checkbox name=\\\"activateMembersForAllCenters\\\" ff-model=\\\"vm.settings.activateMembersForAllCenters\\\"> <span translate=\\\"SETUP_SETTINGS.ACTIVATE_MEMBERS_FOR_ALL_CENTERS\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"SETUP_SETTINGS.ACTIVATE_MEMBERS_FOR_ALL_CENTERS.HINT\\\"></span></ff-hint> </ff-static> <ff-static> <label> <ff-checkbox name=\\\"skipPlanMemberSignUp\\\" ff-model=\\\"vm.settings.skipPlanMemberSignUp\\\"> <span translate=\\\"SETUP_SETTINGS.SKIP_PLAN_MEMBER_SIGN_UP\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"SETUP_SETTINGS.SKIP_PLAN_MEMBER_SIGN_UP.HINT\\\"></span></ff-hint> </ff-static> <ff-static> <label> <ff-checkbox name=\\\"enableSecurityDepositInMembershipProducts\\\" ff-model=\\\"vm.settings.enableSecurityDepositInMembershipProducts\\\"> <span translate=\\\"SETUP_SETTINGS.ENABLE_SECURITY_DEPOSIT_IN_MEMBERSHIP_PRODUCTS\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"SETUP_SETTINGS.ENABLE_SECURITY_DEPOSIT_IN_MEMBERSHIP_PRODUCTS.HINT\\\"></span></ff-hint> </ff-static> <ff-static> <label> <ff-checkbox name=\\\"enableRenewalNotices\\\" ff-model=\\\"vm.settings.enableRenewalNotices\\\"> <span translate=\\\"SETUP_SETTINGS.ENABLE_RENEWAL_NOTICES\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"SETUP_SETTINGS.ENABLE_RENEWAL_NOTICES.HINT\\\"></span></ff-hint> </ff-static> <ff-static> <label> <ff-checkbox name=\\\"multiLevelProductCategory\\\" ff-model=\\\"vm.settings.multiLevelProductCategory\\\"> <span translate=\\\"SETUP_SETTINGS.MULTI_LEVEL_PRODUCT_CATEGORY\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"SETUP_SETTINGS.MULTI_LEVEL_PRODUCT_CATEGORY.HINT\\\"></span></ff-hint> </ff-static> <ff-static> <label> <ff-checkbox name=\\\"enableGdprDelete\\\" ff-model=\\\"vm.settings.enableGdprDelete\\\"> <span translate=\\\"SETUP_SETTINGS.ENABLE_GDPR_DELETE\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"SETUP_SETTINGS.ENABLE_GDPR_DELETE.HINT\\\"></span></ff-hint> </ff-static> </ff-panel> <ff-panel flex=\\\"{lg: '0 0 50%'}\\\"> <ff-panel-header><span translate=\\\"SETUP_SETTINGS.BILLING_FEATURES.HEADER\\\"></span></ff-panel-header> <ff-row> <ff-label flex=\\\"{xs: '0 1 140px', sm: '0 1 152px'}\\\"><span translate=\\\"SETUP_SETTINGS.CC_TYPES\\\"></span></ff-label> <ff-static> <div class=\\\"ff-grid gutter-h-half\\\" style=\\\"justify-content:flex-start\\\"> <label flex=\\\"none\\\" ng-repeat=\\\"ccType in vm.settings.creditCardTypes\\\"> <ff-checkbox name=\\\"{{ccType.id}}\\\" ff-model=\\\"ccType.enable\\\" ff-required=\\\"vm.ccTypeRequired()\\\" ff-validate-alert=\\\"{{'SETUP_SETTINGS.CC_TYPES.AT_LEAST_ONE' | translate}}\\\">{{ccType.name}}</ff-checkbox> </label> </div> </ff-static> </ff-row> <ff-static> <label class=\\\"ff-row\\\"> <ff-checkbox name=\\\"enableEChecks\\\" ff-model=\\\"vm.settings.enableEChecks\\\"> <span translate=\\\"SETUP_SETTINGS.USE_E_CHECKS\\\"></span> </ff-checkbox> </label> </ff-static> <ff-static> <label> <ff-checkbox name=\\\"creditCardAddressOptional\\\" ff-model=\\\"vm.settings.creditCardAddressOptional\\\"> <span translate=\\\"SETUP_SETTINGS.CC_ADDRESS_OPTIONAL\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"SETUP_SETTINGS.CC_ADDRESS_OPTIONAL.HINT\\\"></span></ff-hint> </ff-static> <ff-static> <div class=\\\"gutter-h-half\\\" ff-dim=\\\"!vm.adminRoles\\\"> <ff-static class=\\\"i-block ff-no-frame\\\" ff-style=\\\"{ padding: 0 }\\\" style=\\\"min-width:196px\\\"> <span translate=\\\"SETUP_SETTINGS.LIMIT_REFUND_PROCESSING_TO\\\"></span> </ff-static> <label ng-repeat=\\\"role in vm.adminRoles\\\" class=\\\"i-block\\\"> <ff-checkbox name=\\\"{{role.id}}\\\" ff-model=\\\"vm.settings.limitRefundProcessingTo[role.id]\\\">{{role._name ? (role._name | translate) : role.name}}</ff-checkbox> </label> </div> </ff-static> <ff-static> <div class=\\\"gutter-h-half\\\" ff-dim=\\\"!vm.adminRoles\\\"> <ff-static class=\\\"i-block ff-no-frame\\\" ff-style=\\\"{ padding: 0 }\\\" style=\\\"min-width:196px\\\"> <span translate=\\\"SETUP_SETTINGS.LIMIT_DELETING_ORDER_ITEMS_TO\\\"></span> </ff-static> <label ng-repeat=\\\"role in vm.adminRoles\\\" class=\\\"i-block\\\"> <ff-checkbox name=\\\"{{role.id}}\\\" ff-model=\\\"vm.settings.limitDeletingOrderItemsTo[role.id]\\\">{{role._name ? (role._name | translate) : role.name}}</ff-checkbox> </label> </div> </ff-static> <ff-row> <label class=\\\"ff-row\\\" flex=\\\"0 1 320px\\\"> <ff-label flex=\\\"0 1 auto\\\"> <span translate=\\\"SETUP_SETTINGS.AUTO_RETRY_DECLINED_PAYMENTS\\\"></span> </ff-label> <ff-select flex=\\\"0 0 40px\\\" name=\\\"declinedPaymentAutoRetryPeriod\\\" ff-disabled=\\\"vm.settings.declinedPaymentAutoRetryAttempts === 0\\\" ff-model=\\\"vm.settings.declinedPaymentAutoRetryPeriod\\\" ff-required=\\\"true\\\" ff-options=\\\"days for days in vm.optsDeclinedPaymentAutoRetryPeriod\\\" ff-validate-alert=\\\"{{'SETUP_SETTINGS.AUTO_RETRY_DAYS' | translate}}\\\"></ff-select> <ff-label flex=\\\"1 0 auto\\\"><span translate=\\\"SETUP_SETTINGS.AUTO_RETRY_DAYS\\\"></span></ff-label> </label> <label class=\\\"ff-row\\\" flex=\\\"1 1 190px\\\"> <ff-label flex=\\\"0 0 auto\\\"><span translate=\\\"SETUP_SETTINGS.AUTO_RETRY_FOR\\\"></span></ff-label> <ff-select flex=\\\"0 0 40px\\\" name=\\\"declinedPaymentAutoRetryAttempts\\\" ff-model=\\\"vm.settings.declinedPaymentAutoRetryAttempts\\\" ff-required=\\\"true\\\" ff-options=\\\"days for days in vm.optsDeclinedPaymentAutoRetryAttempts\\\" ff-validate-alert=\\\"{{'SETUP_SETTINGS.AUTO_RETRY_ATTEMPTS' | translate}}\\\"></ff-select> <ff-label flex=\\\"1 0 auto\\\"><span translate=\\\"SETUP_SETTINGS.AUTO_RETRY_ATTEMPTS\\\"></span></ff-label> </label> </ff-row> </ff-panel> <ff-panel flex=\\\"{lg: '0 0 50%'}\\\"> <ff-panel-header><span translate=\\\"SETUP_SETTINGS.SWEEP.HEADER\\\"></span></ff-panel-header> <ff-static> <label class=\\\"ff-row\\\"> <ff-checkbox name=\\\"sweepCharges\\\" ff-model=\\\"vm.settings.sweepCharges\\\"> <span translate=\\\"SETUP_SETTINGS.SWEEP_CHARGES\\\"></span> </ff-checkbox> </label> </ff-static> <ff-static> <label class=\\\"ff-row\\\"> <ff-checkbox name=\\\"emailSweptInvoices\\\" ff-model=\\\"vm.settings.emailSweptInvoices\\\" ff-disabled=\\\"!vm.settings.sweepCharges\\\"> <span translate=\\\"SETUP_SETTINGS.EMAIL_SWEPT_INVOICES\\\"></span> </ff-checkbox> </label> </ff-static> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 60%\\\" ng-disabled=\\\"!vm.settings.sweepCharges\\\"> <req translate=\\\"SETUP_SETTINGS.ADVANCE_INVOICING_DAYS\\\"></req> </ff-label> <ff-select name=\\\"advanceInvoicingDays\\\" ff-model=\\\"vm.settings.advanceInvoicingDays\\\" ff-required=\\\"true\\\" ff-options=\\\"days.name for days in vm.advanceInvoicingDays\\\" ff-disabled=\\\"!vm.settings.sweepCharges\\\" ff-validate-alert=\\\"{{'SETUP_SETTINGS.ADVANCE_INVOICING_BY' | translate}}\\\"></ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 60%\\\" ng-disabled=\\\"!vm.settings.sweepCharges\\\"> <span translate=\\\"SETUP_SETTINGS.INVOICE_DATE\\\"></span> </ff-label> <ff-select name=\\\"invoiceDate\\\" ff-model=\\\"vm.settings.invoiceDate\\\" ff-options=\\\"date.name for date in vm.optsInvoiceDate\\\" ff-disabled=\\\"!vm.settings.sweepCharges\\\"></ff-select> </label> </ff-panel> <ff-panel flex=\\\"{lg: '0 0 50%'}\\\"> <ff-panel-header><span translate=\\\"SETUP_SETTINGS.RESERVATION.HEADER\\\"></span></ff-panel-header> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 200px\\\"><span translate=\\\"SETUP_SETTINGS.RESERVATION_CREDITS_UNIT\\\"></span></ff-label> <ff-select name=\\\"reservationCreditsUnit\\\" ff-model=\\\"vm.settings.reservationCreditsUnit\\\"> <option ng-repeat=\\\"opt in vm.optsReservationCreditsUnit\\\" ng-value=\\\"opt.id\\\">{{opt.name}}</option> </ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 200px\\\"> <span> <span translate=\\\"SETUP_SETTINGS.MIN_PASS_UNIT\\\"></span> <ff-hint><span translate=\\\"SETUP_SETTINGS.MIN_PASS_UNIT.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-select name=\\\"minPassInPercent\\\" ff-model=\\\"vm.settings.minPassInPercent\\\" ff-options=\\\"opt.id as opt.name for opt in vm.optsMinPassFractionUnit\\\"> </ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 200px\\\"><span translate=\\\"SETUP_SETTINGS.RESERVATION_INFO_VISIBILITY\\\"></span></ff-label> <ff-select name=\\\"publicReservationDetails\\\" ff-model=\\\"vm.settings.publicReservationDetails\\\"> <option ng-value=\\\"false\\\" translate=\\\"SETUP_SETTINGS.RESERVATION_INFO_VISIBILITY.SHARED\\\"></option> <option ng-value=\\\"true\\\" translate=\\\"SETUP_SETTINGS.RESERVATION_INFO_VISIBILITY.ALL\\\"></option> </ff-select> </label> <ff-static> <label> <ff-checkbox name=\\\"hideReservationCostEstimate\\\" ff-model=\\\"vm.settings.hideReservationCostEstimate\\\"> <span translate=\\\"SETUP_SETTINGS.HIDE_RESERVATION_COST_ESTIMATE\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"SETUP_SETTINGS.HIDE_RESERVATION_COST_ESTIMATE.HINT\\\"></span></ff-hint> </ff-static> <ff-static> <label> <ff-checkbox name=\\\"hideRecurringReservations\\\" ff-model=\\\"vm.settings.hideRecurringReservations\\\"> <span translate=\\\"SETUP_SETTINGS.HIDE_RECURRING_RESERVATIONS\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"SETUP_SETTINGS.HIDE_RECURRING_RESERVATIONS.HINT\\\"></span></ff-hint> </ff-static> <ff-static> <label> <ff-checkbox name=\\\"hideStaffOnlyUnits\\\" ff-model=\\\"vm.settings.hideStaffOnlyUnits\\\"> <span translate=\\\"SETUP_SETTINGS.HIDE_STAFF_ONLY_UNITS\\\"></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=\\\"SETUP_SETTINGS.HIDE_STAFF_ONLY_UNITS.HINT\\\"></span></ff-hint> </ff-static> </ff-panel> <div flex=\\\"{lg: '0 0 50%'}\\\"> <ff-col class=\\\"gutter-v\\\"> <ff-panel> <ff-panel-header> <span translate=\\\"SETUP_SETTINGS.PRO_RATION.HEADER\\\"></span> <ff-hint><span translate=\\\"SETUP_SETTINGS.PRO_RATION.HINT\\\"></span></ff-hint> </ff-panel-header> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 200px\\\"><span translate=\\\"SETUP_SETTINGS.PRO_RATE_AT_START\\\"></span></ff-label> <ff-select name=\\\"prorateAtStart\\\" ff-model=\\\"vm.settings.prorateAtStart\\\" ff-options=\\\"opt.id as opt.name for opt in vm.optsProrateAtStart\\\"> </ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 200px\\\"><span translate=\\\"SETUP_SETTINGS.PRO_RATE_AT_TERMINATION\\\"></span></ff-label> <ff-select name=\\\"prorateAtTermination\\\" ff-model=\\\"vm.settings.prorateAtTermination\\\" ff-options=\\\"opt.id as opt.name for opt in vm.optsProrateAtTermination\\\"> </ff-select> </label> </ff-panel> <ff-panel> <ff-panel-header> <span translate=\\\"SETUP_SETTINGS.PROCESSING_CHARGES.HEADER\\\"></span> <ff-hint><span translate=\\\"SETUP_SETTINGS.PROCESSING_CHARGES.HINT\\\"></span></ff-hint> </ff-panel-header> <ff-static> <label class=\\\"ff-row\\\"> <ff-checkbox name=\\\"enablePaymentProcessingCharges\\\" ff-model=\\\"vm.settings.enablePaymentProcessingCharges\\\"> <span translate=\\\"SETUP_SETTINGS.PROCESSING_CHARGES.ENABLE\\\"></span> </ff-checkbox> </label> </ff-static> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 220px\\\" ng-disabled=\\\"!vm.settings.enablePaymentProcessingCharges\\\"> <span translate=\\\"SETUP_SETTINGS.PROCESSING_CHARGES.CC_RATE\\\"></span> </ff-label> <ff-number name=\\\"paymentProcessingRatesCc\\\" ff-model=\\\"vm.settings.paymentProcessingRates.cc\\\" ff-disabled=\\\"!vm.settings.enablePaymentProcessingCharges\\\" ff-gte=\\\"0\\\" ff-validate-alert=\\\"{{'SETUP_SETTINGS.PROCESSING_CHARGES.PERCENT' | translate}}\\\"></ff-number> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 1 220px\\\" ng-disabled=\\\"!vm.settings.enablePaymentProcessingCharges\\\"> <span translate=\\\"SETUP_SETTINGS.PROCESSING_CHARGES.ACH_RATE\\\"></span> </ff-label> <ff-number name=\\\"paymentProcessingRatesAch\\\" ff-model=\\\"vm.settings.paymentProcessingRates.ach\\\" ff-disabled=\\\"!vm.settings.enablePaymentProcessingCharges\\\" ff-gte=\\\"0\\\" ff-validate-alert=\\\"{{'SETUP_SETTINGS.PROCESSING_CHARGES.PERCENT' | translate}}\\\"></ff-number> </label> </ff-panel> </ff-col> </div> <ff-panel ng-if=\\\"vm.settings.calendarIntegration\\\" flex=\\\"{xl: '0 0 50%'}\\\"> <ff-panel-header><span translate=\\\"SETUP_SETTINGS.CALENDAR.HEADER\\\"></span></ff-panel-header> <ff-row> <label flex=\\\"auto\\\"> <ff-label flex=\\\"auto\\\"><span translate=\\\"SETUP_SETTINGS.CALENDAR.CONNECTION\\\"></span></ff-label> <ff-static flex=\\\"none\\\" ng-if=\\\"vm.settings.calendarConnected\\\"> <span> <ff-icon sense=\\\"check\\\"></ff-icon> <span translate=\\\"SETUP_SETTINGS.CALENDAR.CONNECTED\\\"></span> </span> </ff-static> </label> <ff-btn-group flex=\\\"none\\\" class=\\\"buttons-row\\\"> <a ng-if=\\\"!vm.settings.calendarConnected\\\" href=\\\"{{vm.settings.calendarGrantUrl}}\\\" target=\\\"_self\\\" style=\\\"background:url(data:image/png;base64,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);background-size:100%;display:inline-block;width:160px;height:38px;margin-left:5px\\\"></a> <ff-btn ng-if=\\\"vm.settings.calendarConnected\\\" sense=\\\"delete\\\" size=\\\"sm\\\" ff-click=\\\"vm.disconnectCalendar()\\\"> <span translate=\\\"SETUP_SETTINGS.CALENDAR.BTN_DISCONNECT\\\"></span> </ff-btn> </ff-btn-group> </ff-row> <label class=\\\"ff-row\\\" ng-if=\\\"vm.settings.googleCalendarEmail\\\"> <ff-label flex=\\\"0 0 50%\\\"><span translate=\\\"SETUP_SETTINGS.CALENDAR.EMAIL\\\"></span></ff-label> <ff-static>{{vm.settings.googleCalendarEmail}}</ff-static> </label> <ff-static ng-if=\\\"vm.settings.calendarConnected\\\"> <label class=\\\"ff-row\\\"> <ff-checkbox name=\\\"addCenterPrefixToCalendar\\\" ff-model=\\\"vm.settings.addCenterPrefixToCalendar\\\"> <span translate=\\\"SETUP_SETTINGS.CALENDAR.CENTER_PREFIX\\\"></span> </ff-checkbox> </label> </ff-static> <ff-header ng-if=\\\"vm.settings.calendarConnected\\\" style=\\\"margin-top:.6rem;padding-bottom:.6rem\\\"> <span><span translate=\\\"SETUP_SETTINGS.CALENDAR.ACCOUNTS\\\"></span>:</span> </ff-header> <ff-row ng-if=\\\"vm.settings.calendarConnected\\\" ng-repeat=\\\"calOwner in vm.settings.calendarOwners\\\"> <label flex=\\\"0 0 50%\\\"> <ff-label flex=\\\"0 0 65px\\\"><span translate=\\\"SETUP_SETTINGS.CALENDAR.ACCOUNT\\\"></span></ff-label> <ff-search flex=\\\"auto\\\" name=\\\"calendarAssignedToMember\\\" ng-model=\\\"calOwner.owner\\\" dw-search-user=\\\"activeNameOnly\\\"></ff-search> </label> <label flex=\\\"0 1 50%\\\"> <ff-label flex=\\\"none\\\"> <span> <span translate=\\\"SETUP_SETTINGS.CALENDAR.KEYWORD\\\"></span> <ff-hint><span translate=\\\"SETUP_SETTINGS.CALENDAR.KEYWORD.HINT\\\"></span></ff-hint> </span> </ff-label> <ff-text flex=\\\"1 1 1%\\\" name=\\\"mask\\\" ff-model=\\\"calOwner.mask\\\"></ff-text> </label> <ff-btn sense=\\\"delete\\\" size=\\\"xs\\\" ff-click=\\\"vm.deleteCalendarOwner(calOwner)\\\" title=\\\"{{'SETUP_SETTINGS.CALENDAR.BTN_DELETE_ACCOUNT.HINT' | translate}}\\\"></ff-btn> </ff-row> <ff-btn-group class=\\\"ff-section-buttons\\\" ng-if=\\\"vm.settings.calendarConnected\\\"> <ff-btn sense=\\\"add\\\" size=\\\"sm\\\" ff-click=\\\"vm.addCalendarOwner(calOwner)\\\"> <span translate=\\\"SETUP_SETTINGS.CALENDAR.BTN_ADD_ACCOUNT\\\"></span> </ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"save\\\" type=\\\"submit\\\" ff-click=\\\"vm.save()\\\" ff-disabled=\\\"vm.form.$pristine\\\"> <span translate=\\\"GLOBAL.BTN_SAVE\\\"></span> </ff-btn> </ff-btn-group> </div> </form> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.SystemEmailEditCtrl', [\n  'deskworks.system.service',\n])\n\n  .controller('SystemEmailEditCtrl', function($scope, $translate, dwAlerts, state, helper, systemEmail,\n                                              systemService, optsSystemEmailFunction) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant(systemEmail.id ? 'SYSTEM_EMAILS.EDIT.PAGE_TITLE' : 'SYSTEM_EMAILS.NEW.PAGE_TITLE'));\n\n    $ctrl.systemEmail = systemEmail;\n    $ctrl.functions = optsSystemEmailFunction;\n    $ctrl.systemEmail.function = $ctrl.functions.find(f => f.id === $ctrl.systemEmail.function) || $ctrl.functions[0];\n\n    /**\n     * Save System Email handler\n     */\n    $ctrl.save = () => {\n      if (helper.pointFirstInvalid('#systemEmailEdit')) return;\n\n      const data = {\n        function: $ctrl.systemEmail.function.id,\n        email: $ctrl.systemEmail.email,\n      };\n\n      const promise = $ctrl.systemEmail.id ? systemService.updateSystemEmail($ctrl.systemEmail.id, data) : systemService.createSystemEmail(data);\n      return promise\n        .catch(err => dwAlerts.error(err, 'Failed to save system email.'))\n        .then(result => {\n          if (!$ctrl.systemEmail.id) return state.setPath('/system-emails/' + result.id);\n          $ctrl.form.$setPristine();\n        });\n    };\n\n    /**\n     * Remove System Email handler\n     */\n    $ctrl.remove = () => {\n      if (!confirm($translate.instant('SYSTEM_EMAILS.CONFIRM_DELETE'))) return;\n\n      return systemService.removeSystemEmail($ctrl.systemEmail.id)\n        .catch(err => dwAlerts.error(err, 'Failed to remove system email.'))\n        .then(() => state.setPath('/system-emails'));\n    };\n\n    /**\n     * Back button handler\n     */\n    $ctrl.back = () => state.setPath('/system-emails');\n  });\n","// Module\nvar code = \"<form name=\\\"$ctrl.form\\\" id=\\\"systemEmailEdit\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel style=\\\"max-width:815px\\\"> <ff-header> <ff-row> <cell flex=\\\"0 0 30%\\\"><req translate=\\\"SYSTEM_EMAILS.FUNCTION\\\"></req></cell> <cell><req translate=\\\"SYSTEM_EMAILS.EMAIL\\\"></req></cell> </ff-row> </ff-header> <ff-row> <ff-select flex=\\\"0 0 30%\\\" ff-model=\\\"$ctrl.systemEmail.function\\\" ff-options=\\\"function.name for function in $ctrl.functions\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'SYSTEM_EMAILS.FUNCTION' | translate}}\\\"></ff-select> <ff-email ff-model=\\\"$ctrl.systemEmail.email\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'SYSTEM_EMAILS.EMAIL' | translate}}\\\"></ff-email> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"save\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.save()\\\" ff-disabled=\\\"$ctrl.form.$pristine\\\"> <span translate=\\\"GLOBAL.BTN_SAVE\\\"></span> </ff-btn> <ff-btn sense=\\\"remove\\\" ff-click=\\\"$ctrl.remove()\\\" ng-if=\\\"$ctrl.systemEmail.id\\\"> <span translate=\\\"GLOBAL.BTN_DELETE\\\"></span> </ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> </form> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.SystemEmailListCtrl', [\n  'deskworks.system.service',\n  'deskworks.optsSystemEmailFunction',\n])\n\n  .controller('SystemEmailListCtrl', function($scope, $translate, state, helper,\n                                              systemEmails, optsSystemEmailFunction) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('SYSTEM_EMAILS.PAGE_TITLE'));\n\n    $ctrl.systemEmails = systemEmails;\n    $ctrl.functions = optsSystemEmailFunction;\n\n    $ctrl.systemEmails.forEach(systemEmail => {\n      systemEmail.function = $ctrl.functions.find(f => f.id === systemEmail.function);\n    });\n\n    /**\n     * Edit System Email handler\n     */\n    $ctrl.edit = systemEmail => state.setPath('/system-emails/' + systemEmail.id);\n\n    /**\n     * New System Email handler\n     */\n    $ctrl.new = () => state.setPath('/system-emails/new');\n  });\n","// Module\nvar code = \"<div class=\\\"system-email-list\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <ff-panel style=\\\"max-width:815px\\\"> <span ng-if=\\\"!$ctrl.systemEmails.length\\\" translate=\\\"GLOBAL.NONE\\\"></span> <ff-header ng-if=\\\"$ctrl.systemEmails.length\\\"> <ff-row> <cell flex=\\\"0 0 30%\\\"><span translate=\\\"SYSTEM_EMAILS.FUNCTION\\\"></span></cell> <cell><span translate=\\\"SYSTEM_EMAILS.EMAIL\\\"></span></cell> <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" flex=\\\"none\\\" class=\\\"buttons-row zero-height\\\"></ff-btn> </ff-row> </ff-header> <ff-row ng-repeat=\\\"systemEmail in $ctrl.systemEmails\\\"> <ff-static flex=\\\"0 0 30%\\\" ff-bind=\\\"systemEmail.function.name\\\"></ff-static> <ff-static ff-bind=\\\"systemEmail.email\\\"></ff-static> <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" flex=\\\"none\\\" class=\\\"buttons-row\\\" ff-click=\\\"$ctrl.edit(systemEmail)\\\" title=\\\"{{'GLOBAL.BTN_EDIT' | translate}}\\\"></ff-btn> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"new\\\" ff-click=\\\"$ctrl.new()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> </div> </div> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.TaskEditCtrl', [\n  'deskworks.Task',\n  'deskworks.optsTaskPermission',\n])\n\n  .controller('TaskEditCtrl', function($scope, $translate, dwAlerts, state, helper, task, Task, roles, optsTaskPermission) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant(task.id ? 'TASKS.EDIT.PAGE_TITLE' : 'TASKS.NEW.PAGE_TITLE'));\n\n    task.permissions = task.permissions || {};\n    $ctrl.task = task;\n    $ctrl.roles = roles;\n    $ctrl.optsTaskPermission = optsTaskPermission;\n\n    $ctrl.roles.forEach(role => {\n      if (role._name) role.name = $translate.instant(role._name)  || role.name;\n    });\n\n    if (!$ctrl.task.id) {\n      $ctrl.roles.forEach(role => {\n        $ctrl.task.permissions[role.id] = 'view';\n        if (role.id === 'nonMember' || role.id === 'member') $ctrl.task.permissions[role.id] = null;\n        if (role.id === 'admin' || role.id === 'master') $ctrl.task.permissions[role.id] = 'edit';\n      });\n    }\n\n    /**\n     * Save Task handler\n     */\n    $ctrl.save = () => {\n      if (helper.pointFirstInvalid('#taskEdit')) return;\n\n      const isNew = !$ctrl.task.id;\n      return Task.save($ctrl.task)\n        .catch(err => dwAlerts.error(err, 'Failed to save task.'))\n        .then(task => {\n          $scope.$emit('SIDEBAR:REFRESH');\n          if (isNew) return state.setPath('/tasks/' + task.id);\n          else $ctrl.form.$setPristine();\n        });\n    };\n\n    /**\n     * Remove Task handler\n     */\n    $ctrl.remove = () => {\n      if (!confirm($translate.instant('TASKS.CONFIRM_DELETE'))) return;\n\n      return Task.delete($ctrl.task.id)\n        .catch(err => dwAlerts.error(err, 'Failed to delete task.'))\n        .then(() => {\n          $scope.$emit('SIDEBAR:REFRESH');\n          return state.setPath('/tasks');\n        });\n    };\n\n    /**\n     * Back button handler\n     */\n    $ctrl.back = () => state.setPath('/tasks');\n\n    // /**\n    //  * Role permission checkbox change handler\n    //  */\n    // $ctrl.onChangePermission = function(role, perm) {\n    //   var p = $ctrl.task.permissions[role];\n    //   if(p.edit && perm === 'edit') p.view = true;\n    //   if(!p.view && perm === 'view') p.edit = false;\n    // };\n\n    $ctrl.onChangeIsGroup = () => {\n      if (!$ctrl.task.isGroup) return;\n      $ctrl.roles.forEach(role => {\n        if ($ctrl.task.permissions[role.id]) $ctrl.task.permissions[role.id] = 'view';\n      });\n    };\n  });\n","// Module\nvar code = \"<form name=\\\"$ctrl.form\\\" id=\\\"taskEdit\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <ff-panel flex=\\\"{md: '0 0 50%'}\\\"> <ff-panel-header><span translate=\\\"TASKS.GENERAL.HEADER\\\"></span></ff-panel-header> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"TASKS.POSITION\\\"></req></ff-label> <ff-number name=\\\"taskPosition\\\" ff-model=\\\"$ctrl.task.position\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'TASKS.POSITION' | translate}}\\\"></ff-number> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\"><req translate=\\\"TASKS.NAME\\\"></req></ff-label> <ff-text name=\\\"taskName\\\" ff-model=\\\"$ctrl.task.name\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'TASKS.NAME' | translate}}\\\"></ff-text> </label> <ff-static> <label flex=\\\"0 0 100px\\\"> <span translate=\\\"TASKS.IS_GROUP\\\"></span> </label> <ff-checkbox name=\\\"isGroup\\\" ff-model=\\\"$ctrl.task.isGroup\\\" ff-change=\\\"$ctrl.onChangeIsGroup()\\\"></ff-checkbox> </ff-static> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 100px\\\" ff-required=\\\"{{!$ctrl.task.isGroup}}\\\" ng-disabled=\\\"$ctrl.task.isGroup\\\"> <span translate=\\\"TASKS.URL\\\"></span> </ff-label> <ff-text name=\\\"taskUrl\\\" ff-model=\\\"$ctrl.task.url\\\" ff-required=\\\"!$ctrl.task.isGroup\\\" ff-disabled=\\\"$ctrl.task.isGroup\\\" ff-validate-alert=\\\"{{'TASKS.URL' | translate}}\\\"></ff-text> </label> </ff-panel> <ff-panel flex=\\\"{md: '0 0 50%'}\\\"> <ff-panel-header><span translate=\\\"TASKS.PERMISSIONS.HEADER\\\"></span></ff-panel-header> <ff-header> <ff-row> <cell><span translate=\\\"GLOBAL.ROLE\\\"></span></cell> <cell flex=\\\"0 0 100px\\\"><span translate=\\\"TASKS.PERMISSION\\\"></span></cell> </ff-row> </ff-header> <ff-row ng-repeat=\\\"role in $ctrl.roles\\\"> <ff-static>{{role.name}}</ff-static> <ff-select name=\\\"view\\\" ff-model=\\\"$ctrl.task.permissions[role.id]\\\" flex=\\\"0 0 100px\\\" ff-options=\\\"opt.id as opt.name for opt in $ctrl.optsTaskPermission | filter: ($ctrl.task.isGroup ? { id: '!edit' } : {})\\\"> <option ng-repeat=\\\"opt in $ctrl.optsTaskPermission\\\" ng-value=\\\"opt.id\\\" ng-if=\\\"!$ctrl.task.isGroup || opt.id !== 'edit'\\\">{{opt.name}}</option> </ff-select> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"save\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.save()\\\" ff-disabled=\\\"$ctrl.form.$pristine\\\"> <span translate=\\\"GLOBAL.BTN_SAVE\\\"></span> </ff-btn> <ff-btn sense=\\\"remove\\\" ff-click=\\\"$ctrl.remove()\\\" ng-if=\\\"$ctrl.task.id\\\"> <span translate=\\\"GLOBAL.BTN_DELETE\\\"></span> </ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> </form> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.TaskListCtrl', [])\n\n  .controller('TaskListCtrl', function($scope, $translate, state, helper, tasks, roles) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('TASKS.PAGE_TITLE'));\n\n    $ctrl.tasks = [];\n    $ctrl.tasksHidden = [];\n    $ctrl.tasksHiddenCollapse = true;\n    $ctrl.roles = roles;\n\n    tasks.tasks.forEach(task => {\n      (task.position ? $ctrl.tasks : $ctrl.tasksHidden).push(task);\n      const viewRoles = [], editRoles = [];\n      $ctrl.roles.forEach(role => {\n        if (role._name) role.name = $translate.instant(role._name) || role.name;\n        if (task.permissions[role.id] === 'edit') return editRoles.push(role.name);\n        if (task.permissions[role.id] === 'view') return viewRoles.push(role.name);\n      });\n      task.viewRoles = viewRoles.join(', ');\n      task.editRoles = editRoles.join(', ');\n      if (task.viewRoles && task.editRoles && !task.isGroup) task.viewRoles += ',';\n    });\n\n\n    /**\n     * Edit Task handler\n     */\n    $ctrl.edit = task => state.setPath('/tasks/' + task.id);\n\n    /**\n     * New Task handler\n     */\n    $ctrl.new = () => state.setPath('/tasks/new');\n  });\n","// Module\nvar code = \"<script type=\\\"text/ng-template\\\" id=\\\"taskListTpl\\\"> <ff-panel>\\n    <ff-header>\\n      <ff-row>\\n        <cell class=\\\"ff-center\\\" flex=\\\"0 0 50px\\\" title=\\\"{{'GLOBAL.POSITION.HINT' | translate}}\\\">\\n          <span translate=\\\"GLOBAL.POSITION\\\"></span>\\n        </cell>\\n        <cell flex=\\\"0 0 35%\\\"><span translate=\\\"TASKS.NAME\\\"></span></cell>\\n        <cell><span translate=\\\"TASKS.PERMISSIONS.HEADER\\\"></span></cell>\\n        <ff-btn size=\\\"xs\\\" flex=\\\"none\\\" class=\\\"buttons-row zero-height\\\"></ff-btn>\\n      </ff-row>\\n    </ff-header>\\n\\n    <ff-row ng-repeat=\\\"task in tasks\\\">\\n      <ff-static class=\\\"ff-center\\\" flex=\\\"0 0 50px\\\" ff-bind=\\\"task.position\\\" ng-if=\\\"!task.isGroup\\\"></ff-static>\\n      <ff-static flex=\\\"0 0 35%\\\" ff-bind=\\\"task.name\\\" ng-if=\\\"!task.isGroup\\\"></ff-static>\\n      <ff-static ng-if=\\\"!task.isGroup\\\">\\n        <span>\\n          <span ng-if=\\\"task.viewRoles\\\" style=\\\"background: #eceaea\\\">{{task.viewRoles}}</span>\\n          <span ng-if=\\\"task.editRoles\\\">{{task.editRoles}}</span>\\n        </span>\\n      </ff-static>\\n\\n      <ff-label class=\\\"ff-center standout em\\\" flex=\\\"0 0 50px\\\" ng-if=\\\"task.isGroup\\\"><span style=\\\"font-size: .8666rem\\\">{{task.position}}</span></ff-label>\\n      <ff-label class=\\\"standout em\\\" flex=\\\"0 0 35%\\\" ng-if=\\\"task.isGroup\\\"><span style=\\\"font-size: .8666rem\\\">{{task.name}}</span></ff-label>\\n      <ff-label class=\\\"standout em\\\" ng-if=\\\"task.isGroup\\\">\\n        <span ng-if=\\\"task.viewRoles\\\" style=\\\"font-size: .8666rem\\\">{{task.viewRoles}}</span>\\n      </ff-label>\\n\\n      <ff-btn sense=\\\"edit\\\" size=\\\"xs\\\" flex=\\\"none\\\" ff-click=\\\"$ctrl.edit(task)\\\"\\n              class=\\\"buttons-row\\\" title=\\\"{{'GLOBAL.BTN_EDIT' | translate}}\\\"></ff-btn>\\n    </ff-row>\\n  </ff-panel> </script> <div class=\\\"task-list\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"gutter-v\\\"> <div class=\\\"ff-grid\\\"> <label class=\\\"ff-row\\\" flex=\\\"0 0 210px\\\" style=\\\"margin-left:auto\\\"> <div flex=\\\"0 0 45%\\\"> <span style=\\\"border:1px solid;width:35px;max-height:20px;background:#eceaea\\\"></span> &nbsp; <span translate=\\\"TASKS.PERMISSION.VIEW\\\"></span> </div> <div flex=\\\"0 0 55%\\\"> <span style=\\\"border:1px solid;width:35px;max-height:20px\\\"></span> &nbsp; <span translate=\\\"TASKS.PERMISSION.EDIT\\\"></span> </div> </label> </div> <div> <ng-include src=\\\"'taskListTpl'\\\" ng-init=\\\"tasks = $ctrl.tasks\\\"></ng-include> </div> <ff-btn-group ng-if=\\\"$ctrl.tasksHidden.length > 0\\\"> <ff-btn sense=\\\"collapse\\\" ng-class=\\\"{ collapsed: $ctrl.tasksHiddenCollapse }\\\" ff-click=\\\"$ctrl.tasksHiddenCollapse = !$ctrl.tasksHiddenCollapse\\\"> <span translate=\\\"TASKS.BTN_HIDDEN\\\"></span> </ff-btn> </ff-btn-group> <div> <div ng-collapse=\\\"$ctrl.tasksHiddenCollapse\\\" ng-if=\\\"$ctrl.tasksHidden.length > 0\\\"> <ng-include src=\\\"'taskListTpl'\\\" ng-init=\\\"tasks = $ctrl.tasksHidden\\\"></ng-include> </div> </div> <ff-btn-group> <ff-btn sense=\\\"new\\\" ff-click=\\\"$ctrl.new()\\\"><span translate=\\\"GLOBAL.BTN_NEW\\\"></span></ff-btn> </ff-btn-group> </div> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Form Design field types\n */\nexport default angular.module('deskworks.userFieldTypes', [])\n\n  .factory('userFieldTypes', function($rootScope, $translate) {\n    const types = [\n      { id: 'text', icon: 'fa fa-text-width', _name: 'FORM_DESIGN.TYPE.TEXT' },\n      { id: 'textarea', icon: 'fa fa-text-height', _name: 'FORM_DESIGN.TYPE.TEXTAREA' },\n      { id: 'date', icon: 'fa fa-calendar', _name: 'FORM_DESIGN.TYPE.DATE' },\n      { id: 'url', icon: 'fa fa-chain', _name: 'FORM_DESIGN.TYPE.URL' },\n      { id: 'email', icon: 'fa fa-at', _name: 'FORM_DESIGN.TYPE.EMAIL' },\n      { id: 'phone', icon: 'fa fa-phone', _name: 'FORM_DESIGN.TYPE.PHONE' },\n      { id: 'number', icon: 'fa fa-hashtag', _name: 'FORM_DESIGN.TYPE.NUMBER' },\n    ];\n\n    types.forEach(t => { types[t.id] = t; }); // array/object duality\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { types.forEach(type => { type.name = $translate.instant(type._name); }); }\n\n    return types;\n  });\n","import dnd from 'shared/drag-n-drop/dnd.service';\nimport UserField from 'shared/services/setup/user-field.service';\nimport userFieldTypes from 'bundles/setup/user-fields/user-field-types.service';\nimport fdToolbar from 'shared/form-design/fd-toolbar.directive';\n\nexport default angular.module('deskworks.UserFieldsCtrl', [\n  'debounce',\n  dnd.name,\n  UserField.name,\n  fdToolbar.name,\n  userFieldTypes.name,\n])\n\n  .controller('UserFieldsCtrl', function($scope, $translate, $window, dwAlerts, state, helper, debounce, dnd,\n                                         UserField, userFields, userFieldTypes) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('USER_FIELDS.PAGE_TITLE'));\n\n    $ctrl.types = userFieldTypes;\n\n    $ctrl.sections = {\n      customFields: userFields.filter(field => field.section === 'customFields'),\n      shareable: userFields.filter(field => field.section === 'shareable'),\n    };\n\n    /**\n     * Drop handler\n     */\n    $ctrl.onDrop = (srcList, srcIndex, targetList, targetIndex, form, target) => {\n      let item = srcList[srcIndex];\n      if (!targetList && item.id && !$window.confirm($translate.instant('FORM_DESIGN.TRASH.CONFIRM'))) return false;\n      item = dnd.move(srcList, srcIndex, targetList, targetIndex);\n\n      if (item) item.section = target;\n\n      if (!targetList) { // delete\n        if (!item.id) return true; // don't delete uncreated\n        deleteField(item);\n      } else { // update\n        if (form.$invalid) return true; // don't save invalid\n        saveField(item, form);\n      }\n\n      return true; // true is required by dnd-callback of dnd-list\n    };\n\n\n    /**\n     * Save handler\n     */\n    $ctrl.saveField = debounce(saveField, 1000);\n    function saveField(field, form) {\n      if (form.$invalid) return;\n\n      field.$$spin = true;\n      return UserField.save(field)\n        .catch(err => dwAlerts.error(err, 'Failed to save user field.'))\n        .finally(() => { field.$$spin = false; })\n        .catch(angular.noop);\n    }\n\n    /**\n     * Delete handler\n     */\n    function deleteField(field) {\n      if (!field.id) return; // not existing\n      field.$$spin = true;\n      $ctrl.deleting = true;\n      return UserField.delete(field.id)\n        .catch(err => dwAlerts.error(err, 'Failed to delete field.'))\n        .finally(() => { field.$$spin = false; $ctrl.deleting = false; })\n        .catch(angular.noop);\n    }\n  });\n","// Module\nvar code = \"<div ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"fd-container\\\"> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <ff-panel flex=\\\"{md: '0 0 50%'}\\\" ng-if=\\\"true\\\"> <ff-panel-header> <span translate=\\\"USER_FIELDS.CUSTOM.HEADER\\\"></span> <ff-hint><span translate=\\\"FORM_DESIGN.HINT\\\"></span></ff-hint> </ff-panel-header> <ng-include src=\\\"'userFieldsTpl'\\\" ng-init=\\\"section = 'customFields'\\\"></ng-include> </ff-panel> <ff-panel flex=\\\"{md: '0 0 50%'}\\\" ng-if=\\\"true\\\"> <ff-panel-header> <span translate=\\\"USER_FIELDS.SHAREABLE.HEADER\\\"></span> <ff-hint><span translate=\\\"FORM_DESIGN.HINT\\\"></span></ff-hint> </ff-panel-header> <ng-include src=\\\"'userFieldsTpl'\\\" ng-init=\\\"section = 'shareable'\\\"></ng-include> </ff-panel> </div> <fd-toolbar types=\\\"$ctrl.types\\\" deleting=\\\"$ctrl.deleting\\\" new-item=\\\"{ type: '$type.id', name: '', section: '$target' }\\\"></fd-toolbar> </div> </div> <script type=\\\"text/ng-template\\\" id=\\\"userFieldsTpl\\\"> <ff-header>\\n    <ff-row>\\n      <cell flex=\\\"0 0 36px\\\"><span translate=\\\"FORM_DESIGN.TYPE\\\" style=\\\"letter-spacing: -1px;\\\"></span></cell>\\n      <cell><req translate=\\\"FORM_DESIGN.NAME\\\"></req></cell>\\n    </ff-row>\\n  </ff-header>\\n\\n  <div dnd-list dnd-drop=\\\"callback({ targetList: $ctrl.sections[section], targetIndex: index, target: section })\\\">\\n    <form name=\\\"form\\\" novalidate class=\\\"ff-row\\\"\\n          ng-repeat=\\\"field in $ctrl.sections[section]\\\"\\n          dnd-draggable=\\\"null\\\" dnd-callback=\\\"$ctrl.onDrop($ctrl.sections[section], $index, targetList, targetIndex, form, target)\\\">\\n      <ff-static flex=\\\"0 0 36px\\\" ff-dim=\\\"field.$$spin\\\" class=\\\"ff-center\\\">\\n        <i ng-class=\\\"$ctrl.types[field.type].icon\\\"></i>\\n      </ff-static>\\n      <ff-text ff-model=\\\"field.name\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'FORM_DESIGN.NAME' | translate}}\\\"\\n               ff-change=\\\"$ctrl.saveField(field, form)\\\" dnd-nodrag></ff-text>\\n    </form>\\n    <div ng-if=\\\"!$ctrl.sections[section].length\\\" translate=\\\"FORM_DESIGN.EMPTY\\\" style=\\\"padding: 10px 0 0\\\"></div>\\n  </div> </script> \";\n// Exports\nmodule.exports = code;","import \"./fd-toolbar.scss\";\nimport dnd from 'shared/drag-n-drop/dnd.service';\nimport template from './fd-toolbar.tpl.html'\n\n/**\n * fdToolbar directive - toolbar with draggable components for Form Design\n */\nexport default angular.module('deskworks.fdToolbar', [\n  dnd.name,\n])\n\n  .directive('fdToolbar', function() {\n    return {\n      scope: true,\n      template,\n      controller: 'FdToolbarCtrl as $ctrl',\n      bindToController: {\n        deleting: '<',\n        types: '<',\n        newItem: '<',\n      },\n    };\n  })\n\n  .controller('FdToolbarCtrl', function($scope, $element, dnd) {\n    const $ctrl = this;\n    let scroller;\n\n    /**\n     * Init\n     */\n    $ctrl.$onInit = () => {\n      scroller = document.querySelector('.snap-content-scroller');\n      scroller.addEventListener('scroll', onScroll);\n      onScroll();\n    };\n\n    /**\n     * Drop handler - creates new element in targetList\n     */\n    $ctrl.onDrop = (targetList, targetIndex, type, target) => {\n      const item = angular.copy($ctrl.newItem);\n      Object.keys(item).forEach(key => {\n        if (!item[key] || typeof item[key] !== 'string') return;\n        const subst = item[key].split('.');\n        if (subst[0] === '$type') item[key] = subst[1] ? type[subst[1]] : type;\n        else if (subst[0] === '$target') item[key] = subst[1] ? target[subst[1]] : target;\n      });\n      dnd.move([item], 0, targetList, targetIndex);\n      return true; // true is required by dnd-callback of dnd-list\n    };\n\n    /**\n     * Destroy\n     */\n    $ctrl.$onDestroy = () => { scroller.removeEventListener('scroll', onScroll); };\n\n    /**\n     * Scroll handler - stick toolbar to screen top\n     */\n    function onScroll(event) {\n      const rect = $element[0].parentNode.getBoundingClientRect();\n      $element.css('top', -Math.min(rect.top - 5, 0) + 'px');\n    }\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div> <div class=\\\"fd-tb-header em\\\"><span translate=\\\"FORM_DESIGN.TOOLBAR.HEADER\\\"></span></div> <div class=\\\"fd-tool\\\" ng-repeat=\\\"type in $ctrl.types\\\" title=\\\"{{type.name}}\\\" dnd-draggable=\\\"null\\\" dnd-callback=\\\"$ctrl.onDrop(targetList, targetIndex, type, target)\\\" dnd-effect-allowed=\\\"copy\\\"><i ng-class=\\\"type.icon\\\"></i></div> <div class=\\\"fd-tool fd-trash\\\" title=\\\"{{'FORM_DESIGN.TRASH.HINT' | translate}}\\\" ff-dim=\\\"$ctrl.deleting\\\" dnd-list=\\\"[]\\\" dnd-drop=\\\"callback({ targetList: null, targetIndex: index })\\\"><i class=\\\"fa fa-trash\\\"></i></div> </div> \";\n// Exports\nmodule.exports = code;","/**\n * Options for Setup -> Settings -> Invoice Template\n */\nexport default angular.module('deskworks.optsInvoiceTemplate', [])\n\n  .factory('optsInvoiceTemplate', function($rootScope, $translate) {\n    const opts = [\n      { id: 'standard', _name: 'SETUP_SETTINGS.INVOICE_TEMPLATE.STANDARD' },\n      { id: 'alternate', _name: 'SETUP_SETTINGS.INVOICE_TEMPLATE.ALTERNATE' },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { opts.forEach(opt => { opt.name = $translate.instant(opt._name); }); }\n\n    return opts;\n  });\n","export default angular.module('deskworks.ReservationFieldOption', [\n  'ngResource',\n  'deskworks.config',\n])\n\n  .factory('ReservationFieldOption', function($resource, $filter, $timeout, deskworksConfig) {\n    const res = $resource(deskworksConfig.getApiAbsUrl('/reservation-fields/:fieldId/options/:id'), {}, {\n      update: { method: 'PUT' }\n    });\n\n    return {\n      /**\n       * @param params.fieldId\n       * @param params.option\n       * @returns {*}\n       */\n      save: params => {\n        const { fieldId, option } = params;\n        if (option.id) return res.update({ fieldId, id: option.id }, option).$promise;\n        return res.save({ fieldId }, option).$promise\n          .then(result => { option.id = result.id; });\n      },\n\n      /**\n       * @param params.fieldId\n       * @param params.id\n       * @returns {*}\n       */\n      delete: params => res.delete(params).$promise,\n    };\n  });\n"],"sourceRoot":""}