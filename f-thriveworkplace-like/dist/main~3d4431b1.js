(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"+xae":function(e,t,n){"use strict";n.r(t);n("JBxO"),n("FdtR");t.default=angular.module("autoSave",["debounce"]).factory("autoSave",["$q","debounce",function(e,t){return{wrap:function(n,r){return t((function(t){return function(t){var a=r||t.$$form;if(a&&a.$invalid)return;return e.when(t.$$autoSaving).catch((function(){})).then((function(){return t.$$autoSaving=e.when(n.call(t,t)),t.$$autoSaving.then((function(){a&&a.$setPristine()})).finally((function(){delete t.$$autoSaving})),t.$$autoSaving}))}(t||this)}),1e3)}}}])},"0SAq":function(e,t,n){"use strict";n.r(t);n("JBxO"),n("FdtR");angular.module("deskworks.routeHelper",["deskworks.state","session"]).service("routeHelper",["dwAlerts","$q","$timeout","session","state",function(e,t,n,r,a){var i;this.auth=function(e){return null===e?(i||r.wait()).then((function(){if(r.isAnonymous())throw null;return r.user})):i||(i=r.wait().then((function(){if(r.isAnonymous())throw e||a.setParam("redirect",a.getPath()),a.setPath(e||"/sign-in",!0),null})).then((function(){return a.getCentersPromise()})).finally((function(){i=null})))},this.selectUser=function(){return a.isUserSelected()?t.when():("/user-search"!==a.getPath()&&(a.setParam("redirect",a.getPath()),a.setPath("/user-search")),t.reject())}}])},"1AIy":function(e,t,n){"use strict";n.r(t);n("Muwe"),n("y89P");t.default=angular.module("setLocale",["tmh.dynamicLocale"]).factory("setLocale",["$locale","$rootScope","tmhDynamicLocale","dwAlerts","helper",function(e,t,n,r,a){return function(a){return(a=a||{}).locale=a.locale||"en-us",t.currentLocale=a.locale,n.set(a.locale).catch((function(e){return r.error(e,"Failed to set "+a.locale+" locale.")})).then((function(){var n=e.DATETIME_FORMATS,r=e.NUMBER_FORMATS;return e.timeFormat=a.timeFormat,n.shortTime=24===e.timeFormat?"HH:mm":"hh:mm a",n.mediumDate=n.mediumDate.replace(/ '\u0433'.$/,""),n.weekDate=n.fullDate.replace(/ '\u0433'.$/,"").replace("EEEE","EEE").replace("MMMM","MMM"),n.iso="yyyy-MM-ddTHH:mm:ssZ",r.DECIMAL_SEP=".",r.GROUP_SEP=",",moment.updateLocale(e.id,{week:{dow:n.FIRSTDAYOFWEEK?0:1}}),moment.locale(e.id),t.$emit("$setLocaleSuccess"),e}))}}])},"2nMP":function(e,t){angular.module("deskworks.checkIn.service",["ngResource","deskworks.config"]).factory("checkInService",["$resource","deskworksConfig","helper",function(e,t,n){"use strict";var r=e(t.getApiAbsUrl("/centers/:centerId/check-in")),a=e(t.getApiAbsUrl("/centers/:centerId/check-out"));return{checkIn:function(e,t){var n={accessCardNumber:t.accessCardNumber||void 0,login:t.login||void 0,password:t.password||void 0};return r.save({centerId:e},n).$promise},checkOut:function(e,t){var n={accessCardNumber:t.accessCardNumber||void 0,login:t.login||void 0,password:t.password||void 0};return a.save({centerId:e},n).$promise}}}])},"3HUq":function(e,t,n){"use strict";n.r(t);n("3dw1"),n("Muwe"),n("aZFp");angular.module("deserializeNumbers",["deskworks.helper"]).factory("deserializeNumbers",["helper",function(e){return function(e){return function(t){return t?(angular.forEach(angular.isArray(t)?t:[t],(function(t){t&&angular.forEach(angular.isArray(e)?e:[e],(function(e){var n=e.split(".");!function e(t,r){if(!r)return;t<n.length-1?angular.isArray(r[n[t]])&&r[n[t]].forEach((function(n){e(t+1,n)})):t<n.length&&r[n[t]]&&!isNaN(+r[n[t]])&&(r[n[t]]=+r[n[t]])}(0,t)}))})),t):t}}}])},"3HV4":function(e,t,n){"use strict";n.r(t);var r=n("nbuU"),a=n.n(r);n("3dw1");angular.module("deskworks.recurringCharge.service",["ngResource","deskworks.config","deskworks.billing.optsBillingFrequency","deskworks.billing.optsRecurringChargeStatus","deskworks.billing.optsNoticePeriod","deskworks.billing.optsDiscountType","deskworks.userProfile.optsMonthsOfDiscount","deskworks.billing.optsRecurringChargeTerminate","datesDeserializer"]).factory("recurringChargeService",["$resource","$q","$timeout","$filter","deskworksConfig","helper","datesDeserializer","optsBillingFrequency","optsRecurringChargeStatus","optsNoticePeriod","optsDiscountType","optsMonthsOfDiscount","optsRecurringChargeTerminate","optsRenewalTerm",function(e,t,n,r,i,o,u,s,c,l,d,f,m,g){r("toDate");var p=u(["lastBillDate","nextBillDate","entryDate","startDate","discountStartDate","terminate","noticeDate","renewalDate"]),h=e(i.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/recurring-charges/:recurringId"),{},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,p]},get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,p]},update:{method:"PUT"}});return{new:function(){var e={};return e.id=o.uid(),e.lastBillDate=moment(),e.nextBillDate=moment().add(1,"M"),e.status=c[0],e.billingFrequency=s[0],e.quantity=1,e.entryDate=moment(),e.startDate=moment(),e.noticePeriod=l[2],e.discountType=d[0],e.discountTrialOccurrences=f[0],e.discountStartDate=moment(),e.renewalDate=moment().add(1,"M"),e.renewalTerm=g[0].id,e.renewalNoticePeriod=null,e},isNew:function(e){return e&&o.isUid(e.id)},save:function(e,t,n){return o.isUid(n.id)?h.save({centerId:e,userId:t},this.unresolve(n)).$promise.then((function(e){return n.id=e.id,e})):h.update({centerId:e,userId:t,recurringId:n.id},this.unresolve(n)).$promise},query:function(e,t){return h.query({centerId:e,userId:t}).$promise.then((function(e){return angular.forEach(e,(function(e){e.status=a()(o).call(o,c,e.status)})),e}))},get:function(e,t,n){return h.get({centerId:e,userId:t,recurringId:n}).$promise.then((function(e){return e.userName=e.memberName,"new"===n?(e.lastBillDate=moment(),e.nextBillDate=moment().add(1,"M"),e.status=c[0],e.billingFrequency=s[0],e.quantity=1,e.entryDate=moment(),e.startDate=moment(),e.noticePeriod=l[2],e.discountType=d[0],e.discountTrialOccurrences=f[0],e.discountStartDate=moment(),e.renewalDate=moment().add(1,"M"),e.renewalTerm=g[0].id,e.renewalNoticePeriod=null):(e.status=a()(o).call(o,c,e.status),e.priceListProduct=a()(o).call(o,e.options.priceListProducts,e.priceListProductId),e.priceListProduct&&(e.billingFrequency=a()(o).call(o,s,e.priceListProduct.billingFrequency)),e.terminate&&e.billingFrequency&&(e.terminate="asNeeded"===e.billingFrequency.id?a()(o).call(o,m,e.terminate):e.terminate),e.noticePeriod=a()(o).call(o,l,e.noticePeriod),e.discountType=a()(o).call(o,d,e.discountTypeId)||d[0],e.discountTrialOccurrences=a()(o).call(o,f,e.discountTrialOccurrences)||f[0]),e}))},createCharge:function(e,t,n){return n.startDate=r("date")(n.startDate,"yyyy-MM-dd"),n.lastBillDate=r("date")(n.lastBillDate,"yyyy-MM-dd"),n.nextBillDate=r("date")(n.nextBillDate,"yyyy-MM-dd"),n.noticeDate=moment.isMoment(n.noticeDate)?r("date")(n.noticeDate,"yyyy-MM-dd"):n.noticeDate,n.terminate=moment.isMoment(n.terminate)?r("date")(n.terminate,"yyyy-MM-dd"):n.terminate,n.discountStartDate=r("date")(n.discountStartDate,"yyyy-MM-dd"),n.renewalDate&&(n.renewalDate=moment.isMoment(n.renewalDate)?r("date")(n.renewalDate,"yyyy-MM-dd"):n.renewalDate),h.save({centerId:e,userId:t},n).$promise},updateCharge:function(e,t,n,a){return a.startDate=r("date")(a.startDate,"yyyy-MM-dd"),a.lastBillDate=r("date")(a.lastBillDate,"yyyy-MM-dd"),a.nextBillDate=r("date")(a.nextBillDate,"yyyy-MM-dd"),a.noticeDate=moment.isMoment(a.noticeDate)?r("date")(a.noticeDate,"yyyy-MM-dd"):a.noticeDate,a.terminate=moment.isMoment(a.terminate)?r("date")(a.terminate,"yyyy-MM-dd"):a.terminate,a.discountStartDate=r("date")(a.discountStartDate,"yyyy-MM-dd"),a.renewalDate&&(a.renewalDate=moment.isMoment(a.renewalDate)?r("date")(a.renewalDate,"yyyy-MM-dd"):a.renewalDate),h.update({centerId:e,userId:t,recurringId:n},a).$promise},deleteCharge:function(e,t,n){return h.delete({centerId:e,userId:t,recurringId:n}).$promise},setUseForCheckInBilling:function(e,t,n){return h.update({centerId:e,userId:t,recurringId:n},{useForCheckInBilling:!0}).$promise},unresolve:function(e){var t={name:e.name,priceListProductId:e.priceListProduct?e.priceListProduct.id:null,nextBillDate:r("date")(e.nextBillDate,"yyyy-MM-dd"),lastBillDate:r("date")(e.lastBillDate,"yyyy-MM-dd"),noticeDate:r("date")(e.noticeDate,"yyyy-MM-dd"),terminate:r("date")(e.terminate,"yyyy-MM-dd"),renewalDate:r("date")(e.renewalDate,"yyyy-MM-dd"),renewalTerm:e.renewalTerm,renewalNoticePeriod:e.renewalNoticePeriod,quantity:e.quantity,noticePeriod:e.noticePeriod?e.noticePeriod.id:e.noticePeriod,status:e.status?e.status.id:e.status,notes:e.notes,attachedReservationUnitId:e.attachedReservationUnitId||null};return t.discountStartDate=r("date")(e.discountStartDate,"yyyy-MM-dd"),e.discountType&&e.discountType.id?(t.discountTypeId=e.discountType.id,t.discountValue=e.discountValue,e.discountTrialOccurrences&&(t.discountTrialOccurrences=e.discountTrialOccurrences.id)):t.discountTypeId=0,t}}}])},"7JnH":function(e,t){angular.module("deskworks.billing.optsDiscountType",[]).factory("optsDiscountType",["$rootScope","$translate",function(e,t){"use strict";var n=[{id:0,_name:"RECURRING_BILLING.DISCOUNT.TYPE.NO"},{id:1,_name:"RECURRING_BILLING.DISCOUNT.TYPE.$"},{id:2,_name:"RECURRING_BILLING.DISCOUNT.TYPE.%"}];function r(){n.forEach((function(e){e.name=t.instant(e._name)}))}return r(),e.$on("$setTranslationsSuccess",r),n}])},"7jkG":function(e,t,n){"use strict";n.r(t);n("Muwe"),n("y89P");var r=n("gQJ2"),a=n.n(r);angular.module("ccValidator",[]).factory("ccValidator",(function(){var e={},t=["visa","master","american_express","diners-club","discover","jcb","unionpay","maestro"];function n(e){var t,n,r;return e?(t=e.prefixPattern.source,n=e.exactPattern.source,(r=JSON.parse(a()(e))).prefixPattern=t,r.exactPattern=n,r):null}function r(r){var a,i,o=[],u=[];if(!("string"==typeof r||r instanceof String))return[];for(i=0;i<t.length;i++)a=e[t[i]],0!==r.length?a.exactPattern.test(r)?u.push(n(a)):a.prefixPattern.test(r)&&o.push(n(a)):o.push(n(a));return u.length?u:o}return e.visa={niceType:"Visa",type:"visa",prefixPattern:/^4$/,exactPattern:/^4\d*$/,gaps:[4,8,12],lengths:[16,18,19],code:{name:"CVV",size:3}},e.master={niceType:"MasterCard",type:"master",prefixPattern:/^(5|5[1-5]|2|22|222|222[1-9]|2[3-6]|27|27[0-2]|2720)$/,exactPattern:/^(5[1-5]|222[1-9]|2[3-6]|27[0-1]|2720)\d*$/,gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},e.american_express={niceType:"American Express",type:"american_express",prefixPattern:/^(3|34|37)$/,exactPattern:/^3[47]\d*$/,isAmex:!0,gaps:[4,10],lengths:[15],code:{name:"CID",size:4}},e["diners-club"]={niceType:"Diners Club",type:"diners-club",prefixPattern:/^(3|3[0689]|30[0-5])$/,exactPattern:/^3(0[0-5]|[689])\d*$/,gaps:[4,10],lengths:[14,16,19],code:{name:"CVV",size:3}},e.discover={niceType:"Discover",type:"discover",prefixPattern:/^(6|60|601|6011|65|64|64[4-9])$/,exactPattern:/^(6011|65|64[4-9])\d*$/,gaps:[4,8,12],lengths:[16,19],code:{name:"CID",size:3}},e.jcb={niceType:"JCB",type:"jcb",prefixPattern:/^(2|21|213|2131|1|18|180|1800|3|35)$/,exactPattern:/^(2131|1800|35)\d*$/,gaps:[4,8,12],lengths:[16],code:{name:"CVV",size:3}},e.unionpay={niceType:"UnionPay",type:"unionpay",prefixPattern:/^((6|62|62\d|(621(?!83|88|98|99))|622(?!06)|627[02,06,07]|628(?!0|1)|629[1,2])|622018)$/,exactPattern:/^(((620|(621(?!83|88|98|99))|622(?!06|018)|62[3-6]|627[02,06,07]|628(?!0|1)|629[1,2]))\d*|622018\d{12})$/,gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVN",size:3}},e.maestro={niceType:"Maestro",type:"maestro",prefixPattern:/^(5|5[06-9]|6\d*)$/,exactPattern:/^(5[06-9]|6[37])\d*$/,gaps:[4,8,12],lengths:[12,13,14,15,16,17,18,19],code:{name:"CVC",size:3}},r.getTypeInfo=function(t){return n(e[t])},r.types={VISA:"visa",MASTERCARD:"master",AMERICAN_EXPRESS:"american_express",DINERS_CLUB:"diners-club",DISCOVER:"discover",JCB:"jcb",UNIONPAY:"unionpay",MAESTRO:"maestro"},function(e){var t,n,a,o,u,s;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return i(null,!1,!1);if(e=e.replace(/\-|\s/g,""),!/^\d*$/.test(e))return i(null,!1,!1);if(0===(t=r(e)).length)return i(null,!1,!1);if(1!==t.length)return i(null,!0,!1);o="unionpay"===(n=t[0]).type||function(e){var t,n=0,r=!1,a=e.length-1;for(;a>=0;)t=parseInt(e.charAt(a),10),r&&(t*=2)>9&&(t=t%10+1),r=!r,n+=t,a--;return n%10==0}(e);for(s=Math.max.apply(null,n.lengths),u=0;u<n.lengths.length;u++)if(n.lengths[u]===e.length)return a=e.length!==s||o,i(n,a,o);return i(n,e.length<s,!1)};function i(e,t,n){return{card:e,isPotentiallyValid:t,isValid:n}}}))},AAdL:function(e,t,n){"use strict";n.r(t);var r=n("ipr/"),a=n.n(r),i=n("6RpP"),o=n.n(i);n("8cZI"),n("Muwe"),n("aZFp");angular.module("deskworks.isMultiSite",["deskworks.state"]).factory("isMultiSite",["$rootScope","state",function(e,t){function n(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=n||"",u=new Date;u.setTime(u.getTime()+2592e6);var s,c,l=n?u.toGMTString():"Thu, 01 Jan 1970 00:00:01 GMT",d=a()(e=window.location.hostname.toLowerCase().split(".")).call(e,-2).join(".");(document.cookie=o()(t="DwSiteCookie=".concat(i,"; expires=")).call(t,l,"; domain=.satellitedeskworks.com; path=/"),d.indexOf(".satellitedeskworks.com")<0)&&(document.cookie=o()(s=o()(c="DwSiteCookie=".concat(i,"; expires=")).call(c,l,"; domain=")).call(s,d,"; path=/"));r()}function r(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.CookieManagementPlugin&&(window.cordova.plugins.CookieManagementPlugin.flush(),console.log("DEBUG: flush cookies"))}return e.$watch((function(){return window.cordova}),r),e.$watch((function(){return t.getLoggedUserId()}),(function(e,t){!e&&t&&n(null)})),e.$on("$routeChangeSuccess",(function(){window.cordova&&t.getLoggedUserId()&&n(location.href)})),function(){return!!window.cordova&&!window.cordova.tenantLock}}])},CTp1:function(e,t,n){"use strict";n.r(t),t.default=angular.module("deskworks.optsRefundBillingMethod",[]).factory("optsRefundBillingMethod",["$rootScope","$translate",function(e,t){var n=[{id:"cc",_name:"PURCHASE.REFUND.METHOD.CC",forceSubmit:!0},{id:"ach",_name:"PURCHASE.REFUND.METHOD.ACH"},{id:"cash",_name:"PURCHASE.REFUND.METHOD.CASH"},{id:"check",_name:"PURCHASE.REFUND.METHOD.CHECK"},{id:"writeOff",_name:"PURCHASE.REFUND.METHOD.WRITE_OFF"},{id:"other",_name:"PURCHASE.REFUND.METHOD.OTHER"}];function r(){n.forEach((function(e){e.name=t.instant(e._name)}))}return r(),e.$on("$setTranslationsSuccess",r),n}])},FBHV:function(e,t,n){"use strict";n.r(t);var r=n("6RpP"),a=n.n(r),i=n("yCd9"),o=n.n(i);t.default=angular.module("deskworks.purchase.service",["ngResource","deskworks.config","datesDeserializer","deserializeNumbers"]).factory("purchaseService",["$resource","$filter","$timeout","deskworksConfig","helper","datesDeserializer","deserializeNumbers",function(e,t,n,r,i,u,s){var c=u(["open.firstOpened","paid.firstOpened","credit.firstOpened","open.lastModified","paid.lastModified","credit.lastModified","items.billedAt","items.createdAt","billDate","dueDate"]),l=s(["items.amount","items.price","items.quantity"]),d=e(r.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/purchases/:purchaseId"),{},{query:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,c]},get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,c,l]},update:{method:"PUT"}}),f=e(r.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/purchases/:purchaseId/items/:itemId"),{},{update:{method:"PUT"}}),m=e(r.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/purchases/:purchaseId/charges"),{},{update:{method:"PUT"}}),g=e(r.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/purchases/:purchaseId/discounts"),{},{update:{method:"PUT"}}),p=e(r.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/purchases/:purchaseId/refunds"),{},{update:{method:"PUT"}}),h=e(r.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/purchases/:purchaseId/payments"),{},{update:{method:"PUT"}}),y=e(r.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/purchases/:purchaseId/security-deposits"),{},{update:{method:"PUT"}}),I=e(r.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/purchases/:purchaseId/staff-helps"),{},{update:{method:"PUT"}}),v=e(r.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/purchases/:purchaseId/consolidations"),{},{update:{method:"PUT"}}),$=e(r.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/purchases/:purchaseId/discount-codes"));return{get:function(e,t,n,r){return d.get({centerId:e||0,userId:t,purchaseId:n,productId:r}).$promise},update:function(e,n,r,a){return a.billDate=t("date")(a.billDate,"yyyy-MM-dd"),a.dueDate=t("date")(a.dueDate,"yyyy-MM-dd"),d.update({centerId:e,userId:n,purchaseId:r},a).$promise},getPurchases:function(e,t){return d.query({centerId:e||0,userId:t}).$promise},query:function(e,t){return d.query({centerId:e||0,userId:t}).$promise.then((function(e){var t,n,r,i,u;return a()(t=a()(n=o()(r=e.open).call(r,(function(e){return e.type="open",e}))).call(n,o()(i=e.paid).call(i,(function(e){return e.type="paid",e})))).call(t,o()(u=e.credit).call(u,(function(e){return e.type="credit",e})))}))},createPurchase:function(e,t,n,r,a,i){return d.save({centerId:e||0,userId:t,registration:n,productId:r||void 0,attachedReservationUnitId:a||void 0,membershipStartDate:i||void 0},{}).$promise},createPurchaseForReservation:function(e,t,n){return d.save({centerId:e||0,userId:t},n).$promise},createCharge:function(e,t,n,r,a,i,o){return m.save({centerId:e||0,userId:t,purchaseId:n,custom:a,registration:i||void 0,productId:o},r).$promise},createDiscount:function(e,n,r,a){return a=angular.extend({},a),moment.isMoment(a.receivedAt)&&(a.receivedAt=t("date")(a.receivedAt,"yyyy-MM-dd")),a.amount=+a.amount,g.save({centerId:e||0,userId:n,purchaseId:r},a).$promise},createRefund:function(e,n,r,a){return a=angular.extend({},a),moment.isMoment(a.receivedAt)&&(a.receivedAt=t("date")(a.receivedAt,"yyyy-MM-dd")),a.amount=+a.amount,p.save({centerId:e||0,userId:n,purchaseId:r},a).$promise},deletePurchaseItem:function(e,t,n,r){return f.delete({centerId:e||0,userId:t,purchaseId:n,itemId:r}).$promise},createPayment:function(e,n,r,a,i,o,u){var s;return angular.isObject(e)&&(s=e,a=n),a=angular.extend({},a),moment.isMoment(a.receivedAt)&&(a.receivedAt=t("date")(a.receivedAt,"yyyy-MM-dd")),a.amount&&(a.amount=+a.amount),h.save(s||{centerId:e||0,userId:n,purchaseId:r,registration:i,productId:o,membershipStartDate:u},a).$promise},createDeposit:function(e,n,r,a,i,o){return a=angular.extend({},a),moment.isMoment(a.receivedAt)&&(a.receivedAt=t("date")(a.receivedAt,"yyyy-MM-dd")),a.amount=+a.amount,y.save({centerId:e||0,userId:n,purchaseId:r,registration:i,productId:o},a).$promise},createStaffHelp:function(e,t,n,r,a){return I.save({centerId:e||0,userId:t,purchaseId:n,registration:r,productId:a},{}).$promise},createDiscountCode:function(e){return $.save(i.pick(e,["centerId","userId","purchaseId"]),{code:e.code}).$promise},queryConsolidations:function(e){return v.query(e).$promise},consolidate:function(e,t,n,r){return v.save({centerId:e,userId:t,purchaseId:n},{sourcePurchaseId:r}).$promise}}}])},HCKn:function(e,t,n){"use strict";n.r(t);var r=n("6RpP"),a=n.n(r);n("Muwe"),n("w13K"),n("y89P");angular.module("NATS",[]).factory("NATS",["$rootScope","$window","deskworksConfig","state",function(e,t,n,r){if(!t.NATS)throw new Error("Missing websocket-nats dependency.");return angular.extend({},t.NATS,{connect:function(e){if(!(e=e||n.getWsUrl())){var r,s,c=n.getApiOrigin().match(/^(.*:)\/\/([A-Za-z0-9\-\.]+)(:[0-9]+)?(.*)$/i);c&&c[2]&&(e=a()(r=a()(s="".concat(c[1].replace("http","ws"),"://")).call(s,c[2])).call(r,c[3]||"","/nats"))}if(!e)throw new Error("NATS.connect: missing url");var l=t.NATS.connect(e);return l.publish=i(l.publish),l.subscribe=o(l.subscribe),l.request=u(l.request),l}});function i(e){return function(t,n,r,a){return(r||a)&&console.warn("we have opt_reply and opt_callback unimplemented in nats.publish"),t=s(t),(angular.isObject(n)||angular.isArray(n))&&(n=angular.toJson(n)),e.call(this,t,n)}}function o(t){return function(n,r,a){var i=angular.isFunction(r)?r:a;if(n=s(n),i){var o=i;i=function(t,n,r){return e.$apply((function(){return o.call(null,t&&angular.fromJson(t),n,r)}))}}return t.call(this,n,angular.isFunction(r)?i:r,angular.isFunction(a)?i:a)}}function u(e){return function(t,n,r,a){return console.warn("we have nats.request unimplemented"),e.call(this,t,n,r,a)}}function s(e){return e&&e.replace(/:siteId/,n.getSiteId()).replace(/:centerId/,r.getCurrentCenterId())}}])},JHgu:function(e,t){angular.module("deskworks.billing.optsRecurringChargeTerminate",[]).factory("optsRecurringChargeTerminate",["$rootScope","$translate",function(e,t){"use strict";var n=[{id:"never",_name:"RECURRING_BILLING.DATES.TERMINATE.NEVER"},{id:"usedUp",_name:"RECURRING_BILLING.DATES.TERMINATE.WHEN_USED_UP"}];function r(){n.forEach((function(e){e.name=t.instant(e._name)}))}return r(),e.$on("$setTranslationsSuccess",r),n}])},LZJC:function(e,t,n){"use strict";n.r(t);var r=n("hsT8"),a=n.n(r);n("Muwe"),n("X5mX"),n("y89P");angular.module("deskworks.state",["ngRoute","session","deskworks.center.service","deskworks.userProfile.service","deskworks.helper","autoCacheFactory"]).factory("state",["$rootScope","$location","$q","$route","$timeout","$window","session","centerService","userProfileService","helper","autoCacheFactory","resolveTimezone",function(e,t,n,r,i,o,u,s,c,l,d,f){var m,g,p=[],h="";u.wait().then((function(){u.isAnonymous()||e.$emit("LOGIN")}));var y,I={login:function(t,n,r){return u.login(t,n,r).then((function(){return e.$emit("LOGIN"),u.user}))},logout:function(t){return u.logout().then((function(){e.$emit("LOGOUT",t)}))},getCurrentUserId:function(){return angular.isDefined(t.search().user)?+t.search().user:u.user&&u.user.id},setCurrentUserId:function(e){t.search("user",e||null)},getCurrentUser:function(){return m||u.user},setCurrentUser:function(e){m=e,this.setCurrentUserId((e||{}).id)},getLoggedUserId:function(){return u.user&&u.user.id},getLoggedUser:function(){return u.user},setLoggedUserCenter:function(e,t){u.user.centerId=e,u.user.centerName=t},isLoggedAdmin:u.isAdmin,isLoggedMember:function(){return u.isRole("member")},isLoggedNonMember:function(){return u.isRole("nonMember")},isLoggedRole:function(e){return u.isRole(e)},isUserSelected:function(){return angular.isDefined(t.search().user)||u.user&&!this.isLoggedAdmin()},isMasterProfile:function(){return!this.isLoggedAdmin()&&I.getLoggedUserId()&&this.getLoggedUserId()!=this.getCurrentUserId()},getCurrentCenterId:function(){var e=t.search().center;return angular.isDefined(e)&&null!==e?+e:void 0},setCurrentCenterId:function(n){t.search("center",n?+n:null),e.$emit("CHANGE-CENTER")},getUserCenters:function(){var e=this;return a()(p).call(p,(function(t){return e.isLoggedAdmin()||t.reservationUnitsCount>0}))},currentCenterId:function(e){return angular.isDefined(e)&&this.setCurrentCenterId(+e),this.getCurrentCenterId()},getCurrentCenter:function(){return l.findByKeyValue(p,"id",this.getCurrentCenterId())},setCurrentCenter:function(e){e&&this.setCurrentCenterId(e.id)},currentCenter:function(e){return angular.isDefined(e)&&this.setCurrentCenter(e),this.getCurrentCenter()},getParam:function(e){return t.search()[e]},setParam:function(e,n){return t.search(e,angular.isDefined(n)?n:null)},resetParams:function(e){var n=t.search().user,r=t.search().center;return t.$$search=angular.isDefined(e)?e:{},angular.isDefined(n)&&t.search("user",n),angular.isDefined(r)&&t.search("center",r),this},getPath:function(){return t.path()},setPath:function(e,n){return n&&t.replace(),t.path(e),i(15e3)},back:function(){return o.history.back(),i(15e3)},getPageTitle:function(){return h},setPageTitle:function(e){return h=e,e},replace:function(){return t.replace(),this},getCentersPromise:function(){return g},prohibitBack:function(t,n,r){return(r=r||e).$on("$routeChangeStart",(function(e,a,i){a.$$route&&t.indexOf(a.$$route.controller)>=0&&(r.showError(n||"Back is not allowed."),e.preventDefault())}))}};return e.$on("$routeChangeSuccess",(function(){h=""})),e.$watch((function(){return t.search().user}),(function(t){t?f().then((function(){c.get(I.getCurrentCenterId(),t).then((function(t){m=t,e.$emit("CHANGE-USER")}))})):(m={},e.$emit("CHANGE-USER"))})),e.$on("LOGIN",(function(){d.emptyAll(),e.$emit("CENTERS:REFRESH"),g.then((function(t){if(y&&y(),y=e.$on("$routeChangeStart",(function(){p&&p.length>0&&!l.findByKeyValue(p,"id",I.getCurrentCenterId())&&I.setCurrentCenterId(u.user.centerId||p[0].id)})),!I.getCurrentCenterId()){I.replace();var n=u.user.centerId;p&&p.length>0&&!l.findByKeyValue(p,"id",n)&&(n=p[0].id),I.setCurrentCenterId(n)}}))})),e.$on("LOGOUT",(function(e,n){n=n||{},y&&(y(),y=null),d.emptyAll(),n.skipResetParams||(I.resetParams(),t.search("user",null),t.search("center",null)),p=[]})),e.$on("CHANGE-CENTER",(function(){d.emptyAll()})),e.$on("CENTERS:REFRESH",(function(){g=s.getCenters().then((function(e){return p=e,e})).catch((function(t){return e.showError(t,"CENTERS:REFRESH failed to load centers list")}))})),e.$on("CurrentUser:refresh",(function(){c.get(I.getCurrentCenterId(),I.getCurrentUserId()).then((function(e){m=e}))})),I}])},MnZc:function(e,t,n){"use strict";n.r(t),t.default=angular.module("deskworks.optsPaymentBillingMethod",[]).factory("optsPaymentBillingMethod",["$rootScope","$translate",function(e,t){var n=[{id:"cc",_name:"PURCHASE.PAYMENT.METHOD.CC",paymentMethodKey:"creditCards"},{id:"ach",_name:"PURCHASE.PAYMENT.METHOD.ACH",paymentMethodKey:"eChecks"},{id:"cash",_name:"PURCHASE.PAYMENT.METHOD.CASH"},{id:"check",_name:"PURCHASE.PAYMENT.METHOD.CHECK"},{id:"writeOff",_name:"PURCHASE.PAYMENT.METHOD.WRITE_OFF"},{id:"wireTransfer",_name:"PURCHASE.PAYMENT.METHOD.WIRE_TRANSFER"},{id:"other",_name:"PURCHASE.PAYMENT.METHOD.OTHER"},{id:"securityDeposit",_name:"PURCHASE.PAYMENT.METHOD.SECURITY_DEPOSIT"}];function r(){n.forEach((function(e){e.name=t.instant(e._name)}))}return r(),e.$on("$setTranslationsSuccess",r),n}])},OGsH:function(e,t){angular.module("debounce",[]).factory("debounce",["$timeout",function(e){"use strict";return function(t,n,r){var a;return function(){var i=this,o=arguments,u=function(){if(a=null,!r)return t.apply(i,o)},s=r&&!a;return e.cancel(a),a=e(u,n),s?t.apply(i,o):a}}}])},OSHC:function(e,t){angular.module("deskworks.billing.optsRenewalNoticePeriod",[]).factory("optsRenewalNoticePeriod",["$rootScope","$filter","$translate",function(e,t,n){"use strict";var r=[{id:null,_name:"RECURRING_BILLING.RENEWAL_NOTICE_PERIOD.NO_NOTICE"},{id:10},{id:30},{id:37},{id:60},{id:67},{id:90},{id:120}];function a(){r.forEach((function(e){e.name=e._name?n.instant(e._name):t("days")(e.id)}))}return a(),e.$on("$setTranslationsSuccess",a),r}])},OTKG:function(e,t,n){"use strict";n.r(t);var r,a,i,o,u,s,c,l,d,f,m,g,p,h,y,I,v,$,E,C=n("ayF/"),A=n.n(C),w=(n("Muwe"),n("w13K"),n("3dw1"),n("aZFp"),n("8cZI"),n("JBxO"),n("y89P"),n("hsT8")),S=n.n(w),T=n("03wM"),D=n.n(T),R=n("NOor"),M=n.n(R),k=n("a8hB"),P=n.n(k),N=n("ipr/"),U=n.n(N);t.default=S()(r=S()(a=S()(i=S()(o=S()(u=S()(s=S()(c=S()(l=S()(d=S()(f=S()(m=S()(g=S()(p=S()(h=S()(y=S()(I=S()(v=S()($=S()(E=angular.module("deskworks.helper",[]).factory("helper",["$window","$timeout","$compile","$templateCache","$filter",function(e,t,n,r,a){return{findByKeyValue:function(e,t,n){if(angular.isArray(e)&&t)for(var r=0;r<e.length;r++)if(e[r]&&e[r][t]==n)return e[r]},findIndexByKeyValue:function(e,t,n){if(angular.isArray(e)&&t)for(var r=0;r<e.length;r++)if(e[r]&&e[r][t]==n)return r;return-1},findIndex:function(e,t){if(!t&&0!==t||angular.isObject(t)||(t={id:t}),angular.isArray(e)&&t){for(var n=function(n){if(D()(t).every((function(r){return e[n]&&e[n][r]==t[r]})))return{v:n}},r=0;r<e.length;r++){var a=n(r);if("object"===A()(a))return a.v}return-1}},find:function(e,t){var n,r=M()(n=this).call(n,e,t);if(r>=0)return e[r]},isDateString:function(e){return angular.isString(e)&&!(!e.match(/^\d\d\d\d-\d\d-\d\d(?:T\d\d:\d\d:\d\d(?:(?:(?:-|\+)\d\d:?\d\d)|(?:\.\d\d\d\d?)?Z)?)?$/i)&&!e.match(/^\d\d:\d\d(?::?\d\d)?$/i))},isMobile:function(){if(e.navigator.userAgent&&(e.navigator.userAgent.match(/Android/i)||e.navigator.userAgent.match(/webOS/i)||e.navigator.userAgent.match(/iPhone/i)||e.navigator.userAgent.match(/iPad/i)||e.navigator.userAgent.match(/iPod/i)||e.navigator.userAgent.match(/BlackBerry/i)||e.navigator.userAgent.match(/Windows Phone/i)))return!0},isIE:function(){return/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&!(!document.uniqueID&&!window.MSInputMethodContext)},interpolateRoute:function(e,t){var n=[];return angular.forEach((e||"").split(":"),(function(e,r){if(0===r)n.push(e);else{var a=e.match(/(\w+)(?:[?*])?(.*)/),i=a[1];n.push(t[i]),n.push(a[2]||"")}})),n.join("")},unique:function(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)},uid:function(){return"dwuid"+Date.now()+Math.floor(Math.random()*Date.now()+Math.random()*Date.now())},isUid:function(e){return!!String(e).match(/^dwuid\d+/)},stripUid:function(e){if(!String(e).match(/^dwuid\d+/))return e},pointFirstInvalid:function(e){var n="string"==typeof e,r=(n?"".concat(e," "):"")+".ng-invalid:not(ng-form):not(form):not([ng-form]):not([disabled])",a=(n?document:angular.element(e)[0]).querySelector(r);return a&&t((function(){a.focus(),a.blur(),a.focus()})),a},focus:function(e){t((function(){var t=document.querySelector(e);t&&t.focus()}))},trim:function(e){var t;return angular.isUndefined(e)||null===e?"":P()(t=String(e)).call(t)},indexSoft:function(e,t,n){if(angular.isArray(e)&&angular.isArray(t)&&angular.isDefined(n)){var r;n=P()(r=String(n)).call(r).toLowerCase();for(var a=0;a<e.length;a++)for(var i=0;i<t.length;i++){var o;if(P()(o=String(e[a][t[i]])).call(o).toLowerCase()===n)return a}}return-1},searchSoft:function(e,t,n){if(angular.isArray(e)&&angular.isArray(t)&&angular.isDefined(n)){var r;n=P()(r=String(n)).call(r).toLowerCase();for(var a=0;a<e.length;a++)for(var i=0;i<t.length;i++){var o;if(P()(o=String(e[a][t[i]])).call(o).toLowerCase()===n)return e[a]}}},scrollTo:function(t){var n=document.querySelector(t);n&&e.scrollTo(0,e.pageYOffset+n.getBoundingClientRect().top)},purify:function(e,t,n){var r=this,a={};return t=angular.isArray(t)?t:D()(t||{}),D()(e).forEach((function(i){"$"===i[0]||t.some((function(e){return i===e}))||(a[n?r.toDashCase(i):i]=e[i])})),a},pick:function(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})},transcludeElement:function(e,t,a,i,o){return t.after(this.transcludeAttrs(n(r.get(i))(e),a,o))},transcludeAttrs:function(e,t,n){return e.attr(this.purify(t,n,!0))},toDashCase:function(e){return e.replace(/[A-Z]/g,(function(e,t){return(t?"-":"")+e.toLowerCase()}))},join:function(e,t){return S()(e).call(e,(function(e){return e})).join(t)},rgb2hex:function(e){if(!e||/^#[0-9A-F]{6}$/i.test(e))return e;function t(e){var t;return U()(t="0"+parseInt(e).toString(16)).call(t,-2)}return"#"+t((e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))[1])+t(e[2])+t(e[3])},hex2rgbArr:function(e){if("string"==typeof e&&/^#[0-9A-Fa-f]{6}$/.test(e)){var t=parseInt(e.substr(1),16);return[t>>16&255,t>>8&255,255&t]}return e},findParentElement:function(e,t){e=angular.element(e).parent();for(var n=0;n<5&&e.length;n++){if(t(e))return e;e=e.parent()}},toNumber:function(e){return e=+e,!isNaN(e)&&isFinite(e)?e:0},round:function(e,t){var n;if(isNaN(+e))return e;var r=+U()(n="1000000").call(n,0,(t||2)+1);return Math.round(e*r)/r}}}])).call(E,"yesno",["$translate",function(e){return function(t,n,r){return e.instant(t?"GLOBAL.YES":"GLOBAL.NO")}}])).call($,"pre",(function(){return function(e,t,n){return angular.isString(e)?e.replace(/\s/g,"&nbsp;"):""}}))).call(v,"ncurrency",["$filter",function(e){return e("currency")}])).call(I,"price",["$filter",function(e){return function(t,n,r){return angular.isNumber(t)||angular.isString(t)?e("number")(t,2).replace(",",""):"0.00"}}])).call(y,"nd",["$filter",function(e){return function(e,t,n){return e||"-"}}])).call(h,"zpad",(function(){return function(e,t){var n;if((e=""+(e||"")).length>=t)return e;return U()(n="00000000"+e).call(n,-1*t)}}))).call(p,"months",["$translate",function(e){return function(t,n){var r=e.instant("GLOBAL.MONTHS_FILTER",{monthsCount:t},"messageformat");return n?r.replace(/\d+\s*/,""):r}}])).call(g,"weeks",["$translate",function(e){return function(t,n){var r=e.instant("GLOBAL.WEEKS_FILTER",{weeksCount:t},"messageformat");return n?r.replace(/\d+\s*/,""):r}}])).call(m,"days",["$translate",function(e){return function(t,n){var r=e.instant("GLOBAL.DAYS_FILTER",{daysCount:t},"messageformat");return n?r.replace(/\d+\s*/,""):r}}])).call(f,"hours",["$translate",function(e){return function(t,n){var r=e.instant("GLOBAL.HOURS_FILTER",{hoursCount:t},"messageformat");return n?r.replace(/\d+\s*/,""):r}}])).call(d,"minutes",["$translate",function(e){return function(t,n){var r=e.instant("GLOBAL.MINUTES_FILTER",{minCount:t},"messageformat");return n?r.replace(/\d+\s*/,""):r}}])).call(l,"seconds",["$translate",function(e){return function(t,n){var r=e.instant("GLOBAL.SECONDS_FILTER",{secCount:t},"messageformat");return n?r.replace(/\d+\s*/,""):r}}])).call(c,"passes",["$translate",function(e){return function(t,n){var r=e.instant("GLOBAL.PASSES_FILTER",{passCount:t},"messageformat");return n?r.replace(/\d+\s*/,""):r}}])).call(s,"hoursMinutes",["$filter","helper",function(e,t){return function(n){if(!angular.isNumber(n))return n;var r=Math.floor(n/36e5),a=Math.round(60*(n/36e5-r));return t.join([r?r+e("hours")(r,!0)[0]:null,e("zpad")(a,2)+e("minutes")(a,!0)[0]]," ")}}])).call(u,"highlight",(function(){return function(e,t){if(!e||!t||0===e.length||0===t.length)return e;var n=(e=String(e)).toLowerCase().indexOf(t.toLowerCase());return n>=0?[U()(e).call(e,0,n),"<strong>",U()(e).call(e,n,n+t.length),"</strong>",U()(e).call(e,n+t.length)].join(""):e}}))).call(o,"isArray",(function(){return function(e,t){return angular.isArray(e)}}))).call(i,"isString",(function(){return function(e,t){return angular.isString(e)}}))).call(a,"join",["helper",function(e){return function(t,n){return e.join(t,n)}}])).call(r,"round",["helper",function(e){return e.round}])},P20j:function(e,t,n){"use strict";n.r(t);var r=n("nbuU"),a=n.n(r),i=n("yCd9"),o=n.n(i);n("JBxO"),n("FdtR"),n("Muwe"),n("X5mX"),n("aZFp");t.default=angular.module("resolveTimezone",[]).factory("resolveTimezone",["$rootScope","$q","$route","$location","dwAlerts","helper","setupService","centerService",function(e,t,n,r,i,u,s,c){var l;return e.$on("CHANGE-CENTER",(function(){n.current.reloadOnSearch||d()})),d;function d(){return l||(l=t.all({timezones:s.queryTimezones().catch((function(e){return i.error(e,"Failed to query timezones.")})).then((function(e){return moment.tz.names().length<e.length&&moment.tz.add(o()(e).call(e,(function(e){return e.tz}))),e})),centers:c.getCenters().catch((function(e){return i.error(e,"Failed to query centers.")}))}).then((function(e){if(e.centers.length){var t="new"===n.current.params.centerId?null:+n.current.params.centerId;t=t||r.search().center&&+r.search().center||e.centers[0].id;var i=(a()(u).call(u,e.centers,t)||e.centers[0]).timezone,o=a()(u).call(u,e.timezones,i);o&&moment.tz.setDefault(o.tz.split("|")[0])}})).finally((function(){l=null})))}}])},"Q9g/":function(e,t,n){"use strict";n.r(t),t.default=angular.module("deskworks.SecurityDepositRecord",["ngResource","deskworks.config","datesDeserializer"]).factory("SecurityDepositRecord",["$resource","deskworksConfig","datesDeserializer",function(e,t,n){var r=n(["date"]),a=e(t.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/security-deposit-records"),{},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,r]}});return{query:function(e){return a.query(e).$promise}}}])},R5S3:function(e,t){angular.module("deskworks.accounting.bulkInvoicing.service",["ngResource","deskworks.config","deskworks.helper","datesDeserializer"]).factory("bulkInvoicingService",["$resource","datesDeserializer","deskworksConfig","helper",function(e,t,n,r){"use strict";var a=t(["date","items.date"]),i=e(n.getApiAbsUrl("/centers/:centerId/send-invoices"),{},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,a]}}),o=e(n.getApiAbsUrl("/centers/:centerId/bulk-charges"),{},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,a]}});return{getInvoices:function(e){return i.query({centerId:e}).$promise},sendEmails:function(e,t){return i.save({centerId:e},t).$promise},getPurchases:function(e){return o.query({centerId:e}).$promise},billPurchases:function(e,t){return o.save({centerId:e},t).$promise}}}])},T6vr:function(e,t,n){"use strict";n.r(t);n("3dw1"),n("Muwe"),n("aZFp");angular.module("setTranslations",["pascalprecht.translate"]).factory("setTranslations",["$translatePartialLoader","$translate","$rootScope",function(e,t,n){return function(r,a){return e.addPart("_global"),r.forEach((function(t){e.addPart(t)})),t.use(a.split("-")[0]).then((function(){return t.refresh()})).then((function(){n.$emit("$setTranslationsSuccess")}))}}]).factory("$translateErrorHandler",["$q","dwAlerts",function(e,t){return function(n,r,a){return"en"!==r?e.when():t.error("Failed to load "+n+"-"+r+" translation.").catch(angular.noop)}}])},UBkG:function(e,t,n){"use strict";n.r(t);var r,a,i=n("hsT8"),o=n.n(i);t.default=o()(r=o()(a=angular.module("dateFilters",["deskworks.helper"]).config(["$provide",function(e){e.decorator("dateFilter",["$delegate",function(e){return function(t,n,r){return t instanceof moment?e(t.toDate(),n,t.format("ZZ")):e(t,n,r)}}])}])).call(a,"numTimeToDate",(function(){return function(e){return moment().hour(Math.floor(+e)).minute(+e%1?30:0).second(0).millisecond(0)}}))).call(r,"toDate",["helper",function(e){return function(t){return e.isDateString(t)?t.length<=8?moment.tz(t,"HH:mm:ss",moment.defaultZone.name):moment.tz(t,moment.defaultZone.name):t}}])},VLhr:function(e,t,n){"use strict";n.r(t),t.default=angular.module("deskworks.rcHelper",[]).factory("rcHelper",["$filter",function(e){return{weekStart:function(e){return(moment.isMoment(e)?e.clone():moment()).startOf("week")},weekEnd:function(e){return(moment.isMoment(e)?e.clone():moment()).endOf("week")},floorDate:function(e,t){return e.minutes(Math.floor(e.minutes()/t)*t,0,0),e},dateToStr:function(t){return e("date")(t,"yyyy-MM-ddTHH:mm:00Z")},checkIntersection:function(e,t,n,r){return e<=r&&e>=n||t<=r&&t>=n||e<=n&&t>=r}}}])},Zy0Y:function(e,t){angular.module("deskworks.billing.optsRenewalTerm",[]).factory("optsRenewalTerm",["$rootScope","$filter",function(e,t){"use strict";var n=[{id:1},{id:3},{id:6},{id:12},{id:24}];function r(){n.forEach((function(e){e.name=t("months")(e.id)}))}return r(),e.$on("$setTranslationsSuccess",r),n}])},aAGo:function(e,t){angular.module("deskworks.userProfile.optsMonthsOfDiscount",[]).factory("optsMonthsOfDiscount",["$rootScope","$translate",function(e,t){"use strict";for(var n=[{id:1,_name:"RECURRING_BILLING.DISCOUNT.MONTHS.SINGLE"}],r=2;r<25;r++)n.push({id:r,name:String(r)});function a(){n[0].name=t.instant(n[0]._name)}return a(),e.$on("$setTranslationsSuccess",a),n}])},ajN4:function(e,t,n){"use strict";n.r(t);n("3dw1");t.default=angular.module("autoCacheFactory",[]).provider("autoCacheFactory",(function(){var e=this;return e.disableCache=!1,e.$get=function(){var t={};function n(n,r){var a=0,i={},o={id:n,expiryTime:r||0};return n in t||(t[n]={put:function(t,n){if(!angular.isUndefined(n)&&!e.disableCache&&o.expiryTime)return t in i||a++,i[t]={value:n,time:Date.now()},n},get:function(e){if(e in i&&Date.now()-i[e].time>1e3*o.expiryTime&&this.remove(e),e in i)return i[e].value},remove:function(e){e in i&&a--,delete i[e]},removeAll:function(){i={},a=0},destroy:function(){i=null,o=null,delete t[n]},info:function(){return angular.extend({},o,{size:a})}}),t[n]}return n.info=function(){var e={};return angular.forEach(t,(function(t,n){e[n]=t.info()})),e},n.get=function(e){return t[e]},n.emptyAll=function(){angular.forEach(t,(function(e){e.removeAll()}))},n},e}))},bk9w:function(e,t){angular.module("security",["deskworks.config"]).factory("security",["$http","$q","deskworksConfig",function(e,t,n){var r,a={login:function(t,i,o){return(r=e.post(n.getApiAbsUrl("/sessions"),{login:t,password:i,rememberMe:o})).then((function(e){a.currentUser=e.data.user})),r},logout:function(){return e.delete(n.getApiAbsUrl("/sessions/123")).then((function(){r=null,a.currentUser=null}))},requestCurrentUser:function(){return r||(r=a.isAuthenticated()?t.when(a.currentUser):e.get(n.getApiAbsUrl("/sessions/123")).then((function(e){return angular.isDefined(e.data.success)&&!e.data.success?t.reject():(a.currentUser=e.data.user,t.when(a.currentUser))})))},currentUser:null,isAuthenticated:function(){return!!a.currentUser},isAdmin:function(){return!(!a.currentUser||!a.currentUser.admin)}};return a}])},cU3u:function(e,t){angular.module("deskworks.billing.optsBillingFrequency",[]).factory("optsBillingFrequency",["$rootScope","$translate",function(e,t){"use strict";var n=[{id:"monthly",_name:"RECURRING_BILLING.GENERAL.BILLING_FREQUENCY.MONTHLY",months:1},{id:"quarterly",_name:"RECURRING_BILLING.GENERAL.BILLING_FREQUENCY.QUARTERLY",months:3},{id:"semiAnnual",_name:"RECURRING_BILLING.GENERAL.BILLING_FREQUENCY.SEMI_ANNUAL",months:6},{id:"annual",_name:"RECURRING_BILLING.GENERAL.BILLING_FREQUENCY.ANNUAL",months:12},{id:"asNeeded",_name:"RECURRING_BILLING.GENERAL.BILLING_FREQUENCY.AS_NEEDED"}];function r(){n.forEach((function(e){e.name=t.instant(e._name)}))}return r(),e.$on("$setTranslationsSuccess",r),n}])},eEea:function(e,t){angular.module("deskworks.billing.optsNoticePeriod",[]).factory("optsNoticePeriod",["$rootScope","$filter",function(e,t){"use strict";var n=[{id:10,name:"10 days"},{id:15,name:"15 days"},{id:30,name:"30 days"},{id:60,name:"60 days"},{id:90,name:"90 days"}];function r(){n.forEach((function(e){e.name=t("days")(e.id)}))}return r(),e.$on("$setTranslationsSuccess",r),n}])},fbex:function(e,t,n){"use strict";n.r(t);n("JBxO"),n("FdtR");angular.module("userTasksPolicy",["session","deskworks.routeHelper","deskworks.UserTasks.service"]).factory("userTasksPolicy",["$rootScope","$q","$route","dwAlerts","helper","state","session","UserTasks","routeHelper",function(e,t,n,r,a,i,o,u,s){var c;return e.$on("CHANGE-CENTER",(function(){n.current.reloadOnSearch||l()})),l;function l(){var e=["dashboard","sign-in","sign-out"];return!1===n.current.$$route.userTasksPolicy||e.indexOf(n.current.$$route.routeBranch)>=0?t.resolve({}):c||(c=o.wait().then((function(){return i.getCentersPromise()})).then((function(){return u.query(i.getCurrentCenterId(),i.isMasterProfile()&&i.getCurrentUserId()).catch((function(e){return r.error(e,"userTasksPolicy: failed to query user-tasks.")}))})).then((function(r){if(!1===n.current.$$route.userTasksPolicy)return t.resolve({});if(e.indexOf(n.current.$$route.routeBranch)>=0)return t.resolve({});var a="/"+n.current.$$route.routeBranch;return r.some((function(e){return e.tasks.some((function(e){return e.url===a}))}))?t.resolve():(i.resetParams().setPath("/dashboard"),t.reject())})).finally((function(){c=null})))}}])},laQf:function(e,t){angular.module("resolveGtm",[]).factory("resolveGtm",["dwAlerts","setupService",function(e,t){"use strict";var n;return function(){return t.getSetupSettings().catch((function(t){return e.error(t,"Failed to get setup settings.")})).then((function(e){e.gtmContainerId&&e.gtmContainerId!==n&&(n=e.gtmContainerId,function(e,t,n,r,a){e[r]=e[r]||[],e[r].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=t.getElementsByTagName(n)[0],o=t.createElement(n);o.async=!0,o.src="https://www.googletagmanager.com/gtm.js?id="+a,i.parentNode.insertBefore(o,i)}(window,document,"script","dataLayer",n))}))}}])},ljkM:function(e,t,n){"use strict";n.r(t),function(e){var t,r=n("ayF/"),a=n.n(r);n("JBxO"),n("FdtR"),n("WoWj"),n("U00V"),n("3dw1");t=function(){return angular.module("tmh.dynamicLocale",[]).config(["$provide",function(e){function t(e){return e.$stateful=!0,e}e.decorator("dateFilter",["$delegate",t]),e.decorator("numberFilter",["$delegate",t]),e.decorator("currencyFilter",["$delegate",t])}]).constant("tmhDynamicLocale.STORAGE_KEY","tmhDynamicLocale.locale").provider("tmhDynamicLocale",["tmhDynamicLocale.STORAGE_KEY",function(e){var t,r,a,i="angular/i18n/angular-locale_{{locale}}.js",o="tmhDynamicLocaleStorageCache",u=e,s="get",c="put",l={},d={};function f(e,t,i,o,s,d,f){function m(e,t){a===i&&(angular.forEach(e,(function(n,r){t[r]?angular.isArray(t[r])&&(e[r].length=t[r].length):delete e[r]})),angular.forEach(t,(function(n,r){angular.isArray(t[r])||angular.isObject(t[r])?(e[r]||(e[r]=angular.isArray(t[r])?[]:{}),m(e[r],t[r])):e[r]=t[r]})))}if(l[i])return a=i,l[i];var g,p=s.defer();return i===a?p.resolve(t):(g=d.get(i))?(a=i,o.$evalAsync((function(){m(t,g),r[c](u,i),o.$broadcast("$localeChangeSuccess",i,t),p.resolve(t)}))):(a=i,l[i]=p.promise,function(e,t,r,a){n("aoir")("./angular-locale_".concat(e,".js")).then(t).catch((function(e){console.error("ERROR:",e),r()}))}(i,(function(){var e=angular.injector(["ngLocale"]).get("$locale");m(t,e),d.put(i,e),delete l[i],o.$applyAsync((function(){r[c](u,i),o.$broadcast("$localeChangeSuccess",i,t),p.resolve(t)}))}),(function(){delete l[i],o.$applyAsync((function(){a===i&&(a=t.id),o.$broadcast("$localeChangeError",i),p.reject(i)}))}))),p.promise}this.localeLocationPattern=function(e){return e?(i=e,this):i},this.appendScriptTo=function(e){},this.useStorage=function(e){o=e,s="get",c="put"},this.useCookieStorage=function(){angular.version.minor<7?this.useStorage("$cookieStore"):(this.useStorage("$cookies"),s="getObject",c="putObject")},this.defaultLocale=function(e){t=e},this.storageKey=function(e){return e?(u=e,this):u},this.addLocalePatternValue=function(e,t){d[e]=t},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function(e,n,c,l,m,g,p){var h=c(i);return r=n.get(o),e.$evalAsync((function(){var e;(e=r[s](u)||t)&&y(e)})),{set:y,get:function(){return a}};function y(t){var n={locale:t,angularVersion:angular.version.full};return f(h(angular.extend({},d,n)),l,t,e,m,g)}}]}]).provider("tmhDynamicLocaleCache",(function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales")}]})).provider("tmhDynamicLocaleStorageCache",(function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales.store")}]})).run(["tmhDynamicLocale",angular.noop]),"tmh.dynamicLocale"},"function"==typeof define&&n("K2jg")?define([],(function(){return t()})):"object"===("undefined"==typeof exports?"undefined":a()(exports))?e.exports=t():t()}.call(this,n("Ono3")(e))},qmMG:function(e,t,n){"use strict";n.r(t);n("3dw1"),n("Muwe"),n("aZFp");t.default=angular.module("datesDeserializer",[]).factory("datesDeserializer",["$filter",function(e){var t=e("toDate");return function(e,n){return function(n){return n?(n=angular.fromJson(n),angular.forEach(angular.isArray(n)?n:[n],(function(n){n&&angular.forEach(angular.isArray(e)?e:[e],(function(e){var r=e.split(".");!function e(n,a){if(!a)return;n<r.length-1?angular.isArray(a[r[n]])&&a[r[n]].forEach((function(t){return e(n+1,t)})):n<r.length&&(a[r[n]]=t(a[r[n]]))}(0,n)}))})),n):n}}}])},syNh:function(e,t){angular.module("deskworks.billing.optsRecurringChargeStatus",[]).factory("optsRecurringChargeStatus",["$rootScope","$translate",function(e,t){"use strict";var n=[{id:"active",_name:"RECURRING_BILLING.STATUS_NOTES.STATUS.ACTIVE"},{id:"inactive",_name:"RECURRING_BILLING.STATUS_NOTES.STATUS.INACTIVE"},{id:"deleted",_name:"RECURRING_BILLING.STATUS_NOTES.STATUS.DELETED"}];function r(){n.forEach((function(e){e.name=t.instant(e._name)}))}return r(),e.$on("$setTranslationsSuccess",r),n}])},tGEK:function(e,t,n){"use strict";n.r(t),t.default=angular.module("deskworks.appDim",[]).factory("appDim",["$rootScope",function(e){return function(t){e.appDim=t}}])}}]);