(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"+cDO":function(e,t,r){"use strict";r.r(t);r("8cZI");var s=r("SnDj"),n=r.n(s);t.default=angular.module("deskworks.ourMembersEmbeddingDirective",["deskworks.config"]).directive("ourMembersEmbedding",(function(){return{template:n.a,restrict:"E",scope:!0,controller:"OurMembersEmbeddingDirectiveCtrl as $ctrl",bindToController:{}}})).controller("OurMembersEmbeddingDirectiveCtrl",["$scope","state","helper","deskworksConfig",function(e,t,r,s){var n=this;n.$onInit=function(){var e=s.getApiOrigin();n.getCode=function(s){return r.join(["<script dw-our-members",+t.getParam("centerId")?'dw-center-id="'.concat(t.getParam("centerId"),'"'):null,'src="'.concat(e,'/our-members.js"><\/script>')]," ")}}}])},"0YJG":function(e,t,r){"use strict";r.r(t);var s=r("0zKI"),n=r.n(s),l=r("xeXu"),a=r.n(l),f=r("nbuU"),o=r.n(f),i=r("WSeP"),c=r.n(i);angular.module("deskworks.upAccessCodes",[]).directive("upAccessCodes",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-access-codes.tpl.html",controller:"upAccessCodesCtrl as $ctrl",bindToController:{user:"<userProfile",save:"="}}})).controller("upAccessCodesCtrl",["$scope","$q","$filter","$timeout","state","helper","systemService",function(e,t,r,s,l,f,i){var u=this;function d(){var e=[];return c()(angular).call(angular,u.user.accessCards,(function(t){var r=o()(f).call(f,u.rollback,t.id);if(!r||r.number!==t.number){var s={number:t.number,userId:u.user.userId||u.user.id};t.id&&"new"!==t.id?e.push(i.updateAccessCard(l.getCurrentCenterId(),t.id,s)):e.push(i.createAccessCard(l.getCurrentCenterId(),s).then((function(e){t.id=e.id})))}})),c()(angular).call(angular,u.rollback,(function(t){f.findByKeyValue(u.user.accessCards,"id",t.id)||e.push(i.removeAccessCard(l.getCurrentCenterId(),t.id))})),t.all(e)}u.$onInit=function(){u.save=d,e.$watch("ffBlock.editMode",(function(e){e&&(u.rollback=angular.copy(u.user.accessCards))})),e.$on("ffControl::EditCancel",(function(){e.ffBlock.editMode&&(u.user.accessCards=u.rollback||u.user.accessCards,u.rollback=null)}))},u.add=function(){e.ffBlock.editMode||e.$emit("ffBlock::EditStart"),i.getAccessCard(l.getCurrentCenterId(),"new").then((function(e){s((function(){return u.user.accessCards.push(e)}))}))},u.delete=function(t){var r,s,l=a()(r=u.user.accessCards).call(r,t);l>=0&&(n()(s=u.user.accessCards).call(s,l,1),e.ffBlockForm.$setDirty())}}])},"1TsL":function(e,t,r){},"2M2i":function(e,t,r){"use strict";r.r(t);var s=r("iAzO"),n=r("DVTZ"),l=r("yrhy"),a=r("XRrO"),f=r("Oio6"),o=r("Tjft");t.default=angular.module("deskworks.upCoMembers",["deskworks.helper","deskworks.state","deskworks.userProfile.service",s.a.name,n.a.name,l.a.name,a.a.name,f.a.name,o.a.name]).directive("upCoMembers",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-co-members.tpl.html",controller:"upCoMembersCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upCoMembersCtrl",["$scope","$q","dwAlerts","dwModal","helper","state","userProfileService",function(e,t,r,s,n,l,a){var f=this;f.exUserCollapsed=!0,f.new=a.coMember.new,f.isNew=a.coMember.isNew,f.makeCoMemberInactive=!0,f.save=function(e){return a.coMember.save(l.getCurrentCenterId(),f.user.id,e).catch((function(e){return r.error(e,"Failed to save co-member.")})).then((function(){return e.saveAccessCards?e.saveAccessCards().catch((function(e){return r.error(e,"Failed to save access cards.")})):null}))},f.delete=function(t){return s.show({scope:e,templateUrl:"DeleteCoMemberTpl",controller:["$scope","close",function(e,t){e.close=t}]}).then((function(e){return e.element[0].querySelector("button[type=submit]").focus(),e.close.then((function(e){if(!e)throw"modal cancel"}))})).then((function(){return a.coMember.delete(l.getCurrentCenterId(),f.user.id,t,f.makeCoMemberInactive).catch((function(e){return r.error(e,"Failed to delete co-member.")}))}))},f.isNewExisting=function(e){return(e.userId||e.existingUserId)&&n.isUid(e.id)},f.newExisting=function(e){return a.get(l.getCurrentCenterId(),e.id).catch((function(e){return r.error(e,"Failed to get user profile.")})).then((function(e){f.user.coMembers.push(a.coMember.convertUserToCoMember(e)),delete f.quickUser}))}}])},"2cun":function(e,t){angular.module("deskworks.upMailboxes",["deskworks.helper","deskworks.state","deskworks.userProfile.service"]).directive("upMailboxes",(function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-mailboxes.tpl.html",controller:"upMailboxesCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upMailboxesCtrl",["$scope","$window","$q","$translate","dwAlerts","helper","state","userProfileService","optsMailboxHandling",function(e,t,r,s,n,l,a,f,o){"use strict";var i=this;i.handlingOpts=o,i.new=f.mailbox.new,i.isNew=f.mailbox.isNew,i.save=function(e){return f.mailbox.save(a.getCurrentCenterId(),i.user.id,e).catch((function(e){return n.error(e,"Failed to save mailbox.")}))},i.delete=function(e){return t.confirm(s.instant("USER_PROFILE.MAILBOXES.CONFIRM_DELETE"))?f.mailbox.delete(a.getCurrentCenterId(),i.user.id,e).catch((function(e){return n.error(e,"Failed to delete mailbox.")})):r.reject()}}])},3658:function(e,t,r){"use strict";r.r(t);var s=r("6RpP"),n=r.n(s),l=r("bfRn"),a=r("+Ie/");t.default=angular.module("deskworks.upCreditCards",["deskworks.helper","deskworks.state","deskworks.userProfile.service","deskworks.paymentMethodHasDelete",l.a.name,a.a.name]).directive("upCreditCards",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/billing-sections/up-credit-cards.tpl.html",controller:"upCreditCardsCtrl as $ctrl",bindToController:{user:"<userProfile",reg:"<",settings:"<",single:"<"}}})).controller("upCreditCardsCtrl",["$scope","$element","$attrs","$q","$window","$translate","dwAlerts","helper","state","userProfileService","paymentMethodHasDelete",function(e,t,r,s,l,a,f,o,i,c,u){var d=this;d.new=function(){var e=c.creditCard.new(d.user);return e.type=d.settings.creditCardTypes[0],e},d.isNew=c.creditCard.isNew,d.hasDeleteButton=function(e,t){var r;return u({method:e,methods:n()(r=d.user.creditCards).call(r,d.user.eChecks),single:d.single,editMode:t.editMode,reg:d.reg})},d.save=function(e){return c.creditCard.save(i.getCurrentCenterId(),d.user.id,e).catch((function(e){return f.error(e,"Failed to save credit card.")}))},d.delete=function(e){return c.creditCard.isNew(e)?s.when():l.confirm(a.instant("BILLING_PROFILE.CREDIT_CARDS.CONFIRM_DELETE"))?c.creditCard.delete(i.getCurrentCenterId(),d.user.id,e).catch((function(e){return f.error(e,"Failed to delete credit card.")})):s.reject()}}])},"3IK2":function(e,t,r){"use strict";r.r(t);var s=r("YtL8"),n=r.n(s),l=r("bfRn");t.default=angular.module("deskworks.upAddresses",["deskworks.helper","deskworks.state","deskworks.userProfile.service",l.a.name]).directive("upAddresses",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-addresses.tpl.html",controller:"upAddressesCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",center:"<",single:"<"}}})).controller("upAddressesCtrl",["$scope","$q","$window","$translate","dwAlerts","state","helper","userProfileService","optsAddressType","optsCountry","optsState",function(e,t,r,s,l,a,f,o,i,c,u){var d=this;d.types=i,d.countries=c,d.states=u,d.new=o.address.new,d.isNew=o.address.isNew,d.countExisting=function(){var e;return n()(e=d.user.addresses).call(e,(function(e,t){return f.isUid(t.id)?e:e+1}),0)},d.save=function(e){return o.address.save(a.getCurrentCenterId(),d.user.id,e).catch((function(e){return l.error(e,"Failed to save address.")}))},d.delete=function(e){return o.address.isNew(e)?t.when():r.confirm(s.instant("USER_PROFILE.ADDRESSES.CONFIRM_DELETE"))?o.address.delete(a.getCurrentCenterId(),d.user.id,e).catch((function(e){return l.error(e,"Failed to delete address.")})):t.reject()}}])},"3xdx":function(e,t){e.exports='<ff-panel id=upShareable ng-if=$ctrl.schema.shareable ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header> <span translate=USER_PROFILE.SHAREABLE_INFO.HEADER></span> <ff-hint><span translate=USER_PROFILE.SHAREABLE_INFO.HINT></span></ff-hint> </ff-panel-header> <ff-col ff-dim=!$ctrl.fields> <ff-row> <ff-label flex="0 1 160px"><span translate=USER_PROFILE.SHAREABLE_INFO.PUBLIC_FIELDS></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half"> <label flex="0 0 auto"> <ff-checkbox ff-model=$ctrl.user.sharePhoto> <span translate=USER_PROFILE.PHOTO.HEADER></span> </ff-checkbox> </label> <label flex="0 0 auto"> <ff-checkbox ff-model=$ctrl.user.shareCompany> <span translate=USER_PROFILE.PERSONAL_INFO.COMPANY></span> </ff-checkbox> </label> <label flex="0 0 auto"> <ff-checkbox ff-model=$ctrl.user.shareOccupation> <span translate=USER_PROFILE.PERSONAL_INFO.OCCUPATION></span> </ff-checkbox> </label> </div> </ff-static> </ff-row> <label class=ff-row> <ff-label flex="0 1 160px"><span translate=GLOBAL.EMAIL></span></ff-label> <ff-select name=shareEmail ff-model=$ctrl.user.shareEmail ff-options="opt.id as opt.name for opt in $ctrl.optsShareEmail"></ff-select> </label> <fd-field field=field ng-repeat="field in $ctrl.fields"></fd-field> </ff-col> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.shareable.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},"4jLY":function(e,t,r){},"5KKy":function(e,t){angular.module("deskworks.upLeadSource",["deskworks.userProfile.service"]).directive("upLeadSource",(function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-lead-source.tpl.html",controller:"upLeadSourceCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upLeadSourceCtrl",["$scope","dwAlerts","state","userProfileService",function(e,t,r,s){"use strict";var n=this;n.save=function(){return s.updateRaw(r.getCurrentCenterId(),n.user,{leadSourceId:n.user.leadSource.id}).catch((function(e){return t.error(e,"Failed to save lead source.")}))}}])},"80Eh":function(e,t){e.exports='<ff-panel id=upPersonalInfo ng-if=$ctrl.schema.personalInfo ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.PERSONAL_INFO.HEADER></span></ff-panel-header> <div class="ff-grid gutter-h"> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 116px"> <span translate=USER_PROFILE.PERSONAL_INFO.FIRST_NAME ng-class="{ req: ffBlock.editMode }"></span> </ff-label> <ff-text name=firstName ff-model=$ctrl.user.firstName placeholder=John ff-required=true ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.FIRST_NAME\' | translate}}"></ff-text> </label> <label class=ff-row ng-if="$ctrl.schema.personalInfo.middleName !== false"> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PERSONAL_INFO.MIDDLE_NAME></span></ff-label> <ff-text name=middleName ff-model=$ctrl.user.middleName placeholder=James ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.MIDDLE_NAME\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 116px"> <span translate=USER_PROFILE.PERSONAL_INFO.LAST_NAME ng-class="{ req: ffBlock.editMode }"></span> </ff-label> <ff-text name=lastName ff-model=$ctrl.user.lastName ff-required=true dw-last-name placeholder=Doe ff-change=$ctrl.onChangeLastName()></ff-text> </label> </ff-col> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 116px"> <span translate=GLOBAL.EMAIL ng-class="{ req: ffBlock.editMode }"></span> </ff-label> <ff-email name=email ff-model=$ctrl.user.email ff-required=true dw-email placeholder=jdoe@mail.com></ff-email> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PERSONAL_INFO.COMPANY></span></ff-label> <ff-text name=company ff-model=$ctrl.user.company placeholder="JDOE Software" ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.COMPANY\' | translate}}"></ff-text> </label> <label class=ff-row ng-if="$ctrl.schema.personalInfo.occupation !== false"> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PERSONAL_INFO.OCCUPATION></span></ff-label> <ff-text name=occupation ff-model=$ctrl.user.occupation placeholder="Software Solutions Architect" ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.OCCUPATION\' | translate}}"></ff-text> </label> </ff-col> </div> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.personalInfo.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},"99YD":function(e,t){angular.module("deskworks.upComments",["deskworks.userProfile.service"]).directive("upComments",(function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-comments.tpl.html",controller:"upCommentsCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upCommentsCtrl",["$scope","dwAlerts","state","userProfileService",function(e,t,r,s){"use strict";var n=this;n.save=function(){return s.updateRaw(r.getCurrentCenterId(),n.user,{comments:n.user.comments}).catch((function(e){return t.error(e,"Failed to save comments.")}))}}])},"9GwV":function(e,t,r){"use strict";r.r(t);r("kYjL");angular.module("deskworks.members.userProfile",["deskworks.members.userProfile.new","deskworks.members.userProfile.edit","deskworks.upPersonalInfo","deskworks.upLoginInfo","deskworks.upPhoto","deskworks.upSystemInfo","deskworks.upAddresses","deskworks.upPhones","deskworks.upComments","deskworks.upMembership","deskworks.upPrinterCodes","deskworks.upDocuments","deskworks.upLeadSource","deskworks.upTermsOfService","deskworks.upCustomFields","deskworks.upShareable","deskworks.upCoMembers","deskworks.upMailboxes","deskworks.upCreditCards","deskworks.upEChecks","deskworks.upBillingMethod","deskworks.lazyLoaders"])},AWhf:function(e,t,r){"use strict";r.r(t);r("Muwe"),r("w13K");var s=r("WSeP"),n=r.n(s),l=r("xeXu"),a=r.n(l),f=r("hsT8"),o=r.n(f);angular.module("deskworks.OurMemberModalCtrl",[]).controller("OurMemberModalCtrl",["$scope","close","member",function(e,t,r){var s,l,f,i,c;e.close=t,e.member=r,e.emails=o()(s=r.fields).call(s,(function(e){return"email"===e.type})),e.phones=o()(l=r.fields).call(l,(function(e){return"phone"===e.type})),e.urls=o()(f=r.fields).call(f,(function(e){return"url"===e.type})),e.fields=o()(i=r.fields).call(i,(function(e){var t;return a()(t=["email","phone","url"]).call(t,e.type)<0})),r.email&&e.emails.unshift({value:r.email}),n()(c=e.urls).call(c,(function(e){var t=(e.name||"").toLowerCase(),r=(e.value||"").toLowerCase();a()(t).call(t,"facebook")>=0||a()(r).call(r,"facebook.com")>=0?e.icon="fa-facebook-square":a()(t).call(t,"twitter")>=0||a()(r).call(r,"twitter.com")>=0?e.icon="fa-twitter-square":a()(t).call(t,"linkedin")>=0||a()(r).call(r,"linkedin.com")>=0?e.icon="fa-linkedin-square":a()(t).call(t,"github")>=0||a()(r).call(r,"github.com")>=0?e.icon="fa-github-square":a()(t).call(t,"youtube")>=0||a()(r).call(r,"youtube.com")>=0?e.icon="fa-youtube-square":a()(t).call(t,"vimeo")>=0||a()(r).call(r,"vimeo.com")>=0?e.icon="fa-vimeo-square":t.match(/google(?:\s|-)?(?:plus|\+)/)||a()(r).call(r,"plus.google.com")>=0?e.icon="fa-google-plus-square":e.icon="fa-globe"}))}])},Dial:function(e,t,r){"use strict";r.r(t);r("8cZI");var s=r("03wM"),n=r.n(s),l=r("yCd9"),a=r.n(l);angular.module("deskworks.globalConfig",["ngRoute","ngStorage","tmh.dynamicLocale","pascalprecht.translate","dateFilters","setLocale","setTranslations","resolveTimezone","deskworks.config","deskworks.setup.service","userTasksPolicy","resolveGtm","sessionInjector","sessionRefresher"]).config(["$httpProvider","$localStorageProvider","$routeProvider","$locationProvider","$translateProvider","$qProvider","deskworksConfigProvider","tmhDynamicLocaleProvider",function(e,t,r,s,l,f,o,i){e.defaults.withCredentials=!0,t.setKeyPrefix("dw"),s.html5Mode(!0).hashPrefix(""),e.interceptors.push("sessionInjector"),e.interceptors.push("sessionRefresher"),l.fallbackLanguage("en").preferredLanguage("en").useLoader("$translatePartialLoader",{urlTemplate:"translations/{part}-{lang}.json",loadFailureHandler:"$translateErrorHandler"}).useSanitizeValueStrategy("sceParameters").addInterpolation("$translateMessageFormatInterpolation"),i.defaultLocale("en-us"),o.setApiUrl("/api/v1"),r.otherwise({redirectTo:function(e,t,r){var s,l=a()(s=n()(r)).call(s,(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])})).join("&");return o.getDefaultRoute()+(l.length>0?"?"+l:"")}}),r.whenOrig=r.when,r.when=function(e,t){return t.resolve=t.resolve||{},t.resolve.resolveLocale=["$q","$rootScope","dwAlerts","setLocale","setTranslations","setupService",function(e,r,s,n,l,a){return a.getSetupSettings().catch((function(e){return s.error(e,"Failed to get setup settings.")})).then((function(s){return r.settings=s,e.all([n(s),l(t.translations||[],s.locale)])}))}],t.resolve.resolveTimezone=["resolveTimezone",function(e){return e()}],t.resolve.userTasksPolicy=["userTasksPolicy",function(e){return e()}],t.resolve.resolveGtm=["resolveGtm",function(e){return e()}],r.whenOrig(e,t)}}])},DyEQ:function(e,t,r){"use strict";r.r(t);var s=r("0zKI"),n=r.n(s),l=r("NOor"),a=r.n(l),f=r("nbuU"),o=r.n(f),i=r("WSeP"),c=r.n(i);angular.module("deskworks.upDocuments",["deskworks.helper","deskworks.state","deskworks.userProfile.service"]).directive("upDocuments",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-documents.tpl.html",controller:"upDocumentsCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upDocumentsCtrl",["$scope","$element","$q","$translate","dwAlerts","helper","state","userProfileService","session",function(e,t,r,s,l,f,i,u,d){var m=this;m.$onInit=function(){d.isAdmin()&&(m.showUserAccess=!0),e.$on("ffBlock::EditStart",(function(){m.docsRollback=angular.copy(m.user.documents)})),e.$on("ffBlock::EditCancel",(function(){m.user.documents=m.docsRollback}))},m.add=function(r,n){if(n&&n.length>0)return l.error(s.instant("USER_PROFILE.DOCUMENTS.INVALID_FORMAT"));r&&r.length>0&&(m.editMode||e.$broadcast("ffBlock::EditStart"),c()(r).call(r,(function(e){return m.user.documents.push(u.document.new(e))})),angular.element(t[0].querySelector('form[name="ffBlockForm"]')).scope().ffBlockForm.$setDirty())},m.save=function(){var e,t,s=[];return c()(e=m.user.documents).call(e,(function(e){var t=o()(f).call(f,m.docsRollback,e.id);t&&t.name===e.name&&t.userAccess===e.userAccess||s.push(u.document.save(i.getCurrentCenterId(),m.user.id,e).catch((function(e){return l.error(e,"Failed to save document.")})))})),c()(t=m.docsRollback).call(t,(function(e){o()(f).call(f,m.user.documents,e.id)||s.push(u.document.delete(i.getCurrentCenterId(),m.user.id,e).catch((function(e){return l.error(e,"Failed to delete document.")})))})),r.all(s)},m.delete=function(e){var r,s=a()(f).call(f,m.user.documents,e.id);s>=0&&(n()(r=m.user.documents).call(r,s,1),angular.element(t[0].querySelector('form[name="ffBlockForm"]')).scope().ffBlockForm.$setDirty())}}])},F9wG:function(e,t){angular.module("deskworks.members",["deskworks.members.userProfile","deskworks.members.billingProfile.edit","deskworks.members.userSearch","deskworks.OurMembersCtrl"])},FZlk:function(e,t){e.exports='<ff-panel id=upPhoto ng-if=$ctrl.schema.photo ngf-drop="$ctrl.save($files, $invalidFiles)" ngf-pattern="\'image/png,image/jpeg\'" ngf-drag-over-class=dragover> <ff-panel-header style=margin-bottom:.5rem><span translate=USER_PROFILE.PHOTO.HEADER></span></ff-panel-header> <div class=ff-row> <div> <ff-img ng-if=$ctrl.user.photo ff-src={{$ctrl.user.photo}} img-placeholder=500x500 ff-alt={{$ctrl.user.fullName}}></ff-img> <ff-img ng-if=!$ctrl.user.photo ff-src="" img-placeholder=500x500 ff-alt=Photo ff-attr-src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAQAAADTdEb+AAACHElEQVR42u3SMQ0AAAzDsJU/6aGo+tgQouSgIBJgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsjCUBxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFjsPeVaAS0/Qs6MAAAAAElFTkSuQmCC></ff-img> </div> <ff-btn-group flex="0 0 auto" class=ff-section-buttons ng-if=!$ctrl.schema.photo.$readOnly> <ff-btn sense=upload size=sm ff-spin=$ctrl.spin accept=image/png,image/jpeg ngf-select="$ctrl.save($files, $invalidFiles)" ngf-pattern="\'image/png,image/jpeg\'"> <span translate=USER_PROFILE.PHOTO.BTN_UPLOAD></span> </ff-btn> </ff-btn-group> </div> </ff-panel> '},GmbY:function(e,t,r){"use strict";r.r(t);var s=r("6RpP"),n=r.n(s),l=r("5Lq6");angular.module("deskworks.upEChecks",["deskworks.helper","deskworks.state","deskworks.userProfile.service","deskworks.dwECheck","deskworks.paymentMethodHasDelete",l.a.name]).directive("upEChecks",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/billing-sections/up-e-checks.tpl.html",controller:"upEChecksCtrl as $ctrl",bindToController:{user:"<userProfile",reg:"<",single:"<"}}})).controller("upEChecksCtrl",["$scope","$element","$attrs","$q","$window","$translate","dwAlerts","helper","state","userProfileService","paymentMethodHasDelete",function(e,t,r,s,l,a,f,o,i,c,u){var d=this;d.new=function(){return c.eCheck.new(d.user)},d.isNew=c.eCheck.isNew,d.hasDeleteButton=function(e,t){var r;return u({method:e,methods:n()(r=d.user.creditCards).call(r,d.user.eChecks),single:d.single,editMode:t.editMode,reg:d.reg})},d.save=function(e){return c.eCheck.save(i.getCurrentCenterId(),d.user.id,e).catch((function(e){return f.error(e,"Failed to save eCheck.")}))},d.delete=function(e){return c.eCheck.isNew(e)?s.when():l.confirm(a.instant("BILLING_PROFILE.E_CHECKS.CONFIRM_DELETE"))?c.eCheck.delete(i.getCurrentCenterId(),d.user.id,e).catch((function(e){return f.error(e,"Failed to delete eCheck.")})):s.reject()}}])},Ht9o:function(e,t){e.exports='<div class=our-members> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class=gutter-v> <ff-panel class="our-members-toolbar ff-no-frame"> <div class="ff-grid gutter-h-half"> <label class=ff-row flex="{md: \'0 0 40%\'}"> <ff-label flex="0 0 70px"><span translate=OUR_MEMBERS.CENTER></span></ff-label> <dw-select-center ff-model=$ctrl.params.centerId ff-option-all=true></dw-select-center> </label> <label class=ff-row flex="{md: \'0 0 30%\'}"> <ff-label flex="0 0 70px"><span translate=OUR_MEMBERS.SORT></span></ff-label> <ff-select name=sort ff-model=$ctrl.params.sort ff-options="sort.id as sort.name for sort in $ctrl.optsSort"></ff-select> </label> <label class=ff-row flex="{md: \'0 0 30%\'}"> <ff-label flex="0 0 70px"><span translate=OUR_MEMBERS.SEARCH></span></ff-label> <ff-text name=search ff-model=$ctrl.params.q ff-model-options="{ debounce: 1000 }"></ff-text> </label> </div> </ff-panel> <our-members-embedding ng-if=$ctrl.isEmbeddingVisible()></our-members-embedding> <ff-panel ng-if="!$ctrl.members.length && !$ctrl.fetching"><span translate=OUR_MEMBERS.EMPTY></span></ff-panel> <div class=our-members-container infinite-scroll=$ctrl.fetch() infinite-scroll-distance=2 infinite-scroll-container="\'.snap-content-scroller\'"> <div class=our-member ng-repeat="member in $ctrl.members" ng-click=$ctrl.view(member)> <ff-img ff-src={{::member.photo}} ff-alt={{::member.name}}></ff-img> <h5>{{::member.name}}</h5> <h6>{{::member.occupation}}</h6> </div> <div ff-spin=true class=our-members-spin ng-if=$ctrl.fetching></div> </div> </div> </div> '},L3g9:function(e,t){e.exports='<div class=user-search> <h1 class=page-title>{{state.getPageTitle()}}</h1> <form name=userSearch> <membership-filter ff-model=$ctrl.membershipFilter filter-data=us.filters></membership-filter> <div class="ff-grid gutter-v gutter-h"> <div flex="{md: \'0 0 50%\'}"> <ff-panel> <label class=ff-row> <ff-label flex="0 0 104px"><span translate=USER_SEARCH.ACTIVATED_AT></span></ff-label> <dw-select-center ff-model=us.centerId ff-option-all=true></dw-select-center> </label> <label class=ff-row ng-repeat="col in us.columns | filter : { advanced: \'!true\' }"> <ff-label flex="0 0 104px">{{col.name}}</ff-label> <ff-text name={{col.id}} ff-model=col.value></ff-text> </label> <label class=ff-row> <ff-checkbox ff-model=us.advanced><span translate=USER_SEARCH.ADVANCED_SEARCH></span></ff-checkbox> </label> </ff-panel> </div> <div flex="{md: \'0 0 50%\'}"> <ff-panel ng-collapse=!us.advanced> <ff-row class=us-show-row> <span title="{{\'USER_SEARCH.SHOW.HINT\' | translate}}" translate=USER_SEARCH.SHOW>Show</span> </ff-row> <ff-row ng-repeat="col in us.columns | filter : { advanced: \'true\' }" ng-include="col.tpl || \'userSearchTextTpl\'"> </ff-row> </ff-panel> </div> </div> <ff-btn-group class=buttons-bottom style=text-align:left> <ff-btn sense=search type=submit ff-click=$ctrl.search(1)><span translate=USER_SEARCH.BTN_SEARCH></span></ff-btn> </ff-btn-group> </form> <ff-panel ng-if=us.users id=searchResults class=us-results> <ff-panel-header> <span translate=USER_SEARCH.RESULTS.HEADER translate-values="{ count: us.userCount }" ng-if=!$ctrl.previousSearch></span> <span translate=USER_SEARCH.PREV_RESULTS.HEADER translate-values="{ count: us.userCount }" ng-if=$ctrl.previousSearch></span> </ff-panel-header> <ff-header> <ff-row> <cell ng-repeat="col in us.columns | filter: $ctrl.filterResultColumns"> <span>{{col.name}}</span> <ff-sort props=us col-id=col.id ff-click=$ctrl.search()></ff-sort> </cell> <cell flex="0 0 22px"></cell> </ff-row> </ff-header> <ff-row ng-repeat="user in us.users" class=ff-clickable ng-click=$ctrl.selectUser(user) ff-dim> <ff-static ng-repeat="col in us.columns | filter: $ctrl.filterResultColumns"> <span> <span ng-if="col.id !== \'email\'" ng-bind=::user[col.id]></span> <a ng-if="col.id === \'email\'" href=mailto:{{::user[col.id]}} ng-bind=::user[col.id] target=_blank rel=noopener ng-click=$event.stopPropagation()></a> <ff-hint ng-if="::user.isMasterMember && col.id === \'company\'"> <span translate=USER_SEARCH.MASTER_USER.HINT translate-values="{ company: user.company }"></span> </ff-hint> </span> </ff-static> <ff-static flex="0 0 22px"> <ff-icon sense=navigate title="{{\'USER_SEARCH.BTN_SELECT.HINT\' | translate}}"></ff-icon> </ff-static> </ff-row> <ff-pagination props=us ff-click=$ctrl.search($page) ng-if="us.pageCount > 1"></ff-pagination> </ff-panel> </div> <script type=text/ng-template id=userSearchTextTpl> <ff-static flex="0 0 30px" class="ff-center"><ff-checkbox ff-model="col.include"></ff-checkbox></ff-static>\n  <label class="ff-row" flex="auto">\n    <ff-label flex="0 0 104px">\n      <span>{{col.name}} <ff-hint ng-if="col.hint">{{col.hint}}</ff-hint></span>\n    </ff-label>\n    <ff-text name="{{col.id}}" ff-model="col.value" ff-change="col.include = !!col.value"></ff-text>\n  </label> <\/script> <script type=text/ng-template id=userSearchDateTpl> <ff-static flex="0 0 30px" class="ff-center"><ff-checkbox ff-model="col.include"></ff-checkbox></ff-static>\n  <label class="ff-row" flex="auto">\n    <ff-label flex="0 0 104px">{{col.name}}</ff-label>\n    <ff-date name="{{col.id}}" ff-model="col.value" ff-change="col.include = !!col.value"\n             ff-validate-alert="{{\'USER_SEARCH.COLUMNS.JOIN_DATE\' | translate}}"></ff-date>\n  </label> <\/script> <script type=text/ng-template id=userSearchMacTpl> <ff-static flex="0 0 30px" class="ff-center"><ff-checkbox ff-model="col.include"></ff-checkbox></ff-static>\n  <label flex="1 1 auto">\n    <ff-label flex="0 0 104px">{{col.name}}</ff-label>\n    <ff-text flex="auto" name="{{col.id}}" ff-model="col.value" ff-change="[col.include = !!col.value, us.checkedIn = us.checkedIn && !!col.value]"></ff-text>\n  </label>\n  <label flex="0 0 auto">\n    <ff-checkbox ff-model="us.checkedIn" ff-disabled="!col.value" class="ff-small">\n      <span translate="USER_SEARCH.FILTERS.CHECKED_IN"></span>\n    </ff-checkbox>\n  </label> <\/script> '},MHBY:function(e,t){e.exports='<div id=upMailboxes ng-if=$ctrl.schema.mailboxes class=ff-grid ff-section="mailbox in $ctrl.user.mailboxes" ff-section-new=$ctrl.new()> <ff-panel ng-if=!$ctrl.user.mailboxes.length> <ff-panel-header><span translate=USER_PROFILE.MAILBOXES.HEADER></span></ff-panel-header> <span translate=USER_PROFILE.MAILBOXES.EMPTY></span> </ff-panel> <div ng-if=$ctrl.user.mailboxes.length> <div class=gutter-v> <ff-panel id="{{\'upMailbox-\' + mailbox.id}}" ff-block ff-block-save=$ctrl.save(mailbox) ff-block-delete=$ctrl.delete(mailbox) ff-block-edit-default=$ctrl.isNew(mailbox) ff-block-is-new=$ctrl.isNew(mailbox)> <ff-panel-header><span translate=USER_PROFILE.MAILBOX></span></ff-panel-header> <div class="ff-grid gutter-h"> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 130px"><span translate=USER_PROFILE.MAILBOXES.NUMBER ng-class="{ req: ffBlock.editMode }"></span></ff-label> <ff-text name=number ff-model=mailbox.number ff-required=true ff-validate-alert="{{\'USER_PROFILE.MAILBOXES.NUMBER\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 130px"><span translate=USER_PROFILE.MAILBOXES.KEY></span></ff-label> <ff-text name=key ff-model=mailbox.key ff-validate-alert="{{\'USER_PROFILE.MAILBOXES.KEY\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 130px"><span translate=USER_PROFILE.MAILBOXES.HANDLING></span></ff-label> <ff-select name=handling ff-model=mailbox.handling ff-validate-alert="{{\'USER_PROFILE.MAILBOXES.HANDLING\' | translate}}" ff-options="opt.name for opt in $ctrl.handlingOpts"></ff-select> </label> </ff-col> <ff-col flex="{md: \'0 0 50%\'}"> <label> <ff-row> <ff-label><span translate=USER_PROFILE.MAILBOXES.NAMES></span></ff-label> </ff-row> <ff-row> <ff-textarea name=names ff-model=mailbox.names rowspan=2 placeholder="{{\'USER_PROFILE.MAILBOXES.NAMES.HINT\' | translate}}" title="{{\'USER_PROFILE.MAILBOXES.NAMES.HINT\' | translate}}"></ff-textarea> </ff-row> </label> </ff-col> </div> <ff-btn-group class=ff-block-buttons ng-if=!$ctrl.schema.mailboxes.$readOnly> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-delete></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> </div> </div> <ff-btn-group class=ff-section-buttons ng-if=!$ctrl.schema.mailboxes.$readOnly> <ff-btn ff-btn-section-new> <span translate=GLOBAL.BTN_NEW></span> <span translate=USER_PROFILE.MAILBOX></span> </ff-btn> </ff-btn-group> </div> '},MQkE:function(e,t,r){"use strict";r.r(t);r("8cZI");var s=r("yCd9"),n=r.n(s);angular.module("deskworks.upSystemInfo",[]).directive("upSystemInfo",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-system-info.tpl.html",controller:"upSystemInfoCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upSystemInfoCtrl",(function(){var e=this;e.$onChanges=function(){var t,r;e.user&&(e.user.activatedAt=e.user.activatedAt&&n()(t=e.user.activatedAt).call(t,(function(e){return e.centerName})).join(", "),e.user.masterMembers=e.user.masterMembers&&n()(r=e.user.masterMembers).call(r,(function(e){return e.fullName+(e.company?" ("+e.company+")":"")})).join(", "))}}))},NGgp:function(e,t,r){"use strict";r.r(t);r("Muwe"),r("y89P");var s=r("7pN8"),n=r.n(s),l=r("DVTZ"),a=r("SGGL");t.default=angular.module("deskworks.upPersonalInfo",["deskworks.userProfile.service",l.a.name,a.a.name]).directive("upPersonalInfo",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-personal-info.tpl.html",controller:"upPersonalInfoCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upPersonalInfoCtrl",["$scope","dwAlerts","state","userProfileService",function(e,t,r,s){var l=this;l.onChangeLastName=function(){if(l.reg&&!l.reg.member&&!l.reg.selfRegistration){var e=angular.element(document.getElementsByName("login")),t=e.scope();t&&t.field&&!e.hasClass("ng-dirty")&&(t.field.value=(l.user.lastName||"").toLowerCase().replace(/\W/g,"")+"-"+n()())}},l.save=function(){var n={firstName:l.user.firstName,middleName:l.user.middleName,lastName:l.user.lastName,email:l.user.email,company:l.user.company,occupation:l.user.occupation};return s.updateRaw(r.getCurrentCenterId(),l.user,n).then((function(){return e.$emit("CurrentUser:refresh")})).catch((function(e){return t.error(e,"Failed to save personal information.")}))}}])},NQ3A:function(e,t){e.exports='<ff-panel id=upPrinterCodes ng-if=$ctrl.schema.printerCodes ff-block ff-block-save=$ctrl.save() ff-block-edit=$ctrl.editMode ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.PRINTER_CODES.HEADER></span></ff-panel-header> <div class=ff-grid> <ff-row flex="0 0 50%" ng-repeat="prCode in $ctrl.user.printerCodes" id="{{\'upPrinterCode-\' + prCode.id}}"> <ff-text name=printerCode ff-model=prCode.code ff-required=true ff-validate-alert="{{\'USER_PROFILE.PRINTER_CODES.PRINTER_CODE\' | translate}}"></ff-text> <ff-btn flex=none sense=delete size=xs style=z-index:3 title="{{\'USER_PROFILE.PRINTER_CODES.BTN_DELETE.HINT\' | translate}}" ff-click=$ctrl.delete(prCode) ng-show=$ctrl.editMode></ff-btn> </ff-row> </div> <ff-btn-group class=ff-section-buttons ng-if=!$ctrl.schema.printerCodes.$readOnly> <ff-btn ff-btn-block-edit ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-save ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-cancel ng-if=!$ctrl.reg.new></ff-btn> <ff-btn sense=new size=sm ff-click=$ctrl.add()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </ff-panel> '},Ntds:function(e,t){e.exports='<div id=upEChecks class="ff-grid gutter-v gutter-h" ff-section="check in $ctrl.user.eChecks" ff-section-new=$ctrl.new()> <ff-panel flex="{{ $ctrl.single ? null : {lg: \'0 0 50%\'} }}" ng-if=!$ctrl.user.eChecks.length> <span translate=BILLING_PROFILE.E_CHECKS.EMPTY></span> </ff-panel> <ff-panel flex="{sm: \'0 0 85%\', md: \'0 0 70%\', lg: \'0 0 50%\'}" id="{{\'upECheck-\' + check.id}}" ff-block ff-block-save=$ctrl.save(check) ff-block-delete=$ctrl.delete(check) ff-block-edit-default=$ctrl.isNew(check) ff-block-is-new=$ctrl.isNew(check)> <ff-header><span translate=BILLING_PROFILE.E_CHECKS.HEADER></span></ff-header> <fieldset dw-e-check=check></fieldset> <ff-btn-group class=ff-block-buttons ng-if="!$ctrl.user.accessRights.billingInfo.readOnly && (!$ctrl.isNew(check) || !$ctrl.single)"> <ff-btn ff-btn-block-delete ng-if="$ctrl.hasDeleteButton(check, ffBlock)" ng-hide=false></ff-btn> <ff-btn ff-btn-block-save ng-if="!$ctrl.reg && !$ctrl.single"></ff-btn> <ff-btn ff-btn-block-cancel ng-if="!$ctrl.reg && !$ctrl.single"></ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=ff-btn-full ng-if="!$ctrl.user.accessRights.billingInfo.readOnly && !$ctrl.single"> <ff-btn ff-btn-section-new><span translate=BILLING_PROFILE.E_CHECKS.BTN_ADD></span></ff-btn> </ff-btn-group> </div> '},"OXQ/":function(e,t,r){"use strict";r.r(t);r("Muwe"),r("X5mX");var s=r("WSeP"),n=r.n(s),l=r("KK/u"),a=r.n(l),f=r("hsT8"),o=r.n(f),i=r("YtL8"),c=r.n(i),u=(r("qgYx"),r("Njxs")),d=r("9HME");t.default=angular.module("deskworks.members.userSearch",["deskworks.routeHelper","deskworks.dwAlerts","deskworks.state","deskworks.helper","deskworks.userSearchState","flexForms.ffPagination","deskworks.userProfile.service",u.a.name,d.a.name]).config(["$routeProvider",function(e){e.when("/user-search",{templateUrl:"members/user-search/user-search.tpl.html",controller:"UserSearchCtrl as $ctrl",label:"User Search",routeBranch:"user-search",reloadOnSearch:!1,userTasksPolicy:!1,translations:["user-search"],resolve:{auth:["routeHelper",function(e){return e.auth()}]}})}]).controller("UserSearchCtrl",["$scope","$filter","$translate","dwAlerts","state","helper","userSearchState","userProfileService",function(e,t,r,s,l,f,i,u){var d=this;l.setPageTitle(r.instant("USER_SEARCH.PAGE_TITLE"));var m=e.us=i;m.centerId=l.getCurrentCenterId(),m.users&&(d.previousSearch=!0),m.resetColumns(),m.advanced=!1,d.search=function(e){var r,l,f=c()(r=o()(l=m.columns).call(l,(function(e){return!e.advanced||m.advanced}))).call(r,(function(e,t){return t.value&&(e[t.id]=t.value),e}),{}),i=angular.extend({page:e||m.page,pageSize:m.pageSize,sort:a()(m),order:m.order},d.membershipFilter,f);return m.checkedIn&&(i.checkedIn=m.checkedIn),u.search(m.centerId,i).catch((function(e){return s.error(e,"Failed to search users.")})).then((function(e){var r;n()(r=e.users).call(r,(function(e){e.joinDate=t("date")(e.joinDate,"mediumDate")})),angular.extend(m,e),d.previousSearch=!1}))},d.filterResultColumns=function(e){return e.include&&(!e.advanced||m.advanced||"email"===e.id)},d.selectUser=function(e){l.setCurrentUserId(e.id);var t=l.getParam("redirect");return t&&"/user-search"!==t?(l.setParam("redirect"),l.setPath(t)):l.setPath("/profile")}}])},OdV3:function(e,t){e.exports='<div class=user-profile id=userProfile> <h1 class=page-title> {{state.getPageTitle()}} <span ng-if="vm.reg.member && !vm.reg.selfRegistration" ng-style="{ color: vm.center.color }">{{vm.center.name}}</span> </h1> <div class="ff-grid ff-gutter-v ff-gutter-h"> <up-personal-info user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.personalInfo></up-personal-info> <up-login-info flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.loginInfo member-directory-url=wlLinks.memberDirectoryUrl></up-login-info> <up-photo flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.photo></up-photo> <up-system-info user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.system></up-system-info> <up-addresses user=vm.userProfile schema=vm.schema reg=vm.reg center=vm.center ng-if=vm.schema.addresses></up-addresses> <up-phones user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.phones></up-phones> <up-comments flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.comments></up-comments> <up-membership flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.membership kisi-save=vm.kisiSave ezeep-save=vm.ezeepSave></up-membership> <up-printer-codes flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.printerCodes></up-printer-codes> <up-documents flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.documents></up-documents> <up-lead-source flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.leadSource></up-lead-source> <div ng-if="vm.schema.customFields && vm.customFields.length || vm.schema.shareable"> <div class="ff-grid ff-gutter-v ff-gutter-h"> <up-custom-fields flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg fields=vm.customFields ng-if="vm.schema.customFields && vm.customFields.length"></up-custom-fields> <up-shareable flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg fields=vm.shareable ng-if=vm.schema.shareable></up-shareable> </div> </div> <up-co-members user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.coMembers></up-co-members> <up-mailboxes user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.mailboxes></up-mailboxes> </div> <ff-btn-group class=buttons-bottom ng-if=vm.reg> <ff-btn sense=next ff-click=vm.next()><span translate=GLOBAL.BTN_NEXT></span></ff-btn> <ff-btn sense=back ff-click=vm.back() ng-if=vm.back><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> </div> '},OwCf:function(e,t,r){"use strict";r.r(t);var s=r("hsT8"),n=r.n(s);t.default=angular.module("deskworks.paymentMethodHasDelete",["session","deskworks.userProfile.service"]).factory("paymentMethodHasDelete",["session","userProfileService",function(e,t){return function(r){var s=r.methods,l=r.method,a=(r.single,r.editMode),f=r.reg,o=t.creditCard.isNew,i=n()(s).call(s,(function(e){return o(e)})).length,c=s.length-i;return e.isAdmin()&&f?o(l)?i>1||c>0:c>1:!o(l)&&!a&&c>1}}])},Q9OX:function(e,t){e.exports='<div id=upCoMembers ng-if=$ctrl.schema.coMembers class=ff-grid ff-section="coMember in $ctrl.user.coMembers" ff-section-new=$ctrl.new()> <ff-panel ng-if=!$ctrl.user.coMembers.length> <ff-panel-header><span translate=USER_PROFILE.CO_MEMBERS.HEADER></span></ff-panel-header> <span translate=USER_PROFILE.CO_MEMBERS.EMPTY></span> </ff-panel> <div ng-if=$ctrl.user.coMembers.length> <div class=gutter-v> <ff-panel ff-block ff-block-save=$ctrl.save(coMember) ff-block-delete=$ctrl.delete(coMember) ff-block-edit-default=$ctrl.isNew(coMember) ff-block-dirty-default=$ctrl.isNewExisting(coMember) ff-block-is-new=$ctrl.isNew(coMember) id="{{\'upCoMember-\' + coMember.id}}"> <ff-panel-header><span translate=GLOBAL.CO_MEMBER></span></ff-panel-header> <div class="ff-grid gutter-h"> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PERSONAL_INFO.FULL_NAME></span></ff-label> <ff-text name=fullName ff-model=coMember.fullName placeholder="John Doe" ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.FULL_NAME\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=GLOBAL.EMAIL></span></ff-label> <ff-email name=email ff-model=coMember.email dw-email placeholder=jdoe@mail.com></ff-email> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PHONE></span></ff-label> <ff-text name=phone ff-model=coMember.phone dw-phone placeholder=888-379-2865></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=GLOBAL.LOGIN></span></ff-label> <ff-login name=login ff-model=coMember.login dw-login placeholder=jdoe></ff-login> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=GLOBAL.PASSWORD></span></ff-label> <ff-password name=password ff-model=coMember.password dw-password ff-not-contain="[coMember.login, coMember.login.split(\'\').reverse().join(\'\'), coMember.fullName]" ff-validate-alert=\'{ "notContain": "{{&#39;GLOBAL.PASSWORD.NOT_CONTAIN&#39; | translate}}" }\'></ff-password> </label> <ff-row ng-if=state.isLoggedAdmin()> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.LOGIN_INFO.ACCESS_CODES></span></ff-label> <ff-static> <up-access-codes flex=auto user-profile=coMember save=coMember.saveAccessCards></up-access-codes> </ff-static> </ff-row> </ff-col> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 180px"><span translate=USER_PROFILE.CO_MEMBERS.CAN_MAKE_RESERVATIONS></span></ff-label> <ff-static> <ff-checkbox name=canMakeReservations ff-model=coMember.canMakeReservations></ff-checkbox> </ff-static> </label> <label class=ff-row> <ff-label flex="0 1 180px"><span translate=USER_PROFILE.CO_MEMBERS.SEES_ACCOUNTING_INFO></span></ff-label> <ff-static> <ff-checkbox name=canSeeAccountingInfo ff-model=coMember.canSeeAccountingInfo></ff-checkbox> </ff-static> </label> <label class=ff-row> <ff-label flex="0 1 180px"><span translate=USER_PROFILE.CO_MEMBERS.GETS_CENTER_NOTICES></span></ff-label> <ff-static> <ff-checkbox name=getCenterNotices ff-model=coMember.getCenterNotices></ff-checkbox> </ff-static> </label> <ff-row> <ff-textarea name=notes ff-model=coMember.notes rowspan="state.isLoggedAdmin() ? 3 : 2" placeholder="{{\'USER_PROFILE.CO_MEMBERS.NOTES\' | translate}}" title="{{\'USER_PROFILE.CO_MEMBERS.NOTES\' | translate}}"></ff-textarea> </ff-row> </ff-col> </div> <ff-btn-group class=ff-block-buttons ng-if=!$ctrl.schema.coMembers.$readOnly> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-delete></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> </div> </div> <ff-btn-group class=ff-section-buttons style=margin-bottom:0 ng-if=!$ctrl.schema.coMembers.$readOnly> <ff-btn ff-btn-section-new> <span translate=USER_PROFILE.CO_MEMBERS.BTN_NEW></span> </ff-btn> <ff-btn sense=collapseBtnPriv size=sm ff-click="$ctrl.exUserCollapsed = !$ctrl.exUserCollapsed" ng-class="{ collapsed: $ctrl.exUserCollapsed }" ng-if=state.isLoggedAdmin()> <span translate=USER_PROFILE.CO_MEMBERS.BTN_ADD></span> </ff-btn> </ff-btn-group> <div flex="{md: \'0 0 50%\'}" style=margin-left:auto;margin-bottom:0 ng-collapse=$ctrl.exUserCollapsed ng-if=state.isLoggedAdmin()> <ff-panel style=margin-top:1.5rem> <form name=formNewExisting class=ff-row> <label flex="1 1 auto"> <ff-search flex="1 1 1%" ng-model=$ctrl.quickUser dw-search-user></ff-search> </label> <ff-btn-group flex="0 0 auto" style=z-index:3> <ff-btn type=submit sense=add size=sm ff-disabled=!$ctrl.quickUser ff-click=$ctrl.newExisting($ctrl.quickUser)>Add</ff-btn> </ff-btn-group> </form> </ff-panel> </div> </div> <script type=text/ng-template id=DeleteCoMemberTpl> <div class="dw-modal">\n    <div class="dw-modal-fade" ng-click="close()"></div>\n    <form class="dw-modal-dialog our-member-modal" novalidate>\n      <div class="dw-modal-scroll">\n        <ff-header><span translate="USER_PROFILE.CO_MEMBERS.CONFIRM_DELETE"></span></ff-header>\n        <label class="ff-row">\n          <ff-checkbox name="makeCoMemberInactive" ff-model="$ctrl.makeCoMemberInactive">\n            <span translate="USER_PROFILE.CO_MEMBERS.MAKE_INACTIVE"></span>\n          </ff-checkbox>\n        </label>\n        <ff-btn-group class="ff-center ff-tmargin" style="padding: 0 5px 5px 5px">\n          <ff-btn sense="cancel" ff-click="close(false)">Cancel</ff-btn>\n          <ff-btn type="submit" sense="ok" ff-click="close(true)">OK</ff-btn>\n        </ff-btn-group>\n      </div>\n    </form>\n  </div> <\/script> '},QU5I:function(e,t,r){"use strict";r.r(t);r("JBxO"),r("FdtR"),r("Muwe"),r("y89P"),r("X5mX");var s=r("KK/u"),n=r.n(s),l=r("D4RU"),a=r.n(l),f=r("6RpP"),o=r.n(f),i=(r("1TsL"),r("iAzO")),c=r("9HME");t.default=angular.module("deskworks.OurMembersCtrl",["infinite-scroll","deskworks.routeHelper","deskworks.OurMembers","deskworks.OurMemberModalCtrl","deskworks.optsOurMembersSort","deskworks.ourMembersEmbeddingDirective",i.a.name,c.a.name]).config(["$routeProvider",function(e){e.when("/our-members",{templateUrl:"members/our-members/our-members.tpl.html",controller:"OurMembersCtrl as $ctrl",routeBranch:"our-members",translations:["our-members"],reloadOnSearch:!1,userTasksPolicy:!1,resolve:{auth:["$route","routeHelper",function(e,t){return t.auth(null).then((function(){e.current.$$route.hideSidebar=!1})).catch((function(){e.current.$$route.hideSidebar=!0}))}]}})}]).controller("OurMembersCtrl",["$scope","$translate","$location","$q","dwModal","dwAlerts","state","helper","session","OurMembers","optsOurMembersSort",function(e,t,r,s,l,f,i,c,u,d,m){var p=this;function b(){p.members=[],p.params.offset=0,p.eof=!1}i.setPageTitle(t.instant("OUR_MEMBERS.PAGE_TITLE")),p.optsSort=m,p.params={centerId:i.getCurrentCenterId(),sort:"name",offset:0,limit:100},b(),e.$watch((function(){return r.search().centerId}),(function(e){p.params.centerId=angular.isDefined(e)?+e:i.getCurrentCenterId()})),e.$watch("$ctrl.params.centerId",(function(e){r.search("centerId",e).replace()})),e.$watch((function(){return n()(r.search())}),(function(e){p.params.sort=e||"name"})),e.$watch("$ctrl.params.sort",(function(e){r.search("sort",e).replace()})),e.$watch((function(){return r.search().q}),(function(e){p.params.q=e||""})),e.$watch("$ctrl.params.q",(function(e){r.search("q",e||void 0).replace()})),e.$watchGroup(["$ctrl.params.centerId","$ctrl.params.sort","$ctrl.params.q"],(function(e,t){a()(e).call(e,(function(e,r){return e!==t[r]}))&&s.when(p.fetching).finally((function(){b(),p.fetch()}))})),p.fetch=function(){if(p.eof||p.fetching)return p.fetching;p.fetching=d.query(p.params).catch((function(e){return f.error(e,"Failed to query our members.")})).finally((function(){p.fetching=null})).then((function(e){var t;p.members=o()(t=p.members).call(t,e),p.params.offset+=e.length,p.eof=e.length<p.params.limit}))},p.view=function(t){l.show({scope:e,templateUrl:"members/our-members/our-member-modal.tpl.html",controller:"OurMemberModalCtrl",inputs:{member:t}})},p.isEmbeddingVisible=function(e){return p.members.length&&!p.fetching&&u.isAdmin()}}])},QXyp:function(e,t,r){"use strict";r.r(t);var s=r("xeXu"),n=r.n(s);r("4jLY");t.default=angular.module("deskworks.upPhoto",[]).directive("upPhoto",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-photo.tpl.html",controller:"upPhotoCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upPhotoCtrl",["$scope","$timeout","$translate","$window","dwAlerts","state","userProfileService",function(e,t,r,s,l,a,f){var o=this;o.save=function(s,i){if(i&&i.length>0)return l.error(r.instant("USER_PROFILE.PHOTO.INVALID_FORMAT"));if(s&&s.length>0){if(!o.user.isNew())return o.spin=!0,o.user.photoFile=s[0],f.photo.save(a.getCurrentCenterId(),o.user).then((function(){o.spin=!1,e.$emit("CurrentUser:refresh")}),(function(e){return o.spin=!1,l.error(e,"Failed to upload photo.")}));var c;if(o.user.photoFile=s[0],window.FileReader&&n()(c=s[0].type).call(c,"image")>-1){var u=new FileReader;u.readAsDataURL(s[0]),u.onload=function(e){t((function(){o.user.photo=e.target.result}))}}}},o.delete=function(){if(s.confirm(r.instant("GLOBAL.CONFIRM_DELETE_PHOTO")))return o.user.isNew()?(delete o.user.photoFile,void(o.user.photo=null)):f.photo.delete({user:o.user}).catch((function(e){return l.error(e,"Failed to delete photo.")})).then((function(){o.user.photo=null,e.$emit("CurrentUser:refresh")}))}}])},Rw1n:function(e,t,r){"use strict";r.r(t);r("Muwe"),r("y89P");var s=r("7pN8"),n=r.n(s),l=r("hsT8"),a=r.n(l),f=r("WSeP"),o=r.n(f),i=r("d4ov");t.default=angular.module("deskworks.members.userProfile.new",["ngRoute","deskworks.userProfile.service","deskworks.center.service",i.a.name,"deskworks.routeHelper","deskworks.helper"]).config(["$routeProvider",function(e){e.when("/new-member",{template:"<div ng-include=\"'members/user-profile/user-profile.tpl.html'\" ff-bulk-read-only></div>",controller:"RegisterUserCtrl as vm",label:"New Member",routeBranch:"new-member",translations:["user-profile"],resolve:{reg:function(){return{member:!0,selfRegistration:!1,step:1,stepCount:3,new:!0}},userProfile:["$q","$route","dwAlerts","centerService","userProfileService","state","routeHelper",function(e,t,r,s,n,l,a){return t.current.params["self-registration"]&&"false"!==t.current.params["self-registration"]?(l.setPath("/member-sign-up",!0),l.setParam("self-registration"),e.reject()):a.auth().then((function(){return s.get(l.getCurrentCenterId()).then((function(e){return n.new(e,"member","register").catch((function(e){return r.error(e,"Failed to load new member profile template.")}))}))}))}],center:["state","centerService",function(e,t){return e.getCurrentCenterId()?t.get(e.getCurrentCenterId()):{}}],lazyKisi:"lazyLoadKisi",lazyEzeep:"lazyLoadEzeep"}}),e.when("/new-user",{template:"<div ng-include=\"'members/user-profile/user-profile.tpl.html'\" ff-bulk-read-only></div>",controller:"RegisterUserCtrl as vm",label:"New User",routeBranch:"new-user",translations:["user-profile"],resolve:{reg:function(){return{member:!1,selfRegistration:!1,step:1,stepCount:2,new:!0}},userProfile:["dwAlerts","centerService","userProfileService","state","routeHelper",function(e,t,r,s,n){return n.auth().then((function(){return t.get(s.getCurrentCenterId()).then((function(t){return r.new(t,"nonMember","register").catch((function(t){return e.error(t,"Failed to load new member profile template.")}))}))}))}],center:["state","centerService",function(e,t){return e.getCurrentCenterId()?t.get(e.getCurrentCenterId()):{}}],lazyEzeep:"lazyLoadEzeep"}})}]).controller("RegisterUserCtrl",["$scope","$timeout","$translate","$filter","$injector","helper","state","dwAlerts","userProfile","reg","center","userProfileService","centerService","setupService","UserField",function(e,t,r,s,l,f,i,c,u,d,m,p,b,g,h){var E=this;i.setPageTitle(r.instant(d.member?"USER_PROFILE.NEW_MEMBER.PAGE_TITLE":"USER_PROFILE.NEW_NON_MEMBER.PAGE_TITLE")),E.reg=d,E.userProfile=u,E.center=m,E.schema=u.schema,d&&!d.member&&(E.schema.customFields=!1,l.has("ezeepGroupDirective")&&(E.schema.membership=E.schema.membership||{membershipStatus:!1,attachedReservationUnit:!1})),(E.schema.customFields||E.schema.shareable)&&h.query().catch((function(e){return c.error(e,"Failed to query user profile fields.")})).then((function(e){o()(e).call(e,(function(e){e.value=null})),E.customFields=a()(e).call(e,(function(e){return"customFields"===e.section}))})),E.reg&&!E.reg.member&&(E.userProfile.password="123456",E.userProfile.passwordConfirmation="123456",e.$watch("vm.userProfile.lastName",(function(e){E.userProfile.login=(e||"").toLowerCase().replace(/\W/g,"")+"-"+n()()}))),E.next=function(){if(!f.pointFirstInvalid("#userProfile"))return p.registerNewUser(i.getCurrentCenterId(),E.userProfile,void 0,E.customFields).then((function(){if(E.kisiSave)return E.kisiSave()})).then((function(){if(E.ezeepSave)return E.ezeepSave()})).then((function(){return i.setPath(i.getPath()+"/"+E.userProfile.id,!0),i.setParam("productId",(E.userProfile.membershipProduct||{}).id),i.setParam("membershipStartDate",s("date")(E.userProfile.membershipStartDate,"yyyy-MM-dd")),i.setCurrentUserId(E.userProfile.id),i.setParam("attachedReservationUnitId",E.userProfile.attachedReservationUnit&&E.userProfile.attachedReservationUnit.id),t((function(){return i.setPath(i.getPath()+"/membership/billing-profile")}))}))},p.bindTestUserGenerator(e,E.userProfile,E.reg)}])},SHcK:function(e,t){e.exports='<ff-panel id=upDocuments ng-if=$ctrl.schema.documents ff-block ff-block-save=$ctrl.save() ff-block-edit=$ctrl.editMode ff-block-edit-default=$ctrl.user.isNew() ngf-drop="$ctrl.add($files, $invalidFiles)" ngf-pattern="\'application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\'" ngf-multiple=true ngf-drag-over-class=dragover> <ff-panel-header><span translate=USER_PROFILE.DOCUMENTS.HEADER></span></ff-panel-header> <div class=ff-grid> <ff-row ng-repeat="doc in $ctrl.user.documents" id="{{\'upDocument-\' + doc.id}}"> <ff-text name=document ff-model=doc.name ff-required=true ff-validate-alert="Document Name" ff-static-url=doc.document></ff-text> <ff-static flex="0 0 36px" ng-if="$ctrl.showUserAccess && doc.userAccess && !$ctrl.editMode" class=ff-center title="{{\'USER_PROFILE.DOCUMENTS.VISIBLE_TO_USER\' | translate}}"> <ff-icon sense=user class=text-brand></ff-icon> </ff-static> <ff-static flex="0 0 36px" ng-if="$ctrl.showUserAccess && $ctrl.editMode" class=ff-center title="{{\'USER_PROFILE.DOCUMENTS.VISIBLE_TO_USER\' | translate}}"> <ff-checkbox ff-model=doc.userAccess></ff-checkbox> </ff-static> <ff-btn flex=none style=z-index:3 sense=delete size=xs ff-click=$ctrl.delete(doc) ng-if=$ctrl.editMode title="{{\'USER_PROFILE.DOCUMENTS.BTN_DELETE.HINT\' | translate}}"></ff-btn> </ff-row> </div> <ff-btn-group class=ff-section-buttons ng-if=!$ctrl.schema.documents.$readOnly> <ff-btn ff-btn-block-edit ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-save ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-cancel ng-if=!$ctrl.reg.new></ff-btn> <ff-btn sense=new size=sm ngf-select="$ctrl.add($files, $invalidFiles)" ngf-pattern="\'application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\'" accept=application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document ngf-multiple=true><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </ff-panel> '},SnDj:function(e,t){e.exports="<ff-panel> <ff-panel-header><span translate=OUR_MEMBERS.EMBEDDING.HEADER></span></ff-panel-header> <ff-static><span translate=OUR_MEMBERS.EMBEDDING.HINT></span></ff-static> <ff-static ff-style=\"{'white-space': 'pre-wrap', 'font-family': 'monospace', 'font-size': '.85em', 'line-height': '1.25'}\">{{$ctrl.getCode()}}</ff-static> </ff-panel> "},SxCY:function(e,t){e.exports='<ff-panel id=upSystemInfo ng-if=$ctrl.schema.system> <ff-panel-header><span translate=USER_PROFILE.SYSTEM_INFO.HEADER></span></ff-panel-header> <div class="ff-grid gutter-h"> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.SYSTEM_INFO.JOIN_DATE></span></ff-label> <ff-static name=joinDate ff-bind="$ctrl.user.joinDate | date:\'mediumDate\'"></ff-static> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.SYSTEM_INFO.USER_ID></span></ff-label> <ff-static name=userId ff-bind=$ctrl.user.id></ff-static> </label> </ff-col> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.SYSTEM_INFO.REGISTERED_BY></span></ff-label> <ff-static name=registeredBy ff-bind=$ctrl.user.registeredBy></ff-static> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.SYSTEM_INFO.ACTIVATED_AT></span></ff-label> <ff-static name=activatedAt ff-bind=$ctrl.user.activatedAt></ff-static> </label> <label class=ff-row ng-if=$ctrl.user.masterMembers> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.SYSTEM_INFO.CO_MEMBER_OF></span></ff-label> <ff-static name=masterMembers ff-bind=$ctrl.user.masterMembers></ff-static> </label> </ff-col> </div> </ff-panel> '},UEFl:function(e,t,r){"use strict";r.r(t);var s=r("GJsN");t.default=angular.module("deskworks.upCustomFields",["deskworks.UserProfileFields",s.a.name]).directive("upCustomFields",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-custom-fields.tpl.html",controller:"upCustomFieldsCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",fields:"<"}}})).controller("upCustomFieldsCtrl",["$scope","dwAlerts","state","UserProfileFields",function(e,t,r,s){var n=this;n.save=function(){return s.save(r.getCurrentCenterId(),n.user.id,n.fields).catch((function(e){return t.error(e,"Failed to save user profile fields.")}))}}])},VsYK:function(e,t,r){"use strict";r.r(t);var s=r("WSeP"),n=r.n(s),l=r("acNQ");angular.module("deskworks.userSearchState",[l.a.name]).factory("userSearchState",["$rootScope","$translate","optsMembershipFilter",function(e,t,r){var s={advanced:!1,checkedIn:!1,centerId:0,page:1,sort:"lastName",order:1,pageSize:100,columns:[{id:"firstName",_name:"USER_SEARCH.COLUMNS.FIRST_NAME",include:!0},{id:"lastName",_name:"USER_SEARCH.COLUMNS.LAST_NAME",include:!0},{id:"company",_name:"USER_SEARCH.COLUMNS.COMPANY",include:!0},{id:"email",_name:"USER_SEARCH.COLUMNS.EMAIL",advanced:!0,include:!0},{id:"login",_name:"USER_SEARCH.COLUMNS.LOGIN",advanced:!0},{id:"phone",_name:"USER_SEARCH.COLUMNS.PHONE",advanced:!0},{id:"accessCode",_name:"USER_SEARCH.COLUMNS.ACCESS_CODE",advanced:!0},{id:"printerCode",_name:"USER_SEARCH.COLUMNS.PRINTER_CODE",advanced:!0},{id:"mailboxNumber",_name:"USER_SEARCH.COLUMNS.MAILBOX_NUMBER",advanced:!0},{id:"mailboxNames",_name:"USER_SEARCH.COLUMNS.MAILBOX_NAME",advanced:!0},{id:"occupation",_name:"USER_SEARCH.COLUMNS.OCCUPATION",advanced:!0},{id:"joinDate",_name:"USER_SEARCH.COLUMNS.JOIN_DATE",advanced:!0,tpl:"userSearchDateTpl"},{id:"payor",_name:"USER_SEARCH.COLUMNS.PAYOR",_hint:"USER_SEARCH.COLUMNS.PAYOR.HINT",advanced:!0},{id:"macAddress",_name:"USER_SEARCH.COLUMNS.MAC_ADDRESS",advanced:!0,tpl:"userSearchMacTpl"}],resetColumns:function(){s.columns=angular.copy(l.columns),f()}};s.filters=angular.copy(r);var l=angular.copy(s);function a(){angular.copy(l,s),f()}function f(){var e,r,l;n()(e=s.filters).call(e,(function(e){e.name=t.instant(e._name)})),n()(r=s.columns).call(r,(function(e){e.name=t.instant(e._name)})),n()(l=s.columns).call(l,(function(e){e.hint=t.instant(e._hint)}))}return e.$on("LOGIN",a),e.$on("LOGOUT",a),f(),e.$on("$setTranslationsSuccess",f),s}])},WZXA:function(e,t){e.exports='<ff-panel id=upComments ng-if=$ctrl.schema.comments class=ff-no-frame ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.COMMENTS.HEADER></span></ff-panel-header> <ff-row> <ff-textarea name=comments ff-model=$ctrl.user.comments rowspan=5></ff-textarea> </ff-row> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.comments.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},YZOG:function(e,t,r){"use strict";r.r(t);var s=r("0zKI"),n=r.n(s),l=r("NOor"),a=r.n(l),f=r("nbuU"),o=r.n(f),i=r("WSeP"),c=r.n(i);angular.module("deskworks.upPrinterCodes",["deskworks.helper","deskworks.state","deskworks.userProfile.service"]).directive("upPrinterCodes",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-printer-codes.tpl.html",controller:"upPrinterCodesCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upPrinterCodesCtrl",["$scope","$element","$q","dwAlerts","helper","state","userProfileService",function(e,t,r,s,l,f,i){var u=this;u.$onInit=function(){e.$on("ffBlock::EditStart",(function(){u.prCodesRollback=angular.copy(u.user.printerCodes)})),e.$on("ffBlock::EditCancel",(function(){u.user.printerCodes=u.prCodesRollback}))},u.add=function(){u.editMode||e.$broadcast("ffBlock::EditStart"),u.user.printerCodes.push(i.printerCode.new())},u.save=function(){var e,t,n=[];return c()(e=u.user.printerCodes).call(e,(function(e){var t=o()(l).call(l,u.prCodesRollback,e.id);t&&t.code===e.code||n.push(i.printerCode.save(f.getCurrentCenterId(),u.user.id,e).catch((function(e){return s.error(e,"Failed to save printer code.")})))})),c()(t=u.prCodesRollback).call(t,(function(e){o()(l).call(l,u.user.printerCodes,e.id)||n.push(i.printerCode.delete(f.getCurrentCenterId(),u.user.id,e).catch((function(e){return s.error(e,"Failed to delete printer code.")})))})),r.all(n)},u.delete=function(e){var r,s=a()(l).call(l,u.user.printerCodes,e.id);s>=0&&(n()(r=u.user.printerCodes).call(r,s,1),angular.element(t[0].querySelector('form[name="ffBlockForm"]')).scope().ffBlockForm.$setDirty())}}])},aT6e:function(e,t){e.exports='<ff-panel id=upLeadSource ng-if=$ctrl.schema.leadSource ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.LEAD_SOURCE.HEADER ng-class="{ req: ffBlock.editMode }"></span></ff-panel-header> <label class=ff-row> <ff-select name=leadSource ff-model=$ctrl.user.leadSource ff-options="opt.name for opt in $ctrl.user.options.leadSources" ff-required=true ff-validate-alert="{{\'USER_PROFILE.LEAD_SOURCE.SOURCE\' | translate}}" aria-label="{{\'USER_PROFILE.LEAD_SOURCE.SOURCE\' | translate}}"></ff-select> </label> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.leadSource.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},"aj6+":function(e,t){e.exports='<div class="ff-grid gutter-h-half" style=justify-content:flex-start;align-items:center> <ff-row flex="0 0 110px" class=ff-no-frame ng-repeat="card in $ctrl.user.accessCards" id="{{\'upAccessCard-\' + card.id}}"> <ff-text flex=auto name=accessCode ff-model=card.number style=margin-bottom:-1px ff-required=true ff-validate-alert="{{\'USER_PROFILE.LOGIN_INFO.ACCESS_CODE\' | translate}}"></ff-text> <ff-btn flex=none style=z-index:3 sense=delete size=xs ff-click=$ctrl.delete(card) ng-show=ffBlock.editMode title="{{\'USER_PROFILE.LOGIN_INFO.DELETE_ACCESS_CODE\' | translate}}"></ff-btn> </ff-row> <ff-btn flex=none style="margin:2.5px 0 2.5px auto" sense=new size=xs ff-click=$ctrl.add() title="{{\'USER_PROFILE.LOGIN_INFO.ADD_ACCESS_CODE\' | translate}}"></ff-btn> </div> '},auvQ:function(e,t){e.exports='<div id=upAddresses ng-if=$ctrl.schema.addresses class="ff-grid gutter-v gutter-h" ff-section="address in $ctrl.user.addresses" ff-section-new="$ctrl.new($ctrl.center.country.id, $ctrl.center.state.id || $ctrl.center.state)"> <ff-panel ng-if=!$ctrl.user.addresses.length> <ff-panel-header><span translate=USER_PROFILE.ADDRESSES></span></ff-panel-header> <span translate=USER_PROFILE.ADDRESSES.EMPTY></span> </ff-panel> <ff-panel flex="{{ $ctrl.single ? null : {md: \'0 0 50%\'} }}" id="{{\'upAddress-\' + address.id}}" ff-block ff-block-save=$ctrl.save(address) ff-block-delete=$ctrl.delete(address) ff-block-edit-default=$ctrl.isNew(address) ff-block-is-new=$ctrl.isNew(address)> <ff-panel-header><span translate=USER_PROFILE.ADDRESS></span></ff-panel-header> <fieldset dw-address=address dw-address-type=true></fieldset> <ff-btn-group class=ff-block-buttons ng-if=!$ctrl.schema.addresses.$readOnly> <ff-btn ff-btn-block-edit ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-delete ng-if="($ctrl.isNew(address) ? $ctrl.user.addresses.length : $ctrl.countExisting()) > 1" ng-hide="ffBlock.editMode && !$ctrl.reg.new"></ff-btn> <ff-btn ff-btn-block-save ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-cancel ng-if=!$ctrl.reg.new></ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=ff-btn-full ng-if="!$ctrl.schema.addresses.$readOnly && !$ctrl.single"> <ff-btn ff-btn-section-new> <span translate=GLOBAL.BTN_NEW></span> <span translate=USER_PROFILE.ADDRESS></span> </ff-btn> </ff-btn-group> </div> '},cdCP:function(e,t){e.exports='<ff-panel id=upMembership ng-if=$ctrl.schema.membership ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.MEMBERSHIP.HEADER></span></ff-panel-header> <label class=ff-row ng-if="$ctrl.schema.membership.membershipStatus !== false"> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.MEMBERSHIP.STATUS ng-class="{ req: ffBlock.editMode }"></span></ff-label> <ff-select name=status ff-model=$ctrl.user.membershipStatus ff-options="status.name for status in $ctrl.membStatuses" ff-required=true ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.STATUS\' | translate}}" ff-change=$ctrl.onChangeStatus()></ff-select> </label> <label class=ff-row ng-if="vm.reg && ($ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\')"> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.MEMBERSHIP.CATEGORY ng-class="{ req: ffBlock.editMode }"></span></ff-label> <ff-select name=type ff-model=$ctrl.user.membershipType ff-options="type.name for type in $ctrl.user.options.membershipTypes" ff-required=true ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.CATEGORY\' | translate}}"></ff-select> </label> <label class=ff-row ng-if="vm.reg && ($ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\')"> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.MEMBERSHIP.PLAN ng-class="{ req: ffBlock.editMode }"></span></ff-label> <ff-select name=plan ff-model=$ctrl.user.membershipProduct ff-options="product.name for product in $ctrl.user.membershipType.membershipPackages" ff-required=true ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.PLAN\' | translate}}"></ff-select> </label> <label class=ff-row ng-if="$ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\'"> <ff-label flex="0 1 116px"> <span> <span translate=USER_PROFILE.MEMBERSHIP.PRICE_LIST ng-class="{ req: ffBlock.editMode }"></span> <ff-hint hint-type=warning ng-if="ffBlock.editMode && !$ctrl.reg && $ctrl.priceListOrig !== $ctrl.user.membershipPriceList"> <span translate=USER_PROFILE.MEMBERSHIP.PRICE_LIST.CHANGE_WARNING></span> </ff-hint> </span> </ff-label> <ff-select name=priceList ff-model=$ctrl.user.membershipPriceList ff-options="plist.name for plist in $ctrl.user.options.membershipPriceLists" ff-required=true ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.PRICE_LIST\' | translate}}"></ff-select> </label> <label class=ff-row ng-if="vm.reg && vm.reg.new && ($ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\')"> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.MEMBERSHIP.DISCOUNT_CODE></span></ff-label> <ff-text name=discountCode ff-model=$ctrl.user.discountCode ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.DISCOUNT_CODE\' | translate}}"></ff-text> </label> <label class=ff-row ng-if="vm.reg && ($ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\')"> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.MEMBERSHIP.START_DATE ng-class="{ req: ffBlock.editMode }"></span></ff-label> <ff-date name=membershipStartDate ff-model=$ctrl.user.membershipStartDate ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.START_DATE\' | translate}}"></ff-date> </label> <label class=ff-row ng-if="$ctrl.schema.membership.attachedReservationUnit !== false"> <ff-label flex="0 0 116px"> <span translate=USER_PROFILE.MEMBERSHIP.ATTACHED_RESERVATION_UNIT></span> <ff-hint> <span translate=USER_PROFILE.MEMBERSHIP.ATTACHED_RESERVATION_UNIT.HINT></span> </ff-hint> </ff-label> <ff-select ff-model=$ctrl.user.attachedReservationUnit name=attachedReservationUnit ff-options="resUnit.name for resUnit in $ctrl.reservationUnits" ff-dim=!$ctrl.reservationUnits> </ff-select> </label> <kisi-access-group user-id=$ctrl.user.id save=$ctrl.kisiSave ng-if="$ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\'"></kisi-access-group> <ezeep-group user-id=$ctrl.user.id save=$ctrl.ezeepSave></ezeep-group> <label class=ff-row ng-if="$ctrl.user.makeRecurringBillingsInactive !== undefined"> <ff-checkbox name=makeRecurringBillingsInactive ff-model=$ctrl.user.makeRecurringBillingsInactive> <span translate=USER_PROFILE.MEMBERSHIP.INACTIVATE_RECURRING_BILLINGS></span> </ff-checkbox> </label> <label class=ff-row ng-if="$ctrl.user.makeCoMembersInactive !== undefined && $ctrl.user.coMembers.length"> <ff-checkbox name=makeCoMembersInactive ff-model=$ctrl.user.makeCoMembersInactive> <span translate=USER_PROFILE.MEMBERSHIP.INACTIVATE_CO_MEMBERS></span> </ff-checkbox> </label> <ff-row ng-if="$ctrl.user.membershipStatus.id === \'nonMember\' && $ctrl.user.selfRegistrationStatus"> <ff-label> <span class=text-danger ng-if="$ctrl.user.selfRegistrationStatus === \'abandoned\'"> <ff-icon sense=warning class=ff-flex-start></ff-icon> <span translate=USER_PROFILE.MEMBERSHIP.SIGN_UP.ABANDONED></span> </span> <span class=text-danger ng-if="$ctrl.user.selfRegistrationStatus === \'staffHelp\'"> <ff-icon sense=warning class=ff-flex-start></ff-icon> <span translate=USER_PROFILE.MEMBERSHIP.SIGN_UP.STAFF_HELP></span> </span> <span class=text-brand ng-if="$ctrl.user.selfRegistrationStatus === \'inProgress\'"> <ff-icon sense=info class=ff-flex-start></ff-icon> <span translate=USER_PROFILE.MEMBERSHIP.SIGN_UP.IN_PROGRESS></span> </span> </ff-label> </ff-row> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.membership.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> <ff-btn sense=reset size=sm ff-click=$ctrl.resetSelfRegistrationStatus() ng-if="$ctrl.user.membershipStatus.id === \'nonMember\' && $ctrl.user.selfRegistrationStatus === \'abandoned\'"> <span translate=USER_PROFILE.MEMBERSHIP.BTN_RESET_ABANDONED></span> </ff-btn> <ff-btn sense=reset size=sm ff-click=$ctrl.resetSelfRegistrationStatus() ng-if="$ctrl.user.membershipStatus.id === \'nonMember\' && $ctrl.user.selfRegistrationStatus === \'staffHelp\'"> <span translate=USER_PROFILE.MEMBERSHIP.BTN_RESET_STAFF_HELP></span> </ff-btn> <ff-btn sense=delete size=sm ff-click=$ctrl.deleteUser() ng-if="state.isLoggedAdmin() && !state.isLoggedRole(\'coordinator\') && !$ctrl.reg"> <span translate=USER_PROFILE.MEMBERSHIP.BTN_DELETE_USER></span> </ff-btn> </ff-btn-group> </ff-panel> '},ddam:function(e,t,r){"use strict";r.r(t);r("8cZI"),r("JBxO"),r("FdtR");var s=r("nbuU"),n=r.n(s),l=r("6RpP"),a=r.n(l),f=r("hsT8"),o=r.n(f),i=r("yCd9"),c=r.n(i);t.default=angular.module("deskworks.upBillingMethod",["autoSave","deskworks.helper","deskworks.state","deskworks.userProfile.service","deskworks.userProfile.optsBillingMethod"]).directive("upBillingMethod",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/billing-sections/up-billing-method.tpl.html",controller:"upBillingMethodCtrl as $ctrl",bindToController:{user:"<",reg:"<",settings:"<",single:"<",autoSave:"<",newPaymentMethods:"<"}}})).controller("upBillingMethodCtrl",["$scope","$timeout","dwAlerts","helper","state","session","userProfileService","optsBillingMethod","autoSave",function(e,t,r,s,l,f,i,u,d){var m=this;m.$onInit=function(){m.prevState={},m.onChange(!0),e.$watchCollection((function(){var e,t,r;return c()(e=o()(t=a()(r=m.user.creditCards).call(r,m.user.eChecks)).call(t,(function(e){return m.newPaymentMethods||e.id&&!s.isUid(e.id)}))).call(e,(function(e){return e.id+e.number||""+e.bankRoutingNumber||""+e.bankAccountNumber||""}))}),(function(e,t){t!==e&&m.onChange()}))},m.onChange=function(e){var r,l,a,f;(e&&!m.reg||(m.user.billingMethod=m.user.billingMethod||m.getBillingMethods()[0].id),m.billingMethod=n()(r=m.getBillingMethods()).call(r,(function(e){return e.id===m.user.billingMethod})),m.optsPaymentMethod=[],m.billingMethod&&m.billingMethod.paymentMethodKey)&&(m.optsPaymentMethod=c()(a=o()(f=m.user[m.billingMethod.paymentMethodKey]).call(f,(function(e){return m.newPaymentMethods||e.id&&!s.isUid(e.id)}))).call(a,(function(e){return{id:e.id,name:e.number||e.bankRoutingNumber&&[e.bankRoutingNumber,e.bankAccountNumber].join(" / ")||"[new]"}})));m.paymentMethod=n()(l=m.optsPaymentMethod).call(l,(function(e){return e.id===m.user.paymentMethodId})),m.paymentMethod?m.user.paymentMethodId=m.paymentMethod.id:e&&!m.reg||!m.optsPaymentMethod.length?m.user.paymentMethodId=null:m.user.paymentMethodId=m.optsPaymentMethod[0].id,!1!==m.autoSave&&t((function(){if(!s.pointFirstInvalid("#upBillingMethod")){var t={billingMethod:m.user.billingMethod,paymentMethodId:m.user.paymentMethodId};e?m.prevState=t:angular.equals(m.prevState,t)||m.save().then((function(){m.prevState=t}))}}),100)},m.getBillingMethods=function(){return o()(u).call(u,(function(e){return!e.restricted||f.isAdmin()||m.prevState&&m.prevState.billingMethod===e.id}))},m.save=d.wrap((function(){var e={billingMethod:m.user.billingMethod,paymentMethodId:m.user.paymentMethodId};return m.saving=!0,i.updateRaw(l.getCurrentCenterId(),m.user,e).catch((function(e){return r.error(e,"Failed to save billing method.")})).finally((function(){m.saving=!1}))}))}])},e8sX:function(e,t){e.exports='<ff-panel id=upTermsOfService ng-if="$ctrl.schema.termsOfService && $ctrl.user.isNew()" class=ff-no-frame> <ff-panel-header style=margin-bottom:.5rem><req translate=USER_PROFILE.TERMS_OF_SERVICE.HEADER></req></ff-panel-header> <label class=ff-row> <ff-checkbox ff-model=$ctrl.user.termsOfService flex="0 0 36px" class=ff-center ff-required=true ff-validate-alert="{ required: (\'USER_PROFILE.TERMS_OF_SERVICE.REQUIRED\' | translate) }" title="{{\'USER_PROFILE.TERMS_OF_SERVICE.REQUIRED\' | translate}}"> </ff-checkbox> <ff-label> <span> <span translate=USER_PROFILE.TERMS_OF_SERVICE.LABEL></span> <a ng-href={{wlLinks.tosLinkUrl}} ng-bind=wlLinks.tosLinkText target=_blank rel=noopener></a> </span> </ff-label> </label> </ff-panel> '},"gB/y":function(e,t){e.exports='<div class=dw-modal> <div class=dw-modal-fade ng-click=close()></div> <div class="dw-modal-dialog our-member-modal"> <div class=dw-modal-scroll> <div class=our-member-header> <ff-img ff-src={{::member.photo}} ng-if=::member.photo ff-alt={{::member.name}}></ff-img> <div class=our-member-details> <h4>{{::member.name}}</h4> <h5>{{::member.occupation}}</h5> <h6>{{::member.company}}</h6> <div class=our-member-contacts ng-if="::emails.length || phones.length"> <div class=our-member-emails ng-if=::emails.length> <span ng-repeat="field in ::emails"> <i class="fa fa-at"></i> <a ng-href=mailto:{{::field.value}} target=_blank rel=noopener>{{::field.value}}</a> </span> </div> <div class=our-member-phones ng-if=::phones.length> <span ng-repeat="field in ::phones"> <i class="fa fa-phone"></i> <a ng-href=tel:{{::field.value}} target=_blank rel=noopener>{{::field.value}}</a> </span> </div> </div> <div class=our-member-urls ng-if=::urls.length> <span ng-repeat="field in ::urls"> <a ng-href={{::field.value}} target=_blank rel=noopener title={{::field.name}}><i class=fa ng-class=::field.icon></i></a> </span> </div> </div> </div> <div ng-repeat="field in ::fields" class=our-member-field> <span>{{::field.name}}:</span>&nbsp;<span>{{::field.type === \'date\' ? (field.value | date:\'mediumDate\') : field.value}}</span> </div> </div> <button class=dw-modal-cross ng-click=close()></button> </div> </div> '},i0NF:function(e,t,r){"use strict";r.r(t);var s=r("YtL8"),n=r.n(s),l=r("yCd9"),a=r.n(l),f=r("Oio6");t.default=angular.module("deskworks.upPhones",["deskworks.helper","deskworks.state","deskworks.userProfile.service",f.a.name]).directive("upPhones",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-phones.tpl.html",controller:"upPhonesCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",single:"<"}}})).controller("upPhonesCtrl",["$scope","$q","$window","$translate","dwAlerts","helper","state","userProfileService","optsPhoneType",function(e,t,r,s,l,f,o,i,c){var u=this;u.types=a()(c).call(c,(function(e){return angular.extend(e,{name:s.instant(e.name)})})),u.new=i.phone.new,u.isNew=i.phone.isNew,u.countExisting=function(){var e;return n()(e=u.user.phones).call(e,(function(e,t){return f.isUid(t.id)?e:e+1}),0)},u.save=function(e){return i.phone.save(o.getCurrentCenterId(),u.user.id,e).catch((function(e){return l.error(e,"Failed to save phone.")}))},u.delete=function(e){return i.phone.isNew(e)?t.when():r.confirm(s.instant("USER_PROFILE.PHONES.CONFIRM_DELETE"))?i.phone.delete(o.getCurrentCenterId(),u.user.id,e).catch((function(e){return l.error(e,"Failed to delete phone.")})):t.reject()}}])},jtA9:function(e,t){e.exports='<ff-panel id=upCustomFields ng-if="$ctrl.schema.customFields && $ctrl.fields.length" ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.CUSTOM_FIELDS.HEADER></span></ff-panel-header> <ff-col ff-dim=!$ctrl.fields> <fd-field field=field ng-repeat="field in $ctrl.fields"></fd-field> </ff-col> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.customFields.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},kULM:function(e,t,r){"use strict";r.r(t);r("Muwe"),r("y89P");var s=r("nbuU"),n=r.n(s),l=r("hsT8"),a=r.n(l),f=r("2/1H");t.default=angular.module("deskworks.upMembership",["deskworks.helper","deskworks.state","deskworks.userProfile.service",f.a.name]).directive("upMembership",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-membership.tpl.html",controller:"upMembershipCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",kisiSave:"=",ezeepSave:"="}}})).controller("upMembershipCtrl",["$scope","$timeout","$window","$translate","$filter","$injector","$q","dwAlerts","state","helper","userProfileService","ReservationUnit","optsMembershipStatus",function(e,t,r,s,l,f,o,i,c,u,d,m,p){var b,g=this;g.$onInit=function(){g.kisi=f.has("kisiAccessGroupDirective"),g.ezeep=f.has("ezeepGroupDirective"),g.membStatuses=a()(p).call(p,(function(e){return!g.reg||!g.reg.member&&"nonMember"===e.id||g.reg.member&&("active"===e.id||"inactive"===e.id)})),g.schema.membership&&!1!==g.schema.membership.attachedReservationUnit&&m.query(c.getCurrentCenterId()).then((function(e){e.unshift({name:s.instant("USER_PROFILE.MEMBERSHIP.ATTACHED_RESERVATION_UNIT.NONE")}),g.user.attachedReservationUnit=n()(u).call(u,e,c.getParam("attachedReservationUnitId")),g.reservationUnits=a()(e).call(e,(function(e){return!e.attachedUserId||e.id==(g.user.attachedReservationUnit&&g.user.attachedReservationUnit.id)}))})).catch((function(e){return i.error(e,"Failed to query Reservation Units")})),e.$on("ffBlock::EditStart",(function(){b=g.user.membershipStatus,g.priceListOrig=g.user.membershipPriceList,delete g.user.makeRecurringBillingsInactive,delete g.user.makeCoMembersInactive})),e.$on("ffBlock::EditEnd",(function(){delete g.user.makeRecurringBillingsInactive,delete g.user.makeCoMembersInactive}))},g.save=function(){var e={};return"active"!==g.user.membershipStatus.id&&"inactive"!==g.user.membershipStatus.id||(e={membershipStatus:g.user.membershipStatus.id,membershipPriceListId:g.user.membershipPriceList.id,makeRecurringBillingsInactive:g.user.makeRecurringBillingsInactive,selfRegistrationStatus:null},g.user.coMembers&&g.user.coMembers.length&&(e.makeCoMembersInactive=g.user.makeCoMembersInactive)),g.schema.membership&&!1!==g.schema.membership.attachedReservationUnit&&(c.setParam("attachedReservationUnitId",g.user.attachedReservationUnit&&g.user.attachedReservationUnit.id),c.replace()),d.updateRaw(c.getCurrentCenterId(),g.user,e).catch((function(e){return i.error(e,"Failed to save membership.")})).then((function(){g.user.selfRegistrationStatus=null})).then((function(){if(g.kisiSave)return g.kisiSave()})).then((function(){if(g.ezeepSave)return g.ezeepSave()}))},g.onChangeStatus=function(){!g.reg&&b&&("inactive"===g.user.membershipStatus.id&&"active"===b.id?(g.user.makeRecurringBillingsInactive=!0,g.user.makeCoMembersInactive=!0):(delete g.user.makeRecurringBillingsInactive,delete g.user.makeCoMembersInactive))},g.resetSelfRegistrationStatus=function(){return d.updateRaw(c.getCurrentCenterId(),g.user,{selfRegistrationStatus:null}).catch((function(e){return i.error(e,"Failed to reset abandoned self-registration status.")})).then((function(){t((function(){g.user.selfRegistrationStatus=null}))}))},g.deleteUser=function(){if(r.confirm(s.instant("USER_PROFILE.MEMBERSHIP.CONFIRM_DELETE_USER")))return d.delete(c.getCurrentCenterId(),g.user.id).catch((function(e){return i.error(e,"Failed to delete user.")})).then((function(){return c.setCurrentUser(null)}))}}])},l7tb:function(e,t){e.exports='<div id=upCreditCards class="ff-grid gutter-v gutter-h" ff-section="cc in $ctrl.user.creditCards" ff-section-new=$ctrl.new()> <ff-panel flex="{{ $ctrl.single ? null : {lg: \'0 0 50%\'} }}" ng-if=!$ctrl.user.creditCards.length> <span translate=BILLING_PROFILE.CREDIT_CARDS.EMPTY></span> </ff-panel> <ff-panel flex="{sm: \'0 0 85%\', md: \'0 0 70%\', lg: \'0 0 50%\'}" id="{{\'upCreditCard-\' + cc.id}}" ff-block ff-block-save=$ctrl.save(cc) ff-block-delete=$ctrl.delete(cc) ff-block-edit-default=$ctrl.isNew(cc) ff-block-is-new=$ctrl.isNew(cc)> <div class="ff-grid gutter-v"> <ff-panel> <ff-panel-header><span translate=BILLING_PROFILE.CREDIT_CARDS.HEADER></span></ff-panel-header> <fieldset dw-credit-card=cc dw-credit-card-types=$ctrl.settings.creditCardTypes></fieldset> </ff-panel> <ff-panel> <ff-panel-header><span translate=BILLING_PROFILE.CREDIT_CARDS.ADDRESS></span></ff-panel-header> <fieldset dw-address=cc not-required=$ctrl.settings.creditCardAddressOptional></fieldset> </ff-panel> </div> <ff-btn-group class=ff-block-buttons ng-if="!$ctrl.user.accessRights.billingInfo.readOnly && (!$ctrl.isNew(cc) || !$ctrl.single)"> <ff-btn ff-btn-block-delete ng-if="$ctrl.hasDeleteButton(cc, ffBlock)" ng-hide=false></ff-btn> <ff-btn ff-btn-block-save ng-if="!$ctrl.reg && !$ctrl.single"></ff-btn> <ff-btn ff-btn-block-cancel ng-if="!$ctrl.reg && !$ctrl.single"></ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=ff-btn-full ng-if="!$ctrl.user.accessRights.billingInfo.readOnly && !$ctrl.single"> <ff-btn ff-btn-section-new><span translate=BILLING_PROFILE.CREDIT_CARDS.BTN_ADD></span></ff-btn> </ff-btn-group> </div> '},"m2t+":function(e,t,r){"use strict";r.r(t);var s=r("hsT8"),n=r.n(s),l=r("D4RU"),a=r.n(l);t.default=angular.module("deskworks.members.userProfile.edit",["deskworks.routeHelper","deskworks.helper","deskworks.setup.service","deskworks.userProfile.service","deskworks.UserProfileFields"]).config(["$routeProvider",function(e){e.when("/profile",{template:"<div ng-include=\"'members/user-profile/user-profile.tpl.html'\" ff-bulk-read-only></div>",controller:"UserProfileEditCtrl as vm",label:"Profile",routeBranch:"profile",translations:["user-profile"],resolve:{reg:angular.noop,userProfile:["dwAlerts","userProfileService","state","routeHelper","resolveTimezone",function(e,t,r,s,n){return s.auth().then((function(){return s.selectUser().then((function(){return n()})).then((function(){return t.get(r.getCurrentCenterId(),r.getCurrentUserId()).catch((function(t){return e.error(t,"Failed to load user profile.")}))}))}))}],center:["state","centerService",function(e,t){return e.getCurrentCenterId()?t.get(e.getCurrentCenterId()):{}}],lazyKisi:"lazyLoadKisi",lazyEzeep:"lazyLoadEzeep"}}),e.when("/new-member/:userId",{template:"<div ng-include=\"'members/user-profile/user-profile.tpl.html'\" ff-bulk-read-only></div>",controller:"UserProfileEditCtrl as vm",label:"New Member",routeBranch:"new-member",translations:["user-profile"],resolve:{reg:function(){return{member:!0,selfRegistration:!1,step:1,stepCount:3}},userProfile:["$route","dwAlerts","state","userProfileService","routeHelper","resolveTimezone",function(e,t,r,s,n,l){return n.auth().then((function(){return l()})).then((function(){return s.getForRegistration(r.getCurrentCenterId(),e.current.params.userId,"member","register").catch((function(e){return t.error(e,"Failed to load user profile.")}))}))}],center:["state","centerService",function(e,t){return e.getCurrentCenterId()?t.get(e.getCurrentCenterId()):{}}],lazyKisi:"lazyLoadKisi",lazyEzeep:"lazyLoadEzeep"}}),e.when("/new-user/:userId",{template:"<div ng-include=\"'members/user-profile/user-profile.tpl.html'\" ff-bulk-read-only></div>",controller:"UserProfileEditCtrl as vm",label:"New User",routeBranch:"new-user",translations:["user-profile"],resolve:{reg:function(){return{member:!1,selfRegistration:!1,step:1,stepCount:2}},userProfile:["$route","dwAlerts","state","userProfileService","routeHelper","resolveTimezone",function(e,t,r,s,n,l){return n.auth().then((function(){return l()})).then((function(){return s.getForRegistration(r.getCurrentCenterId(),e.current.params.userId,"nonMember","register").catch((function(e){return t.error(e,"Failed to load user profile.")}))}))}],center:["state","centerService",function(e,t){return e.getCurrentCenterId()?t.get(e.getCurrentCenterId()):{}}]}})}]).controller("UserProfileEditCtrl",["$scope","$translate","$filter","dwAlerts","state","helper","reg","userProfile","userProfileService","setupService","center","UserProfileFields",function(e,t,r,s,l,f,o,i,c,u,d,m){var p,b=this;if(o)l.setPageTitle(o.member?"New Member Registration":"New Non-Member Registration");else{var g=t.instant("USER_PROFILE.PAGE_TITLE",{userName:i.fullNameCompany});l.setPageTitle(g)}(b.reg=o,b.center=d,b.userProfile=i,b.schema=i.schema,b.reg&&b.reg.member)&&(a()(p=b.userProfile.options.membershipTypes).call(p,(function(e){var t=f.findByKeyValue(e.membershipPackages,"id",l.getParam("productId"));return t&&(b.userProfile.membershipType=e,b.userProfile.membershipProduct=t),!!t})),l.getParam("membershipStartDate")&&(b.userProfile.membershipStartDate=r("toDate")(l.getParam("membershipStartDate"))));b.reg||u.getSetupSettings().then((function(e){b.settings=e})).catch((function(e){return s.error(e,"Failed to get setup settings.")})).catch(angular.noop),(b.schema.customFields||b.schema.shareable)&&m.query(l.getCurrentCenterId(),b.userProfile.id).then((function(e){b.customFields=n()(e).call(e,(function(e){return"customFields"===e.section})),b.shareable=n()(e).call(e,(function(e){return"shareable"===e.section}))})).catch((function(e){return s.error(e,"Failed to query user profile fields.")})).catch(angular.noop),b.next=function(){return l.setParam("productId",(b.userProfile.membershipProduct||{}).id),l.setParam("membershipStartDate",r("date")(b.userProfile.membershipStartDate,"yyyy-MM-dd")),l.setPath(l.getPath()+"/membership/billing-profile")}}])},ntZG:function(e,t){e.exports='<div id=upBillingMethod class="ff-grid gutter-h"> <ff-panel flex="{lg: \'0 0 50%\'}"> <ff-spin ng-if=$ctrl.saving></ff-spin> <ff-header><span translate=BILLING_PROFILE.BILLING_METHOD></span></ff-header> <div class=ff-grid> <label flex="{md: \'0 0 50%\'}"> <ff-select ff-model=$ctrl.user.billingMethod ff-required=true ff-change=$ctrl.onChange() ff-options="opt.id as opt.name for opt in $ctrl.getBillingMethods()" ff-validate-alert="{{\'BILLING_PROFILE.BILLING_METHOD\' | translate}}" aria-label="{{\'BILLING_PROFILE.BILLING_METHOD\' | translate}}"></ff-select> </label> <label flex="{md: \'0 0 50%\'}" ng-if=$ctrl.billingMethod.paymentMethodKey> <ff-select ff-model=$ctrl.user.paymentMethodId ff-required=true ff-change=$ctrl.onChange() ff-options="opt.id as opt.name for opt in $ctrl.optsPaymentMethod" ff-validate-alert="{{\'BILLING_PROFILE.PAYMENT_METHOD\' | translate}}" aria-label="{{\'BILLING_PROFILE.PAYMENT_METHOD\' | translate}}"></ff-select> </label> </div> </ff-panel> </div> '},ovSQ:function(e,t,r){"use strict";r.r(t);var s=r("zTcH"),n=r("yrhy"),l=r("XRrO");t.default=angular.module("deskworks.upLoginInfo",["deskworks.upAccessCodes",s.a.name,n.a.name,l.a.name]).directive("upLoginInfo",(function(){return{templateUrl:"members/user-profile/sections/up-login-info.tpl.html",restrict:"E",scope:!0,controller:"upLoginInfoCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",memberDirectoryUrl:"<"}}})).controller("upLoginInfoCtrl",["$scope","$q","dwAlerts","state","userProfileService",function(e,t,r,s,n){var l=this;e.$watch("$ctrl.saveMessageBoardUserSettings",(function(){l.user.saveMessageBoardUserSettings=l.saveMessageBoardUserSettings})),l.save=function(){var e={login:l.user.login,password:l.user.password,passwordConfirmation:l.user.passwordConfirmation,disableGroupMailing:l.user.disableGroupMailing};return t.all([n.updateRaw(s.getCurrentCenterId(),l.user,e).catch((function(e){return r.error(e,"Failed to save login information.")})),l.saveAccessCards&&l.saveAccessCards().catch((function(e){return r.error(e,"Failed to save access cards.")})),l.saveMessageBoardUserSettings&&l.saveMessageBoardUserSettings().catch((function(e){return r.error(e,"Failed to save message board user settings.")}))])}}])},pp4h:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.upTermsOfService",["deskworks.helper","deskworks.state"]).directive("upTermsOfService",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-terms-of-service.tpl.html",controller:"upTermsOfServiceCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upTermsOfServiceCtrl",(function(){}))},qgYx:function(e,t,r){},sLGz:function(e,t){e.exports='<ff-panel id=upLoginInfo ng-if=$ctrl.schema.loginInfo ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.LOGIN_INFO.HEADER></span></ff-panel-header> <label class=ff-row> <ff-label flex="0 1 132px"><span translate=GLOBAL.LOGIN ng-class="{ req: ffBlock.editMode }"></span></ff-label> <ff-login name=login ff-model=$ctrl.user.login ff-required=true dw-login></ff-login> </label> <label class=ff-row> <ff-label flex="0 1 132px"><span translate=GLOBAL.PASSWORD ng-class="{ req: ffBlock.editMode }"></span></ff-label> <ff-password name=password ff-model=$ctrl.user.password ff-required={{$ctrl.reg.new}} dw-password ff-not-contain="[$ctrl.user.login, $ctrl.user.login.split(\'\').reverse().join(\'\'), $ctrl.user.firstName, $ctrl.user.lastName]" ff-validate-alert=\'{ "notContain": "{{&#39;GLOBAL.PASSWORD.NOT_CONTAIN&#39; | translate}}" }\'></ff-password> </label> <label class=ff-row> <ff-label flex="0 1 132px"> <span translate=USER_PROFILE.LOGIN_INFO.PASSWORD_CONF ng-class="{ req: ffBlock.editMode }"></span> </ff-label> <ff-password name=passwordConfirmation ff-model=$ctrl.user.passwordConfirmation dw-password ff-required={{$ctrl.reg.new}} ff-match=ffBlockForm.password.$viewValue ff-validate-alert=\'{ "field": "{{&#39;USER_PROFILE.LOGIN_INFO.PASSWORD_CONF&#39; | translate}}", "matchField": "{{&#39;GLOBAL.PASSWORD&#39; | translate}}" }\'> </ff-password> </label> <ff-row ng-if=$ctrl.schema.accessCodes> <ff-label flex="0 1 132px"><span translate=USER_PROFILE.LOGIN_INFO.ACCESS_CODES></span></ff-label> <ff-static> <up-access-codes flex=auto user-profile=$ctrl.user save=$ctrl.saveAccessCards></up-access-codes> </ff-static> </ff-row> <label class=ff-row ng-if="$ctrl.schema.loginInfo.memberDirectory !== false && $ctrl.memberDirectoryUrl"> <ff-label flex="0 1 132px"><span translate=USER_PROFILE.LOGIN_INFO.MEMBER_DIRECTORY></span></ff-label> <ff-static name=memberDirectory> <a ng-href={{$ctrl.memberDirectoryUrl}} target=_blank rel=noopener> <span translate=USER_PROFILE.LOGIN_INFO.MEMBER_DIRECTORY_LINK></span> </a> </ff-static> </label> <message-board-user-settings user-id=$ctrl.user.id save=$ctrl.saveMessageBoardUserSettings ng-if="$ctrl.schema.loginInfo && $ctrl.schema.loginInfo.messageBoardNotices !== false"></message-board-user-settings> <ff-static> <label> <ff-checkbox flex=auto ff-model=$ctrl.user.disableGroupMailing> <span translate=USER_PROFILE.LOGIN_INFO.DISABLE_GROUP_MAILING></span> </ff-checkbox> </label> &nbsp; <ff-hint><span translate=USER_PROFILE.LOGIN_INFO.DISABLE_GROUP_MAILING.HINT></span></ff-hint> </ff-static> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.loginInfo.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},tCyP:function(e,t,r){"use strict";r.r(t);var s=r("GJsN");t.default=angular.module("deskworks.upShareable",["deskworks.userProfile.service","deskworks.UserProfileFields","deskworks.optsShareEmail",s.a.name]).directive("upShareable",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-shareable.tpl.html",controller:"upShareableCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",fields:"<"}}})).controller("upShareableCtrl",["$scope","$q","dwAlerts","state","userProfileService","UserProfileFields","optsShareEmail",function(e,t,r,s,n,l,a){var f=this;f.$onInit=function(){f.optsShareEmail=a},f.save=function(){var a={sharePhoto:f.user.sharePhoto,shareCompany:f.user.shareCompany,shareOccupation:f.user.shareOccupation,shareEmail:f.user.shareEmail};return t.all([n.updateRaw(s.getCurrentCenterId(),f.user,a).then((function(){return e.$emit("CurrentUser:refresh")})).catch((function(e){return r.error(e,"Failed to save user shareable info.")})).catch(angular.noop),l.save(s.getCurrentCenterId(),f.user.id,f.fields).catch((function(e){return r.error(e,"Failed to save user profile fields.")})).catch(angular.noop)])}}])},zcfi:function(e,t){e.exports='<div id=upPhones ng-if=$ctrl.schema.phones class="ff-grid gutter-v gutter-h" ff-section="phone in $ctrl.user.phones" ff-section-new=$ctrl.new()> <ff-panel ng-if=!$ctrl.user.phones.length> <ff-panel-header><span translate=USER_PROFILE.PHONES></span></ff-panel-header> <span translate=USER_PROFILE.PHONES.EMPTY></span> </ff-panel> <ff-panel flex="{{ $ctrl.single ? null : {md: \'0 0 50%\'} }}" id="{{\'upPhone-\' + phone.id}}" ff-block ff-block-save=$ctrl.save(phone) ff-block-delete=$ctrl.delete(phone) ff-block-edit-default=$ctrl.isNew(phone) ff-block-is-new=$ctrl.isNew(phone)> <ff-panel-header><span translate=USER_PROFILE.PHONE></span></ff-panel-header> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PHONES.TYPE ng-class="{ req: ffBlock.editMode }"></span></ff-label> <ff-select name=type ff-model=phone.type ff-options="type.name for type in $ctrl.types" ff-required=true ff-validate-alert="{{\'USER_PROFILE.PHONES.TYPE\' | translate}}"></ff-select> </label> <ff-row> <label flex="1 1 auto"> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PHONES.NUMBER ng-class="{ req: ffBlock.editMode }"></span></ff-label> <ff-text flex="1 1 1%" name=number ff-model=phone.number ff-required=true dw-phone placeholder=888-379-2865></ff-text> </label> <label flex="0 0 78px"> <ff-label flex="0 1 34px"><span translate=USER_PROFILE.PHONES.EXT></span></ff-label> <ff-text flex="1 1 1%" name=ext ff-model=phone.ext></ff-text> </label> </ff-row> <ff-btn-group class=ff-block-buttons ng-if=!$ctrl.schema.phones.$readOnly> <ff-btn ff-btn-block-edit ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-delete ng-if="($ctrl.isNew(phone) ? $ctrl.user.phones.length : $ctrl.countExisting()) > 1" ng-hide="ffBlock.editMode && !$ctrl.reg.new"></ff-btn> <ff-btn ff-btn-block-save ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-cancel ng-if=!$ctrl.reg.new></ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=ff-btn-full ng-if="!$ctrl.schema.phones.$readOnly && !$ctrl.single"> <ff-btn ff-btn-section-new> <span translate=GLOBAL.BTN_NEW></span> <span translate=USER_PROFILE.PHONE></span> </ff-btn> </ff-btn-group> </div> '}}]);