{"version":3,"sources":["webpack:///./bundles/invoice/alternate/index.js","webpack:///./bundles/invoice/alternate/invoice-body.service.js","webpack:///./bundles/invoice/alternate/invoice-columns.service.js","webpack:///./bundles/invoice/alternate/invoice-header.service.js","webpack:///./bundles/invoice/alternate/invoice-styles.service.js","webpack:///./bundles/invoice/common/invoice-helper.service.js"],"names":["index","$injector","loadNewModules","invoiceStyles","name","invoiceColumns","invoiceHeader","invoiceBody","styles","get","columns","header","body","angular","module","invoiceHelper","factory","$translate","$filter","dataToReport","config","params","data","resources","report","i","include","rows","generateGroup","getGroup","items","type","taxTotals","getTaxTotals","length","push","content","instant","getChargesTotal","colSpan","h1","forEach","taxTotal","amount","getBalance","getLogoSize","height","_startY","startY","group","halign","h2","item","idx","col","dataKey","total","h3","$rootScope","cols","_title","cellWidth","pdf","v","csv","minCellWidth","translate","$on","title","args","doc","str","x","y","pageWidth","internal","pageSize","width","pageHeight","margin","settings","padding","copy","framePadding","top","pageMargins","setFont","getFont","fontName","setTextColor","textColor","setLineWidth","setDrawColor","rect","left","right","bottom","setFillColor","logo","addImage","setFontSize","company","wlLinks","companyName","getTextWidth","text","pageCount","date","endDate","userCompany","address","street","city","state","zip","join","userName","orderId","reportStyles","helper","bodyStyles","lineWidth","lineColor","cellPadding","fontSize","headStyles","fontStyle","valign","fillColor","textTransform","knownTypes","types","id","_name","filter","indexOf","reduce","sum","taxes","tax","taxName","taxAmount","totalCharges","balance","dx","dy"],"mappings":"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","file":"invoice-alternate~._bundles_invoice_a.js?_rev=b958a1dd79b0238dcfe5","sourcesContent":["import invoiceStyles from './invoice-styles.service';\nimport invoiceColumns from './invoice-columns.service';\nimport invoiceHeader from './invoice-header.service';\nimport invoiceBody from './invoice-body.service';\n\nconst index = ['$injector', function index($injector) {\n\n  $injector.loadNewModules([\n    invoiceStyles.name,\n    invoiceColumns.name,\n    invoiceHeader.name, invoiceBody.name]);\n\n  return {\n    styles: $injector.get('alternateInvoiceStyles'),\n    columns: $injector.get('alternateInvoiceColumns'),\n    header: $injector.get('alternateInvoiceHeader'),\n    body: $injector.get('alternateInvoiceBody'),\n  };\n}];\n\nexport default index;\n","import invoiceHelper from '../common/invoice-helper.service';\n\nexport default angular.module('deskworks.alternateInvoiceBody', [\n  invoiceHelper.name,\n])\n\n  .factory('alternateInvoiceBody', function($translate, $filter, invoiceHelper) {\n\n    return dataToReport;\n\n    function dataToReport({ config, params, data, columns, resources }) {\n      const { styles } = config;\n      const report = {\n        columns: columns.filter(i => i.include),\n        rows: [],\n        styles: [],\n      };\n\n      generateGroup(invoiceHelper.getGroup({ items: data.items, type: 'recurring' }));\n      generateGroup(invoiceHelper.getGroup({ items: data.items, type: 'rental' }));\n      generateGroup(invoiceHelper.getGroup({ items: data.items, type: 'deposit' }));\n      generateGroup(invoiceHelper.getGroup({ items: data.items, type: 'other' }));\n\n      const taxTotals = invoiceHelper.getTaxTotals(data.items);\n      if (taxTotals.length) {\n        report.rows.push([{\n          content: $translate.instant('INVOICE.CHARGES') + ': ' + $filter('ncurrency')(invoiceHelper.getChargesTotal(data.items)),\n          colSpan: report.columns.length,\n        }]);\n        report.styles.push(styles.h1);\n\n        taxTotals.forEach(taxTotal => {\n          report.rows.push([{\n            content: taxTotal.name + ': ' + $filter('ncurrency')(taxTotal.amount),\n            colSpan: report.columns.length,\n          }]);\n          report.styles.push(styles.h1);\n        });\n      }\n\n      generateGroup(invoiceHelper.getGroup({ items: data.items, type: 'payment' }));\n      generateGroup(invoiceHelper.getGroup({ items: data.items, type: 'refund' }));\n\n      report.rows.push([{\n        content: $translate.instant('INVOICE.TOTAL') + ': ' + $filter('ncurrency')(invoiceHelper.getBalance(data.items)),\n        colSpan: report.columns.length,\n      }]);\n      report.styles.push(styles.h1);\n\n      // Increase startY by logo height\n      const { height } = invoiceHelper.getLogoSize({ resources });\n      if (!styles._startY) styles._startY = styles.startY;\n      styles.startY = styles._startY + height - 25;\n\n      return report;\n\n      /**\n       * Generate group of order items obtained from invoiceHelper.getGroup\n       * @param group\n       */\n      function generateGroup(group) {\n        if (!group.items || !group.items.length) return;\n\n        report.rows.push([{ content: group.name, colSpan: report.columns.length, styles: { halign: 'left' } }]);\n        report.styles.push(styles.h2);\n\n        group.items.forEach((item, idx) => {\n          report.rows.push(report.columns.map(col => item[col.dataKey]));\n          report.styles.push(null);\n        });\n\n        report.rows.push([{\n          content: $translate.instant('INVOICE.TOTAL') + ' ' + group.name + ': ' + $filter('ncurrency')(group.total),\n          colSpan: report.columns.length,\n        }]);\n        report.styles.push(styles.h3);\n      }\n    }\n  });\n","/**\n * Columns for Invoice\n */\nexport default angular.module('deskworks.alternateInvoiceColumns', [])\n  .factory('alternateInvoiceColumns', function($rootScope, $filter, $translate) {\n    const cols = [\n      {\n        dataKey: 'date', _title: 'INVOICE.COLUMNS.DATE_ADDED', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('date')(v, 'mediumDate'), csv: v => $filter('date')(v, 'shortDate'),\n      },\n      {\n        dataKey: 'name', _title: 'INVOICE.COLUMNS.ITEM', include: true,\n        styles: { minCellWidth: 110 },\n      },\n      {\n        dataKey: 'description', _title: 'INVOICE.COLUMNS.DESCRIPTION', include: true,\n        styles: { minCellWidth: 140 },\n      },\n      {\n        dataKey: 'price', _title: 'INVOICE.COLUMNS.PRICE', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n      {\n        dataKey: 'qty', _title: 'INVOICE.COLUMNS.QUANTITY', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('round')(v), csv: v => $filter('round')(v),\n      },\n      {\n        dataKey: 'amount', _title: 'INVOICE.COLUMNS.AMOUNT', include: true,\n        styles: { cellWidth: 'wrap', halign: 'right' },\n        pdf: v => $filter('ncurrency')(v), csv: v => $filter('ncurrency')(v),\n      },\n    ];\n\n    translate();\n    $rootScope.$on('$setTranslationsSuccess', translate);\n    function translate() { cols.forEach(col => { col.title = $translate.instant(col._title); }); }\n\n    return cols;\n  });\n","import invoiceHelper from '../common/invoice-helper.service';\n\n/**\n * PDF Invoice Header\n */\nexport default angular.module('deskworks.alternateInvoiceHeader', [\n  invoiceHelper.name,\n])\n\n  .factory('alternateInvoiceHeader', ($rootScope, $filter, $translate, invoiceHelper) => {\n\n    return header;\n\n    function header(args) {\n      const { config, doc, data, resources } = args;\n      const { styles } = config;\n      // const center = resources.centers.find(i => i.id === config.centerId);\n\n      let str, x, y;\n      const pageWidth = doc.internal.pageSize.width;\n      const pageHeight = doc.internal.pageSize.height;\n\n      const { width, height } = invoiceHelper.getLogoSize({ resources });\n\n      const margin = data.settings.margin;\n      const padding = angular.copy(styles.framePadding);\n      padding[0] += height;\n      margin.top = styles.pageMargins[0] + height;\n\n      doc.setFont(doc.getFont().fontName, 'normal');\n      doc.setTextColor(styles.header.textColor);\n\n      /**\n       * Frame\n       */\n      doc.setLineWidth(1);\n      doc.setDrawColor(0, 0, 0);\n      doc.rect(margin.left - padding[3], margin.top - padding[0],\n        pageWidth - margin.right - margin.left + padding[3] + padding[1],\n        pageHeight - margin.top - margin.bottom + padding[0] + padding[2], 'S');\n\n      doc.setFillColor(255, 255, 255); // white frame space\n      doc.rect(pageWidth / 2 - 100, margin.top - padding[0] - 1, 200, 2, 'F');\n\n      /**\n       * Logo\n       */\n      if (resources.logo) {\n        x = pageWidth / 2; y = margin.top - padding[0] - 14;\n        doc.addImage(resources.logo.data, x - width / 2, y, width, height);\n      }\n\n      /**\n       * Footer\n       */\n      doc.setFontSize(9);\n      str = $translate.instant('INVOICE.ALTERNATE.FOOTER', { company: $rootScope.wlLinks.companyName });\n      x = doc.getTextWidth(str) + 25;\n      doc.setFillColor(255, 255, 255); // white frame space\n      doc.rect(pageWidth / 2 - x / 2, pageHeight - margin.bottom + padding[2] - 1, x, 2, 'F');\n\n      x = (pageWidth - doc.getTextWidth(str)) / 2; y = pageHeight - margin.bottom + padding[2] + 3;\n      doc.text(str, x, y);\n\n      if (data.pageCount !== 1) return; // invoice details on 1st page only\n\n      x = margin.left; y = margin.top + 10;\n      doc.setFontSize(11); doc.setFont(doc.getFont().fontName, 'normal');\n\n      /**\n       * Details\n       */\n      // Date\n      str = $translate.instant('INVOICE.HEADER.DATE') + ': ' + $filter('date')(config.date || config.endDate, 'mediumDate');\n      doc.text(str, x, y);\n      y += 26;\n\n      // Company\n      doc.text(config.userCompany || '', x, y);\n      y += 13;\n\n      // Address\n      if (config.address) {\n        doc.text(config.address.street || '', x, y);\n        y += 13;\n        doc.text([config.address.city, config.address.state.name || config.address.state, config.address.zip].join(', '), x, y);\n        y += 26;\n      }\n\n      /**\n       * Text\n       */\n      doc.text('Dear ' + (config.userName || '') + ',', x, y);\n      y += 26;\n      doc.text('This is your invoice for membership charges for the coming month.', x, y);\n      y += 26;\n      // doc.text('Your credit card ending in XXXX-XXXX-XXXX-XXXX will be charged in a few days.', x, y);\n      doc.text('Your billing method will be charged in a few days.', x, y);\n      y += 26;\n      doc.setFont(doc.getFont().fontName, 'bold');\n      doc.text('ORDER ID: ' + config.orderId, x, y);\n      // y += 26;\n      doc.setFont(doc.getFont().fontName, 'normal');\n    }\n  });\n","import reportStyles from 'shared/reports/services/report-styles.service';\n/**\n * invoiceStyles service - defines PDF styling for invoices\n */\nexport default angular.module('deskworks.alternateInvoiceStyles', [\n  'deskworks.helper',\n  reportStyles.name,\n])\n  .factory('alternateInvoiceStyles', function(helper, reportStyles) {\n\n    const styles = angular.copy(reportStyles);\n\n    styles.framePadding = [12, 12, 12, 12];\n    styles.pageMargins = [52, 40, 40, 40];\n    styles.startY = 250;\n    styles.header.textColor = '#000000';\n\n    styles.bodyStyles.lineWidth = 1;\n    styles.bodyStyles.lineColor = 0;\n    styles.bodyStyles.cellPadding = 8;\n    styles.bodyStyles.fontSize = 11;\n\n    styles.headStyles = {\n      fontSize: 11,\n      fontStyle: 'bold',\n      valign: 'middle',\n      fillColor: null,\n      textColor: 0,\n      cellPadding: 8,\n      textTransform: null,\n      lineWidth: 1,\n      lineColor: 0,\n    };\n\n    styles.h1 = {\n      halign: 'right',\n      fontStyle: 'bold',\n    };\n\n    styles.h2 = {\n      fontStyle: 'bold',\n    };\n\n    styles.h3 = {\n      halign: 'right',\n    };\n\n    return styles;\n  });\n","export default angular.module('deskworks.invoiceHelper', [])\n\n  .factory('invoiceHelper', function($translate, $filter) {\n    const knownTypes = ['recurring', 'rental', 'deposit', 'payment', 'refund']; // 'other' and unknown -> other section\n    const types = [\n      { id: 'recurring', _name: 'INVOICE.RECURRING', filter: i => i.type === 'recurring' },\n      { id: 'rental', _name: 'INVOICE.RENTAL', filter: i => i.type === 'rental' },\n      { id: 'deposit', _name: 'INVOICE.DEPOSITS', filter: i => i.type === 'deposit' },\n      { id: 'other', _name: 'INVOICE.OTHER_CHARGES', filter: i => knownTypes.indexOf(i.type) < 0 },\n      { id: 'payment', _name: 'INVOICE.PAYMENTS', filter: i => i.type === 'payment' },\n      { id: 'refund', _name: 'INVOICE.REFUNDS', filter: i => i.type === 'refund' },\n    ];\n\n    return {\n      getGroup,\n      getChargesTotal,\n      getTaxTotals,\n      getBalance,\n      getLogoSize,\n    };\n\n    /**\n     * Get items group with name and total\n     * @param items\n     * @param type\n     * @returns {{total: *, name: (string|Object), items: *}}\n     */\n    function getGroup({ items, type }) {\n      type = types.find(i => i.id === type);\n      items = items.filter(i => i.include && type.filter(i));\n\n      return {\n        name: $translate.instant(type._name),\n        items,\n        total: items.reduce((sum, i) => sum + (+i.amount), 0),\n      };\n    }\n\n    /**\n     * Get total for all charges\n     * @param items\n     * @returns {*}\n     */\n    function getChargesTotal(items) {\n      return items\n        .filter(item => item.include && item.type !== 'payment' && item.type !== 'refund')\n        .reduce((sum, item) => sum + (+item.amount || 0), 0);\n    }\n\n    /**\n     * Get tax totals\n     * @param items\n     * @returns {Array}\n     */\n    function getTaxTotals(items) {\n      const taxTotals = [];\n\n      items.filter(item => item.include && item.type !== 'payment' && item.type !== 'refund')\n        .forEach(item => {\n          angular.forEach(item.taxes, (tax, idx) => {\n            if (taxTotals.length <= idx) taxTotals.push({ name: tax.taxName, amount: 0 });\n            taxTotals[idx].amount += +tax.taxAmount;\n          });\n        });\n\n      return taxTotals;\n    }\n\n    /**\n     * Get total balance\n     * @param items\n     * @returns {*}\n     */\n    function getBalance(items) {\n      const totalCharges = items\n        .filter(item => item.include && item.type !== 'payment' && item.type !== 'refund')\n        .reduce((sum, item) => sum + (+item.amount || 0), 0);\n\n      let balance = totalCharges + items\n        .reduce((sum, item) => item.include && (item.type === 'payment' || item.type === 'refund') ? sum + (+item.amount || 0) : sum, 0);\n\n      getTaxTotals(items).forEach(taxTotal => { balance += taxTotal.amount || 0; });\n\n      return balance;\n    }\n\n    /**\n     * Get scaled logo size\n     * @param resources\n     * @returns {{ width: number, height: number }}\n     */\n    function getLogoSize({ resources }) {\n      let width = 0, height = 0;\n      if (resources.logo) {\n        width = 140; height = 80;\n        const dx = width / resources.logo.width;\n        const dy = height / resources.logo.height;\n        if (dx <= dy) height *= dx / dy; else width *= dy / dx;\n      }\n      return { width, height };\n    }\n  });\n"],"sourceRoot":""}