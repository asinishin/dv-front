(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"+qiB":function(e,t){e.exports='<label class=ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.BY_PERIOD></span></ff-label> <ff-select ff-model=$ctrl.ngModel ff-options="opt.id as opt.name for opt in $ctrl.optsPeriod"></ff-select> </label> '},"//ZJ":function(e,t,r){"use strict";r.r(t);r("y89P"),r("X5mX");t.default=angular.module("deskworks.reports.reportDates",["deskworks.helper"]).directive("reportDates",["$compile","$templateCache",function(e,t){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportDatesCtrl as $ctrl",bindToController:{ngModel:"<",embed:"@"},link:function(r,n,o,a,l){l((function(o,a){var l=e(t.get("directives/report-dates.tpl.html"))(r);angular.element(l[0].querySelector?l[0].querySelector(".ff-panel-body"):l).append(o),n.after(l)}))}}}]).controller("ReportDatesCtrl",["$scope","$location","$filter","state","helper",function(e,t,r,n,o){var a=this;a.$onInit=function(){!1!==a.ngModel.fromDate&&(e.$watch((function(){return t.search().fromDate}),(function(e){var t=r("toDate")(e);a.ngModel.fromDate=moment.isMoment(t)&&!a.ngModel.fromDate.isSame(t)?t:a.ngModel.fromDate})),e.$watch("$ctrl.ngModel.fromDate",(function(e){moment.isMoment(e)&&t.search("fromDate",r("date")(e,"yyyy-MM-dd")).replace()}))),!1!==a.ngModel.toDate&&(e.$watch((function(){return t.search().toDate}),(function(e){var t=r("toDate")(e);a.ngModel.toDate=moment.isMoment(t)&&!a.ngModel.toDate.isSame(t)?t:a.ngModel.toDate})),e.$watch("$ctrl.ngModel.toDate",(function(e){moment.isMoment(e)&&t.search("toDate",r("date")(e,"yyyy-MM-dd")).replace()})))}}])},"/MGB":function(e,t,r){var n={"./accounts-receivable-report/accounts-receivable-report.tpl.html":"/cev","./availability-report/availability-report.tpl.html":"ZfFK","./check-in-report/check-in-report.tpl.html":"TVyk","./credit-balance-report/credit-balance-report.tpl.html":"lfjW","./deposit-and-tax-report/deposit-and-tax-report.tpl.html":"AOdW","./deposit-transaction-report/deposit-transaction-report.tpl.html":"HIxv","./directives/report-by-period.tpl.html":"+qiB","./directives/report-columns.tpl.html":"LLH2","./directives/report-dates.tpl.html":"pEUA","./directives/report-options.tpl.html":"9W37","./directives/report-order-by.tpl.html":"73rf","./directives/report-owner-region.tpl.html":"U+0Z","./income-by-item-report/income-by-item-report.tpl.html":"UUPn","./income-report/income-report.tpl.html":"pvmN","./invoice/invoice.tpl.html":"aoB6","./mailbox-report/mailbox-report.tpl.html":"iTQj","./member-statement/member-statement.tpl.html":"C/0G","./member-usage-report/member-usage-report.tpl.html":"lKYt","./membership-report/membership-report.tpl.html":"EKM0","./pass-usage-report/pass-usage-report.tpl.html":"r4Q0","./passport-reservation-usage-report/passport-reservation-usage-report.tpl.html":"UxRA","./price-list-report/price-list-report.tpl.html":"CR4+","./recurring-billing-churn-report/recurring-billing-churn-report.tpl.html":"nabW","./recurring-billing-report/recurring-billing-report.tpl.html":"GGg2","./rent-roll-report/rent-roll-report.tpl.html":"tmk0","./reservation-report/reservation-report.tpl.html":"+1+s","./reservation-usage-report/reservation-usage-report.tpl.html":"BEjt","./reservation-utilization-report/reservation-utilization-report.tpl.html":"nJHl","./revenue-forecast-report/revenue-forecast-report.tpl.html":"nUUl","./security-deposit-report/security-deposit-report.tpl.html":"kJoc","./write-off-report/write-off-report.tpl.html":"aHVT"};function o(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id="/MGB"},"/XlY":function(e,t,r){"use strict";r.r(t);r("y89P"),r("X5mX");t.default=angular.module("deskworks.reportByPeriod",["deskworks.helper","deskworks.reports.optsReportByPeriod"]).directive("reportByPeriod",["$compile","$templateCache",function(e,t){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportByPeriodCtrl as $ctrl",bindToController:{ngModel:"="},link:function(r,n,o,a,l){l((function(o,a){var l=e(t.get("directives/report-by-period.tpl.html"))(r);angular.element(l[0].querySelector?l[0].querySelector(".ff-panel-body"):l).append(o),n.after(l)}))}}}]).controller("ReportByPeriodCtrl",["$scope","$location","state","helper","optsReportByPeriod",function(e,t,r,n,o){var a=this;a.optsPeriod=o,a.$onInit=function(){e.$watch((function(){return t.search().byPeriod}),(function(e){a.ngModel=e||a.ngModel||a.optsPeriod[0].id})),e.$watch("$ctrl.ngModel",(function(e){t.search("byPeriod",e).replace()}))}}])},"/cev":function(e,t){e.exports="<div id=accountsReceivableReport class=gutter-v> <form name=formAccountsReceivableReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 65%', md: '0 0 50%'}\"> <div class=gutter-v> <report-dates ng-model=vm.config.reportDates></report-dates> <report-columns ng-model=vm.config.reportColumns></report-columns> </div> </div> <div flex=\"{lg: '0 0 35%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions> <report-order-by ng-model=vm.config.orderBy report-columns=vm.config.reportColumns.columns></report-order-by> <ff-static> <label> <ff-checkbox ff-model=vm.config.credits><span translate=ACCOUNTS_RECEIVABLE_REPORT.DISPLAY_CREDITS></span></ff-checkbox> </label> </ff-static> </report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},"2+c3":function(e,t,r){"use strict";r.r(t);r("y89P");var n=r("ipr/"),o=r.n(n),a=r("6RpP"),l=r.n(a),s=r("NOor"),i=r.n(s),c=r("WSeP"),u=r.n(c),d=r("yCd9"),f=r.n(d),p=r("hsT8"),m=r.n(p);t.default=angular.module("deskworks.reports.depositTransactionReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.depositTransactionReport.service","deskworks.reports.depositTransactionReportColumns"]).controller("DepositTransactionReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","DepositTransactionReport","depositTransactionReportColumns","banks","centers",function(e,t,r,n,a,s,c,d,p,g,v,h,R){var y,O=this;function T(e){var t,r,a,s,c={columns:m()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:[],styles:[]},p=f()(r=Array.apply(null,new Array(c.columns.length))).call(r,(function(e){return!1}));return u()(a=e.reportData).call(a,(function(t,r){var a,m,g,v,h;(s=i()(a=c.columns).call(a,(function(e){return"total"===e.dataKey})))>=0&&(c.rows.push(l()(g=l()(v=l()(h=[t.date]).call(h,o()(p).call(p,0,Math.max(s-2,0)))).call(v,s>1?[n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.DAILY")+":",t.total]:[t.total])).call(g,o()(p).call(p,0,p.length-s-1))),c.styles.push(d.h1));u()(m=t.billingMethods).call(m,(function(t){var r,a,m,g,v,h;(s=i()(r=c.columns).call(r,(function(e){return"subtotal"===e.dataKey})))>=0&&(c.rows.push(0===s?[t.subtotal]:l()(g=l()(v=l()(h=[t.name+" "+n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.DEPOSITS")]).call(h,o()(p).call(p,0,Math.max(s-3,0)))).call(v,s>2?[t.name+" "+n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",!1,t.subtotal]:2===s?[t.name+" "+n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",t.subtotal]:1===s?[t.subtotal]:[])).call(g,o()(p).call(p,0,p.length-s-1))),c.styles.push(d.h2));var R=O.reportBuilder.sortData(l()([]).apply([],f()(a=t.centers).call(a,(function(e){return e.payments}))),e.orderBy);u()(R).call(R,(function(e,t){var r;c.rows.push(f()(r=c.columns).call(r,(function(t){return"subtotal"!==t.dataKey&&"total"!==t.dataKey&&e[t.dataKey]}))),c.styles.push(t%2?null:d.rowOdd)})),u()(m=t.centers).call(m,(function(e){var t,r,a;(s=i()(t=c.columns).call(t,(function(e){return"subtotal"===e.dataKey})))>=0&&c.rows.push(l()(r=l()(a=o()(p).call(p,0,Math.max(s-2,0))).call(a,s>2?[e.name+" "+n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",!1,e.subtotal]:s>0?[e.name+" "+n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",e.subtotal]:[e.subtotal])).call(r,o()(p).call(p,0,p.length-s-1)));c.styles.push(d.h3)})),c.rows.push(o()(p).call(p)),c.styles.push(null)}))})),c}O.config={reportName:n.instant("DEPOSIT_TRANSACTION_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:v},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return g.query({bankId:O.config.reportOptions.bankId,centerId:O.config.reportOptions.centerId||null,fromDate:r("date")(O.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(O.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:O.config.reportOwnerRegion.ownerId,regionId:O.config.reportOwnerRegion.regionId}).$promise}},a.setPageTitle(O.config.reportName),O.config.reportDates.fromDate.subtract(1,"M").date(1),O.config.reportDates.toDate.date(0),O.reportBuilder=new p(O.config),e.$watch("vm.config.reportOptions.bankId",(function(e){e&&(O.centers=m()(R).call(R,(function(t){return t.bankId===e})),O.centers.unshift({id:0,name:"All Centers"}),s.findByKeyValue(O.centers,"id",O.config.reportOptions.centerId)||(O.config.reportOptions.centerId=O.centers[0].id,a.setParam("centerId",O.config.reportOptions.centerId),a.replace()))})),e.$watch((function(){return{reportOptions:O.config.reportOptions,reportDates:O.config.reportDates,reportColumns:O.config.reportColumns,reportOwnerRegion:O.config.reportOwnerRegion,orderBy:O.config.orderBy}}),(function(e,r){y&&(t.cancel(y),y=null),y=t((function(){if(O.pdf=null,!angular.isUndefined(O.config.reportOptions.bankId)){var t=e.reportDates.fromDate,n=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(O.config.reportData=null),t=e.reportDates.toDate,n=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(O.config.reportData=null),e.reportOptions.bankId!==r.reportOptions.bankId&&(O.config.reportData=null),O.reportBuilder.buildPdf(T).then((function(e){O.pdf=e}))}}),100)}),!0),O.downloadPdf=function(){O.pdf&&c(O.pdf,O.reportBuilder.getReportFileName("pdf"))},O.downloadCsv=function(){O.pdf&&c(O.reportBuilder.buildCsv(T),O.reportBuilder.getReportFileName("csv"))}}])},"2zAN":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.incomeByItemReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("IncomeByItemReport",["$resource","$filter","datesDeserializer","deskworksConfig",function(e,t,r,n){var o=r(["productCategories.products.date"]),a=e(n.getApiAbsUrl("/centers/:centerId/income-by-item-reports"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,o]}});return{query:function(e){return a.query({centerId:e.centerId||0,fromDate:t("date")(e.fromDate,"yyyy-MM-dd"),toDate:t("date")(e.toDate,"yyyy-MM-dd")}).$promise}}}])},"4AnZ":function(e,t,r){"use strict";r.r(t);r("GNLJ");t.default=angular.module("pdfPreview",[]).directive("pdfPreview",["$window","helper",function(e,t){return{restrict:"A",scope:!0,template:'<iframe ng-hide="ie"></iframe><ff-info class="text-danger" ng-if="ie"><ff-icon sense="warning"></ff-icon> Microsoft Edge & Internet Explorer don\'t support live PDF preview. You can download the PDF or use another browser to have live preview, e.g. Chrome/Firefox/Opera/Safari.</ff-info>',compile:function(r,n){var o=r.parent().parent();return t.isMobile()&&o.hasClass("flex-form")?(r.parent().parent().css("display","none"),function(){}):t.isIE()?function(e,t,r){e.ie=!0}:(r.addClass("pdf-preview"),function(t,r,n){var o,a=r.children(),l=angular.element('<div class="ff-dimmer ff-spin"></div>');l.on("click",(function(e){e.stopPropagation()})),a.on("load",(function(){angular.element(l).remove(),r.removeClass("ff-dim")})),t.$watch(n.pdfPreview,(function(t){r.append(l),r.addClass("ff-dim"),o&&(e.URL.revokeObjectURL(o),o=null),t&&(o=e.URL.createObjectURL(t),a[0].src=o)})),t.$on("$destroy",(function(){o&&(e.URL.revokeObjectURL(o),o=null)}))})}}}])},"7/Y1":function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.checkInReportTotalsColumns",[]).factory("checkInReportTotalsColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userName",_title:"CHECK_IN_REPORT.COLUMNS.NAME"},{dataKey:"userCompany",_title:"CHECK_IN_REPORT.COLUMNS.COMPANY"},{dataKey:"totalHoursTimeRange",_title:"CHECK_IN_REPORT.COLUMNS.TOTAL_HOURS_TIME_RANGE",halign:"right",pdf:function(e){return t("hoursMinutes")(e)},csv:function(e){return t("hoursMinutes")(e)}},{dataKey:"date",_title:"CHECK_IN_REPORT.COLUMNS.DATE",halign:"right",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"totalHoursDay",_title:"CHECK_IN_REPORT.COLUMNS.TOTAL_HOURS_DAY",halign:"right",pdf:function(e){return t("hoursMinutes")(e)},csv:function(e){return t("hoursMinutes")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},"73rf":function(e,t){e.exports='<label class=ff-row ng-repeat="level in $ctrl.levels track by $index"> <ff-label flex="0 0 100px"> <span translate=REPORTS.COLUMNS.ORDER_BY ng-if=!$index></span> <span translate=REPORTS.COLUMNS.THEN_ORDER_BY ng-if=$index style=font-size:.925em></span> </ff-label> <ff-select ff-model=level.order ff-options="col.dataKey as col.title for col in level.cols"></ff-select> </label> '},"8g2Y":function(e,t,r){var n={"./accounts-receivable-report/accounts-receivable-report-columns.service.js":"QU59","./accounts-receivable-report/accounts-receivable-report.controller.js":"Ytnt","./accounts-receivable-report/accounts-receivable-report.service.js":"xU/f","./availability-report/availability-report-columns.service.js":"vopJ","./availability-report/availability-report.controller.js":"TGNl","./availability-report/availability-report.service.js":"nkhl","./check-in-report/check-in-report-bar-chart.service.js":"cjYI","./check-in-report/check-in-report-columns.service.js":"U+9+","./check-in-report/check-in-report-totals-columns.service.js":"7/Y1","./check-in-report/check-in-report.controller.js":"ynEu","./check-in-report/check-in-report.service.js":"Gago","./credit-balance-report/credit-balance-report-columns.service.js":"h5Ea","./credit-balance-report/credit-balance-report.controller.js":"kCKf","./credit-balance-report/credit-balance-report.service.js":"Iitq","./deposit-and-tax-report/deposit-and-tax-report-columns.service.js":"9Ui5","./deposit-and-tax-report/deposit-and-tax-report.controller.js":"WCm8","./deposit-and-tax-report/deposit-and-tax-report.service.js":"R1ro","./deposit-transaction-report/deposit-transaction-report-columns.service.js":"xWoj","./deposit-transaction-report/deposit-transaction-report.controller.js":"2+c3","./deposit-transaction-report/deposit-transaction-report.service.js":"ukw3","./directives/chart.directive.js":"u7OF","./directives/pdf-preview.directive.js":"4AnZ","./directives/report-by-period.directive.js":"/XlY","./directives/report-columns.directive.js":"MKNM","./directives/report-dates.directive.js":"//ZJ","./directives/report-options.directive.js":"Gf5d","./directives/report-order-by.directive.js":"ZimX","./directives/report-owner-region.directive.js":"OeSc","./income-by-item-report/income-by-item-report-chart.service.js":"UQFN","./income-by-item-report/income-by-item-report-columns.service.js":"sSbM","./income-by-item-report/income-by-item-report-data.service.js":"F6ya","./income-by-item-report/income-by-item-report.controller.js":"MmAi","./income-by-item-report/income-by-item-report.service.js":"2zAN","./income-by-item-report/income-by-member-report-columns.service.js":"kUla","./income-by-item-report/income-by-member-report-data.service.js":"uFJl","./income-by-item-report/income-by-order-report-columns.service.js":"UMDU","./income-by-item-report/income-by-order-report-data.service.js":"Grkc","./income-report/income-report-columns.service.js":"Du13","./income-report/income-report.controller.js":"vtWt","./income-report/income-report.service.js":"Mvrh","./invoice/invoice-columns.service.js":"pfDI","./invoice/invoice-header.service.js":"grn2","./invoice/invoice-styles.service.js":"E9xF","./invoice/invoice.controller.js":"bm4+","./invoice/invoice.service.js":"zl1W","./mailbox-report/mailbox-report-columns.service.js":"IWno","./mailbox-report/mailbox-report.controller.js":"HFgu","./mailbox-report/mailbox-report.service.js":"L+wq","./member-statement/member-statement-columns.service.js":"haNf","./member-statement/member-statement.controller.js":"SeF/","./member-statement/member-statement.service.js":"aRIa","./member-usage-report/member-usage-report-columns.service.js":"rlfb","./member-usage-report/member-usage-report.controller.js":"U9c4","./member-usage-report/member-usage-report.service.js":"PjE5","./membership-report/membership-report-columns.service.js":"3DDD","./membership-report/membership-report.controller.js":"2S09","./membership-report/membership-report.service.js":"8scq","./pass-usage-report/pass-usage-report-columns.service.js":"wASb","./pass-usage-report/pass-usage-report.controller.js":"KMep","./pass-usage-report/pass-usage-report.service.js":"xl4I","./passport-reservation-usage-report/passport-reservation-usage-report-columns.service.js":"o/Kf","./passport-reservation-usage-report/passport-reservation-usage-report.controller.js":"Iy44","./passport-reservation-usage-report/passport-reservation-usage-report.service.js":"iEZ8","./price-list-report/price-list-report-columns.service.js":"Mmgn","./price-list-report/price-list-report.controller.js":"6avE","./price-list-report/price-list-report.service.js":"SoPU","./recurring-billing-churn-report/recurring-billing-churn-report-columns.service.js":"b2oW","./recurring-billing-churn-report/recurring-billing-churn-report.controller.js":"UbAC","./recurring-billing-churn-report/recurring-billing-churn-report.service.js":"liLb","./recurring-billing-report/recurring-billing-report-columns.service.js":"LM7I","./recurring-billing-report/recurring-billing-report.controller.js":"ZfRm","./recurring-billing-report/recurring-billing-report.service.js":"dd2W","./rent-roll-report/rent-roll-report-columns.service.js":"VbF8","./rent-roll-report/rent-roll-report.controller.js":"+aob","./rent-roll-report/rent-roll-report.service.js":"Afy5","./reservation-report/reservation-report-columns.service.js":"vRPl","./reservation-report/reservation-report.controller.js":"LJmX","./reservation-report/reservation-report.service.js":"IWz8","./reservation-usage-report/reservation-usage-report-columns.service.js":"KkfT","./reservation-usage-report/reservation-usage-report.controller.js":"qctg","./reservation-usage-report/reservation-usage-report.service.js":"piGw","./reservation-utilization-report/reservation-utilization-actual-expected-aggregate.service.js":"7ZQE","./reservation-utilization-report/reservation-utilization-actual-expected-chart.service.js":"vRjO","./reservation-utilization-report/reservation-utilization-actual-expected-columns.service.js":"5q+n","./reservation-utilization-report/reservation-utilization-actual-expected-report.service.js":"3Ei7","./reservation-utilization-report/reservation-utilization-detailed-actual-aggregate.service.js":"Amco","./reservation-utilization-report/reservation-utilization-detailed-actual-chart.service.js":"Tx5W","./reservation-utilization-report/reservation-utilization-detailed-actual-columns.service.js":"oMHk","./reservation-utilization-report/reservation-utilization-detailed-actual-report.service.js":"ycie","./reservation-utilization-report/reservation-utilization-report.controller.js":"1THZ","./reservation-utilization-report/reservation-utilization-report.service.js":"qhd7","./revenue-forecast-report/revenue-forecast-chart.service.js":"4DcZ","./revenue-forecast-report/revenue-forecast-data.service.js":"Jqji","./revenue-forecast-report/revenue-forecast-report-columns.service.js":"rrwk","./revenue-forecast-report/revenue-forecast-report.controller.js":"hUWN","./revenue-forecast-report/revenue-forecast-report.service.js":"Zdj5","./security-deposit-report/security-deposit-report-columns.service.js":"UUql","./security-deposit-report/security-deposit-report.controller.js":"hlyU","./security-deposit-report/security-deposit-report.service.js":"JAJz","./services/b64.service.js":"zvMh","./services/csv-make.service.js":"T3vP","./services/file-saver.service.js":"9LJv","./services/jspdf.service.js":"GO8p","./services/logo.service.js":"bHMQ","./services/opts-paper-size.service.js":"8d/h","./services/opts-report-by-period.service.js":"/1cb","./services/report-builder.service.js":"5+k5","./services/report-footer.service.js":"rjaI","./services/report-group-by.service.js":"92Gs","./services/report-header.service.js":"3i5X","./services/report-helper.service.js":"yt4b","./services/report-sort.service.js":"Xai3","./services/report-styles.service.js":"UwMB","./services/system-colors.service.js":"Yes4","./write-off-report/write-off-report-columns.service.js":"h0ZB","./write-off-report/write-off-report.controller.js":"5ual","./write-off-report/write-off-report.service.js":"fKuI"};function o(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id="8g2Y"},"9Ui5":function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.depositAndTaxReportColumns",[]).factory("depositAndTaxReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userName",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.NAME",include:!0,defaultOrder:!0},{dataKey:"userCompany",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.COMPANY",include:!0},{dataKey:"orderId",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.ORDER_ID",include:!0,styles:{halign:"right"}},{dataKey:"productName",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.ITEM",include:!0},{dataKey:"productCode",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.ITEM_CODE",include:!0,styles:{halign:"right"}},{dataKey:"amountTaxable",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.TAXABLE_AMOUNT",include:!0,styles:{halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"amountNonTaxable",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.NON_TAXABLE_AMOUNT",include:!0,styles:{halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"subtotal",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.SUBTOTAL",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"tax",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.TAX",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"DEPOSIT_AND_TAX_REPORT.COLUMNS.TOTAL",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},"9W37":function(e,t){e.exports='<ff-panel> <ff-panel-header><span translate=REPORTS.OPTIONS.HEADER></span></ff-panel-header> <label class=ff-row ng-if=$ctrl.banks> <ff-label flex="0 0 100px"><span translate=REPORTS.OPTIONS.BANK></span></ff-label> <ff-select ff-model=$ctrl.ngModel.bankId ff-options="bank.id as bank.name for bank in $ctrl.banks"></ff-select> </label> <label class=ff-row ng-if="$ctrl.ngModel.centerId !== false && !$ctrl.centers" ng-show="state.getUserCenters().length > 1"> <ff-label flex="0 0 100px"><span translate=REPORTS.OPTIONS.CENTER></span></ff-label> <dw-select-center ff-model=$ctrl.ngModel.centerId ff-option-all="{{$ctrl.allCenters !== false}}"></dw-select-center> </label> <label class=ff-row ng-if="$ctrl.ngModel.centerId !== false && $ctrl.centers" ng-show="state.getUserCenters().length > 1"> <ff-label flex="0 0 100px"><span translate=REPORTS.OPTIONS.CENTER></span></ff-label> <ff-select ff-model=$ctrl.ngModel.centerId ff-options="center.id as center.name for center in $ctrl.centers"></ff-select> </label> <label class=ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.OPTIONS.SIZE></span></ff-label> <ff-select ff-model=$ctrl.ngModel.paperSize> <option ng-repeat="size in $ctrl.optsPaperSize" value={{size.id}}>{{size.name}}</option> </ff-select> </label> <ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.OPTIONS.LAYOUT></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half"> <label flex="0 0 auto"> <ff-radio ff-model=$ctrl.ngModel.paperLayout ff-value="\'p\'"> <span translate=REPORTS.OPTIONS.LAYOUT.PORTRAIT></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio ff-model=$ctrl.ngModel.paperLayout ff-value="\'l\'"> <span translate=REPORTS.OPTIONS.LAYOUT.LANDSCAPE></span> </ff-radio> </label> </div> </ff-static> </ff-row> </ff-panel> '},AOdW:function(e,t){e.exports="<div id=depositAndTaxReport class=gutter-v> <form name=formDepositAndTaxReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <div class=gutter-v> <report-dates ng-model=$ctrl.config.reportDates></report-dates> </div> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <report-options ng-model=$ctrl.config.reportOptions> </report-options> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=$ctrl.downloadPdf() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=$ctrl.downloadCsv() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=$ctrl.pdf></div> </ff-panel> </div> "},Du13:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.incomeReportColumns",[]).factory("incomeReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userCompany",_title:"INCOME_REPORT.COLUMNS.COMPANY",include:!0,styles:{minCellWidth:250}},{dataKey:"userName",_title:"INCOME_REPORT.COLUMNS.NAME",include:!0,styles:{minCellWidth:200}},{dataKey:"date",_title:"INCOME_REPORT.COLUMNS.DATE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"method",_title:"INCOME_REPORT.COLUMNS.METHOD",include:!0,styles:{cellWidth:"wrap"}},{dataKey:"amount",_title:"INCOME_REPORT.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},F6ya:function(e,t,r){"use strict";r.r(t);r("8cZI");var n=r("WSeP"),o=r.n(n),a=r("sSbM");t.default=angular.module("deskworks.reports.incomeByItemReportData",[a.default.name]).factory("incomeByItemReportData",["$filter","$translate","helper","reportStyles","incomeByItemReportColumns",function(e,t,r,n,a){return function(e,l){var s={columns:a,rows:[],styles:[]},i=0;return o()(l).call(l,(function(e){var a,l=0;s.rows.push([!1,t.instant("INCOME_BY_ITEM_REPORT.TOTALS.ITEM_TYPE")+": "+e.name,!1,!1,!1,!1,!1,!1,!1]),s.styles.push(n.h1),o()(a=e.productCategories).call(a,(function(e){var a,i=0;o()(a=e.products).call(a,(function(e,t){s.rows.push([e.code,e.name,e.userName,e.orderNo,e.date,e.qty,e.amount,!1,!1]),s.styles.push(t%2?null:n.rowOdd),i+=r.toNumber(e.amount)})),l+=i;var c=r.join([e.name,"["+e.code+"]",t.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL")]," ");s.rows.push([!1,c,!1,!1,!1,!1,!1,r.round(i),!1]),s.styles.push(n.h2)})),i+=l,s.rows.push([!1,!1,t.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL")+" "+e.name,!1,!1,!1,!1,!1,r.round(l)]),s.styles.push(n.h3),s.rows.push([!1,!1,!1,!1,!1,!1,!1,!1,!1]),s.styles.push(null)})),s.rows.push([!1,!1,!1,!1,!1,!1,!1,t.instant("INCOME_BY_ITEM_REPORT.TOTALS.INCOME")+":",r.round(i)]),s.styles.push(n.h3),s}}])},GNLJ:function(e,t,r){},Gago:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.CheckInReport",["ngResource","datesDeserializer","deskworks.config"]).factory("CheckInReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["checkInTime","checkOutTime"]),a=e(r.getApiAbsUrl("/check-in-report"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,n]}});return{query:function(e){return a.query(e).$promise.then((function(e){return o()(e).call(e,(function(e){e.duration=e.checkOutTime.diff(e.checkInTime)})),e}))}}}])},Gf5d:function(e,t,r){"use strict";r.r(t);r("y89P"),r("X5mX");var n=r("nbuU"),o=r.n(n),a=r("9HME");t.default=angular.module("deskworks.reports.reportOptions",["deskworks.helper","deskworks.reports.optsPaperSize",a.a.name]).directive("reportOptions",["$compile","$templateCache",function(e,t){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportOptionsCtrl as $ctrl",bindToController:{ngModel:"<",centers:"<",allCenters:"<",banks:"<"},link:function(r,n,o,a,l){l((function(o,a){var l=e(t.get("directives/report-options.tpl.html"))(r);angular.element(l[0].querySelector?l[0].querySelector(".ff-panel-body"):l).append(o),n.after(l)}))}}}]).controller("ReportOptionsCtrl",["$scope","$location","state","helper","optsPaperSize",function(e,t,r,n,a){var l=this;l.optsPaperSize=a,l.$onInit=function(){!1!==l.ngModel.centerId&&(e.$watch((function(){return t.search().centerId}),(function(e){l.ngModel.centerId=e||0===e?+e:r.getCurrentCenterId()})),e.$watch("$ctrl.ngModel.centerId",(function(r){r&&e.vm&&e.vm.config&&e.vm.config.reportOwnerRegion&&(e.vm.config.reportOwnerRegion.ownerId=e.vm.config.reportOwnerRegion.regionId=void 0),t.search("centerId",r).replace()}))),l.banks&&(e.$watch((function(){return t.search().bankId}),(function(e){l.ngModel.bankId=e||0===e?+e:l.banks&&l.banks[0]&&l.banks[0].id})),e.$watch("$ctrl.ngModel.bankId",(function(e){t.search("bankId",e).replace()}))),e.$watch((function(){return t.search().paperSize}),(function(e){var t;l.ngModel.paperSize=(o()(t=l.optsPaperSize).call(t,(function(t){return t.id===e}))||l.optsPaperSize[0]).id})),e.$watch("$ctrl.ngModel.paperSize",(function(e){t.search("paperSize",e).replace()})),e.$watch((function(){return t.search().paperLayout}),(function(e){l.ngModel.paperLayout=e||l.ngModel.paperLayout||"l"})),e.$watch("$ctrl.ngModel.paperLayout",(function(e){t.search("paperLayout",e).replace()}))}}])},Grkc:function(e,t,r){"use strict";r.r(t);var n=r("nbuU"),o=r.n(n),a=r("WSeP"),l=r.n(a),s=r("Xai3"),i=r("UMDU");t.default=angular.module("deskworks.reports.incomeByOrderReportData",[s.default.name,i.default.name]).factory("incomeByOrderReportData",["$filter","$translate","helper","reportStyles","reportSort","incomeByOrderReportColumns",function(e,t,r,n,a,s){return function(e,i){var c={columns:s,rows:[],styles:[]},u=[];l()(i).call(i,(function(e){var t;l()(t=e.productCategories).call(t,(function(e){var t;l()(t=e.products).call(t,(function(e){var t=o()(u).call(u,(function(t){return t.orderNo===e.orderNo}));t||(t={orderNo:e.orderNo,products:[]},u.push(t)),t.products.push(e)}))}))})),u=a(u,"name");var d=0;return l()(u).call(u,(function(e){var o,s=0;l()(o=a(e.products,"date")).call(o,(function(e,t){c.rows.push([e.orderNo,e.userName,e.code,e.name,e.date,e.qty,e.amount,!1]),c.styles.push(t%2?null:n.rowOdd),s+=r.toNumber(e.amount)})),d+=s,c.rows.push([!1,t.instant("INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO")+" #"+e.orderNo+" "+t.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL"),!1,!1,!1,!1,!1,r.round(s)]),c.styles.push(n.h2)})),c.rows.push([!1,!1,!1,!1,!1,!1,!1,!1]),c.styles.push(null),c.rows.push([!1,!1,!1,!1,!1,!1,t.instant("INCOME_BY_ITEM_REPORT.TOTALS.INCOME")+":",r.round(d)]),c.styles.push(n.h3),c}}])},HIxv:function(e,t){e.exports="<div id=depositTransactionReport class=gutter-v> <form name=formDepositTransactionReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <div class=gutter-v> <report-dates ng-model=vm.config.reportDates></report-dates> <report-columns ng-model=vm.config.reportColumns></report-columns> </div> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions banks=$resolve.banks centers=vm.centers> <report-order-by ng-model=vm.config.orderBy report-columns=vm.config.reportColumns.columns></report-order-by> </report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},Iitq:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.creditBalanceReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("CreditBalanceReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["credits.date"]);return e(r.getApiAbsUrl("/reports/credit-balance"),{centerId:"@centerId"},{get:{method:"GET",transformResponse:[angular.fromJson,n]}})}])},LLH2:function(e,t){e.exports='<ff-panel> <ff-panel-header><span translate=REPORTS.COLUMNS.HEADER></span></ff-panel-header> <div class=ff-grid> <ff-header flex="{lg: \'0 0 50%\'}"> <ff-row> <cell flex="0 0 32px" class=ff-center title="{{\'GLOBAL.INCLUDE\' | translate}}"> <ff-icon sense=check></ff-icon> </cell> <cell translate=REPORTS.COLUMNS.COLUMN></cell> </ff-row> </ff-header> <ff-header flex="{lg: \'0 0 50%\'}" class=show-lg> <ff-row> <cell flex="0 0 32px" class=ff-center title="{{\'GLOBAL.INCLUDE\' | translate}}"> <ff-icon sense=check></ff-icon> </cell> <cell translate=REPORTS.COLUMNS.COLUMN></cell> </ff-row> </ff-header> </div> <div class=ff-grid> <ff-col flex="{lg: \'0 0 50%\'}"> <ff-row ng-repeat="column in $ctrl.ngModel.columns | limitTo: $ctrl.leftColCount"> <ff-checkbox class="ff-center ff-control" flex="0 0 32px" ff-model=column.include ff-disabled=column.readonly></ff-checkbox> <ff-static ff-bind=column.title></ff-static> </ff-row> </ff-col> <ff-col flex="{lg: \'0 0 50%\'}"> <ff-row ng-repeat="column in $ctrl.ngModel.columns | limitTo: $ctrl.rightColCount : $ctrl.leftColCount"> <ff-checkbox class="ff-center ff-control" flex="0 0 32px" ff-model=column.include ff-disabled=column.readonly></ff-checkbox> <ff-static ff-bind=column.title></ff-static> </ff-row> </ff-col> </div> </ff-panel> '},MKNM:function(e,t,r){"use strict";r.r(t);r("8cZI"),r("y89P"),r("X5mX"),r("aZFp");var n=r("hsT8"),o=r.n(n),a=r("yCd9"),l=r.n(a),s=r("WSeP"),i=r.n(s);t.default=angular.module("deskworks.reports.reportColumns",["deskworks.helper"]).directive("reportColumns",["$compile","$templateCache",function(e,t){return{restrict:"E",scope:!0,transclude:"element",priority:2,controller:"ReportColumnsCtrl as $ctrl",bindToController:{ngModel:"<"},link:function(r,n,o,a,l){l((function(){n.after(e(t.get("directives/report-columns.tpl.html"))(r))}))}}}]).controller("ReportColumnsCtrl",["$scope","$location","helper",function(e,t,r){var n=this;n.$onInit=function(){e.$watch((function(){return t.search().columns}),(function(e){var t,o;e&&(i()(t=n.ngModel.columns).call(t,(function(e){e.include=!1})),i()(o=e.split(",")).call(o,(function(e){(r.findByKeyValue(n.ngModel.columns,"dataKey",e)||{}).include=!0})))})),e.$watchCollection((function(){var e;return l()(e=n.ngModel.columns).call(e,(function(e){return!!e.include}))}),(function(){var e,r;n.leftColCount=n.rightColCount=Math.floor(n.ngModel.columns.length/2),n.leftColCount+n.rightColCount<n.ngModel.columns.length&&n.leftColCount++;var a=l()(e=o()(r=n.ngModel.columns).call(r,(function(e){return e.include}))).call(e,(function(e){return e.dataKey})).join(",");t.search("columns",a).replace()}))}}])},MmAi:function(e,t,r){"use strict";r.r(t);var n=r("Tfwl"),o=r.n(n),a=r("XAgg"),l=r.n(a),s=r("yKah"),i=r.n(s),c=r("WSeP"),u=r.n(c),d=r("lvz6"),f=r.n(d),p=r("hsT8"),m=r.n(p),g=r("Ekwr"),v=r.n(g),h=r("03wM"),R=r.n(h),y=r("fzuT"),O=r.n(y),T=r("yt4b"),E=r("2zAN"),C=r("F6ya"),b=r("uFJl"),w=r("Grkc"),_=r("UQFN");function D(e,t){var r=R()(e);if(v.a){var n=v()(e);t&&(n=m()(n).call(n,(function(t){return f()(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r,n=null!=arguments[t]?arguments[t]:{};if(t%2)u()(r=D(Object(n),!0)).call(r,(function(t){O()(e,t,n[t])}));else if(i.a)l()(e,i()(n));else{var a;u()(a=D(Object(n))).call(a,(function(t){o()(e,t,f()(n,t))}))}}return e}t.default=angular.module("deskworks.reports.incomeByItemReport",["pdfPreview","chart",T.default.name,E.default.name,C.default.name,b.default.name,w.default.name,_.default.name,"deskworks.state","deskworks.reports.reportStyles","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.incomeByItemReport.service"]).controller("IncomeByItemReportCtrl",["$scope","$q","$timeout","$filter","$translate","$location","state","helper","debounce","dwAlerts","reportStyles","reportHelper","setupService","IncomeByItemReport","incomeByItemReportChart","incomeByItemReportData","incomeByMemberReportData","incomeByOrderReportData",function(e,t,r,n,o,a,l,s,i,c,u,d,f,p,m,g,v,h){var R=this,y=d.paramsChanged,O=d.loadResources;function T(t,n){e.$apply((function(e){var t=n[0]&&n[0]._index;if(angular.isNumber(t)){var o=R.resources.settings.multiLevelProductCategory;R.chartLevels.length>=(o?3:2)||(R.chartLevels.push({code:R.chart.data.codes[t],name:R.chart.data.labels[t]}),r((function(){R.chart=m(R.data,T,R.chartLevels,o)})))}}))}R.config={reportName:o.instant("INCOME_BY_ITEM_REPORT.REPORT_NAME")},R.params={fromDate:l.getParam("fromDate")?n("toDate")(l.getParam("fromDate")):moment().subtract(1,"month").startOf("month"),toDate:l.getParam("toDate")?n("toDate")(l.getParam("toDate")):moment().subtract(1,"month").endOf("month"),orderBy:l.getParam("orderBy")||"item"},R.resources=null,R.data=null,R.byOrder={item:{dataToReport:g},member:{dataToReport:v},order:{dataToReport:h}},R.chartLevels=[],l.setPageTitle(R.config.reportName),e.$watch("$ctrl.params",i((function(e,r){l.setParam("orderBy",R.params.orderBy),R.pdf=null,R.report=null,s.pointFirstInvalid("#incomeByItemReport")||R.params.fromDate&&R.params.toDate&&(y(e,r,["fromDate","toDate","centerId"])&&(R.data=null,R.chartLevels=[]),t.all({resources:R.resources||O((function(){return{settings:f.getSetupSettings().catch((function(e){return c.error(e,"Failed to get setup settings.")}))}})),data:R.data||p.query(R.params).catch((function(e){return c.error(e,"Failed to query report.")}))}).then((function(e){R.resources=e.resources,R.data=e.data})).then((function(){var e=R.byOrder[R.params.orderBy].dataToReport;R.report=e(R.params,R.data);var t=d.buildPdf({config:I({},R.config,{},R.params),report:R.report,resources:R.resources});R.pdf=t.output("blob"),R.chart=m(R.data,T,R.chartLevels,R.resources.settings.multiLevelProductCategory)})))}),100),!0),R.chartBack=function(){R.chartLevels.pop(),R.chart=m(R.data,T,R.chartLevels,R.resources.settings.multiLevelProductCategory)},R.downloadPdf=function(){if(R.pdf){var e=d.getReportFileName({extension:"pdf",config:I({},R.config,{},R.params),resources:R.resources});d.download({blob:R.pdf,fileName:e})}},R.downloadCsv=function(){if(R.pdf){var e=d.getReportFileName({extension:"csv",config:I({},R.config,{},R.params),resources:R.resources}),t=d.buildCsv({report:R.report});d.download({blob:t,fileName:e})}}}])},Mvrh:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.incomeReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("IncomeReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["payments.date"]);return e(r.getApiAbsUrl("/centers/:centerId/income-reports"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{get:{method:"GET",transformResponse:[angular.fromJson,n]}})}])},OeSc:function(e,t,r){"use strict";r.r(t);r("y89P"),r("X5mX");t.default=angular.module("deskworks.reports.reportOwnerRegion",["deskworks.Owner","deskworks.Region","deskworks.setup.service"]).directive("reportOwnerRegion",["$compile","$templateCache",function(e,t){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportOwnerRegionCtrl as $ctrl",bindToController:{ngModel:"<",reportData:"="},link:function(r,n,o,a,l){l((function(o,a){var l=e(t.get("directives/report-owner-region.tpl.html"))(r);angular.element(l[0].querySelector?l[0].querySelector(".ff-panel-body"):l).append(o),n.after(l)}))}}}]).controller("ReportOwnerRegionCtrl",["$scope","$location","$translate","$q","dwAlerts","Owner","Region","setupService","state",function(e,t,r,n,o,a,l,s,i){var c=this;"master"===i.getLoggedUser().role&&(c.$onInit=function(){s.getSetupSettings().catch((function(e){return o(e,"Failed to get setup settings.")})).then((function(e){if(e.isFranchise)return n.all([a.query().catch((function(e){return o(e,"Failed to query owners.")})).then((function(e){c.owners=e,c.owners.unshift({name:r.instant("REPORTS.OWNER_REGION.OWNER.ALL")})})),l.query().catch((function(e){return o(e,"Failed to query regions.")})).then((function(e){c.regions=e,c.regions.unshift({name:r.instant("REPORTS.OWNER_REGION.REGION.ALL")})}))])})),!1!==c.ngModel.ownerId&&(e.$watch((function(){return t.search().ownerId}),(function(e,t){c.ngModel.ownerId=e||0===e?+e:c.owners&&c.owners[0]&&c.owners[0].id,e!==t&&(c.reportData=null)})),e.$watch("$ctrl.ngModel.ownerId",(function(e){t.search("ownerId",e).replace()}))),!1!==c.ngModel.regionId&&(e.$watch((function(){return t.search().regionId}),(function(e,t){c.ngModel.regionId=e||0===e?+e:c.regions&&c.regions[0]&&c.regions[0].id,e!==t&&(c.reportData=null)})),e.$watch("$ctrl.ngModel.regionId",(function(e){t.search("regionId",e).replace()})))},c.onChange=function(){(c.ngModel.ownerId||c.ngModel.regionId)&&(e.vm.config.reportOptions.centerId=0)})}])},QU59:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.accountsReceivableReportColumns",[]).factory("accountsReceivableReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userCompany",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.COMPANY",include:!0,styles:{minCellWidth:130}},{dataKey:"userName",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.USER_NAME",include:!0,styles:{minCellWidth:120}},{dataKey:"date",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.BILL_DATE",include:!0,defaultOrder:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"amount",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.AMOUNT",include:!0,styles:{minCellWidth:60,halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"dateDue",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.DUE_DATE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"amountDue",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.AMOUNT_DUE",include:!0,styles:{minCellWidth:65,halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"daysLate",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.DAYS_LATE",include:!0,styles:{halign:"right"}},{dataKey:"comment",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.COMMENT",include:!0,styles:{minCellWidth:120}},{dataKey:"orderId",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.ORDER_ID",include:!1,styles:{cellWidth:"wrap",halign:"right"}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},R1ro:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.DepositAndTaxReport",["ngResource","datesDeserializer","deskworks.config"]).factory("DepositAndTaxReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t("daily.date"),o=e(r.getApiAbsUrl("/reports/deposit-and-tax"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,n]}});return{get:function(e){return o.get(e).$promise.then((function(e){return e.totalsByProductType=e.totalsByProductType||e.totalsTyProductType,e}))}}}])},TGNl:function(e,t,r){"use strict";r.r(t);r("y89P"),r("X5mX");var n=r("Tfwl"),o=r.n(n),a=r("XAgg"),l=r.n(a),s=r("yKah"),i=r.n(s),c=r("lvz6"),u=r.n(c),d=r("Ekwr"),f=r.n(d),p=r("03wM"),m=r.n(p),g=r("ipr/"),v=r.n(g),h=r("6RpP"),R=r.n(h),y=r("hsT8"),O=r.n(y),T=r("WSeP"),E=r.n(T),C=r("yCd9"),b=r.n(C),w=r("1PCL"),_=r.n(w),D=r("fzuT"),I=r.n(D);function N(e,t){var r=m()(e);if(f.a){var n=f()(e);t&&(n=O()(n).call(n,(function(t){return u()(e,t).enumerable}))),r.push.apply(r,n)}return r}t.default=angular.module("deskworks.reports.availabilityReport",["pdfPreview","fileSaver","jsPDF","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.availabilityReport.service","deskworks.reports.availabilityReportColumns"]).controller("AvailabilityReportCtrl",["$scope","$timeout","$filter","$translate","$location","state","helper","fileSaver","jsPDF","reportStyles","ReportBuilder","AvailabilityReport","availabilityReportColumns",function(e,t,r,n,a,s,c,d,f,p,m,g,h){var y,T=this,C={0:{cellWidth:230},1:{cellWidth:60}},w={0:{cellWidth:230},1:{cellWidth:"wrap"},2:{cellWidth:60},3:{cellWidth:60},4:{cellWidth:60},5:{cellWidth:80},6:{cellWidth:80}};function D(e){var t,r,o,a={columns:h.vacant,rows:[],styles:[]},l=b()(t=Array.apply(null,new Array(a.columns.length))).call(t,(function(e){return!1})),s=0;return E()(r=e.reportData).call(r,(function(e,t){var r,n,o=O()(r=e.reservationUnits).call(r,(function(e){return!e.attachedUser}));o.length&&(a.rows.push(R()(n=[e.name]).call(n,v()(l).call(l,0,l.length-1))),a.styles.push(p.h2),E()(o).call(o,(function(e,t){var r;s+=e.price,a.rows.push(b()(r=a.columns).call(r,(function(t){return e[t.dataKey]}))),a.styles.push(t%2?null:p.rowOdd)})))})),a.rows.push(R()(o=[n.instant("AVAILABILITY_REPORT.TOTALS.VACANT"),s]).call(o,v()(l).call(l,0,l.length-2))),a.styles.push(p.h1),a}function P(e){var t,r,o,a={columns:h.occupied,rows:[],styles:[]},l=b()(t=Array.apply(null,new Array(a.columns.length))).call(t,(function(e){return!1})),s=0;return E()(r=e.reportData).call(r,(function(e){var t,r,n=O()(t=e.reservationUnits).call(t,(function(e){return!!e.attachedUser}));n.length&&(a.rows.push(R()(r=[e.name]).call(r,v()(l).call(l,0,l.length-1))),a.styles.push(p.h2),E()(n).call(n,(function(e,t){var r;e.netPrice=e.price-e.discount||0,s+=e.netPrice,a.rows.push(b()(r=a.columns).call(r,(function(t){return e[t.dataKey]}))),a.styles.push(t%2?null:p.rowOdd)})))})),a.rows.push(R()(o=[n.instant("AVAILABILITY_REPORT.TOTALS.OCCUPIED"),!1,!1,!1,s]).call(o,v()(l).call(l,0,l.length-5))),a.styles.push(p.h1),a}function A(e){var t,r,o,a,l={columns:h.occupied,rows:[],styles:[]},s=b()(t=Array.apply(null,new Array(l.columns.length))).call(t,(function(e){return!1})),i=0,c=0;return E()(r=e.reportData).call(r,(function(e){var t,r=e.reservationUnits;r.length&&(l.rows.push(R()(t=[e.name]).call(t,v()(s).call(s,0,s.length-1))),l.styles.push(p.h2),E()(r).call(r,(function(e,t){var r;e.attachedUser?(e.netPrice=e.price-e.discount||0,i+=e.netPrice):c+=e.price||0,l.rows.push(b()(r=l.columns).call(r,(function(t){return e[t.dataKey]}))),l.styles.push(t%2?null:p.rowOdd)})))})),l.rows.push(R()(o=[n.instant("AVAILABILITY_REPORT.TOTALS.OCCUPIED"),!1,!1,!1,i]).call(o,v()(s).call(s,0,s.length-5))),l.styles.push(p.h1),l.rows.push(R()(a=[n.instant("AVAILABILITY_REPORT.TOTALS.VACANT"),!1,c]).call(a,v()(s).call(s,0,s.length-3))),l.styles.push(p.h1),l}T.config={reportName:n.instant("AVAILABILITY_REPORT.REPORT_NAME"),reportOptions:{},merged:!1,getReportData:function(){return g.query({centerId:T.config.reportOptions.centerId}).$promise}},s.setPageTitle(T.config.reportName),e.$watch((function(e){return a.search().merged}),(function(e){T.config.merged=e})),e.$watch("$ctrl.config.merged",(function(e){a.search("merged",e||null).replace()})),T.reportBuilder=new m(T.config),e.$watch((function(e){return{reportOptions:T.config.reportOptions,reportColumns:T.config.reportColumns,merged:T.config.merged}}),(function(e,r){y&&(t.cancel(y),y=null),y=t((function(){if(T.pdf=null,!angular.isUndefined(T.config.reportOptions.centerId))if(T.config.merged)T.reportBuilder.buildPdf(A,function(e){for(var t=1;t<arguments.length;t++){var r,n=null!=arguments[t]?arguments[t]:{};if(t%2)E()(r=N(Object(n),!0)).call(r,(function(t){I()(e,t,n[t])}));else if(i.a)l()(e,i()(n));else{var a;E()(a=N(Object(n))).call(a,(function(t){o()(e,t,u()(n,t))}))}}return e}({columnStyles:w},p)).then((function(e){T.pdf=e}));else{var e=new f(T.config.reportOptions.paperLayout,"pt",T.config.reportOptions.paperSize),t=p.pageMargins[0];e.setFontSize(11),e.setFontStyle("bold"),e.autoTableText(n.instant("AVAILABILITY_REPORT.VACANT")+":",p.pageMargins[3],t,{});var r=_()({startY:t+15,columnStyles:C},p);T.reportBuilder.generatePdf(D,r,e).then((function(e){var t=e.previousAutoTable.finalY+20;e.setFontSize(11),e.setFontStyle("bold"),e.autoTableText(n.instant("AVAILABILITY_REPORT.OCCUPIED")+":",p.pageMargins[3],t,{});var r=_()({startY:t+15,columnStyles:w},p);T.reportBuilder.generatePdf(P,r,e).then((function(e){T.pdf=e.output("blob")}))}))}}),100)}),!0),T.downloadPdf=function(){T.pdf&&d(T.pdf,T.reportBuilder.getReportFileName("pdf"))},T.downloadCsv=function(){T.pdf&&(T.config.merged?d(T.reportBuilder.buildCsv(A),T.reportBuilder.getReportFileName("csv")):(d(T.reportBuilder.buildCsv(D),T.reportBuilder.getReportFileName("csv","-vacant")),d(T.reportBuilder.buildCsv(P),T.reportBuilder.getReportFileName("csv","-occupied"))))}}])},TVyk:function(e,t){e.exports="<div id=checkInReport class=gutter-v> <form name=formCheckInReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <report-dates ng-model=$ctrl.config.reportDates></report-dates> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=$ctrl.config.reportOptions> <ff-row> <ff-label flex=\"0 0 100px\"><span translate=CHECK_IN_REPORT.ORDER_BY></span></ff-label> <ff-static> <div class=\"ff-grid gutter-h-half\"> <label flex=none> <ff-radio ff-model=$ctrl.config.orderBy ff-value=\"'userName'\"> <span translate=CHECK_IN_REPORT.ORDER_BY.NAME></span> </ff-radio> </label> <label flex=none> <ff-radio ff-model=$ctrl.config.orderBy ff-value=\"'userCompany'\"> <span translate=CHECK_IN_REPORT.ORDER_BY.COMPANY></span> </ff-radio> </label> <label flex=none> <ff-radio ff-model=$ctrl.config.orderBy ff-value=\"'checkInTime'\"> <span translate=CHECK_IN_REPORT.ORDER_BY.DATE></span> </ff-radio> </label> </div> </ff-static> </ff-row> </report-options> </div> </div> <ff-panel flex=auto> <ff-panel-header> <span ng-if=\"$ctrl.config.orderBy === 'checkInTime'\" translate=CHECK_IN_REPORT.BAR_CHART.USAGE_PER_DAY></span> <span ng-if=\"$ctrl.config.orderBy === 'userName'\" translate=CHECK_IN_REPORT.BAR_CHART.USAGE_BY_MEMBER></span> <span ng-if=\"$ctrl.config.orderBy === 'userCompany'\" translate=CHECK_IN_REPORT.BAR_CHART.USAGE_BY_COMPANY></span> </ff-panel-header> <div ff-dim=!$ctrl.pdf ng-init=\"$c = $ctrl\"> <chart chart-type={{$ctrl.bar.type}} chart-labels=$ctrl.bar.labels chart-data=$ctrl.bar.data chart-options=$ctrl.bar.options ng-style=\"{ 'max-height': $c.config.orderBy === 'checkInTime' ? null : 'none', 'height': $c.config.orderBy === 'checkInTime' ? null : $c.bar.labels.length * 25 + 'px' }\"></chart> </div> </ff-panel> <ff-btn-group> <ff-btn sense=download ff-click=$ctrl.downloadPdf() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=$ctrl.downloadCsv() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </div> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=$ctrl.pdf></div> </ff-panel> </div> "},Tbc7:function(e,t,r){"use strict";r.r(t);r("y89P");var n=r("WSeP"),o=r.n(n),a=r("lRNC"),l=r.n(a),s=r("yCd9"),i=r.n(s),c=["$injector",function(e){var t,n,a=(t=r("8g2Y"),i()(n=l()(t).call(t)).call(n,t));e.loadNewModules(i()(a).call(a,(function(e){return e.default.name}))),e.invoke(["$templateCache",function(e){var t,n=r("/MGB");o()(t=l()(n).call(n)).call(t,(function(t){return e.put(t.replace(/^\.\//,""),n(t))}))}])}];t.default=c},"U+0Z":function(e,t){e.exports='<ff-panel ng-if="$ctrl.owners && $ctrl.regions"> <ff-panel-header><span translate=REPORTS.OWNER_REGION.HEADER></span></ff-panel-header> <label class=ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.OWNER_REGION.OWNER></span></ff-label> <ff-select ff-model=$ctrl.ngModel.ownerId ff-options="owner.id as owner.name for owner in $ctrl.owners" ff-change=$ctrl.onChange()></ff-select> </label> <label class=ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.OWNER_REGION.REGION></span></ff-label> <ff-select ff-model=$ctrl.ngModel.regionId ff-options="region.id as region.name for region in $ctrl.regions" ff-change=$ctrl.onChange()></ff-select> </label> </ff-panel> '},"U+9+":function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.checkInReportColumns",[]).factory("checkInReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userName",_title:"CHECK_IN_REPORT.COLUMNS.NAME"},{dataKey:"userCompany",_title:"CHECK_IN_REPORT.COLUMNS.COMPANY"},{dataKey:"checkInTime",_title:"CHECK_IN_REPORT.COLUMNS.DATE",styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"checkInTime",_title:"CHECK_IN_REPORT.COLUMNS.CHECK_IN",styles:{halign:"right"},pdf:function(e){return t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortTime")}},{dataKey:"checkOutTime",_title:"CHECK_IN_REPORT.COLUMNS.CHECK_OUT",styles:{halign:"right"},pdf:function(e){return t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortTime")}},{dataKey:"duration",_title:"CHECK_IN_REPORT.COLUMNS.USAGE_HOURS",styles:{halign:"right"},pdf:function(e){return t("hoursMinutes")(e)},csv:function(e){return t("hoursMinutes")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},UMDU:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.incomeByOrderReportColumns",[]).factory("incomeByOrderReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"orderNo",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"userName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"productCode",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"productName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME",include:!0},{dataKey:"date",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.DATE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"qty",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"amount",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},UQFN:function(e,t,r){"use strict";r.r(t);r("8cZI"),r("aZFp");var n=r("xeXu"),o=r.n(n),a=r("hsT8"),l=r.n(a),s=r("nbuU"),i=r.n(s),c=r("yCd9"),u=r.n(c),d=r("6RpP"),f=r.n(d),p=r("WSeP"),m=r.n(p),g=r("Xai3");t.default=angular.module("deskworks.reports.incomeByItemReportChart",[g.default.name]).factory("incomeByItemReportChart",["$filter","helper","reportSort",function(e,t,r){return function(r,o,l,i){var d=[];m()(r).call(r,(function(e){d=f()(d).call(d,e.productCategories)}));var p=[a,s,c];i&&p.unshift(n);var g=p[l.length](d,l);return{type:"pie",data:{codes:u()(g).call(g,(function(e){return e.code})),labels:u()(g).call(g,(function(e){return e.name})),datasets:[{data:u()(g).call(g,(function(e){return t.round(e.value)}))}]},options:{tooltips:{callbacks:{label:function(t,r){return r.labels[t.index]+": "+e("ncurrency")(r.datasets[0].data[t.index])}}},legend:{display:!0,position:"right"},onClick:o}}};function n(e){var n=[];return m()(e).call(e,(function(e){var r,o=e.code.split("-")[0],a=i()(n).call(n,(function(e){return e.code===o}));a||(a={code:o,name:t.join([e.name,"["+o+"]"]," "),value:0,catsCount:0,cats:[]},n.push(a)),a.catsCount++,a.cats.push(e),m()(r=e.products).call(r,(function(e){a.value+=t.toNumber(e.amount)}))})),n=r(n,"value",!0)}function a(e,r){var n;if(r.length){var a=r[r.length-1].code;e=l()(e).call(e,(function(e){var t;return 0===o()(t=e.code).call(t,a)}))}return u()(n=d(e)).call(n,(function(e){return{code:e.code,name:t.join([e.name,"["+e.code+"]"]," "),value:e.total}}))}function s(e,n){var o,a,l=n[n.length-1].code,s=i()(o=d(e)).call(o,(function(e){return e.code===l})),c=[];return m()(a=s.products).call(a,(function(e){var r=i()(c).call(c,(function(t){return t.code===e.code}));r||(r={code:e.code,name:t.join([e.name,"["+e.code+"]"]," "),value:0},c.push(r)),r.value+=t.toNumber(e.amount)})),c=r(c,"value",!0)}function c(e,n){var o,a,l=n[n.length-2].code,s=n[n.length-1].code,c=i()(o=d(e)).call(o,(function(e){return e.code===l})),u=[];return m()(a=c.products).call(a,(function(e){if(e.code===s){var r=i()(u).call(u,(function(t){return t.name===e.userName}));r||(r={code:e.code,name:e.userName,value:0},u.push(r)),r.value+=t.toNumber(e.amount)}})),u=r(u,"value",!0)}function d(e){var n=[];return m()(e).call(e,(function(e){var t,r=i()(n).call(n,(function(t){return t.code===e.code}));r?r.products=f()(t=r.products).call(t,e.products):((r=angular.copy(e)).total=0,n.push(r))})),m()(n).call(n,(function(e){var r;m()(r=e.products).call(r,(function(r){e.total+=t.toNumber(r.amount)}))})),r(n,"total",!0)}}])},UUPn:function(e,t){e.exports='<div id=incomeByItemReport class=gutter-v> <form name=formIncomeByItemReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <report-dates ng-model=$ctrl.params></report-dates> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class=gutter-v> <report-options ng-model=$ctrl.params> <ff-row> <ff-label flex="0 0 100px"><span translate=INCOME_BY_ITEM_REPORT.ORDER_BY></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half"> <label flex="0 0 auto"> <ff-radio ff-model=$ctrl.params.orderBy ff-value="\'item\'"> <span translate=INCOME_BY_ITEM_REPORT.ORDER_BY.ITEM></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio ff-model=$ctrl.params.orderBy ff-value="\'member\'"> <span translate=INCOME_BY_ITEM_REPORT.ORDER_BY.MEMBER></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio ff-model=$ctrl.params.orderBy ff-value="\'order\'"> <span translate=INCOME_BY_ITEM_REPORT.ORDER_BY.ORDER></span> </ff-radio> </label> </div> </ff-static> </ff-row> </report-options> </div> </div> <ff-panel flex="1 1 auto"> <ff-panel-header> <ff-row class=gutter-h-half> <div> <span ng-if=!$ctrl.chartLevels.length translate=INCOME_BY_ITEM_REPORT.PRODUCT_CATEGORIES_PIE_CHART.HEADER></span> <span ng-if=$ctrl.chartLevels.length ng-bind="$ctrl.chartLevels[$ctrl.chartLevels.length - 1].name"></span> </div> <div flex="0 0 auto" style=align-items:center> <ff-btn ng-if=$ctrl.chartLevels.length size=sm sense=back style="margin:-.5rem 0" title="{{\'GLOBAL.BTN_BACK\' | translate}}" ff-click=$ctrl.chartBack()><span translate=GLOBAL.BTN_BACK></span></ff-btn> </div> </ff-row> </ff-panel-header> <div ff-dim=!$ctrl.pdf> <chart config=$ctrl.chart></chart> </div> </ff-panel> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=$ctrl.downloadPdf() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=$ctrl.downloadCsv() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=$ctrl.pdf></div> </ff-panel> </div> '},WCm8:function(e,t,r){"use strict";r.r(t);var n=r("G0Vy"),o=r.n(n),a=r("yCd9"),l=r.n(a),s=r("WSeP"),i=r.n(s),c=r("NOor"),u=r.n(c),d=r("hsT8"),f=r.n(d);t.default=angular.module("deskworks.DepositAndTaxReportCtrl",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportDates","deskworks.reports.reportColumns","deskworks.reports.reportOptions","deskworks.reports.ReportBuilder","deskworks.reports.reportStyles","deskworks.reportOrderBy","deskworks.DepositAndTaxReport","deskworks.depositAndTaxReportColumns"]).controller("DepositAndTaxReportCtrl",["$scope","$timeout","$translate","$filter","state","fileSaver","ReportBuilder","reportStyles","DepositAndTaxReport","depositAndTaxReportColumns",function(e,t,r,n,a,s,c,d,p,m){var g,v=this;function h(e){var t,a,s,c,p=n("ncurrency"),m={columns:f()(t=e.reportColumns).call(t,(function(e){return e.include})),rows:[],styles:[]},g=u()(a=m.columns).call(a,(function(e){return"amountTaxable"===e.dataKey}));i()(s=e.reportData.daily).call(s,(function(e){var t;m.rows.push([{content:n("date")(e.date,"mediumDate"),colSpan:g},{content:r.instant("DEPOSIT_AND_TAX_REPORT.TOTAL_DAILY")+":",colSpan:m.columns.length-g-1},{content:p(e.total)}]),m.styles.push(d.h1),i()(t=e.billingMethods).call(t,(function(e){var t;m.rows.push([{content:e.name,colSpan:g},{content:r.instant("DEPOSIT_AND_TAX_REPORT.TOTAL_PAYMENT_METHOD")+":",colSpan:m.columns.length-g-1},{content:p(e.total)}]),m.styles.push(d.h2),i()(t=e.orders).call(t,(function(e){var t,r;m.rows.push(l()(t=m.columns).call(t,(function(t){return!!angular.isDefined(e[t.dataKey])&&e[t.dataKey]}))),m.styles.push(d.h3),i()(r=e.items).call(r,(function(e,t){var r;m.rows.push(l()(r=m.columns).call(r,(function(t){return!!angular.isDefined(e[t.dataKey])&&e[t.dataKey]}))),m.styles.push(t%2?null:d.rowOdd)}))}))}))})),m.rows.push(o()(c=Array(m.columns.length)).call(c,!1)),m.styles.push(null);var v=[{name:"TOTAL_TAXABLE_AMOUNT",data:"totalTaxableAmount"},{name:"TOTAL_NON_TAXABLE_AMOUNT",data:"totalNonTaxableAmount"},{name:"TOTAL_CHARGES",data:"totalCharges"},{name:"TOTAL_TAX",data:"totalTax"},{name:"GRAND_TOTAL",data:"grandTotal"},{name:"TOTAL_MEMBERSHIP",data:"membership"},{name:"TOTAL_REGISTRATION",data:"registration"},{name:"TOTAL_RENTAL",data:"rental"},{name:"TOTAL_PRINT",data:"print"},{name:"TOTAL_SERVICES",data:"services"}];return i()(v).call(v,(function(t,n){m.rows.push([{content:r.instant("DEPOSIT_AND_TAX_REPORT.".concat(t.name))+":",colSpan:m.columns.length-1,styles:{halign:"right"}},{content:p(n<5?e.reportData[t.data]:e.reportData.totalsByProductType[t.data]||0)}]),m.styles.push(d.h3)})),m}v.config={reportName:r.instant("DEPOSIT_AND_TAX_REPORT.REPORT_NAME"),reportOptions:{},reportColumns:angular.copy(m),reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return p.get({centerId:v.config.reportOptions.centerId||null,fromDate:n("date")(v.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:n("date")(v.config.reportDates.toDate,"yyyy-MM-dd")})}},a.setPageTitle(v.config.reportName),v.config.reportDates.fromDate.subtract(1,"M").date(1),v.config.reportDates.toDate.date(0),v.reportBuilder=new c(v.config),e.$watch((function(){return{reportOptions:v.config.reportOptions,reportDates:v.config.reportDates,orderBy:v.config.orderBy}}),(function(e,r){g&&(t.cancel(g),g=null),g=t((function(){v.pdf=null;var t=e.reportDates.fromDate,n=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(v.config.reportData=null),t=e.reportDates.toDate,n=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(v.config.reportData=null),v.reportBuilder.buildPdf(h).then((function(e){v.pdf=e}))}),100)}),!0),v.downloadPdf=function(){v.pdf&&s(v.pdf,v.reportBuilder.getReportFileName("pdf"))},v.downloadCsv=function(){v.pdf&&s(v.reportBuilder.buildCsv(h),v.reportBuilder.getReportFileName("csv"))}}])},Ytnt:function(e,t,r){"use strict";r.r(t);r("y89P"),r("X5mX");var n=r("NOor"),o=r.n(n),a=r("yCd9"),l=r.n(a),s=r("YtL8"),i=r.n(s),c=r("hsT8"),u=r.n(c);t.default=angular.module("deskworks.reports.accountsReceivableReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.accountsReceivableReport.service","deskworks.reports.accountsReceivableReportColumns"]).controller("AccountsReceivableReportCtrl",["$scope","$timeout","$filter","$translate","$location","state","helper","fileSaver","reportStyles","ReportBuilder","AccountsReceivableReport","accountsReceivableReportColumns",function(e,t,r,n,a,s,c,d,f,p,m,g){var v,h=this;function R(e){var t,a,s,d,p,m,g,v,R={columns:u()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:u()(a=e.reportData.payments).call(a,(function(e){return h.config.credits||e.amountDue>=0})),styles:[]};R.rows=h.reportBuilder.sortData(R.rows,e.orderBy);var y=c.round(i()(s=R.rows).call(s,(function(e,t){return e+(t.amountDue?+t.amountDue:0)}),0)),O=R.rows.length&&c.round(i()(d=R.rows).call(d,(function(e,t){return e+(t.daysLate?+t.daysLate:0)}),0)/R.rows.length);R.rows=l()(p=R.rows).call(p,(function(e,t){var r;return R.styles.push(t%2?null:f.rowOdd),l()(r=R.columns).call(r,(function(t){return e[t.dataKey]}))}));var T,E=l()(m=Array.apply(null,new Array(R.columns.length))).call(m,(function(e){return!1}));return R.rows.push(E),R.styles.push(null),(T=o()(g=R.columns).call(g,(function(e){return"daysLate"===e.dataKey})))>=0&&(R.rows.push([{content:n.instant("ACCOUNTS_RECEIVABLE_REPORT.TOTALS.AVG_DAYS_LATE")+":",colSpan:T,styles:{halign:"right"}},{content:O},{content:!1,colSpan:R.columns.length-T-1}]),R.styles.push(f.h3)),(T=o()(v=R.columns).call(v,(function(e){return"amountDue"===e.dataKey})))>=0&&(R.rows.push([{content:n.instant("ACCOUNTS_RECEIVABLE_REPORT.TOTALS.TOTAL_DUE")+":",colSpan:T,styles:{halign:"right"}},{content:r("ncurrency")(y)},{content:!1,colSpan:R.columns.length-T-1}]),R.styles.push(f.h3)),R}h.config={reportName:n.instant("ACCOUNTS_RECEIVABLE_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:angular.copy(g)},reportDates:{fromDate:!1,toDate:moment()},getReportData:function(){return m.get({centerId:h.config.reportOptions.centerId,date:r("date")(h.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:h.config.reportOwnerRegion.ownerId,regionId:h.config.reportOwnerRegion.regionId}).$promise}},s.setPageTitle(h.config.reportName),e.$watch((function(){return a.search().credits}),(function(e){h.config.credits=!!e&&"false"!==e})),e.$watch("vm.config.credits",(function(e){a.search("credits",e).replace()})),h.reportBuilder=new p(h.config),e.$watch((function(e){return{reportOptions:h.config.reportOptions,reportDates:h.config.reportDates,reportColumns:h.config.reportColumns,reportOwnerRegion:h.config.reportOwnerRegion,credits:h.config.credits,orderBy:h.config.orderBy}}),(function(e,r){v&&(t.cancel(v),v=null),v=t((function(t){if(h.pdf=null,!angular.isUndefined(h.config.reportOptions.centerId)){var n=e.reportDates.fromDate,o=r.reportDates.fromDate;!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(h.config.reportData=null),n=e.reportDates.toDate,o=r.reportDates.toDate,!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(h.config.reportData=null),h.reportBuilder.buildPdf(R).then((function(e){h.pdf=e}))}}),100)}),!0),h.downloadPdf=function(){h.pdf&&d(h.pdf,h.reportBuilder.getReportFileName("pdf"))},h.downloadCsv=function(){h.pdf&&d(h.reportBuilder.buildCsv(R),h.reportBuilder.getReportFileName("csv"))}}])},ZfFK:function(e,t){e.exports='<div id=availabilityReport class=gutter-v> <form name=formAvailabilityReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}" style=margin-left:auto> <report-options ng-model=$ctrl.config.reportOptions all-centers=false> <ff-row> <ff-label flex="0 0 100px"><span translate=AVAILABILITY_REPORT.MERGED></span></ff-label> <ff-static><ff-checkbox ff-model=$ctrl.config.merged></ff-checkbox></ff-static> </ff-row> </report-options> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=$ctrl.downloadPdf() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=$ctrl.downloadCsv() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=$ctrl.pdf></div> </ff-panel> </div> '},ZimX:function(e,t,r){"use strict";r.r(t);r("8cZI"),r("y89P"),r("X5mX"),r("aZFp");var n=r("xeXu"),o=r.n(n),a=r("hsT8"),l=r.n(a),s=r("G0Vy"),i=r.n(s),c=r("yCd9"),u=r.n(c),d=r("nbuU"),f=r.n(d),p=r("WSeP"),m=r.n(p),g=r("73rf"),v=r.n(g);t.default=angular.module("deskworks.reportOrderBy",[]).directive("reportOrderBy",["$compile",function(e){return{restrict:"E",scope:!0,transclude:"element",priority:2,controller:"ReportOrderByCtrl as $ctrl",bindToController:{ngModel:"=",reportColumns:"<",levelsCount:"<levels"},link:function(t,r,n,o,a){a((function(n,o){var a=e(v.a)(t);angular.element(a[0].querySelector?a[0].querySelector(".ff-panel-body"):a).append(n),r.after(a)}))}}}]).controller("ReportOrderByCtrl",["$scope","$location",function(e,t){var r=this;function n(){var e,t,n;r.levels||(r.levels=u()(e=i()(t=new Array(r.levelsCount||1)).call(t,null)).call(e,(function(){return{}})));var a=[];m()(n=r.levels).call(n,(function(e,t){var n;e.cols=l()(n=r.reportColumns).call(n,(function(t){if(o()(a).call(a,t.dataKey)<0)return!0;t.dataKey===e.order&&(e.order=null)})),t&&e.cols.unshift({dataKey:null,title:"-"}),e.order&&a.push(e.order)}))}r.$onInit=function(){var o;n();var a=(t.search().orderBy||"").split(",");m()(o=r.levels).call(o,(function(e,t){var r,n;e.order=(a[t]?f()(r=e.cols).call(r,(function(e){return e.dataKey===a[t]})):f()(n=e.cols).call(n,(function(e){return!0===e.defaultOrder}))||e.cols[0]).dataKey})),e.$watchCollection((function(){var e,t;return u()(e=l()(t=r.levels).call(t,(function(e){return!!e.order}))).call(e,(function(e){return e.order}))}),(function(e){var o,a;n();var s=l()(o=u()(a=r.levels).call(a,(function(e){return e.order}))).call(o,(function(e){return!!e}));t.search("orderBy",s.join(",")).replace(),r.ngModel=r.levelsCount>1?s:s[0]}))}}])},cjYI:function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n);t.default=angular.module("deskworks.reports.checkInReportBarChart",[]).factory("checkInReportBarChart",["$translate","$filter","helper","whitelabel",function(e,t,r,n){return{getChartConfig:function(e,r){var a={labels:o()(e).call(e,(function(e){return e.name||"-"})),data:[{data:o()(e).call(e,(function(e){return e.value/36e5})),backgroundColor:n.getProperty("--brand-color")}],options:{legend:{display:!1},tooltips:{callbacks:{label:function(r,n){return t("hoursMinutes")(e[r.index].value)}}},scales:{xAxes:[{maxBarThickness:100}]}}};return a.type="checkInTime"===r?"bar":"horizontalBar",a}}}])},h5Ea:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.creditBalanceReportColumns",[]).factory("creditBalanceReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"centerName",_title:"CREDIT_BALANCE_REPORT.COLUMNS.CENTER",include:!0},{dataKey:"userName",_title:"CREDIT_BALANCE_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"date",_title:"CREDIT_BALANCE_REPORT.COLUMNS.DATE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"order",_title:"CREDIT_BALANCE_REPORT.COLUMNS.ORDER_ID",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"amount",_title:"CREDIT_BALANCE_REPORT.COLUMNS.BALANCE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},hY1K:function(e,t,r){},kCKf:function(e,t,r){"use strict";r.r(t);r("y89P"),r("X5mX");var n=r("yCd9"),o=r.n(n);t.default=angular.module("deskworks.reports.creditBalanceReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.creditBalanceReport.service","deskworks.reports.creditBalanceReportColumns"]).controller("CreditBalanceReportCtrl",["$scope","$timeout","$filter","$translate","$location","state","helper","fileSaver","reportStyles","ReportBuilder","CreditBalanceReport","creditBalanceReportColumns",function(e,t,r,n,a,l,s,i,c,u,d,f){var p,m=this;function g(e){var t,r={columns:e.reportColumns.columns,rows:[],styles:[]};return r.rows=o()(t=e.reportData.credits).call(t,(function(e,t){var n;return r.styles.push(t%2?null:c.rowOdd),o()(n=r.columns).call(n,(function(t){return e[t.dataKey]}))})),r.rows.push([!1,!1,!1,!1,!1]),r.styles.push(null),r.rows.push([!1,!1,!1,n.instant("CREDIT_BALANCE_REPORT.TOTALS.CREDIT")+":",e.reportData.total]),r.styles.push(c.h3),r}m.config={reportName:n.instant("CREDIT_BALANCE_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:f},toDate:moment(),getReportData:function(){return d.get({centerId:m.config.reportOptions.centerId,ownerId:m.config.reportOwnerRegion.ownerId,regionId:m.config.reportOwnerRegion.regionId,toDate:r("date")(m.config.toDate,"yyyy-MM-dd")}).$promise}},l.setPageTitle(m.config.reportName),m.reportBuilder=new u(m.config),m.getToday=function(){return moment()},e.$watch((function(){return a.search().toDate}),(function(e){var t=r("toDate")(e);m.config.toDate=moment.isMoment(t)&&!m.config.toDate.isSame(t)?t:m.config.toDate})),e.$watch("vm.config.toDate",(function(e){moment.isMoment(e)&&a.search("toDate",r("date")(e,"yyyy-MM-dd")).replace()})),e.$watch((function(e){return{reportOptions:m.config.reportOptions,reportOwnerRegion:m.config.reportOwnerRegion,toDate:m.config.toDate}}),(function(e,r){p&&(t.cancel(p),p=null),p=t((function(){if(!(moment.isMoment(e.toDate)&&e.toDate.isAfter(moment(),"day")||(m.pdf=null,angular.isUndefined(m.config.reportOptions.centerId)))){var t=e.toDate,n=r.toDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(m.config.reportData=null),m.reportBuilder.buildPdf(g).then((function(e){m.pdf=e}))}}),100)}),!0),m.downloadPdf=function(){m.pdf&&i(m.pdf,m.reportBuilder.getReportFileName("pdf"))},m.downloadCsv=function(){m.pdf&&i(m.reportBuilder.buildCsv(g),m.reportBuilder.getReportFileName("csv"))}}])},kUla:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.incomeByMemberReportColumns",[]).factory("incomeByMemberReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"productCode",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"productName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME",include:!0},{dataKey:"orderNo",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"date",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.DATE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"qty",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"amount",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},lfjW:function(e,t){e.exports='<div id=creditBalanceReport class=gutter-v> <form name=formCreditBalanceReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}" style=margin-left:auto> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions> <label class=ff-row> <ff-label flex="0 0 100px" ff-required=true><span translate=REPORTS.PERIOD.TO_DATE></span></ff-label> <ff-date flex="0 0 124px" name=toDate ff-model=vm.config.toDate ff-date-order="{ early: vm.config.toDate, late: vm.getToday() }" ff-validate-alert="{ field: \'Selected date\', late: \'or equal to today\' }"></ff-date> <span class=ff-label></span> </label> </report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> '},nkhl:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.availabilityReport.service",["ngResource","deserializeNumbers","datesDeserializer","deskworks.config"]).factory("AvailabilityReport",["$resource","deserializeNumbers","datesDeserializer","deskworksConfig",function(e,t,r,n){var o=n.getApiAbsUrl("/centers/:centerId/availability-reports"),a=t(["reservationUnits.price","reservationUnits.discount"]),l=r(["reservationUnits.startDate","reservationUnits.terminationDate"]);return e(o,{centerId:"@centerId"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,l,a]}})}])},pEUA:function(e,t){e.exports="<ff-panel ng-hide=$ctrl.embed> <ff-panel-header><span translate=REPORTS.PERIOD.HEADER></span></ff-panel-header> <div class=ff-grid> <label class=ff-row flex=\"{lg: '0 0 50%'}\" ng-if=\"$ctrl.ngModel.fromDate !== false\"> <ff-label flex=\"{lg: '0 0 90px', xs: '0 0 100px'}\" ff-required=true><span translate=REPORTS.PERIOD.FROM_DATE></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=$ctrl.ngModel.fromDate ff-required=true ff-date-order=\"{ early: $ctrl.ngModel.fromDate, late: $ctrl.ngModel.toDate }\" ff-validate-alert=\"{ field: '{{'REPORTS.PERIOD.FROM_DATE' | translate}}', late: '{{'REPORTS.PERIOD.TO_DATE' | translate}}' }\"></ff-date> <span class=ff-label></span> </label> <label class=ff-row flex=\"{lg: $ctrl.ngModel.fromDate === false ? 'auto' : '0 0 50%'}\"> <ff-label flex=\"{lg: '0 0 72px', xs: '0 0 100px'}\" ff-required=true><span translate=REPORTS.PERIOD.TO_DATE></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=$ctrl.ngModel.toDate ff-required=true ff-date-order=\"{ early: $ctrl.ngModel.fromDate, late: $ctrl.ngModel.toDate }\" ff-validate-alert=\"{ field: '{{'REPORTS.PERIOD.TO_DATE' | translate}}', early: '{{'REPORTS.PERIOD.FROM_DATE' | translate}}' }\"></ff-date> <span class=ff-label></span> </label> </div> </ff-panel> <label class=ff-row ng-if=\"$ctrl.embed && $ctrl.ngModel.fromDate !== false\"> <ff-label flex={{$ctrl.embed}} ff-required=true><span translate=REPORTS.PERIOD.FROM_DATE></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=$ctrl.ngModel.fromDate ff-required=true ff-validate-alert=\"{{'REPORTS.PERIOD.FROM_DATE' | translate}}\"></ff-date> <span class=ff-label></span> </label> <label class=ff-row ng-if=$ctrl.embed> <ff-label flex={{$ctrl.embed}} ff-required=true><span translate=REPORTS.PERIOD.TO_DATE></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=$ctrl.ngModel.toDate ff-required=true ff-validate-alert=\"{{'REPORTS.PERIOD.TO_DATE' | translate}}\"></ff-date> <span class=ff-label></span> </label> "},pvmN:function(e,t){e.exports="<div id=incomeReport class=gutter-v> <form name=formIncomeReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <report-dates ng-model=vm.config.reportDates></report-dates> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions></report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},sSbM:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.incomeByItemReportColumns",[]).factory("incomeByItemReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"productCode",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE",include:!0,styles:{cellWidth:"wrap"}},{dataKey:"productName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME",include:!0},{dataKey:"userName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"orderNo",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"date",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.DATE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"qty",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"amount",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"subtotal",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.SUBTOTAL",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},u7OF:function(e,t,r){"use strict";r.r(t);var n=r("Tfwl"),o=r.n(n),a=r("XAgg"),l=r.n(a),s=r("yKah"),i=r.n(s),c=r("WSeP"),u=r.n(c),d=r("lvz6"),f=r.n(d),p=r("hsT8"),m=r.n(p),g=r("Ekwr"),v=r.n(g),h=r("03wM"),R=r.n(h),y=r("ipr/"),O=r.n(y),T=r("yCd9"),E=r.n(T),C=r("fzuT"),b=r.n(C);r("S2gh"),r("hY1K");function w(e,t){var r=R()(e);if(v.a){var n=v()(e);t&&(n=m()(n).call(n,(function(t){return f()(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r,n=null!=arguments[t]?arguments[t]:{};if(t%2)u()(r=w(Object(n),!0)).call(r,(function(t){b()(e,t,n[t])}));else if(i.a)l()(e,i()(n));else{var a;u()(a=w(Object(n))).call(a,(function(t){o()(e,t,f()(n,t))}))}}return e}t.default=angular.module("chart",["deskworks.helper"]).directive("chart",["$window","systemColors",function(e,t){return e.Chart.defaults.global.legend.labels.boxWidth=12,e.Chart.defaults.global.tooltips.cornerRadius=3,e.Chart.defaults.global.tooltips.displayColors=!1,e.Chart.defaults.global.tooltips.backgroundColor="rgba(0,0,0,0.65)",e.Chart.defaults.global.elements.rectangle.borderWidth=1,e.Chart.defaults.global.elements.rectangle.backgroundColor=t.primary,e.Chart.defaults.global.elements.arc.borderWidth=1,{restrict:"E",scope:!0,controller:"ChartCtrl as $ctrl",bindToController:{type:"@chartType",labels:"<chartLabels",data:"<chartData",options:"<chartOptions",config:"<"},template:"<canvas></canvas>"}}]).controller("ChartCtrl",["$scope","$element","$window","helper",function(e,t,r,n){var o,a=this,l={maintainAspectRatio:!1},s={backgroundColor:["#317da3","#e6194b","#3cb44b","#ffe119","#f58231","#911eb4","#aa6e28","#008080","#808080","#800000","#3244a1","#e64c19","#3db372","#d1ff1a","#f5c131","#b31e81","#a89728","#005580","#806659","#804000"],hoverBorderWidth:2,hoverBorderColor:"#fff"};a.$onDestroy=function(){o&&o.destroy()},a.$onChanges=function(e){var n;if(a.config){var i;o&&o.destroy();var c=_({},a.config);return c.options=_({},c.options,{},l),c.data=_({},c.data),c.data.datasets=E()(i=c.data.datasets).call(i,(function(e){return _({},s,{},e)})),void(o=new r.Chart(t.children(),c))}if(a.options){var u={labels:a.labels,datasets:O()(n=a.data).call(n)};u.datasets[0]=angular.extend({},s,u.datasets[0]),!o||e.type&&e.type.currentValue!==e.type.previousValue?(o&&o.destroy(),o=new r.Chart(t.children(),{type:a.type,data:u,options:angular.extend({},l,a.options)})):(angular.extend(o.data,u),angular.extend(o.options,l,a.options),o.update())}}}])},uFJl:function(e,t,r){"use strict";r.r(t);var n=r("nbuU"),o=r.n(n),a=r("WSeP"),l=r.n(a),s=r("Xai3"),i=r("kUla");t.default=angular.module("deskworks.reports.incomeByMemberReportData",[s.default.name,i.default.name]).factory("incomeByMemberReportData",["$filter","$translate","helper","reportStyles","reportSort","incomeByMemberReportColumns",function(e,t,r,n,a,s){return function(e,i){var c={columns:s,rows:[],styles:[]},u=[];l()(i).call(i,(function(e){var t;l()(t=e.productCategories).call(t,(function(e){var t;l()(t=e.products).call(t,(function(e){var t=o()(u).call(u,(function(t){return t.name===e.userName}));t||(t={name:e.userName,products:[]},u.push(t)),t.products.push(e)}))}))})),u=a(u,"name");var d=0;return l()(u).call(u,(function(e){var o,s=0;l()(o=a(e.products,"date")).call(o,(function(e,t){c.rows.push([e.userName,e.code,e.name,e.orderNo,e.date,e.qty,e.amount,!1]),c.styles.push(t%2?null:n.rowOdd),s+=r.toNumber(e.amount)})),d+=s,c.rows.push([e.name+" "+t.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL"),!1,!1,!1,!1,!1,!1,r.round(s)]),c.styles.push(n.h2)})),c.rows.push([!1,!1,!1,!1,!1,!1,!1,!1]),c.styles.push(null),c.rows.push([!1,!1,!1,!1,!1,!1,t.instant("INCOME_BY_ITEM_REPORT.TOTALS.INCOME")+":",r.round(d)]),c.styles.push(n.h3),c}}])},ukw3:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.depositTransactionReport.service",["ngResource","deserializeNumbers","datesDeserializer","deskworks.config"]).factory("DepositTransactionReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=n.getApiAbsUrl("/banks/:bankId/deposit-transaction-reports"),a=t(["date","billingMethods.centers.payments.date"]),l=r(["billingMethods.centers.payments.amount"]);return e(o,{bankId:"@bankId",centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,a,l]}})}])},vopJ:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.availabilityReportColumns",[]).factory("availabilityReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n={vacant:[{dataKey:"name",_title:"AVAILABILITY_REPORT.COLUMNS.UNIT",include:!0},{dataKey:"price",_title:"AVAILABILITY_REPORT.COLUMNS.PRICE",include:!0,styles:{halign:"right",cellWidth:"wrap"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"description",_title:"AVAILABILITY_REPORT.COLUMNS.DESCRIPTION",include:!0}],occupied:[{dataKey:"name",_title:"AVAILABILITY_REPORT.COLUMNS.UNIT",include:!0},{dataKey:"attachedUser",_title:"AVAILABILITY_REPORT.COLUMNS.CLIENT",include:!0},{dataKey:"price",_title:"AVAILABILITY_REPORT.COLUMNS.PRICE",include:!0,styles:{halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"discount",_title:"AVAILABILITY_REPORT.COLUMNS.DISCOUNT",include:!0,styles:{halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"netPrice",_title:"AVAILABILITY_REPORT.COLUMNS.NET_PRICE",include:!0,styles:{halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"startDate",_title:"AVAILABILITY_REPORT.COLUMNS.START_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"terminationDate",_title:"AVAILABILITY_REPORT.COLUMNS.TERMINATION_DATE",include:!0,styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}}]};function a(){var e,t;o()(e=n.vacant).call(e,(function(e){e.title=r.instant(e._title)})),o()(t=n.occupied).call(t,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},vtWt:function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n);t.default=angular.module("deskworks.reports.incomeReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.incomeReport.service","deskworks.reports.incomeReportColumns"]).controller("IncomeReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","IncomeReport","incomeReportColumns",function(e,t,r,n,a,l,s,i,c,u,d){var f,p=this;function m(e){var t,r={columns:e.reportColumns.columns,rows:[],styles:[]};return r.rows=o()(t=e.reportData.payments).call(t,(function(e,t){var n;return r.styles.push(t%2?null:i.rowOdd),o()(n=r.columns).call(n,(function(t){return e[t.dataKey]}))})),r.rows.push([!1,!1,!1,!1,!1]),r.styles.push(null),r.rows.push([!1,!1,!1,n.instant("INCOME_REPORT.TOTAL_INCOME")+":",e.reportData.total]),r.styles.push(i.h3),r}p.config={reportName:n.instant("INCOME_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:d},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return u.get({centerId:p.config.reportOptions.centerId,fromDate:r("date")(p.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(p.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:p.config.reportOwnerRegion.ownerId,regionId:p.config.reportOwnerRegion.regionId}).$promise}},a.setPageTitle(n.instant("INCOME_REPORT.PAGE_TITLE")),p.config.reportDates.fromDate.date(1),p.config.reportDates.toDate.add(1,"M").date(0),p.reportBuilder=new c(p.config),e.$watch((function(e){return{reportOptions:p.config.reportOptions,reportDates:p.config.reportDates,reportOwnerRegion:p.config.reportOwnerRegion}}),(function(e,r){f&&(t.cancel(f),f=null),f=t((function(t){if(p.pdf=null,!angular.isUndefined(p.config.reportOptions.centerId)){var n=e.reportDates.fromDate,o=r.reportDates.fromDate;!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(p.config.reportData=null),n=e.reportDates.toDate,o=r.reportDates.toDate,!moment.isMoment(n)||moment.isMoment(o)&&n.isSame(o)||(p.config.reportData=null),p.reportBuilder.buildPdf(m).then((function(e){p.pdf=e}))}}),100)}),!0),p.downloadPdf=function(){p.pdf&&s(p.pdf,p.reportBuilder.getReportFileName("pdf"))},p.downloadCsv=function(){p.pdf&&s(p.reportBuilder.buildCsv(m),p.reportBuilder.getReportFileName("csv"))}}])},"xU/f":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.accountsReceivableReport.service",["ngResource","datesDeserializer","deserializeNumbers","deskworks.config"]).factory("AccountsReceivableReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=t(["payments.date","payments.dateDue"]),a=r(["payments.amountDue","payments.amount"]);return e(n.getApiAbsUrl("/centers/:centerId/accounts-receivable-reports"),{centerId:"@centerId",date:"@date"},{get:{method:"GET",transformResponse:[angular.fromJson,o,a]}})}])},xWoj:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.depositTransactionReportColumns",["deskworks.helper"]).factory("depositTransactionReportColumns",["$rootScope","$filter","$translate","helper",function(e,t,r,n){var a=[{dataKey:"reference",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.REFERENCE",include:!0,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"userName",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.USER_NAME",include:!0,defaultOrder:!0},{dataKey:"payorName",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.PAYOR",include:!0},{dataKey:"userCompany",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.COMPANY",include:!0},{dataKey:"amount",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"subtotal",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.SUBTOTAL",include:!0,readonly:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.TOTAL",include:!0,readonly:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"orderId",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.ORDER_ID",include:!1,styles:{cellWidth:"wrap",halign:"right"}}];function l(){o()(a).call(a,(function(e){e.title=r.instant(e._title)}))}return l(),e.$on("$setTranslationsSuccess",l),a}])},ynEu:function(e,t,r){"use strict";r.r(t);r("y89P"),r("X5mX");var n=r("YtL8"),o=r.n(n),a=r("xeXu"),l=r.n(a),s=r("hsT8"),i=r.n(s),c=r("6RpP"),u=r.n(c),d=r("WSeP"),f=r.n(d),p=r("yCd9"),m=r.n(p),g=r("ipr/"),v=r.n(g),h=r("92Gs");t.default=angular.module("deskworks.CheckInReportCtrl",["pdfPreview","fileSaver","chart","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.CheckInReport","deskworks.checkInReportColumns","deskworks.checkInReportTotalsColumns","deskworks.reports.checkInReportBarChart",h.default.name]).controller("CheckInReportCtrl",["$scope","$location","$timeout","$translate","$filter","state","fileSaver","reportStyles","ReportBuilder","CheckInReport","checkInReportBarChart","checkInReportColumns","checkInReportTotalsColumns","reportGroupBy",function(e,t,r,n,a,s,c,d,p,g,h,R,y,O){var T,E=this;function C(e){var t,r={columns:R,rows:[],styles:[]},o=O(e.reportData,e.orderBy),a=m()(t=Array.apply(null,new Array(r.columns.length))).call(t,(function(){return!1}));return f()(o).call(o,(function(e){var t,o=0;f()(e).call(e,(function(e,t){var n;r.rows.push(m()(n=r.columns).call(n,(function(t){return e[t.dataKey]}))),r.styles.push(t%2?null:d.rowOdd),o+=e.duration})),r.rows.push(u()(t=v()(a).call(a,0,r.columns.length-2)).call(t,[n.instant("CHECK_IN_REPORT.COLUMNS.SUBTOTAL")+":",o])),r.styles.push(d.h2)})),r}function b(e){var t={userName:["userName","totalHoursTimeRange"],userCompany:["userCompany","totalHoursTimeRange"],checkInTime:["date","totalHoursDay"]},r={columns:i()(y).call(y,(function(r){var n;return l()(n=t[e.orderBy]).call(n,r.dataKey)>=0})),rows:[],styles:[]},n=O(e.reportData,e.orderBy);return f()(n).call(n,(function(t,n){var a=o()(t).call(t,(function(e,t){return e+t.duration}),0);r.rows.push([t[0][e.orderBy],a]),r.styles.push(n%2?null:d.rowOdd)})),r}E.config={reportName:n.instant("CHECK_IN_REPORT.REPORT_NAME"),reportOptions:{},orderBy:"checkInTime",reportColumns:{columns:R},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return g.query({centerId:E.config.reportOptions.centerId,fromDate:a("date")(E.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:a("date")(E.config.reportDates.toDate,"yyyy-MM-dd")})}},s.setPageTitle(E.config.reportName),E.config.reportDates.fromDate.date(1),!1!==E.config.orderBy&&(e.$watch((function(){return t.search().orderBy}),(function(e){E.config.orderBy=e||"checkInTime"})),e.$watch("$ctrl.config.orderBy",(function(e){t.search("orderBy",e).replace()}))),E.reportBuilder=new p(E.config),e.$watch((function(){return{reportOptions:E.config.reportOptions,reportDates:E.config.reportDates,orderBy:E.config.orderBy}}),(function(e,t){T&&(r.cancel(T),T=null),T=r((function(){if(E.pdf=null,E.config.reportDates.fromDate&&E.config.reportDates.toDate){var r=e.reportDates.fromDate,n=t.reportDates.fromDate;!moment.isMoment(r)||moment.isMoment(n)&&r.isSame(n)||(E.config.reportData=null),r=e.reportDates.toDate,n=t.reportDates.toDate,!moment.isMoment(r)||moment.isMoment(n)&&r.isSame(n)||(E.config.reportData=null);new jsPDF(E.config.reportOptions.paperLayout,"pt",E.config.reportOptions.paperSize);E.reportBuilder.generatePdf(C).then((function(e){var t,r=angular.copy(d);r.startY=e.previousAutoTable.finalY+40,r.tableMargin=v()(t=d.pageMargins).call(t),r.tableMargin[3]=340,E.reportBuilder.generatePdf(b,r,e).then((function(e){E.pdf=e.output("blob")})).then((function(){var e,t,r;E.bar=(e=E.config,t=O(e.reportData,e.orderBy),r=m()(t).call(t,(function(t){var r=o()(t).call(t,(function(e,t){return e+t.duration}),0);return{name:"checkInTime"===e.orderBy?a("date")(t[0][e.orderBy]):t[0][e.orderBy],value:r}})),h.getChartConfig(r,e.orderBy))}))}))}}),100)}),!0),E.downloadPdf=function(){E.pdf&&c(E.pdf,E.reportBuilder.getReportFileName("pdf"))},E.downloadCsv=function(){E.pdf&&(c(E.reportBuilder.buildCsv(C),E.reportBuilder.getReportFileName("csv","-main")),c(E.reportBuilder.buildCsv(b),E.reportBuilder.getReportFileName("csv","-totals")))}}])}}]);