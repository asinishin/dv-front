{"version":3,"sources":["webpack:///./bundles/kisi sync .*\\.tpl\\.html$","webpack:///./bundles/kisi sync \\..+\\/.+\\.js$","webpack:///./bundles/kisi/access-group/kisi-access-group.directive.js","webpack:///./bundles/kisi/access-group/kisi-access-group.tpl.html","webpack:///./bundles/kisi/index.js","webpack:///./bundles/kisi/services/kisi-access-group.service.js","webpack:///./bundles/kisi/services/kisi-center.service.js","webpack:///./bundles/kisi/services/kisi-place.service.js","webpack:///./bundles/kisi/services/kisi-settings.service.js","webpack:///./bundles/kisi/services/kisi-user.service.js","webpack:///./bundles/kisi/settings/kisi-settings.directive.js","webpack:///./bundles/kisi/settings/kisi-settings.tpl.html"],"names":["angular","module","directive","templateUrl","restrict","scope","controller","bindToController","userId","save","$q","dwAlerts","helper","state","KisiCenter","KisiUser","KisiAccessGroup","$ctrl","$onInit","load","query","catch","err","error","then","kisiCenters","kisiCenter","getCurrentCenterId","enabled","promises","kisiPlaceId","kisiGroups","isUid","kisiUser","get","all","result","kisiGroupId","defaultKisiGroupId","length","id","index","$injector","importAll","r","js","require","loadNewModules","m","default","name","invoke","$templateCache","ctx","forEach","key","put","replace","factory","$resource","deskworksConfig","res","getApiAbsUrl","placeId","$promise","groups","unshift","update","method","data","centerId","debounce","centerService","KisiSettings","KisiPlace","kisiSettings","centers","getCenters","kisiPlaces","spin","finally","$$name","loadKisiGroups","saveSettings","form","$invalid","saveCenter","center","$$spin","changePlace","$$kisiGroups","when"],"mappings":"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","file":"kisi~._bundles_kisi .js?_rev=138ea3bee75dc5e97e76","sourcesContent":["var map = {\n\t\"./access-group/kisi-access-group.tpl.html\": \"./bundles/kisi/access-group/kisi-access-group.tpl.html\",\n\t\"./settings/kisi-settings.tpl.html\": \"./bundles/kisi/settings/kisi-settings.tpl.html\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/kisi sync recursive .*\\\\.tpl\\\\.html$\";","var map = {\n\t\"./access-group/kisi-access-group.directive.js\": \"./bundles/kisi/access-group/kisi-access-group.directive.js\",\n\t\"./services/kisi-access-group.service.js\": \"./bundles/kisi/services/kisi-access-group.service.js\",\n\t\"./services/kisi-center.service.js\": \"./bundles/kisi/services/kisi-center.service.js\",\n\t\"./services/kisi-place.service.js\": \"./bundles/kisi/services/kisi-place.service.js\",\n\t\"./services/kisi-settings.service.js\": \"./bundles/kisi/services/kisi-settings.service.js\",\n\t\"./services/kisi-user.service.js\": \"./bundles/kisi/services/kisi-user.service.js\",\n\t\"./settings/kisi-settings.directive.js\": \"./bundles/kisi/settings/kisi-settings.directive.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/kisi sync recursive \\\\..+\\\\/.+\\\\.js$\";","/**\n * Product -> Kisi Access Group directive\n */\nexport default angular.module('deskworks.kisiAccessGroupDirective', [\n  'deskworks.KisiCenter',\n  'deskworks.KisiUser',\n  'deskworks.KisiAccessGroup',\n])\n\n  .directive('kisiAccessGroup', function() {\n    const templateUrl = 'access-group/kisi-access-group.tpl.html';\n    return {\n      templateUrl,\n      restrict: 'E',\n      scope: true,\n      controller: 'KisiAccessGroupCtrl as $ctrl',\n      bindToController: {\n        userId: '<',\n        save: '=',\n      },\n    };\n  })\n\n  .controller('KisiAccessGroupCtrl', function($q, dwAlerts, helper, state, KisiCenter, KisiUser, KisiAccessGroup) {\n    const $ctrl = this;\n\n    $ctrl.$onInit = () => {\n      $ctrl.load();\n    };\n\n    /**\n     * Load data\n     */\n    $ctrl.load = () => {\n      return KisiCenter.query()\n        .catch(err => dwAlerts.error(err, 'Failed to query Kisi centers.'))\n        .then(kisiCenters => {\n          $ctrl.kisiCenter = helper.find(kisiCenters, state.getCurrentCenterId());\n\n          if (!$ctrl.kisiCenter || !$ctrl.kisiCenter.enabled) return;\n\n          const promises = {};\n\n          if ($ctrl.kisiCenter.kisiPlaceId) {\n            promises.kisiGroups = KisiAccessGroup.query($ctrl.kisiCenter.kisiPlaceId)\n              .catch(err => dwAlerts.error(err, 'Failed to query Kisi access groups.'));\n          }\n\n          if ($ctrl.userId && $ctrl.userId !== 'new' && !helper.isUid($ctrl.userId)) {\n            promises.kisiUser = KisiUser.get(state.getCurrentCenterId(), $ctrl.userId)\n              .catch(err => dwAlerts.error(err, 'Failed to get Kisi user.'));\n          }\n\n          return $q.all(promises)\n            .then(result => {\n              if (result.kisiUser) {\n                $ctrl.kisiUser = result.kisiUser;\n              } else {\n                $ctrl.kisiUser = { kisiGroupId: $ctrl.kisiCenter.defaultKisiGroupId };\n              }\n\n              $ctrl.kisiGroups = result.kisiGroups;\n              // expose save method only if have accessGroups and enabled\n              if ($ctrl.kisiGroups && $ctrl.kisiGroups.length && $ctrl.kisiCenter.enabled) $ctrl.save = save;\n            });\n        });\n    };\n\n    /**\n     * Save Kisi user\n     */\n    function save() {\n      if (!$ctrl.kisiCenter.enabled) return;\n\n      $ctrl.kisiUser.id = $ctrl.userId;\n      return KisiUser.save(state.getCurrentCenterId(), $ctrl.kisiUser)\n        .catch(err => dwAlerts.error(err, 'Failed to save Kisi user.'));\n    }\n  });\n","// Module\nvar code = \"<label class=\\\"ff-row animate-collapse\\\" ng-if=\\\"$ctrl.kisiGroups.length && $ctrl.kisiCenter.enabled\\\"> <ff-label flex=\\\"0 1 116px\\\"><span translate=\\\"USER_PROFILE.MEMBERSHIP.KISI_ACCESS_GROUP\\\"></span></ff-label> <ff-select name=\\\"kisiGroupId\\\" ff-model=\\\"$ctrl.kisiUser.kisiGroupId\\\" ff-options=\\\"opt.id as opt.name for opt in $ctrl.kisiGroups\\\"> </ff-select> </label> \";\n// Exports\nmodule.exports = code;","const index = ['$injector', function index($injector) {\n  // JS\n  const importAll = r => r.keys().map(r);\n  const js = importAll(require.context('./', true, /\\..+\\/.+\\.js$/));\n  $injector.loadNewModules(js.map(m => m.default.name));\n\n  // Templates\n  $injector.invoke(['$templateCache', function($templateCache) {\n    const ctx = require.context('./', true, /.*\\.tpl\\.html$/);\n    ctx.keys().forEach(key => $templateCache.put(key.replace(/^\\.\\//, ''), ctx(key)));\n  }]);\n}];\n\nexport default index;\n","export default angular.module('deskworks.KisiAccessGroup', [\n  'ngResource',\n  'deskworks.config',\n])\n\n  .factory('KisiAccessGroup', function($resource, deskworksConfig) {\n    const res = $resource(deskworksConfig.getApiAbsUrl('/kisi/kisi-places/:placeId/kisi-groups'));\n\n    return {\n      query: placeId => {\n        return res.query({ placeId }).$promise\n          .then(groups => {\n            groups.unshift({ id: null, name: 'No Access' });\n            return groups;\n          });\n      },\n    };\n  });\n","export default angular.module('deskworks.KisiCenter', [\n  'ngResource',\n  'deskworks.config',\n])\n\n  .factory('KisiCenter', function($resource, deskworksConfig) {\n\n    const res = $resource(deskworksConfig.getApiAbsUrl('/kisi/centers/:centerId'), {}, {\n      update: { method: 'PUT' },\n    });\n\n    return {\n      query: () => res.query().$promise,\n\n      save: data => res.update({ centerId: data.id }, data).$promise,\n    };\n  });\n","export default angular.module('deskworks.KisiPlace', [\n  'ngResource',\n  'deskworks.config',\n])\n\n  .factory('KisiPlace', function($resource, deskworksConfig) {\n\n    const res = $resource(deskworksConfig.getApiAbsUrl('/kisi/kisi-places'), {}, {\n      update: { method: 'PUT' },\n    });\n\n    return {\n      query: () => res.query().$promise,\n    };\n  });\n","export default angular.module('deskworks.KisiSettings', [\n  'ngResource',\n  'deskworks.config',\n])\n\n  .factory('KisiSettings', function($resource, deskworksConfig) {\n\n    const res = $resource(deskworksConfig.getApiAbsUrl('/kisi/settings'), {}, {\n      update: { method: 'PUT' },\n    });\n\n    return {\n      get: () => res.get().$promise,\n\n      save: data => res.update({}, data).$promise,\n    };\n  });\n","export default angular.module('deskworks.KisiUser', [\n  'ngResource',\n  'deskworks.config',\n])\n\n  .factory('KisiUser', function($resource, deskworksConfig) {\n\n    const res = $resource(deskworksConfig.getApiAbsUrl('/kisi/centers/:centerId/users/:userId'), {}, {\n      update: { method: 'PUT' },\n    });\n\n    return {\n      get: (centerId, userId) => res.get({ centerId, userId }).$promise,\n\n      save: (centerId, data) => res.update({ centerId, userId: data.id }, data).$promise,\n    };\n  });\n","/**\n * Integrations Setup -> Kisi Settings directive\n */\nexport default angular.module('deskworks.kisiSettingsDirective', [\n  'debounce',\n  'deskworks.KisiSettings',\n  'deskworks.KisiCenter',\n  'deskworks.KisiPlace',\n  'deskworks.KisiAccessGroup',\n  'deskworks.center.service',\n])\n\n  .directive('kisiSettings', function() {\n    const templateUrl = 'settings/kisi-settings.tpl.html';\n    return {\n      templateUrl,\n      restrict: 'E',\n      scope: true,\n      controller: 'KisiSettingsCtrl as $ctrl',\n    };\n  })\n\n  .controller('KisiSettingsCtrl', function(dwAlerts, $q, debounce, helper, centerService,\n                                           KisiSettings, KisiCenter, KisiAccessGroup, KisiPlace) {\n    const $ctrl = this;\n\n    $ctrl.$onInit = () => {\n      $ctrl.load();\n    };\n\n    /**\n     * Load settings\n     */\n    $ctrl.load = () => {\n      const promises = {\n        kisiSettings: KisiSettings.get()\n          .catch(err => dwAlerts.error(err, 'Failed to load Kisi settings.')),\n        centers: centerService.getCenters()\n          .catch(err => dwAlerts.error(err, 'Failed to query centers.')),\n        kisiCenters: KisiCenter.query()\n          .catch(err => dwAlerts.error(err, 'Failed to query Kisi centers.')),\n        kisiPlaces: KisiPlace.query()\n          .catch(err => dwAlerts.error(err, 'Failed to query Kisi places.')),\n      };\n\n      $ctrl.spin = true;\n\n      return $q.all(promises)\n        .then(result => {\n          $ctrl.kisiSettings = result.kisiSettings;\n          $ctrl.kisiCenters = result.kisiCenters;\n          $ctrl.kisiPlaces = result.kisiPlaces;\n          return result;\n        })\n        .finally(() => { $ctrl.spin = false; })\n\n        .then(result => {\n          const promises = $ctrl.kisiCenters\n            .map(kisiCenter => {\n              kisiCenter.$$name = (helper.find(result.centers, kisiCenter.id) || {}).name;\n              return loadKisiGroups(kisiCenter);\n            });\n\n          return $q.all(promises);\n        });\n    };\n\n    /**\n     * Save Kisi settings\n     */\n    $ctrl.saveSettings = debounce(saveSettings, 1000);\n    function saveSettings(form) {\n      if (form && form.$invalid) return;\n      $ctrl.spin = true;\n      return KisiSettings.save($ctrl.kisiSettings)\n        .catch(err => dwAlerts.error(err, 'Failed to save Kisi settings.'))\n        .finally(() => { $ctrl.spin = false; })\n        .then(() => {\n          delete $ctrl.kisiCenters;\n          return $ctrl.load();\n        });\n    }\n\n    /**\n     * Save Kisi center\n     */\n    $ctrl.saveCenter = debounce(saveCenter, 500);\n    function saveCenter(center, form) {\n      if (form && form.$invalid) return;\n      center.$$spin = true;\n      return KisiCenter.save(center)\n        .finally(() => { center.$$spin = false; })\n        .catch(err => dwAlerts.error(err, 'Failed to save Kisi center.'));\n    }\n\n    /**\n     * Change Kisi Place handler\n     */\n    $ctrl.changePlace = (center, form) => {\n      return loadKisiGroups(center)\n        .then(() => $ctrl.saveCenter(center, form));\n    };\n\n    function loadKisiGroups(center) {\n      center.$$kisiGroups = null;\n\n      if (!center.kisiPlaceId) return $q.when(null);\n\n      center.$$spin = true;\n      return KisiAccessGroup.query(center.kisiPlaceId)\n        .catch(err => dwAlerts.error(err, 'Failed to query Kisi access groups.'))\n        .then(kisiGroups => { center.$$kisiGroups = kisiGroups; return kisiGroups; })\n        .finally(() => { center.$$spin = false; });\n    }\n  });\n","// Module\nvar code = \"<ff-panel> <ff-panel-header ff-spin=\\\"$ctrl.spin\\\" class=\\\"ff-spin-right\\\"> <span translate=\\\"INTEGRATIONS_SETUP.KISI.HEADER\\\"></span> </ff-panel-header> <form name=\\\"form\\\" novalidate ff-dim=\\\"$ctrl.spin\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"0 0 120px\\\"><req translate=\\\"INTEGRATIONS_SETUP.API_KEY\\\"></req></ff-label> <ff-text ff-model=\\\"$ctrl.kisiSettings.apiKey\\\" ff-change=\\\"$ctrl.saveSettings(form)\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'INTEGRATIONS_SETUP.API_KEY' | translate}}\\\"></ff-text> </label> </form> <form name=\\\"form\\\" novalidate ng-repeat=\\\"center in $ctrl.kisiCenters\\\" class=\\\"animate-collapse\\\"> <ff-header ff-dim=\\\"center.$$spin\\\" style=\\\"padding-top:.6rem\\\"><cell>{{center.$$name}}</cell></ff-header> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"1 1 270px\\\"><span translate=\\\"INTEGRATIONS_SETUP.ENABLED\\\"></span></ff-label> <ff-static flex=\\\"1 1 305px\\\"> <ff-checkbox name=\\\"enabled\\\" ff-model=\\\"center.enabled\\\" ff-change=\\\"$ctrl.saveCenter(center, form)\\\"></ff-checkbox> </ff-static> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"1 1 270px\\\"><req translate=\\\"INTEGRATIONS_SETUP.KISI.PLACE\\\"></req></ff-label> <ff-select flex=\\\"1 1 305px\\\" name=\\\"kisiPlaceId\\\" ff-model=\\\"center.kisiPlaceId\\\" ff-required=\\\"true\\\" ff-options=\\\"place.id as place.name for place in $ctrl.kisiPlaces\\\" ff-change=\\\"$ctrl.changePlace(center, form)\\\" ff-validate-alert=\\\"{{'INTEGRATIONS_SETUP.KISI.PLACE' | translate}}\\\"></ff-select> </label> <ff-row ff-dim=\\\"center.$$spin && !center.$$kisiGroups\\\"> <label> <ff-label flex=\\\"1 1 270px\\\"><req translate=\\\"INTEGRATIONS_SETUP.KISI.DEFAULT_ACCESS_GROUP\\\"></req></ff-label> <ff-select flex=\\\"1 1 305px\\\" name=\\\"defaultKisiGroupId\\\" ff-model=\\\"center.defaultKisiGroupId\\\" ff-options=\\\"group.id as group.name for group in center.$$kisiGroups\\\" ff-change=\\\"$ctrl.saveCenter(center, form)\\\" ff-validate-alert=\\\"{{'INTEGRATIONS_SETUP.KISI.DEFAULT_ACCESS_GROUP' | translate}}\\\"></ff-select> </label> </ff-row> </form> </ff-panel> \";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}