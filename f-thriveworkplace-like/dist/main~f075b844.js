(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"+pG2":function(e,r){angular.module("deskworks.userProfile.optsBankAccountHolderType",[]).factory("optsBankAccountHolderType",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:"personal",_name:"BILLING_PROFILE.E_CHECKS.ACCOUNT_HOLDER_TYPE.PERSONAL"},{id:"business",_name:"BILLING_PROFILE.E_CHECKS.ACCOUNT_HOLDER_TYPE.BUSINESS"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},"/HWn":function(e,r,n){"use strict";n.r(r),r.default=angular.module("deskworks.SplashPage",["ngResource","deskworks.config"]).factory("SplashPage",["$resource","deskworksConfig",function(e,r){var n=e(r.getApiAbsUrl("/net-check-in/splash-page/:centerId"),{},{update:{method:"PUT"}});return{get:function(e){return n.get({centerId:e}).$promise},save:function(e,r){return n.update({centerId:e},r).$promise}}}])},"/a+4":function(e,r){angular.module("deskworks.userProfile.optsMailboxHandling",[]).factory("optsMailboxHandling",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:"dropOff",_name:"USER_PROFILE.MAILBOXES.HANDLING.DROP_OFF"},{id:"mailbox",_name:"USER_PROFILE.MAILBOXES.HANDLING.MAILBOX"},{id:"forward",_name:"USER_PROFILE.MAILBOXES.HANDLING.FORWARD"},{id:"email",_name:"USER_PROFILE.MAILBOXES.HANDLING.EMAIL"},{id:"spheremail",_name:"USER_PROFILE.MAILBOXES.HANDLING.SPHEREMAIL"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},0:function(e,r){},"0/9B":function(e,r,n){"use strict";n.r(r);n("3dw1");angular.module("deskworks.UserProfileFields",["ngResource","deskworks.helper"]).factory("UserProfileFields",["$resource","$q","$filter","deskworksConfig","helper",function(e,r,n,t,i){var s=e(t.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/fields"),{},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,function(e){return angular.forEach(e,(function(e){"date"===e.type&&(e.value=n("toDate")(e.value))})),e}]},update:{method:"PUT",transformRequest:[function(e){return angular.forEach(e,(function(e){"date"===e.type&&(e.value=n("date")(e.value,"yyyy-MM-dd"))})),e},angular.toJson]}});return{query:function(e,r){return s.query({centerId:e,userId:r}).$promise},save:function(e,r,n){return s.update({centerId:e,userId:r},n).$promise}}}])},"0fK3":function(e,r){angular.module("deskworks.Credentials",["ngResource","deskworks.config"]).factory("Credentials",["$resource","$timeout","deskworksConfig",function(e,r,n){"use strict";var t=e(n.getApiAbsUrl("/credentials/:login"));return{get:function(e){return t.get({login:e}).$promise.then((function(r){return r.login=e,r}))}}}])},"0vKU":function(e,r,n){"use strict";n.r(r);n("JBxO"),n("FdtR"),n("WoWj"),n("U00V");var t=n("nbuU"),i=n.n(t),s=n("yCd9"),a=n.n(s),o=n("hsT8"),u=n.n(o);angular.module("deskworks.setup.service",["ngResource","ngFileUpload","autoCacheFactory","deskworks.config","deskworks.helper","deskworks.setup.optsInvoiceDate","deskworks.setup.optsReservationCreditsUnit"]).factory("setupService",["$resource","$q","$filter","$http","$timeout","deskworksConfig","helper","Upload","optsInvoiceDate","centerService","userProfileService","autoCacheFactory",function(e,r,t,s,o,d,c,l,m,f,p,g){var h=g("settings",30),I=e(d.getApiAbsUrl("/setup/settings"),{},{get:{method:"GET",cache:h},update:{method:"PUT"}});return{resetCache:function(){h.removeAll()},getSetupSettings:function(){return I.get({}).$promise.then((function(e){return e.invoiceDate=i()(m).call(m,(function(r){return r.id===e.invoiceDate})),e}))},updateSetupSettings:function(e){var r,n,t={locale:e.locale,timeFormat:e.timeFormat,sendNoticesFromLocalCenter:!!e.sendNoticesFromLocalCenter,enableEChecks:e.enableEChecks,skipPlanMemberSignUp:e.skipPlanMemberSignUp,creditCardTypes:e.creditCardTypes,creditCardAddressOptional:e.creditCardAddressOptional,enableEmailing:e.enableEmailing,dashboardIncome:e.dashboardIncome,enableAccessCodes:e.enableAccessCodes,isFranchise:e.isFranchise,activateMembersForAllCenters:e.activateMembersForAllCenters,declinedPaymentAutoRetryPeriod:e.declinedPaymentAutoRetryPeriod,declinedPaymentAutoRetryAttempts:e.declinedPaymentAutoRetryAttempts,enableSecurityDepositInMembershipProducts:e.enableSecurityDepositInMembershipProducts,limitRefundProcessingTo:e.limitRefundProcessingTo,limitDeletingOrderItemsTo:e.limitDeletingOrderItemsTo,enableRenewalNotices:e.enableRenewalNotices,multiLevelProductCategory:e.multiLevelProductCategory,invoiceTemplate:e.invoiceTemplate,enableGdprDelete:e.enableGdprDelete,sweepCharges:!!e.sweepCharges,emailSweptInvoices:!!e.emailSweptInvoices,invoiceDate:e.invoiceDate.id,prorateAtStart:e.prorateAtStart,prorateAtTermination:e.prorateAtTermination,enablePaymentProcessingCharges:!!e.enablePaymentProcessingCharges,paymentProcessingRates:{cc:e.paymentProcessingRates.cc?+e.paymentProcessingRates.cc:0,ach:e.paymentProcessingRates.ach?+e.paymentProcessingRates.ach:0},addCenterPrefixToCalendar:!!e.addCenterPrefixToCalendar,calendarOwners:a()(r=u()(n=e.calendarOwners).call(n,(function(e){return!!e.owner}))).call(r,(function(e){return{id:e.id,owner:angular.isNumber(e.owner)?e.owner:(e.owner||{}).id,mask:e.mask}})),hideReservationCostEstimate:e.hideReservationCostEstimate,hideRecurringReservations:e.hideRecurringReservations,hideStaffOnlyUnits:e.hideStaffOnlyUnits,reservationCreditsUnit:e.reservationCreditsUnit,minPassInPercent:e.minPassInPercent,passGracePeriod:e.passGracePeriod,publicReservationDetails:e.publicReservationDetails,gtmContainerId:e.gtmContainerId,affiliatlyId:e.affiliatlyId,enableAddOnProductsAtRegistration:e.enableAddOnProductsAtRegistration,enableExtraFieldsAtRegistration:e.enableExtraFieldsAtRegistration};return e.sweepCharges&&(t.advanceInvoicingDays=e.advanceInvoicingDays.id),h.removeAll(),I.save({},t).$promise},updateSetupSettingsRaw:function(e){return h.removeAll(),I.save({},e).$promise},queryLocales:function(){return r.when(window.dwLocales)},queryTimezones:function(){return n.e(60).then(n.t.bind(null,"43aQ",3)).then((function(e){return e.default}))}}}])},1:function(e,r){},10:function(e,r){},11:function(e,r){},12:function(e,r){},13:function(e,r){},"1vQf":function(e,r){angular.module("deskworks.CheckedInUsers",["ngResource","deskworks.config"]).factory("CheckedInUsers",["$resource","deskworksConfig",function(e,r){"use strict";var n=e(r.getApiAbsUrl("/centers/:centerId/checked-in-users"));return{query:function(e){return n.query({centerId:e}).$promise}}}])},2:function(e,r){},3:function(e,r){},"3CCV":function(e,r){angular.module("deskworks.optsTaskPermission",[]).factory("optsTaskPermission",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:null,_name:"TASKS.PERMISSION.NONE"},{id:"view",_name:"TASKS.PERMISSION.VIEW"},{id:"edit",_name:"TASKS.PERMISSION.EDIT"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},"3fdG":function(e,r,n){"use strict";n.r(r);var t=n("03wM"),i=n.n(t);n("3dw1");angular.module("deskworks.userRoles",[]).factory("userRoles",["$rootScope","$translate",function(e,r){var n={nonMember:{_name:"GLOBAL.ROLE.NON_MEMBER",color:"default",type:"user"},member:{_name:"GLOBAL.ROLE.MEMBER",color:"primary",type:"user"},accountant:{_name:"GLOBAL.ROLE.ACCOUNTANT",color:"info",type:"admin"},coordinator:{_name:"GLOBAL.ROLE.COORDINATOR",color:"info",type:"admin"},admin:{_name:"GLOBAL.ROLE.ADMIN",color:"info",type:"admin"},management:{_name:"GLOBAL.ROLE.MANAGEMENT",color:"info",type:"admin"},master:{_name:"GLOBAL.ROLE.MASTER",color:"info",type:"admin"}};function t(){i()(n).forEach((function(e){n[e].name=r.instant(n[e]._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},4:function(e,r){},"4LWi":function(e,r){angular.module("deskworks.reservationRules.optsDaysInAdvance",[]).factory("optsDaysInAdvance",["$rootScope","$translate","$filter",function(e,r,n){"use strict";var t=[{id:0,_name:"RESERVATION_RULES.UNLIMITED"},{id:180},{id:120},{id:90},{id:60},{id:45},{id:30},{id:14},{id:7},{id:1}];function i(){t.forEach((function(e){e.name=e._name?r.instant(e._name):n("days")(e.id)}))}return i(),e.$on("$setTranslationsSuccess",i),t}])},5:function(e,r){},"5/NR":function(e,r){angular.module("deskworks.inventory.optsPassMin",[]).factory("optsPassMin",(function(){"use strict";return[{id:"0.25",name:"¼"},{id:"0.5",name:"½"},{id:"1.0",name:"1"},{id:"2.0",name:"2"}]}))},6:function(e,r){},"6CRW":function(e,r,n){"use strict";n.r(r),r.default=angular.module("deskworks.NetCheckInSettings",["ngResource","deskworks.config"]).factory("NetCheckInSettings",["$resource","deskworksConfig",function(e,r){var n=e(r.getApiAbsUrl("/net-check-in/settings/:centerId"),{},{update:{method:"PUT"}});return{get:function(e){return n.get({centerId:e}).$promise},save:function(e,r){return n.update({centerId:e},r).$promise}}}])},"6Yyp":function(e,r){angular.module("deskworks.usageEntryService",["ngResource","deskworks.config","datesDeserializer"]).factory("usageEntryService",["$resource","$q","$filter","deskworksConfig","helper","datesDeserializer",function(e,r,n,t,i,s){"use strict";var a=n("date"),o=s(["usages.checkInTime","usages.checkOutTime"]),u=e(t.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/usage-entries/:usageId"),{},{query:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,o]},save:{method:"POST",transformRequest:[d,angular.toJson]},update:{method:"PUT",transformRequest:[d,angular.toJson]}});function d(e){return(e=angular.extend({},e)).checkInTime=a(e.checkInTime,"iso"),e.checkOutTime=a(e.checkOutTime,"iso"),e}return{query:function(e,r,n,t){return u.query({userId:r,centerId:e,page:n,pageSize:t}).$promise},get:function(e,n,t){return"new"===t?r.when({id:"new",checkInTime:moment(),checkOutTime:moment(),notes:""}):u.query({userId:n,centerId:e}).$promise.then((function(e){var n=i.findByKeyValue(e.usages,"id",t);return n||r.reject({data:{error:"Failed to find usage with id="+t}})}))},save:function(e,r,n){return n.id&&"new"!==n.id?u.update({userId:r,centerId:e,usageId:n.id},n).$promise:u.save({userId:r,centerId:e},n).$promise},delete:function(e,r,n){return u.delete({userId:r,centerId:e,usageId:n}).$promise}}}])},"6gKm":function(e,r){angular.module("deskworks.userProfile.optsMembershipStatus",[]).factory("optsMembershipStatus",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:"active",_name:"USER_PROFILE.MEMBERSHIP.STATUS.ACTIVE",import:"Active"},{id:"inactive",_name:"USER_PROFILE.MEMBERSHIP.STATUS.INACTIVE",import:"Inactive"},{id:"nonMember",_name:"USER_PROFILE.MEMBERSHIP.STATUS.NON_MEMBER",import:"Non-Member"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},7:function(e,r){},"75b4":function(e,r,n){"use strict";n.r(r);n("3dw1"),n("8cZI"),n("Muwe"),n("X5mX");var t=n("nbuU"),i=n.n(t),s=n("s9m1");r.default=angular.module("deskworks.userProfile.service",[s.a.name,"ngResource","ngFileUpload","deskworks.config","deskworks.userProfile.cache","deskworks.helper","deskworks.system.service","deskworks.userProfile.service.photo","deskworks.userProfile.service.address","deskworks.userProfile.service.phone","deskworks.userProfile.service.printerCode","deskworks.userProfile.service.document","deskworks.userProfile.service.coMember","deskworks.userProfile.service.mailbox","deskworks.userProfile.service.creditCard","deskworks.userProfile.service.eCheck","deskworks.UserProfileFields","deskworks.userProfile.optsMembershipStatus","deskworks.userProfile.optsBillingMethod","deskworks.userProfile.optsCCExpiryMonth","deskworks.userProfile.optsCCExpiryYear"]).factory("userProfileService",["$resource","$q","$timeout","$filter","dwAlerts","Upload","deskworksConfig","userProfileCache","helper","upPhotoService","upAddressService","upPhoneService","upPrinterCodeService","upDocumentService","upCoMemberService","upMailboxService","upCreditCardService","systemService","upECheckService","optsMembershipStatus","optsBillingMethod","optsCCExpiryMonth","optsCCExpiryYear","UserProfileFields","secure3d",function(e,r,n,t,s,a,o,u,d,c,l,m,f,p,g,h,I,k,v,y,S,A,E,b,T){var w=e(o.getApiAbsUrl("/centers/:centerId/user-profiles/:userId"),{},{get:{method:"GET",cache:u},query:{method:"GET",isArray:!1}}),C=e(o.getApiAbsUrl("/centers/:centerId/members/:userId"),{},{get:{method:"GET",cache:u},update:{method:"PUT"}}),R=e(o.getApiAbsUrl("/centers/:centerId/non-members/:userId"),{},{get:{method:"GET",cache:u},update:{method:"PUT"}}),$=e(o.getApiAbsUrl("/restore-password"),{},{update:{method:"PUT"}}),P=e(o.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/gdpr"));function U(e){return e&&e.membershipStatus&&("active"===e.membershipStatus.id||"inactive"===e.membershipStatus.id)?C:R}return{phone:m,address:l,printerCode:f,document:p,photo:c,creditCard:I,eCheck:v,coMember:g,mailbox:h,resetCache:function(){u.removeAll()},new:function(e,r,n){var t=this;return("member"===r?C:R).get({centerId:e.id||0,userId:"new",scenario:n}).$promise.then((function(s){return s.id=d.uid(),s.isNew=function(){return t.isNew(this)},t.resolve(s),s.addresses="nonMember"===r&&"register"===n?[]:[l.new(e.countryId,e.state)],s.phones=[m.new()],s.printerCodes=[],s.documents=[],s.coMembers=[],s.mailboxes=[],s.accessCards=[],s.billingMethod=s.billingMethod||S[0].id,"member"===r&&"register"===n&&(s.membershipStatus=i()(d).call(d,y,"active"),s.membershipStartDate=moment()),s}))},isNew:function(e){return e&&d.isUid(e.id)},save:function(e,r,n){return u.removeAll(),d.isUid(r.id)||!r.id?U(r).save({centerId:e||0,registration:n},this.unresolve(r)).$promise.then((function(e){return r.id=e.id,e})):U(r).update({centerId:e||0,userId:r.id},this.unresolve(r)).$promise},updateRaw:function(e,r,n){return u.removeAll(),U(r).update({centerId:e||0,userId:r.id},n).$promise},get:function(e,r){var n=this;return w.get({centerId:e||0,userId:r}).$promise.then((function(e){return e.schema=e.schema||{},n.resolve(e)}))},getForRegistration:function(e,r,n,t){var i=this;return("member"===n?C:R).get({centerId:e||0,userId:r,scenario:t}).$promise.then((function(e){return e.billingMethod=e.billingMethod||S[0].id,i.resolve(e)}))},search:function(e,r){return r.joinDate=t("date")(r.joinDate,"yyyy-MM-dd"),(r=angular.extend({pageSize:100,sort:"lastName",order:1},r)).centerId=e||0,w.query(r).$promise.then((function(e){return e.users.forEach((function(e){e.fullName=e.fullName||d.join([e.firstName,e.lastName]," "),e.login=d.stripUid(e.login),e.email=d.stripUid(e.email),e.joinDate=t("toDate")(e.joinDate)})),e}))},query:function(e,r){return r=angular.extend({pageSize:0},r),this.search(e,r).then((function(e){return e.users}))},quickSearch:function(e,r){var n={centerId:e||0,quickSearch:r,pageSize:50,activeMembers:!0,nonMembers:!0};return this.search(e,n).then((function(e){return e.users}))},restorePassword:function(e){return u.removeAll(),$.save({},e).$promise},delete:function(e,r){return w.delete({centerId:e||0,userId:r}).$promise},deleteGdpr:function(e,r){return u.removeAll(),P.delete({centerId:e||0,userId:r}).$promise},resolve:function(e){var r=this;return e.fullName=d.join([e.firstName,e.lastName]," "),e.fullNameCompany=d.join([e.company,e.fullName],", "),e.login=d.stripUid(e.login),e.email=d.stripUid(e.email),e.joinDate=t("toDate")(e.joinDate),e.membershipStatus=i()(d).call(d,y,e.membershipStatus),e.membershipPriceList=i()(d).call(d,(e.options||{}).membershipPriceLists,e.membershipPriceListId),e.leadSource=i()(d).call(d,(e.options||{}).leadSources,e.leadSourceId),(e.addresses||[]).forEach((function(r){l.resolve(r),r.type&&4===r.type.id&&!e.billingAddress&&(e.billingAddress=r)})),!e.billingAddress&&e.addresses&&e.addresses.length>0&&(e.billingAddress=e.addresses[0]),(e.phones||[]).forEach((function(e){m.resolve(e)})),(e.coMembers||[]).forEach((function(e){r.coMember.resolve(e)})),(e.mailboxes||[]).forEach((function(e){r.mailbox.resolve(e)})),(e.creditCards||[]).forEach((function(e){r.creditCard.resolve(e)})),(e.eChecks||[]).forEach((function(e){r.eCheck.resolve(e)})),e.isNew=function(){return r.isNew(this)},e},unresolve:function(e){var r={login:e.login,password:e.password,passwordConfirmation:e.passwordConfirmation,email:e.email,firstName:e.firstName,lastName:e.lastName,middleName:e.middleName,occupation:e.occupation,company:e.company,leadSourceId:(e.leadSource||{}).id,comments:e.comments,membershipPriceListId:(e.membershipPriceList||{}).id,membershipProductId:(e.membershipProduct||{}).id,membershipStatus:(e.membershipStatus||{}).id,membershipStartDate:t("date")(e.membershipStartDate,"yyyy-MM-dd")};return e.discountCode&&(r.discountCode=e.discountCode),r},bindTestUserGenerator:function(e,r,n){function t(t){if(t.altKey&&84===t.keyCode){var i="test"+moment().unix();r.firstName=i,r.lastName=i,r.email=i+"@z5ut48g83bf04bvg93f.com",(!n||n.member||n.selfRegistration)&&(r.login=i,r.password="Zx123456",r.passwordConfirmation="Zx123456"),r.addresses&&r.addresses.length&&(r.addresses[0].street="test123",r.addresses[0].city="test123",r.addresses[0].zip="test123"),r.phones&&r.phones.length&&(r.phones[0].number="1234567890"),n&&n.member&&!n.selfRegistration&&(r.membershipType=r.options.membershipTypes[0],r.membershipProduct=r.options.membershipTypes[0].membershipPackages[0],r.membershipPriceList=r.options.membershipPriceLists[0]),r.leadSource=r.options.leadSources[0],r.termsOfService=!0,e.$apply()}}document.addEventListener("keydown",t),e.$on("$destroy",(function(){document.removeEventListener("keydown",t)}))},bindTestBillingGenerator:function(e,r,n){var t=this;function i(n){n.altKey&&84===n.keyCode&&(r.creditCards.forEach((function(e){t.creditCard.isNew(e)&&(e.number="4111111111111111",e.cvv="123",e.expiryMonth=A[5],e.expiryYear=E[5])})),r.eChecks.forEach((function(e){t.eCheck.isNew(e)&&(e.bankName="Test Bank",e.bankRoutingNumber="021000021",e.bankAccountNumber="9876543210")})),e.$apply())}document.addEventListener("keydown",i),e.$on("$destroy",(function(){document.removeEventListener("keydown",i)}))},registerNewUser:function(e,n,t,i){var a=this;return a.save(e,n,t).catch((function(e){return s.error(e,"Failed to create user profile.")})).then((function(){var t=[];return t.push(a.photo.save(e,n).catch((function(e){return s.error(e,"Failed to upload photo.")}))),n.addresses.forEach((function(r){t.push(a.address.save(e,n.id,r).catch((function(e){return s.error(e,"Failed to create address.")})))})),n.phones.forEach((function(r){t.push(a.phone.save(e,n.id,r).catch((function(e){return s.error(e,"Failed to create phone.")})))})),n.printerCodes.forEach((function(r){t.push(a.printerCode.save(e,n.id,r).catch((function(e){return s.error(e,"Failed to create printer code.")})))})),n.documents.forEach((function(r){t.push(a.document.save(e,n.id,r).catch((function(e){return s.error(e,"Failed to create document.")})))})),n.accessCards.forEach((function(r){r.userId=n.id,t.push(k.createAccessCard(e,r).catch((function(e){return s.error(e,"Failed to create access card.")})))})),i&&t.push(b.save(e,n.id,i).catch((function(e){return s.error(e,"Failed to save custom fields.")}))),n.saveMessageBoardUserSettings&&t.push(n.saveMessageBoardUserSettings().catch((function(e){return s.error(e,"Failed to save message board user settings.")}))),r.all(t)}))},saveBillingProfile:function(e){var t=e.centerId,i=e.user,a=e.scope,o=this,u=[];return i.creditCards.forEach((function(e){o.creditCard.isNew(e)&&u.push(o.creditCard.save(t,i.id,e).catch((function(e){return s.error(e,"Failed to create credit card.")})).then((function(r){return r.redirect?T.start(a,e,r).catch((function(e){if(e)return s.error(e.message);throw e})).then((function(){return r})):r})).then((function(e){return n((function(){var r=document.querySelector("#upCreditCard-"+e.id);r&&angular.element(r).scope().$broadcast("ffBlock::EditEnd")}))})))})),angular.forEach(i.eChecks,(function(e){o.eCheck.isNew(e)&&u.push(o.eCheck.save(t,i.id,e).then((function(e){return n((function(){var r=document.querySelector("#upECheck-"+e.id);r&&angular.element(r).scope().$broadcast("ffBlock::EditEnd")}))})).catch((function(e){return s.error(e,"Failed to create eCheck.")})))})),r.all(u).then((function(e){return i.billingMethod&&(i.paymentMethodId||"cc"!==i.billingMethod&&"ach"!==i.billingMethod)||(i.eChecks.length?(i.billingMethod="ach",i.paymentMethodId=i.eChecks[0].id):i.creditCards.length?(i.billingMethod="cc",i.paymentMethodId=i.creditCards[0].id):console.warn("userProfileService.saveBillingProfile: user has no payment methods")),o.saveBillingMethod(t,i).then((function(){return e}))}))},saveBillingMethod:function(e,t){var i=this,a={billingMethod:t.billingMethod,paymentMethodId:t.paymentMethodId},o=0;return r((function(r,u){!function d(){i.updateRaw(e,t,a).then((function(e){return r(e)})).catch((function(e){o<10&&e.data&&e.data.error&&e.data.error.indexOf("Cannot find a payment method with ID")>=0?n((function(){d(),o++}),500):(s.error(e,"Failed to save billing method."),u(e))}))}()}))}}}])},"7NmC":function(e,r,n){"use strict";n.r(r);n("3dw1"),n("JBxO"),n("iPZ8"),n("kypl");r.default=angular.module("deskworks.inventory.product.service",["ngResource","deskworks.config","deskworks.inventory.optsProductType","deskworks.billing.optsBillingFrequency","deskworks.inventory.optsPassMin","deskworks.inventory.optsPassMax"]).factory("productService",["$resource","$q","$filter","deskworksConfig","helper","optsProductType","optsBillingFrequency","optsPassMin","optsPassMax",function(e,r,n,t,i,s,a,o,u){var d=e(t.getApiAbsUrl("/products/:productId"),{},{update:{method:"PUT"}}),c=e(t.getApiAbsUrl("/centers/:centerId/membership-products")),l=e(t.getApiAbsUrl("/products/:productId/price-list-products/:priceListRelId"),{},{update:{method:"PUT"}});return{new:function(){return this.resolve({})},getProducts:function(e){return d.query(e).$promise},getMembershipProducts:function(e){return c.query({centerId:e}).$promise},getProduct:function(e){var r=this;return d.get({productId:e}).$promise.then((function(e){return r.resolve(e)}))},createProduct:function(e){return d.save({},this.unresolve(e)).$promise},updateProduct:function(e){return d.update({productId:e.id},this.unresolve(e)).$promise},deleteProduct:function(e){return d.delete({productId:e}).$promise},save:function(e){return(e.id?d.update({productId:e.id},this.unresolve(e)).$promise:d.save({},this.unresolve(e)).$promise).then((function(r){return e.id=r.id,r}))},createPriceList:function(e,r){return l.save({productId:e},r).$promise},updatePriceList:function(e,r,n){return l.update({productId:e,priceListRelId:r},n).$promise},deletePriceList:function(e,r){return l.delete({productId:e,priceListRelId:r}).$promise},savePriceItem:function(e,r){return(r.id?l.update({productId:e,priceListRelId:r.id},r).$promise:l.save({productId:e},r).$promise).then((function(e){return r.id=e.id,e}))},resolve:function(e){return e.priceLists||(e.priceLists=[]),e.options||(e.options={}),e.options.productTypes=s,e.options.billingFrequencies=a,e.id?(e.typeId=e.type,e.type=i.findByKeyValue(s,"id",e.type),e.options.membershipTypes&&e.options.membershipTypes.length>0&&(e.membershipType=i.findByKeyValue(e.options.membershipTypes,"id",e.membershipTypeId)),e.options.priceLists&&e.options.priceLists.length>0&&e.priceLists.forEach((function(r){r.priceList=i.findByKeyValue(e.options.priceLists,"id",r.priceListId),r.price=n("price")(r.price),r.reservationCredit&&(r.reservationCredit=n("price")(r.reservationCredit)),null===r.passQty&&(r.passQty=0)})),e.billingFrequency=i.findByKeyValue(e.options.billingFrequencies,"id",e.billingFrequency),e.billingFrequency=e.billingFrequency||e.options.billingFrequencies[0],e.passMin=e.passMin||o[0].id,e.passMax=i.findByKeyValue(u,"id",e.passMax)||u[2],e.reservationTypeId=e.reservationTypeId&&e.reservationTypeId.toString()||e.reservationTypeId,e.showInSelfRegistration=!e.hideInSelfRegistration):(e.type=s[0],e.options.membershipTypes&&e.options.membershipTypes.length>0&&(e.membershipType=e.options.membershipTypes[0]),e.billingFrequency=e.options.billingFrequencies[0],e.passMin=o[0].id,e.passMax=u[2],e.taxable=!0,e.reserveWithNonMemberRules=!1,e.countCheckInsPer="company",e.hideInSelfRegistration=!0,e.showInSelfRegistration=!1,e.hasRegistrationFee=!0),e},unresolve:function(e){var r={name:e.name,type:e.type?e.type.id:e.typeId,description:e.description,custom:!!e.custom,productCategoryId:e.productCategoryId,productNumber:""+e.productNumber,taxable:e.taxable,hideInSelfRegistration:!e.showInSelfRegistration,hasRegistrationFee:!!e.hasRegistrationFee,archived:!!e.archived};return e.type&&"membership"===e.type.id&&(r.isCreditable=!!e.isCreditable,r.membershipTypeId=e.membershipType?e.membershipType.id:void 0,r.reserveWithNonMemberRules=!!e.reserveWithNonMemberRules,r.countCheckInsPer=e.countCheckInsPer,r.hasPasses=!!e.hasPasses,r.trackAcrossAllCenters=!!e.trackAcrossAllCenters,r.hasPasses&&e.passProduct&&(r.passProductId=e.passProduct.id),(e.securityDepositAmount||0===e.securityDepositAmount)&&(r.securityDepositAmount=+e.securityDepositAmount),r.printerUsageFreeCopiesSettings=e.printerUsageFreeCopiesSettings),!e.type||"membership"!==e.type.id&&"services"!==e.type.id||(r.billingFrequency=e.billingFrequency.id),e.type&&"rental"===e.type.id&&(r.passSize=e.passSize,r.passMin=e.passMin,r.passMax=e.passMax.id,r.allowReservationCredits=!!e.allowReservationCredits,r.canBuyOnSplashPage=!!e.canBuyOnSplashPage,r.reservationTypeId=e.reservationTypeId),r}}}])},8:function(e,r){},"83so":function(e,r){angular.module("deskworks.setup.optsInvoiceDate",[]).factory("optsInvoiceDate",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:"invoiceDate",_name:"SETUP_SETTINGS.INVOICE_DATE.INVOICE_DATE"},{id:"chargeDate",_name:"SETUP_SETTINGS.INVOICE_DATE.CHARGE_DATE"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},"8jEr":function(e,r,n){"use strict";n.r(r);n("8cZI");angular.module("deskworks.userProfile.service.coMember",["ngResource","deskworks.helper","deskworks.userProfile.cache"]).factory("upCoMemberService",["$resource","deskworksConfig","userProfileCache","helper",function(e,r,n,t){var i=e(r.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/co-members/:coMemberId"),{},{update:{method:"PUT"}});return{new:function(){return{id:t.uid(),accessCards:[]}},isNew:function(e){return e&&t.isUid(e.id)},save:function(e,r,s){return n.removeAll(),t.isUid(s.id)?i.save({centerId:e||0,userId:r},this.unresolve(s)).$promise.then((function(e){return s.id=e.id,s.userId=e.userId,e})):i.update({centerId:e||0,userId:r,coMemberId:s.id},this.unresolve(s)).$promise},delete:function(e,r,t,s){return n.removeAll(),i.delete({centerId:e||0,userId:r,coMemberId:t.id,makeInactive:s}).$promise},resolve:function(e){return e.email=t.stripUid(e.email),e.login=t.stripUid(e.login),e},unresolve:function(e){return{userId:e.userId,existingUserId:e.existingUserId,fullName:e.fullName,email:e.email||t.uid()+"@"+t.uid()+".com",phone:e.phone,login:e.login||t.uid(),password:!t.isUid(e.id)||e.userId||e.existingUserId?e.password||void 0:e.password||t.uid(),notes:e.notes,canMakeReservations:!!e.canMakeReservations,canSeeAccountingInfo:!!e.canSeeAccountingInfo,getCenterNotices:!!e.getCenterNotices}},convertUserToCoMember:function(e){return{id:t.uid(),existingUserId:e.id,fullName:t.join([e.firstName,e.lastName]," "),email:e.email,phone:e.phones&&e.phones.length>0?e.phones[0].number:void 0,login:e.login,notes:e.comments,accessCards:e.accessCards}}}}])},"8prH":function(e,r){angular.module("deskworks.system.service",["ngResource","deskworks.config","deskworks.helper"]).factory("systemService",["$resource","$q","deskworksConfig","helper",function(e,r,n,t){"use strict";var i=e(n.getApiAbsUrl("/system-emails/:systemEmailId"),{},{update:{method:"PUT"}}),s=e(n.getApiAbsUrl("/centers/:centerId/access-cards/:accessCardId"),{},{update:{method:"PUT"}}),a=e(n.getApiAbsUrl("/lead-sources/:leadSourceId"),{},{update:{method:"PUT"}});return{getSystemEmails:function(){return i.query().$promise},getSystemEmail:function(e){return"new"===e?r.when({}):i.query({}).$promise.then((function(n){var i=t.findByKeyValue(n,"id",e);return i||r.reject({data:{error:"System Email not found."}})}))},createSystemEmail:function(e){return i.save({},e).$promise},updateSystemEmail:function(e,r){return i.update({systemEmailId:e},r).$promise},removeSystemEmail:function(e){return i.delete({systemEmailId:e}).$promise},getAccessCard:function(e,n){return"new"===n?r.when({effectiveDate:moment()}):s.query({centerId:e}).$promise.then((function(e){var i=t.findByKeyValue(e,"id",n);return i||r.reject({data:{error:"Access Card not found."}})}))},createAccessCard:function(e,r){return s.save({centerId:e},r).$promise},updateAccessCard:function(e,r,n){return s.update({centerId:e,accessCardId:r},n).$promise},removeAccessCard:function(e,r){return s.delete({centerId:e,accessCardId:r}).$promise},getLeadSources:function(){return a.query().$promise},getLeadSource:function(e){return a.get({leadSourceId:e}).$promise},createLeadSource:function(e){return a.save({},e).$promise},updateLeadSource:function(e,r){return a.update({leadSourceId:e},r).$promise},removeLeadSource:function(e){return a.delete({leadSourceId:e}).$promise}}}])},9:function(e,r){},"9+bO":function(e,r){angular.module("deskworks.membership.service",["ngResource","deskworks.config"]).factory("membershipService",["$resource","deskworksConfig",function(e,r){"use strict";var n=e(r.getApiAbsUrl("/centers/:centerId/membership-types"));return{query:function(e){return n.query({centerId:e}).$promise}}}])},"9Ljv":function(e,r,n){"use strict";n.r(r);var t=n("0zKI"),i=n.n(t);angular.module("deskworks.reservationCategory.service",["ngResource","deskworks.config","ngFileUpload"]).factory("reservationCategoryService",["$resource","$q","Upload","deskworksConfig",function(e,r,n,t){var s=e(t.getApiAbsUrl("/centers/:centerId/reservation-types/:reservationTypeId/:unavailableDates"),{},{update:{method:"PUT"}}),a=e(t.getApiAbsUrl("/centers/:centerId/reservation-types/:reservationTypeId/photos/:photoId"),{},{update:{method:"PUT"}});return{get:function(e,n){return"new"===n?r.when({id:"new",cancellationNonMemberNoticeHours:24,cancellationMemberNoticeHours:24}):s.get({centerId:e,reservationTypeId:n}).$promise.then((function(e){var r;e.photos[0]&&null===e.photos[0].id&&i()(r=e.photos).call(r,0,1);return e}))},query:function(e){return s.query({centerId:e}).$promise},create:function(e,r){return s.save({centerId:e},r).$promise},update:function(e,r,n){return s.update({centerId:e,reservationTypeId:r},n).$promise},delete:function(e,r){return s.delete({centerId:e,reservationTypeId:r}).$promise},save:function(e,r){return r.id?s.update({centerId:e,reservationTypeId:r.id},r).$promise:s.save({centerId:e},r).$promise.then((function(e){return r.id=e.id,e}))},getUnavailableDates:function(e,r){return s.query({centerId:e,reservationTypeId:r,unavailableDates:"unavailable-dates"}).$promise},createPhoto:function(e,r,i){return n.upload({url:t.getApiAbsUrl("/centers/"+e+"/reservation-types/"+r+"/photos"),method:"POST",withCredentials:!0,data:{photo:i}})},updatePhoto:function(e,r,i,s){return n.upload({url:t.getApiAbsUrl("/centers/"+e+"/reservation-types/"+r+"/photos/"+i),method:"PUT",withCredentials:!0,data:{photo:s}})},deletePhoto:function(e,r,n){return a.delete({centerId:e,reservationTypeId:r,photoId:n}).$promise}}}])},A5Bk:function(e,r){angular.module("deskworks.inventory.priceList.service",["ngResource","deskworks.config","datesDeserializer"]).factory("priceListService",["$resource","$q","datesDeserializer","deskworksConfig",function(e,r,n,t){"use strict";var i=n(["date"]),s=e(t.getApiAbsUrl("/centers/:centerId/price-lists/:priceListId"),{},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,i]},get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,i]},update:{method:"PUT"}}),a=e(t.getApiAbsUrl("/centers/:centerId/price-lists/:priceListId/price-list-products/:productRelId"),{},{update:{method:"PUT"}});return{getPricelists:function(e){return s.query({centerId:e}).$promise},getPricelist:function(e,n){if("new"===n){return r.when({id:"new",name:"",visibleForVisitors:!0,useFor:"none",products:[],options:{products:[]}})}return s.get({centerId:e,priceListId:n}).$promise},createPricelist:function(e,r){return s.save({centerId:e},r).$promise},updatePricelist:function(e,r,n){return s.update({centerId:e,priceListId:r},n).$promise},deletePricelist:function(e,r){return s.delete({centerId:e,priceListId:r}).$promise},clonePricelist:function(e,r,n){return s.save({centerId:e,copy:r,destination:n},{}).$promise},save:function(e,r){return(r.id?s.update({centerId:e,priceListId:r.id},r).$promise:s.save({centerId:e},r).$promise).then((function(e){return r.id=e.id,e}))},createProduct:function(e,r,n){return a.save({centerId:e,priceListId:r},n).$promise},updateProduct:function(e,r,n,t){return a.update({centerId:e,priceListId:r,productRelId:n},t).$promise},deleteProduct:function(e,r,n){return a.delete({centerId:e,priceListId:r,productRelId:n}).$promise}}}])},AlNL:function(e,r,n){"use strict";n.r(r),r.default=angular.module("deskworks.notifications.service",["ngResource","deskworks.config","deskworks.helper"]).factory("Notifications",["$resource","$timeout","deskworksConfig","helper",function(e,r,n,t){var i={update:{method:"PUT"}},s=e(n.getApiAbsUrl("/notifications/:id"),{},i),a=e(n.getApiAbsUrl("/email-templates/:tplId"),{},i),o=e(n.getApiAbsUrl("/email-templates/:tplId/attachments/:id"),{},i),u=e(n.getApiAbsUrl("/setup/bulk-invoices")),d=e(n.getApiAbsUrl("/setup/recurring-invoices")),c=e(n.getApiAbsUrl("/setup/expired-card-emails")),l=e(n.getApiAbsUrl("/setup/declined-card-emails")),m=e(n.getApiAbsUrl("/setup/welcome-letters")),f=e(n.getApiAbsUrl("/setup/welcome-letters/123/attachments/:attachmentId")),p=e(n.getApiAbsUrl("/setup/reservation-confirmations")),g=e(n.getApiAbsUrl("/setup/reservation-confirmations/123/attachments/:attachmentId")),h=e(n.getApiAbsUrl("/setup/calendar-sync-error-emails")),I=e(n.getApiAbsUrl("/setup/passes-used-up-emails")),k=e(n.getApiAbsUrl("/setup/bucket-used-up-emails")),v=e(n.getApiAbsUrl("/dw-mail/message-board/templates/:templateId"),{},i),y=e(n.getApiAbsUrl("/centers/:centerId/desk-tablet-template"),{},i);return{get:function(e){return s.get({id:e}).$promise},save:function(e,r){return s.update({id:e},r).$promise},getEmailTemplate:function(e){return a.get({tplId:e}).$promise},saveEmailTemplate:function(e,r){return a.update({tplId:e},r).$promise},attachEmailTemplate:function(e,r){return o.save({tplId:e},r).$promise},detachEmailTemplate:function(e,r){return o.delete({tplId:e,id:r}).$promise},getBulkInvoices:function(){return u.get({}).$promise},saveBulkInvoices:function(e){return u.save({},e).$promise},getRecurringInvoices:function(){return d.get({}).$promise},saveRecurringInvoices:function(e){return d.save({},e).$promise},getExpiredCardEmail:function(){return c.get({}).$promise},saveExpiredCardEmail:function(e){return c.save({},e).$promise},getDeclinedCardEmail:function(){return l.get({}).$promise},saveDeclinedCardEmail:function(e){return l.save({},e).$promise},getWelcomeLetter:function(){return m.get({}).$promise},saveWelcomeLetter:function(e){return m.save({},e).$promise},attachWelcomeLetter:function(e){return f.save({},e).$promise},detachWelcomeLetter:function(e){return f.delete({attachmentId:e}).$promise},getCalSyncErrorEmail:function(){return h.get({}).$promise},saveCalSyncErrorEmail:function(e){return h.save({},e).$promise},getPassesUsedUpEmail:function(){return I.get({}).$promise},savePassesUsedUpEmail:function(e){return I.save({},e).$promise},getBucketUsedUpEmail:function(){return k.get({}).$promise},saveBucketUsedUpEmail:function(e){return k.save({},e).$promise},getReservationConfirmation:function(){return p.get({}).$promise},saveReservationConfirmation:function(e){return p.save({},e).$promise},attachReservationConfirmation:function(e){return g.save({},e).$promise},detachReservationConfirmation:function(e){return g.delete({attachmentId:e}).$promise},getMessageBoardEmailTemplate:function(e){return v.get({templateId:e}).$promise},saveMessageBoardEmailTemplate:function(e,r){return v.update({templateId:e},r).$promise},getDeskTabletTemplate:function(e){return y.get({centerId:e}).$promise},saveDeskTabletTemplate:function(e,r){return y.update({centerId:e},r).$promise}}}])},CCSC:function(e,r){angular.module("deskworks.userProfile.service.address",["ngResource","deskworks.helper","deskworks.userProfile.cache","deskworks.userProfile.optsAddressType","deskworks.userProfile.optsCountry","deskworks.userProfile.optsState"]).factory("upAddressService",["$resource","deskworksConfig","userProfileCache","helper","optsAddressType","optsCountry","optsState",function(e,r,n,t,i,s,a){"use strict";var o=e(r.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/addresses/:addressId"),{},{update:{method:"PUT"}});return{new:function(e,r){return{id:t.uid(),type:i[3],country:e&&t.findByKeyValue(s,"id",e.id||e)||t.findByKeyValue(s,"id","US"),state:t.findByKeyValue(a[e&&e.id||e||"US"],"id",r&&r.id||r||"CA")}},isNew:function(e){return e&&t.isUid(e.id)},save:function(e,r,i){return n.removeAll(),t.isUid(i.id)?o.save({centerId:e||0,userId:r},this.unresolve(i)).$promise.then((function(e){return i.id=e.id,e})):o.update({centerId:e||0,userId:r,addressId:i.id},this.unresolve(i)).$promise},delete:function(e,r,t){return n.removeAll(),o.delete({centerId:e||0,userId:r,addressId:t.id}).$promise},resolve:function(e){return e.type=t.findByKeyValue(i,"id",e.typeId),e.state=a[e.country]?t.findByKeyValue(a[e.country],"id",e.state):e.state,e.country=t.findByKeyValue(s,"id",e.country),e},unresolve:function(e){return{typeId:e.type&&e.type.id?e.type.id:e.type,street:e.street,city:e.city,country:e.country&&e.country.id?e.country.id:e.country,state:e.state&&e.state.id?e.state.id:e.state,zip:e.zip}}}}])},DOvr:function(e,r){angular.module("deskworks.signInLink",["deskworks.state"]).directive("signInLink",["state",function(e){return{template:'<a ng-href="{{state.getLoggedUserId() ? \'#/sign-out\' : \'#/sign-in\'}}" ng-click="signInOrOut($event)" ff-spin="spin" snap-close class="sidebar-item" ng-class="{ active: active }"><span ng-if="!state.getLoggedUserId()" translate="SIDEBAR.SIGN_IN"></span><span ng-if="state.getLoggedUserId()" translate="SIDEBAR.SIGN_OUT"></span></a>',restrict:"E",scope:!0,link:function(r,n,t){r.state=e,t.$observe("active",(function(e){r.active="true"===e})),r.signInOrOut=function(r){r.stopPropagation(),r.preventDefault(),e.resetParams(),e.setPath(e.getLoggedUserId()?"/sign-out":"/sign-in")}}}}])},DWfd:function(e,r,n){"use strict";n.r(r),r.default=angular.module("deskworks.userProfile.optsBillingMethod",[]).factory("optsBillingMethod",["$rootScope","$translate",function(e,r){var n=[{id:"cc",_name:"BILLING_PROFILE.BILLING_METHOD.CC",import:"Credit Card",paymentMethodKey:"creditCards"},{id:"ach",_name:"BILLING_PROFILE.BILLING_METHOD.ACH",import:"ACH/EFT/Direct Debit",paymentMethodKey:"eChecks"},{id:"emailInvoice",_name:"BILLING_PROFILE.BILLING_METHOD.EMAIL_INVOICE",import:"Email Invoice",restricted:!0},{id:"paperInvoice",_name:"BILLING_PROFILE.BILLING_METHOD.PAPER_INVOICE",import:"Paper Invoice",restricted:!0}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},"Dpp/":function(e,r,n){"use strict";n.r(r);n("Sie7");r.default=angular.module("deskworks.dwSignIn",["deskworks.helper","deskworks.state","ngStorage","deskworks.userProfile.service"]).directive("dwSignIn",(function(){return{restrict:"EAC",scope:!0,transclude:{extraButtons:"?extraButtons"},templateUrl:"sign-in/dw-sign-in.tpl.html",controller:"dwSignIn",controllerAs:"dwSignIn",bindToController:{showSignUp:"<"}}})).controller("dwSignIn",["$scope","$element","$attrs","$q","$timeout","$localStorage","$translate","helper","state","userProfileService",function(e,r,n,t,i,s,a,o,u,d){var c=this;c.rememberMe=!angular.isDefined(s.rememberMe)||s.rememberMe,c.signIn=function(){return c.error=null,c.success=null,c.info=a.instant("SIGN_IN.SIGNING_IN"),u.login(c.login,c.password,c.rememberMe).then((function(){return c.info=a.instant("SIGN_IN.SUCCESS"),s.rememberMe=c.rememberMe,e.$emit("dwSignIn:SignIn"),i(5e3)})).catch((function(e){return c.info=null,c.error=e.data&&e.data.error||a.instant("SIGN_IN.INVALID_LOGIN_PASSWORD"),t.reject(c.error)}))},c.forgotPassword=function(e){c.error=null,c.info=null,c.success=null,c.restorePassword=e},c.sendPassword=function(){return c.error=null,c.info=a.instant("SIGN_IN.RESTORE_PASSWORD.SENDING"),d.restorePassword({email:c.email}).then((function(){c.info=null,c.success=a.instant("SIGN_IN.RESTORE_PASSWORD.SUCCESS"),c.restorePassword=!1})).catch((function(e){return c.info=null,c.error=e.data&&e.data.error||"Failed to restore password.",t.reject(c.error)}))},c.signUp=function(){return e.$emit("dwSignIn:SignUp"),i(1e4)}}])},EyXH:function(e,r){e.exports='<dw-sign-in id="signIn"></dw-sign-in> '},FRv9:function(e,r){angular.module("deskworks.userProfile.optsPhoneType",[]).factory("optsPhoneType",(function(){"use strict";return[{id:1,name:"USER_PROFILE.PHONES.TYPE.HOME"},{id:2,name:"USER_PROFILE.PHONES.TYPE.WORK"},{id:3,name:"USER_PROFILE.PHONES.TYPE.MOBILE"},{id:4,name:"USER_PROFILE.PHONES.TYPE.FAX"},{id:5,name:"USER_PROFILE.PHONES.TYPE.OTHER"}]}))},FoaE:function(e,r,n){"use strict";n.r(r),r.default=angular.module("deskworks.WhiteLabelLinks",["ngResource","deskworks.config"]).factory("WhiteLabelLinks",["$resource","Upload","deskworksConfig",function(e,r,n){var t=e(n.getApiAbsUrl("/white-label/links"),{},{get:{method:"GET"},update:{method:"PUT"}});return{get:function(){return t.get().$promise},save:function(e){return t.update(e).$promise},uploadTermsOfService:function(e){return r.upload({url:n.getApiAbsUrl("/white-label/links"),method:"PUT",withCredentials:!0,data:{termsOfService:e}})},uploadReservationAgreement:function(e){return r.upload({url:n.getApiAbsUrl("/white-label/links"),method:"PUT",withCredentials:!0,data:{reservationAgreement:e}})}}}])},FyHS:function(e,r,n){"use strict";n.r(r);n("8cZI");r.default=angular.module("deskworks.emailSiteMembers.service",["ngResource","deskworks.config"]).factory("emailSiteMembers",["$resource","deskworksConfig",function(e,r){var n=e(r.getApiAbsUrl("/centers/:centerId/email-site-members")),t=e(r.getApiAbsUrl("/email-templates/email-site-members"),{},{update:{method:"PUT"}});return{send:function(e,r,t){return n.save({centerId:e,test:t||null},r).$promise},query:function(e,r,t){return r=r&&r.join(),n.query({centerId:e,membershipTypeIds:r,checkedInOnly:t}).$promise},getTpl:function(){return t.get().$promise},saveTpl:function(e){return t.update({},e).$promise}}}])},"G/jL":function(e,r){angular.module("deskworks.setup.optsProrateAtTermination",[]).factory("optsProrateAtTermination",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:null,_name:"GLOBAL.NONE"},{id:"noticeDate",_name:"SETUP_SETTINGS.PRO_RATE_AT_TERMINATION.NOTICE_DATE"},{id:"terminationDate",_name:"SETUP_SETTINGS.PRO_RATE_AT_TERMINATION.TERMINATION_DATE"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},HcPi:function(e,r){angular.module("deskworks.reservationRules.optsWhoCanReserve",[]).factory("optsWhoCanReserve",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:"anyone",_name:"RESERVATION_RULES.WHO_CAN_RESERVE.ANYONE"},{id:"nonMember",_name:"RESERVATION_RULES.WHO_CAN_RESERVE.NON_MEMBER"},{id:"member",_name:"RESERVATION_RULES.WHO_CAN_RESERVE.MEMBER"},{id:"staffOnly",_name:"RESERVATION_RULES.WHO_CAN_RESERVE.STAFF_ONLY"},{id:"notAvailable",_name:"RESERVATION_RULES.WHO_CAN_RESERVE.NOT_AVAILABLE"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},Hfad:function(e,r){angular.module("deskworks.optsOurMembersSort",[]).factory("optsOurMembersSort",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:"name",_name:"OUR_MEMBERS.SORT.NAME"},{id:"occupation",_name:"OUR_MEMBERS.SORT.OCCUPATION"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},Hm9e:function(e,r,n){"use strict";n.r(r);n("Muwe"),n("X5mX");angular.module("sessionRefresher",["session"]).factory("sessionRefresher",["$q","$injector","$location",function(e,r,n){return{responseError:function(t){if(419===t.status){var i=r.get("$http");return r.get("session").refresh().catch((function(r){return n.search("redirect",n.path()),n.path("/sign-in"),e.reject(r)})).then((function(){return i(t.config)}))}return e.reject(t)}}}])},"I/kG":function(e,r){},ITOr:function(e,r){angular.module("deskworks.setup.optsReservationCreditsUnit",[]).factory("optsReservationCreditsUnit",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:"$",_name:"SETUP_SETTINGS.RESERVATION_CREDITS_UNIT.MONEY"},{id:"hours",_name:"SETUP_SETTINGS.RESERVATION_CREDITS_UNIT.HOURS"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},J6AD:function(e,r,n){"use strict";n.r(r),r.default=angular.module("deskworks.userProfile.service.photo",["ngResource","ngFileUpload","deskworks.config","deskworks.helper","deskworks.userProfile.cache"]).factory("upPhotoService",["$resource","$q","deskworksConfig","userProfileCache","helper","Upload",function(e,r,n,t,i,s){return{isNew:function(e){return!!e&&!!e.photoFile},save:function(e,i,a){return this.isNew(i)?(t.removeAll(),s.upload({url:n.getApiAbsUrl("/centers/".concat(e||0,"/")+(i&&i.membershipStatus&&("active"===i.membershipStatus.id||"inactive"===i.membershipStatus.id)?"members":"non-members")+"/"+i.id),method:"PUT",withCredentials:!0,data:{photo:i.photoFile}}).then((function(e){return i.photo=e.data.photo,delete i.photoFile,e.data}))):r.when()},delete:function(r){var t=r.user,i=n.getApiAbsUrl("/centers/".concat(0,"/")+(t&&t.membershipStatus&&("active"===t.membershipStatus.id||"inactive"===t.membershipStatus.id)?"members":"non-members")+"/"+t.id);return e(i,{},{update:{method:"PUT"}}).update({},{photo:null}).$promise}}}])},L3Yn:function(e,r,n){"use strict";n.r(r);n("JBxO"),n("FdtR");angular.module("deskworks.signIn",["ngRoute","ngStorage","flexForms","deskworks.state","deskworks.config","deskworks.dwSignIn","deskworks.isMultiSite"]).config(["$routeProvider",function(e){var r;e.when("/sign-in",{templateUrl:"sign-in/sign-in.tpl.html",controller:"SignInCtrl",controllerAs:"vm",label:"Sign In",routeBranch:"sign-in",hideSidebar:!0,userTasksPolicy:!1,landing:!0,reloadOnSearch:!1,translations:["sign-in"]}),e.when("/sign-out",{routeBranch:"sign-out",hideSidebar:!0,userTasksPolicy:!1,landing:!0,resolve:{logout:["state","isMultiSite","deskworksConfig",function(e,n,t){return r=e.getParam("silent")||r,e.logout().finally((function(){if(!r)return n()?void(window.location=t.getSitesUrl()):e.setPath("/sign-in")}))}]}})}]).controller("SignInCtrl",["$scope","$route","$location","$localStorage","$timeout","$translate","state","deskworksConfig","isMultiSite",function(e,r,n,t,i,s,a,o,u){var d=this;function c(){return window.location=o.getSitesUrl(),i(5e3)}a.setPageTitle(s.instant("SIGN_IN.PAGE_TITLE")),e.$on("dwSignIn:SignIn",(function(e){a.setPath(a.getParam("redirect")||o.getDefaultRoute(),!0),a.setParam("redirect"),e.stopPropagation()})),e.$watch(u,(function(e){d.back=e?c:null}))}])},Mm7d:function(e,r){e.exports='<form name="formSignIn" class="sign-in"> <h1 class="page-title" ng-bind="dwSignIn.restorePassword ? (\'SIGN_IN.RESTORE_PASSWORD.PAGE_TITLE\' | translate) : state.getPageTitle()"></h1> <div class="gutter-v"> <ff-board> <ff-panel ng-if="!dwSignIn.restorePassword"> <ff-header> <span ng-class="{ \'text-danger\': dwSignIn.error }"> {{dwSignIn.error || dwSignIn.success || dwSignIn.info || (\'SIGN_IN.HINT\' | translate)}} </span> </ff-header> <ff-row class="sign-up-block" ng-if="dwSignIn.showSignUp"> <span style="align-items:center" translate="SIGN_IN.NO_ACCOUNT_YET"></span> <ff-btn flex="0 0 auto" sense="signup" ff-click="dwSignIn.signUp()"><span translate="SIGN_IN.BTN_SIGN_UP"></span></ff-btn> </ff-row> <label class="ff-row"> <ff-label flex="0 0 80px"><span translate="GLOBAL.LOGIN"></span></ff-label> <ff-login name="login" ff-model="dwSignIn.login" ff-required="true" ff-maxlength="256" ff-validate-alert="{{\'GLOBAL.LOGIN\' | translate}}"></ff-login> </label> <label class="ff-row"> <ff-label flex="0 0 80px"><span translate="GLOBAL.PASSWORD"></span></ff-label> <ff-password name="password" ff-model="dwSignIn.password" ff-required="true" ff-maxlength="256" ff-attr-autocomplete="current-password" ff-validate-alert="{{\'GLOBAL.PASSWORD\' | translate}}"></ff-password> </label> <ff-row class="sign-in-bottom"> <ff-btn flex="none" sense="link" ff-attr-tabindex="{{1}}" ff-click="dwSignIn.forgotPassword(true)"> <span translate="SIGN_IN.FORGOT_PASSWORD"></span> </ff-btn> <label flex="none" style="margin-left:auto"> <ff-checkbox name="rememberMe" ff-model="dwSignIn.rememberMe" class="ff-right" ff-label="{{\'SIGN_IN.REMEMBER_ME\' | translate}}"></ff-checkbox> </label> </ff-row> </ff-panel> <ff-panel ng-if="dwSignIn.restorePassword"> <ff-header> <span ng-class="{ \'text-danger\': dwSignIn.error }"> {{dwSignIn.error || dwSignIn.info || (\'SIGN_IN.RESTORE_PASSWORD.HINT\' | translate)}} </span> </ff-header> <label class="ff-row"> <ff-label flex="0 0 70px"><req translate="GLOBAL.EMAIL"></req></ff-label> <ff-email name="email" ff-model="dwSignIn.email" ff-required="true" ff-validate-alert="{{\'GLOBAL.EMAIL\' | translate}}"></ff-email> </label> </ff-panel> </ff-board> <ff-btn-group ng-if="!dwSignIn.restorePassword"> <span ng-transclude="extraButtons"></span> <ff-btn sense="back" ff-click="vm.back()" ng-if="vm.back"> <span translate="GLOBAL.BTN_BACK"></span> </ff-btn> <ff-btn sense="back" ff-click="$ctrl.back()" ng-if="$ctrl.back"> <span translate="GLOBAL.BTN_BACK"></span> </ff-btn> <ff-btn type="submit" sense="ok" ff-disabled="formSignIn.$invalid" ff-click="dwSignIn.signIn()"> <span translate="SIGN_IN.BTN_SIGN_IN"></span> </ff-btn> </ff-btn-group> <ff-btn-group ng-if="dwSignIn.restorePassword"> <ff-btn type="submit" sense="ok" ff-disabled="formSignIn.$invalid" ff-click="dwSignIn.sendPassword()"> <span translate="SIGN_IN.RESTORE_PASSWORD.BTN_SEND"></span> </ff-btn> <ff-btn sense="cancel" ff-click="dwSignIn.forgotPassword(false)"> <span translate="GLOBAL.BTN_CANCEL"></span> </ff-btn> </ff-btn-group> </div> </form> '},N59k:function(e,r,n){"use strict";n.r(r);n("3dw1");angular.module("deskworks.checkInLog.service",["ngResource","deskworks.config"]).factory("checkInLogService",["$resource","$filter","deskworksConfig","helper",function(e,r,n,t){var i=r("toDate"),s=e(n.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/logs/:logId"),{},{update:{method:"PUT"}});return{getLog:function(e,r,n,t,a){return s.get({centerId:e,userId:r,page:n,pageSize:t,macAddress:a}).$promise.then((function(e){return e.checkInTime=i(e.checkInTime),e.log.forEach((function(e){e.time=i(e.time)})),e}))},updateLog:function(e,r,n,t){return s.update({centerId:e,userId:r,logId:n},t).$promise},deleteLog:function(e,r,n){return s.delete({centerId:e,userId:r,logId:n}).$promise},checkInOut:function(e,n,t,i){return i=r("date")(i,"iso"),s.save({centerId:e,userId:n},{operation:t,time:i}).$promise}}}])},NFcB:function(e,r,n){"use strict";n.r(r);var t=n("03wM"),i=n.n(t);n("3dw1");angular.module("deskworks.printerUsageTypeNames",[]).factory("printerUsageTypeNames",["$rootScope","$translate",function(e,r){var n={},t={printBlack:r.instant("PRINTER_USAGE_SETTINGS.TYPE.PRINT_BLACK"),printColor:r.instant("PRINTER_USAGE_SETTINGS.TYPE.PRINT_COLOR"),scan:r.instant("PRINTER_USAGE_SETTINGS.TYPE.SCAN"),fax:r.instant("PRINTER_USAGE_SETTINGS.TYPE.FAX")};function s(){i()(t).forEach((function(e){n[e]=r.instant(t[e])}))}return s(),e.$on("$setTranslationsSuccess",s),n}])},Ngbk:function(e,r){angular.module("deskworks.userProfile.service.document",["session","ngResource","ngFileUpload","deskworks.helper","deskworks.userProfile.cache"]).factory("upDocumentService",["$resource","Upload","deskworksConfig","userProfileCache","helper","session",function(e,r,n,t,i,s){"use strict";var a=e(n.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/documents/:documentId"),{},{update:{method:"PUT"}});return{new:function(e){return{id:i.uid(),file:e,name:e.name,userAccess:!s.isAdmin()}},isNew:function(e){return e&&i.isUid(e.id)},save:function(e,s,o){return t.removeAll(),i.isUid(o.id)?r.upload({url:n.getApiAbsUrl("/centers/"+(e||0)+"/user-profiles/"+s+"/documents"),method:"POST",withCredentials:!0,data:{document:o.file,name:o.name}}).then((function(e){return o.id=e.data.id,o.document=e.data.document,delete o.file,e.data})):a.update({centerId:e||0,userId:s,documentId:o.id},this.unresolve(o)).$promise},delete:function(e,r,n){return t.removeAll(),a.delete({centerId:e||0,userId:r,documentId:n.id}).$promise},resolve:function(e){return e},unresolve:function(e){return{name:e.name,userAccess:e.userAccess}}}}])},QfWi:function(e,r,n){"use strict";n.r(r);n("NFdj"),n("vybQ"),n("jMkn"),n("DREr"),n("/8mY"),n("xBYL"),n("7sMi"),n("KNin"),n("vUE2"),n("RxAD"),n("Lrhl"),n("D1ip"),n("3/3J");var t=n("TiKg"),i=n.n(t),s=(n("F/wX"),n("fuVb")),a=(n("+Sv2"),n("8ScX")),o=n.n(a),u=(n("XtiM"),n("flw3")),d=n.n(u);n("2IKX"),n("qVB+"),n("n+7y"),n("H7Ub");window.moment=i.a,window.Snap=o.a,window.NATS=d.a,Object(s.extendMoment)(i.a)},Qppx:function(e,r){angular.module("deskworks.Task",["ngResource","deskworks.config","autoCacheFactory"]).factory("Task",["$resource","deskworksConfig","helper","autoCacheFactory",function(e,r,n,t){"use strict";var i=e(r.getApiAbsUrl("/tasks/:taskId"),{},{query:{method:"GET",isArray:!1},update:{method:"PUT"}});return{query:function(){return i.query().$promise},get:function(e){return i.get({taskId:e}).$promise},save:function(e){var r=n.purify(e,["options"]);return t.emptyAll(),e.id&&"new"!==e.id?i.update({taskId:e.id},r).$promise:i.save({},r).$promise.then((function(r){return e.id=r.id,e}))},delete:function(e){return t.emptyAll(),i.delete({taskId:e}).$promise}}}])},QrxU:function(e,r){angular.module("deskworks.inventory.membershipCategory.service",["ngResource","deskworks.config"]).factory("membershipCategoryService",["$resource","$q","deskworksConfig",function(e,r,n){"use strict";var t=e(n.getApiAbsUrl("/membership-types/:membershipTypeId"),{},{update:{method:"PUT"}});return{query:function(){return t.query().$promise},get:function(e){return t.get({membershipTypeId:e}).$promise},create:function(e){return t.save({},e).$promise},update:function(e,r){return t.update({membershipTypeId:e},r).$promise},delete:function(e){return t.delete({membershipTypeId:e}).$promise},save:function(e){return(e.id?t.update({membershipTypeId:e.id},e).$promise:t.save({},e).$promise).then((function(r){return e.id=r.id,r}))}}}])},RObh:function(e,r){angular.module("deskworks.setup.optsMinPassFractionUnit",[]).factory("optsMinPassFractionUnit",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:!0,_name:"SETUP_SETTINGS.MIN_PASS_UNIT.PASSES"},{id:!1,_name:"SETUP_SETTINGS.MIN_PASS_UNIT.HOURS"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},Rkz7:function(e,r,n){"use strict";n.r(r);var t=n("6RpP"),i=n.n(t);n("Muwe"),n("w13K"),n("aZFp");angular.module("deskworks.config",[]).provider("deskworksConfig",(function(){var e="/api/v1",r="",n="/dashboard",t=null,s=null,a="https://sites.satellitedeskworks.com/";return{setApiUrl:function(r){e=r},setApiPostfix:function(e){r=e},getDefaultRoute:function(){return n},setDefaultRoute:function(e){n=e},setWsUrl:function(e){t=e},setSiteId:function(e){s=e},setSitesUrl:function(e){a=e},$get:["$window",function(o){return{getApiDomain:function(r){var n=(r||e).match(/^(.*:)\/\/([A-Za-z0-9\-\.]+)(:[0-9]+)?(.*)$/i);return n&&n[2]?n[2]:o.location.hostname},getApiOrigin:function(){var r,n,t=e.match(/^(.*:)\/\/([A-Za-z0-9\-\.]+)(:[0-9]+)?(.*)$/i);return t&&t[2]?i()(r=i()(n="".concat(t[1],"//")).call(n,t[2])).call(r,t[3]||""):o.location.origin},getSiteId:function(){if(s)return s;var e=this.getApiDomain(null).split(".");if(!(e=e[e.length-3]))throw new Error("configuration issue: siteId is undefined");return e},getApiAbsUrl:function(n){return e+n+r},getDefaultRoute:function(){return n},getWsUrl:function(){return t},getSitesUrl:function(){return a}}}]}}))},SHrv:function(e,r){angular.module("deskworks.allowedHost.service",["ngResource","deskworks.config","deskworks.helper"]).factory("allowedHostService",["$resource","$q","deskworksConfig","helper",function(e,r,n,t){"use strict";var i=e(n.getApiAbsUrl("/setup/allowed-hosts/:allowedHostId"),{},{update:{method:"PUT"}});return{query:function(){return i.query().$promise},save:function(e){return e.id?i.update({allowedHostId:e.id},e).$promise:i.save(e).$promise.then((function(r){e.id=r.id}))},delete:function(e){return i.delete({allowedHostId:e}).$promise}}}])},Sie7:function(e,r,n){},Uaa3:function(e,r){angular.module("deskworks.userProfile.service.printerCode",["ngResource","deskworks.helper","deskworks.userProfile.cache"]).factory("upPrinterCodeService",["$resource","deskworksConfig","userProfileCache","helper",function(e,r,n,t){"use strict";var i=e(r.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/printer-codes/:printerCodeId"),{},{update:{method:"PUT"}});return{new:function(){return{id:t.uid()}},isNew:function(e){return e&&t.isUid(e.id)},save:function(e,r,s){return n.removeAll(),t.isUid(s.id)?i.save({centerId:e||0,userId:r},this.unresolve(s)).$promise.then((function(e){return s.id=e.id,e})):i.update({centerId:e||0,userId:r,printerCodeId:s.id},this.unresolve(s)).$promise},delete:function(e,r,t){return n.removeAll(),i.delete({centerId:e||0,userId:r,printerCodeId:t.id}).$promise},resolve:function(e){return e},unresolve:function(e){return{code:e.code}}}}])},VvUS:function(e,r){angular.module("deskworks.accessCard.service",["ngResource","deskworks.config"]).factory("AccessCard",["$resource","deskworksConfig",function(e,r){"use strict";return e(r.getApiAbsUrl("/centers/:centerId/access-cards/:accessCardId"),{centerId:"@centerId",accessCardId:"@accessCardId"},{update:{method:"PUT"}})}])},WZ6N:function(e,r,n){"use strict";n.r(r),r.default=angular.module("deskworks.optsTimezone",[]).factory("optsTimezone",(function(){return[{id:"Hawaii",name:"Hawaii",iana:"Pacific/Honolulu"},{id:"Alaska",name:"Alaska",iana:"America/Anchorage"},{id:"Arizona",name:"Arizona",iana:"America/Phoenix"},{id:"Pacific Time (US & Canada)",name:"Pacific Time (US & Canada)",iana:"America/Los_Angeles"},{id:"Mountain Time (US & Canada)",name:"Mountain Time (US & Canada)",iana:"America/Denver"},{id:"Central Time (US & Canada)",name:"Central Time (US & Canada)",iana:"America/Chicago"},{id:"Eastern Time (US & Canada)",name:"Eastern Time (US & Canada)",iana:"America/New_York"},{id:"Atlantic Time (Canada)",name:"Atlantic Time (Canada)",iana:"America/Halifax"},{id:"London",name:"London",iana:"Europe/London"},{id:"Amsterdam",name:"Amsterdam",iana:"Europe/Amsterdam"},{id:"Pretoria",name:"Johannesburg",iana:"Africa/Johannesburg"},{id:"Helsinki",name:"Helsinki",iana:"Europe/Helsinki"},{id:"Jerusalem",name:"Gaza",iana:"Asia/Gaza"},{id:"Singapore",name:"Singapore",iana:"Asia/Kuala_Lumpur"},{id:"Sydney",name:"Sydney",iana:"Australia/Sydney"}]}))},WlxY:function(e,r){angular.module("deskworks.optsShareEmail",[]).factory("optsShareEmail",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:"private",_name:"USER_PROFILE.SHAREABLE_INFO.EMAIL.PRIVATE"},{id:"members",_name:"USER_PROFILE.SHAREABLE_INFO.EMAIL.MEMBERS"},{id:"public",_name:"USER_PROFILE.SHAREABLE_INFO.EMAIL.PUBLIC"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},"Wuz+":function(e,r,n){"use strict";n.r(r);n("ZEAQ");var t=n("nbuU"),i=n.n(t),s=n("yCd9"),a=n.n(s);r.default=angular.module("deskworks.ReservationCost",["deskworks.ReservationPrice","deskworks.calendarService"]).factory("ReservationCost",["$q","$filter","dwAlerts","ReservationPrice","calendarService",function(e,r,n,t,s){return{calcSync:function(e,r,n,t){var s;if(!n)return null;var u=i()(n).call(n,(function(e){return e.id===t})),d=(r-e)/6e4;return u?a()(s=u.passes).call(s,(function(e){return o(d,+e.passSize,+e.passMin,+e.passMax)*e.passPrice})).reduce((function(e,r){return r<e?r:e})):null},calcAsync:function(u,d,c,l,m){return l=r("toDate")(l),m=r("toDate")(m),e.all({prices:t.query(u,d).catch((function(e){return n.error(e,"Failed to query reservation prices.")})),cats:s.query(u,l,m).catch((function(e){return n.error(e,"Failed to query calendar data.")}))}).then((function(e){var r,n,t=i()(r=e.cats).call(r,(function(e){var r;return!!i()(r=e.reservationUnits).call(r,(function(e){return e.id===+c}))}));return t&&i()(n=e.prices).call(n,(function(e){return e.id===t.id}))})).then((function(e){var r;if(!e)return null;var n=(m-l)/6e4;return a()(r=e.passes).call(r,(function(e){return o(n,+e.passSize,+e.passMin,+e.passMax)*e.passPrice})).reduce((function(e,r){return r<e?r:e}))}))}};function o(e,r,n,t){var i=function(e,r,n){return function(e,r){var n=60*r,t=Math.floor(e/n);e-t*n>5&&(t+=1);return t*n/60}(60*e+r,n||.25)}(Math.floor(e/60),e%60,r*n),s=Math.max(+(i/(r||1)).toFixed(2),1);return t>0&&s>t&&(s=t),s}}])},XtRr:function(e,r){angular.module("deskworks.Region",["ngResource","deskworks.config"]).factory("Region",["$resource","$q","deskworksConfig",function(e,r,n){var t=e(n.getApiAbsUrl("/regions/:regionId"),{},{update:{method:"PUT"}});return{query:function(){return t.query().$promise},save:function(e){return e.id?t.update({regionId:e.id},e).$promise:t.save(e).$promise.then((function(r){e.id=r.id}))},delete:function(e){return t.delete({regionId:e}).$promise}}}])},YLVk:function(e,r,n){"use strict";n.r(r);var t=n("4BZO"),i=n.n(t),s=n("XX2w"),a=n.n(s),o=n("yCd9"),u=n.n(o),d=n("ipr/"),c=n.n(d);n("8cZI"),n("Muwe"),n("w13K");r.default=angular.module("getColorContrast",[]).factory("getColorContrast",(function(){return function(e){var r,n,t,s;if(e.indexOf("#")>=0){var o,d;if(e.length<7)e=u()(d=a()(e)).call(d,(function(e){return"#"===e?e:e+e})).join("");var l=u()(o=[1,3,5,7]).call(o,(function(r){return parseInt(e.substr(r,2),16)})),m=i()(l,4);r=m[0],n=m[1],t=m[2],s=m[3],s=isNaN(s)?s=1:s/255}else{var f,p=e.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(0*\.?\d+)\s*\)$/i),g=c()(p).call(p,1),h=i()(g,4);r=h[0],n=h[1],t=h[2],s=h[3];var I=u()(f=[r,n,t]).call(f,(function(e){return parseInt(e)})),k=i()(I,3);r=k[0],n=k[1],t=k[2],s=parseFloat(s)}return(299*r+587*n+114*t)/1e3}}))},Z5NS:function(e,r,n){"use strict";n.r(r);var t=n("yCd9"),i=n.n(t),s=n("6RpP"),a=n.n(s),o=(n("JBxO"),n("FdtR"),n("3dw1"),n("GLV5")),u=n("A+Xk"),d=n("oSeY"),c=n("4dW8"),l=n("9HME");r.default=angular.module("deskworks.sidebar",["deskworks.UserTasks.service","deskworks.signInLink","flexForms.ngCollapse","deskworks.sidebarTasks.service","deskworks.appDim",o.a.name,u.a.name,d.a.name,c.a.name,l.a.name]).directive("sidebar",(function(){return{restrict:"E",scope:!0,templateUrl:"sidebar/sidebar.tpl.html",controller:"SidebarCtrl as $ctrl"}})).controller("SidebarCtrl",["$scope","$rootScope","$element","$route","$timeout","state","helper","routeHelper","UserTasks","appDim",function(e,r,n,t,s,o,u,d,c,l){var m=this;function f(){return o.isLoggedAdmin()||(m.tasks=[],c.tasks=[]),s((function(){if(o.getLoggedUserId()&&o.getCurrentCenterId())return c.query(o.getCurrentCenterId(),o.isMasterProfile()&&o.getCurrentUserId()).then((function(e){m.tasks=e,c.tasks=[],m.tasks.forEach((function(e){var r;c.tasks=a()(r=c.tasks).call(r,e.tasks)})),p()}))}))}function p(){var e;if(m.currentTask&&m.tasks&&m.tasks.length)return m.tasks.forEach((function(r){r.active=!!u.findByKeyValue(r.tasks,"url",m.currentTask),r.active&&(e=!0,r.open=!0,s((function(){r.open=!0})))})),e||"/dashboard"===m.currentTask||"/sign-in"===m.currentTask||"/sign-out"===m.currentTask}function g(e){e.reduce((function(e,r){return r?e+1:e}),0)&&r.$emit("SIDEBAR:ACCORD-COLLAPSED")}function h(){angular.forEach(m.tasks,(function(e){angular.forEach(e.tasks,(function(e){e.directUrl&&(e.directUrl=c.interpolateTaskUrl(e.url))}))}))}function I(){m.offLogin=r.$on("LOGIN",f),m.offLogout=r.$on("LOGOUT",f),m.offRefresh=r.$on("SIDEBAR:REFRESH",f),m.offCenter=r.$on("CHANGE-CENTER",f),m.offCollapseAll=r.$on("SIDEBAR:ACCORD-COLLAPSE-ALL",(function(){angular.forEach(m.tasks,(function(e){e.open=!1}))})),m.offChangeUser=r.$on("CHANGE-USER",(function(){o.isLoggedAdmin()||f()}))}m.$onInit=function(){m.state=o,m.offRouteStart=r.$on("$routeChangeStart",(function(e,r){r.$$route&&(m.pendingTask="/"+r.$$route.routeBranch)})),m.offRouteSuccess=r.$on("$routeChangeSuccess",(function(){m.currentTask=m.pendingTask,m.pendingTask=null,l(!1)})),m.offRouteError=r.$on("$routeChangeError",(function(){m.pendingTask=null})),d.auth(null).finally((function(){f().finally(I)})).catch(angular.noop),e.$watch("$ctrl.currentTask",p),e.$watchGroup(["$ctrl.tasks",o.getCurrentCenterId,o.getCurrentUserId],h),e.$watchCollection((function(){var e;return m.tasks?i()(e=m.tasks).call(e,(function(e){return e.open})):[]}),g)},m.$onDestroy=function(){m.offRouteStart(),m.offRouteSuccess(),m.offRouteError(),function(){m.offLogin&&m.offLogin();m.offLogout&&m.offLogout();m.offRefresh&&m.offRefresh();m.offCenter&&m.offCenter();m.offCollapseAll&&m.offCollapseAll();m.offChangeUser&&m.offChangeUser()}()},m.$postLink=function(){n.addClass("sidebar")},m.toggleGroup=function(e){var r=e.open;m.tasks.forEach((function(e){e.open=!1})),e.open=!r},m.navigate=function(e,r){r.directUrl||(e.preventDefault(),e.stopPropagation(),r.dashboard&&(r.url=o.isLoggedAdmin()?"/dashboard-admin":"/dashboard"),r.url&&(r.url===o.getPath()?t.reload():(o.resetParams(),o.setPath(r.url)),l(!0)))},m.unselectUser=function(){m.state.setCurrentUser(null),l(!0),t.current&&t.current.scope&&t.current.scope.backPath?o.setPath(t.current.scope.backPath):t.reload()}}])},ZAEL:function(e,r){angular.module("deskworks.inventory.optsPassMax",[]).factory("optsPassMax",(function(){"use strict";return[{id:"1",name:"1"},{id:"2",name:"2"},{id:"4",name:"4"},{id:"0",name:"∞"}]}))},"ZI+h":function(e,r,n){"use strict";n.r(r),r.default=angular.module("deskworks.calendarService",["ngResource","deskworks.config","datesDeserializer"]).factory("calendarService",["$resource","$filter","deskworksConfig","helper","datesDeserializer",function(e,r,n,t,i){var s=i(["reservationUnits.reservations.from","reservationUnits.reservations.to","reservationUnits.availabilities.from","reservationUnits.availabilities.to"]),a=e(n.getApiAbsUrl("/centers/:centerId/reservations"),{centerId:"@centerId",from:"@from",to:"@to"},{query:{method:"GET",isArray:!0,transformResponse:s}});return{query:function(e,n,t,i){return a.query({centerId:e,from:r("date")(n,"yyyy-MM-dd"),to:r("date")(t,"yyyy-MM-dd"),role:i||void 0}).$promise}}}])},bRZF:function(e,r){angular.module("deskworks.reservationRules.optsReservationLimitMax",[]).factory("optsReservationLimitMax",["$rootScope","$translate","$filter",function(e,r,n){"use strict";var t=[{id:"0.0",_name:"RESERVATION_RULES.UNLIMITED"},{id:"12.0",value:12,unit:"hours"},{id:"10.0",value:10,unit:"hours"},{id:"9.0",value:9,unit:"hours"},{id:"8.0",value:8,unit:"hours"},{id:"7.0",value:7,unit:"hours"},{id:"6.0",value:6,unit:"hours"},{id:"5.0",value:5,unit:"hours"},{id:"4.0",value:4,unit:"hours"},{id:"3.0",value:3,unit:"hours"},{id:"2.0",value:2,unit:"hours"},{id:"1.0",value:1,unit:"hours"},{id:"0.5",value:30,unit:"minutes"}];function i(){t.forEach((function(e){e._name&&(e.name=r.instant(e._name)),e.unit&&(e.name=n(e.unit)(e.value)+"/"+n("days")(1,!0))}))}return i(),e.$on("$setTranslationsSuccess",i),t}])},bqVI:function(e,r,n){"use strict";n.r(r);var t=n("KK/u"),i=n.n(t);r.default=angular.module("deskworks.OurMembers",["ngResource","deskworks.config"]).factory("OurMembers",["$resource","deskworksConfig",function(e,r){var n=e(r.getApiAbsUrl("/our-members"));return{query:function(e){var r={centerId:e.centerId||null,sort:i()(e)||null,q:e.q||null,limit:e.limit||null,offset:e.offset||null};return n.query(r).$promise}}}])},cy23:function(e,r){angular.module("deskworks.ProductCategory",["ngResource","deskworks.config","deskworks.helper"]).factory("ProductCategory",["$resource","$q","deskworksConfig","helper",function(e,r,n,t){"use strict";var i=e(n.getApiAbsUrl("/product-categories/:productCategoryId"),{},{update:{method:"PUT"}});return{query:function(){return i.query().$promise},save:function(e){return e.id?i.update({productCategoryId:e.id},e).$promise:i.save(e).$promise.then((function(r){e.id=r.id}))},delete:function(e){return i.delete({productCategoryId:e}).$promise}}}])},dE7R:function(e,r,n){"use strict";n.r(r);var t=n("nbuU"),i=n.n(t);r.default=angular.module("deskworks.userProfile.service.creditCard",["ngResource","deskworks.helper","deskworks.userProfile.cache","deskworks.userProfile.optsCCExpiryMonth","deskworks.userProfile.optsCCExpiryYear","deskworks.userProfile.optsCountry","deskworks.userProfile.optsState"]).factory("upCreditCardService",["$resource","$filter","deskworksConfig","userProfileCache","helper","optsCCExpiryMonth","optsCCExpiryYear","optsCountry","optsState",function(e,r,n,t,s,a,o,u,d){e(n.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/credit-cards/:creditCardId"),{},{update:{method:"PUT"}});var c=e(n.getApiAbsUrl("/payments/user-payment-methods/:id"));return{new:function(e){var r={id:s.uid(),country:i()(s).call(s,u,"US"),state:i()(s).call(s,d.US,"CA")};return e&&(r.firstName=e.firstName,r.lastName=e.lastName,r.company=e.company,e.billingAddress&&(r.street=e.billingAddress.street,r.city=e.billingAddress.city,r.country=e.billingAddress.country,r.state=e.billingAddress.state,r.zip=e.billingAddress.zip)),r},isNew:function(e){return e&&s.isUid(e.id)},save:function(e,r,n){if(t.removeAll(),s.isUid(n.id))return c.save({centerId:e||0,userId:r},this.unresolve(n)).$promise.then((function(e){return e.redirect||(n.id=e.id,n.oppwaId=e.id,n.cvv="***"),e}))},delete:function(e,r,n){return t.removeAll(),c.delete({id:n.oppwaId}).$promise},resolve:function(e){var n=r("toDate")(e.expiry),t=n.month()+1;return e.expiryMonth=s.findByKeyValue(a,"id",r("zpad")(t,2)),e.expiryYear=s.findByKeyValue(o,"id",n.year()),e.expiryYear=s.findByKeyValue(o,"id",n.year()),e.cvv="***",e.state=d[e.country]?s.findByKeyValue(d[e.country],"id",e.state):e.state,e.country=s.findByKeyValue(u,"id",e.country),e},unresolve:function(e){return{type:e.type&&e.type.id,number:e.number,cvv:e.cvv,city:e.city,company:e.company,country:e.country.id,expiry:e.expiryYear.id+"-"+e.expiryMonth.id+"-01",firstName:e.firstName,lastName:e.lastName,state:e.state.id||e.state,street:e.street,zip:e.zip}}}}])},"el4+":function(e,r,n){"use strict";n.r(r);n("Muwe"),n("w13K");angular.module("sessionInjector",["session"]).factory("sessionInjector",["$injector",function(e){return{request:function(r){if(!r.url.match(/\/api\//i))return r;var n=e.get("session");n.isAnonymous()||(r.headers.Authorization="Bearer "+n.accessToken);return r}}}])},"f+zm":function(e,r){e.exports='<header role="banner" aria-label="Logo" class="sidebar-logo" ng-if="!$app.hideSidebarHeader"> <a href="{{wlLinks.homepageUrl}}" title="{{wlLinks.companyName}}" target="_blank" rel="noopener"> <img src="/api/v1/white-label/images/logo.png" class="white-label-prefix" alt="{{wlLinks.companyName}}"> </a> </header> <div role="complementary" aria-label="Selectors" class="sidebar-selectors" ng-if="$ctrl.state.getLoggedUserId()"> <label class="center-selector sidebar-selector" ng-show="$ctrl.state.getUserCenters().length > 1"> <span translate="SIDEBAR.CURRENT_CENTER"></span> <dw-select-center></dw-select-center> </label> <div class="user-selector sidebar-selector" ng-if="$ctrl.state.isLoggedAdmin()"> <span class="ff-row"> <span flex="auto" translate="SIDEBAR.CURRENT_USER"></span> <ff-btn sense="resetUser" size="xs" title="{{\'SIDEBAR.CURRENT_USER.UNSELECT.HINT\' | translate}}" ng-if="$ctrl.state.isUserSelected()" ff-click="$ctrl.unselectUser()"></ff-btn> </span> <dw-select-user title="{{\'SIDEBAR.CURRENT_USER.HINT\' | translate}}"></dw-select-user> </div> <label class="dw-select-profile sidebar-selector" ng-if="!$ctrl.state.isLoggedAdmin()"></label> </div> <nav class="sidebar-body" aria-label="{{\'SIDEBAR.SIDEBAR\' | translate}}"> <div class="sidebar-body-inner"> <ul class="sidebar-items ff-relative"> <li ff-spin="\'/dashboard\' === $ctrl.pendingTask" class="dash-sidebar"> <a class="sidebar-item" href="#/dashboard" target="_blank" rel="noopener" ng-click="$ctrl.navigate($event, { dashboard: true })" snap-close ng-class="{ active: $ctrl.currentTask === \'/dashboard\' }"> <span translate="SIDEBAR.DASHBOARD"></span> </a> </li> </ul> <div class="sidebar-groups"> <div class="sidebar-group" ng-repeat="group in $ctrl.tasks" ng-if="group.tasks.length > 0"> <h2 class="sidebar-group-header" ng-class="{ active: group.active, open: group.open }" ng-click="$ctrl.toggleGroup(group)" ng-if="group.name"> <span ng-bind="group.name || \'[No Name]\'"></span> </h2> <ul class="sidebar-items" ng-collapse="group.name && !group.open" lazy-rendering="false"> <li ng-repeat-start="task in group.tasks" ff-spin="task.url === $ctrl.pendingTask" ng-if="task.url !== \'/widget-check-in\' && task.url !== \'/widget-manual-check-in\'"> <a class="sidebar-item" ng-href="{{\'#\' + task.url}}" target="_blank" rel="noopener" ng-if="!task.directUrl" ng-class="{ active: $ctrl.currentTask === task.url, disabled: !task.url }" ng-click="$ctrl.navigate($event, task)" snap-close> <span ng-bind="task.name"></span> </a> <a class="sidebar-item" ng-href="{{task.directUrl}}" target="{{task.target}}" rel="{{task.rel}}" ng-if="task.directUrl" snap-close><span ng-bind="task.name"></span></a> </li> <dw-check-in-widget ng-if="task.url === \'/widget-check-in\' && $ctrl.state.getCurrentCenterId() && $ctrl.state.isUserSelected()"> </dw-check-in-widget> <dw-manual-check-in-widget ng-repeat-end ng-if="task.url === \'/widget-manual-check-in\' && $ctrl.state.getCurrentCenterId() && $ctrl.state.isUserSelected()"> </dw-manual-check-in-widget> </ul> </div> </div> <ul class="sidebar-items"> <li ng-if="$ctrl.state.isLoggedAdmin()"> <a href="https://support.satellitedeskworks.com/" target="_blank" rel="noopener" class="sidebar-item"> <span translate="SIDEBAR.SUPPORT"></span> </a> </li> <li ng-if="!$ctrl.state.isLoggedAdmin() && wlLinks.contactLinkUrl"> <a href="{{wlLinks.contactLinkUrl}}" target="_blank" rel="noopener" class="sidebar-item"> <span translate="SIDEBAR.CONTACT"></span> </a> </li> <li ff-spin="$ctrl.pendingTask === \'/sign-in\' || $ctrl.pendingTask === \'/sign-out\'"> <sign-in-link active="{{$ctrl.currentTask === \'/sign-in\'}}"></sign-in-link> </li> </ul> </div> </nav> '},"f4/R":function(e,r,n){"use strict";n.r(r),r.default=angular.module("deskworks.setup.optsFreeAccessLength",[]).factory("optsFreeAccessLength",["$rootScope","$translate",function(e,r){var n=[{id:0,_name:"CENTERS.FREE_ACCESS.DISABLED"},{id:30,hours:.5},{id:60,hours:1},{id:90,hours:1.5},{id:120,hours:2},{id:180,hours:3}];function t(){n.forEach((function(e){e._name?e.name=r.instant(e._name):e.name=r.instant("GLOBAL.HOURS_FILTER",{hoursCount:e.hours},"messageformat")}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},fcSC:function(e,r){angular.module("deskworks.userProfile.optsAddressType",[]).factory("optsAddressType",(function(){"use strict";return[{id:1,name:"GLOBAL.ADDRESS.TYPE.HOME"},{id:2,name:"GLOBAL.ADDRESS.TYPE.BUSINESS"},{id:3,name:"GLOBAL.ADDRESS.TYPE.MAILING"},{id:4,name:"GLOBAL.ADDRESS.TYPE.BILLING"}]}))},fqDN:function(e,r,n){"use strict";n.r(r);var t=n("a8hB"),i=n.n(t);r.default=angular.module("deskworks.whitelabel",["getColorContrast"]).provider("whitelabel",(function(){return{setProperty:function(e,r){window.getComputedStyle(document.documentElement).getPropertyValue("--dynamic-white-label")||document.documentElement.style.setProperty(e,r)},$get:["getColorContrast",function(e){return r(),{setProperty:function(e,n){document.documentElement.style.setProperty(e,n),"--brand-color"===e&&r()},getProperty:function(e){var r=window.getComputedStyle(document.documentElement).getPropertyValue(e);return"--elastic-banner"!==e||r?r&&i()(r).call(r):"true"}};function r(){var r,n=window.getComputedStyle(document.documentElement),t=e(i()(r=n.getPropertyValue("--brand-color")).call(r))<170?"#fff":"#000";document.documentElement.style.setProperty("--text-on-brand-color",t)}}]}}))},gwBu:function(e,r,n){"use strict";n.r(r);n("3dw1");angular.module("deskworks.Roles",["ngResource","deskworks.config"]).factory("Roles",["$resource","deskworksConfig",function(e,r){var n=e(r.getApiAbsUrl("/roles"),{},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,function(e){if(!e)return;return e.forEach((function(e){e._name=t[e.id]})),e}]}}),t={nonMember:"GLOBAL.ROLE.NON_MEMBER",member:"GLOBAL.ROLE.MEMBER",coMember:"GLOBAL.CO_MEMBER",accountant:"GLOBAL.ROLE.ACCOUNTANT",coordinator:"GLOBAL.ROLE.COORDINATOR",admin:"GLOBAL.ROLE.ADMIN",management:"GLOBAL.ROLE.MANAGEMENT",master:"GLOBAL.ROLE.MASTER"};return{query:function(){return n.query().$promise}}}])},h30Z:function(e,r){angular.module("deskworks.userProfile.service.mailbox",["ngResource","deskworks.helper","deskworks.userProfile.cache","deskworks.userProfile.optsMailboxHandling"]).factory("upMailboxService",["$resource","deskworksConfig","userProfileCache","helper","optsMailboxHandling",function(e,r,n,t,i){"use strict";var s=e(r.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/mailboxes/:mailboxId"),{},{update:{method:"PUT"}});return{new:function(){return{id:t.uid(),handling:i[0]}},isNew:function(e){return e&&t.isUid(e.id)},save:function(e,r,i){return n.removeAll(),t.isUid(i.id)?s.save({centerId:e||0,userId:r},this.unresolve(i)).$promise.then((function(e){return i.id=e.id,e})):s.update({centerId:e||0,userId:r,mailboxId:i.id},this.unresolve(i)).$promise},delete:function(e,r,t){return n.removeAll(),s.delete({centerId:e||0,userId:r,mailboxId:t.id}).$promise},resolve:function(e){return e.handling=t.findByKeyValue(i,"id",e.handling),e},unresolve:function(e){return{number:e.number,key:e.key,names:e.names,handling:e.handling?e.handling.id:e.handling}}}}])},hAEH:function(e,r){angular.module("deskworks.inventory.optsCountCheckInsPer",[]).factory("optsCountCheckInsPer",["$rootScope","$translate",function(e,r){var n=[{id:"coMember",_name:"PRODUCTS.COUNT_CHECK_INS_PER.CO_MEMBER"},{id:"company",_name:"PRODUCTS.COUNT_CHECK_INS_PER.COMPANY"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},hzAx:function(e,r){angular.module("deskworks.optsAdminPermission",[]).factory("optsAdminPermission",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:null,_name:"ADMINISTRATORS.PERMISSION.NONE"},{id:"all",_name:"ADMINISTRATORS.PERMISSION.ALL"},{id:"viewProfileAndCalendar",_name:"ADMINISTRATORS.PERMISSION.VIEW_PROFILE_AND_CALENDAR"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},iKe0:function(e,r){angular.module("deskworks.inventory.optsProductType",[]).factory("optsProductType",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:"membership",_name:"PRODUCTS.PRODUCT_TYPE.MEMBERSHIP",import:"Membership"},{id:"registration",_name:"PRODUCTS.PRODUCT_TYPE.REGISTRATION",import:"Registration"},{id:"rental",_name:"PRODUCTS.PRODUCT_TYPE.RENTAL_HOURS",import:"Rental Hours"},{id:"print",_name:"PRODUCTS.PRODUCT_TYPE.PRINT",import:"Print"},{id:"services",_name:"PRODUCTS.PRODUCT_TYPE.SERVICES",import:"Services"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},iRDv:function(e,r){angular.module("deskworks.userProfile.cache",["autoCacheFactory"]).factory("userProfileCache",["autoCacheFactory",function(e){"use strict";return e("userProfile",60)}])},iynW:function(e,r){angular.module("deskworks.setup.optsProrateAtStart",[]).factory("optsProrateAtStart",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:null,_name:"GLOBAL.NONE"},{id:"firstCharge",_name:"SETUP_SETTINGS.PRO_RATE_AT_START.FIRST_MONTH"},{id:"secondCharge",_name:"SETUP_SETTINGS.PRO_RATE_AT_START.SECOND_MONTH"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},jJTb:function(e,r){angular.module("deskworks.CheckedInMembers",["ngResource","deskworks.config"]).factory("CheckedInMembers",["$resource","$timeout","$filter","deskworksConfig","helper",function(e,r,n,t,i){"use strict";var s=e(t.getApiAbsUrl("/centers/:centerId/checked-in-members"),{},{});return{query:function(e){return s.query({centerId:e}).$promise}}}])},lbZl:function(e,r,n){"use strict";n.r(r);n("3dw1"),n("8cZI");angular.module("deskworks.MessageBoard",["ngResource","deskworks.config","datesDeserializer"]).factory("MessageBoard",["$resource","$timeout","deskworksConfig","datesDeserializer","helper",function(e,r,n,t,i){var s=t(["createdAt"]),a=e(n.getApiAbsUrl("/message-board/messages/:messageId"),{},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,o]},update:{method:"PUT"}});return{query:function(e){return a.query(e).$promise},save:function(e){return e.id?a.update({messageId:e.id},e).$promise:a.save({},e).$promise.then((function(r){return e.id=r.id,r}))},delete:function(e){return a.delete({messageId:e}).$promise},deserialize:o};function o(e){return e=s(e),angular.forEach(angular.isArray(e)?e:[e],(function(e){e&&e.author&&(e.author.fullName=i.join([e.author.firstName,e.author.lastName]," "))})),e}}])},mjiN:function(e,r,n){"use strict";n.r(r);var t=n("yCd9"),i=n.n(t);n("iPZ8"),n("kypl");r.default=angular.module("deskworks.center.service",["ngResource","deskworks.config","autoCacheFactory","ngFileUpload","deskworks.helper","deskworks.userProfile.optsCountry","deskworks.userProfile.optsState"]).factory("centerService",["$resource","$filter","Upload","deskworksConfig","autoCacheFactory","helper","optsCountry","optsState",function(e,r,n,t,s,a,o,u){var d=s("center",60),c=e(t.getApiAbsUrl("/centers/:centerId"),{},{get:{method:"GET",cache:d},query:{method:"GET",cache:d,isArray:!0},update:{method:"PUT"}});return{resetCache:function(){d.removeAll()},getCenter:function(e){return c.get({centerId:e}).$promise},getCenters:function(e){return c.query().$promise},createCenter:function(e){return d.removeAll(),c.save({},e).$promise},updateCenter:function(e,r){return d.removeAll(),c.update({centerId:e},r).$promise},deleteCenter:function(e){return d.removeAll(),c.delete({centerId:e}).$promise},uploadThumbnail:function(e,r){return d.removeAll(),n.upload({url:t.getApiAbsUrl("/centers/"+e),method:"PUT",withCredentials:!0,data:{photo:r}})},deletePhoto:function(e){return d.removeAll(),c.update(e,{photo:null}).$promise},query:function(){return c.query().$promise},get:function(e){var r=this;return c.get({centerId:e}).$promise.then((function(e){return r.resolve(e)}))},save:function(e){return d.removeAll(),"new"===e.id?c.save({},this.unresolve(e)).$promise.then((function(r){return e.id=r.id,r})):c.update({centerId:e.id||0},this.unresolve(e)).$promise},resolve:function(e){return e.id&&"new"!==e.id?(e.street=e.address,e.country=a.findByKeyValue(o,"id",e.countryId),e.country&&u[e.country.id]&&(e.state=a.findByKeyValue(u[e.country.id],"id",e.state))):(e.id="new",e.country=a.findByKeyValue(o,"id","US"),e.state=a.findByKeyValue(u.US,"id","CA"),e.bankId=e.options.banks[0]&&e.options.banks[0].id,e.taxRates=[],e.ownerId=null,e.regionId=null),e},unresolve:function(e){var r,n={name:e.name,shortName:e.shortName,street1:e.street1,street2:e.street2,city:e.city,state:e.state.id?e.state.id:e.state,countryId:e.country.id,zip:e.zip,phone:e.phone,fax:e.fax,email:e.email,bankId:e.bankId,forInternalUse:!!e.forInternalUse,hideInMemberSignUp:!!e.hideInMemberSignUp,description:e.description,map:i()(e),directions:e.directions,color:e.color,timezone:e.timezone,ownerId:e.ownerId,regionId:e.regionId,taxId:e.taxId,taxRates:i()(r=e.taxRates).call(r,(function(e){return e.rate=+e.rate,e}))};return e.options.qboClasses&&(n.qboClassId=e.qboClassId),n}}}])},mvTK:function(e,r){angular.module("deskworks.reservationService",["ngResource","deskworks.config","datesDeserializer"]).factory("reservationService",["$resource","$filter","deskworksConfig","helper","datesDeserializer",function(e,r,n,t,i){"use strict";var s=r("date"),a=i(["from","to","updatedAt"]),o=e(n.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/reservations/:reservationId"),{},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,a]},save:{method:"POST",transformRequest:d},update:{method:"PUT",transformRequest:d}}),u=e(n.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/reservations-with-payments"),{},{save:{method:"POST",transformRequest:d}});return{query:function(e){return(e=angular.extend({},e)).from=e.from&&s(e.from,"iso"),e.to=e.to&&s(e.to,"iso"),o.query(e).$promise},save:function(e,r,n){return n.id?o.update({centerId:e,userId:r,reservationId:n.id},n).$promise:o.save({centerId:e,userId:r},n).$promise.then((function(e){return n.id=e.id,n.accessCode=e.accessCode,n}))},saveWithPayment:function(e,r,n){return u.save({centerId:e,userId:r},n).$promise},delete:function(e,r,n,t,i,s){return o.delete({centerId:e,userId:r,reservationId:n,emailConfirmation:t,repeatFrequency:i,repeatDuration:s}).$promise}};function d(e){return(e=angular.extend({},e)).from=s(e.from,"iso"),e.to=s(e.to,"iso"),angular.toJson(e)}}])},n1eT:function(e,r){angular.module("deskworks.userProfile.optsBankAccountType",[]).factory("optsBankAccountType",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:"checking",_name:"BILLING_PROFILE.E_CHECKS.ACCOUNT_TYPE.CHECKING"},{id:"savings",_name:"BILLING_PROFILE.E_CHECKS.ACCOUNT_TYPE.SAVINGS"}];return e.$on("$setTranslationsSuccess",(function(){n.forEach((function(e){e.name=r.instant(e._name)}))})),n}])},nBBl:function(e,r){angular.module("deskworks.userProfile.optsCCExpiryYear",[]).factory("optsCCExpiryYear",["$filter",function(e){"use strict";var r=[],n=new Date,t=new Date;n.setDate(1),t.setDate(1);for(var i=0;i<11;i++)n.setFullYear(t.getFullYear()+i),r.push({id:String(n.getFullYear()),name:e("date")(n,"yyyy")});return r}])},nF3y:function(e,r){angular.module("deskworks.sidebarTasks.service",[]).factory("sidebarTasks",(function(){"use strict";return["widget-check-in","widget-manual-check-in","profile","new-member","new-user","our-members","floor-plans-community","floor-plans-reservation","usage-entry","member-usage","usage-tracking","member-log","manual-check-in-log","new-reservation","simple-reservation","reservation-calendar","reservations","equipment-reservation","billing-profiles","purchases","recurring-charges","member-statement","generate-invoice","termination-request","bulk-invoicing","bulk-charges","bulk-payments-assignment","printer-usage","invoice-log","accounting-periods","analytics-dashboard","membership-report","recurring-billing-report","recurring-billing-churn-report","income-report","income-by-item-report","accounts-receivable-report","deposit-transaction-report","deposit-and-tax-report","credit-balance-report","reservation-report","mailbox-report","security-deposit-report","availability-report","member-usage-report","check-in-report","reservation-utilization-report","write-off-report","reservation-usage-report","passport-reservation-usage-report","rent-roll-report","pass-usage-report","revenue-forecast-report","payment-reconciliation-report","recurring-billing-change-report","pricelists","products","membership-types","reservation-types","reservation-units","product-categories","floor-plans","discount-codes","email-all-members","email-site-members","message-board","splash-page","tasks","system-emails","access-cards","centers","administrators","lead-sources","setup/bulk-invoices","setup/recurring-invoices","setup/expired-card-email","setup/declined-card-email","setup/welcome-letter","setup/reservation-confirmation","setup/reservation-reminder","setup/cal-sync-error-email","setup/passes-used-up-email","setup/plan-passes-used-up-notice","setup/bucket-used-up-email","setup/renewal-notice-email","notifications/receipt-email","notifications/message-board-notices","notifications/startup-info","notifications/reservation-follow-up-survey","notifications/refund-notice","desk-tablet-template","notifications/receipt-page","setup/settings","setup/api-settings","setup/printer-usage-settings","setup/import","banks","payment-gateways","owners-regions","user-fields","reservation-fields","integrations-setup","reservation-tablet-setup","quick-books-errors","ezeep-errors","white-label-settings"]}))},ngiX:function(e,r){angular.module("deskworks.userProfile.optsState",[]).factory("optsState",(function(){"use strict";return{US:[{id:"AL",name:"AL"},{id:"AK",name:"AK"},{id:"AZ",name:"AZ"},{id:"AR",name:"AR"},{id:"CA",name:"CA"},{id:"CO",name:"CO"},{id:"CT",name:"CT"},{id:"DE",name:"DE"},{id:"DC",name:"DC"},{id:"FL",name:"FL"},{id:"GA",name:"GA"},{id:"HI",name:"HI"},{id:"ID",name:"ID"},{id:"IL",name:"IL"},{id:"IN",name:"IN"},{id:"IA",name:"IA"},{id:"KS",name:"KS"},{id:"KY",name:"KY"},{id:"LA",name:"LA"},{id:"ME",name:"ME"},{id:"MD",name:"MD"},{id:"MA",name:"MA"},{id:"MI",name:"MI"},{id:"MN",name:"MN"},{id:"MS",name:"MS"},{id:"MO",name:"MO"},{id:"MT",name:"MT"},{id:"NE",name:"NE"},{id:"NV",name:"NV"},{id:"NH",name:"NH"},{id:"NJ",name:"NJ"},{id:"NM",name:"NM"},{id:"NY",name:"NY"},{id:"NC",name:"NC"},{id:"ND",name:"ND"},{id:"OH",name:"OH"},{id:"OK",name:"OK"},{id:"ON",name:"ON"},{id:"OR",name:"OR"},{id:"PA",name:"PA"},{id:"RI",name:"RI"},{id:"SC",name:"SC"},{id:"SD",name:"SD"},{id:"TN",name:"TN"},{id:"TX",name:"TX"},{id:"UT",name:"UT"},{id:"VT",name:"VT"},{id:"VA",name:"VA"},{id:"WA",name:"WA"},{id:"WV",name:"WV"},{id:"WI",name:"WI"},{id:"WY",name:"WY"}]}}))},oQKN:function(e,r,n){"use strict";n.r(r),r.default=angular.module("deskworks.emailAllMembers.service",["ngResource","deskworks.config"]).factory("emailAllMembers",["$resource","deskworksConfig",function(e,r){var n=e(r.getApiAbsUrl("/email-all-members")),t=e(r.getApiAbsUrl("/email-templates/email-all-members"),{},{update:{method:"PUT"}});return{send:function(e,r){return n.save({test:r||null},e).$promise},query:function(e){return n.query({includeNonMembers:e}).$promise},getTpl:function(){return t.get().$promise},saveTpl:function(e){return t.update({},e).$promise}}}])},qMzQ:function(e,r){angular.module("deskworks.reservationRules.optsReservationLimitMin",[]).factory("optsReservationLimitMin",["$rootScope","$translate","$filter",function(e,r,n){"use strict";var t=[{id:"0.25",value:15,unit:"minutes",name:"15 min"},{id:"0.5",value:30,unit:"minutes",name:"30 min"},{id:"1.0",value:1,unit:"hours",name:"1 hr"},{id:"2.0",value:2,unit:"hours",name:"2 hr"},{id:"4.0",value:4,unit:"hours",name:"4 hr"},{id:"24.0",value:1,unit:"days",name:"1 day"},{id:"72.0",value:3,unit:"days",name:"3 day"},{id:"168.0",value:1,unit:"weeks",name:"1 week"}];function i(){t.forEach((function(e){e.name=n(e.unit)(e.value)}))}return i(),e.$on("$setTranslationsSuccess",i),t}])},qYhU:function(e,r){angular.module("deskworks.PassProduct.service",["ngResource","deskworks.config"]).factory("PassProduct",["$resource","$q","deskworksConfig",function(e,r,n){"use strict";var t=e(n.getApiAbsUrl("/centers/:centerId/pass-products"));return{query:function(e){return t.query({centerId:e}).$promise}}}])},qrcK:function(e,r){angular.module("deskworks.userProfile.service.phone",["ngResource","deskworks.helper","deskworks.userProfile.cache","deskworks.userProfile.optsPhoneType"]).factory("upPhoneService",["$resource","deskworksConfig","userProfileCache","helper","optsPhoneType",function(e,r,n,t,i){"use strict";var s=e(r.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/phones/:phoneId"),{},{update:{method:"PUT"}});return{new:function(){return{id:t.uid(),type:i[2]}},isNew:function(e){return e&&t.isUid(e.id)},save:function(e,r,i){return n.removeAll(),t.isUid(i.id)?s.save({centerId:e||0,userId:r},this.unresolve(i)).$promise.then((function(e){return i.id=e.id,e})):s.update({centerId:e||0,userId:r,phoneId:i.id},this.unresolve(i)).$promise},delete:function(e,r,t){return n.removeAll(),s.delete({centerId:e||0,userId:r,phoneId:t.id}).$promise},resolve:function(e){return e.type=t.findByKeyValue(i,"id",e.typeId),e},unresolve:function(e){return{typeId:e.type&&e.type.id?e.type.id:e.type,number:e.number,ext:e.ext}}}}])},rlu9:function(e,r,n){"use strict";n.r(r);n("3dw1"),n("8cZI");r.default=angular.module("deskworks.dashboard.service",["ngResource","deskworks.config","deskworks.helper","datesDeserializer"]).service("dashboardService",["$resource","deskworksConfig","helper","datesDeserializer",function(e,r,n,t){var i=t(["reservationsToday.startTime","reservationsToday.endTime","reservationsToday.updatedAt","reservationsTomorrow.startTime","reservationsTomorrow.endTime","reservationsTomorrow.updatedAt","reservationsConflicts.startTime","reservationsConflicts.endTime"]),s=e(r.getApiAbsUrl("/dashboard/center-stats"),{},{get:{method:"GET",isArray:!1,transformResponse:[i,function(e){return(e=angular.fromJson(e)).selfRegistrations.forEach((function(e){e.fullNameCompany=n.join([e.company,e.fullName],", ")})),e}]},update:{method:"PUT"}}),a=e(r.getApiAbsUrl("/dashboard/reservations-conflicts/:conflictId"),{},{update:{method:"PUT"}});this.getCenterStats=function(e){return s.get({centerId:e}).$promise},this.resetReservationConflict=function(e){return a.delete({conflictId:e}).$promise}}])},rngN:function(e,r,n){"use strict";n.r(r);var t=n("nbuU"),i=n.n(t);r.default=angular.module("deskworks.userProfile.service.eCheck",["ngResource","deskworks.helper","deskworks.userProfile.cache","deskworks.userProfile.optsBankAccountHolderType","deskworks.userProfile.optsBankAccountType"]).factory("upECheckService",["$resource","$filter","deskworksConfig","userProfileCache","helper","optsBankAccountHolderType","optsBankAccountType",function(e,r,n,t,s,a,o){var u=e(n.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/e-checks/:eCheckId"),{},{update:{method:"PUT"}});return{new:function(e){return{id:s.uid(),bankAccountHolderType:a[0],bankAccountType:o[0],fullName:e&&e.fullName}},isNew:function(e){return e&&s.isUid(e.id)},save:function(e,r,n){if(t.removeAll(),s.isUid(n.id))return u.save({centerId:e||0,userId:r},this.unresolve(n)).$promise.then((function(e){return n.id=e.id,e}))},delete:function(e,r,n){return t.removeAll(),u.delete({centerId:e||0,userId:r,eCheckId:n.id}).$promise},resolve:function(e){return e.bankAccountHolderType=i()(s).call(s,a,e.bankAccountHolderType),e.bankAccountType=i()(s).call(s,o,e.bankAccountType),e},unresolve:function(e){return{bankAccountHolderType:e.bankAccountHolderType.id,bankAccountType:e.bankAccountType.id,bankName:e.bankName,bankRoutingNumber:e.bankRoutingNumber,bankAccountNumber:e.bankAccountNumber,fullName:e.fullName}}}}])},sS9G:function(e,r){angular.module("deskworks.bank.service",["ngResource","deskworks.config","datesDeserializer"]).factory("bankService",["$resource","$q","$filter","deskworksConfig","helper","datesDeserializer",function(e,r,n,t,i,s){"use strict";var a=s(["creditCardCutOffTime"]),o=e(t.getApiAbsUrl("/banks/:bankId"),{},{query:{method:"GET",isArray:!0,transformResponse:a},get:{method:"GET",transformResponse:a},update:{method:"PUT"}});return{query:function(){return o.query().$promise},get:function(e){return"new"===e?r.when({id:e}):o.get({bankId:e}).$promise},save:function(e){var r=angular.copy(e);return r.creditCardCutOffTime=n("date")(e.creditCardCutOffTime,"HH:mm"),e.id&&"new"!==e.id?o.update({bankId:e.id},r).$promise:o.save({},r).$promise.then((function(r){return e.id=r.id,r}))},delete:function(e){return o.delete({bankId:e}).$promise}}}])},tdlC:function(e,r){angular.module("deskworks.userProfile.optsCCExpiryMonth",[]).factory("optsCCExpiryMonth",["$filter","$rootScope",function(e,r){"use strict";var n=[],t=new Date,i=new Date;t.setDate(1),i.setDate(1);for(var s=0;s<12;s++)t.setMonth(s),n.push({id:s+1<10?"0"+(s+1):""+(s+1),name:e("date")(t,"MM - LLLL")});return r.$on("$setLocaleSuccess",(function(){n.forEach((function(r,n){t.setMonth(n),r.name=e("date")(t,"MM - LLLL")}))})),n}])},tped:function(e,r){angular.module("deskworks.memberUsageService",["ngResource","deskworks.config","datesDeserializer"]).factory("memberUsageService",["$resource","$filter","deskworksConfig","helper","datesDeserializer",function(e,r,n,t,i){"use strict";var s=i(["usages.date","usages.reservationLog.startTime","usages.reservationLog.endTime","usages.checkInLog.startTime","usages.checkInLog.endTime"]),a=e(n.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/member-usages/:memberUsageId"),{},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,s]},get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,s]},update:{method:"PUT"}}),o=e(n.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/member-usages/:memberUsageId/usages/:usageId"),{},{});return{query:function(e,r,n,t){return a.query({centerId:e||0,userId:r,page:n||1,pageSize:t||10}).$promise},get:function(e,r,n,t,i){return a.get({centerId:e,userId:r,memberUsageId:n,page:t||1,pageSize:i||10}).$promise},deletePassRefill:function(e,r,n,t){return o.delete({centerId:e,userId:r,memberUsageId:n,usageId:t}).$promise}}}])},uJ6t:function(e,r,n){"use strict";n.r(r);n("3dw1"),n("Muwe"),n("w13K"),n("y89P"),n("aZFp"),n("8cZI");angular.module("deskworks.UserTasks.service",["ngResource","autoCacheFactory","deskworks.config","deskworks.state","deskworks.sidebarTasks.service"]).factory("UserTasks",["$resource","$timeout","autoCacheFactory","deskworksConfig","state","sidebarTasks",function(e,r,n,t,i,s){var a=n("user-tasks",120),o=e(t.getApiAbsUrl("/centers/:centerId/user-tasks"),{},{query:{method:"GET",cache:a,isArray:!0}});return{query:function(e,n){return r((function(){return null}),window.cordova?1e3:0).then((function(){return o.query({centerId:e,userId:n||void 0}).$promise.then((function(e){return function(e){return e?(e.forEach((function(e){e.open=!1,e.tasks.forEach((function(e){if(e.url&&e.url.match(/^https?:\/\//i))return e.url.indexOf("{{target:self}}")>=0?e.target="_self":(e.target="_blank",e.rel="noopener"),e.url=e.url.replace("{{target:self}}",""),void(e.directUrl=u(e.url));e.url=s.indexOf(e.url)>=0?"/"+e.url:null}))})),e):e}(e)}))}))},interpolateTaskUrl:u,tasks:[]};function u(e){var r=[],n=e.split("?");return(n=n[n.length-1])?(n.split("&").forEach((function(e){var n;"{{center}}"===(e=e.split("="))[1]&&i.getCurrentCenterId()?n=i.getCurrentCenterId():"{{user}}"===e[1]&&i.isLoggedAdmin()&&i.getCurrentUserId()!==i.getLoggedUserId()&&(n=i.getCurrentUserId()),n&&r.push(e[0]+"="+encodeURIComponent(n))})),r.length?(r=r.join("&"),(n=e.split("?"))[n.length-1]=r,n.join("?")):e):e}}])},vJ5q:function(e,r,n){"use strict";n.r(r),r.default=angular.module("deskworks.ReservationPrice",["ngResource","deskworks.config"]).factory("ReservationPrice",["$resource","$q","deskworksConfig",function(e,r,n){var t=e(n.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/reservation-prices"),{centerId:"@centerId",userId:"@userId"},{query:{method:"GET",isArray:!0}});return{query:function(e,r){return t.query({centerId:e,userId:r}).$promise}}}])},vXQe:function(e,r){angular.module("deskworks.reservationRules.optsTimeInAdvance",[]).factory("optsTimeInAdvance",["$rootScope","$translate","$filter",function(e,r,n){"use strict";var t=[{id:0,_name:"GLOBAL.NONE"},{id:1},{id:12},{id:24},{id:48}];function i(){t.forEach((function(e){e.name=e._name?r.instant(e._name):n("hours")(e.id)}))}return i(),e.$on("$setTranslationsSuccess",i),t}])},ws3g:function(e,r){angular.module("deskworks.Owner",["ngResource","deskworks.config"]).factory("Owner",["$resource","$q","deskworksConfig",function(e,r,n){var t=e(n.getApiAbsUrl("/owners/:ownerId"),{},{update:{method:"PUT"}});return{query:function(){return t.query().$promise},save:function(e){return e.id?t.update({ownerId:e.id},e).$promise:t.save(e).$promise.then((function(r){e.id=r.id}))},delete:function(e){return t.delete({ownerId:e}).$promise}}}])},wv5Z:function(e,r,n){"use strict";n.r(r);n("3dw1");angular.module("deskworks.reservationUnit.optsRepeatFrequency",[]).factory("optsRepeatFrequency",["$rootScope","$filter","$translate",function(e,r,n){var t=[{_name:"RESERVATIONS.REPEAT_FREQUENCY.NONE"},{id:"1.day",_name:"RESERVATIONS.REPEAT_FREQUENCY.DAILY",repeatDurationFilter:r("days"),repeatDurationOptions:[1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{id:"1.week",_name:"RESERVATIONS.REPEAT_FREQUENCY.WEEKLY",repeatDurationFilter:r("weeks"),repeatDurationOptions:[1,2,3,4,5,6,7,8,9,10,11,12]},{id:"1.month",_name:"RESERVATIONS.REPEAT_FREQUENCY.MONTHLY",repeatDurationFilter:r("months"),repeatDurationOptions:[1,2,3,4,5,6,7,8,9,10,11,12]},{id:"4.weeks",_name:"RESERVATIONS.REPEAT_FREQUENCY.MONTHLY_WEEKLY",repeatDurationFilter:r("months"),repeatDurationOptions:[1,2,3,4,5,6,7,8,9,10,11,12]}];function i(){t.forEach((function(e){e.name=n.instant(e._name)}))}return i(),e.$on("$setTranslationsSuccess",i),t}])},xSiC:function(e,r){angular.module("deskworks.userProfile.optsCountry",[]).factory("optsCountry",(function(){"use strict";return[{id:"AF",name:"Afghanistan"},{id:"AL",name:"Albania"},{id:"DZ",name:"Algeria"},{id:"AS",name:"American Samoa"},{id:"AD",name:"Andorra"},{id:"AO",name:"Angola"},{id:"AI",name:"Anguilla"},{id:"AG",name:"Antigua and Barbuda"},{id:"AR",name:"Argentina"},{id:"AM",name:"Armenia"},{id:"AW",name:"Aruba"},{id:"AU",name:"Australia"},{id:"AT",name:"Austria"},{id:"AZ",name:"Azerbaijan"},{id:"BS",name:"Bahamas"},{id:"BH",name:"Bahrain"},{id:"BD",name:"Bangladesh"},{id:"BB",name:"Barbados"},{id:"BY",name:"Belarus"},{id:"BE",name:"Belgium"},{id:"BZ",name:"Belize"},{id:"BJ",name:"Benin"},{id:"BM",name:"Bermuda"},{id:"BT",name:"Bhutan"},{id:"BO",name:"Bolivia"},{id:"BA",name:"Bosnia and Herzegovina"},{id:"BW",name:"Botswana"},{id:"BV",name:"Bouvet Island"},{id:"BR",name:"Brazil"},{id:"IO",name:"British Indian Ocean Territory"},{id:"BN",name:"Brunei Darussalam"},{id:"BG",name:"Bulgaria"},{id:"BF",name:"Burkina Faso"},{id:"BI",name:"Burundi"},{id:"KH",name:"Cambodia"},{id:"CM",name:"Cameroon"},{id:"CA",name:"Canada"},{id:"CV",name:"Cape Verde"},{id:"KY",name:"Cayman Islands"},{id:"CF",name:"Central African Republic"},{id:"TD",name:"Chad"},{id:"CL",name:"Chile"},{id:"CN",name:"China"},{id:"CX",name:"Christmas Island"},{id:"CC",name:"Cocos (Keeling) Islands"},{id:"CO",name:"Colombia"},{id:"KM",name:"Comoros"},{id:"CG",name:"Congo"},{id:"CD",name:"Congo, the Democratic Republic of the"},{id:"CK",name:"Cook Islands"},{id:"CR",name:"Costa Rica"},{id:"CI",name:"Cote D'Ivoire"},{id:"HR",name:"Croatia"},{id:"CU",name:"Cuba"},{id:"CY",name:"Cyprus"},{id:"CZ",name:"Czech Republic"},{id:"DK",name:"Denmark"},{id:"DJ",name:"Djibouti"},{id:"DM",name:"Dominica"},{id:"DO",name:"Dominican Republic"},{id:"EC",name:"Ecuador"},{id:"EG",name:"Egypt"},{id:"SV",name:"El Salvador"},{id:"GQ",name:"Equatorial Guinea"},{id:"ER",name:"Eritrea"},{id:"EE",name:"Estonia"},{id:"ET",name:"Ethiopia"},{id:"FK",name:"Falkland Islands (Malvinas)"},{id:"FO",name:"Faroe Islands"},{id:"FJ",name:"Fiji"},{id:"FI",name:"Finland"},{id:"FR",name:"France"},{id:"GF",name:"French Guiana"},{id:"PF",name:"French Polynesia"},{id:"TF",name:"French Southern Territories"},{id:"GA",name:"Gabon"},{id:"GM",name:"Gambia"},{id:"GE",name:"Georgia"},{id:"DE",name:"Germany"},{id:"GH",name:"Ghana"},{id:"GI",name:"Gibraltar"},{id:"GR",name:"Greece"},{id:"GL",name:"Greenland"},{id:"GD",name:"Grenada"},{id:"GP",name:"Guadeloupe"},{id:"GU",name:"Guam"},{id:"GT",name:"Guatemala"},{id:"GG",name:"Guernsey"},{id:"GN",name:"Guinea"},{id:"GW",name:"Guinea-Bissau"},{id:"GY",name:"Guyana"},{id:"HT",name:"Haiti"},{id:"HM",name:"Heard Island And Mcdonald Islands"},{id:"VA",name:"Holy See (Vatican City State)"},{id:"HN",name:"Honduras"},{id:"HK",name:"Hong Kong"},{id:"HU",name:"Hungary"},{id:"IS",name:"Iceland"},{id:"IN",name:"India"},{id:"ID",name:"Indonesia"},{id:"IR",name:"Iran, Islamic Republic of"},{id:"IQ",name:"Iraq"},{id:"IE",name:"Ireland"},{id:"IM",name:"Isle Of Man"},{id:"IL",name:"Israel"},{id:"IT",name:"Italy"},{id:"JM",name:"Jamaica"},{id:"JP",name:"Japan"},{id:"JE",name:"Jersey"},{id:"JO",name:"Jordan"},{id:"KZ",name:"Kazakhstan"},{id:"KE",name:"Kenya"},{id:"KI",name:"Kiribati"},{id:"KP",name:"Korea, Democratic People's Republic of"},{id:"KR",name:"Korea, Republic of"},{id:"KW",name:"Kuwait"},{id:"KG",name:"Kyrgyzstan"},{id:"LA",name:"Lao People's Democratic Republic"},{id:"LV",name:"Latvia"},{id:"LB",name:"Lebanon"},{id:"LS",name:"Lesotho"},{id:"LR",name:"Liberia"},{id:"LY",name:"Libyan Arab Jamahiriya"},{id:"LI",name:"Liechtenstein"},{id:"LT",name:"Lithuania"},{id:"LU",name:"Luxembourg"},{id:"MO",name:"Macao"},{id:"MK",name:"Macedonia, the Former Yugoslav Republic of"},{id:"MG",name:"Madagascar"},{id:"MW",name:"Malawi"},{id:"MY",name:"Malaysia"},{id:"MV",name:"Maldives"},{id:"ML",name:"Mali"},{id:"MT",name:"Malta"},{id:"MH",name:"Marshall Islands"},{id:"MQ",name:"Martinique"},{id:"MR",name:"Mauritania"},{id:"MU",name:"Mauritius"},{id:"YT",name:"Mayotte"},{id:"MX",name:"Mexico"},{id:"FM",name:"Micronesia, Federated States of"},{id:"MD",name:"Moldova, Republic of"},{id:"MC",name:"Monaco"},{id:"MN",name:"Mongolia"},{id:"ME",name:"Montenegro"},{id:"MS",name:"Montserrat"},{id:"MA",name:"Morocco"},{id:"MZ",name:"Mozambique"},{id:"MM",name:"Myanmar"},{id:"NA",name:"Namibia"},{id:"NR",name:"Nauru"},{id:"NP",name:"Nepal"},{id:"NL",name:"Netherlands"},{id:"AN",name:"Netherlands Antilles"},{id:"NC",name:"New Caledonia"},{id:"NZ",name:"New Zealand"},{id:"NI",name:"Nicaragua"},{id:"NE",name:"Niger"},{id:"NG",name:"Nigeria"},{id:"NU",name:"Niue"},{id:"NF",name:"Norfolk Island"},{id:"MP",name:"Northern Mariana Islands"},{id:"NO",name:"Norway"},{id:"OM",name:"Oman"},{id:"PK",name:"Pakistan"},{id:"PW",name:"Palau"},{id:"PS",name:"Palestinian Territory, Occupied"},{id:"PA",name:"Panama"},{id:"PG",name:"Papua New Guinea"},{id:"PY",name:"Paraguay"},{id:"PE",name:"Peru"},{id:"PH",name:"Philippines"},{id:"PN",name:"Pitcairn"},{id:"PL",name:"Poland"},{id:"PT",name:"Portugal"},{id:"PR",name:"Puerto Rico"},{id:"QA",name:"Qatar"},{id:"RE",name:"Reunion"},{id:"RO",name:"Romania"},{id:"RU",name:"Russian Federation"},{id:"RW",name:"Rwanda"},{id:"BL",name:"Saint Barthélemy"},{id:"SH",name:"Saint Helena"},{id:"KN",name:"Saint Kitts and Nevis"},{id:"LC",name:"Saint Lucia"},{id:"MF",name:"Saint Martin (French part)"},{id:"PM",name:"Saint Pierre and Miquelon"},{id:"VC",name:"Saint Vincent and the Grenadines"},{id:"WS",name:"Samoa"},{id:"SM",name:"San Marino"},{id:"ST",name:"Sao Tome and Principe"},{id:"SA",name:"Saudi Arabia"},{id:"SN",name:"Senegal"},{id:"RS",name:"Serbia"},{id:"SC",name:"Seychelles"},{id:"SL",name:"Sierra Leone"},{id:"SG",name:"Singapore"},{id:"SK",name:"Slovakia"},{id:"SI",name:"Slovenia"},{id:"SB",name:"Solomon Islands"},{id:"SO",name:"Somalia"},{id:"ZA",name:"South Africa"},{id:"GS",name:"South Georgia and the South Sandwich Islands"},{id:"ES",name:"Spain"},{id:"LK",name:"Sri Lanka"},{id:"SD",name:"Sudan"},{id:"SR",name:"Suriname"},{id:"SJ",name:"Svalbard and Jan Mayen"},{id:"SZ",name:"Swaziland"},{id:"SE",name:"Sweden"},{id:"CH",name:"Switzerland"},{id:"SY",name:"Syrian Arab Republic"},{id:"TW",name:"Taiwan, Province of China"},{id:"TJ",name:"Tajikistan"},{id:"TZ",name:"Tanzania, United Republic of"},{id:"TH",name:"Thailand"},{id:"TL",name:"Timor Leste"},{id:"TG",name:"Togo"},{id:"TK",name:"Tokelau"},{id:"TO",name:"Tonga"},{id:"TT",name:"Trinidad and Tobago"},{id:"TN",name:"Tunisia"},{id:"TR",name:"Turkey"},{id:"TM",name:"Turkmenistan"},{id:"TC",name:"Turks and Caicos Islands"},{id:"TV",name:"Tuvalu"},{id:"UG",name:"Uganda"},{id:"UA",name:"Ukraine"},{id:"AE",name:"United Arab Emirates"},{id:"GB",name:"United Kingdom"},{id:"US",name:"United States",import:"USA"},{id:"UM",name:"United States Minor Outlying Islands"},{id:"UY",name:"Uruguay"},{id:"UZ",name:"Uzbekistan"},{id:"VU",name:"Vanuatu"},{id:"VE",name:"Venezuela"},{id:"VN",name:"Viet Nam"},{id:"VG",name:"Virgin Islands, British"},{id:"VI",name:"Virgin Islands, U.S."},{id:"WF",name:"Wallis and Futuna"},{id:"EH",name:"Western Sahara"},{id:"YE",name:"Yemen"},{id:"ZM",name:"Zambia"},{id:"ZW",name:"Zimbabwe"},{id:"AX",name:"Åland Islands"}]}))},yLkI:function(e,r,n){"use strict";n.r(r);n("JBxO"),n("FdtR");angular.module("session",["deskworks.config","deskworks.userRoles"]).factory("session",["$q","$http","deskworksConfig","userRoles",function(e,r,n,t){var i=n.getApiAbsUrl("/auth"),s={wait:function(){return e.when(a)},refresh:u,login:function(n,t,s){return e.when(a).finally((function(){return a=r.post(i,{username:n,password:t,remember:s}).then(d).finally((function(){a=null}))}))},logout:function(){return e.when(a).finally((function(){return r.delete(i).finally(o)}))},isAnonymous:function(){return!s.user},isAdmin:function(){return s.user&&t[s.user.role]&&"admin"===t[s.user.role].type||!1},isRole:function(e){angular.isArray(e)||(e=[e]);return s.user&&e.some((function(e){return e===s.user.role}))||!1},loginSilent:function(e,n){return r.post(i,{username:e,password:n}).then((function(e){return s.accessToken=e.data.accessToken,e}))}};o();var a=u().finally((function(){a=null}));return s;function o(){s.accessToken=null,s.user=null,s.expireAt=null}function u(){return a||(a=r.get(i).then(d).catch((function(e){if(401!==e.status)throw e})).finally((function(){a=null})))}function d(e){return s.accessToken=e.data.accessToken,s.user=e.data.user,e}}])},yhnS:function(e,r){angular.module("deskworks.optsSystemEmailFunction",[]).factory("optsSystemEmailFunction",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:0,_name:"SYSTEM_EMAILS.FUNCTION.FROM"},{id:1,_name:"SYSTEM_EMAILS.FUNCTION.SIGN_UP"},{id:2,_name:"SYSTEM_EMAILS.FUNCTION.LOST_ACCESS_CARD"},{id:3,_name:"SYSTEM_EMAILS.FUNCTION.NEW_ORDER"},{id:4,_name:"SYSTEM_EMAILS.FUNCTION.EXISTING_ORDER"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},zBDg:function(e,r,n){"use strict";n.r(r);n("3dw1"),n("8cZI");r.default=angular.module("deskworks.Admin",["ngResource","deskworks.config","deskworks.helper"]).factory("Admin",["$resource","$q","deskworksConfig","helper",function(e,r,n,t){var i=e(n.getApiAbsUrl("/administrators/:adminId"),{},{update:{method:"PUT"}});return{query:function(){return i.query().$promise},get:function(e){return i.get({adminId:e}).$promise.then((function(r){return"new"===e?(r.role=r.options.roles[0],r.receiveUrgentReservationNotices=!0,r.receiveWelcomeEmailCopies=!1,r.receiveReservationConfirmationCopies=!1,r.seeDashboardRevenue=!0,r.centers.forEach((function(e){e.emailing=!0,e.permission="all"}))):r.role=t.findByKeyValue(r.options.roles,"id",r.role),r.centers=r.centers||{},r.fullName=r.fullName||t.join([r.firstName,r.lastName]," "),r}))},save:function(e){var r=t.purify(e,["options","printerCode"]);return r.role=r.role&&r.role.id?r.role.id:r.role,e.id&&"new"!==e.id?i.update({adminId:e.id},r).$promise:i.save({},r).$promise.then((function(r){return e.id=r.id,e}))},delete:function(e){return i.delete({adminId:e}).$promise}}}])},zFMG:function(e,r){angular.module("deskworks.optsDashboardIncome",[]).factory("optsDashboardIncome",["$rootScope","$translate",function(e,r){"use strict";var n=[{id:"cash",_name:"SETUP_SETTINGS.DASHBOARD_INCOME.CASH"},{id:"accrual",_name:"SETUP_SETTINGS.DASHBOARD_INCOME.ACCRUAL"}];function t(){n.forEach((function(e){e.name=r.instant(e._name)}))}return t(),e.$on("$setTranslationsSuccess",t),n}])},zqmC:function(e,r,n){"use strict";n.r(r);var t=n("1PCL"),i=n.n(t),s=n("yCd9"),a=n.n(s),o=n("hsT8"),u=n.n(o),d=n("03wM"),c=n.n(d);n("3dw1");angular.module("deskworks.reservationRules.service",["ngResource","deskworks.config"]).factory("ReservationRules",["$resource","$timeout","$filter","$rootScope","$translate","$locale","helper","deskworksConfig",function(e,r,n,t,s,o,d,l){var m=l.getApiAbsUrl("/centers/:centerId/reservation-rules/:ruleId"),f=l.getApiAbsUrl("/centers/:centerId/reservation-units/:reservationUnitId/reservation-rules/:ruleId"),p=e(m,{centerId:"@centerId",ruleId:"@ruleId"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,k]},save:{method:"POST",transformRequest:[v,angular.toJson],transformResponse:[angular.fromJson,k]},update:{method:"PUT",transformRequest:[v,angular.toJson],transformResponse:[angular.fromJson,k]},delete:{method:"DELETE"}}),g=e(f,{centerId:"@centerId",reservationUnitId:"@reservationUnitId",ruleId:"@ruleId"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,k]},save:{method:"POST",transformRequest:[v,angular.toJson],transformResponse:[angular.fromJson,k]},update:{method:"PUT",transformRequest:[v,angular.toJson],transformResponse:[angular.fromJson,k]}}),h=[{id:"member",_name:"RESERVATION_RULES.MEMBER",$isVisible:function(e){return"staffOnly"!==e&&"notAvailable"!==e&&"nonMember"!==e}},{id:"nonMember",_name:"RESERVATION_RULES.NON_MEMBER",$isVisible:function(e){return"anyone"===e||"nonMember"===e}}];function I(){h.forEach((function(e){e.name=s.instant(e._name)}))}return I(),t.$on("$setTranslationsSuccess",I),{roles:h,query:function(e){return e.reservationUnitId?g.query(e).$promise:p.query(e).$promise},save:function(e,r){return e=i()({ruleId:r.id},e),(r.id?e.reservationUnitId?g.update(e,r).$promise:p.update(e,r).$promise:e.reservationUnitId?g.save(e,r).$promise:p.save(e,r).$promise).then((function(e){return r.id=e.id,h.forEach((function(n){e[n.id]&&e[n.id].intervals&&(r[n.id].intervals=e[n.id].intervals)})),r}))},delete:function(e){return p.delete(e).$promise}};function k(e){return(angular.isArray(e)?e:[e]).forEach((function(e){switch(e.uid){case"whoCanReserve":case"scale":case"buffer":case"fullTimeProduct":e.type="value";break;case"attachedUser":e.type="static";break;case"limitMin":case"limitMax":case"daysInAdvance":case"timeInAdvance":e.type="roles";break;case"nestedUnits":e.type="checklist";break;case"sun":e.name=o.DATETIME_FORMATS.SHORTDAY[0],e.type="weekday";break;case"mon":e.name=o.DATETIME_FORMATS.SHORTDAY[1],e.type="weekday";break;case"tue":e.name=o.DATETIME_FORMATS.SHORTDAY[2],e.type="weekday";break;case"wed":e.name=o.DATETIME_FORMATS.SHORTDAY[3],e.type="weekday";break;case"thu":e.name=o.DATETIME_FORMATS.SHORTDAY[4],e.type="weekday";break;case"fri":e.name=o.DATETIME_FORMATS.SHORTDAY[5],e.type="weekday";break;case"sat":e.name=o.DATETIME_FORMATS.SHORTDAY[6],e.type="weekday";break;default:e.type="date"}"weekday"!==e.type&&"date"!==e.type||h.forEach((function(r){e[r.id].intervals.forEach((function(e){e.from=n("toDate")(e.from),e.to=n("toDate")(e.to)}))})),"date"===e.type&&(e.date=n("toDate")(e.date)),"checklist"===e.type&&(e.value=e.value&&e.value.reduce((function(e,r){return e[r]=!0,e}),{}))})),e}function v(e){var r,t,i=e.type;(e=angular.copy(d.purify(e,["type"])),"weekday"!==i&&"date"!==i||h.forEach((function(r){e[r.id]=d.purify(e[r.id]),angular.forEach(e[r.id].intervals,(function(e){e.from=n("date")(e.from,"HH:mm"),e.to=n("date")(e.to,"HH:mm"),"00:00"===e.to&&(e.to="24:00")}))})),"date"===i&&(e.date=n("date")(e.date,"yyyy-MM-dd")),"checklist"===i)&&(e.value=e.value&&a()(r=u()(t=c()(e.value)).call(t,(function(r){return!!e.value[r]}))).call(r,(function(e){return+e})));return e}}])}}]);