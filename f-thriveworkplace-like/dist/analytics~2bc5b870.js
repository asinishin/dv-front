(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"/MEN":function(t,e,n){},"1LnZ":function(t,e,n){var r={"./dashboard/analytics-dashboard.controller.js":"Dc08","./dashboard/analytics-user.service.js":"RlMt","./widgets/analytics-widget.directive.js":"1e+P","./widgets/analytics-widgets-list.service.js":"Xh+F","./widgets/income/analytics-income-chart.service.js":"O7bB","./widgets/income/analytics-income.directive.js":"p5aI","./widgets/income/analytics-income.service.js":"2Bp7"};function a(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}a.keys=function(){return Object.keys(r)},a.resolve=o,t.exports=a,a.id="1LnZ"},"1e+P":function(t,e,n){"use strict";n.r(e);var r=n("WSeP"),a=n.n(r),o=n("nbuU"),i=n.n(o),l=(n("KOgG"),n("r970")),s=n.n(l),d=n("Xh+F");e.default=angular.module("deskworks.analyticsWidgetDirective",[d.default.name]).directive("analyticsWidget",(function(){return{template:s.a,restrict:"E",scope:!0,controller:"AnalyticsWidgetDirectiveCtrl as $w",bindToController:{widget:"<",centerId:"@"},link:function(t,e){e.addClass("analytics-widget")}}})).controller("AnalyticsWidgetDirectiveCtrl",["$scope","$element","$window","$compile","state","dwAlerts","helper","analyticsWidgetsList",function(t,e,n,r,o,l,s,d){var c=this;c.$onInit=function(){t.$watch("$w.widget.wide",(function(){e.toggleClass("analytics-widget-wide",!!c.widget.wide)}))},c.$onChanges=function(){if(c.widget){if(c.config=i()(d).call(d,(function(t){return t.uid===c.widget.uid})),!c.config)return void e.css("display","none");var n=angular.element(e[0].querySelector(".analytics-widget-body")),o=angular.element(c.config.template);o.attr("params","$w.widget"),o.attr("center-id",c.centerId),a()(angular).call(angular,n.children(),(function(t){return t.remove()})),n.append(o),r(o)(t.$new())}},c.onDragStart=function(t){var e=s.findParentElement(t.target,(function(t){return void 0!==t.attr("dnd-list")}));e.toggleClass("analytics-wide-placeholder",!!c.widget.wide),e.toggleClass("analytics-dragging",!0)},c.onDragEnd=function(t){s.findParentElement(t.target,(function(t){return void 0!==t.attr("dnd-list")})).toggleClass("analytics-dragging",!1)}}])},"2Bp7":function(t,e,n){"use strict";n.r(e);var r=n("WSeP"),a=n.n(r),o=n("nbuU"),i=n.n(o),l=n("Xp5u");e.default=angular.module("deskworks.AnalyticsIncome",["ngResource","datesDeserializer","deskworks.config",l.a.name]).factory("AnalyticsIncome",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,e,n,r,o,l,s){var d=r(["periods.from","periods.to"]),c=t(o.getApiAbsUrl("/analytics/income"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,d]}});return{get:function(t){return c.get({centerId:t.centerId||null,byPeriod:t.byPeriod||"month",from:e("date")(t.from,"yyyy-MM-dd")||null,to:e("date")(t.to,"yyyy-MM-dd")||null}).$promise.then((function(e){return function(t){var e,n=t.data,r=t.params.byPeriod,o=void 0===r?"month":r,l=i()(s).call(s,(function(t){return t.id===o}));return a()(e=n.periods).call(e,(function(t){t.title=l.format(t.from,t.to)})),n}({data:e,params:t})}))}}}])},"2R0e":function(t,e){t.exports='<label class=ff-row style=min-width:130px> <ff-label flex=none><span translate=CHARTS.BY_PERIOD></span></ff-label> <ff-select ff-model=$ctrl.period ff-options="opt.id as opt.name for opt in $ctrl.optsPeriod"></ff-select> </label> '},C5yw:function(t,e,n){var r={"./dashboard/analytics-dashboard.tpl.html":"aOtR","./widgets/analytics-widget-base.tpl.html":"RnuU","./widgets/analytics-widget.tpl.html":"r970"};function a(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}a.keys=function(){return Object.keys(r)},a.resolve=o,t.exports=a,a.id="C5yw"},CLLE:function(t,e,n){"use strict";var r=n("Tfwl"),a=n.n(r),o=n("XAgg"),i=n.n(o),l=n("yKah"),s=n.n(l),d=n("WSeP"),c=n.n(d),f=n("lvz6"),u=n.n(f),g=n("hsT8"),p=n.n(g),m=n("Ekwr"),h=n.n(m),y=n("03wM"),v=n.n(y),b=n("ipr/"),w=n.n(b),C=n("yCd9"),$=n.n(C),A=n("fzuT"),T=n.n(A),k=(n("S2gh"),n("bG+q"),n("pl6f")),I=n("aGVL"),P=n("bU+R"),R=n.n(P);function x(t,e){var n=v()(t);if(h.a){var r=h()(t);e&&(r=p()(r).call(r,(function(e){return u()(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)c()(n=x(Object(r),!0)).call(n,(function(e){T()(t,e,r[e])}));else if(s.a)i()(t,s()(r));else{var o;c()(o=x(Object(r))).call(o,(function(e){a()(t,e,u()(r,e))}))}}return t}e.a=angular.module("chartDirective",["deskworks.helper",k.a.name,I.a.name]).directive("chart",["$window","systemColors",function(t,e){return t.Chart.defaults.global.legend.labels.boxWidth=12,t.Chart.defaults.global.tooltips.cornerRadius=3,t.Chart.defaults.global.tooltips.displayColors=!1,t.Chart.defaults.global.tooltips.backgroundColor="rgba(0,0,0,0.65)",t.Chart.defaults.global.elements.rectangle.borderWidth=1,t.Chart.defaults.global.elements.rectangle.backgroundColor=e.primary,t.Chart.defaults.global.elements.arc.borderWidth=1,t.Chart.plugins.unregister(R.a),{restrict:"E",scope:!0,controller:"ChartCtrl as $ctrl",bindToController:{type:"@chartType",labels:"<chartLabels",data:"<chartData",options:"<chartOptions",config:"<"},template:"<canvas></canvas>"}}]).controller("ChartCtrl",["$scope","$element","$window","chartColors",function(t,e,n,r){var a,o=this,i={maintainAspectRatio:!1},l={backgroundColor:r,hoverBorderWidth:2,hoverBorderColor:"#fff"};o.$onDestroy=function(){a&&a.destroy()},o.$onChanges=function(t){var r;if(o.config){var s;a&&a.destroy();var d=O({},o.config);return d.options=O(O({},d.options),i),d.data=O({},d.data),d.data.datasets=$()(s=d.data.datasets).call(s,(function(t){return O(O({},l),t)})),void(a=new n.Chart(e.children(),d))}if(o.options){var c={labels:o.labels,datasets:w()(r=o.data).call(r)};c.datasets[0]=angular.extend({},l,c.datasets[0]),!a||t.type&&t.type.currentValue!==t.type.previousValue?(a&&a.destroy(),a=new n.Chart(e.children(),{type:o.type,data:c,options:angular.extend({},i,o.options)})):(angular.extend(a.data,c),angular.extend(a.options,i,o.options),a.update())}}}])},DLeD:function(t,e,n){"use strict";n.r(e);n("Muwe"),n("y89P");var r=n("WSeP"),a=n.n(r),o=n("lRNC"),i=n.n(o),l=n("yCd9"),s=n.n(l),d=["$injector",function(t){var e,r,o=(e=n("1LnZ"),s()(r=i()(e).call(e)).call(r,e));t.loadNewModules(s()(o).call(o,(function(t){return t.default.name}))),t.invoke(["$templateCache",function(t){var e,r=n("C5yw");a()(e=i()(r).call(r)).call(e,(function(e){return t.put(e.replace(/^\.\//,""),r(e))}))}])}];e.default=d},Dc08:function(t,e,n){"use strict";n.r(e);n("va6R");var r=n("I5Zy"),a=n("jd5N"),o=n("1e+P"),i=n("Xh+F"),l=n("RlMt");e.default=angular.module("deskworks.AnalyticsDashboardCtrl",["deskworks.state","session",r.a.name,a.a.name,o.default.name,i.default.name,l.default.name]).controller("AnalyticsDashboardCtrl",["$scope","$translate","$timeout","dwAlerts","state","helper","dnd","keese","session","analyticsWidgetsList","AnalyticsUser",function(t,e,n,r,a,o,i,l,s,d,c){var f=this;a.setPageTitle(e.instant("ANALYTICS.PAGE_TITLE")),f.widgetsList=d,f.widgetToAdd=f.widgetsList[0],f.onInit=function(){f.loadDefaults()},f.getCenterId=function(){return f.settings.allCenters?null:a.getCurrentCenterId()},f.onDrop=function(t,e,n,r){i.move(t,e,n,r);return!0},f.addWidget=function(){var t=f.settings.widgets;t.push({uid:f.widgetToAdd.uid,order:l.generate(t.length&&t[t.length-1].order),wide:!1})},f.saveDefaults=function(){return c.save({userId:s.user.id},f.settings).catch((function(t){return r.error(t,"Failed to save dashboard settings.")})).then((function(){f.defaults=angular.copy(f.settings)}))},f.loadDefaults=function(){return c.get({userId:s.user.id}).catch((function(t){return r.error(t,"Failed to get dashboard settings.")})).then((function(t){f.settings=o.purify(t),n((function(){f.defaults=angular.copy(f.settings)}))}))},f.isPristine=function(){return angular.equals(f.settings,f.defaults)},f.onInit()}])},I5Zy:function(t,e,n){"use strict";var r=n("xeXu"),a=n.n(r),o=n("0zKI"),i=n.n(o),l=(n("RF9M"),n("/MEN"),n("jd5N"));e.a=angular.module("dnd",["dndLists",l.a.name]).factory("dnd",["keese",function(t){return{move:function(e,n,r,o){var l=e[n];r&&i()(r).call(r,o,0,l);e===r&&o<=n&&n++;if(i()(e).call(e,n,1),r){var s=a()(r).call(r,l);l.order=t.generate(r[s-1]&&r[s-1].order,r[s+1]&&r[s+1].order)}return l}}}])},KOgG:function(t,e,n){},O7bB:function(t,e,n){"use strict";n.r(e);var r=n("6RpP"),a=n.n(r),o=n("yCd9"),i=n.n(o),l=n("aGVL"),s=n("bU+R"),d=n.n(s);e.default=angular.module("deskworks.analyticsIncomeChart",[l.a.name,"deskworks.whitelabel"]).factory("analyticsIncomeChart",["$filter","$translate","chartColors","whitelabel",function(t,e,n,r){return function(o){var l=o.periods,s=o.totals,c=(o.params,i()(l).call(l,(function(t){return t.title}))),f=[{data:s,maxBarThickness:80,backgroundColor:r.getProperty("--brand-color")||n[0]}],u=e.instant("ANALYTICS.INCOME");return{type:"bar",plugins:[d.a],data:{labels:c,datasets:f},options:{plugins:{datalabels:{display:"auto",color:"#fff",backgroundColor:"#000",padding:1,borderRadius:3,formatter:function(e,n){return t("ncurrency")(e,void 0,0)}}},tooltips:{callbacks:{label:function(e){var n;return a()(n="".concat(u,": ")).call(n,t("ncurrency")(s[e.index]))}}},layout:{padding:{top:15}},legend:{display:!1},scales:{yAxes:[{ticks:{min:0,callback:function(e){return t("ncurrency")(e,void 0,0)}}}]}}}}}])},RlMt:function(t,e,n){"use strict";n.r(e),e.default=angular.module("deskworks.AnalyticsUser",["ngResource","datesDeserializer","deskworks.config"]).factory("AnalyticsUser",["$resource","$timeout","datesDeserializer","deskworksConfig",function(t,e,n,r){var a=r.getApiAbsUrl("/analytics/users/:userId"),o=n(["widgets.from","widgets.to"]),i=t(a,{userId:"@userId"},{get:{method:"GET",transformResponse:[angular.fromJson,o]},update:{method:"PUT"}});return{get:function(t){return i.get(t).$promise},save:function(t,e){return i.update(t,e).$promise}}}])},RnuU:function(t,e){t.exports='<div> <ng-form name=$ctrl.widgetToolbarForm class=ff-grid> <chart-by-period flex=none period=$ctrl.params.byPeriod></chart-by-period> <ff-static flex=auto></ff-static> <chart-period flex="0 1 auto" period=$ctrl.params.period from=$ctrl.params.from to=$ctrl.params.to></chart-period> </ng-form> <chart config=$ctrl.chart ff-dim=$ctrl.spin></chart> </div> '},"Xh+F":function(t,e,n){"use strict";n.r(e);var r=n("p5aI");e.default=angular.module("deskworks.analyticsWidgetsList",[r.default.name]).factory("analyticsWidgetsList",(function(){return[{uid:"income",_name:"ANALYTICS.WIDGET.INCOME",template:"<analytics-income></analytics-income>"}]}))},Xp5u:function(t,e,n){"use strict";var r=n("WSeP"),a=n.n(r);e.a=angular.module("deskworks.optsChartByPeriod",[]).factory("optsChartByPeriod",["$rootScope","$translate","$filter",function(t,e,n){var r=n("date"),o=[{id:"week",_name:"CHARTS.BY_PERIOD.WEEK",format:function(t,e){return r(t,"MMM d")+" - "+r(e,"MMM d")}},{id:"month",_name:"CHARTS.BY_PERIOD.MONTH",format:function(t,e){return r(t,"MMM")}},{id:"quarter",_name:"CHARTS.BY_PERIOD.QUARTER",format:function(t,e){return r(t,"MMM")+" - "+r(e,"MMM")}},{id:"year",_name:"CHARTS.BY_PERIOD.YEAR",format:function(t,e){return r(t,"yyyy")}}];function i(){a()(o).call(o,(function(t){t.name=e.instant(t._name)}))}return i(),t.$on("$setTranslationsSuccess",i),o}])},aGVL:function(t,e,n){"use strict";e.a=angular.module("chartColors",[]).factory("chartColors",(function(){return["#317da3","#e6194b","#3cb44b","#ffe119","#f58231","#911eb4","#aa6e28","#008080","#808080","#800000","#3244a1","#e64c19","#3db372","#d1ff1a","#f5c131","#b31e81","#a89728","#005580","#806659","#804000"]}))},aOtR:function(t,e){t.exports='<div class=analytics-dashboard> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class="ff-spin ff-spin-placeholder" ng-if=!$ctrl.settings></div> <div class=gutter-v ng-if=$ctrl.settings> <ff-panel ng-if="state.getUserCenters().length > 1"> <div> <label class=i-block> <ff-checkbox ff-model=$ctrl.settings.allCenters><span translate=ANALYTICS.ALL_CENTERS></span></ff-checkbox> </label> <ff-hint><span translate=ANALYTICS.ALL_CENTERS.HINT></span></ff-hint> </div> </ff-panel> <div> <div class="ff-grid gutter-h gutter-v" dnd-list dnd-drop="callback({ targetList: $ctrl.settings.widgets, targetIndex: index })"> <analytics-widget ng-repeat="widget in $ctrl.settings.widgets" widget=widget center-id=$ctrl.getCenterId() dnd-draggable=null dnd-nodrag dnd-dragstart=$w.onDragStart(event) dnd-dragend=$w.onDragEnd(event) dnd-callback="$ctrl.onDrop($ctrl.settings.widgets, $index, targetList, targetIndex)"></analytics-widget> <div class=dndPlaceholder>Drop here.</div> <div class=analytics-dashboard-trash title="{{\'ANALYTICS.BTN_TRASH\' | translate}}" dnd-list=[] dnd-drop="callback({ targetList: null, targetIndex: index })"><i class="fa fa-trash"></i></div> </div> </div> <div> <div class="ff-grid gutter-h-half gutter-v-half"> <ng-form class=ff-row flex="0 1 300px"> <label class=ff-row> <ff-label flex=none>Add widget:</ff-label> <ff-select ff-model=$ctrl.widgetToAdd ff-options="widget._name | translate for widget in $ctrl.widgetsList"></ff-select> </label> <ff-btn-group flex=none class=buttons-row> <ff-btn sense=add size=xs type=submit ff-click=$ctrl.addWidget() title="{{ \'GLOBAL.BTN_NEW\' | translate }}"></ff-btn> </ff-btn-group> </ng-form> <ff-btn-group flex=none> <ff-btn sense=makeFavorite ff-click=$ctrl.saveDefaults() ff-disabled=$ctrl.isPristine()> <span translate=ANALYTICS.BTN_SAVE_DEFAULTS></span> </ff-btn> </ff-btn-group> </div> </div> </div> </div> '},"bG+q":function(t,e,n){},ggrz:function(t,e){t.exports="<label class=ff-row style=min-width:190px> <ff-label flex=none><span translate=CHARTS.PERIOD></span></ff-label> <ff-select ff-model=$ctrl.period ff-options=\"opt.id as opt.name for opt in $ctrl.optsPeriod\"></ff-select> </label> <ff-row style=z-index:1;margin-left:-108px ng-style=\"{ 'min-width': $ctrl.period === 'custom' ? '300px' : 'none' }\"> <label class=ff-row flex=\"0 1 158px\" ng-if=\"$ctrl.period === 'custom'\"> <ff-label flex=none><span translate=CHARTS.FROM></span></ff-label> <ff-date name=from ff-model=$ctrl.from monthly=true ff-required=true ff-validate-alert=\"{{'CHARTS.FROM' | translate}}\"></ff-date> </label> <label class=ff-row flex=\"0 1 140px\" ng-if=\"$ctrl.period === 'custom'\"> <ff-label flex=none><span translate=CHARTS.TO></span></ff-label> <ff-date name=to ff-model=$ctrl.to monthly=true ff-required=true ff-validate-alert=\"{{'CHARTS.TO' | translate}}\"></ff-date> </label> </ff-row> "},gq4Z:function(t,e,n){},jd5N:function(t,e,n){"use strict";var r=n("JRMi"),a=n.n(r),o=n("gQJ2"),i=n.n(o);e.a=angular.module("keese",[]).factory("keese",(function(){var t="0123456789?@ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",e=t.length,n=function(){for(var e={},n=0;n<t.length;n++)e[t[n]]=n;return e}();return{generate:function(t,e,n){return n?o(t,e,n):r(t,e)}};function r(t,e){return t?e?l(t,e):((n=d(t)).digits=n.digits.substr(0,n.order_length+1),s(n,d("1"))):e?l("0",e):"1";var n}function o(t,e,n){var a=new Array(n);if(n>0)if(e)!function t(e,n,o,i){var l=Math.floor((o+i)/2),s=r(e,n);a[l]=s,o<l&&t(e,s,o,l);l+1<i&&t(s,n,l+1,i)}(t,e,0,n);else for(var o=0;o<n;o++){var i=keese(t,null);a[o]=i,t=i}return a}function l(r,a){if(r>a)throw new Error("assertion failed: "+i()(r)+" < "+i()(a));var o=d(r),l=d(a);f(o,l);for(var u=0,g=Math.max(o.digits.length,l.digits.length),p=0;p<g||u>0;p++){var m=n[o.digits[p]]||0,h=u+(n[l.digits[p]]||0);if(m!==h){if(m!==h-1){for(var y=Math.floor((h-m)/2),v="",b=0;b<p;b++)v+="0";v+=t[y];var w=d(c(o.order_length,v));return o.digits=o.digits.substr(0,p+1),s(o,w)}u=e}}throw new Error}function s(r,a){f(r,a);for(var o="",i=r.order_length,l=0,s=Math.max(r.digits.length,a.digits.length)-1;s>=0;s--)l+=n[r.digits[s]]||0,l+=n[a.digits[s]]||0,o=t[l%e]+o,l=Math.floor(l/e);for(;l>0;)o=t[l%e]+o,l=Math.floor(l/e),i++;return c(i,o)}function d(t){var e=a()(t).call(t,"~")+1;return{order_length:e,digits:t.substr(e)}}function c(t,e){for(;t>0&&"0"==e.charAt(0);)e=e.substr(1),t--;for(var n="",r=0;r<t;r++)n+="~";return n+e}function f(t,e){u(t,e.order_length),u(e,t.order_length)}function u(t,e){for(;t.order_length<e;)t.digits="0"+t.digits,t.order_length++}}))},p5aI:function(t,e,n){"use strict";n.r(e);n("JBxO"),n("FdtR");var r=n("Tfwl"),a=n.n(r),o=n("XAgg"),i=n.n(o),l=n("yKah"),s=n.n(l),d=n("WSeP"),c=n.n(d),f=n("lvz6"),u=n.n(f),g=n("hsT8"),p=n.n(g),m=n("Ekwr"),h=n.n(m),y=n("03wM"),v=n.n(y),b=n("fzuT"),w=n.n(b),C=n("RnuU"),$=n.n(C),A=n("CLLE"),T=n("G6E5"),k=n("2Bp7"),I=n("Xp5u"),P=angular.module("deskworks.optsChartPeriod",[]).factory("optsChartPeriod",["$rootScope","$translate",function(t,e){var n=[{id:"lastMonth",_name:"CHARTS.PERIOD.LAST_MONTH",from:function(){return moment().subtract(1,"month").startOf("month")},to:function(){return moment().subtract(1,"month").endOf("month")}},{id:"thisMonth",_name:"CHARTS.PERIOD.THIS_MONTH",from:function(){return moment().startOf("month")},to:function(){return moment().endOf("month")}},{id:"12months",_name:"CHARTS.PERIOD.12_MONTHS",from:function(){return moment().subtract(12,"month")},to:function(){return moment()}},{id:"lastYear",_name:"CHARTS.PERIOD.LAST_YEAR",from:function(){return moment().subtract(1,"year").startOf("year")},to:function(){return moment().subtract(1,"year").endOf("year")}},{id:"thisYear",_name:"CHARTS.PERIOD.THIS_YEAR",from:function(){return moment().startOf("year")},to:function(){return moment().endOf("year")}},{id:"allTime",_name:"CHARTS.PERIOD.ALL_TIME",from:function(){return null},to:function(){return null}},{id:"custom",_name:"CHARTS.PERIOD.CUSTOM",from:function(){return moment().subtract(1,"month").startOf("month")},to:function(){return moment().subtract(1,"month").endOf("month")}}];function r(){c()(n).call(n,(function(t){t.name=e.instant(t._name)}))}return r(),t.$on("$setTranslationsSuccess",r),n}]),R=n("O7bB"),x=n("nbuU"),O=n.n(x),E=n("ggrz"),S=n.n(E),D=(n("gq4Z"),angular.module("deskworks.chartPeriodDirective",[P.name]).directive("chartPeriod",(function(){return{template:S.a,restrict:"E",scope:!0,controller:"ChartPeriodCtrl as $ctrl",bindToController:{period:"=",from:"=",to:"="}}})).controller("ChartPeriodCtrl",["$scope","optsChartPeriod",function(t,e){var n=this;n.optsPeriod=e,t.$watchGroup(["$ctrl.period","$ctrl.from","$ctrl.to"],(function(t,r){if("custom"===n.period&&n.to&&n.to.endOf("month"),t[0]!==r[0]||n.period&&!n.from&&!n.to){var a=O()(e).call(e,(function(t){return t.id===n.period}));n.from=a.from(),n.to=a.to()}}))}])),M=n("2R0e"),_=n.n(M),L=angular.module("deskworks.chartByPeriodDirective",[I.a.name]).directive("chartByPeriod",(function(){return{template:_.a,restrict:"E",scope:!0,controller:"ChartByPeriodCtrl as $ctrl",bindToController:{period:"="}}})).controller("ChartByPeriodCtrl",["$scope","optsChartByPeriod",function(t,e){this.optsPeriod=e}]);function N(t,e){var n=v()(t);if(h.a){var r=h()(t);e&&(r=p()(r).call(r,(function(e){return u()(t,e).enumerable}))),n.push.apply(n,r)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)c()(n=N(Object(r),!0)).call(n,(function(e){w()(t,e,r[e])}));else if(s.a)i()(t,s()(r));else{var o;c()(o=N(Object(r))).call(o,(function(e){a()(t,e,u()(r,e))}))}}return t}e.default=angular.module("deskworks.analyticsIncomeDirective",["debounce",A.a.name,T.a.name,I.a.name,P.name,k.default.name,R.default.name,D.name,L.name]).directive("analyticsIncome",(function(){return{template:$.a,restrict:"E",scope:!0,controller:"AnalyticsIncomeDirectiveCtrl as $ctrl",bindToController:{params:"<",centerId:"<"}}})).controller("AnalyticsIncomeDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","AnalyticsIncome","analyticsIncomeChart","optsChartByPeriod","optsChartPeriod",function(t,e,n,r,a,o,i,l,s,d,c){var f=this,u=i.paramsChanged;f.optsByPeriod=d,f.optsPeriod=c,f.data=null,f.$onInit=function(){t.$watch((function(){return B(B({},f.params),{},{centerId:f.centerId})}),o((function(t,n){f.params.period=f.params.period||"12months",f.params.byPeriod=f.params.byPeriod||"month",f.widgetToolbarForm.$invalid||(u(t,n,["byPeriod","from","to","centerId"])&&(f.data=null),f.data=f.data||(f.spin=!0,l.get(t).catch((function(t){return r.error(t,"Failed to query Income widget data.")})).finally((function(){f.spin=!1}))),e.all({data:f.data}).then((function(t){f.data=t.data})).then((function(){f.chart=s(B(B({},f.data),{},{params:f.params}))})))}),100),!0)}}])},pl6f:function(t,e,n){"use strict";e.a=angular.module("systemColors",["deskworks.helper"]).factory("systemColors",["$window","helper",function(t,e){var n={},r=angular.element('<div style="display: none"></div>');return r.append('<div class="text-text"></div>'),r.append('<div class="text-brand"></div>'),r.append('<div class="text-brand"></div>'),r.append('<div class="text-danger"></div>'),r.append("<div></div>"),r.append('<div class="sidebar-group-header"></div>'),document.body.appendChild(r[0]),n.text=e.rgb2hex(t.getComputedStyle(r.children()[0]).getPropertyValue("color"))||"#444",n.info=e.rgb2hex(t.getComputedStyle(r.children()[4]).getPropertyValue("color"))||"#4d4e4c",n.primary=e.rgb2hex(t.getComputedStyle(r.children()[5]).getPropertyValue("background-color"))||"#949594",n.warning=e.rgb2hex(t.getComputedStyle(r.children()[3]).getPropertyValue("color"))||"#ff9b00",r.remove(),n}])},r970:function(t,e){t.exports='<ff-panel> <ff-panel-header class=ff-row> <span translate={{$w.config._name}}></span> <div class=analytics-widget-toolbar> <ff-btn sense=widen size=xs class=ff-btn-icon ff-click="$w.widget.wide = !$w.widget.wide" title="{{\'ANALYTICS.WIDE\' | translate}}"></ff-btn> <ff-btn sense=drag size=xs class=ff-btn-icon dnd-handle title="{{\'ANALYTICS.DRAG_N_DROP\' | translate}}"></ff-btn> </div> </ff-panel-header> <div class=analytics-widget-body></div> </ff-panel> '},va6R:function(t,e,n){}}]);