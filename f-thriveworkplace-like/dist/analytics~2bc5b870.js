(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"/MEN":function(t,e,n){},"1LnZ":function(t,e,n){var a={"./dashboard/analytics-dashboard.controller.js":"Dc08","./dashboard/analytics-user.service.js":"RlMt","./widgets/analytics-widget.directive.js":"1e+P","./widgets/analytics-widgets-list.service.js":"Xh+F","./widgets/income/analytics-income-chart.service.js":"O7bB","./widgets/income/analytics-income.directive.js":"p5aI","./widgets/income/analytics-income.service.js":"2Bp7","./widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart-units.service.js":"9pnN","./widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart.service.js":"oCA5","./widgets/occupancy-vacancy/analytics-occupancy-vacancy.directive.js":"qLGz","./widgets/occupancy-vacancy/analytics-occupancy-vacancy.service.js":"G6gN"};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=o,t.exports=r,r.id="1LnZ"},"1e+P":function(t,e,n){"use strict";n.r(e);var a=n("WSeP"),r=n.n(a),o=n("nbuU"),i=n.n(o),l=(n("KOgG"),n("r970")),c=n.n(l),s=n("Xh+F");e.default=angular.module("deskworks.analyticsWidgetDirective",[s.default.name]).directive("analyticsWidget",(function(){return{template:c.a,restrict:"E",scope:!0,controller:"AnalyticsWidgetDirectiveCtrl as $w",bindToController:{widget:"<",centerId:"@"},link:function(t,e){e.addClass("analytics-widget")}}})).controller("AnalyticsWidgetDirectiveCtrl",["$scope","$element","$window","$compile","state","dwAlerts","helper","analyticsWidgetsList",function(t,e,n,a,o,l,c,s){var d=this;d.$onInit=function(){t.$watch("$w.widget.wide",(function(){e.toggleClass("analytics-widget-wide",!!d.widget.wide)}))},d.$onChanges=function(){if(d.widget){if(d.config=i()(s).call(s,(function(t){return t.uid===d.widget.uid})),!d.config)return void e.css("display","none");var n=angular.element(e[0].querySelector(".analytics-widget-body")),o=angular.element(d.config.template);o.attr("params","$w.widget"),o.attr("center-id",d.centerId),r()(angular).call(angular,n.children(),(function(t){return t.remove()})),n.append(o),a(o)(t.$new())}},d.onDragStart=function(t){var e=c.findParentElement(t.target,(function(t){return void 0!==t.attr("dnd-list")}));e.toggleClass("analytics-wide-placeholder",!!d.widget.wide),e.toggleClass("analytics-dragging",!0)},d.onDragEnd=function(t){c.findParentElement(t.target,(function(t){return void 0!==t.attr("dnd-list")})).toggleClass("analytics-dragging",!1)}}])},"2Bp7":function(t,e,n){"use strict";n.r(e);var a=n("WSeP"),r=n.n(a),o=n("nbuU"),i=n.n(o),l=n("Xp5u");e.default=angular.module("deskworks.AnalyticsIncome",["ngResource","datesDeserializer","deskworks.config",l.a.name]).factory("AnalyticsIncome",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,e,n,a,o,l,c){var s=a(["periods.from","periods.to"]),d=t(o.getApiAbsUrl("/analytics/income"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,s]}});return{get:function(t){return d.get({centerId:t.centerId||null,byPeriod:t.byPeriod||"month",from:e("date")(t.from,"yyyy-MM-dd")||null,to:e("date")(t.to,"yyyy-MM-dd")||null}).$promise.then((function(e){return function(t){var e,n=t.data,a=t.params.byPeriod,o=void 0===a?"month":a,l=i()(c).call(c,(function(t){return t.id===o}));return r()(e=n.periods).call(e,(function(t){t.title=l.format(t.from,t.to)})),n}({data:e,params:t})}))}}}])},"2R0e":function(t,e){t.exports='<label class=ff-row style=min-width:130px> <ff-label flex=none><span translate=CHARTS.BY_PERIOD></span></ff-label> <ff-select ff-model=$ctrl.period ff-options="opt.id as opt.name for opt in $ctrl.optsPeriod"></ff-select> </label> '},"9pnN":function(t,e,n){"use strict";n.r(e);var a=n("6RpP"),r=n.n(a),o=n("yCd9"),i=n.n(o),l=n("G6E5"),c=n("aGVL"),s=n("bU+R"),d=n.n(s);e.default=angular.module("deskworks.analyticsOccupancyVacancyChartUnits",[l.a.name,c.a.name]).factory("analyticsOccupancyVacancyChartUnits",["$filter","$translate","chartColors","reportHelper",function(t,e,n,a){return function(t){var e,a=t.periods,o=t.data,l=t.params,c=i()(a).call(a,(function(t){return t.title})),s=i()(e=o[l.selected].units).call(e,(function(t,e){return{label:t.name,data:t.totals,maxBarThickness:80,backgroundColor:n[e]}}));return{type:"bar",plugins:[d.a],data:{labels:c,datasets:s},options:{plugins:{datalabels:{display:"auto",color:"#fff",backgroundColor:"#000",padding:1,borderRadius:3,formatter:function(t,e){return"".concat(Math.round(t),"%")}}},tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(t){var e,n=o[l.selected].units[t.datasetIndex],a=n.name,i=n.totals;return r()(e="".concat(a,": ")).call(e,i[t.index],"%")}}},layout:{padding:{top:15}},legend:{display:!0,position:l.wide?"right":"bottom"},scales:{yAxes:[{ticks:{min:0,max:100,callback:function(t){return"".concat(t,"%")}}}]}}}}}])},C5yw:function(t,e,n){var a={"./dashboard/analytics-dashboard.tpl.html":"aOtR","./widgets/analytics-widget-base.tpl.html":"RnuU","./widgets/analytics-widget.tpl.html":"r970","./widgets/occupancy-vacancy/analytics-occupancy-vacancy.tpl.html":"jwnm"};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=o,t.exports=r,r.id="C5yw"},CLLE:function(t,e,n){"use strict";var a=n("Tfwl"),r=n.n(a),o=n("XAgg"),i=n.n(o),l=n("yKah"),c=n.n(l),s=n("WSeP"),d=n.n(s),u=n("lvz6"),f=n.n(u),p=n("hsT8"),m=n.n(p),g=n("Ekwr"),y=n.n(g),h=n("03wM"),v=n.n(h),b=n("ipr/"),C=n.n(b),w=n("yCd9"),$=n.n(w),A=n("fzuT"),k=n.n(A),T=(n("S2gh"),n("bG+q"),n("pl6f")),P=n("aGVL"),O=n("bU+R"),I=n.n(O);function x(t,e){var n=v()(t);if(y.a){var a=y()(t);e&&(a=m()(a).call(a,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,a)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n,a=null!=arguments[e]?arguments[e]:{};if(e%2)d()(n=x(Object(a),!0)).call(n,(function(e){k()(t,e,a[e])}));else if(c.a)i()(t,c()(a));else{var o;d()(o=x(Object(a))).call(o,(function(e){r()(t,e,f()(a,e))}))}}return t}e.a=angular.module("chartDirective",["deskworks.helper",T.a.name,P.a.name]).directive("chart",["$window","systemColors",function(t,e){return t.Chart.defaults.global.legend.labels.boxWidth=12,t.Chart.defaults.global.tooltips.cornerRadius=3,t.Chart.defaults.global.tooltips.displayColors=!1,t.Chart.defaults.global.tooltips.backgroundColor="rgba(0,0,0,0.65)",t.Chart.defaults.global.elements.rectangle.borderWidth=1,t.Chart.defaults.global.elements.rectangle.backgroundColor=e.primary,t.Chart.defaults.global.elements.arc.borderWidth=1,t.Chart.plugins.unregister(I.a),{restrict:"E",scope:!0,controller:"ChartCtrl as $ctrl",bindToController:{type:"@chartType",labels:"<chartLabels",data:"<chartData",options:"<chartOptions",config:"<"},template:"<canvas></canvas>"}}]).controller("ChartCtrl",["$scope","$element","$window","chartColors",function(t,e,n,a){var r,o=this,i={maintainAspectRatio:!1},l={backgroundColor:a,hoverBorderWidth:2,hoverBorderColor:"#fff"};o.$onDestroy=function(){r&&r.destroy()},o.$onChanges=function(t){var a;if(o.config){var c;r&&r.destroy();var s=R({},o.config);return s.options=R(R({},s.options),i),s.data=R({},s.data),s.data.datasets=$()(c=s.data.datasets).call(c,(function(t){return R(R({},l),t)})),void(r=new n.Chart(e.children(),s))}if(o.options){var d={labels:o.labels,datasets:C()(a=o.data).call(a)};d.datasets[0]=angular.extend({},l,d.datasets[0]),!r||t.type&&t.type.currentValue!==t.type.previousValue?(r&&r.destroy(),r=new n.Chart(e.children(),{type:o.type,data:d,options:angular.extend({},i,o.options)})):(angular.extend(r.data,d),angular.extend(r.options,i,o.options),r.update())}}}])},CgoQ:function(t,e,n){"use strict";var a=n("WSeP"),r=n.n(a);e.a=angular.module("deskworks.optsChartPeriod",[]).factory("optsChartPeriod",["$rootScope","$translate",function(t,e){var n=[{id:"lastMonth",_name:"CHARTS.PERIOD.LAST_MONTH",from:function(){return moment().subtract(1,"month").startOf("month")},to:function(){return moment().subtract(1,"month").endOf("month")}},{id:"thisMonth",_name:"CHARTS.PERIOD.THIS_MONTH",from:function(){return moment().startOf("month")},to:function(){return moment().endOf("month")}},{id:"12months",_name:"CHARTS.PERIOD.12_MONTHS",from:function(){return moment().subtract(12,"month")},to:function(){return moment()}},{id:"lastYear",_name:"CHARTS.PERIOD.LAST_YEAR",from:function(){return moment().subtract(1,"year").startOf("year")},to:function(){return moment().subtract(1,"year").endOf("year")}},{id:"thisYear",_name:"CHARTS.PERIOD.THIS_YEAR",from:function(){return moment().startOf("year")},to:function(){return moment().endOf("year")}},{id:"allTime",_name:"CHARTS.PERIOD.ALL_TIME",from:function(){return null},to:function(){return null}},{id:"custom",_name:"CHARTS.PERIOD.CUSTOM",from:function(){return moment().subtract(1,"month").startOf("month")},to:function(){return moment().subtract(1,"month").endOf("month")}}];function a(){r()(n).call(n,(function(t){t.name=e.instant(t._name)}))}return a(),t.$on("$setTranslationsSuccess",a),n}])},DLeD:function(t,e,n){"use strict";n.r(e);n("Muwe"),n("y89P");var a=n("WSeP"),r=n.n(a),o=n("lRNC"),i=n.n(o),l=n("yCd9"),c=n.n(l),s=["$injector",function(t){var e,a,o=(e=n("1LnZ"),c()(a=i()(e).call(e)).call(a,e));t.loadNewModules(c()(o).call(o,(function(t){return t.default.name}))),t.invoke(["$templateCache",function(t){var e,a=n("C5yw");r()(e=i()(a).call(a)).call(e,(function(e){return t.put(e.replace(/^\.\//,""),a(e))}))}])}];e.default=s},Dc08:function(t,e,n){"use strict";n.r(e);n("va6R");var a=n("I5Zy"),r=n("jd5N"),o=n("1e+P"),i=n("Xh+F"),l=n("RlMt");e.default=angular.module("deskworks.AnalyticsDashboardCtrl",["deskworks.state","session",a.a.name,r.a.name,o.default.name,i.default.name,l.default.name]).controller("AnalyticsDashboardCtrl",["$scope","$translate","$timeout","dwAlerts","state","helper","dnd","keese","session","analyticsWidgetsList","AnalyticsUser",function(t,e,n,a,r,o,i,l,c,s,d){var u=this;r.setPageTitle(e.instant("ANALYTICS.PAGE_TITLE")),u.widgetsList=s,u.widgetToAdd=u.widgetsList[0],u.onInit=function(){u.loadDefaults()},u.getCenterId=function(){return u.settings.allCenters?null:r.getCurrentCenterId()},u.onDrop=function(t,e,n,a){i.move(t,e,n,a);return!0},u.addWidget=function(){var t=u.settings.widgets;t.push({uid:u.widgetToAdd.uid,order:l.generate(t.length&&t[t.length-1].order),wide:!1})},u.saveDefaults=function(){return d.save({userId:c.user.id},u.settings).catch((function(t){return a.error(t,"Failed to save dashboard settings.")})).then((function(){u.defaults=angular.copy(u.settings)}))},u.loadDefaults=function(){return d.get({userId:c.user.id}).catch((function(t){return a.error(t,"Failed to get dashboard settings.")})).then((function(t){u.settings=o.purify(t),n((function(){u.defaults=angular.copy(u.settings)}))}))},u.isPristine=function(){return angular.equals(u.settings,u.defaults)},u.onInit()}])},DcLO:function(t,e,n){"use strict";var a=n("nbuU"),r=n.n(a),o=n("ggrz"),i=n.n(o),l=(n("gq4Z"),n("CgoQ"));e.a=angular.module("deskworks.chartPeriodDirective",[l.a.name]).directive("chartPeriod",(function(){return{template:i.a,restrict:"E",scope:!0,controller:"ChartPeriodCtrl as $ctrl",bindToController:{period:"=",from:"=",to:"="}}})).controller("ChartPeriodCtrl",["$scope","optsChartPeriod",function(t,e){var n=this;n.optsPeriod=e,t.$watchGroup(["$ctrl.period","$ctrl.from","$ctrl.to"],(function(t,a){if("custom"===n.period&&n.to&&n.to.endOf("month"),t[0]!==a[0]||n.period&&!n.from&&!n.to){var o=r()(e).call(e,(function(t){return t.id===n.period}));n.from=o.from(),n.to=o.to()}}))}])},G6gN:function(t,e,n){"use strict";n.r(e);var a=n("WSeP"),r=n.n(a),o=n("nbuU"),i=n.n(o),l=n("Xp5u");e.default=angular.module("deskworks.AnalyticsOccupancyVacancy",["ngResource","datesDeserializer","deskworks.config",l.a.name]).factory("AnalyticsOccupancyVacancy",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,e,n,a,o,l,c){var s=a(["periods.from","periods.to"]),d=t(o.getApiAbsUrl("/analytics/occupancy-vacancy"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,s]}});return{get:function(t){return d.get({centerId:t.centerId||null,byPeriod:t.byPeriod||"month",from:e("date")(t.from,"yyyy-MM-dd")||null,to:e("date")(t.to,"yyyy-MM-dd")||null}).$promise.then((function(e){return function(t){var e,n=t.data,a=t.params.byPeriod,o=void 0===a?"month":a,l=i()(c).call(c,(function(t){return t.id===o}));return r()(e=n.periods).call(e,(function(t){t.title=l.format(t.from,t.to)})),n}({data:e,params:t})}))}}}])},I5Zy:function(t,e,n){"use strict";var a=n("xeXu"),r=n.n(a),o=n("0zKI"),i=n.n(o),l=(n("RF9M"),n("/MEN"),n("jd5N"));e.a=angular.module("dnd",["dndLists",l.a.name]).factory("dnd",["keese",function(t){return{move:function(e,n,a,o){var l=e[n];a&&i()(a).call(a,o,0,l);e===a&&o<=n&&n++;if(i()(e).call(e,n,1),a){var c=r()(a).call(a,l);l.order=t.generate(a[c-1]&&a[c-1].order,a[c+1]&&a[c+1].order)}return l}}}])},KOgG:function(t,e,n){},O7bB:function(t,e,n){"use strict";n.r(e);var a=n("6RpP"),r=n.n(a),o=n("yCd9"),i=n.n(o),l=n("aGVL"),c=n("bU+R"),s=n.n(c);e.default=angular.module("deskworks.analyticsIncomeChart",[l.a.name,"deskworks.whitelabel"]).factory("analyticsIncomeChart",["$filter","$translate","chartColors","whitelabel",function(t,e,n,a){return function(o){var l=o.periods,c=o.totals,d=(o.params,i()(l).call(l,(function(t){return t.title}))),u=[{data:c,maxBarThickness:80,backgroundColor:a.getProperty("--brand-color")||n[0]}],f=e.instant("ANALYTICS.INCOME");return{type:"bar",plugins:[s.a],data:{labels:d,datasets:u},options:{plugins:{datalabels:{display:"auto",color:"#fff",backgroundColor:"#000",padding:1,borderRadius:3,formatter:function(e,n){return t("ncurrency")(e,void 0,0)}}},tooltips:{callbacks:{label:function(e){var n;return r()(n="".concat(f,": ")).call(n,t("ncurrency")(c[e.index]))}}},layout:{padding:{top:15}},legend:{display:!1},scales:{yAxes:[{ticks:{min:0,callback:function(e){return t("ncurrency")(e,void 0,0)}}}]}}}}}])},OOrm:function(t,e,n){"use strict";var a=n("2R0e"),r=n.n(a),o=n("Xp5u");e.a=angular.module("deskworks.chartByPeriodDirective",[o.a.name]).directive("chartByPeriod",(function(){return{template:r.a,restrict:"E",scope:!0,controller:"ChartByPeriodCtrl as $ctrl",bindToController:{period:"="}}})).controller("ChartByPeriodCtrl",["$scope","optsChartByPeriod",function(t,e){this.optsPeriod=e}])},RlMt:function(t,e,n){"use strict";n.r(e),e.default=angular.module("deskworks.AnalyticsUser",["ngResource","datesDeserializer","deskworks.config"]).factory("AnalyticsUser",["$resource","$timeout","datesDeserializer","deskworksConfig",function(t,e,n,a){var r=a.getApiAbsUrl("/analytics/users/:userId"),o=n(["widgets.from","widgets.to"]),i=t(r,{userId:"@userId"},{get:{method:"GET",transformResponse:[angular.fromJson,o]},update:{method:"PUT"}});return{get:function(t){return i.get(t).$promise},save:function(t,e){return i.update(t,e).$promise}}}])},RnuU:function(t,e){t.exports='<div> <ng-form name=$ctrl.widgetToolbarForm class=ff-grid> <chart-by-period flex=none period=$ctrl.params.byPeriod></chart-by-period> <ff-static flex=auto></ff-static> <chart-period flex="0 1 auto" period=$ctrl.params.period from=$ctrl.params.from to=$ctrl.params.to></chart-period> </ng-form> <chart config=$ctrl.chart ff-dim=$ctrl.spin></chart> </div> '},"Xh+F":function(t,e,n){"use strict";n.r(e);var a=n("p5aI");e.default=angular.module("deskworks.analyticsWidgetsList",[a.default.name]).factory("analyticsWidgetsList",(function(){return[{uid:"income",_name:"ANALYTICS.WIDGET.INCOME",template:"<analytics-income></analytics-income>"},{uid:"occupancy-vacancy",_name:"ANALYTICS.WIDGET.OCCUPANCY_VACANCY",template:"<analytics-occupancy-vacancy></analytics-occupancy-vacancy>"}]}))},Xp5u:function(t,e,n){"use strict";var a=n("WSeP"),r=n.n(a);e.a=angular.module("deskworks.optsChartByPeriod",[]).factory("optsChartByPeriod",["$rootScope","$translate","$filter",function(t,e,n){var a=n("date"),o=[{id:"week",_name:"CHARTS.BY_PERIOD.WEEK",format:function(t,e){return a(t,"MMM d")+" - "+a(e,"MMM d")}},{id:"month",_name:"CHARTS.BY_PERIOD.MONTH",format:function(t,e){return a(t,"MMM")}},{id:"quarter",_name:"CHARTS.BY_PERIOD.QUARTER",format:function(t,e){return a(t,"MMM")+" - "+a(e,"MMM")}},{id:"year",_name:"CHARTS.BY_PERIOD.YEAR",format:function(t,e){return a(t,"yyyy")}}];function i(){r()(o).call(o,(function(t){t.name=e.instant(t._name)}))}return i(),t.$on("$setTranslationsSuccess",i),o}])},aGVL:function(t,e,n){"use strict";e.a=angular.module("chartColors",[]).factory("chartColors",(function(){return["#317da3","#e6194b","#3cb44b","#ffe119","#f58231","#911eb4","#aa6e28","#008080","#808080","#800000","#3244a1","#e64c19","#3db372","#d1ff1a","#f5c131","#b31e81","#a89728","#005580","#806659","#804000"]}))},aOtR:function(t,e){t.exports='<div class=analytics-dashboard> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class="ff-spin ff-spin-placeholder" ng-if=!$ctrl.settings></div> <div class=gutter-v ng-if=$ctrl.settings> <ff-panel ng-if="state.getUserCenters().length > 1"> <div> <label class=i-block> <ff-checkbox ff-model=$ctrl.settings.allCenters><span translate=ANALYTICS.ALL_CENTERS></span></ff-checkbox> </label> <ff-hint><span translate=ANALYTICS.ALL_CENTERS.HINT></span></ff-hint> </div> </ff-panel> <div> <div class="ff-grid gutter-h gutter-v" dnd-list dnd-drop="callback({ targetList: $ctrl.settings.widgets, targetIndex: index })"> <analytics-widget ng-repeat="widget in $ctrl.settings.widgets" widget=widget center-id=$ctrl.getCenterId() dnd-draggable=null dnd-nodrag dnd-dragstart=$w.onDragStart(event) dnd-dragend=$w.onDragEnd(event) dnd-callback="$ctrl.onDrop($ctrl.settings.widgets, $index, targetList, targetIndex)"></analytics-widget> <div class=dndPlaceholder>Drop here.</div> <div class=analytics-dashboard-trash title="{{\'ANALYTICS.BTN_TRASH\' | translate}}" dnd-list=[] dnd-drop="callback({ targetList: null, targetIndex: index })"><i class="fa fa-trash"></i></div> </div> </div> <div> <div class="ff-grid gutter-h-half gutter-v-half"> <ng-form class=ff-row flex="0 1 300px"> <label class=ff-row> <ff-label flex=none>Add widget:</ff-label> <ff-select ff-model=$ctrl.widgetToAdd ff-options="widget._name | translate for widget in $ctrl.widgetsList"></ff-select> </label> <ff-btn-group flex=none class=buttons-row> <ff-btn sense=add size=xs type=submit ff-click=$ctrl.addWidget() title="{{ \'GLOBAL.BTN_NEW\' | translate }}"></ff-btn> </ff-btn-group> </ng-form> <ff-btn-group flex=none> <ff-btn sense=makeFavorite ff-click=$ctrl.saveDefaults() ff-disabled=$ctrl.isPristine()> <span translate=ANALYTICS.BTN_SAVE_DEFAULTS></span> </ff-btn> </ff-btn-group> </div> </div> </div> </div> '},"bG+q":function(t,e,n){},ggrz:function(t,e){t.exports="<label class=ff-row style=min-width:190px> <ff-label flex=none><span translate=CHARTS.PERIOD></span></ff-label> <ff-select ff-model=$ctrl.period ff-options=\"opt.id as opt.name for opt in $ctrl.optsPeriod\"></ff-select> </label> <ff-row style=z-index:1;margin-left:-108px ng-style=\"{ 'min-width': $ctrl.period === 'custom' ? '300px' : 'none' }\"> <label class=ff-row flex=\"0 1 158px\" ng-if=\"$ctrl.period === 'custom'\"> <ff-label flex=none><span translate=CHARTS.FROM></span></ff-label> <ff-date name=from ff-model=$ctrl.from monthly=true ff-required=true ff-validate-alert=\"{{'CHARTS.FROM' | translate}}\"></ff-date> </label> <label class=ff-row flex=\"0 1 140px\" ng-if=\"$ctrl.period === 'custom'\"> <ff-label flex=none><span translate=CHARTS.TO></span></ff-label> <ff-date name=to ff-model=$ctrl.to monthly=true ff-required=true ff-validate-alert=\"{{'CHARTS.TO' | translate}}\"></ff-date> </label> </ff-row> "},gq4Z:function(t,e,n){},jd5N:function(t,e,n){"use strict";var a=n("JRMi"),r=n.n(a),o=n("gQJ2"),i=n.n(o);e.a=angular.module("keese",[]).factory("keese",(function(){var t="0123456789?@ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",e=t.length,n=function(){for(var e={},n=0;n<t.length;n++)e[t[n]]=n;return e}();return{generate:function(t,e,n){return n?o(t,e,n):a(t,e)}};function a(t,e){return t?e?l(t,e):((n=s(t)).digits=n.digits.substr(0,n.order_length+1),c(n,s("1"))):e?l("0",e):"1";var n}function o(t,e,n){var r=new Array(n);if(n>0)if(e)!function t(e,n,o,i){var l=Math.floor((o+i)/2),c=a(e,n);r[l]=c,o<l&&t(e,c,o,l);l+1<i&&t(c,n,l+1,i)}(t,e,0,n);else for(var o=0;o<n;o++){var i=keese(t,null);r[o]=i,t=i}return r}function l(a,r){if(a>r)throw new Error("assertion failed: "+i()(a)+" < "+i()(r));var o=s(a),l=s(r);u(o,l);for(var f=0,p=Math.max(o.digits.length,l.digits.length),m=0;m<p||f>0;m++){var g=n[o.digits[m]]||0,y=f+(n[l.digits[m]]||0);if(g!==y){if(g!==y-1){for(var h=Math.floor((y-g)/2),v="",b=0;b<m;b++)v+="0";v+=t[h];var C=s(d(o.order_length,v));return o.digits=o.digits.substr(0,m+1),c(o,C)}f=e}}throw new Error}function c(a,r){u(a,r);for(var o="",i=a.order_length,l=0,c=Math.max(a.digits.length,r.digits.length)-1;c>=0;c--)l+=n[a.digits[c]]||0,l+=n[r.digits[c]]||0,o=t[l%e]+o,l=Math.floor(l/e);for(;l>0;)o=t[l%e]+o,l=Math.floor(l/e),i++;return d(i,o)}function s(t){var e=r()(t).call(t,"~")+1;return{order_length:e,digits:t.substr(e)}}function d(t,e){for(;t>0&&"0"==e.charAt(0);)e=e.substr(1),t--;for(var n="",a=0;a<t;a++)n+="~";return n+e}function u(t,e){f(t,e.order_length),f(e,t.order_length)}function f(t,e){for(;t.order_length<e;)t.digits="0"+t.digits,t.order_length++}}))},jwnm:function(t,e){t.exports='<div> <ng-form name=$ctrl.widgetToolbarForm class=ff-grid> <chart-by-period flex=none period=$ctrl.params.byPeriod></chart-by-period> <ff-static flex=auto> <ff-hint ng-if="$ctrl.params.selected === null"><span translate=ANALYTICS.WIDGET.OCCUPANCY_VACANCY.HINT></span></ff-hint> <ff-btn sense=back size=sm ng-if="$ctrl.params.selected !== null" ff-click="$ctrl.params.selected = null"> <span translate=GLOBAL.BTN_BACK></span> </ff-btn> </ff-static> <chart-period flex="0 1 auto" period=$ctrl.params.period from=$ctrl.params.from to=$ctrl.params.to></chart-period> </ng-form> <chart config=$ctrl.chart ff-dim=$ctrl.spin></chart> </div> '},oCA5:function(t,e,n){"use strict";n.r(e);var a=n("6RpP"),r=n.n(a),o=n("yCd9"),i=n.n(o),l=n("G6E5"),c=n("aGVL"),s=n("bU+R"),d=n.n(s);e.default=angular.module("deskworks.analyticsOccupancyVacancyChart",[l.a.name,c.a.name]).factory("analyticsOccupancyVacancyChart",["$rootScope","$filter","$translate","chartColors","reportHelper",function(t,e,n,a,o){return function(e){var n=e.periods,o=e.data,l=e.params,c=e.onChartClick,s=i()(n).call(n,(function(t){return t.title})),u=i()(o).call(o,(function(t,e){return{label:t.name,data:t.totals,maxBarThickness:80,backgroundColor:a[e]}}));return{type:"bar",plugins:[d.a],data:{labels:s,datasets:u},options:{plugins:{datalabels:{display:"auto",color:"#fff",backgroundColor:"#000",padding:1,borderRadius:3,formatter:function(t,e){return"".concat(Math.round(t),"%")}}},tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(t){var e,n=o[t.datasetIndex],a=n.name,i=n.totals;return r()(e="".concat(a,": ")).call(e,i[t.index],"%")}}},layout:{padding:{top:15}},legend:{display:!0,position:l.wide?"right":"bottom"},scales:{yAxes:[{ticks:{min:0,max:100,callback:function(t){return"".concat(t,"%")}}}]},onClick:function(e,n){var a=this;t.$apply((function(t){var n=a.getElementAtEvent(e)[0];n&&c(n._datasetIndex)}))}}}}}])},p5aI:function(t,e,n){"use strict";n.r(e);n("JBxO"),n("FdtR");var a=n("Tfwl"),r=n.n(a),o=n("XAgg"),i=n.n(o),l=n("yKah"),c=n.n(l),s=n("WSeP"),d=n.n(s),u=n("lvz6"),f=n.n(u),p=n("hsT8"),m=n.n(p),g=n("Ekwr"),y=n.n(g),h=n("03wM"),v=n.n(h),b=n("fzuT"),C=n.n(b),w=n("RnuU"),$=n.n(w),A=n("CLLE"),k=n("G6E5"),T=n("2Bp7"),P=n("Xp5u"),O=n("CgoQ"),I=n("O7bB"),x=n("DcLO"),R=n("OOrm");function E(t,e){var n=v()(t);if(y.a){var a=y()(t);e&&(a=m()(a).call(a,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,a)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n,a=null!=arguments[e]?arguments[e]:{};if(e%2)d()(n=E(Object(a),!0)).call(n,(function(e){C()(t,e,a[e])}));else if(c.a)i()(t,c()(a));else{var o;d()(o=E(Object(a))).call(o,(function(e){r()(t,e,f()(a,e))}))}}return t}e.default=angular.module("deskworks.analyticsIncomeDirective",["debounce",A.a.name,k.a.name,P.a.name,O.a.name,T.default.name,I.default.name,x.a.name,R.a.name]).directive("analyticsIncome",(function(){return{template:$.a,restrict:"E",scope:!0,controller:"AnalyticsIncomeDirectiveCtrl as $ctrl",bindToController:{params:"<",centerId:"<"}}})).controller("AnalyticsIncomeDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","AnalyticsIncome","analyticsIncomeChart","optsChartByPeriod","optsChartPeriod",function(t,e,n,a,r,o,i,l,c,s,d){var u=this,f=i.paramsChanged;u.optsByPeriod=s,u.optsPeriod=d,u.data=null,u.$onInit=function(){t.$watch((function(){return D(D({},u.params),{},{centerId:u.centerId})}),o((function(t,n){u.params.period=u.params.period||"12months",u.params.byPeriod=u.params.byPeriod||"month",u.widgetToolbarForm.$invalid||(f(t,n,["byPeriod","from","to","centerId"])&&(u.data=null),u.data=u.data||(u.spin=!0,l.get(t).catch((function(t){return a.error(t,"Failed to query Income widget data.")})).finally((function(){u.spin=!1}))),e.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){u.chart=c(D(D({},u.data),{},{params:u.params}))})))}),100),!0)}}])},pl6f:function(t,e,n){"use strict";e.a=angular.module("systemColors",["deskworks.helper"]).factory("systemColors",["$window","helper",function(t,e){var n={},a=angular.element('<div style="display: none"></div>');return a.append('<div class="text-text"></div>'),a.append('<div class="text-brand"></div>'),a.append('<div class="text-brand"></div>'),a.append('<div class="text-danger"></div>'),a.append("<div></div>"),a.append('<div class="sidebar-group-header"></div>'),document.body.appendChild(a[0]),n.text=e.rgb2hex(t.getComputedStyle(a.children()[0]).getPropertyValue("color"))||"#444",n.info=e.rgb2hex(t.getComputedStyle(a.children()[4]).getPropertyValue("color"))||"#4d4e4c",n.primary=e.rgb2hex(t.getComputedStyle(a.children()[5]).getPropertyValue("background-color"))||"#949594",n.warning=e.rgb2hex(t.getComputedStyle(a.children()[3]).getPropertyValue("color"))||"#ff9b00",a.remove(),n}])},qLGz:function(t,e,n){"use strict";n.r(e);n("JBxO"),n("FdtR");var a=n("Tfwl"),r=n.n(a),o=n("XAgg"),i=n.n(o),l=n("yKah"),c=n.n(l),s=n("WSeP"),d=n.n(s),u=n("lvz6"),f=n.n(u),p=n("hsT8"),m=n.n(p),g=n("Ekwr"),y=n.n(g),h=n("03wM"),v=n.n(h),b=n("fzuT"),C=n.n(b),w=n("jwnm"),$=n.n(w),A=n("CLLE"),k=n("G6E5"),T=n("G6gN"),P=n("Xp5u"),O=n("CgoQ"),I=n("oCA5"),x=n("9pnN"),R=n("DcLO"),E=n("OOrm");function D(t,e){var n=v()(t);if(y.a){var a=y()(t);e&&(a=m()(a).call(a,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,a)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n,a=null!=arguments[e]?arguments[e]:{};if(e%2)d()(n=D(Object(a),!0)).call(n,(function(e){C()(t,e,a[e])}));else if(c.a)i()(t,c()(a));else{var o;d()(o=D(Object(a))).call(o,(function(e){r()(t,e,f()(a,e))}))}}return t}e.default=angular.module("deskworks.analyticsOccupancyVacancyDirective",["debounce",A.a.name,k.a.name,P.a.name,O.a.name,T.default.name,I.default.name,x.default.name,R.a.name,E.a.name]).directive("analyticsOccupancyVacancy",(function(){return{template:$.a,restrict:"E",scope:!0,controller:"AnalyticsOccupancyVacancyDirectiveCtrl as $ctrl",bindToController:{params:"<",centerId:"<"}}})).controller("AnalyticsOccupancyVacancyDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","AnalyticsOccupancyVacancy","analyticsOccupancyVacancyChart","analyticsOccupancyVacancyChartUnits","optsChartByPeriod","optsChartPeriod",function(t,e,n,a,r,o,i,l,c,s,d,u){var f=this,p=i.paramsChanged;function m(t){f.params.selected=t}f.optsByPeriod=d,f.optsPeriod=u,f.data=null,f.$onInit=function(){t.$watch((function(){return S(S({},f.params),{},{centerId:f.centerId})}),o((function(t,n){f.params.period=f.params.period||"12months",f.params.byPeriod=f.params.byPeriod||"month",f.widgetToolbarForm.$invalid||(p(t,n,["byPeriod","from","to","centerId"])&&(f.data=null,f.params.selected=null),f.data=f.data||(f.spin=!0,l.get(f.params).catch((function(t){return a.error(t,"Failed to query Occupancy Vacancy widget data.")})).finally((function(){f.spin=!1}))),e.all({data:f.data}).then((function(t){f.data=t.data})).then((function(){null!==f.params.selected?f.chart=s(S(S({},f.data),{},{params:f.params})):f.chart=c(S(S({},f.data),{},{params:f.params,onChartClick:m}))})))}),100),!0)}}])},r970:function(t,e){t.exports='<ff-panel> <ff-panel-header class=ff-row> <span translate={{$w.config._name}}></span> <div class=analytics-widget-toolbar> <ff-btn sense=widen size=xs class=ff-btn-icon ff-click="$w.widget.wide = !$w.widget.wide" title="{{\'ANALYTICS.WIDE\' | translate}}"></ff-btn> <ff-btn sense=drag size=xs class=ff-btn-icon dnd-handle title="{{\'ANALYTICS.DRAG_N_DROP\' | translate}}"></ff-btn> </div> </ff-panel-header> <div class=analytics-widget-body></div> </ff-panel> '},va6R:function(t,e,n){}}]);