(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"/MEN":function(t,a,e){},"1KV+":function(t,a,e){"use strict";e.r(a);e("3dw1");var r=e("nbuU"),n=e.n(r),o=e("yCd9"),i=e.n(o),s=e("Xp5u");a.default=angular.module("deskworks.AnalyticsSales",["ngResource","datesDeserializer","deskworks.config",s.a.name]).factory("AnalyticsSales",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,r,o,s,c){var l=r(["periods.from","periods.to"]),d=t(o.getApiAbsUrl("/analytics/sales"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,l]}});return{get:function(t){return d.get({centerId:t.centerId||null,byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd"),to:a("date")(t.to,"yyyy-MM-dd")}).$promise.then((function(a){return function(t){var a,e=t.data,r=t.params.byPeriod,o=void 0===r?"month":r,l=n()(c).call(c,(function(t){return t.id===o}));return e.periods.forEach((function(t){t.title=l.format(t.from,t.to)})),e.totals=i()(a=e.periods).call(a,(function(t,a){return s.round(e.data.reduce((function(t,e){return t+e.totals[a]}),0))})),e.data.forEach((function(t){t.total=s.round(t.totals.reduce((function(t,a){return t+a}),0))})),e}({data:a,params:t})}))}}}])},"1LnZ":function(t,a,e){var r={"./dashboard/analytics-dashboard.controller.js":"Dc08","./dashboard/analytics-user.service.js":"RlMt","./widgets/analytics-widget.directive.js":"1e+P","./widgets/analytics-widgets-list.service.js":"Xh+F","./widgets/income/analytics-income-chart.service.js":"O7bB","./widgets/income/analytics-income.directive.js":"p5aI","./widgets/income/analytics-income.service.js":"2Bp7","./widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart-units.service.js":"9pnN","./widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart.service.js":"oCA5","./widgets/occupancy-vacancy/analytics-occupancy-vacancy.directive.js":"qLGz","./widgets/occupancy-vacancy/analytics-occupancy-vacancy.service.js":"G6gN","./widgets/recurring-billings/analytics-recurring-billings-chart.service.js":"qbH2","./widgets/recurring-billings/analytics-recurring-billings.directive.js":"NfJs","./widgets/recurring-billings/analytics-recurring-billings.service.js":"xlJL","./widgets/reservation-space-utilization/analytics-reservation-space-utilization-chart-units.service.js":"Q7d3","./widgets/reservation-space-utilization/analytics-reservation-space-utilization-chart.service.js":"d0as","./widgets/reservation-space-utilization/analytics-reservation-space-utilization.directive.js":"WuxP","./widgets/reservation-space-utilization/analytics-reservation-space-utilization.service.js":"6EsB","./widgets/sales-by-product-category/analytics-sales-by-product-category-chart.service.js":"XdOV","./widgets/sales-by-product-category/analytics-sales-by-product-category-detailed-chart.service.js":"Z7iF","./widgets/sales-by-product-category/analytics-sales-by-product-category.directive.js":"ENWM","./widgets/sales-by-product-category/analytics-sales-by-product-category.service.js":"QXqx","./widgets/sales/analytics-sales-chart.service.js":"DbU7","./widgets/sales/analytics-sales.directive.js":"4uyB","./widgets/sales/analytics-sales.service.js":"1KV+"};function n(t){var a=o(t);return e(a)}function o(t){if(!e.o(r,t)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return r[t]}n.keys=function(){return Object.keys(r)},n.resolve=o,t.exports=n,n.id="1LnZ"},"1e+P":function(t,a,e){"use strict";e.r(a);e("3dw1");var r=e("nbuU"),n=e.n(r),o=(e("KOgG"),e("r970")),i=e.n(o),s=e("Xh+F");a.default=angular.module("deskworks.analyticsWidgetDirective",[s.default.name]).directive("analyticsWidget",(function(){return{template:i.a,restrict:"E",scope:!0,controller:"AnalyticsWidgetDirectiveCtrl as $w",bindToController:{widget:"<",centerId:"@"},link:function(t,a){a.addClass("analytics-widget")}}})).controller("AnalyticsWidgetDirectiveCtrl",["$scope","$element","$window","$compile","state","dwAlerts","helper","analyticsWidgetsList",function(t,a,e,r,o,i,s,c){var l=this;l.$onInit=function(){t.$watch("$w.widget.wide",(function(){a.toggleClass("analytics-widget-wide",!!l.widget.wide)}))},l.$onChanges=function(){if(l.widget){if(l.config=n()(c).call(c,(function(t){return t.uid===l.widget.uid})),!l.config)return void a.css("display","none");var e=angular.element(a[0].querySelector(".analytics-widget-body")),o=angular.element(l.config.template);o.attr("params","$w.widget"),o.attr("center-id",l.centerId),angular.forEach(e.children(),(function(t){return t.remove()})),e.append(o),r(o)(t.$new())}},l.onDragStart=function(t){var a=s.findParentElement(t.target,(function(t){return void 0!==t.attr("dnd-list")}));a.toggleClass("analytics-wide-placeholder",!!l.widget.wide),a.toggleClass("analytics-dragging",!0)},l.onDragEnd=function(t){s.findParentElement(t.target,(function(t){return void 0!==t.attr("dnd-list")})).toggleClass("analytics-dragging",!1)}}])},"2Bp7":function(t,a,e){"use strict";e.r(a);e("3dw1");var r=e("nbuU"),n=e.n(r),o=e("Xp5u");a.default=angular.module("deskworks.AnalyticsIncome",["ngResource","datesDeserializer","deskworks.config",o.a.name]).factory("AnalyticsIncome",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,r,o,i,s){var c=r(["periods.from","periods.to"]),l=t(o.getApiAbsUrl("/analytics/income"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,c]}});return{get:function(t){return l.get({centerId:t.centerId||null,byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd")||null,to:a("date")(t.to,"yyyy-MM-dd")||null}).$promise.then((function(a){return function(t){var a=t.data,e=t.params.byPeriod,r=void 0===e?"month":e,o=n()(s).call(s,(function(t){return t.id===r}));return a.periods.forEach((function(t){t.title=o.format(t.from,t.to)})),a}({data:a,params:t})}))}}}])},"2R0e":function(t,a){t.exports='<label class="ff-row" style="min-width:130px"> <ff-label flex="none"><span translate="CHARTS.BY_PERIOD"></span></ff-label> <ff-select ff-model="$ctrl.period" ff-options="opt.id as opt.name for opt in $ctrl.optsPeriod"></ff-select> </label> '},"2yBK":function(t,a){t.exports='<div ng-class="{ \'empty-chart\': $ctrl.data.data.length === 0 || $ctrl.data.grandTotal === 0 }"> <ng-form name="$ctrl.widgetToolbarForm" class="ff-grid"> <ff-static flex="auto"> <ff-hint ng-if="$ctrl.params.selected === null"><span translate="ANALYTICS.WIDGET.SALES_BY_PRODUCT_CATEGORY.HINT"></span></ff-hint> <ff-btn sense="back" size="sm" ng-if="$ctrl.params.selected !== null" ff-click="$ctrl.params.selected = null"> <span translate="GLOBAL.BTN_BACK"></span> </ff-btn> </ff-static> <chart-period flex="0 1 auto" period="$ctrl.params.period" from="$ctrl.params.from" to="$ctrl.params.to"></chart-period> </ng-form> <chart config="$ctrl.chart" ff-dim="$ctrl.spin"></chart> </div> '},"4uyB":function(t,a,e){"use strict";e.r(a);e("3dw1");var r=e("03wM"),n=e.n(r),o=e("Ekwr"),i=e.n(o),s=e("hsT8"),c=e.n(s),l=e("lvz6"),d=e.n(l),u=e("yKah"),f=e.n(u),p=e("fzuT"),m=e.n(p),y=(e("JBxO"),e("FdtR"),e("RnuU")),g=e.n(y),h=e("CLLE"),b=e("G6E5"),v=e("1KV+"),C=e("Xp5u"),w=e("CgoQ"),$=e("DbU7"),k=e("DcLO"),A=e("OOrm");function P(t,a){var e=n()(t);if(i.a){var r=i()(t);a&&(r=c()(r).call(r,(function(a){return d()(t,a).enumerable}))),e.push.apply(e,r)}return e}function I(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?P(Object(e),!0).forEach((function(a){m()(t,a,e[a])})):f.a?Object.defineProperties(t,f()(e)):P(Object(e)).forEach((function(a){Object.defineProperty(t,a,d()(e,a))}))}return t}a.default=angular.module("deskworks.analyticsSalesDirective",["debounce",h.a.name,b.a.name,v.default.name,C.a.name,w.a.name,$.default.name,k.a.name,A.a.name]).directive("analyticsSales",(function(){return{template:g.a,restrict:"E",scope:!0,controller:"AnalyticsSalesDirectiveCtrl as $ctrl",bindToController:{params:"<",centerId:"<"}}})).controller("AnalyticsSalesDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","AnalyticsSales","analyticsSalesChart","optsChartByPeriod","optsChartPeriod",function(t,a,e,r,n,o,i,s,c,l,d){var u=this,f=i.paramsChanged;u.optsByPeriod=l,u.optsPeriod=d,u.data=null,u.$onInit=function(){t.$watch((function(){return I(I({},u.params),{},{centerId:u.centerId})}),o((function(t,e){u.params.period=u.params.period||"12months",u.params.byPeriod=u.params.byPeriod||"month",u.widgetToolbarForm.$invalid||(f(t,e,["centerId","from","to","byPeriod"])&&(u.data=null),u.data=u.data||(u.spin=!0,s.get(t).catch((function(t){return r.error(t,"Failed to get Sales widget data.")})).finally((function(){u.spin=!1}))),a.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){u.chart=c(I(I({},u.data),{},{params:u.params}))})))}),100),!0)}}])},"6EsB":function(t,a,e){"use strict";e.r(a);e("3dw1");var r=e("nbuU"),n=e.n(r),o=e("yCd9"),i=e.n(o),s=e("Xp5u");a.default=angular.module("deskworks.AnalyticsReservationSpaceUtilization",["ngResource","datesDeserializer","deskworks.config",s.a.name]).factory("AnalyticsReservationSpaceUtilization",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,r,o,s,c){var l=r(["periods.from","periods.to"]),d=t(o.getApiAbsUrl("/analytics/reservation-space-utilization"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,l]}});return{get:function(t){return d.get({centerId:t.centerId||null,byPeriod:t.byPeriod||"quarter",from:a("date")(t.from,"yyyy-MM-dd"),to:a("date")(t.to,"yyyy-MM-dd")}).$promise.then((function(a){return function(t){var a=t.data,e=t.params.byPeriod,r=void 0===e?"month":e,o=n()(c).call(c,(function(t){return t.id===r}));return a.periods.forEach((function(t){t.title=o.format(t.from,t.to)})),a.data.forEach((function(t){var a;t.units.forEach((function(t){var a;t.utilization=i()(a=t.usage).call(a,(function(a,e){return t.expected[e]?s.round(100*a/t.expected[e],1):0}))})),t.utilization=i()(a=t.usage).call(a,(function(a,e){return t.expected[e]?s.round(100*a/t.expected[e],1):0}))})),a}({data:a,params:t})}))}}}])},"9pnN":function(t,a,e){"use strict";e.r(a);var r=e("yCd9"),n=e.n(r),o=e("6RpP"),i=e.n(o),s=e("G6E5"),c=e("aGVL");e("bU+R");a.default=angular.module("deskworks.analyticsOccupancyVacancyChartUnits",[s.a.name,c.a.name]).factory("analyticsOccupancyVacancyChartUnits",["$filter","$translate","chartColors","reportHelper",function(t,a,e,r){return function(t){var a,r=t.periods,o=t.data,s=t.params;return{type:"bar",data:{labels:n()(r).call(r,(function(t){return t.title})),datasets:n()(a=o[s.selected].units).call(a,(function(t,a){return{label:t.name,data:t.totals,maxBarThickness:80,backgroundColor:e[a]}}))},options:{tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(t){var a,e=o[s.selected].units[t.datasetIndex],r=e.name,n=e.totals;return i()(a="".concat(r,": ")).call(a,n[t.index],"%")}}},layout:{padding:{top:15}},legend:{display:!0,position:s.wide?"right":"bottom"},scales:{yAxes:[{ticks:{min:0,max:100,callback:function(t){return"".concat(t,"%")}}}]}}}}}])},C5yw:function(t,a,e){var r={"./dashboard/analytics-dashboard.tpl.html":"aOtR","./widgets/analytics-widget-base.tpl.html":"RnuU","./widgets/analytics-widget.tpl.html":"r970","./widgets/occupancy-vacancy/analytics-occupancy-vacancy.tpl.html":"jwnm","./widgets/recurring-billings/analytics-recurring-billings.tpl.html":"t0IE","./widgets/reservation-space-utilization/analytics-reservation-space-utilization.tpl.html":"QDQu","./widgets/sales-by-product-category/analytics-sales-by-product-category.tpl.html":"2yBK"};function n(t){var a=o(t);return e(a)}function o(t){if(!e.o(r,t)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return r[t]}n.keys=function(){return Object.keys(r)},n.resolve=o,t.exports=n,n.id="C5yw"},CLLE:function(t,a,e){"use strict";e("3dw1");var r=e("03wM"),n=e.n(r),o=e("Ekwr"),i=e.n(o),s=e("hsT8"),c=e.n(s),l=e("lvz6"),d=e.n(l),u=e("yKah"),f=e.n(u),p=e("fzuT"),m=e.n(p),y=e("yCd9"),g=e.n(y),h=e("ipr/"),b=e.n(h),v=(e("S2gh"),e("bG+q"),e("pl6f")),C=e("aGVL"),w=e("bU+R"),$=e.n(w);function k(t,a){var e=n()(t);if(i.a){var r=i()(t);a&&(r=c()(r).call(r,(function(a){return d()(t,a).enumerable}))),e.push.apply(e,r)}return e}function A(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?k(Object(e),!0).forEach((function(a){m()(t,a,e[a])})):f.a?Object.defineProperties(t,f()(e)):k(Object(e)).forEach((function(a){Object.defineProperty(t,a,d()(e,a))}))}return t}a.a=angular.module("chartDirective",["deskworks.helper",v.a.name,C.a.name]).directive("chart",["$window","systemColors",function(t,a){return t.Chart.defaults.global.legend.labels.boxWidth=12,t.Chart.defaults.global.tooltips.cornerRadius=3,t.Chart.defaults.global.tooltips.displayColors=!1,t.Chart.defaults.global.tooltips.backgroundColor="rgba(0,0,0,0.65)",t.Chart.defaults.global.elements.rectangle.borderWidth=1,t.Chart.defaults.global.elements.rectangle.backgroundColor=a.primary,t.Chart.defaults.global.elements.arc.borderWidth=1,t.Chart.plugins.unregister($.a),{restrict:"E",scope:!0,controller:"ChartCtrl as $ctrl",bindToController:{type:"@chartType",labels:"<chartLabels",data:"<chartData",options:"<chartOptions",config:"<"},template:"<canvas></canvas>"}}]).controller("ChartCtrl",["$scope","$element","$window","chartColors",function(t,a,e,r){var n,o=this,i={maintainAspectRatio:!1},s={backgroundColor:r,hoverBorderWidth:2,hoverBorderColor:"#fff"};o.$onDestroy=function(){n&&n.destroy()},o.$onChanges=function(t){var r;if(o.config){var c;n&&n.destroy();var l=A({},o.config);return l.options=A(A({},l.options),i),l.data=A({},l.data),l.data.datasets=g()(c=l.data.datasets).call(c,(function(t){return A(A({},s),t)})),void(n=new e.Chart(a.children(),l))}if(o.options){var d={labels:o.labels,datasets:b()(r=o.data).call(r)};d.datasets[0]=angular.extend({},s,d.datasets[0]),!n||t.type&&t.type.currentValue!==t.type.previousValue?(n&&n.destroy(),n=new e.Chart(a.children(),{type:o.type,data:d,options:angular.extend({},i,o.options)})):(angular.extend(n.data,d),angular.extend(n.options,i,o.options),n.update())}}}])},CgoQ:function(t,a,e){"use strict";e("3dw1");a.a=angular.module("deskworks.optsChartPeriod",[]).factory("optsChartPeriod",["$rootScope","$translate",function(t,a){var e=[{id:"lastMonth",_name:"CHARTS.PERIOD.LAST_MONTH",from:function(){return moment().subtract(1,"month").startOf("month")},to:function(){return moment().subtract(1,"month").endOf("month")}},{id:"thisMonth",_name:"CHARTS.PERIOD.THIS_MONTH",from:function(){return moment().startOf("month")},to:function(){return moment().endOf("month")}},{id:"lastQuarter",_name:"CHARTS.PERIOD.LAST_QUARTER",from:function(){return moment().subtract(1,"quarter").startOf("quarter")},to:function(){return moment().subtract(1,"quarter").endOf("quarter")}},{id:"thisQuarter",_name:"CHARTS.PERIOD.THIS_QUARTER",from:function(){return moment().startOf("quarter")},to:function(){return moment().endOf("quarter")}},{id:"12months",_name:"CHARTS.PERIOD.12_MONTHS",from:function(){return moment().subtract(12,"month")},to:function(){return moment()}},{id:"lastYear",_name:"CHARTS.PERIOD.LAST_YEAR",from:function(){return moment().subtract(1,"year").startOf("year")},to:function(){return moment().subtract(1,"year").endOf("year")}},{id:"thisYear",_name:"CHARTS.PERIOD.THIS_YEAR",from:function(){return moment().startOf("year")},to:function(){return moment().endOf("year")}},{id:"allTime",_name:"CHARTS.PERIOD.ALL_TIME",from:function(){return null},to:function(){return null}},{id:"custom",_name:"CHARTS.PERIOD.CUSTOM",from:function(){return moment().subtract(1,"month").startOf("month")},to:function(){return moment().subtract(1,"month").endOf("month")}}];function r(){e.forEach((function(t){t.name=a.instant(t._name)}))}return r(),t.$on("$setTranslationsSuccess",r),e}])},DLeD:function(t,a,e){"use strict";e.r(a);e("3dw1"),e("Muwe"),e("y89P");var r=e("yCd9"),n=e.n(r),o=e("lRNC"),i=e.n(o),s=["$injector",function(t){var a,r,o=(a=e("1LnZ"),n()(r=i()(a).call(a)).call(r,a));t.loadNewModules(n()(o).call(o,(function(t){return t.default.name}))),t.invoke(["$templateCache",function(t){var a=e("C5yw");i()(a).call(a).forEach((function(e){return t.put(e.replace(/^\.\//,""),a(e))}))}])}];a.default=s},DbU7:function(t,a,e){"use strict";e.r(a);var r=e("yCd9"),n=e.n(r),o=e("6RpP"),i=e.n(o),s=e("G6E5"),c=e("aGVL");e("bU+R");a.default=angular.module("deskworks.analyticsSalesChart",[s.a.name,c.a.name]).factory("analyticsSalesChart",["$filter","$translate","chartColors",function(t,a,e){return function(r){var o,s=r.periods,c=r.data,l=r.totals,d=r.params,u=n()(s).call(s,(function(t){return t.title})),f=i()(o=n()(c).call(c,(function(t,a){return{label:t.name,data:t.totals,backgroundColor:e[a],maxBarThickness:80}}))).call(o,[{label:a.instant("GLOBAL.TOTAL"),data:n()(l).call(l,(function(t){return 0})),backgroundColor:"transparent",maxBarThickness:80}]);return{type:"bar",data:{labels:u,datasets:f},options:{tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(a,e){var r=e.datasets[a.datasetIndex];return r.label+": "+t("ncurrency")(a.datasetIndex<f.length-1?r.data[a.index]:l[a.index])}}},layout:{padding:{top:15}},legend:{display:!0,position:d.wide?"right":"bottom"},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{callback:function(a){return t("ncurrency")(a,void 0,0)}}}]}}}}}])},Dc08:function(t,a,e){"use strict";e.r(a);e("va6R");var r=e("I5Zy"),n=e("jd5N"),o=e("1e+P"),i=e("Xh+F"),s=e("RlMt");a.default=angular.module("deskworks.AnalyticsDashboardCtrl",["deskworks.state","session",r.a.name,n.a.name,o.default.name,i.default.name,s.default.name]).controller("AnalyticsDashboardCtrl",["$scope","$translate","$timeout","dwAlerts","state","helper","dnd","keese","session","analyticsWidgetsList","AnalyticsUser",function(t,a,e,r,n,o,i,s,c,l,d){var u=this;n.setPageTitle(a.instant("ANALYTICS.PAGE_TITLE")),u.widgetsList=l,u.widgetToAdd=u.widgetsList[0],u.onInit=function(){u.loadDefaults()},u.getCenterId=function(){return u.settings.allCenters?null:n.getCurrentCenterId()},u.onDrop=function(t,a,e,r){i.move(t,a,e,r);return!0},u.addWidget=function(){var t=u.settings.widgets;t.push({uid:u.widgetToAdd.uid,order:s.generate(t.length&&t[t.length-1].order),wide:!1})},u.saveDefaults=function(){return d.save({userId:c.user.id},u.settings).catch((function(t){return r.error(t,"Failed to save dashboard settings.")})).then((function(){u.defaults=angular.copy(u.settings)}))},u.loadDefaults=function(){return d.get({userId:c.user.id}).catch((function(t){return r.error(t,"Failed to get dashboard settings.")})).then((function(t){u.settings=o.purify(t),e((function(){u.defaults=angular.copy(u.settings)}))}))},u.isPristine=function(){return angular.equals(u.settings,u.defaults)},u.onInit()}])},DcLO:function(t,a,e){"use strict";var r=e("nbuU"),n=e.n(r),o=e("ggrz"),i=e.n(o),s=(e("gq4Z"),e("CgoQ"));a.a=angular.module("deskworks.chartPeriodDirective",[s.a.name]).directive("chartPeriod",(function(){return{template:i.a,restrict:"E",scope:!0,controller:"ChartPeriodCtrl as $ctrl",bindToController:{period:"=",from:"=",to:"="}}})).controller("ChartPeriodCtrl",["$scope","optsChartPeriod",function(t,a){var e=this;e.optsPeriod=a,t.$watchGroup(["$ctrl.period","$ctrl.from","$ctrl.to"],(function(t,r){if("custom"===e.period&&e.to&&e.to.endOf("month"),t[0]!==r[0]||e.period&&!e.from&&!e.to){var o=n()(a).call(a,(function(t){return t.id===e.period}));e.from=o.from(),e.to=o.to()}}))}])},ENWM:function(t,a,e){"use strict";e.r(a);e("3dw1");var r=e("03wM"),n=e.n(r),o=e("Ekwr"),i=e.n(o),s=e("hsT8"),c=e.n(s),l=e("lvz6"),d=e.n(l),u=e("yKah"),f=e.n(u),p=e("fzuT"),m=e.n(p),y=(e("JBxO"),e("FdtR"),e("2yBK")),g=e.n(y),h=e("CLLE"),b=e("G6E5"),v=e("QXqx"),C=e("CgoQ"),w=e("XdOV"),$=e("Z7iF"),k=e("DcLO"),A=e("OOrm");function P(t,a){var e=n()(t);if(i.a){var r=i()(t);a&&(r=c()(r).call(r,(function(a){return d()(t,a).enumerable}))),e.push.apply(e,r)}return e}function I(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?P(Object(e),!0).forEach((function(a){m()(t,a,e[a])})):f.a?Object.defineProperties(t,f()(e)):P(Object(e)).forEach((function(a){Object.defineProperty(t,a,d()(e,a))}))}return t}a.default=angular.module("deskworks.analyticsSalesByProductCategoryDirective",["debounce","deskworks.setup.service",h.a.name,b.a.name,v.default.name,C.a.name,w.default.name,$.default.name,k.a.name,A.a.name]).directive("analyticsSalesByProductCategory",(function(){return{template:g.a,restrict:"E",scope:!0,controller:"AnalyticsSalesByProductCategoryDirectiveCtrl as $ctrl",bindToController:{params:"<",centerId:"<"}}})).controller("AnalyticsSalesByProductCategoryDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","AnalyticsSalesByProductCategory","analyticsSalesByProductCategoryChart","analyticsSalesByProductCategoryDetailedChart","optsChartPeriod",function(t,a,e,r,n,o,i,s,c,l,d){var u=this,f=i.paramsChanged;function p(t){u.params.selected=t}u.optsPeriod=d,u.data=null,u.chartLevels=[],u.$onInit=function(){t.$watch((function(){return I(I({},u.params),{},{centerId:u.centerId})}),o((function(t,e){u.params.period=u.params.period||"lastMonth",u.params.byPeriod=u.params.byPeriod||"month",u.widgetToolbarForm.$invalid||(f(t,e,["from","to","centerId"])&&(u.data=null,u.params.selected=null),u.data=u.data||(u.spin=!0,s.get(I(I({},u.params),{},{centerId:u.centerId})).catch((function(t){return r.error(t,"Failed to get Sales By Product Category widget data.")}))).finally((function(){u.spin=!1})),a.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){null!==u.params.selected?u.chart=l(I(I({},u.data),{},{params:u.params})):u.chart=c(I(I({},u.data),{},{params:u.params,onChartClick:p}))})))}),100),!0)}}])},G6gN:function(t,a,e){"use strict";e.r(a);e("3dw1");var r=e("nbuU"),n=e.n(r),o=e("Xp5u");a.default=angular.module("deskworks.AnalyticsOccupancyVacancy",["ngResource","datesDeserializer","deskworks.config",o.a.name]).factory("AnalyticsOccupancyVacancy",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,r,o,i,s){var c=r(["periods.from","periods.to"]),l=t(o.getApiAbsUrl("/analytics/occupancy-vacancy"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,c]}});return{get:function(t){return l.get({centerId:t.centerId||null,byPeriod:t.byPeriod||"quarter",from:a("date")(t.from,"yyyy-MM-dd")||null,to:a("date")(t.to,"yyyy-MM-dd")||null}).$promise.then((function(a){return function(t){var a=t.data,e=t.params.byPeriod,r=void 0===e?"month":e,o=n()(s).call(s,(function(t){return t.id===r}));return a.periods.forEach((function(t){t.title=o.format(t.from,t.to)})),a}({data:a,params:t})}))}}}])},I5Zy:function(t,a,e){"use strict";var r=e("0zKI"),n=e.n(r),o=(e("RF9M"),e("/MEN"),e("jd5N"));a.a=angular.module("dnd",["dndLists",o.a.name]).factory("dnd",["keese",function(t){return{move:function(a,e,r,o){var i=a[e];r&&n()(r).call(r,o,0,i);a===r&&o<=e&&e++;if(n()(a).call(a,e,1),r){var s=r.indexOf(i);i.order=t.generate(r[s-1]&&r[s-1].order,r[s+1]&&r[s+1].order)}return i}}}])},KOgG:function(t,a,e){},NfJs:function(t,a,e){"use strict";e.r(a);e("3dw1");var r=e("03wM"),n=e.n(r),o=e("Ekwr"),i=e.n(o),s=e("hsT8"),c=e.n(s),l=e("lvz6"),d=e.n(l),u=e("yKah"),f=e.n(u),p=e("fzuT"),m=e.n(p),y=(e("JBxO"),e("FdtR"),e("t0IE")),g=e.n(y),h=e("CLLE"),b=e("G6E5"),v=e("xlJL"),C=e("Xp5u"),w=e("CgoQ"),$=e("qbH2"),k=e("DcLO"),A=e("OOrm");function P(t,a){var e=n()(t);if(i.a){var r=i()(t);a&&(r=c()(r).call(r,(function(a){return d()(t,a).enumerable}))),e.push.apply(e,r)}return e}function I(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?P(Object(e),!0).forEach((function(a){m()(t,a,e[a])})):f.a?Object.defineProperties(t,f()(e)):P(Object(e)).forEach((function(a){Object.defineProperty(t,a,d()(e,a))}))}return t}a.default=angular.module("deskworks.analyticsRecurringBillingsDirective",["debounce",h.a.name,b.a.name,v.default.name,C.a.name,w.a.name,$.default.name,k.a.name,A.a.name]).directive("analyticsRecurringBillings",(function(){return{template:g.a,restrict:"E",scope:!0,controller:"AnalyticsRecurringBillingsDirectiveCtrl as $ctrl",bindToController:{params:"<",centerId:"<"}}})).controller("AnalyticsRecurringBillingsDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","AnalyticsRecurringBillings","analyticsRecurringBillingsChart","optsChartByPeriod","optsChartPeriod",function(t,a,e,r,n,o,i,s,c,l,d){var u=this,f=i.paramsChanged;u.optsByPeriod=l,u.optsPeriod=d,u.data=null,u.$onInit=function(){t.$watch((function(){return I(I({},u.params),{},{centerId:u.centerId})}),o((function(t,e){u.params.period=u.params.period||"12months",u.params.byPeriod=u.params.byPeriod||"month",u.widgetToolbarForm.$invalid||(f(t,e,["byPeriod","from","to","centerId"])&&(u.data=null),u.data=u.data||(u.spin=!0,s.get(I(I({},u.params),{},{centerId:u.centerId})).catch((function(t){return r.error(t,"Failed to get Recurring Billings widget data.")})).finally((function(){u.spin=!1}))),a.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){u.chart=c(I(I({},u.data),{},{params:u.params}))})))}),100),!0)}}])},O7bB:function(t,a,e){"use strict";e.r(a);var r=e("yCd9"),n=e.n(r),o=e("6RpP"),i=e.n(o),s=e("aGVL");e("bU+R");a.default=angular.module("deskworks.analyticsIncomeChart",[s.a.name,"deskworks.whitelabel"]).factory("analyticsIncomeChart",["$filter","$translate","chartColors","whitelabel",function(t,a,e,r){return function(o){var s=o.periods,c=o.totals,l=(o.params,n()(s).call(s,(function(t){return t.title}))),d=[{data:c,maxBarThickness:80,backgroundColor:r.getProperty("--brand-color")||e[0]}],u=a.instant("ANALYTICS.INCOME");return{type:"bar",data:{labels:l,datasets:d},options:{tooltips:{callbacks:{label:function(a){var e;return i()(e="".concat(u,": ")).call(e,t("ncurrency")(c[a.index]))}}},layout:{padding:{top:15}},legend:{display:!1},scales:{yAxes:[{ticks:{min:0,callback:function(a){return t("ncurrency")(a,void 0,0)}}}]}}}}}])},OOrm:function(t,a,e){"use strict";var r=e("2R0e"),n=e.n(r),o=e("Xp5u");a.a=angular.module("deskworks.chartByPeriodDirective",[o.a.name]).directive("chartByPeriod",(function(){return{template:n.a,restrict:"E",scope:!0,controller:"ChartByPeriodCtrl as $ctrl",bindToController:{period:"="}}})).controller("ChartByPeriodCtrl",["$scope","optsChartByPeriod",function(t,a){this.optsPeriod=a}])},Q7d3:function(t,a,e){"use strict";e.r(a);var r=e("yCd9"),n=e.n(r),o=e("6RpP"),i=e.n(o),s=e("G6E5"),c=e("aGVL");e("bU+R");a.default=angular.module("deskworks.analyticsReservationSpaceUtilizationChartUnits",[s.a.name,c.a.name]).factory("analyticsReservationSpaceUtilizationChartUnits",["$filter","$translate","chartColors","reportHelper",function(t,a,e,r){return function(t){var a,r=t.periods,o=t.data,s=t.params;return{type:"bar",data:{labels:n()(r).call(r,(function(t){return t.title})),datasets:n()(a=o[s.selected].units).call(a,(function(t,a){return{label:t.name,data:t.utilization,maxBarThickness:80,backgroundColor:e[a]}}))},options:{tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(t){var a,e,r,n=o[s.selected].units[t.datasetIndex],c=n.name,l=n.utilization,d=n.usage,u=n.expected,f=t.index;return i()(a=i()(e=i()(r="".concat(c,": ")).call(r,l[f],"% (")).call(e,d[f]," of ")).call(a,u[f]," hr)")}}},layout:{padding:{top:15}},legend:{display:!0,position:s.wide?"right":"bottom"},scales:{yAxes:[{ticks:{min:0,max:100,callback:function(t){return"".concat(t,"%")}}}]}}}}}])},QDQu:function(t,a){t.exports='<div> <ng-form name="$ctrl.widgetToolbarForm" class="ff-grid"> <chart-by-period flex="none" period="$ctrl.params.byPeriod"></chart-by-period> <ff-static flex="auto"> <ff-hint ng-if="$ctrl.params.selected === null"><span translate="ANALYTICS.WIDGET.OCCUPANCY_VACANCY.HINT"></span></ff-hint> <ff-btn sense="back" size="sm" ng-if="$ctrl.params.selected !== null" ff-click="$ctrl.params.selected = null"> <span translate="GLOBAL.BTN_BACK"></span> </ff-btn> </ff-static> <chart-period flex="0 1 auto" period="$ctrl.params.period" from="$ctrl.params.from" to="$ctrl.params.to"></chart-period> </ng-form> <chart config="$ctrl.chart" ff-dim="$ctrl.spin"></chart> </div> '},QXqx:function(t,a,e){"use strict";e.r(a);e("3dw1");var r=e("nbuU"),n=e.n(r),o=e("Xp5u");a.default=angular.module("deskworks.AnalyticsSalesByProductCategory",["ngResource","datesDeserializer","deskworks.config",o.a.name]).factory("AnalyticsSalesByProductCategory",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,r,o,i,s){var c=r(["periods.from","periods.to"]),l=t(o.getApiAbsUrl("/analytics/sales-by-product-category"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,c]}});return{get:function(t){return l.get({centerId:t.centerId||null,byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd"),to:a("date")(t.to,"yyyy-MM-dd")}).$promise.then((function(a){return function(t){var a=t.data,e=t.params.byPeriod,r=void 0===e?"month":e,o=n()(s).call(s,(function(t){return t.id===r}));return a.periods.forEach((function(t){t.title=o.format(t.from,t.to)})),a.grandTotal=0,a.data.forEach((function(t){t.total=t.totals.reduce((function(t,a){return t+a}),0),a.grandTotal+=t.total})),a.data.forEach((function(t){t.totalPercentage=a.grandTotal?i.round(100*t.total/a.grandTotal,1):0,t.total=i.round(t.total)})),a}({data:a,params:t})}))}}}])},RlMt:function(t,a,e){"use strict";e.r(a),a.default=angular.module("deskworks.AnalyticsUser",["ngResource","datesDeserializer","deskworks.config"]).factory("AnalyticsUser",["$resource","$timeout","datesDeserializer","deskworksConfig",function(t,a,e,r){var n=r.getApiAbsUrl("/analytics/users/:userId"),o=e(["widgets.from","widgets.to"]),i=t(n,{userId:"@userId"},{get:{method:"GET",transformResponse:[angular.fromJson,o]},update:{method:"PUT"}});return{get:function(t){return i.get(t).$promise},save:function(t,a){return i.update(t,a).$promise}}}])},RnuU:function(t,a){t.exports='<div> <ng-form name="$ctrl.widgetToolbarForm" class="ff-grid"> <chart-by-period flex="none" period="$ctrl.params.byPeriod"></chart-by-period> <ff-static flex="auto"></ff-static> <chart-period flex="0 1 auto" period="$ctrl.params.period" from="$ctrl.params.from" to="$ctrl.params.to"></chart-period> </ng-form> <chart config="$ctrl.chart" ff-dim="$ctrl.spin"></chart> </div> '},WuxP:function(t,a,e){"use strict";e.r(a);e("3dw1");var r=e("03wM"),n=e.n(r),o=e("Ekwr"),i=e.n(o),s=e("hsT8"),c=e.n(s),l=e("lvz6"),d=e.n(l),u=e("yKah"),f=e.n(u),p=e("fzuT"),m=e.n(p),y=(e("JBxO"),e("FdtR"),e("QDQu")),g=e.n(y),h=e("CLLE"),b=e("G6E5"),v=e("6EsB"),C=e("Xp5u"),w=e("CgoQ"),$=e("d0as"),k=e("Q7d3"),A=e("DcLO"),P=e("OOrm");function I(t,a){var e=n()(t);if(i.a){var r=i()(t);a&&(r=c()(r).call(r,(function(a){return d()(t,a).enumerable}))),e.push.apply(e,r)}return e}function T(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?I(Object(e),!0).forEach((function(a){m()(t,a,e[a])})):f.a?Object.defineProperties(t,f()(e)):I(Object(e)).forEach((function(a){Object.defineProperty(t,a,d()(e,a))}))}return t}a.default=angular.module("deskworks.analyticsReservationSpaceUtilizationDirective",["debounce",h.a.name,b.a.name,C.a.name,w.a.name,v.default.name,$.default.name,k.default.name,A.a.name,P.a.name]).directive("analyticsReservationSpaceUtilization",(function(){return{template:g.a,restrict:"E",scope:!0,controller:"AnalyticsReservationSpaceUtilizationDirectiveCtrl as $ctrl",bindToController:{params:"<",centerId:"<"}}})).controller("AnalyticsReservationSpaceUtilizationDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","AnalyticsReservationSpaceUtilization","analyticsReservationSpaceUtilizationChart","analyticsReservationSpaceUtilizationChartUnits","optsChartByPeriod","optsChartPeriod",function(t,a,e,r,n,o,i,s,c,l,d,u){var f=this,p=i.paramsChanged;function m(t){f.params.selected=t}f.optsByPeriod=d,f.optsPeriod=u,f.data=null,f.$onInit=function(){t.$watch((function(){return T(T({},f.params),{},{centerId:f.centerId})}),o((function(t,e){f.params.period=f.params.period||"12months",f.params.byPeriod=f.params.byPeriod||"quarter",f.widgetToolbarForm.$invalid||(p(t,e,["byPeriod","from","to","centerId"])&&(f.data=null,f.params.selected=null),f.data=f.data||(f.spin=!0,s.get(T(T({},f.params),{},{centerId:f.centerId})).catch((function(t){return r.error(t,"Failed to query Reservation Space Utilization widget data.")})).finally((function(){f.spin=!1}))),a.all({data:f.data}).then((function(t){f.data=t.data})).then((function(){null!==f.params.selected?f.chart=l(T(T({},f.data),{},{params:f.params})):f.chart=c(T(T({},f.data),{},{params:f.params,onChartClick:m}))})))}),100),!0)}}])},XdOV:function(t,a,e){"use strict";e.r(a);var r=e("yCd9"),n=e.n(r),o=e("6RpP"),i=e.n(o),s=e("G6E5");e("bU+R");a.default=angular.module("deskworks.analyticsSalesByProductCategoryChart",[s.a.name]).factory("analyticsSalesByProductCategoryChart",["$filter","$rootScope","reportHelper",function(t,a,e){return function(e){var r=e.data,o=e.onChartClick;e.params;return{type:"pie",data:{labels:n()(r).call(r,(function(t){return t.name})),datasets:[{data:n()(r).call(r,(function(t){return t.totalPercentage}))}]},options:{tooltips:{displayColors:!0,callbacks:{label:function(a){var e,n,o=r[a.index],s=o.name,c=o.totalPercentage,l=o.total;return i()(e=i()(n="".concat(s,": ")).call(n,c,"% (")).call(e,t("ncurrency")(l),")")}}},layout:{padding:{top:15}},legend:{display:!0,position:"right"},onClick:function(t,e){a.$apply((function(t){var a=e[0]&&e[0]._index;angular.isNumber(a)&&o(a)}))}}}}}])},"Xh+F":function(t,a,e){"use strict";e.r(a);var r=e("4uyB"),n=e("ENWM"),o=e("p5aI"),i=e("NfJs"),s=e("WuxP"),c=e("qLGz");a.default=angular.module("deskworks.analyticsWidgetsList",[r.default.name,n.default.name,o.default.name,i.default.name,s.default.name,c.default.name]).factory("analyticsWidgetsList",(function(){return[{uid:"sales",_name:"ANALYTICS.WIDGET.SALES",template:"<analytics-sales></analytics-sales>"},{uid:"sales-by-product-category",_name:"ANALYTICS.WIDGET.SALES_BY_PRODUCT_CATEGORY",template:"<analytics-sales-by-product-category></analytics-sales-by-product-category>"},{uid:"income",_name:"ANALYTICS.WIDGET.INCOME",template:"<analytics-income></analytics-income>"},{uid:"recurring-billings",_name:"ANALYTICS.WIDGET.RECURRING_BILLINGS",template:"<analytics-recurring-billings></analytics-recurring-billings>"},{uid:"reservation-space-utilization",_name:"ANALYTICS.WIDGET.RESERVATION_SPACE_UTILIZATION",template:"<analytics-reservation-space-utilization></analytics-reservation-space-utilization>"},{uid:"occupancy-vacancy",_name:"ANALYTICS.WIDGET.OCCUPANCY_VACANCY",template:"<analytics-occupancy-vacancy></analytics-occupancy-vacancy>"}]}))},Xp5u:function(t,a,e){"use strict";e("3dw1");a.a=angular.module("deskworks.optsChartByPeriod",[]).factory("optsChartByPeriod",["$rootScope","$translate","$filter",function(t,a,e){var r=e("date"),n=[{id:"week",_name:"CHARTS.BY_PERIOD.WEEK",format:function(t,a){return r(t,"MMM d")+" - "+r(a,"MMM d")}},{id:"month",_name:"CHARTS.BY_PERIOD.MONTH",format:function(t,a){return r(t,"MMM")}},{id:"quarter",_name:"CHARTS.BY_PERIOD.QUARTER",format:function(t,a){return r(t,"MMM")+" - "+r(a,"MMM")}},{id:"year",_name:"CHARTS.BY_PERIOD.YEAR",format:function(t,a){return r(t,"yyyy")}}];function o(){n.forEach((function(t){t.name=a.instant(t._name)}))}return o(),t.$on("$setTranslationsSuccess",o),n}])},Z7iF:function(t,a,e){"use strict";e.r(a);var r=e("yCd9"),n=e.n(r),o=e("6RpP"),i=e.n(o),s=(e("bU+R"),e("aGVL"));a.default=angular.module("deskworks.analyticsSalesByProductCategoryDetailedChart",[s.a.name]).factory("analyticsSalesByProductCategoryDetailedChart",["$filter","chartColors",function(t,a){return function(e){var r=e.periods,o=e.data,s=e.params;o=o[s.selected];var c=n()(r).call(r,(function(t){return t.title})),l=[{data:o.totals,maxBarThickness:80,backgroundColor:a[s.selected]}],d=o.totals.reduce((function(t,a){return a<t.min&&(t.min=a),a>t.max&&(t.max=a),t}),{min:0,max:0});return{type:"bar",data:{labels:c,datasets:l},options:{tooltips:{callbacks:{label:function(a){var e,r=o,n=r.name,s=r.totals;return i()(e="".concat(n,": ")).call(e,t("ncurrency")(s[a.index]))}}},legend:{display:!1},scales:{yAxes:[{ticks:{min:d.min,max:d.max,callback:function(a){return t("ncurrency")(a,void 0,0)}}}]}}}}}])},aGVL:function(t,a,e){"use strict";a.a=angular.module("chartColors",[]).factory("chartColors",(function(){return["#317da3","#e6194b","#3cb44b","#ffe119","#f58231","#911eb4","#aa6e28","#008080","#808080","#800000","#3244a1","#e64c19","#3db372","#d1ff1a","#f5c131","#b31e81","#a89728","#005580","#806659","#804000"]}))},aOtR:function(t,a){t.exports='<div class="analytics-dashboard"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-spin ff-spin-placeholder" ng-if="!$ctrl.settings"></div> <div class="gutter-v" ng-if="$ctrl.settings"> <ff-panel ng-if="state.getUserCenters().length > 1"> <div> <label class="i-block"> <ff-checkbox ff-model="$ctrl.settings.allCenters"><span translate="ANALYTICS.ALL_CENTERS"></span></ff-checkbox> </label> <ff-hint><span translate="ANALYTICS.ALL_CENTERS.HINT"></span></ff-hint> </div> </ff-panel> <div> <div class="ff-grid gutter-h gutter-v" dnd-list dnd-drop="callback({ targetList: $ctrl.settings.widgets, targetIndex: index })"> <analytics-widget ng-repeat="widget in $ctrl.settings.widgets" widget="widget" center-id="$ctrl.getCenterId()" dnd-draggable="null" dnd-nodrag dnd-dragstart="$w.onDragStart(event)" dnd-dragend="$w.onDragEnd(event)" dnd-callback="$ctrl.onDrop($ctrl.settings.widgets, $index, targetList, targetIndex)"></analytics-widget> <div class="dndPlaceholder">Drop here.</div> <div class="analytics-dashboard-trash" title="{{\'ANALYTICS.BTN_TRASH\' | translate}}" dnd-list="[]" dnd-drop="callback({ targetList: null, targetIndex: index })"><i class="fa fa-trash"></i></div> </div> </div> <div> <div class="ff-grid gutter-h-half gutter-v-half"> <ng-form class="ff-row" flex="0 1 300px"> <label class="ff-row"> <ff-label flex="none">Add widget:</ff-label> <ff-select ff-model="$ctrl.widgetToAdd" ff-options="widget._name | translate for widget in $ctrl.widgetsList"></ff-select> </label> <ff-btn-group flex="none" class="buttons-row"> <ff-btn sense="add" size="xs" type="submit" ff-click="$ctrl.addWidget()" title="{{ \'GLOBAL.BTN_NEW\' | translate }}"></ff-btn> </ff-btn-group> </ng-form> <ff-btn-group flex="none"> <ff-btn sense="makeFavorite" ff-click="$ctrl.saveDefaults()" ff-disabled="$ctrl.isPristine()"> <span translate="ANALYTICS.BTN_SAVE_DEFAULTS"></span> </ff-btn> </ff-btn-group> </div> </div> </div> </div> '},"bG+q":function(t,a,e){},d0as:function(t,a,e){"use strict";e.r(a);var r=e("yCd9"),n=e.n(r),o=e("6RpP"),i=e.n(o),s=e("G6E5"),c=e("aGVL");e("bU+R");a.default=angular.module("deskworks.analyticsReservationSpaceUtilizationChart",[s.a.name,c.a.name]).factory("analyticsReservationSpaceUtilizationChart",["$filter","$translate","$rootScope","chartColors","reportHelper",function(t,a,e,r,o){return function(t){var a=t.periods,o=t.data,s=t.params,c=t.onChartClick;return{type:"bar",data:{labels:n()(a).call(a,(function(t){return t.title})),datasets:n()(o).call(o,(function(t,a){return{label:t.name,data:t.utilization,maxBarThickness:80,backgroundColor:r[a]}}))},options:{tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(t){var a,e,r,n=o[t.datasetIndex],s=n.name,c=n.utilization,l=n.usage,d=n.expected,u=t.index;return i()(a=i()(e=i()(r="".concat(s,": ")).call(r,c[u],"% (")).call(e,l[u]," of ")).call(a,d[u]," hr)")}}},layout:{padding:{top:15}},legend:{display:!0,position:s.wide?"right":"bottom"},scales:{yAxes:[{ticks:{min:0,max:100,callback:function(t){return"".concat(t,"%")}}}]},onClick:function(t,a){var r=this;e.$apply((function(a){var e=r.getElementAtEvent(t)[0];e&&c(e._datasetIndex)}))}}}}}])},ggrz:function(t,a){t.exports='<label class="ff-row" style="min-width:190px"> <ff-label flex="none"><span translate="CHARTS.PERIOD"></span></ff-label> <ff-select ff-model="$ctrl.period" ff-options="opt.id as opt.name for opt in $ctrl.optsPeriod"></ff-select> </label> <ff-row style="z-index:1;margin-left:-108px" ng-style="{ \'min-width\': $ctrl.period === \'custom\' ? \'300px\' : \'none\' }"> <label class="ff-row" flex="0 1 158px" ng-if="$ctrl.period === \'custom\'"> <ff-label flex="none"><span translate="CHARTS.FROM"></span></ff-label> <ff-date name="from" ff-model="$ctrl.from" monthly="true" ff-required="true" ff-validate-alert="{{\'CHARTS.FROM\' | translate}}"></ff-date> </label> <label class="ff-row" flex="0 1 140px" ng-if="$ctrl.period === \'custom\'"> <ff-label flex="none"><span translate="CHARTS.TO"></span></ff-label> <ff-date name="to" ff-model="$ctrl.to" monthly="true" ff-required="true" ff-validate-alert="{{\'CHARTS.TO\' | translate}}"></ff-date> </label> </ff-row> '},gq4Z:function(t,a,e){},jd5N:function(t,a,e){"use strict";var r=e("gQJ2"),n=e.n(r);a.a=angular.module("keese",[]).factory("keese",(function(){var t="0123456789?@ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a=t.length,e=function(){for(var a={},e=0;e<t.length;e++)a[t[e]]=e;return a}();return{generate:function(t,a,e){return e?o(t,a,e):r(t,a)}};function r(t,a){return t?a?i(t,a):((e=c(t)).digits=e.digits.substr(0,e.order_length+1),s(e,c("1"))):a?i("0",a):"1";var e}function o(t,a,e){var n=new Array(e);if(e>0)if(a)!function t(a,e,o,i){var s=Math.floor((o+i)/2),c=r(a,e);n[s]=c,o<s&&t(a,c,o,s);s+1<i&&t(c,e,s+1,i)}(t,a,0,e);else for(var o=0;o<e;o++){var i=keese(t,null);n[o]=i,t=i}return n}function i(r,o){if(r>o)throw new Error("assertion failed: "+n()(r)+" < "+n()(o));var i=c(r),u=c(o);d(i,u);for(var f=0,p=Math.max(i.digits.length,u.digits.length),m=0;m<p||f>0;m++){var y=e[i.digits[m]]||0,g=f+(e[u.digits[m]]||0);if(y!==g){if(y!==g-1){for(var h=Math.floor((g-y)/2),b="",v=0;v<m;v++)b+="0";b+=t[h];var C=c(l(i.order_length,b));return i.digits=i.digits.substr(0,m+1),s(i,C)}f=a}}throw new Error}function s(r,n){d(r,n);for(var o="",i=r.order_length,s=0,c=Math.max(r.digits.length,n.digits.length)-1;c>=0;c--)s+=e[r.digits[c]]||0,s+=e[n.digits[c]]||0,o=t[s%a]+o,s=Math.floor(s/a);for(;s>0;)o=t[s%a]+o,s=Math.floor(s/a),i++;return l(i,o)}function c(t){var a=t.lastIndexOf("~")+1;return{order_length:a,digits:t.substr(a)}}function l(t,a){for(;t>0&&"0"==a.charAt(0);)a=a.substr(1),t--;for(var e="",r=0;r<t;r++)e+="~";return e+a}function d(t,a){u(t,a.order_length),u(a,t.order_length)}function u(t,a){for(;t.order_length<a;)t.digits="0"+t.digits,t.order_length++}}))},jwnm:function(t,a){t.exports='<div> <ng-form name="$ctrl.widgetToolbarForm" class="ff-grid"> <chart-by-period flex="none" period="$ctrl.params.byPeriod"></chart-by-period> <ff-static flex="auto"> <ff-hint ng-if="$ctrl.params.selected === null"><span translate="ANALYTICS.WIDGET.OCCUPANCY_VACANCY.HINT"></span></ff-hint> <ff-btn sense="back" size="sm" ng-if="$ctrl.params.selected !== null" ff-click="$ctrl.params.selected = null"> <span translate="GLOBAL.BTN_BACK"></span> </ff-btn> </ff-static> <chart-period flex="0 1 auto" period="$ctrl.params.period" from="$ctrl.params.from" to="$ctrl.params.to"></chart-period> </ng-form> <chart config="$ctrl.chart" ff-dim="$ctrl.spin"></chart> </div> '},oCA5:function(t,a,e){"use strict";e.r(a);var r=e("yCd9"),n=e.n(r),o=e("6RpP"),i=e.n(o),s=e("G6E5"),c=e("aGVL");e("bU+R");a.default=angular.module("deskworks.analyticsOccupancyVacancyChart",[s.a.name,c.a.name]).factory("analyticsOccupancyVacancyChart",["$rootScope","$filter","$translate","chartColors","reportHelper",function(t,a,e,r,o){return function(a){var e=a.periods,o=a.data,s=a.params,c=a.onChartClick;return{type:"bar",data:{labels:n()(e).call(e,(function(t){return t.title})),datasets:n()(o).call(o,(function(t,a){return{label:t.name,data:t.totals,maxBarThickness:80,backgroundColor:r[a]}}))},options:{tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(t){var a,e=o[t.datasetIndex],r=e.name,n=e.totals;return i()(a="".concat(r,": ")).call(a,n[t.index],"%")}}},layout:{padding:{top:15}},legend:{display:!0,position:s.wide?"right":"bottom"},scales:{yAxes:[{ticks:{min:0,max:100,callback:function(t){return"".concat(t,"%")}}}]},onClick:function(a,e){var r=this;t.$apply((function(t){var e=r.getElementAtEvent(a)[0];e&&c(e._datasetIndex)}))}}}}}])},p5aI:function(t,a,e){"use strict";e.r(a);e("3dw1");var r=e("03wM"),n=e.n(r),o=e("Ekwr"),i=e.n(o),s=e("hsT8"),c=e.n(s),l=e("lvz6"),d=e.n(l),u=e("yKah"),f=e.n(u),p=e("fzuT"),m=e.n(p),y=(e("JBxO"),e("FdtR"),e("RnuU")),g=e.n(y),h=e("CLLE"),b=e("G6E5"),v=e("2Bp7"),C=e("Xp5u"),w=e("CgoQ"),$=e("O7bB"),k=e("DcLO"),A=e("OOrm");function P(t,a){var e=n()(t);if(i.a){var r=i()(t);a&&(r=c()(r).call(r,(function(a){return d()(t,a).enumerable}))),e.push.apply(e,r)}return e}function I(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?P(Object(e),!0).forEach((function(a){m()(t,a,e[a])})):f.a?Object.defineProperties(t,f()(e)):P(Object(e)).forEach((function(a){Object.defineProperty(t,a,d()(e,a))}))}return t}a.default=angular.module("deskworks.analyticsIncomeDirective",["debounce",h.a.name,b.a.name,C.a.name,w.a.name,v.default.name,$.default.name,k.a.name,A.a.name]).directive("analyticsIncome",(function(){return{template:g.a,restrict:"E",scope:!0,controller:"AnalyticsIncomeDirectiveCtrl as $ctrl",bindToController:{params:"<",centerId:"<"}}})).controller("AnalyticsIncomeDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","AnalyticsIncome","analyticsIncomeChart","optsChartByPeriod","optsChartPeriod",function(t,a,e,r,n,o,i,s,c,l,d){var u=this,f=i.paramsChanged;u.optsByPeriod=l,u.optsPeriod=d,u.data=null,u.$onInit=function(){t.$watch((function(){return I(I({},u.params),{},{centerId:u.centerId})}),o((function(t,e){u.params.period=u.params.period||"12months",u.params.byPeriod=u.params.byPeriod||"month",u.widgetToolbarForm.$invalid||(f(t,e,["byPeriod","from","to","centerId"])&&(u.data=null),u.data=u.data||(u.spin=!0,s.get(t).catch((function(t){return r.error(t,"Failed to query Income widget data.")})).finally((function(){u.spin=!1}))),a.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){u.chart=c(I(I({},u.data),{},{params:u.params}))})))}),100),!0)}}])},pl6f:function(t,a,e){"use strict";a.a=angular.module("systemColors",["deskworks.helper"]).factory("systemColors",["$window","helper",function(t,a){var e={},r=angular.element('<div style="display: none"></div>');return r.append('<div class="text-text"></div>'),r.append('<div class="text-brand"></div>'),r.append('<div class="text-brand"></div>'),r.append('<div class="text-danger"></div>'),r.append("<div></div>"),r.append('<div class="sidebar-group-header"></div>'),document.body.appendChild(r[0]),e.text=a.rgb2hex(t.getComputedStyle(r.children()[0]).getPropertyValue("color"))||"#444",e.info=a.rgb2hex(t.getComputedStyle(r.children()[4]).getPropertyValue("color"))||"#4d4e4c",e.primary=a.rgb2hex(t.getComputedStyle(r.children()[5]).getPropertyValue("background-color"))||"#949594",e.warning=a.rgb2hex(t.getComputedStyle(r.children()[3]).getPropertyValue("color"))||"#ff9b00",r.remove(),e}])},qLGz:function(t,a,e){"use strict";e.r(a);e("3dw1");var r=e("03wM"),n=e.n(r),o=e("Ekwr"),i=e.n(o),s=e("hsT8"),c=e.n(s),l=e("lvz6"),d=e.n(l),u=e("yKah"),f=e.n(u),p=e("fzuT"),m=e.n(p),y=(e("JBxO"),e("FdtR"),e("jwnm")),g=e.n(y),h=e("CLLE"),b=e("G6E5"),v=e("G6gN"),C=e("Xp5u"),w=e("CgoQ"),$=e("oCA5"),k=e("9pnN"),A=e("DcLO"),P=e("OOrm");function I(t,a){var e=n()(t);if(i.a){var r=i()(t);a&&(r=c()(r).call(r,(function(a){return d()(t,a).enumerable}))),e.push.apply(e,r)}return e}function T(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?I(Object(e),!0).forEach((function(a){m()(t,a,e[a])})):f.a?Object.defineProperties(t,f()(e)):I(Object(e)).forEach((function(a){Object.defineProperty(t,a,d()(e,a))}))}return t}a.default=angular.module("deskworks.analyticsOccupancyVacancyDirective",["debounce",h.a.name,b.a.name,C.a.name,w.a.name,v.default.name,$.default.name,k.default.name,A.a.name,P.a.name]).directive("analyticsOccupancyVacancy",(function(){return{template:g.a,restrict:"E",scope:!0,controller:"AnalyticsOccupancyVacancyDirectiveCtrl as $ctrl",bindToController:{params:"<",centerId:"<"}}})).controller("AnalyticsOccupancyVacancyDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","AnalyticsOccupancyVacancy","analyticsOccupancyVacancyChart","analyticsOccupancyVacancyChartUnits","optsChartByPeriod","optsChartPeriod",function(t,a,e,r,n,o,i,s,c,l,d,u){var f=this,p=i.paramsChanged;function m(t){f.params.selected=t}f.optsByPeriod=d,f.optsPeriod=u,f.data=null,f.$onInit=function(){t.$watch((function(){return T(T({},f.params),{},{centerId:f.centerId})}),o((function(t,e){f.params.period=f.params.period||"12months",f.params.byPeriod=f.params.byPeriod||"quarter",f.widgetToolbarForm.$invalid||(p(t,e,["byPeriod","from","to","centerId"])&&(f.data=null,f.params.selected=null),f.data=f.data||(f.spin=!0,s.get(t).catch((function(t){return r.error(t,"Failed to query Occupancy Vacancy widget data.")})).finally((function(){f.spin=!1}))),a.all({data:f.data}).then((function(t){f.data=t.data})).then((function(){null!==f.params.selected?f.chart=l(T(T({},f.data),{},{params:f.params})):f.chart=c(T(T({},f.data),{},{params:f.params,onChartClick:m}))})))}),100),!0)}}])},qbH2:function(t,a,e){"use strict";e.r(a);var r=e("ipr/"),n=e.n(r),o=e("KK/u"),i=e.n(o),s=e("yCd9"),c=e.n(s),l=e("6RpP"),d=e.n(l),u=e("G6E5"),f=e("aGVL");e("bU+R");a.default=angular.module("deskworks.analyticsRecurringBillingsChart",[u.a.name,f.a.name]).factory("analyticsRecurringBillingsChart",["$filter","$translate","chartColors","reportHelper",function(t,a,e,r){return function(o){var s,l,u=o.periods,f=o.data,p=o.totals,m=o.params;f=n()(s=i()(r).call(r,f,"total",!0)).call(s,0,12);var y=c()(u).call(u,(function(t){return t.title})),g=d()(l=c()(f).call(f,(function(t,a){return{label:t.name,data:t.totals,backgroundColor:e[a],maxBarThickness:80}}))).call(l,[{label:a.instant("GLOBAL.TOTAL"),data:c()(p).call(p,(function(t){return 0})),backgroundColor:"transparent",maxBarThickness:80}]);return{type:"bar",data:{labels:y,datasets:g},options:{tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(a,e){var r=e.datasets[a.datasetIndex];return r.label+": "+t("ncurrency")(a.datasetIndex<g.length-1?r.data[a.index]:p[a.index])}}},layout:{padding:{top:15}},legend:{display:!0,position:m.wide?"right":"bottom"},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{min:0,callback:function(a){return t("ncurrency")(a,void 0,0)}}}]}}}}}])},r970:function(t,a){t.exports='<ff-panel> <ff-panel-header class="ff-row"> <span translate="{{$w.config._name}}"></span> <div class="analytics-widget-toolbar"> <ff-btn sense="widen" size="xs" class="ff-btn-icon" ff-click="$w.widget.wide = !$w.widget.wide" title="{{\'ANALYTICS.WIDE\' | translate}}"></ff-btn> <ff-btn sense="drag" size="xs" class="ff-btn-icon" dnd-handle title="{{\'ANALYTICS.DRAG_N_DROP\' | translate}}"></ff-btn> </div> </ff-panel-header> <div class="analytics-widget-body"></div> </ff-panel> '},t0IE:function(t,a){t.exports='<div> <ng-form name="$ctrl.widgetToolbarForm" class="ff-grid"> <chart-by-period flex="none" period="$ctrl.params.byPeriod"></chart-by-period> <ff-static flex="auto"> <ff-hint><span translate="ANALYTICS.WIDGET.RECURRING_BILLINGS.HINT"></span></ff-hint> </ff-static> <chart-period flex="0 1 auto" period="$ctrl.params.period" from="$ctrl.params.from" to="$ctrl.params.to"></chart-period> </ng-form> <chart config="$ctrl.chart" ff-dim="$ctrl.spin"></chart> </div> '},va6R:function(t,a,e){},xlJL:function(t,a,e){"use strict";e.r(a);e("3dw1");var r=e("nbuU"),n=e.n(r),o=e("yCd9"),i=e.n(o),s=e("Xp5u");a.default=angular.module("deskworks.AnalyticsRecurringBillings",["ngResource","datesDeserializer","deskworks.config",s.a.name]).factory("AnalyticsRecurringBillings",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,r,o,s,c){var l=r(["periods.from","periods.to"]),d=t(o.getApiAbsUrl("/analytics/recurring-billings"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,l]}});return{get:function(t){return d.get({centerId:t.centerId||null,byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd"),to:a("date")(t.to,"yyyy-MM-dd")}).$promise.then((function(a){return function(t){var a,e=t.data,r=t.params.byPeriod,o=void 0===r?"month":r,l=n()(c).call(c,(function(t){return t.id===o}));return e.periods.forEach((function(t){t.title=l.format(t.from,t.to)})),e.totals=i()(a=e.periods).call(a,(function(t,a){return s.round(e.data.reduce((function(t,e){return t+e.totals[a]}),0))})),e.data.forEach((function(t){t.total=s.round(t.totals.reduce((function(t,a){return t+a}),0))})),e}({data:a,params:t})}))}}}])}}]);