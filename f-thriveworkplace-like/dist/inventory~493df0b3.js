(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"+h8E":function(e,t,r){var n=r("CV/M");e.exports=n},"+xqF":function(e,t){e.exports='<form name=formResType id=reservationCategory ff-bulk-read-only> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class=gutter-v> <ff-panel> <label class=ff-row> <ff-label flex="0 1 200px"><req translate=RESERVATION_CATEGORIES.NAME></req></ff-label> <ff-text flex="1 1 400px" name=name ff-model=vm.category.name ff-required=true ff-validate-alert="{{\'RESERVATION_CATEGORIES.NAME\' | translate}}"></ff-text> </label> <ff-row> <ff-richtext ff-model=vm.category.description></ff-richtext> </ff-row> <label class=ff-row ng-repeat="customer in vm.cancellation"> <ff-label flex="0 1 350px"> <span> <span translate={{customer.notice}}></span> <ff-hint><span translate={{customer.hint}}></span></ff-hint> </span> </ff-label> <ff-select flex="0 0 52px" ff-model=customer.model ff-options="hours for hours in vm.hours"></ff-select> <ff-label><span translate=RESERVATION_CATEGORIES.HOURS></span></ff-label> </label> </ff-panel> <ff-btn-group> <ff-btn sense=save type=submit ff-click=vm.save(formResType) ff-disabled=formResType.$pristine> <span translate=GLOBAL.BTN_SAVE></span> </ff-btn> <ff-btn sense=remove ng-if="vm.category.id !== \'new\'" ff-click=vm.remove()><span translate=GLOBAL.BTN_DELETE></span></ff-btn> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> <ff-panel ng-if="vm.category.id !== \'new\'" ngf-drop="vm.uploadPhoto($files, $invalidFiles)" ngf-pattern="\'image/png,image/jpeg\'" ngf-drag-over-class=dragover> <ff-panel-header> <span translate=RESERVATION_CATEGORIES.PHOTOS.HEADER></span> <ff-hint><span translate=RESERVATION_CATEGORIES.PHOTOS.HINT></span></ff-hint> </ff-panel-header> <div class="ff-grid gutter-h-half"> <ff-col flex="{md: \'0 0 50%\'}" ng-repeat="photo in vm.category.photos"> <ff-img ff-src={{photo.url}} ff-alt={{vm.category.name}}></ff-img> <ff-btn-group style="margin:.5rem 0"> <ff-btn sense=edit size=xs title="{{\'GLOBAL.BTN_EDIT\' | translate}}" ff-spin=photo.spin ngf-select="vm.uploadPhoto($files, $invalidFiles, photo)" ngf-pattern="\'image/png,image/jpeg\'" accept=image/png,image/jpeg></ff-btn> <ff-btn sense=remove size=xs title="{{\'GLOBAL.BTN_DELETE\' | translate}}" ff-click=vm.removePhoto(photo)></ff-btn> </ff-btn-group> </ff-col> </div> <ff-btn-group> <ff-btn sense=add size=sm ngf-select="vm.uploadPhoto($files, $invalidFiles)" ff-spin=vm.spinAddPhoto ngf-pattern="\'image/png,image/jpeg\'" accept=image/png,image/jpeg><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </ff-panel> </div> </form> '},"1Kfe":function(e,t){e.exports='<div class=membership-categories ff-bulk-read-only> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class=gutter-v> <ff-panel style=max-width:600px> <ff-header> <ff-row> <cell><span translate=MEMBERSHIP_CATEGORIES.LIST.HEADER></span></cell> <ff-hint flex=none ng-if=ffBlock.editMode><span translate=MEMBERSHIP_CATEGORIES.LIST.HINT></span></ff-hint> </ff-row> </ff-header> <span ng-if=!vm.membershipCategories.length translate=MEMBERSHIP_CATEGORIES.LIST.EMPTY></span> <div ng-if=ffBlock.editMode dnd-list dnd-drop="callback({ targetList: vm.membershipCategories, targetIndex: index })"> <ff-row ng-repeat="category in vm.membershipCategories" dnd-draggable=null ff-dim=category.$spin dnd-callback="vm.onDrop(vm.membershipCategories, $index, targetList, targetIndex)" ng-include="\'membershipCategoryTpl\'"> </ff-row> </div> <div ng-if=!ffBlock.editMode> <ff-row ng-repeat="category in vm.membershipCategories" ng-include="\'membershipCategoryTpl\'"></ff-row> </div> </ff-panel> <ff-btn-group> <ff-btn sense=new ff-click=vm.new()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </div> </div> <script type=text/ng-template id=membershipCategoryTpl> <ff-static ff-bind="category.name"></ff-static>\n\n  <ff-btn-group flex="none" class="buttons-row">\n    <ff-btn sense="edit" size="xs" ff-click="vm.edit(category)"><span translate="GLOBAL.BTN_EDIT"></span></ff-btn>\n  </ff-btn-group> <\/script> '},"7n+d":function(e,t){e.exports='<div class=dw-modal> <div class=dw-modal-fade ng-click=close()></div> <form name=form class=dw-modal-dialog novalidate id=discountCodeEdit style=max-width:500px> <div class=ff-grid> <ff-header><span translate=DISCOUNT_CODES.EDIT.PAGE_TITLE></span></ff-header> <label flex="{sm: \'1 0 50%\'}" class=ff-row> <ff-label flex="0 0 100px"><req translate=DISCOUNT_CODES.CODE></req></ff-label> <ff-text name=code ff-model=$ctrl.code.code autofocus ff-required=true ff-validate-alert="{{ \'DISCOUNT_CODES.CODE\' | translate }}"></ff-text> </label> <label flex="{sm: \'0 0 100px\'}" class=ff-row> <ff-label flex="{xs: \'0 0 90px\', sm: \'0 0 50px\'}"><span translate=DISCOUNT_CODES.TYPE></span></ff-label> <ff-select name=type ff-model=$ctrl.code.type ff-options="opt for opt in $ctrl.types"></ff-select> </label> <label class=ff-row> <ff-label flex="0 0 100px"><req translate=DISCOUNT_CODES.DESCRIPTION></req></ff-label> <ff-text name=description ff-model=$ctrl.code.description ff-required=true ff-validate-alert="{{ \'DISCOUNT_CODES.DESCRIPTION\' | translate }}"></ff-text> </label> <label flex="{sm: \'1 0 50%\'}" class=ff-row> <ff-label flex="0 0 100px"> <span> <req translate=DISCOUNT_CODES.AMOUNT></req> <ff-hint><span translate=DISCOUNT_CODES.AMOUNT.HINT></span></ff-hint> </span> </ff-label> <ff-price flex="0 0 50px" name=amount ff-model=$ctrl.code.amount ff-required=true ff-validate-alert="{{ \'DISCOUNT_CODES.AMOUNT\' | translate }}"></ff-price> <ff-static></ff-static> </label> <label flex="{sm: \'1 0 50%\'}" class=ff-row> <ff-label flex="0 0 100px"> <span> <req translate=DISCOUNT_CODES.DURATION></req> <ff-hint><span translate=DISCOUNT_CODES.DURATION.HINT></span></ff-hint> </span> </ff-label> <ff-number flex="0 0 50px" name=duration ff-model=$ctrl.code.duration ff-required=true ff-validate-alert="{{ \'DISCOUNT_CODES.DURATION\' | translate }}"></ff-number> <ff-static></ff-static> </label> <label flex="{sm: \'1 0 50%\'}" class=ff-row> <ff-label flex="0 0 100px"> <span> <req translate=DISCOUNT_CODES.START_DATE></req> <ff-hint><span translate=DISCOUNT_CODES.START_DATE.HINT></span></ff-hint> </span> </ff-label> <ff-date name=startDate ff-model=$ctrl.code.startDate ff-required=true ff-validate-alert="{{ \'DISCOUNT_CODES.START_DATE\' | translate }}"></ff-date> </label> <label flex="{sm: \'1 0 50%\'}" class=ff-row> <ff-label flex="0 0 100px"><req translate=DISCOUNT_CODES.END_DATE></req></ff-label> <ff-date name=endDate ff-model=$ctrl.code.endDate ff-required=true ff-validate-alert="{{ \'DISCOUNT_CODES.END_DATE\' | translate }}"></ff-date> </label> <ff-row> <ff-label flex="0 0 100px"><span translate=DISCOUNT_CODES.APPLY_TO></span></ff-label> <ff-static> <span ng-if=!$ctrl.code.productIds.length translate=DISCOUNT_CODES.ALL_MEMBERSHIPS></span> <span ng-if=$ctrl.code.productIds.length translate=DISCOUNT_CODES.SELECTED_MEMBERSHIPS></span> </ff-static> <ff-btn-group flex=none class=buttons-row> <ff-btn sense=new size=xs ff-click=$ctrl.add() title="{{\'GLOBAL.BTN_NEW\' | translate}}"></ff-btn> </ff-btn-group> </ff-row> <ff-row ng-if=$ctrl.code.productIds.length> <ff-static flex="0 0 100px"></ff-static> <ff-col> <ff-row ng-repeat="prodId in $ctrl.code.productIds track by $index"> <ff-select ff-model=$ctrl.code.productIds[$index] ff-required=true ff-validate-alert="{{\'DISCOUNT_CODES.MEMBERSHIP\' | translate}}" ff-options="p.id as p.name for p in $ctrl.getProducts(prodId)"></ff-select> <ff-btn-group flex=none class=buttons-row> <ff-btn sense=delete size=xs ff-click=$ctrl.delete($index) title="{{\'GLOBAL.BTN_DELETE\' | translate}}"></ff-btn> </ff-btn-group> </ff-row> </ff-col> </ff-row> <ff-btn-group class=ff-tmargin> <ff-btn sense=cancel ff-click=close(false)><span translate=GLOBAL.BTN_CANCEL></span></ff-btn> <ff-btn type=submit sense=ok ff-click=$ctrl.save() ff-disabled=form.$pristine><span translate=GLOBAL.BTN_SAVE></span></ff-btn> </ff-btn-group> </div> </form> </div> '},"7v6b":function(e,t,r){e.exports=r("M381")},BQwv:function(e,t){e.exports='<script type=text/ng-template id=productListTpl> <ff-panel>\n    <ff-panel-header>{{productType.name}}</ff-panel-header>\n    <div class="ff-grid">\n      <span ng-if="!productType.products.length" translate="PRODUCTS.LIST.EMPTY"></span>\n\n      <ff-header ng-if="productType.products.length" flex="{md: \'0 0 49.5%\'}">\n        <ff-row>\n          <cell flex="1 0 60px" class="ff-center"><span translate="PRODUCTS.CODE"></span></cell>\n          <cell flex="1 1 400px"><span translate="PRODUCTS.PRODUCT"></span></cell>\n          <ff-btn sense="edit" size="xs" flex="none" class="buttons-row zero-height" title="{{\'GLOBAL.BTN_EDIT\' | translate }}"></ff-btn>\n        </ff-row>\n      </ff-header>\n      <ff-header ng-if="productType.products.length" flex="{md: \'0 0 49.5%\'}" class="show-md">\n        <ff-row>\n          <cell flex="1 0 60px" class="ff-center"><span translate="PRODUCTS.CODE"></span></cell>\n          <cell flex="1 1 400px"><span translate="PRODUCTS.PRODUCT"></span></cell>\n          <ff-btn sense="edit" size="xs" flex="none" class="buttons-row zero-height" title="{{\'GLOBAL.BTN_EDIT\' | translate }}"></ff-btn>\n        </ff-row>\n      </ff-header>\n\n      <ff-row ng-repeat="product in productType.products" flex="{md: \'0 0 49.5%\'}">\n        <ff-static flex="1 0 60px" class="ff-center" ff-bind="product.code"></ff-static>\n        <ff-static flex="1 1 400px" ff-bind="product.name"></ff-static>\n        <ff-btn sense="edit" size="xs" flex="none" class="buttons-row" title="{{\'GLOBAL.BTN_EDIT\' | translate}}" ff-click="vm.edit(product)"></ff-btn>\n      </ff-row>\n    </div>\n  </ff-panel> <\/script> <div class=product-list ff-bulk-read-only> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class=gutter-v> <ff-btn-group ng-show="vm.productTypes.length > 0"> <ff-btn sense=new ff-click=vm.new()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> <div ng-include="\'productListTpl\'" ng-repeat="productType in vm.productTypes"></div> <div> <ff-btn sense=collapse ff-click="vm.collapsed = !vm.collapsed" class=ff-bmargin ng-class="{ collapsed: vm.collapsed }" ng-if="vm.customProducts.products.length > 0"><span translate=PRODUCTS.LIST.CUSTOM></span></ff-btn> <div class=custom-products ng-collapse=vm.collapsed ng-if="vm.customProducts.products.length > 0"> <div ng-include="\'productListTpl\'" ng-init="productType = vm.customProducts"></div> </div> </div> <ff-btn-group> <ff-btn sense=new ff-click=vm.new()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </div> </div> '},"CV/M":function(e,t,r){r("sSYk");var n=r("/ZBe").Object,a=e.exports=function(e,t){return n.defineProperties(e,t)};n.defineProperties.sham&&(a.sham=!0)},DDl7:function(e,t,r){r("h2hn");var n=r("/ZBe").Object,a=e.exports=function(e,t,r){return n.defineProperty(e,t,r)};n.defineProperty.sham&&(a.sham=!0)},DJNU:function(e,t){e.exports='<div id=discountCodes ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v style=max-width:1024px> <ff-panel> <ff-header ng-if="$ctrl.codes.length && $ctrl.firstExpiredIdx > 0"> <ff-row> <cell flex="2 1 80px"><span translate=DISCOUNT_CODES.ACTIVE_CODES></span></cell> <cell flex="2 1 100px" class=show-sm><span translate=DISCOUNT_CODES.DESCRIPTION></span></cell> <cell flex="0 1 80px" class=ff-right><span translate=DISCOUNT_CODES.AMOUNT></span></cell> <cell flex="0 1 75px" class=ff-center><span translate=DISCOUNT_CODES.DURATION></span></cell> <cell flex="0 1 120px" class="ff-right show-md"><span translate=DISCOUNT_CODES.START_DATE></span></cell> <cell flex="0 1 120px" class="ff-right show-md"><span translate=DISCOUNT_CODES.END_DATE></span></cell> <ff-btn-group flex=none class="buttons-row zero-height"> <ff-btn sense=edit size=xs></ff-btn> <ff-btn sense=delete size=xs></ff-btn> </ff-btn-group> </ff-row> </ff-header> <ff-col infinite-scroll=$ctrl.fetch() infinite-scroll-distance=2 infinite-scroll-container="\'.snap-content-scroller\'"> <ff-header ng-repeat-start="code in $ctrl.codes" ng-if="$index === $ctrl.firstExpiredIdx" style=margin-top:.5rem> <ff-row> <cell flex="2 1 80px"><span translate=DISCOUNT_CODES.EXPIRED_CODES></span></cell> <cell flex="2 1 100px" class=show-sm><span translate=DISCOUNT_CODES.DESCRIPTION></span></cell> <cell flex="0 1 80px" class=ff-right><span translate=DISCOUNT_CODES.AMOUNT></span></cell> <cell flex="0 1 75px" class=ff-center><span translate=DISCOUNT_CODES.DURATION></span></cell> <cell flex="0 1 120px" class="ff-right show-md"><span translate=DISCOUNT_CODES.START_DATE></span></cell> <cell flex="0 1 120px" class="ff-right show-md"><span translate=DISCOUNT_CODES.END_DATE></span></cell> <ff-btn-group flex=none class="buttons-row zero-height"> <ff-btn sense=edit size=xs></ff-btn> <ff-btn sense=delete size=xs></ff-btn> </ff-btn-group> </ff-row> </ff-header> <ff-row ng-repeat-end> <ff-static flex="2 1 80px">{{code.code}}</ff-static> <ff-static flex="2 1 100px" class=show-sm>{{code.description}}</ff-static> <ff-static flex="0 1 80px" class=ff-right>{{code.type === \'%\' ? code.amount + \'%\' : code.amount | ncurrency}}</ff-static> <ff-static flex="0 1 75px" class=ff-center>{{code.duration}}</ff-static> <ff-static flex="0 1 120px" class="ff-right show-md">{{code.startDate | date: \'mediumDate\'}}</ff-static> <ff-static flex="0 1 120px" class="ff-right show-md">{{code.endDate | date: \'mediumDate\'}}</ff-static> <ff-btn-group flex=none class=buttons-row> <ff-btn sense=edit size=xs ff-click=$ctrl.edit(code) title="{{\'GLOBAL.BTN_EDIT\' | translate}}"></ff-btn> <ff-btn sense=delete size=xs ff-click=$ctrl.delete(code) title="{{\'GLOBAL.BTN_DELETE\' | translate}}"></ff-btn> </ff-btn-group> </ff-row> <div class="ff-spin ff-spin-placeholder" ng-if=$ctrl.fetching></div> </ff-col> <ff-row ng-if="!$ctrl.codes.length && !$ctrl.fetching" class=ff-no-frame> <ff-label>{{\'GLOBAL.NONE\' | translate}}</ff-label> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=new ff-click=$ctrl.new()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </div> </div> '},EgkG:function(e,t,r){"use strict";r.r(t);r("JBxO"),r("FdtR");var n=r("0zKI"),a=r.n(n);t.default=angular.module("deskworks.ProductCategoriesCtrl",["debounce","deskworks.ProductCategory"]).controller("ProductCategoriesCtrl",["$scope","$translate","dwAlerts","state","helper","debounce","categories","ProductCategory",function(e,t,r,n,f,s,l,i){var o=this;n.setPageTitle(t.instant("PRODUCT_CATEGORIES.PAGE_TITLE")),o.categories=l,o.save=s((function(e,t,n){if(t.$invalid)return;return e.$$spin=!0,i.save(e).catch((function(e){return r.error(e,"Failed to save product category.")})).finally((function(){e.$$spin=!1}))}),1e3),o.new=function(){return o.categories.push({})},o.delete=function(e,n){if(e.id){if(!confirm(t.instant("PRODUCT_CATEGORIES.CONFIRM_DELETE")))return;return e.$$spin=!0,i.delete(e.id).catch((function(e){return r.error(e,"Failed to delete product category.")})).then((function(){var e;return a()(e=o.categories).call(e,n,1)})).finally((function(){e.$$spin=!1}))}var f;a()(f=o.categories).call(f,n,1)}}])},Ekwr:function(e,t,r){e.exports=r("MK67")},GaQu:function(e,t){e.exports='<div class=reservation-type-list ff-bulk-read-only> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class=gutter-v> <ff-panel> <span ng-if=!vm.categories.length translate=RESERVATION_CATEGORIES.LIST.EMPTY></span> <ff-header ng-show=vm.categories.length> <ff-row> <cell flex="0 0 60%"> <span> <span translate=RESERVATION_CATEGORIES.LIST.CATEGORY></span> <ff-hint ng-if=ffBlock.editMode><span translate=RESERVATION_CATEGORIES.LIST.HINT></span></ff-hint> </span> </cell> <cell flex="0 1 40%" class=ff-center><span translate=RESERVATION_CATEGORIES.LIST.NOTICE></span></cell> <ff-btn size=xs flex=none class="buttons-row zero-height"></ff-btn> </ff-row> </ff-header> <div ng-if=ffBlock.editMode dnd-list dnd-drop="callback({ targetList: vm.categories, targetIndex: index })"> <ff-row ng-repeat="category in vm.categories" dnd-draggable=null dnd-callback="vm.onDrop(vm.categories, $index, targetList, targetIndex)" ff-dim=category.$spin ng-include="\'reservationCategoryTpl\'"> </ff-row> </div> <div ng-if=!ffBlock.editMode> <ff-row ng-repeat="category in vm.categories" ng-include="\'reservationCategoryTpl\'"></ff-row> </div> </ff-panel> <ff-btn-group> <ff-btn sense=new ff-click=vm.new()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </div> </div> <script type=text/ng-template id=reservationCategoryTpl> <ff-static flex="0 0 60%" ff-bind="category.name"></ff-static>\n  <ff-static flex="0 1 40%" class="ff-center">\n    {{category.cancellationNonMemberNoticeHours | nd}} / {{category.cancellationMemberNoticeHours | nd}}\n  </ff-static>\n  <ff-btn sense="edit" size="xs" flex="none" class="buttons-row" title="{{\'GLOBAL.BTN_EDIT\' | translate}}" ff-click="vm.edit(category)"></ff-btn> <\/script> '},HGI2:function(e,t,r){r("BZMQ");var n=r("/ZBe");e.exports=n.Object.getOwnPropertySymbols},LPPa:function(e,t,r){r("YpQb");var n=r("/ZBe");e.exports=n.Object.getOwnPropertyDescriptors},LnCy:function(e,t){e.exports='<div class=gutter-v> <form name=vm.form id=priceListEdit ff-bulk-read-only> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <ff-panel flex="{lg: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 160px"><req translate=PRICE_LISTS.NAME></req></ff-label> <ff-text flex="1 1 200px" ff-model=vm.priceList.name ff-required=true ff-validate-alert="{{\'PRICE_LISTS.NAME\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 160px"><req translate=PRICE_LISTS.USE_FOR></req></ff-label> <ff-select flex="1 1 200px" ff-model=vm.priceList.useFor ff-required=true ff-validate-alert="{{\'PRICE_LISTS.USE_FOR\' | translate}}" ff-options="opt.name for opt in vm.useForOptions"></ff-select> </label> <div class="ff-grid gutter-h-half"> <label flex=none> <ff-checkbox ff-model=vm.priceList.visibleForVisitors ff-label="{{\'PRICE_LISTS.VISIBLE_FOR_VISITORS_DURING_RESERVATION\' | translate}}"></ff-checkbox> </label> <ff-row flex=none> <label flex=none> <ff-checkbox ff-model=vm.priceList.isArchived>{{\'PRICE_LISTS.ARCHIVED\' | translate}}</ff-checkbox> </label> <ff-static class=ff-no-frame><ff-hint>{{\'PRICE_LISTS.ARCHIVED.HINT\' | translate}}</ff-hint></ff-static> </ff-row> </div> </ff-panel> <ff-panel flex="{lg: \'0 0 50%\'}" ng-if=vm.priceList.date class=ff-flex-start> <label class=ff-row> <ff-label flex="0 1 100px"><span translate=PRICE_LISTS.LAST_UPDATE></span></ff-label> <ff-static ff-bind="vm.priceList.date | date:\'mediumDate\'"></ff-static> </label> </ff-panel> <ff-btn-group> <ff-btn sense=save type=submit ff-click=vm.save() ff-disabled=vm.form.$pristine> <span translate=GLOBAL.BTN_SAVE></span> </ff-btn> <ff-btn sense=remove ff-click=vm.remove() ng-if="vm.priceList.id !== \'new\'"> <span translate=GLOBAL.BTN_DELETE></span> </ff-btn> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> </div> </form> <ff-panel ng-repeat="productType in vm.productTypes" id=productType-{{productType.id}} ff-bulk-read-only ng-if="vm.priceList.id !== \'new\'"> <ff-panel-header>{{productType.name}}</ff-panel-header> <span ng-if=!productType.products.length translate=GLOBAL.NONE></span> <ff-btn-group class=ff-section-buttons> <ff-btn sense=add size=sm ff-click=vm.addProduct(productType)> <span translate=PRICE_LISTS.PRODUCTS.BTN_ADD></span> </ff-btn> </ff-btn-group> <ff-header ng-show="productType.products.length > 0"> <ff-row> <cell><req translate=PRICE_LISTS.PRODUCTS.PRODUCT></req></cell> <cell flex="0 0 60px" class=ff-right><req translate=PRICE_LISTS.PRODUCTS.PRICE></req></cell> <ff-btn-group flex="0 0 auto" class="buttons-row zero-height"> <ff-btn sense=save size=xs></ff-btn> <ff-btn sense=remove size=xs></ff-btn> </ff-btn-group> </ff-row> </ff-header> <form name=productForm id=productForm-{{$index}} ng-repeat="product in productType.products"> <ff-row> <ff-select flex="1 1 80px" ff-attr-name="{ \'product\' }" ff-model=product.product ff-required=true ff-validate-alert="{{\'PRICE_LISTS.PRODUCTS.PRODUCT\' | translate}}" ff-unique="{ array: productType.products, prop: \'product\' }" ff-model-options="{ allowInvalid: true }" ff-options="product.name for product in productType.options"> </ff-select> <label flex="{xs: \'0 1 80px\', md: \'0 1 106px\'}" class=ff-row ng-if=product.product.hasPasses> <ff-label flex=none><req translate=PRICE_LISTS.PRODUCTS.PASSES></req></ff-label> <ff-number ff-model=product.passQty ff-required=true class=ff-right ff-validate-alert="{{\'PRICE_LISTS.PRODUCTS.PASSES\' | translate}}"></ff-number> </label> <label flex="0 1 106px" class=ff-row ng-if=product.product.isCreditable> <ff-label flex="0 0 48px"><req translate=PRICE_LISTS.PRODUCTS.CREDIT></req></ff-label> <ff-price class=ff-right ff-model=product.reservationCredit ff-validate-alert="{{\'PRICE_LISTS.PRODUCTS.CREDIT\' | translate}}"></ff-price> </label> <ff-price flex="0 0 60px" class=ff-right ff-model=product.price ff-required=true ff-validate-alert="{{\'PRICE_LISTS.PRODUCTS.PRICE\' | translate}}"></ff-price> <ff-btn-group flex="0 0 auto" class=buttons-row> <ff-btn sense=save size=xs type=submit ff-click="vm.saveProduct(product, productForm, $index)" ff-disabled=productForm.$pristine title="{{\'GLOBAL.BTN_SAVE\' | translate}}"> </ff-btn> <ff-btn sense=remove size=xs ff-click="vm.removeProduct(product, $index, productType)" title="{{\'GLOBAL.BTN_DELETE\' | translate}}"></ff-btn> </ff-btn-group> </ff-row> </form> <ff-btn-group ng-show="productType.products.length > 0" class=ff-section-buttons> <ff-btn sense=add size=sm ff-click=vm.addProduct(productType)> <span translate=PRICE_LISTS.PRODUCTS.BTN_ADD></span> </ff-btn> </ff-btn-group> </ff-panel> </div> '},M381:function(e,t,r){var n=r("DDl7");e.exports=n},MK67:function(e,t,r){var n=r("HGI2");e.exports=n},OQSo:function(e,t,r){"use strict";r.r(t);var n=r("0zKI"),a=r.n(n),f=r("nbuU"),s=r.n(f),l=r("hsT8"),i=r.n(l),o=r("ee+B"),c=r("VRci");t.default=angular.module("DiscountCodeEditCtrl",[o.a.name,c.default.name]).controller("DiscountCodeEditCtrl",["$scope","dwAlerts","helper","close","centerId","code","products","DiscountCode",function(e,t,r,n,f,l,o,c){var d=this;e.close=n,d.code=l,d.products=o,d.types=["$","%"],d.getProducts=function(e){var t;return i()(t=d.products).call(t,(function(t){var r;return!s()(r=d.code.productIds).call(r,(function(r){return r===t.id&&r!==e}))}))},d.add=function(){d.code.productIds.push(null),e.form.$setDirty()},d.delete=function(t){var r;a()(r=d.code.productIds).call(r,t,1),e.form.$setDirty()},d.save=function(){if(!r.pointFirstInvalid("#discountCodeEdit"))return c.save(d.code,f).catch((function(e){return t.error(e,"Failed to save discount code.")})).then((function(){return e.form.$setPristine()})).then((function(){return n(!0)}))}}])},QPzo:function(e,t,r){var n=r("qqp4");e.exports=n},SnCj:function(e,t,r){var n={"./discount-codes/discount-code-edit.controller.js":"OQSo","./discount-codes/discount-code.service.js":"VRci","./discount-codes/discount-codes.controller.js":"TOkS","./membership-category/membership-category-edit.controller.js":"bLIb","./membership-category/membership-category-list.controller.js":"yIgt","./price-list/price-list-edit.controller.js":"eE3n","./price-list/price-list-list.controller.js":"ubVp","./product-categories/product-categories.controller.js":"EgkG","./product/product-edit.controller.js":"xMQj","./product/product-list.controller.js":"qJVN","./reservation-category/reservation-category-edit.controller.js":"lmCY","./reservation-category/reservation-category-list.controller.js":"XzrI","./reservation-unit/reservation-unit-edit.controller.js":"cWtD","./reservation-unit/reservation-unit-list.controller.js":"fQs0"};function a(e){var t=f(e);return r(t)}function f(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=f,e.exports=a,a.id="SnCj"},TOkS:function(e,t,r){"use strict";r.r(t);r("JBxO"),r("FdtR");var n=r("Tfwl"),a=r.n(n),f=r("XAgg"),s=r.n(f),l=r("yKah"),i=r.n(l),o=r("WSeP"),c=r.n(o),d=r("lvz6"),p=r.n(d),u=r("Ekwr"),m=r.n(u),g=r("03wM"),v=r.n(g),b=r("6RpP"),T=r.n(b),E=r("xeXu"),h=r.n(E),C=r("0zKI"),S=r.n(C),I=r("fzuT"),x=r.n(I),O=r("hsT8"),P=r.n(O),R=r("iAzO"),y=r("VRci"),L=r("OQSo"),N=r("7n+d"),_=r.n(N);function w(e,t){var r=v()(e);if(m.a){var n=m()(e);t&&(n=P()(n).call(n,(function(t){return p()(e,t).enumerable}))),r.push.apply(r,n)}return r}t.default=angular.module("deskworks.DiscountCodesCtrl",[R.a.name,y.default.name,L.default.name,"deskworks.inventory.product.service"]).controller("DiscountCodesCtrl",["$scope","$translate","state","dwModal","dwAlerts","DiscountCode","productService",function(e,t,r,n,f,l,o){var d=this;function u(){var e,t,r=moment().endOf("day"),n=P()(e=d.codes).call(e,(function(e){return r.isSameOrBefore(e.endDate)})),a=P()(t=d.codes).call(t,(function(e){return r.isAfter(e.endDate)}));d.codes=T()(n).call(n,a),d.firstExpiredIdx=n.length}r.setPageTitle(t.instant("DISCOUNT_CODES.PAGE_TITLE")),d.codes=[],d.params={centerId:r.getCurrentCenterId(),offset:0,limit:50},d.onInit=function(){d.fetch(),o.getProducts().catch((function(e){return f.error(e,"Failed to query products.")})).then((function(e){d.products=P()(e).call(e,(function(e){return"membership"===e.type}))}))},d.new=function(){var e={type:"$",duration:1,startDate:moment().startOf("date"),endDate:moment().startOf("date").add(1,"month"),productIds:[]};return d.edit(e).then((function(t){t&&d.codes.unshift(e),u()}))},d.edit=function(t){var r=function(e){for(var t=1;t<arguments.length;t++){var r,n=null!=arguments[t]?arguments[t]:{};if(t%2)c()(r=w(Object(n),!0)).call(r,(function(t){x()(e,t,n[t])}));else if(i.a)s()(e,i()(n));else{var f;c()(f=w(Object(n))).call(f,(function(t){a()(e,t,p()(n,t))}))}}return e}({},t);return n.show({scope:e,template:_.a,controller:"DiscountCodeEditCtrl as $ctrl",inputs:{centerId:d.params.centerId,code:r,products:d.products}}).then((function(e){return e.close})).then((function(e){return e&&(angular.extend(t,r),u()),e}))},d.delete=function(e){return l.delete(e.id).catch((function(e){return f.error(e,"Failed to delete discount code.")})).then((function(){var t,r;return S()(t=d.codes).call(t,h()(r=d.codes).call(r,e),1)}))},d.fetch=function(){return d.eof||d.fetching||(d.fetching=l.query(d.params).catch((function(e){return f.error(e,"Failed to query discount codes.")})).finally((function(){d.fetching=null})).then((function(e){var t;d.codes=T()(t=d.codes).call(t,e),u(),d.params.offset=d.codes.length,d.eof=e.length<d.params.limit}))),d.fetching},d.onInit()}])},Tfwl:function(e,t,r){e.exports=r("lD79")},VRci:function(e,t,r){"use strict";r.r(t);var n=r("Tfwl"),a=r.n(n),f=r("XAgg"),s=r.n(f),l=r("yKah"),i=r.n(l),o=r("WSeP"),c=r.n(o),d=r("lvz6"),p=r.n(d),u=r("hsT8"),m=r.n(u),g=r("Ekwr"),v=r.n(g),b=r("03wM"),T=r.n(b),E=r("fzuT"),h=r.n(E),C=r("YtL8"),S=r.n(C);function I(e,t){var r=T()(e);if(v.a){var n=v()(e);t&&(n=m()(n).call(n,(function(t){return p()(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r,n=null!=arguments[t]?arguments[t]:{};if(t%2)c()(r=I(Object(n),!0)).call(r,(function(t){h()(e,t,n[t])}));else if(i.a)s()(e,i()(n));else{var f;c()(f=I(Object(n))).call(f,(function(t){a()(e,t,p()(n,t))}))}}return e}t.default=angular.module("deskworks.DiscountCode",["ngResource","datesDeserializer","deskworks.config","deskworks.helper"]).factory("DiscountCode",["$resource","$timeout","$filter","datesDeserializer","deskworksConfig","helper",function(e,t,r,n,a,f){var s=n(["startDate","endDate"]),l=function(e){return function(e,t){return S()(t).call(t,(function(t,n){return t[n]=r("date")(e[n],"yyyy-MM-dd"),t}),{})}(e,["startDate","endDate"])},i=e(a.getApiAbsUrl("/discount-codes/:id"),{},{query:{method:"GET",isArray:!0,transformResponse:[s]},update:{method:"PUT"}});return{query:function(e){return i.query(f.pick(e,["centerId","offset","limit"])).$promise},save:function(e,t){var r=x(x({},e),l(e,l(e)));return r.id?i.update({id:r.id},r).$promise:i.save({centerId:t},r).$promise.then((function(t){e.id=t.id}))},delete:function(e){return i.delete({id:e}).$promise}}}])},Vzov:function(e,t,r){},W5jD:function(e,t,r){"use strict";r.r(t);r("Muwe"),r("y89P");var n=r("WSeP"),a=r.n(n),f=r("lRNC"),s=r.n(f),l=r("yCd9"),i=r.n(l),o=["$injector",function(e){var t,n,f=(t=r("SnCj"),i()(n=s()(t).call(t)).call(n,t));e.loadNewModules(i()(f).call(f,(function(e){return e.default.name}))),e.invoke(["$templateCache",function(e){var t,n=r("pFKl");a()(t=s()(n).call(n)).call(t,(function(t){return e.put(t.replace(/^\.\//,""),n(t))}))}])}];t.default=o},XAgg:function(e,t,r){e.exports=r("+h8E")},XzrI:function(e,t,r){"use strict";r.r(t);r("JBxO"),r("FdtR");var n=r("I5Zy");t.default=angular.module("deskworks.inventory.reservationCategories",["deskworks.state","deskworks.reservationCategory.service",n.a.name]).controller("InventoryReservationCategoriesCtrl",["$scope","$translate","state","dnd","dwAlerts","reservationCategories","reservationCategoryService",function(e,t,r,n,a,f,s){r.setPageTitle(t.instant("RESERVATION_CATEGORIES.PAGE_TITLE")),this.categories=f,this.edit=function(e){return r.setPath("/reservation-types/"+e.id)},this.new=function(){return r.setPath("/reservation-types/new")},this.onDrop=function(e,t,f,l){var i=n.move(e,t,f,l);return i.$spin=!0,s.update(r.getCurrentCenterId(),i.id,{order:i.order}).catch((function(e){return a.error(e,"Failed to reorder reservation category.")})).finally((function(){return delete i.$spin})),!0}}])},YpQb:function(e,t,r){var n=r("iddO"),a=r("loUa"),f=r("cJ2G"),s=r("Btbx"),l=r("3tq3"),i=r("i13M");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){for(var t,r,n=s(e),a=l.f,o=f(n),c={},d=0;o.length>d;)void 0!==(r=a(n,t=o[d++]))&&i(c,t,r);return c}})},aJ1N:function(e,t,r){"use strict";r("T7M0"),r("0rqx"),r("Vzov");t.a=angular.module("ffRichtext",["textAngular"]).directive("ffRichtext",["ffHelper",function(e){return{restrict:"E",scope:!0,compile:function(t,r){var n=angular.element("<text-angular></text-angular>");return e.copyInnerAttrs(t,r,n),t.append(n),this.link},link:function(e,t,r){var n=angular.element(t[0].querySelector("[contenteditable]"));e.$watch("ffBlock.editMode",(function(e){angular.isUndefined(e)||(t.toggleClass("ff-read-only",!e),n.attr("contenteditable",e))}))}}}])},bLIb:function(e,t,r){"use strict";r.r(t);var n=r("nbuU"),a=r.n(n);t.default=angular.module("deskworks.inventory.membershipCategory.edit",["keese","deskworks.inventory.membershipCategory.service"]).controller("MembershipCategoryEditCtrl",["$scope","$route","$translate","dwAlerts","keese","state","helper","membershipCategories","membershipCategoryService",function(e,t,r,n,f,s,l,i,o){var c=this;c.category=a()(l).call(l,i,t.current.params.membershipCategoryId)||{},"new"===t.current.params.membershipCategoryId&&(c.category.id="new"),s.setPageTitle(r.instant("new"===c.category.id?"MEMBERSHIP_CATEGORIES.NEW.PAGE_TITLE":"MEMBERSHIP_CATEGORIES.EDIT.PAGE_TITLE")),c.save=function(e){if(!l.pointFirstInvalid("#membershipCategory")){var t,r={name:c.category.name,note:c.category.note};return"new"===c.category.id?(r.order=f.generate(i[i.length-1]&&i[i.length-1].order),t=o.create(r)):t=o.update(c.category.id,r),t.catch((function(e){return n.error(e,"Failed to save membership category.")})).then((function(t){if(e.$setPristine(!0),"new"===c.category.id)return s.setPath("/membership-types/"+t.id)}))}},c.remove=function(){if(confirm(r.instant("MEMBERSHIP_CATEGORIES.CONFIRM_DELETE")))return o.delete(c.category.id).catch((function(e){return n.error(e,"Failed to remove membership category.")})).then((function(){return s.setPath("/membership-types")}))},c.back=function(){return s.setPath("/membership-types")}}])},cJ2G:function(e,t,r){var n=r("UkRz"),a=r("FkQy"),f=r("/ADo"),s=r("CvrR");e.exports=n("Reflect","ownKeys")||function(e){var t=a.f(s(e)),r=f.f;return r?t.concat(r(e)):t}},cWtD:function(e,t,r){"use strict";r.r(t);r("JBxO"),r("FdtR");var n=r("7pN8"),a=r.n(n),f=r("nbuU"),s=r.n(f),l=r("nzBw"),i=r("2/1H");t.default=angular.module("deskworks.inventory.reservationUnit.edit",["deskworks.reservationCategory.service",l.a.name,i.a.name]).controller("InventoryReservationUnitEditCtrl",["$scope","$route","$translate","dwAlerts","state","helper","unit","categories","ReservationUnit",function(e,t,r,n,f,l,i,o,c){var d,p=this;f.setPageTitle(r.instant("new"===i.id?"RESERVATION_UNITS.NEW.PAGE_TITLE":"RESERVATION_UNITS.EDIT.PAGE_TITLE")),p.unit=i,p.categories=o,p.areaUnit=(s()(d=window.dwLocales).call(d,(function(t){return t.id===e.currentLocale}))||{}).area||"ftÂ²",p.saveReservationUnit=function(e){if(!l.pointFirstInvalid("#reservation-unit-edit")){var r=l.pick(p.unit,["id","name","reservationTypeId","syncWithCalendar","calendarId","description","area","expectedUsePerMonth"]);return r.area=r.area?+r.area:null,r.expectedUsePerMonth=r.expectedUsePerMonth?+r.expectedUsePerMonth:null,c.save(f.getCurrentCenterId(),r).then((function(e){if(p.form.$setPristine(),"new"===p.unit.id)return f.setPath("/reservation-units/"+e.id);t.reload()})).catch((function(e){return n.error(e,"Failed to save reservation unit.")}))}},p.removeReservationUnit=function(){if(confirm(r.instant("RESERVATION_UNITS.CONFIRM_DELETE")))return c.delete(f.getCurrentCenterId(),p.unit.id).then((function(){return f.setPath("/reservation-units")})).catch((function(e){return n.error(e,"Failed to remove reservation unit.")}))},p.uploadPhoto=function(e,t){return t&&t.length>0?n.error(r.instant("GLOBAL.PHOTO.INVALID_FORMAT")):e&&e.length>0?(p.spinUpload=!0,c.uploadPhoto(f.getCurrentCenterId(),p.unit.id,e[0]).catch((function(e){return n.error(e,"Failed to upload photo.")})).finally((function(){p.spinUpload=!1})).then((function(e){p.unit.thumbnail=e.data.thumbnail?e.data.thumbnail+"?"+a()():p.unit.thumbnail,p.unit.photo=e.data.photo+"?"+a()()}))):void 0},p.back=function(){return f.setPath("/reservation-units")},p.calSyncChange=function(){p.unit.syncWithCalendar||(p.unit.calendarId=null),p.calendarIdEnabled=p.unit.syncWithCalendar},e.$watch("state.getCurrentCenterId()",(function(e,t){e!==t&&f.setPath("/reservation-units")}))}])},"d7C/":function(e,t){e.exports='<div id=productCategories ff-bulk-read-only> <h1 class=page-title>{{state.getPageTitle()}}</h1> <ff-panel style=max-width:600px class=ff-bmargin> <ff-header> <ff-row> <cell class=ff-right flex="0 0 60px"><req translate=PRODUCT_CATEGORIES.CODE></req></cell> <cell><span translate=PRODUCT_CATEGORIES.NAME></span></cell> <ff-hint flex=none><span translate=PRODUCT_CATEGORIES.HINT></span></ff-hint> </ff-row> </ff-header> <form name=form ng-repeat="category in $ctrl.categories" novalidate> <ff-row ff-dim=category.$$spin> <ff-text name=productCategoryCode ff-model=category.code flex="0 0 60px" class=ff-right ff-change="$ctrl.save(category, form, $index)" placeholder=1-05 ff-required=true ff-validate-alert="{{\'PRODUCT_CATEGORIES.CODE\' | translate}}" ff-disabled="category.code === \'0-00\'"></ff-text> <ff-text name=productCategoryName ff-model=category.name placeholder="Private Office" ff-change="$ctrl.save(category, form, $index)"></ff-text> <ff-btn-group flex=none class=buttons-row> <ff-btn sense=remove size=xs flex="0 0 auto" ff-click="$ctrl.delete(category, $index)" title="{{\'GLOBAL.BTN_DELETE\' | translate}}" ff-disabled="category.code === \'0-00\'"></ff-btn> </ff-btn-group> </ff-row> </form> <ff-btn-group class=ff-section-buttons> <ff-btn sense=new size=sm ff-click=$ctrl.new()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </ff-panel> </div> '},dSKb:function(e,t){e.exports='<form name=formProduct id=productEdit novalidate ff-bulk-read-only> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h-half"> <ff-panel flex="{lg: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 0 92px"><req translate=PRODUCTS.NAME></req></ff-label> <ff-text name=name ff-model=vm.product.name ff-required=true ff-maxlength=128 ff-validate-alert="{{\'PRODUCTS.NAME\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 0 92px"><span translate=PRODUCTS.DESCRIPTION style="margin-bottom:auto;padding:.3333rem 0"></span></ff-label> <ff-textarea name=description ff-model=vm.product.description ff-maxlength=1024 rowspan=3 ff-validate-alert="{{\'PRODUCTS.DESCRIPTION\' | translate}}"></ff-textarea> </label> <div class=ff-grid> <label flex="{sm: \'0 0 65%\'}" class=ff-row> <ff-label flex="0 0 92px"><req translate=PRODUCTS.ITEM_CATEGORY></req></ff-label> <ff-select name=productCategory ff-model=vm.product.productCategoryId ff-options="opt.id as opt.fullName for opt in vm.productCategories" ff-required=true ff-validate-alert="{{\'PRODUCTS.ITEM_CATEGORY\' | translate}}"></ff-select> </label> <label flex="{sm: \'0 0 35%\'}" class=ff-row> <ff-label flex="0 0 92px"><req translate=PRODUCTS.ITEM_NUMBER></req></ff-label> <ff-number name=productNumber ff-model=vm.product.productNumber placeholder=01 ff-required=true ff-gte=0 ff-lt=1000 ff-validate-alert="{{\'PRODUCTS.ITEM_NUMBER\' | translate}}"></ff-number> </label> </div> <quick-books-account product-id=vm.product.id save=vm.saveQuickBooks ng-if=vm.product.id></quick-books-account> <label class=ff-row ng-if="vm.product.type.id === \'membership\' && vm.product.showInSelfRegistration && vm.product.id"> <ff-label flex="0 0 92px"> <span translate=PRODUCTS.WEBSITE_LINK></span> <ff-hint><span translate=PRODUCTS.WEBSITE_LINK.HINT></span></ff-hint> </ff-label> <ff-static> <a href={{vm.getMemberSignUpUrl()}} target=_blank rel=noopener>{{vm.getMemberSignUpUrl()}}</a> </ff-static> </label> </ff-panel> <ff-panel flex="{lg: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 0 90px"><req translate=PRODUCTS.PRODUCT_TYPE></req></ff-label> <ff-select name=productType ff-model=vm.product.type ff-required=true ff-validate-alert="{{\'PRODUCTS.PRODUCT_TYPE\' | translate}}" ff-options="type.name for type in vm.product.options.productTypes"></ff-select> </label> <label class=ff-row flex="1 1 50%" ng-if="vm.product.type.id === \'membership\' || vm.product.type.id === \'services\'"> <ff-label flex="0 0 90px" ng-if="vm.product.type.id === \'membership\'"> <req translate=PRODUCTS.MEMBERSHIP_CATEGORY></req> </ff-label> <ff-select name=membershipType ff-model=vm.product.membershipType ff-required=true ng-if="vm.product.type.id === \'membership\'" ff-validate-alert="{{\'PRODUCTS.MEMBERSHIP_CATEGORY\' | translate}}" ff-options="type.name for type in vm.product.options.membershipTypes"></ff-select> </label> <label class=ff-row flex="1 1 50%" ng-if="vm.product.type.id === \'membership\' || vm.product.type.id === \'services\'"> <ff-label flex="0 0 90px"> <req translate=PRODUCTS.BILLING_FREQUENCY></req> </ff-label> <ff-select name=billingFrequency ff-model=vm.product.billingFrequency ff-required=true ff-validate-alert="{{\'PRODUCTS.BILLING_FREQUENCY\' | translate}}" ff-options="billingFrequency.name for billingFrequency in vm.product.options.billingFrequencies"></ff-select> </label> <div class=ff-grid ng-if="vm.product.type.id === \'membership\'"> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-checkbox name=isCreditable ff-model=vm.product.isCreditable class=ff-control> <span translate=PRODUCTS.IS_CREDITABLE></span> </ff-checkbox> </label> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-checkbox name=hasPasses ff-model=vm.product.hasPasses class=ff-control> <span translate=PRODUCTS.HAS_PASSES></span> </ff-checkbox> </label> </div> <label class=ff-row ng-if="vm.product.type.id === \'membership\'"> <ff-label flex="1 0 50%" ng-disabled=!vm.product.hasPasses> <req translate=PRODUCTS.PASS_PRODUCT></req> </ff-label> <ff-select flex="1 0 50%" name=passProduct ff-model=vm.product.passProduct ff-disabled=!vm.product.hasPasses ff-required=vm.product.hasPasses ff-validate-alert="{{\'PRODUCTS.PASS_PRODUCT\' | translate}}" ff-options="passProduct.name for passProduct in vm.product.options.passProducts"></ff-select> </label> <div class=ff-grid ng-if="vm.product.type.id === \'membership\'"> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-label flex="0 0 50%" ng-disabled=!vm.product.hasPasses> <req translate=PRODUCTS.COUNT_CHECK_INS_PER></req> </ff-label> <ff-select flex="1 0 50%" name=countCheckInsPer ff-model=vm.product.countCheckInsPer ff-disabled=!vm.product.hasPasses ff-required=vm.product.hasPasses ff-validate-alert="{{\'PRODUCTS.COUNT_CHECK_INS_PER\' | translate}}"> <option value={{opt.id}} ng-repeat="opt in vm.optsCountCheckInsPer">{{opt.name}}</option> </ff-select> </label> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-checkbox name=reserveWithNonMemberRules ff-model=vm.product.reserveWithNonMemberRules class=ff-control> <span translate=PRODUCTS.ONLY_NON_MEMBER_HOURS></span> </ff-checkbox> </label> </div> <div class=ff-grid ng-if="vm.product.type.id === \'rental\'"> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-checkbox name=allowReservationCredits ff-model=vm.product.allowReservationCredits class=ff-control> <span translate=PRODUCTS.ALLOW_RESERVATION_CREDITS></span> </ff-checkbox> </label> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-checkbox name=canBuyOnSplashPage ff-model=vm.product.canBuyOnSplashPage class=ff-control> <span translate=PRODUCTS.BUY_ON_SPLASH_PAGE></span> </ff-checkbox> </label> </div> <div class=ff-grid> <label flex="{sm: \'1 0 50%\'}" class=ff-row> <ff-checkbox name=taxable ff-model=vm.product.taxable class=ff-control> <span translate=PRODUCTS.TAXABLE></span> </ff-checkbox> </label> <label flex="{sm: \'0 0 50%\'}" class=ff-row ng-if="vm.product.type.id === \'membership\' || vm.product.type.id === \'services\'"> <ff-checkbox name=showInSelfRegistration ff-model=vm.product.showInSelfRegistration class=ff-control> <span translate=PRODUCTS.SHOW_FOR_SIGN_UP></span> </ff-checkbox> </label> </div> <div class=ff-grid ng-if="vm.product.type.id === \'membership\'"> <label flex="{sm: \'1 0 50%\'}" class=ff-row> <ff-checkbox name=hasRegistrationFee ff-model=vm.product.hasRegistrationFee class=ff-control> <span translate=PRODUCTS.HAS_REGISTRATION_FEE></span> </ff-checkbox> </label> <label flex="{sm: \'1 0 50%\'}" class=ff-row ng-if=vm.settings.enableSecurityDepositInMembershipProducts> <ff-label flex="0 1 180px"><req translate=PRODUCTS.SECURITY_DEPOSIT_AMOUNT></req></ff-label> <ff-number name=securityDepositAmount flex="1 0 50px" ff-model=vm.product.securityDepositAmount ff-required=true ff-gte=0 ff-validate-alert="{{\'PRODUCTS.SECURITY_DEPOSIT_AMOUNT\' | translate}}"></ff-number> </label> <label flex="{sm: \'0 0 50%\'}"> <ff-checkbox name=trackAcrossAllCenters ff-model=vm.product.trackAcrossAllCenters class=ff-control ff-disabled=!vm.product.hasPasses> <span translate=PRODUCTS.TRACK_ACROSS_ALL_CENTERS></span> </ff-checkbox> </label> <deskworks-sweep-product product-id=vm.product.id save=vm.saveDeskworksSweep></deskworks-sweep-product> </div> <ff-row ng-if="vm.product.type.id === \'rental\'"> <label flex="1 0 50%" class=ff-row> <ff-label flex="3 0 60px"><req translate=PRODUCTS.PASS_SIZE></req></ff-label> <ff-number flex="1 1 10px" name=passSize ff-model=vm.product.passSize ff-required=true ff-validate-alert="{{\'PRODUCTS.PASS_SIZE\' | translate}}"></ff-number> </label> <ff-static flex="{xs: \'0 0 0\', sm: \'0 0 50%\'}" ff-style="{\'padding\': 0}"></ff-static> </ff-row> <div class=ff-grid ng-if="vm.product.type.id === \'rental\'"> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-label flex="3 0 60px"><req translate=PRODUCTS.MIN_PASS translate-values="{ minPassUnit: vm.passMinUnit }"></req></ff-label> <ff-select flex="1 1 10px" name=passMin ff-model=vm.product.passMin ff-required=true ff-validate-alert="Min {{vm.passMinUnit}}" ff-options="opt.id as opt.name for opt in vm.optsPassMin"></ff-select> </label> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-label flex="3 0 60px"><req translate=PRODUCTS.MAX_PASS></req></ff-label> <ff-select flex="1 1 10px" name=passMax ff-model=vm.product.passMax ff-required=true ff-options="max.name for max in vm.optsPassMax" ff-validate-alert="{{\'PRODUCTS.MAX_PASS\' | translate}}"></ff-select> </label> </div> <label class=ff-row ng-if="vm.product.type.id === \'rental\'"> <ff-label flex="1 1 220px"><span translate=PRODUCTS.RESERVATION_CATEGORY></span></ff-label> <ff-select flex="1 1 344px" name=reservationType ff-model=vm.product.reservationTypeId> <option value="" translate=PRODUCTS.NO_RESERVATION_CATEGORY></option> <option ng-repeat="resType in vm.product.options.reservationTypes" value={{resType.id}}>{{resType.name}}</option> </ff-select> </label> </ff-panel> <printer-usage-free-copies flex="{md: \'0 0 50%\'}" style=margin-left:auto free-copies-settings=vm.product.printerUsageFreeCopiesSettings ng-if="vm.product.type.id === \'membership\' && vm.product.printerUsageFreeCopiesSettings.length > 0"></printer-usage-free-copies> <ff-btn-group> <ff-btn sense=save type=submit ff-disabled=formProduct.$pristine ff-click=vm.save(formProduct)> <span translate=GLOBAL.BTN_SAVE></span> </ff-btn> <ff-btn sense=remove ng-if=vm.product.id ff-click=vm.remove()> <span translate=GLOBAL.BTN_DELETE></span> </ff-btn> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> </div> </form> <div id=productPriceLists ff-bulk-read-only style="margin:1.5rem 0"> <ff-panel ng-if=vm.product.id> <ff-panel-header><span translate=PRODUCTS.PRICE_LISTS.HEADER></span></ff-panel-header> <ff-btn-group class=ff-section-buttons> <ff-btn sense=add size=sm ff-click=vm.addPriceList()><span translate=PRODUCTS.PRICE_LISTS.BTN_ADD></span></ff-btn> </ff-btn-group> <ff-header ng-show="vm.product.priceLists.length > 0"> <ff-row> <cell><req translate=PRODUCTS.PRICE_LISTS.PRICE_LIST></req></cell> <cell flex="0 0 60px" ng-if=vm.product.hasPasses><req translate=PRODUCTS.PRICE_LISTS.PASSES></req></cell> <cell flex="0 0 60px" class=ff-right ng-if=vm.product.isCreditable><req translate=PRODUCTS.PRICE_LISTS.CREDIT></req></cell> <cell flex="0 0 60px" class=ff-right><req translate=PRODUCTS.PRICE_LISTS.PRICE></req></cell> <ff-btn-group flex=none class="buttons-row zero-height"> <ff-btn sense=save size=xs title="{{\'GLOBAL.BTN_SAVE\' | translate}}"></ff-btn> <ff-btn sense=remove size=xs title="{{\'GLOBAL.BTN_DELETE\' | translate}}"></ff-btn> </ff-btn-group> </ff-row> </ff-header> <form name=priceListForm id=productPriceList-{{priceList.id}} ng-repeat="priceList in vm.product.priceLists" novalidate> <ff-row> <ff-select name=priceList ff-model=priceList.priceList ff-required=true ff-validate-alert="{{\'PRODUCTS.PRICE_LISTS.PRICE_LIST\' | translate}}" ff-unique="{ array: vm.product.priceLists, prop: \'priceList\' }" ff-model-options="{ allowInvalid: true }" ff-options="priceList.name for priceList in vm.product.options.priceLists"> </ff-select> <ff-number flex="0 0 60px" name=passQty class=ff-center ff-model=priceList.passQty ff-required=true ff-validate-alert="{{\'PRODUCTS.PRICE_LISTS.PASSES\' | translate}}" ng-if=vm.product.hasPasses></ff-number> <ff-price flex="0 0 60px" name=credit class=ff-right ff-model=priceList.reservationCredit ff-required=true ff-validate-alert="{{\'PRODUCTS.PRICE_LISTS.CREDIT\' | translate}}" ng-if=vm.product.isCreditable></ff-price> <ff-price flex="0 0 60px" name=price class=ff-right ff-model=priceList.price ff-required=true ff-validate-alert="{{\'PRODUCTS.PRICE_LISTS.PRICE\' | translate}}"></ff-price> <ff-btn-group flex=none class=buttons-row> <ff-btn sense=save type=submit size=xs title="{{\'GLOBAL.BTN_SAVE\' | translate}}" ff-click="vm.savePriceList(priceList, priceListForm)" ff-disabled=priceListForm.$pristine></ff-btn> <ff-btn sense=remove size=xs title="{{\'GLOBAL.BTN_DELETE\' | translate}}" ff-click="vm.removePriceList(priceList, $index)"></ff-btn> </ff-btn-group> </ff-row> </form> <ff-btn-group ng-show="vm.product.priceLists.length > 0" class=ff-section-buttons> <ff-btn sense=add size=sm ff-click=vm.addPriceList()> <span translate=PRODUCTS.PRICE_LISTS.BTN_ADD></span> </ff-btn> </ff-btn-group> </ff-panel> </div> '},eE3n:function(e,t,r){"use strict";r.r(t);var n=r("0zKI"),a=r.n(n),f=r("WSeP"),s=r.n(f),l=r("nbuU"),i=r.n(l);t.default=angular.module("deskworks.inventory.priceList.edit",["deskworks.inventory.priceList.service"]).controller("PriceListEditCtrl",["$scope","$rootScope","$filter","$timeout","$translate","dwAlerts","state","helper","priceList","priceListService","optsProductType",function(e,t,r,n,f,l,o,c,d,p,u){var m,g,v,b=this;o.setPageTitle(f.instant("new"===d.id?"PRICE_LISTS.NEW.PAGE_TITLE":"PRICE_LISTS.EDIT.PAGE_TITLE")),b.priceList=d,b.useForOptions=[{id:"members",name:f.instant("PRICE_LISTS.USE_FOR.MEMBERS")},{id:"nonMembers",name:f.instant("PRICE_LISTS.USE_FOR.NON_MEMBERS")},{id:"none",name:f.instant("PRICE_LISTS.USE_FOR.NONE")}],b.priceList.useFor=i()(c).call(c,b.useForOptions,b.priceList.useFor),b.productTypes=angular.copy(u),s()(m=b.productTypes).call(m,(function(e){e.products=[],e.options=[]})),s()(g=b.priceList.options.products).call(g,(function(e){var t=i()(c).call(c,b.productTypes,e.type);t?t.options.push(e):console.warn("Product option of unknown type:",e)})),s()(v=b.priceList.products).call(v,(function(e){e.product=i()(c).call(c,b.priceList.options.products,e.productId),e.price=r("price")(e.price),angular.isDefined(e.reservationCredit)&&(e.reservationCredit=r("price")(e.reservationCredit)),null===e.passQty&&(e.passQty=0);var t=i()(c).call(c,b.productTypes,e.product.type);t?t.products.push(e):console.warn("Product of unknown type:",e)})),b.remove=function(){if(confirm(f.instant("PRICE_LISTS.CONFIRM_DELETE")))return p.deletePricelist(o.getCurrentCenterId(),b.priceList.id).then((function(){return o.setPath("/pricelists")})).catch((function(e){return l.error(e,"Failed to remove price list.")}))},b.save=function(){if(!c.pointFirstInvalid("#priceListEdit")){var e={name:b.priceList.name,visibleForVisitors:b.priceList.visibleForVisitors,useFor:b.priceList.useFor?b.priceList.useFor.id:b.priceList.useFor,isArchived:b.priceList.isArchived};return("new"===b.priceList.id?p.createPricelist(o.getCurrentCenterId(),e):p.updatePricelist(o.getCurrentCenterId(),b.priceList.id,e)).then((function(e){if(b.priceList.date=moment(),b.form.$setPristine(),"new"===b.priceList.id)return o.setPath("/pricelists/"+e.id)})).catch((function(e){return l.error(e,"Failed to save price list.")}))}},b.back=function(){return o.setPath("/pricelists")},b.addProduct=function(e){if(!e.options.length)return l.error(f.instant("PRICE_LISTS.NO_PRODUCTS_ERROR"));var t={id:"new",productId:e.options[0].id,product:e.options[0],price:"",passQty:0};e.products.push(t),n((function(){var t=document.querySelector("#productType-"+e.id+" form:last-of-type");t&&(t=t.querySelector("select:first-of-type"))&&t.focus()}))},b.saveProduct=function(e,t,r){if(!c.pointFirstInvalid("#productForm-"+r)){var n={productId:e.product.id,price:e.price};return e.product.isCreditable&&(n.reservationCredit=e.reservationCredit),e.product.hasPasses&&(n.passQty=e.passQty),("new"===e.id?p.createProduct(o.getCurrentCenterId(),b.priceList.id,n):p.updateProduct(o.getCurrentCenterId(),b.priceList.id,e.id,n)).then((function(r){"new"===e.id&&(e.id=r.id),t.$setPristine()})).catch((function(e){return l.error(e,"Failed to save product.")}))}},b.removeProduct=function(e,t,r){var n;if("new"===e.id)a()(n=r.products).call(n,t,1);else if(confirm(f.instant("PRICE_LISTS.PRODUCTS.CONFIRM_DELETE")))return p.deleteProduct(o.getCurrentCenterId(),b.priceList.id,e.id).then((function(){var e;return a()(e=r.products).call(e,t,1)})).catch((function(e){return l.error(e,"Failed to remove product.")}))},e.$watch("state.getCurrentCenterId()",(function(e,t){e!==t&&o.setPath("/pricelists")}))}])},"ee+B":function(e,t,r){"use strict";t.a=angular.module("autofocusDirective",[]).directive("autofocus",["$timeout",function(e){return{restrict:"A",link:function(t,r,n){if("false"!==n.autofocus){var a=r[0].parentNode.querySelector("input")||r[0].parentNode.querySelector("select")||r[0].parentNode.querySelector("button");a&&e((function(){return a.focus()}))}}}}])},ekOF:function(e,t){e.exports='<div id=inventoryPriceLists ng-if=!vm.cloning ff-bulk-read-only> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class=gutter-v> <ff-panel> <ff-header ng-if=vm.priceLists.length> <ff-row> <cell flex="0 0 36px" ng-hide=vm.printCollapsed class=ff-center title="{{\'PRICE_LISTS.LIST.PRINT\' | translate}}"> <ff-icon sense=print></ff-icon> </cell> <cell flex="1 1 70%" translate=PRICE_LISTS.NAME></cell> <cell flex="0 0 15%" class=ff-center><span translate=PRICE_LISTS.LAST_UPDATE></span></cell> <cell flex="0 0 15%" class=ff-center><span translate=PRICE_LISTS.VISIBLE_FOR_VISITORS></span></cell> <cell flex="0 0 15%" class=ff-center><span translate=PRICE_LISTS.ARCHIVED></span></cell> <ff-btn-group flex="0 0 auto" class="buttons-row zero-height"> <ff-btn sense=edit size=xs></ff-btn> <ff-btn sense=clone size=xs></ff-btn> </ff-btn-group> </ff-row> </ff-header> <span ng-if=!vm.priceLists.length translate=PRICE_LISTS.LIST.EMPTY></span> <ff-row ng-repeat="pl in vm.priceLists"> <ff-static flex="0 0 36px" class=ff-center ng-hide=vm.printCollapsed> <ff-checkbox class=ff-read-only-ignore ff-model=pl.include></ff-checkbox> </ff-static> <ff-static flex="1 1 70%" ff-bind=pl.name></ff-static> <ff-static flex="0 0 15%" class=ff-center ff-bind-html="pl.date | date:\'mediumDate\'"></ff-static> <ff-static flex="0 0 15%" class=ff-center ff-bind="pl.visibleForVisitors | yesno"></ff-static> <ff-static flex="0 0 15%" class=ff-center ff-bind="pl.isArchived | yesno"></ff-static> <ff-btn-group flex="0 0 auto" class=buttons-row> <ff-btn sense=edit size=xs ff-click=vm.edit(pl) title="{{\'GLOBAL.BTN_EDIT\' | translate}}"></ff-btn> <ff-btn sense=clone size=xs ff-click=vm.clone(pl) title="{{\'PRICE_LISTS.LIST.BTN_CLONE\' | translate}}"></ff-btn> </ff-btn-group> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=new ff-click=vm.new()><span translate=GLOBAL.BTN_NEW></span></ff-btn> <ff-btn sense=collapseBtn ff-click=vm.togglePrint() ng-class="{ collapsed: vm.printCollapsed }" ff-disabled=!vm.priceLists.length><span translate=PRICE_LISTS.LIST.BTN_PRINT></span></ff-btn> </ff-btn-group> </div> <div ng-collapse=vm.printCollapsed class=ff-grid> <ng-include src="\'price-list-report/price-list-report.tpl.html\'" class=ff-tmargin></ng-include> </div> </div> <form name=formClonePriceList id=clonePriceList ng-if=vm.cloning ff-bulk-read-only style=max-width:600px> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class=gutter-v> <ff-panel> <ff-panel-header> <span translate=PRICE_LISTS.CLONE.HEADER translate-values="{ priceList: vm.cloning.name }"></span> </ff-panel-header> <label class=ff-row> <ff-label flex="0 1 160px"><span translate=PRICE_LISTS.CLONE.CENTER></span></ff-label> <dw-select-center flex="1 0 180px" ff-model=vm.dstCenterId></dw-select-center> </label> <label class=ff-row> <ff-label flex="0 1 160px" ff-model=vm.editAfterCloning><span translate=PRICE_LISTS.CLONE.EDIT></span></ff-label> <ff-static><ff-checkbox flex="0 0 30px" ff-model=vm.editAfterCloning></ff-checkbox></ff-static> </label> </ff-panel> <ff-btn-group> <ff-btn type=submit sense=clone ff-click=vm.clone(vm.cloning)><span translate=PRICE_LISTS.LIST.BTN_CLONE></span></ff-btn> <ff-btn sense=cancel ff-click="vm.cloning = false"><span translate=GLOBAL.BTN_CANCEL></span></ff-btn> </ff-btn-group> </div> </form> '},fQs0:function(e,t,r){"use strict";r.r(t);var n=r("nbuU"),a=r.n(n),f=r("WSeP"),s=r.n(f),l=r("2/1H");t.default=angular.module("deskworks.inventory.reservationUnit.list",["deskworks.reservationRules.optsWhoCanReserve",l.a.name]).controller("InventoryReservationUnitListCtrl",["$scope","$translate","state","helper","reservationUnits","optsWhoCanReserve",function(e,t,r,n,f,l){var i;r.setPageTitle(t.instant("RESERVATION_UNITS.PAGE_TITLE")),this.reservationUnits=f,s()(i=this.reservationUnits).call(i,(function(e){e.whoCanReserve=(a()(n).call(n,l,e.whoCanReserve)||{}).name})),this.edit=function(e){return r.setPath("/reservation-units/"+e.id)},this.new=function(){return r.setPath("/reservation-units/new")}}])},fzuT:function(e,t,r){var n=r("7v6b");e.exports=function(e,t,r){return t in e?n(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},"gQ/F":function(e,t){e.exports='<form name=formMembershipCategory id=membershipCategory ff-bulk-read-only> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class=gutter-v> <ff-panel style=max-width:600px> <label class=ff-row> <ff-label flex="0 0 62px"><req translate=MEMBERSHIP_CATEGORIES.NAME></req></ff-label> <ff-text name=name ff-model=vm.category.name ff-required=true ff-validate-alert="{{\'MEMBERSHIP_CATEGORIES.NAME\' | translate}}"></ff-text> </label> <ff-row> <ff-textarea name=description ff-model=vm.category.note placeholder="{{\'MEMBERSHIP_CATEGORIES.NAME\' | translate}}"></ff-textarea> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=save type=submit ff-click=vm.save(formMembershipCategory) ff-disabled=formMembershipCategory.$pristine> <span translate=GLOBAL.BTN_SAVE></span> </ff-btn> <ff-btn sense=remove ng-if="vm.category.id !== \'new\'" ff-click=vm.remove()> <span translate=GLOBAL.BTN_DELETE></span> </ff-btn> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> </div> </form> '},h2hn:function(e,t,r){var n=r("iddO"),a=r("loUa");n({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperty:r("UkIg").f})},iDDw:function(e,t,r){var n=r("LPPa");e.exports=n},lD79:function(e,t,r){var n=r("DDl7");e.exports=n},lmCY:function(e,t,r){"use strict";r.r(t);r("iPZ8"),r("kypl"),r("JBxO"),r("FdtR");var n=r("0zKI"),a=r.n(n),f=r("NOor"),s=r.n(f),l=r("aJ1N"),i=r("jd5N");t.default=angular.module("deskworks.inventory.reservationCategory",[l.a.name,i.a.name,"deskworks.helper","deskworks.reservationCategory.service"]).controller("InventoryReservationCategoryEditCtrl",["$window","$translate","keese","dwAlerts","state","helper","reservationCategory","reservationCategories","reservationCategoryService",function(e,t,r,n,f,l,i,o,c){var d=this;if(f.setPageTitle(t.instant("new"===i.id?"RESERVATION_CATEGORIES.NEW.PAGE_TITLE":"RESERVATION_CATEGORIES.EDIT.PAGE_TITLE")),d.category=i,d.hours=[0,1,2,12,24,48,72,120,168],d.cancellation=[{notice:"RESERVATION_CATEGORIES.NOTICE_NON_MEMBER",hint:"RESERVATION_CATEGORIES.NOTICE_NON_MEMBER.HINT",model:d.category.cancellationNonMemberNoticeHours},{notice:"RESERVATION_CATEGORIES.NOTICE_MEMBER",hint:"RESERVATION_CATEGORIES.NOTICE_MEMBER.HINT",model:d.category.cancellationMemberNoticeHours}],d.category.photos){var p,u=s()(l).call(l,d.category.photos,null);if(u>=0)a()(p=d.category.photos).call(p,u,1)}d.save=function(e){if(!l.pointFirstInvalid("#reservationCategory")){var t,a={name:d.category.name,description:d.category.description,cancellationNonMemberNoticeHours:d.cancellation[0].model,cancellationMemberNoticeHours:d.cancellation[1].model};return"new"===d.category.id?(a.order=r.generate(o[o.length-1]&&o[o.length-1].order),t=c.create(f.getCurrentCenterId(),a)):t=c.update(f.getCurrentCenterId(),d.category.id,a),t.then((function(t){if(e.$setPristine(),"new"===d.category.id)return f.setPath("/reservation-types/"+t.id)})).catch((function(e){return n.error(e,"Failed to save reservation category.")}))}},d.remove=function(){if(e.confirm(t.instant("RESERVATION_CATEGORIES.CONFIRM_DELETE")))return c.delete(f.getCurrentCenterId(),d.category.id).then((function(){return f.setPath("/reservation-types")})).catch((function(e){return n.error(e,"Failed to remove reservation category.")}))},d.back=function(){return f.setPath("/reservation-types")},d.uploadPhoto=function(e,r,a){return r&&r.length>0?n.error(t.instant("RESERVATION_CATEGORIES.PHOTOS.INVALID_FORMAT")):e&&e.length>0?(a?(s=c.updatePhoto(f.getCurrentCenterId(),d.category.id,a.id,e[0]),a.spin=!0):(s=c.createPhoto(f.getCurrentCenterId(),d.category.id,e[0]),d.spinAddPhoto=!0),s.then((function(e){a?a.url=e.data.url:d.category.photos.push({id:e.data.id,url:e.data.url})})).catch((function(e){return n.error(e,"Failed to upload reservation category photo.")})).finally((function(){d.spinAddPhoto=!1,a&&(a.spin=!1)}))):void 0;var s},d.removePhoto=function(r){if(e.confirm(t.instant("RESERVATION_CATEGORIES.PHOTOS.CONFIRM_DELETE")))return c.deletePhoto(f.getCurrentCenterId(),d.category.id,r.id).then((function(){var e,t=s()(l).call(l,d.category.photos,r.id);t>=0&&a()(e=d.category.photos).call(e,t,1)})).catch((function(e){return n.error(e,"Failed to remove reservation category photo.")}))}}])},lvz6:function(e,t,r){e.exports=r("QPzo")},pFKl:function(e,t,r){var n={"./discount-codes/discount-code-edit.tpl.html":"7n+d","./discount-codes/discount-codes.tpl.html":"DJNU","./membership-category/membership-category-edit.tpl.html":"gQ/F","./membership-category/membership-category-list.tpl.html":"1Kfe","./price-list/price-list-edit.tpl.html":"LnCy","./price-list/price-list-list.tpl.html":"ekOF","./product-categories/product-categories.tpl.html":"d7C/","./product/product-edit.tpl.html":"dSKb","./product/product-list.tpl.html":"BQwv","./reservation-category/reservation-category-edit.tpl.html":"+xqF","./reservation-category/reservation-category-list.tpl.html":"GaQu","./reservation-unit/reservation-unit-edit.tpl.html":"y0bl","./reservation-unit/reservation-unit-list.tpl.html":"w4nh"};function a(e){var t=f(e);return r(t)}function f(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=f,e.exports=a,a.id="pFKl"},qJVN:function(e,t,r){"use strict";r.r(t);var n=r("nbuU"),a=r.n(n),f=r("WSeP"),s=r.n(f);t.default=angular.module("deskworks.inventory.product.list",["deskworks.inventory.product.service"]).controller("ProductListCtrl",["$scope","$translate","state","helper","products","productService","optsProductType",function(e,t,r,n,f,l,i){var o,c=this;r.setPageTitle(t.instant("PRODUCTS.PAGE_TITLE")),c.collapsed=!0,c.productTypes=angular.copy(i),s()(o=c.productTypes).call(o,(function(e){e.products=[]})),c.customProducts={id:"custom",name:t.instant("PRODUCTS.LIST.CUSTOM"),products:[]},s()(f).call(f,(function(e){var t=a()(n).call(n,c.productTypes,e.type);e.custom?c.customProducts.products.push(e):t?t.products.push(e):console.warn("Product of unknown type:",e)})),c.edit=function(e){return r.setPath("/products/"+e.id)},c.new=function(){return r.setPath("/products/new")}}])},qqp4:function(e,t,r){r("zzoj");var n=r("/ZBe").Object,a=e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)};n.getOwnPropertyDescriptor.sham&&(a.sham=!0)},sSYk:function(e,t,r){var n=r("iddO"),a=r("loUa");n({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperties:r("5OOT")})},ubVp:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),a=r.n(n),f=r("9HME");t.default=angular.module("deskworks.inventory.priceList.list",["deskworks.inventory.priceList.service",f.a.name]).controller("PriceListListCtrl",["$rootScope","$scope","$timeout","$route","$translate","dwAlerts","state","helper","priceLists","centers","priceListService","lazyLoadReports",function(e,t,r,n,f,s,l,i,o,c,d,p){var u,m=this;l.setPageTitle(f.instant("PRICE_LISTS.PAGE_TITLE")),m.centers=c,m.dstCenterId=l.getCurrentCenterId(),m.priceLists=o,a()(u=m.priceLists).call(u,(function(e){e.include=!0})),m.editAfterCloning=!0,m.printCollapsed=!0,m.edit=function(e){return l.setPath("/pricelists/"+e.id)},m.clone=function(e){if(!(m.centers.length>1)||m.cloning)return d.clonePricelist(l.getCurrentCenterId(),e.id,m.dstCenterId).then((function(e){return m.editAfterCloning?(l.setCurrentCenterId(m.dstCenterId),l.setPath("/pricelists/"+e.id)):(n.reload(),r(5e3))})).catch((function(e){return s.error(e,"Failed to copy price list.")}));m.cloning=e},m.new=function(){return l.setPath("/pricelists/new")},m.togglePrint=function(){return p.then((function(){m.printCollapsed=!m.printCollapsed}))},e.$on("CHANGE-CENTER",(function(){n.reload()}))}])},uuTV:function(e,t){e.exports='<ff-panel> <ff-panel-header><span translate=PRINTER_USAGE_SETTINGS.FREE_COPIES.HEADER></span></ff-panel-header> <label class=ff-row ng-repeat="type in $ctrl.types"> <ff-label flex="0 1 200px"><req>{{$ctrl.typeNames[type.printerUsageType]}}</req></ff-label> <ff-number flex="0 0 50px" ff-model=type.freeCount ff-required=true ff-validate-alert="{{\'PRINTER_USAGE_SETTINGS.FREE_COPIES.FOR\' | translate:{ type: $ctrl.typeNames[type.printerUsageType] } }}"></ff-number> <ff-static></ff-static> </label> </ff-panel> '},w4nh:function(e,t){e.exports='<div class=reservation-unit-list ff-bulk-read-only> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class=gutter-v> <ff-panel> <span ng-if=!vm.reservationUnits.length translate=RESERVATION_UNITS.LIST.EMPTY></span> <ff-header ng-show="vm.reservationUnits.length > 0"> <ff-row> <cell flex="1 1 33%"><span translate=RESERVATION_UNITS.UNIT></span></cell> <cell flex="1 1 33%" class=show-sm><span translate=RESERVATION_UNITS.CATEGORY></span></cell> <cell flex="1 0 16%" class=ff-center><span translate=RESERVATION_UNITS.WHO_CAN_RESERVE></span></cell> <cell flex="1 0 16%" class=ff-center><span translate=RESERVATION_UNITS.SYNC_WITH_CALENDAR></span></cell> <ff-btn sense=edit size=xs flex=none class="buttons-row zero-height" title="{{\'GLOBAL.BTN_EDIT\' | translate}}"></ff-btn> </ff-row> </ff-header> <ff-row ng-repeat="unit in vm.reservationUnits"> <ff-static flex="1 1 33%" ff-bind=unit.name></ff-static> <ff-static flex="1 1 33%" class=show-sm ff-bind=unit.reservationTypeName></ff-static> <ff-static flex="1 0 16%" class=ff-center ff-bind=unit.whoCanReserve></ff-static> <ff-static flex="1 0 16%" class=ff-center ff-bind="unit.syncWithCalendar | yesno"></ff-static> <ff-btn sense=edit size=xs flex=none class=buttons-row ff-click=vm.edit(unit) title="{{\'GLOBAL.BTN_EDIT\' | translate}}"></ff-btn> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=new ff-click=vm.new()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </div> </div> '},xMQj:function(e,t,r){"use strict";r.r(t);r("8cZI");var n=r("6RpP"),a=r.n(n),f=r("0zKI"),s=r.n(f),l=r("nbuU"),i=r.n(l),o=r("WSeP"),c=r.n(o),d=r("hsT8"),p=r.n(d),u=r("uuTV"),m=r.n(u);angular.module("deskworks.printerUsageFreeCopies",["deskworks.printerUsageTypeNames"]).directive("printerUsageFreeCopies",(function(){return{template:m.a,restrict:"EAC",scope:!0,controller:"PrinterUsageFreeCopiesCtrl as $ctrl",bindToController:{types:"<freeCopiesSettings"}}})).controller("PrinterUsageFreeCopiesCtrl",["printerUsageTypeNames",function(e){var t=this;t.$onInit=function(){t.typeNames=e}}]),t.default=angular.module("deskworks.inventory.product.edit",["deskworks.inventory.product.service","deskworks.inventory.optsCountCheckInsPer","deskworks.printerUsageFreeCopies"]).controller("ProductEditCtrl",["$scope","$q","$timeout","$window","$translate","dwAlerts","state","helper","product","settings","productService","optsPassMin","optsPassMax","optsCountCheckInsPer","productCategories",function(e,t,r,n,f,l,o,d,u,m,g,v,b,T,E){var h,C,S=this;(o.setPageTitle(f.instant(u.id?"PRODUCTS.EDIT.PAGE_TITLE":"PRODUCTS.NEW.PAGE_TITLE")),S.settings=m,S.product=u,S.optsPassMin=v,S.optsPassMax=b,S.optsCountCheckInsPer=T,S.productCategories=p()(E).call(E,(function(e){return"0-00"!==e.code})),c()(h=S.productCategories).call(h,(function(e){e.fullName=d.join([e.name,"["+e.code+"]"]," ")})),S.passMinUnit=m.minPassInPercent?"pass":"time",m.minPassInPercent)||(S.optsPassMin=angular.copy(S.optsPassMin),c()(C=S.optsPassMin).call(C,(function(e){e.name+=" hr"})));S.product.options.passProducts=[],g.getProducts().then((function(e){angular.isArray(e)&&(c()(e).call(e,(function(e){"rental"===e.type&&S.product.options.passProducts.push(e)})),S.product.passProduct=i()(d).call(d,S.product.options.passProducts,S.product.passProductId))})),S.save=function(e){if(!d.pointFirstInvalid("#productEdit")){var n,a=!1;return S.product.id?n=t.all([g.updateProduct(S.product).catch((function(e){return l.error(e,"Failed to save product.")})),t.when(S.saveQuickBooks&&S.saveQuickBooks()),t.when(S.saveDeskworksSweep&&S.saveDeskworksSweep().catch(angular.noop))]):(a=!0,n=g.createProduct(S.product).catch((function(e){return l.error(e,"Failed to save product.")})).then((function(e){return S.product.id=e.id,e})).then((function(e){return r().then((function(){return e}))})).then((function(e){return t.when(S.saveDeskworksSweep&&S.saveDeskworksSweep().catch(angular.noop)).then((function(){return e}))}))),n.then((function(t){if(e.$setPristine(!0),a)return o.setPath("/products/"+t.id)}))}},S.remove=function(){if(confirm(f.instant("PRODUCTS.CONFIRM_DELETE")))return g.deleteProduct(S.product.id).catch((function(e){return l.error(e,"Failed to remove product.")})).then((function(){return o.setPath("/products")}))},S.back=function(){return o.setPath("/products")},S.addPriceList=function(){var e=d.uid();S.product.priceLists.push({id:e,priceListsId:S.product.options.priceLists[0].id,priceList:S.product.options.priceLists[0],price:"",passQty:0}),d.focus("#productPriceList-"+e+" select:first-of-type")},S.savePriceList=function(e,t){if(!d.pointFirstInvalid("#productPriceList-"+e.id)){var r={priceListId:e.priceList.id,price:e.price};return S.product.isCreditable&&(r.reservationCredit=e.reservationCredit),S.product.hasPasses&&(r.passQty=e.passQty),(d.isUid(e.id)?g.createPriceList(S.product.id,r):g.updatePriceList(S.product.id,e.id,r)).catch((function(e){return l.error(e,"Failed to save price list.")})).then((function(r){return d.isUid(e.id)&&(e.id=r.id),t.$setPristine(!0),r}))}},S.removePriceList=function(e,t){if(!d.isUid(e.id))return g.deletePriceList(S.product.id,e.id).catch((function(e){return l.error(e,"Failed to remove price list.")})).then((function(e){var r;return s()(r=S.product.priceLists).call(r,t,1),e}));var r;s()(r=S.product.priceLists).call(r,t,1)},S.getMemberSignUpUrl=function(){var e,t,r=window.location.origin,n=o.getCurrentCenterId(),f=S.product.id;return a()(e=a()(t="".concat(r,"/member-sign-up-landing?center=")).call(t,n,"&productId=")).call(e,f)}}])},y0bl:function(e,t){e.exports='<div class="ff-grid gutter-v"> <form name=$ctrl.form id=reservation-unit-edit novalidate ff-bulk-read-only> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v gutter-h"> <ff-panel flex="{ md: \'0 0 50%\' }"> <ff-panel-header> <span translate=RESERVATION_UNITS.GENERAL.HEADER></span> </ff-panel-header> <label class=ff-row> <ff-label flex="0 1 170px"><req translate=RESERVATION_UNITS.NAME></req></ff-label> <ff-text flex="1 1 300px" name=name ff-model=$ctrl.unit.name ff-required=true ff-validate-alert="{{\'RESERVATION_UNITS.NAME\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 170px"><req translate=RESERVATION_UNITS.CATEGORY></req></ff-label> <ff-select flex="1 1 300px" ff-model=$ctrl.unit.reservationTypeId ff-options="cat.id as cat.name for cat in $ctrl.categories" ff-required=true ff-validate-alert="{{\'RESERVATION_UNITS.CATEGORY\' | translate}}"></ff-select> </label> <label class=ff-row> <ff-label flex="0 1 170px"><span translate=RESERVATION_UNITS.DESCRIPTION></span></ff-label> <ff-text flex="1 1 300px" ff-model=$ctrl.unit.description></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 170px"><span translate=RESERVATION_UNITS.AREA translate-values="{ areaUnit: $ctrl.areaUnit }"></span></ff-label> <ff-number name=area flex="1 1 300px" ff-model=$ctrl.unit.area ff-validate-alert="{{\'RESERVATION_UNITS.AREA\' | translate: { areaUnit: $ctrl.areaUnit } }}"></ff-number> </label> <label class=ff-row> <ff-label flex="0 1 170px"> <span> <req translate=RESERVATION_UNITS.EXPECTED_USE_PER_MONTH></req> <ff-hint><span translate=RESERVATION_UNITS.EXPECTED_USE_PER_MONTH.HINT></span></ff-hint> </span> </ff-label> <ff-number flex="1 1 300px" ff-model=$ctrl.unit.expectedUsePerMonth ff-gte=0 ff-required=true ff-validate-alert="{{\'RESERVATION_UNITS.EXPECTED_USE_PER_MONTH\' | translate}}"></ff-number> </label> <ff-static> <label> <ff-checkbox ff-model=$ctrl.unit.syncWithCalendar ff-label="{{\'RESERVATION_UNITS.SYNC_WITH_CALENDAR\' | translate}}" ff-change=$ctrl.calSyncChange()></ff-checkbox> </label> </ff-static> <label class=ff-row> <ff-label flex="0 1 170px"> <span> <span translate=RESERVATION_UNITS.CALENDAR_ID></span> <ff-hint><span translate=RESERVATION_UNITS.CALENDAR_ID.HINT></span></ff-hint> </span> </ff-label> <ff-text flex="1 1 300px" name=calendarId ff-model=$ctrl.unit.calendarId ff-disabled=!$ctrl.calendarIdEnabled ff-validate-alert="{{\'RESERVATION_UNITS.CALENDAR_ID\' | translate}}"></ff-text> </label> </ff-panel> <ff-panel flex="{ md: \'0 0 50%\' }" ng-if="$ctrl.unit.id && $ctrl.unit.id !== \'new\'" ngf-drop="$ctrl.uploadPhoto($files, $invalidFiles)" ngf-pattern="\'image/png,image/jpeg\'" ngf-drag-over-class=dragover> <ff-panel-header> <span translate=GLOBAL.PHOTO></span> <ff-hint><span translate=RESERVATION_UNITS.PHOTO.HINT></span></ff-hint> </ff-panel-header> <ff-col style=height:100%> <ff-col flex=auto> <ff-img flex=auto ff-style="{ height: \'100%\', width: \'auto\', \'object-fit\': \'contain\' }" ff-src={{$ctrl.unit.thumbnail}} ff-src-hq={{$ctrl.unit.photo}} ff-alt={{$ctrl.unit.name}}></ff-img> </ff-col> <ff-btn-group flex=none class=ff-section-buttons> <ff-btn sense=upload size=sm ff-spin=$ctrl.spinUpload ngf-select="$ctrl.uploadPhoto($files, $invalidFiles)" ngf-pattern="\'image/png,image/jpeg\'" accept=image/png,image/jpeg> <span translate=GLOBAL.BTN_UPLOAD></span> </ff-btn> </ff-btn-group> </ff-col> </ff-panel> <ff-btn-group> <ff-btn sense=save type=submit ff-click=$ctrl.saveReservationUnit() ff-disabled=$ctrl.form.$pristine> <span translate=GLOBAL.BTN_SAVE></span> </ff-btn> <ff-btn sense=remove ng-if="$ctrl.unit.id !== \'new\'" ff-click=$ctrl.removeReservationUnit()> <span translate=GLOBAL.BTN_DELETE></span> </ff-btn> <ff-btn sense=back ff-click=$ctrl.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> </div> </form> <reservation-rules center-id=state.getCurrentCenterId() reservation-unit-id=$ctrl.unit.id ng-if="$ctrl.unit.id !== \'new\'" ff-bulk-read-only></reservation-rules> </div> '},yIgt:function(e,t,r){"use strict";r.r(t);r("JBxO"),r("FdtR");var n=r("I5Zy");t.default=angular.module("deskworks.inventory.membershipCategory.list",["deskworks.inventory.membershipCategory.service",n.a.name]).controller("MembershipCategoryListCtrl",["$scope","$translate","state","dnd","helper","dwAlerts","membershipCategories","membershipCategoryService",function(e,t,r,n,a,f,s,l){r.setPageTitle(t.instant("MEMBERSHIP_CATEGORIES.PAGE_TITLE")),this.membershipCategories=s,this.edit=function(e){return r.setPath("/membership-types/"+e.id)},this.new=function(){return r.setPath("/membership-types/new")},this.onDrop=function(e,t,r,a){var s=n.move(e,t,r,a);return s.$spin=!0,l.update(s.id,{order:s.order}).catch((function(e){return f.error(e,"Failed to reorder membership category.")})).finally((function(){return delete s.$spin})),!0}}])},yKah:function(e,t,r){e.exports=r("iDDw")},zzoj:function(e,t,r){var n=r("iddO"),a=r("wkvk"),f=r("Btbx"),s=r("3tq3").f,l=r("loUa"),i=a((function(){s(1)}));n({target:"Object",stat:!0,forced:!l||i,sham:!l},{getOwnPropertyDescriptor:function(e,t){return s(f(e),t)}})}}]);