{"version":3,"sources":["webpack:///./bundles/buy-pass sync .*\\.tpl\\.html$","webpack:///./bundles/buy-pass sync \\..+\\/.+\\.js$","webpack:///./bundles/buy-pass/index.js","webpack:///./bundles/buy-pass/steps/01-select-pass.controller.js","webpack:///./bundles/buy-pass/steps/01-select-pass.tpl.html","webpack:///./bundles/buy-pass/steps/02-sign-in.controller.js","webpack:///./bundles/buy-pass/steps/03-user-profile.controller.js","webpack:///./bundles/buy-pass/steps/04-purchase.controller.js","webpack:///./bundles/buy-pass/steps/04-purchase.tpl.html","webpack:///./bundles/buy-pass/steps/05-staff-help.controller.js","webpack:///./bundles/buy-pass/steps/06-complete.controller.js","webpack:///./bundles/buy-pass/steps/06-complete.tpl.html","webpack:///./shared/dw-invoice/dw-invoice-payment-processing-fee.directive.js","webpack:///./shared/need-help/need-help.directive.js","webpack:///./shared/new-billing-profile/new-billing-profile.directive.js","webpack:///./shared/new-billing-profile/new-billing-profile.tpl.html","webpack:///./shared/staff-help/staff-help.controller.js","webpack:///./shared/staff-help/staff-help.tpl.html","webpack:///./shared/templates/new-user-profile.tpl.html"],"names":["index","$injector","importAll","r","js","require","loadNewModules","m","default","name","invoke","$templateCache","ctx","forEach","key","put","replace","staffHelpTpl","userProfileTpl","angular","module","controller","$scope","$translate","state","helper","passes","$ctrl","setPageTitle","instant","pass","getParam","next","pointFirstInvalid","setPath","getPath","onPassChange","setParam","id","vm","$on","$event","stopPropagation","getLoggedUserId","$timeout","$q","$route","center","dwAlerts","userProfile","reg","userProfileService","purchaseService","phone","schema","new","userName","join","firstName","lastName","bindTestUserGenerator","when","registerNewUser","then","login","password","catch","err","error","createPurchase","getCurrentCenterId","undefined","finally","updateParams","userId","result","back","newBillingProfile","needHelp","dwInvoice","dwInvoicePaymentProcessingFee","user","purchase","spin","saveBillingProfile","_","balance","createPayment","updatePurchase","accessCode","current","params","purchaseId","get","staffHelp","createStaffHelp","notice","$window","event","ctrl","$$route","preventDefault","home","location","href","newUrl","indexOf","start","directive","restrict","scope","bindToController","invoice","settings","creditCards","eChecks","$onChanges","enablePaymentProcessingCharges","rate","length","paymentProcessingRates","cc","ach","prevIdx","items","i","fee","round","item","addedBy","amount","billedAt","moment","createdAt","description","price","quantity","push","isUndefined","chargesTotalInitial","chargesTotal","balanceInitial","controllerAs","template","$onInit","creditCardTypes","ccType","enable","type","creditCard","$watchCollection","methods","paymentMethodId","billingMethod","bindTestBillingGenerator","isSingleMode","eCheck","isNew","deskworksConfig","origin","centerId","logout","resetParams","setCurrentCenterId","getDefaultRoute"],"mappings":"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","file":"buy-pass~._b.js?_rev=a19b7c0c30a4124f727e","sourcesContent":["var map = {\n\t\"./steps/01-select-pass.tpl.html\": \"./bundles/buy-pass/steps/01-select-pass.tpl.html\",\n\t\"./steps/04-purchase.tpl.html\": \"./bundles/buy-pass/steps/04-purchase.tpl.html\",\n\t\"./steps/06-complete.tpl.html\": \"./bundles/buy-pass/steps/06-complete.tpl.html\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/buy-pass sync recursive .*\\\\.tpl\\\\.html$\";","var map = {\n\t\"./steps/01-select-pass.controller.js\": \"./bundles/buy-pass/steps/01-select-pass.controller.js\",\n\t\"./steps/02-sign-in.controller.js\": \"./bundles/buy-pass/steps/02-sign-in.controller.js\",\n\t\"./steps/03-user-profile.controller.js\": \"./bundles/buy-pass/steps/03-user-profile.controller.js\",\n\t\"./steps/04-purchase.controller.js\": \"./bundles/buy-pass/steps/04-purchase.controller.js\",\n\t\"./steps/05-staff-help.controller.js\": \"./bundles/buy-pass/steps/05-staff-help.controller.js\",\n\t\"./steps/06-complete.controller.js\": \"./bundles/buy-pass/steps/06-complete.controller.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/buy-pass sync recursive \\\\..+\\\\/.+\\\\.js$\";","import 'shared/need-help/need-help.directive';\nimport 'shared/staff-help/staff-help.controller';\nimport staffHelpTpl from 'shared/staff-help/staff-help.tpl.html';\nimport userProfileTpl from 'shared/templates/new-user-profile.tpl.html';\n\nconst index = ['$injector', function index($injector) {\n  // JS\n  const importAll = r => r.keys().map(r);\n  const js = importAll(require.context('./', true, /\\..+\\/.+\\.js$/));\n  $injector.loadNewModules(js.map(m => m.default.name));\n\n  // Templates\n  $injector.invoke(['$templateCache', function($templateCache) {\n    const ctx = require.context('./', true, /.*\\.tpl\\.html$/);\n    ctx.keys().forEach(key => $templateCache.put(key.replace(/^\\.\\//, ''), ctx(key)));\n\n    $templateCache.put('staff-help/staff-help.tpl.html', staffHelpTpl);\n    $templateCache.put('templates/new-user-profile.tpl.html', userProfileTpl);\n  }]);\n}];\n\nexport default index;\n","export default angular.module('deskworks.buyPass.selectPass', [\n  'ngRoute',\n  'deskworks.helper'\n])\n\n  .controller('BuyPassSelectPassCtrl', function($scope, $translate, state, helper, passes) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('BUY_PASS.SELECT_PASS.PAGE_TITLE'));\n\n    $ctrl.passes = passes;\n    $ctrl.pass = helper.find($ctrl.passes, state.getParam('pass'));\n\n    /**\n     * Next button handler\n     */\n    $ctrl.next = function() {\n      if (helper.pointFirstInvalid('#selectPass')) return;\n      return state.setPath(state.getPath() + '/user');\n    };\n\n    /**\n     * Pass change handler, maps selected pass to URL\n     */\n    $ctrl.onPassChange = function() {\n      state.replace();\n      state.setParam('pass', $ctrl.pass.id);\n    };\n  });\n","// Module\nvar code = \"<form name=\\\"formSelectPass\\\" id=\\\"selectPass\\\"> <h1 class=\\\"page-title flex\\\"> <span>{{state.getPageTitle()}}</span> <need-help phone=\\\"$resolve.center.phone\\\"></need-help> </h1> <ff-board class=\\\"ff-no-frame\\\"> <div class=\\\"ff-grid ff-gutter-v ff-gutter-h\\\"> <ff-panel flex=\\\"{md: '0 0 50%'}\\\"> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"1 0 124px\\\" class=\\\"em\\\"> <span translate=\\\"BUY_PASS.SELECT_PASS.HEADER\\\"></span> </ff-label> <ff-select flex=\\\"1 1 70%\\\" name=\\\"pass\\\" ff-model=\\\"$ctrl.pass\\\" ff-options=\\\"pass.name for pass in $ctrl.passes\\\" ff-change=\\\"$ctrl.onPassChange()\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'BUY_PASS.SELECT_PASS.PASS' | translate}}\\\"> </ff-select> </label> <label class=\\\"ff-row\\\"> <ff-label flex=\\\"1 0 124px\\\" class=\\\"em\\\"> <span translate=\\\"BUY_PASS.SELECT_PASS.PRICE\\\"></span> </ff-label> <ff-static flex=\\\"1 1 100%\\\" ff-bind=\\\"$ctrl.pass.price | nd | ncurrency\\\" name=\\\"price\\\"></ff-static> </label> </ff-panel> <ff-panel flex=\\\"{md: '0 0 50%'}\\\"> <span class=\\\"pre-description\\\" translate=\\\"BUY_PASS.SELECT_PASS.NOTE\\\"></span> </ff-panel> </div> </ff-board> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"next\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.next()\\\"> <span translate=\\\"GLOBAL.BTN_NEXT\\\"></span> </ff-btn> </ff-btn-group> </form> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.buyPass.signIn', [\n  'flexForms',\n  'deskworks.state',\n  'deskworks.config',\n  'deskworks.dwSignIn'\n])\n\n  .controller('BuyPassSignInCtrl', function($scope, $translate, state) {\n    var vm = this;\n\n    state.setPageTitle($translate.instant('SIGN_IN.PAGE_TITLE'));\n\n    /**\n     * dwSignIn:SignIn event listener, proceeds to Buy Pass / User Profile\n     */\n    $scope.$on('dwSignIn:SignIn', function($event) {\n      $event.stopPropagation();\n      state.replace(); // hide sign-in step in history to skip it with back button\n      state.setPath(state.getPath() + '/' + state.getLoggedUserId());\n    });\n\n    /**\n     * dwSignIn:SignUp event listener, proceeds to Buy Pass / Non-member Self-registration\n     */\n    $scope.$on('dwSignIn:SignUp', function($event) {\n      $event.stopPropagation();\n      state.setPath(state.getPath() + '/new');\n    });\n  });\n","export default angular.module('deskworks.buyPass.userProfile', [\n  'ngRoute',\n  'deskworks.userProfile.service',\n  'deskworks.helper',\n  'needHelp',\n])\n\n  .controller('BuyPassUserProfileCtrl', function($scope, $timeout, $q, $route, $translate,\n                                                 helper, state, center, dwAlerts, userProfile, reg,\n                                                 userProfileService, purchaseService) {\n    const vm = this;\n\n    vm.reg = reg;\n    vm.reg.phone = center.phone;\n    vm.userProfile = userProfile;\n    vm.schema = userProfile.schema;\n\n    state.setPageTitle(\n      $translate.instant(vm.reg.new ? 'USER_PROFILE.NEW_USER.PAGE_TITLE' : 'USER_PROFILE.PAGE_TITLE',\n        { userName: helper.join([vm.userProfile.firstName, vm.userProfile.lastName], ' ') })\n    );\n\n    /**\n     * Bind test user data generator\n     */\n    userProfileService.bindTestUserGenerator($scope, vm.userProfile, vm.reg);\n\n    /**\n     * Next button handler\n     */\n    vm.next = function() {\n      if (helper.pointFirstInvalid('#userProfile')) return;\n\n      return $q.when(vm.reg.new && userProfileService.registerNewUser(0, vm.userProfile))\n        .then(function() {\n          if (vm.reg.new) { // need to login under just created user\n            return state.login(vm.userProfile.login, vm.userProfile.password)\n              .catch(err => dwAlerts.error(err, 'Failed to log in with created user.'));\n          }\n        })\n        .then(function() {\n          return purchaseService.createPurchase(state.getCurrentCenterId(), vm.userProfile.id, undefined, state.getParam('pass'))\n            .catch(err => dwAlerts.error(err, 'Failed to create purchase.'))\n            .finally(() => {\n              if (vm.reg.new) {\n                state.replace();\n                $route.updateParams({ userId: vm.userProfile.id });\n              }\n            });\n        })\n        .then(result => $timeout(() => state.setPath(state.getPath() + '/purchase/' + result.id)));\n    };\n\n    /**\n     * Back button handler\n     */\n    vm.back = () => state.setPath('/buy-pass');\n  });\n","import newBillingProfile from 'shared/new-billing-profile/new-billing-profile.directive';\nimport needHelp from 'shared/need-help/need-help.directive';\nimport dwInvoice from 'shared/dw-invoice/dw-invoice.directive';\nimport dwInvoicePaymentProcessingFee from 'shared/dw-invoice/dw-invoice-payment-processing-fee.directive';\n\nexport default angular.module('deskworks.buyPass.purchase', [\n  'ngRoute',\n  'deskworks.purchase.service',\n  'deskworks.userProfile.service',\n  newBillingProfile.name,\n  needHelp.name,\n  dwInvoice.name,\n  dwInvoicePaymentProcessingFee.name,\n])\n\n  .controller('BuyPassPurchaseCtrl', function($scope, $route, $translate, $timeout, helper, dwAlerts, state,\n                                              user, purchase, purchaseService, userProfileService) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('BUY_PASS.PURCHASE.PAGE_TITLE'));\n\n    $ctrl.purchase = purchase;\n\n    /**\n     * Next button handler\n     */\n    $ctrl.next = function() {\n      if (helper.pointFirstInvalid('#newBillingProfile')) return;\n\n      $ctrl.spin = true;\n      return userProfileService.saveBillingProfile(state.getCurrentCenterId(), user)\n        .then(_ => {\n          if (+$ctrl.purchase.balance <= 0) return state.setPath(state.getPath() + '/complete');\n\n          return $ctrl.createPayment()\n            .then(result => $ctrl.updatePurchase().then(_ => result))\n            .then(result => {\n              state.replace().setParam('accessCode', result.accessCode);\n              return $timeout(_ => state.setPath(state.getPath() + '/complete'));\n            });\n        })\n        .finally(_ => { $ctrl.spin = false; });\n    };\n\n    /**\n     * Create payment\n     */\n    $ctrl.createPayment = _ => purchaseService.createPayment(state.getCurrentCenterId(), $route.current.params.userId, $route.current.params.purchaseId, {}, undefined, state.getParam('pass'))\n      .catch(err => dwAlerts.error(err, 'Failed to make payment.'));\n\n    /**\n     * Update purchase order\n     */\n    $ctrl.updatePurchase = _ => purchaseService.get(state.getCurrentCenterId(), $route.current.params.userId, $route.current.params.purchaseId)\n      .catch(err => dwAlerts.error(err, 'Failed to get purchase.'))\n      .then(purchase => { $ctrl.purchase = purchase; });\n\n    /**\n     * Back button handler\n     */\n    $ctrl.back = function() {\n      return state.setPath(`/buy-pass/user/${user.id}`);\n    };\n\n    /**\n     * Staff Help button handler\n     */\n    $ctrl.staffHelp = function() {\n      return purchaseService.createStaffHelp(state.getCurrentCenterId(), $route.current.params.userId, $ctrl.purchase.id)\n        .catch(err => dwAlerts.error(err, 'Failed to create staff help.'))\n        .then(result => {\n          state.setParam('notice', result.notice);\n          return state.setPath(state.getPath() + '/staff-help');\n        });\n    };\n  });\n","// Module\nvar code = \"<div> <h1 class=\\\"page-title flex\\\"> <span>{{state.getPageTitle()}}</span> <need-help phone=\\\"$resolve.center.phone\\\"></need-help> </h1> <form id=\\\"buyPassPurchase\\\" class=\\\"ff-grid gutter-v gutter-h\\\" novalidate ff-dim=\\\"$ctrl.spin\\\"> <ff-panel> <ff-panel-header> <span translate=\\\"SIMPLE_RES.PURCHASE.ORDER.HEADER\\\" translate-values=\\\"{ orderId: $ctrl.purchase.orderId }\\\"></span> </ff-panel-header> <dw-invoice invoice=\\\"$ctrl.purchase\\\" center=\\\"$resolve.center\\\" allow-remove=\\\"false\\\" dw-invoice-payment-processing-fee settings=\\\"$resolve.settings\\\" credit-cards=\\\"$resolve.user.creditCards\\\" e-checks=\\\"$resolve.user.eChecks\\\"></dw-invoice> </ff-panel> <div> <ff-panel-header> <div translate=\\\"BILLING_PROFILE.PAGE_TITLE\\\" translate-values=\\\"{ userName: $resolve.user.fullNameCompany }\\\"></div> <small translate=\\\"GLOBAL.REQUIRED_FIELDS_MARKED_WITH\\\"></small> </ff-panel-header> <new-billing-profile user=\\\"$resolve.user\\\" settings=\\\"$resolve.settings\\\" id=\\\"newBillingProfile\\\" class=\\\"ff-grid gutter-v\\\"></new-billing-profile> </div> <ff-btn-group> <ff-btn sense=\\\"help\\\" ff-click=\\\"$ctrl.staffHelp()\\\"><span translate=\\\"GLOBAL.BTN_STAFF_HELP\\\"></span></ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> <ff-btn sense=\\\"next\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.next()\\\"><span translate=\\\"GLOBAL.BTN_NEXT\\\"></span></ff-btn> </ff-btn-group> </form> </div> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.buyPass.staffHelp', [\n  'ngRoute',\n  'deskworks.helper',\n  'deskworks.config',\n])\n\n  .controller('BuyPassStaffHelpCtrl', function($scope, $timeout, $window, $translate, dwAlerts, helper, state) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('SIMPLE_RES.STAFF_HELP.PAGE_TITLE'));\n\n    vm.notice = state.getParam('notice');\n\n    /**\n     * Prevent using Back button\n     */\n    $scope.$on('$routeChangeStart', function(event, next, current){\n      const ctrl = next.$$route && next.$$route.controller;\n      if (ctrl === 'BuyPassPurchaseCtrl' || ctrl === 'BuyPassBillingCtrl') {\n        dwAlerts.error($translate.instant('SIMPLE_RES.STAFF_HELP.BACK_ERROR'));\n        event.preventDefault();\n      }\n    });\n\n    /**\n     * Home button handler\n     */\n    vm.home = function() {\n      $window.location.href = state.getParam('redirect');\n      return $timeout(10000);\n    };\n  });\n","export default angular.module('deskworks.BuyPassCompleteCtrl', [])\n\n  .controller('BuyPassCompleteCtrl', function($scope, $timeout, $translate, $window, state, helper, dwAlerts) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('BUY_PASS.COMPLETE.PAGE_TITLE'));\n\n    $ctrl.accessCode = state.getParam('accessCode');\n\n    /**\n     * Prevent using Back button\n     */\n    $scope.$on('$locationChangeStart', function(event, newUrl) {\n      if (newUrl && newUrl.indexOf('/buy-pass') >= 0) {\n        event.preventDefault();\n        dwAlerts.error($translate.instant('BUY_PASS.COMPLETE.BACK_ERROR'));\n      }\n    });\n\n    /**\n     * Start button handler\n     */\n    $ctrl.start = function() {\n      $window.location.href = state.getParam('redirect') + '&accessCode=' + $ctrl.accessCode;\n      return $timeout(15000);\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"buyPassComplete\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <ff-panel> <span translate=\\\"BUY_PASS.COMPLETE.TEXT\\\" translate-values=\\\"{ accessCode: $ctrl.accessCode }\\\"></span> </ff-panel> <ff-btn-group class=\\\"buttons-bottom\\\" ng-class=\\\"{'ff-center': !vm.purchase}\\\"> <ff-btn sense=\\\"next\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.start()\\\"><span translate=\\\"BUY_PASS.COMPLETE.BTN_START\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","/**\n * dwInvoicePaymentProcessingFee directive -\n */\nexport default angular.module('deskworks.dwInvoicePaymentProcessingFee', [\n  'deskworks.state',\n  'deskworks.helper',\n])\n\n  .directive('dwInvoicePaymentProcessingFee', function() {\n    return {\n      restrict: 'A',\n      scope: true,\n      controller: 'DwInvoicePaymentProcessingFeeCtrl as $ctrl',\n      bindToController: {\n        invoice: '<',\n        settings: '<',\n        creditCards: '<',\n        eChecks: '<',\n      },\n    };\n  })\n\n  .controller('DwInvoicePaymentProcessingFeeCtrl', function($scope, $timeout, state, helper) {\n    const $ctrl = this;\n\n    $ctrl.$onChanges = () => $timeout(() => {\n      if (!$ctrl.invoice || !$ctrl.settings || !$ctrl.creditCards || !$ctrl.eChecks) return;\n      if (!$ctrl.settings.enablePaymentProcessingCharges) return;\n\n      let rate = 0;\n\n      if ($ctrl.creditCards.length) rate = $ctrl.settings.paymentProcessingRates.cc || 0;\n      else if ($ctrl.eChecks.length) rate = $ctrl.settings.paymentProcessingRates.ach || 0;\n\n      const prevIdx = $ctrl.invoice.items.findIndex(i => i.id === 'fake-payment-processing-fee');\n      if (prevIdx >= 0) $ctrl.invoice.items.splice(prevIdx, 1); // remove exiting fake-payment-processing-fee\n\n      if (!rate || !+$ctrl.invoice.balance) return;\n\n      const fee = helper.round(rate * +$ctrl.invoice.balance / 100);\n\n      const item = {\n        addedBy: 'system',\n        amount: fee,\n        billedAt: moment(),\n        createdAt: moment(),\n        description: \"Payment processing fee\",\n        id: \"fake-payment-processing-fee\",\n        name: \"Payment Fee\",\n        price: fee,\n        quantity: 1,\n      };\n\n      $ctrl.invoice.items.push(item);\n\n      if (angular.isUndefined($ctrl.invoice.chargesTotalInitial)) {\n        $ctrl.invoice.chargesTotalInitial = +$ctrl.invoice.chargesTotal;\n      }\n      if (angular.isUndefined($ctrl.invoice.balanceInitial)) {\n        $ctrl.invoice.balanceInitial = +$ctrl.invoice.balance;\n      }\n\n      $ctrl.invoice.chargesTotal = helper.round($ctrl.invoice.chargesTotalInitial + fee);\n      $ctrl.invoice.balance = helper.round($ctrl.invoice.balanceInitial + fee);\n    });\n  });\n\n","/**\n * Need help? Phone 1-800-000-000.\n */\nexport default angular.module('needHelp', [])\n  .directive('needHelp', function() {\n    return {\n      restrict: 'E',\n      scope: true,\n      controller: function() {},\n      controllerAs: '$ctrl',\n      template: '<span translate=\"GLOBAL.NEED_HELP\" class=\"need-help\" ng-if=\"$ctrl.phone\" ' +\n        'translate-values=\"{ phone: \\'<a href=&quot;tel:\\' + $ctrl.phone + \\'&quot;>\\' + $ctrl.phone + \\'</a>\\' }\"></span>',\n      bindToController: {\n        phone: '<',\n      },\n    };\n  });\n","import template from './new-billing-profile.tpl.html';\n\n/**\n * New Billing Profile\n */\nexport default angular.module('newBillingProfile', [])\n\n  .directive('newBillingProfile', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'NewBillingProfileCtrl as $ctrl',\n      bindToController: {\n        settings: '<',\n        user: '<',\n      },\n    };\n  })\n\n  .controller('NewBillingProfileCtrl', function($scope, userProfileService) {\n    const $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = () => {\n      // filter credit card types according to settings\n      $ctrl.settings.creditCardTypes = $ctrl.settings.creditCardTypes.filter(ccType => ccType.enable);\n\n      $ctrl.user.creditCards.forEach(cc => {\n        cc.type = $ctrl.settings.creditCardTypes.find(type => type.id === cc.type) || cc.type || {};\n      });\n\n      // add one CC if no payment methods\n      $ctrl.user.creditCards = $ctrl.user.creditCards || [];\n      if (!$ctrl.user.creditCards.length && !$ctrl.user.eChecks.length) {\n        const cc = userProfileService.creditCard.new($ctrl.user);\n        cc.type = $ctrl.settings.creditCardTypes[0];\n        $ctrl.user.creditCards.push(cc);\n      }\n\n      $scope.$watchCollection(_ => $ctrl.user.creditCards.concat($ctrl.user.eChecks), methods => {\n        if (methods && $ctrl.user.paymentMethodId && !methods.find(m => m.id === $ctrl.user.paymentMethodId)) {\n          $ctrl.user.billingMethod = null; // reset billing/payment method when payment method deleted\n          $ctrl.user.paymentMethodId = null;\n        }\n      });\n\n      userProfileService.bindTestBillingGenerator($scope, $ctrl.user); // Bind test user data generator\n    };\n\n    $ctrl.isSingleMode = () => {\n      const { creditCards, eChecks } = $ctrl.user;\n      return !creditCards.length && (!eChecks.length || userProfileService.eCheck.isNew(eChecks[0])) ||\n        !eChecks.length && (!creditCards.length || userProfileService.creditCard.isNew(creditCards[0]));\n    };\n  });\n","// Module\nvar code = \"<span translate=\\\"BILLING_PROFILE.PAYMENT_METHOD.EMPTY\\\" ng-if=\\\"$ctrl.showSwitchCC() && $ctrl.showSwitchACH()\\\"></span> <up-billing-method user=\\\"$ctrl.user\\\" settings=\\\"$ctrl.settings\\\" ng-if=\\\"!$ctrl.isSingleMode()\\\"></up-billing-method> <up-credit-cards user-profile=\\\"$ctrl.user\\\" settings=\\\"$ctrl.settings\\\" single=\\\"$ctrl.isSingleMode()\\\" ng-if=\\\"$ctrl.user.creditCards.length || !$ctrl.isSingleMode()\\\"></up-credit-cards> <up-e-checks user-profile=\\\"$ctrl.user\\\" single=\\\"$ctrl.isSingleMode()\\\" ng-if=\\\"$ctrl.settings.enableEChecks && ($ctrl.user.eChecks.length || !$ctrl.isSingleMode())\\\"></up-e-checks> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.StaffHelpCtrl', [\n  'ngRoute',\n  'deskworks.helper',\n  'deskworks.config',\n])\n\n  .controller('StaffHelpCtrl', function($scope, $timeout, $q, $route, $window, $translate, dwAlerts,\n                                        helper, state, deskworksConfig) { 'use strict';\n    const vm = this;\n\n    vm.notice = state.getParam('notice');\n\n    state.setPageTitle($translate.instant('SIMPLE_RES.STAFF_HELP.PAGE_TITLE'));\n\n    /**\n     * Prevent using Back button\n     */\n    $scope.$on('$routeChangeStart', (event, next, current) => {\n      if (next.$$route && (\n          next.$$route.controller === 'MemberSignUpBillingCtrl' || next.$$route.controller === 'MemberSignUpPurchaseCtrl' ||\n          next.$$route.controller === 'SimpleReservationBillingCtrl' || next.$$route.controller === 'SimpleReservationPurchaseCtrl' ||\n          next.$$route.controller === 'BuyPassBillingCtrl' || next.$$route.controller === 'BuyPassPurchaseCtrl')\n      ) {\n        dwAlerts.error($translate.instant('SIMPLE_RES.STAFF_HELP.BACK_ERROR'));\n        event.preventDefault();\n      }\n    });\n\n    /**\n     * Next button handler\n     */\n    vm.home = function() {\n      if (state.getParam('redirect')) { // redirect to splash page from Buy A Pass flow\n        $window.location.href = state.getParam('redirect');\n      } else {\n        const origin = state.getParam('origin');\n        const centerId = state.getCurrentCenterId();\n        (origin ? state.logout() : $q.when())\n          .finally(() => { // If origin presents, log out\n            state.resetParams();\n            if (origin) state.setCurrentCenterId(centerId);\n            return state.setPath(origin || deskworksConfig.getDefaultRoute());\n          });\n      }\n\n      return $timeout(10000);\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"staffHelp\\\" class=\\\"ff-tmargin\\\"> <ff-board> <ff-panel> <span ng-bind=\\\"::vm.notice\\\"></span> </ff-panel> </ff-board> <ff-btn-group class=\\\"buttons-bottom ff-center\\\"> <ff-btn sense=\\\"home\\\" type=\\\"submit\\\" ff-click=\\\"vm.home()\\\"><span translate=\\\"GLOBAL.BTN_HOME\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"user-profile\\\" id=\\\"userProfile\\\"> <h1 class=\\\"page-title flex\\\"> <span> {{state.getPageTitle()}} <span ng-if=\\\"vm.reg.member && !vm.reg.selfRegistration\\\" ng-style=\\\"{ color: vm.center.color }\\\">{{vm.center.name}}</span> </span> <need-help phone=\\\"vm.reg.phone\\\"></need-help> </h1> <ff-board> <ff-panel role=\\\"article\\\" aria-label=\\\"{{'USER_PROFILE.USER_PROFILE' | translate}}\\\"> <ff-panel-header ng-if=\\\"vm.reg\\\"> <span translate=\\\"GLOBAL.STEP_X_OF_Y\\\" translate-values=\\\"vm.reg\\\" ng-if=\\\"vm.reg.stepCount\\\"></span> <small translate=\\\"GLOBAL.REQUIRED_FIELDS_MARKED_WITH\\\"></small> </ff-panel-header> <div class=\\\"ff-grid ff-gutter-v ff-gutter-h\\\"> <up-personal-info user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\"></up-personal-info> <up-addresses flex=\\\"{md: '0 0 50%'}\\\" user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" center=\\\"vm.center\\\" single=\\\"true\\\"></up-addresses> <div flex=\\\"{md: '0 0 50%'}\\\"> <div class=\\\"ff-grid ff-gutter-v\\\"> <up-login-info user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" member-directory-url=\\\"wlLinks.memberDirectoryUrl\\\"></up-login-info> <up-phones user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" single=\\\"true\\\"></up-phones> </div> </div> <up-photo flex=\\\"{md: '0 0 50%'}\\\" user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\"></up-photo> <div flex=\\\"{md: '0 0 50%'}\\\"> <div class=\\\"ff-grid ff-gutter-v\\\"> <up-lead-source user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\"></up-lead-source> <up-terms-of-service user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\"></up-terms-of-service> </div> </div> </div> </ff-panel> </ff-board> <ff-btn-group class=\\\"buttons-bottom\\\" ng-if=\\\"vm.reg\\\"> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\" ng-if=\\\"vm.back\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> <ff-btn sense=\\\"next\\\" ff-click=\\\"vm.next()\\\"><span translate=\\\"GLOBAL.BTN_NEXT\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}