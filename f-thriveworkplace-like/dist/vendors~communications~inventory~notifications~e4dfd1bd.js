(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"0rqx":function(e,t,n){},diuS:function(e,t,n){var r,o;void 0===(o="function"==typeof(r=function(){var e=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],t=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],n=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],r=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function o(e,t){var n=typeof e[t];return"function"==n||!("object"!=n||!e[t])||"unknown"==n}function a(e,t){return!("object"!=typeof e[t]||!e[t])}function i(e,t){return void 0!==e[t]}function s(e){return function(t,n){for(var r=n.length;r--;)if(!e(t,n[r]))return!1;return!0}}var c=s(o),d=s(a),f=s(i);function u(e){return e&&c(e,r)&&f(e,n)}function l(e){return a(e,"body")?e.body:e.getElementsByTagName("body")[0]}var h,g,p={},m="undefined"!=typeof window&&"undefined"!=typeof document,v={isHostMethod:o,isHostObject:a,isHostProperty:i,areHostMethods:c,areHostObjects:d,areHostProperties:f,isTextRange:u,getBody:l,forEach:[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,r=e.length;n<r;++n)t(e[n],n)}},R={version:"1.3.0",initialized:!1,isBrowser:m,supported:!0,util:v,features:{},modules:p,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:"undefined"==typeof rangyAutoInitialize||rangyAutoInitialize}};function C(e){"undefined"!=typeof console&&o(console,"log")&&console.log(e)}function N(e,t){m&&t?alert(e):C(e)}function E(e){R.initialized=!0,R.supported=!1,N("Rangy is not supported in this environment. Reason: "+e,R.config.alertOnFail)}R.fail=E,R.warn=function(e){N("Rangy warning: "+e,R.config.alertOnWarn)},{}.hasOwnProperty?(v.extend=h=function(e,t,n){var r,o;for(var a in t)t.hasOwnProperty(a)&&(r=e[a],o=t[a],n&&null!==r&&"object"==typeof r&&null!==o&&"object"==typeof o&&h(r,o,!0),e[a]=o);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},v.createOptions=function(e,t){var n={};return h(n,t),e&&h(n,e),n}):E("hasOwnProperty not supported"),m||E("Rangy can only run in a browser"),function(){var e;if(m){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(e){}}e||(e=function(e){for(var t=[],n=0,r=e.length;n<r;++n)t[n]=e[n];return t}),v.toArray=e}(),m&&(o(document,"addEventListener")?g=function(e,t,n){e.addEventListener(t,n,!1)}:o(document,"attachEvent")?g=function(e,t,n){e.attachEvent("on"+t,n)}:E("Document does not have required addEventListener or attachEvent method"),v.addListener=g);var S=[];function w(e){return e.message||e.description||String(e)}function y(){if(m&&!R.initialized){var n,r=!1,a=!1;o(document,"createRange")&&(n=document.createRange(),c(n,t)&&f(n,e)&&(r=!0));var i=l(document);if(i&&"body"==i.nodeName.toLowerCase())if(i&&o(i,"createTextRange")&&u(n=i.createTextRange())&&(a=!0),r||a){var s;for(var d in R.initialized=!0,R.features={implementsDomRange:r,implementsTextRange:a},p)(s=p[d])instanceof D&&s.init(s,R);for(var h=0,g=S.length;h<g;++h)try{S[h](R)}catch(e){C("Rangy init listener threw an exception. Continuing. Detail: "+w(e))}}else E("Neither Range nor TextRange are available");else E("No body element found")}}function T(e,t,n){n&&(e+=" in module "+n.name),R.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function O(e,t,n,r){e[t]=function(){return T(t,n,r),e[n].apply(e,v.toArray(arguments))}}v.deprecationNotice=T,v.createAliasForDeprecatedMethod=O,R.init=y,R.addInitListener=function(e){R.initialized?e(R):S.push(e)};var _=[];function D(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function A(e,t,n){var r=new D(e,t,(function(t){if(!t.initialized){t.initialized=!0;try{n(R,t),t.supported=!0}catch(t){C("Module '"+e+"' failed to load: "+w(t)),t.stack&&C(t.stack)}}}));return p[e]=r,r}function x(){}R.addShimListener=function(e){_.push(e)},m&&(R.shim=R.createMissingNativeApi=function(e){e=e||window,y();for(var t=0,n=_.length;t<n;++t)_[t](e)},O(R,"createMissingNativeApi","shim")),D.prototype={init:function(){for(var e,t,n=this.dependencies||[],r=0,o=n.length;r<o;++r){if(t=n[r],!((e=p[t])&&e instanceof D))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){R.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){R.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},R.createModule=function(e){var t,n;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]);var r=A(e,n,t);R.initialized&&R.supported&&r.init()},R.createCoreModule=function(e,t,n){A(e,t,n)},R.RangePrototype=x,R.rangePrototype=new x,R.selectionPrototype=new function(){},R.createCoreModule("DomUtil",[],(function(e,t){var n="undefined",r=e.util,o=r.getBody;r.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),r.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var a=document.createElement("div");r.areHostMethods(a,["insertBefore","appendChild","cloneNode"]||!1)||t.fail("Incomplete Element implementation"),r.isHostProperty(a,"innerHTML")||t.fail("Element is missing innerHTML property");var i=document.createTextNode("test");r.areHostMethods(i,["splitText","deleteData","insertData","appendData","cloneNode"]||!1)||t.fail("Incomplete Text Node implementation");var s=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};function c(e){for(var t=0;e=e.previousSibling;)++t;return t}function d(e,t){var n,r=[];for(n=e;n;n=n.parentNode)r.push(n);for(n=t;n;n=n.parentNode)if(s(r,n))return n;return null}function f(e,t,n){for(var r=n?t:t.parentNode;r;){if(r===e)return!0;r=r.parentNode}return!1}function u(e,t,n){for(var r,o=n?e:e.parentNode;o;){if((r=o.parentNode)===t)return o;o=r}return null}function l(e){var t=e.nodeType;return 3==t||4==t||8==t}function h(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function g(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=n)return e.ownerDocument;if(typeof e.document!=n)return e.document;if(e.parentNode)return g(e.parentNode);throw t.createError("getDocument: no document found for node")}function p(e){var r=g(e);if(typeof r.defaultView!=n)return r.defaultView;if(typeof r.parentWindow!=n)return r.parentWindow;throw t.createError("Cannot get a window object for node")}function m(e){if(typeof e.contentDocument!=n)return e.contentDocument;if(typeof e.contentWindow!=n)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function v(e){return e&&r.isHostMethod(e,"setTimeout")&&r.isHostObject(e,"document")}var R,C=!1;function N(e){try{return e.parentNode,!1}catch(e){return!0}}function E(e){if(!e)return"[No node]";if(C&&N(e))return"[Broken node]";if(l(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+c(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function S(e){this.root=e,this._next=e}function w(e,t){this.node=e,this.offset=t}function y(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}!function(){var t=document.createElement("b");t.innerHTML="1";var n=t.firstChild;t.innerHTML="<br />",C=N(n),e.features.crashyTextNodes=C}(),typeof window.getComputedStyle!=n?R=function(e,t){return p(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=n?R=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found"),S.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},w.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+E(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},y.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},y.prototype.toString=function(){return this.message},e.dom={arrayContains:s,isHtmlNamespace:function(e){var t;return typeof e.namespaceURI==n||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t},parentElement:function(e){var t=e.parentNode;return 1==t.nodeType?t:null},getNodeIndex:c,getNodeLength:function(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}},getCommonAncestor:d,isAncestorOf:f,isOrIsAncestorOf:function(e,t){return f(e,t,!0)},getClosestAncestorIn:u,isCharacterDataNode:l,isTextOrCommentNode:function(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t},insertAfter:h,splitDataNode:function(e,t,n){var r=e.cloneNode(!1);if(r.deleteData(0,t),e.deleteData(t,e.length-t),h(r,e),n)for(var o,a=0;o=n[a++];)o.node==e&&o.offset>t?(o.node=r,o.offset-=t):o.node==e.parentNode&&o.offset>c(e)&&++o.offset;return r},getDocument:g,getWindow:p,getIframeWindow:function(e){if(typeof e.contentWindow!=n)return e.contentWindow;if(typeof e.contentDocument!=n)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")},getIframeDocument:m,getBody:o,isWindow:v,getContentDocument:function(e,t,n){var o;if(e?r.isHostProperty(e,"nodeType")?o=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?m(e):g(e):v(e)&&(o=e.document):o=document,!o)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return o},getRootContainer:function(e){for(var t;t=e.parentNode;)e=t;return e},comparePoints:function(e,n,r,o){var a,i,s,f,l;if(e==r)return n===o?0:n<o?-1:1;if(a=u(r,e,!0))return n<=c(a)?-1:1;if(a=u(e,r,!0))return c(a)<o?-1:1;if(!(i=d(e,r)))throw new Error("comparePoints error: nodes have no common ancestor");if((s=e===i?i:u(e,i,!0))===(f=r===i?i:u(r,i,!0)))throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(l=i.firstChild;l;){if(l===s)return-1;if(l===f)return 1;l=l.nextSibling}},isBrokenNode:N,inspectNode:E,getComputedStyleProperty:R,createTestElement:function(e,t,n){var r=o(e),a=e.createElement("div");a.contentEditable=""+!!n,t&&(a.innerHTML=t);var i=r.firstChild;return i?r.insertBefore(a,i):r.appendChild(a),a},removeNode:function(e){return e.parentNode.removeChild(e)},fragmentFromNodeChildren:function(e){for(var t,n=g(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n},createIterator:function(e){return new S(e)},DomPosition:w},e.DOMException=y})),R.createCoreModule("DomRange",["DomUtil"],(function(e,t){var n=e.dom,r=e.util,o=n.DomPosition,a=e.DOMException,i=n.isCharacterDataNode,s=n.getNodeIndex,c=n.isOrIsAncestorOf,d=n.getDocument,f=n.comparePoints,u=n.splitDataNode,l=n.getClosestAncestorIn,h=n.getNodeLength,g=n.arrayContains,p=n.getRootContainer,m=e.features.crashyTextNodes,v=n.removeNode;function R(e,t){return 3!=e.nodeType&&(c(e,t.startContainer)||c(e,t.endContainer))}function C(e){return e.document||d(e.startContainer)}function N(e){return new o(e.parentNode,s(e))}function E(e){return new o(e.parentNode,s(e)+1)}function S(e,t,r){var o=11==e.nodeType?e.firstChild:e;return i(t)?r==t.length?n.insertAfter(e,t):t.parentNode.insertBefore(e,0==r?t:u(t,r)):r>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[r]),o}function w(e,t,n){if(q(e),q(t),C(t)!=C(e))throw new a("WRONG_DOCUMENT_ERR");var r=f(e.startContainer,e.startOffset,t.endContainer,t.endOffset),o=f(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?r<=0&&o>=0:r<0&&o>0}function y(e,t,r){var o,a,i,s;for(r=r||{stop:!1};i=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(i))return void(r.stop=!0);if(y(s=e.getSubtreeIterator(),t,r),s.detach(),r.stop)return}else for(o=n.createIterator(i);a=o.next();)if(!1===t(a))return void(r.stop=!0)}function T(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(T(t=e.getSubtreeIterator()),t.detach()):e.remove()}function O(e){for(var t,n,r=C(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(O(n)),n.detach()):e.remove(),10==t.nodeType)throw new a("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}function _(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+n.inspectNode(e.startContainer)+":"+e.startOffset+", "+n.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function D(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&i(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||i(this.sc)?l(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||i(this.ec)?l(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}D.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,i(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!i(n)||n!==this.sc&&n!==this.ec?n.parentNode&&v(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},isPartiallySelectedSubtree:function(){return R(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse(!1);else{e=new oe(C(this.range));var t=this._current,n=t,r=0,o=t,a=h(t);c(t,this.sc)&&(n=this.sc,r=this.so),c(t,this.ec)&&(o=this.ec,a=this.eo),re(e,n,r,o,a)}return new D(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var A=[1,3,4,5,7,8,10],x=[2,9,11],I=[1,3,4,5,7,8,10,11],b=[1,3,4,5,7,8];function P(e){return function(t,n){for(var r,o=n?t:t.parentNode;o;){if(r=o.nodeType,g(e,r))return o;o=o.parentNode}return null}}var B=P([9,11]),M=P([5,6,10,12]),k=P([6,10,12]);function H(e,t){if(k(e,t))throw new a("INVALID_NODE_TYPE_ERR")}function L(e,t){if(!g(t,e.nodeType))throw new a("INVALID_NODE_TYPE_ERR")}function W(e,t){if(t<0||t>(i(e)?e.length:e.childNodes.length))throw new a("INDEX_SIZE_ERR")}function F(e,t){if(B(e,!0)!==B(t,!0))throw new a("WRONG_DOCUMENT_ERR")}function z(e){if(M(e,!0))throw new a("NO_MODIFICATION_ALLOWED_ERR")}function V(e,t){if(!e)throw new a(t)}function j(e,t){return t<=(i(e)?e.length:e.childNodes.length)}function U(e){return!!e.startContainer&&!!e.endContainer&&!(m&&(n.isBrokenNode(e.startContainer)||n.isBrokenNode(e.endContainer)))&&p(e.startContainer)==p(e.endContainer)&&j(e.startContainer,e.startOffset)&&j(e.endContainer,e.endOffset)}function q(e){if(!U(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}var Y=document.createElement("style"),Q=!1;try{Y.innerHTML="<b>x</b>",Q=3==Y.firstChild.nodeType}catch(e){}e.features.htmlParsingConforms=Q;var G=Q?function(e){var t=this.startContainer,r=d(t);if(!t)throw new a("INVALID_STATE_ERR");var o=null;return 1==t.nodeType?o=t:i(t)&&(o=n.parentElement(t)),(o=null===o||"HTML"==o.nodeName&&n.isHtmlNamespace(d(o).documentElement)&&n.isHtmlNamespace(o)?r.createElement("body"):o.cloneNode(!1)).innerHTML=e,n.fragmentFromNodeChildren(o)}:function(e){var t=C(this).createElement("body");return t.innerHTML=e,n.fragmentFromNodeChildren(t)};function X(e,t){q(e);var n=e.startContainer,r=e.startOffset,o=e.endContainer,a=e.endOffset,c=n===o;i(o)&&a>0&&a<o.length&&u(o,a,t),i(n)&&r>0&&r<n.length&&(n=u(n,r,t),c?(a-=r,o=n):o==n.parentNode&&a>=s(n)&&a++,r=0),e.setStartAndEnd(n,r,o,a)}function Z(e){q(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}var J=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];function $(e){e.START_TO_START=0,e.START_TO_END=1,e.END_TO_END=2,e.END_TO_START=3,e.NODE_BEFORE=0,e.NODE_AFTER=1,e.NODE_BEFORE_AND_AFTER=2,e.NODE_INSIDE=3}function K(e){$(e),$(e.prototype)}function ee(e,t){return function(){q(this);var n,r=this.startContainer,o=this.startOffset,a=this.commonAncestorContainer,i=new D(this,!0);r!==a&&(r=(n=E(l(r,a,!0))).node,o=n.offset),y(i,z),i.reset();var s=e(i);return i.detach(),t(this,r,o,r,o),s}}function te(t,n){function o(e,t){return function(n){L(n,A),L(p(n),x);var r=(e?N:E)(n);(t?a:c)(this,r.node,r.offset)}}function a(e,t,r){var o=e.endContainer,a=e.endOffset;t===e.startContainer&&r===e.startOffset||(p(t)==p(o)&&1!=f(t,r,o,a)||(o=t,a=r),n(e,t,r,o,a))}function c(e,t,r){var o=e.startContainer,a=e.startOffset;t===e.endContainer&&r===e.endOffset||(p(t)==p(o)&&-1!=f(t,r,o,a)||(o=t,a=r),n(e,o,a,t,r))}var d=function(){};d.prototype=e.rangePrototype,t.prototype=new d,r.extend(t.prototype,{setStart:function(e,t){H(e,!0),W(e,t),a(this,e,t)},setEnd:function(e,t){H(e,!0),W(e,t),c(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],r=e[1],o=t,a=r;switch(e.length){case 3:a=e[2];break;case 4:o=e[2],a=e[3]}n(this,t,r,o,a)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(e){q(this),e?n(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):n(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){H(e,!0),n(this,e,0,e,h(e))},selectNode:function(e){H(e,!1),L(e,A);var t=N(e),r=E(e);n(this,t.node,t.offset,r.node,r.offset)},extractContents:ee(O,n),deleteContents:ee(T,n),canSurroundContents:function(){q(this),z(this.startContainer),z(this.endContainer);var e=new D(this,!0),t=e._first&&R(e._first,this)||e._last&&R(e._last,this);return e.detach(),!t},splitBoundaries:function(){X(this)},splitBoundariesPreservingPositions:function(e){X(this,e)},normalizeBoundaries:function(){q(this);var e,t=this.startContainer,r=this.startOffset,o=this.endContainer,a=this.endOffset,c=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(o=e,a=e.length,e.appendData(t.data),v(t))},d=function(e){var n=e.previousSibling;if(n&&n.nodeType==e.nodeType){t=e;var i=e.length;if(r=n.length,e.insertData(0,n.data),v(n),t==o)a+=r,o=t;else if(o==e.parentNode){var c=s(e);a==c?(o=e,a=i):a>c&&a--}}},f=!0;if(i(o))a==o.length?c(o):0==a&&(e=o.previousSibling)&&e.nodeType==o.nodeType&&(a=e.length,t==o&&(f=!1),e.appendData(o.data),v(o),o=e);else{if(a>0){var u=o.childNodes[a-1];u&&i(u)&&c(u)}f=!this.collapsed}if(f){if(i(t))0==r?d(t):r==t.length&&(e=t.nextSibling)&&e.nodeType==t.nodeType&&(o==e&&(o=t,a+=t.length),t.appendData(e.data),v(e));else if(r<t.childNodes.length){var l=t.childNodes[r];l&&i(l)&&d(l)}}else t=o,r=a;n(this,t,r,o,a)},collapseToPoint:function(e,t){H(e,!0),W(e,t),this.setStartAndEnd(e,t)}}),K(t)}function ne(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:n.getCommonAncestor(e.startContainer,e.endContainer)}function re(e,t,r,o,a){e.startContainer=t,e.startOffset=r,e.endContainer=o,e.endOffset=a,e.document=n.getDocument(t),ne(e)}function oe(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,ne(this)}r.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){var n,r,o,a;q(this),F(this.startContainer,t.startContainer);var i=3==e||0==e?"start":"end",s=1==e||0==e?"start":"end";return n=this[i+"Container"],r=this[i+"Offset"],o=t[s+"Container"],a=t[s+"Offset"],f(n,r,o,a)},insertNode:function(e){if(q(this),L(e,I),z(this.startContainer),c(e,this.startContainer))throw new a("HIERARCHY_REQUEST_ERR");var t=S(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var e,t;if(q(this),this.collapsed)return C(this).createDocumentFragment();if(this.startContainer===this.endContainer&&i(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=C(this).createDocumentFragment()).appendChild(e),t;var n=new D(this,!0);return e=function e(t){for(var n,r,o,i=C(t.range).createDocumentFragment();r=t.next();){if(n=t.isPartiallySelectedSubtree(),r=r.cloneNode(!n),n&&(o=t.getSubtreeIterator(),r.appendChild(e(o)),o.detach()),10==r.nodeType)throw new a("HIERARCHY_REQUEST_ERR");i.appendChild(r)}return i}(n),n.detach(),e},canSurroundContents:function(){q(this),z(this.startContainer),z(this.endContainer);var e=new D(this,!0),t=e._first&&R(e._first,this)||e._last&&R(e._last,this);return e.detach(),!t},surroundContents:function(e){if(L(e,b),!this.canSurroundContents())throw new a("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);S(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){q(this);for(var e,t=new oe(C(this)),n=J.length;n--;)t[e=J[n]]=this[e];return t},toString:function(){q(this);var e=this.startContainer;if(e===this.endContainer&&i(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new D(this,!0);return y(n,(function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)})),n.detach(),t.join("")},compareNode:function(e){q(this);var t=e.parentNode,n=s(e);if(!t)throw new a("NOT_FOUND_ERR");var r=this.comparePoint(t,n),o=this.comparePoint(t,n+1);return r<0?o>0?2:0:o>0?1:3},comparePoint:function(e,t){return q(this),V(e,"HIERARCHY_REQUEST_ERR"),F(e,this.startContainer),f(e,t,this.startContainer,this.startOffset)<0?-1:f(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:G,toHtml:function(){return Z(this)},intersectsNode:function(e,t){if(q(this),p(e)!=p(this.startContainer))return!1;var n=e.parentNode,r=s(e);if(!n)return!0;var o=f(n,r,this.endContainer,this.endOffset),a=f(n,r+1,this.startContainer,this.startOffset);return t?o<=0&&a>=0:o<0&&a>0},isPointInRange:function(e,t){return q(this),V(e,"HIERARCHY_REQUEST_ERR"),F(e,this.startContainer),f(e,t,this.startContainer,this.startOffset)>=0&&f(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return w(this,e,!1)},intersectsOrTouchesRange:function(e){return w(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=f(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=f(this.endContainer,this.endOffset,e.endContainer,e.endOffset),r=this.cloneRange();return-1==t&&r.setStart(e.startContainer,e.startOffset),1==n&&r.setEnd(e.endContainer,e.endOffset),r}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==f(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==f(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new a("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):3==this.compareNode(e)},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,h(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var r=n.pop();return t.setEnd(r,r.length),this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){return q(this),function(e,t,n){var r,o=!(!t||!t.length),a=!!n;o&&(r=new RegExp("^("+t.join("|")+")$"));var s=[];return y(new D(e,!1),(function(t){if((!o||r.test(t.nodeType))&&(!a||n(t))){var c=e.startContainer;if(t!=c||!i(c)||e.startOffset!=c.length){var d=e.endContainer;t==d&&i(d)&&0==e.endOffset||s.push(t)}}})),s}(this,e,t)},getDocument:function(){return C(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var r=C(this),o=e.createRange(r);t=t||n.getBody(r),o.selectNodeContents(t);var a=this.intersection(o),i=0,s=0;return a&&(o.setEnd(a.startContainer,a.startOffset),s=(i=o.toString().length)+a.toString().length),{start:i,end:s,containerNode:t}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var r,o,a,i,s=[t],c=!1,d=!1;!d&&(r=s.pop());)if(3==r.nodeType)o=n+r.length,!c&&e.start>=n&&e.start<=o&&(this.setStart(r,e.start-n),c=!0),c&&e.end>=n&&e.end<=o&&(this.setEnd(r,e.end-n),d=!0),n=o;else for(a=(i=r.childNodes).length;a--;)s.push(i[a])},getName:function(){return"DomRange"},equals:function(e){return oe.rangesEqual(this,e)},isValid:function(){return U(this)},inspect:function(){return _(this)},detach:function(){}}),te(oe,re),r.extend(oe,{rangeProperties:J,RangeIterator:D,copyComparisonConstants:K,createPrototypeRange:te,inspect:_,toHtml:Z,getRangeDocument:C,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=oe})),R.createCoreModule("WrappedRange",["DomRange"],(function(e,t){var n,r,o=e.dom,a=e.util,i=o.DomPosition,s=e.DomRange,c=o.getBody,d=o.getContentDocument,f=o.isCharacterDataNode;if(e.features.implementsDomRange&&function(){var r,i,f=s.rangeProperties;function u(e){for(var t,n=f.length;n--;)e[t=f[n]]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,u(this)},s.createPrototypeRange(n,(function(e,t,n,r,o){var a=e.startContainer!==t||e.startOffset!=n,i=e.endContainer!==r||e.endOffset!=o,s=!e.equals(e.nativeRange);(a||i||s)&&(e.setEnd(r,o),e.setStart(t,n))})),(r=n.prototype).selectNode=function(e){this.nativeRange.selectNode(e),u(this)},r.cloneContents=function(){return this.nativeRange.cloneContents()},r.surroundContents=function(e){this.nativeRange.surroundContents(e),u(this)},r.collapse=function(e){this.nativeRange.collapse(e),u(this)},r.cloneRange=function(){return new n(this.nativeRange.cloneRange())},r.refresh=function(){u(this)},r.toString=function(){return this.nativeRange.toString()};var l=document.createTextNode("test");c(document).appendChild(l);var h=document.createRange();h.setStart(l,0),h.setEnd(l,0);try{h.setStart(l,1),r.setStart=function(e,t){this.nativeRange.setStart(e,t),u(this)},r.setEnd=function(e,t){this.nativeRange.setEnd(e,t),u(this)},i=function(e){return function(t){this.nativeRange[e](t),u(this)}}}catch(e){r.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}u(this)},r.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}u(this)},i=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(r){this.nativeRange[t](n),this.nativeRange[e](n)}u(this)}}}r.setStartBefore=i("setStartBefore","setEndBefore"),r.setStartAfter=i("setStartAfter","setEndAfter"),r.setEndBefore=i("setEndBefore","setStartBefore"),r.setEndAfter=i("setEndAfter","setStartAfter"),r.selectNodeContents=function(e){this.setStartAndEnd(e,0,o.getNodeLength(e))},h.selectNodeContents(l),h.setEnd(l,3);var g=document.createRange();g.selectNodeContents(l),g.setEnd(l,4),g.setStart(l,2),-1==h.compareBoundaryPoints(h.START_TO_END,g)&&1==h.compareBoundaryPoints(h.END_TO_START,g)?r.compareBoundaryPoints=function(e,t){return e==(t=t.nativeRange||t).START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:r.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var p=document.createElement("div");p.innerHTML="123";var m=p.firstChild,v=c(document);v.appendChild(p),h.setStart(m,1),h.setEnd(m,2),h.deleteContents(),"13"==m.data&&(r.deleteContents=function(){this.nativeRange.deleteContents(),u(this)},r.extractContents=function(){var e=this.nativeRange.extractContents();return u(this),e}),v.removeChild(p),v=null,a.isHostMethod(h,"createContextualFragment")&&(r.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),c(document).removeChild(l),r.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return(e=d(e,t,"createNativeRange")).createRange()}}(),e.features.implementsTextRange){var u=function(e,t,n,r,a){var s=e.duplicate();s.collapse(n);var c=s.parentElement();if(o.isOrIsAncestorOf(t,c)||(c=t),!c.canHaveHTML){var d=new i(c.parentNode,o.getNodeIndex(c));return{boundaryPosition:d,nodeInfo:{nodeIndex:d.offset,containerElement:d.node}}}var u=o.getDocument(c).createElement("span");u.parentNode&&o.removeNode(u);for(var l,h,g,p,m,v=n?"StartToStart":"StartToEnd",R=a&&a.containerElement==c?a.nodeIndex:0,C=c.childNodes.length,N=C,E=N;E==C?c.appendChild(u):c.insertBefore(u,c.childNodes[E]),s.moveToElementText(u),0!=(l=s.compareEndPoints(v,e))&&R!=N;){if(-1==l){if(N==R+1)break;R=E}else N=N==R+1?R:E;E=Math.floor((R+N)/2),c.removeChild(u)}if(m=u.nextSibling,-1==l&&m&&f(m)){var S;if(s.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(m.data)){var w=s.duplicate(),y=w.text.replace(/\r\n/g,"\r").length;for(S=w.moveStart("character",y);-1==(l=w.compareEndPoints("StartToEnd",w));)S++,w.moveStart("character",1)}else S=s.text.length;p=new i(m,S)}else h=(r||!n)&&u.previousSibling,p=(g=(r||n)&&u.nextSibling)&&f(g)?new i(g,0):h&&f(h)?new i(h,h.data.length):new i(c,o.getNodeIndex(u));return o.removeNode(u),{boundaryPosition:p,nodeInfo:{nodeIndex:E,containerElement:c}}},l=function(e,t){var n,r,a,i,s=e.offset,d=o.getDocument(e.node),u=c(d).createTextRange(),l=f(e.node);return l?r=(n=e.node).parentNode:(n=s<(i=e.node.childNodes).length?i[s]:null,r=e.node),(a=d.createElement("span")).innerHTML="&#feff;",n?r.insertBefore(a,n):r.appendChild(a),u.moveToElementText(a),u.collapse(!t),r.removeChild(a),l&&u[t?"moveStart":"moveEnd"]("character",s),u};((r=function(e){this.textRange=e,this.refresh()}).prototype=new s(document)).refresh=function(){var e,t,n,r,a=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var r=n.parentElement();(n=e.duplicate()).collapse(!1);var a=n.parentElement(),i=r==a?r:o.getCommonAncestor(r,a);return i==t?i:o.getCommonAncestor(t,i)}(this.textRange);0==(r=this.textRange).compareEndPoints("StartToEnd",r)?t=e=u(this.textRange,a,!0,!0).boundaryPosition:(e=(n=u(this.textRange,a,!0,!1)).boundaryPosition,t=u(this.textRange,a,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},r.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(r);var h=function(e){if(e.collapsed)return l(new i(e.startContainer,e.startOffset),!0);var t=l(new i(e.startContainer,e.startOffset),!0),n=l(new i(e.endContainer,e.endOffset),!1),r=c(s.getRangeDocument(e)).createTextRange();return r.setEndPoint("StartToStart",t),r.setEndPoint("EndToEnd",n),r};if(r.rangeToTextRange=h,r.prototype.toTextRange=function(){return h(this)},e.WrappedTextRange=r,!e.features.implementsDomRange||e.config.preferTextRange){var g=Function("return this;")();void 0===g.Range&&(g.Range=r),e.createNativeRange=function(e){return e=d(e,t,"createNativeRange"),c(e).createTextRange()},e.WrappedRange=r}}e.createRange=function(n){return n=d(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=d(e,t,"createRangyRange"),new s(e)},a.createAliasForDeprecatedMethod(e,"createIframeRange","createRange"),a.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange"),e.addShimListener((function(t){var n=t.document;void 0===n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null}))})),R.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],(function(e,t){e.config.checkSelectionRanges=!0;var n,r,o=e.dom,a=e.util,i=a.isHostMethod,s=e.DomRange,c=e.WrappedRange,d=e.DOMException,f=o.DomPosition,u=e.features,l=o.getDocument,h=o.getBody,g=s.rangesEqual;function p(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function m(e,n){if(e){if(o.isWindow(e))return e;if(e instanceof V)return e.win;var r=o.getContentDocument(e,t,n);return o.getWindow(r)}return window}function v(e){return m(e,"getDocSelection").document.selection}function R(e){var t=!1;return e.anchorNode&&(t=1==o.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}var C=i(window,"getSelection"),N=a.isHostObject(document,"selection");u.implementsWinGetSelection=C,u.implementsDocSelection=N;var E=N&&(!C||e.config.preferTextRange);if(E)n=v,e.isSelectionValid=function(e){var t=m(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||l(n.createRange().parentElement())==t};else{if(!C)return t.fail("Neither document.selection or window.getSelection() detected."),!1;n=function(e){return m(e,"getWinSelection").getSelection()},e.isSelectionValid=function(){return!0}}e.getNativeSelection=n;var S=n();if(!S)return t.fail("Native selection was null (possibly issue 138?)"),!1;var w=e.createNativeRange(document),y=h(document),T=a.areHostProperties(S,["anchorNode","focusNode","anchorOffset","focusOffset"]);u.selectionHasAnchorAndFocus=T;var O=i(S,"extend");u.selectionHasExtend=O;var _="number"==typeof S.rangeCount;u.selectionHasRangeCount=_;var D=!1,A=!0,x=O?function(t,n){var r=s.getRangeDocument(n),o=e.createRange(r);o.collapseToPoint(n.endContainer,n.endOffset),t.addRange(k(o)),t.extend(n.startContainer,n.startOffset)}:null;a.areHostMethods(S,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof S.rangeCount&&u.implementsDomRange&&function(){var t=window.getSelection();if(t){for(var n=t.rangeCount,r=n>1,a=[],i=R(t),s=0;s<n;++s)a[s]=t.getRangeAt(s);var c=o.createTestElement(document,"",!1),d=c.appendChild(document.createTextNode("   ")),f=document.createRange();if(f.setStart(d,1),f.collapse(!0),t.removeAllRanges(),t.addRange(f),A=1==t.rangeCount,t.removeAllRanges(),!r){var u=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(u&&parseInt(u[1])>=36)D=!1;else{var l=f.cloneRange();f.setStart(d,0),l.setEnd(d,3),l.setStart(d,2),t.addRange(f),t.addRange(l),D=2==t.rangeCount}}for(o.removeNode(c),t.removeAllRanges(),s=0;s<n;++s)0==s&&i?x?x(t,a[s]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(a[s])):t.addRange(a[s])}}(),u.selectionSupportsMultipleRanges=D,u.collapsedNonEditableSelectionsSupported=A;var I,b,P=!1;function B(e,t,n){var r=n?"end":"start",o=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[o+"Container"],e.focusOffset=t[o+"Offset"]}function M(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function k(t){var n;return t instanceof s?((n=e.createNativeRange(t.getDocument())).setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof c?n=t.nativeRange:u.implementsDomRange&&t instanceof o.getWindow(t.startContainer).Range&&(n=t),n}function H(e){var n=e.getNodes();if(!function(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;t<n;++t)if(!o.isAncestorOf(e[0],e[t]))return!1;return!0}(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function L(e){return!!e&&void 0!==e.text}function W(e,t){var n=new c(t);e._ranges=[n],B(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function F(t){if(t._ranges.length=0,"None"==t.docSelection.type)M(t);else{var n=t.docSelection.createRange();if(L(n))W(t,n);else{t.rangeCount=n.length;for(var r,o=l(n.item(0)),a=0;a<t.rangeCount;++a)(r=e.createRange(o)).selectNode(n.item(a)),t._ranges.push(r);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,B(t,t._ranges[t.rangeCount-1],!1)}}}function z(e,n){for(var r=e.docSelection.createRange(),o=H(n),a=l(r.item(0)),i=h(a).createControlRange(),s=0,c=r.length;s<c;++s)i.add(r.item(s));try{i.add(o)}catch(e){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}i.select(),F(e)}function V(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function j(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}y&&i(y,"createControlRange")&&(I=y.createControlRange(),a.areHostProperties(I,["item","add"])&&(P=!0)),u.implementsControlRange=P,r=T?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},i(S,"getRangeAt")?b=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:T&&(b=function(t){var n=l(t.anchorNode),r=e.createRange(n);return r.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),r.collapsed!==this.isCollapsed&&r.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),r}),V.prototype=e.selectionPrototype;var U=[];function q(e,t){for(var n,r,o=U.length;o--;)if(r=(n=U[o]).selection,"deleteAll"==t)j(r);else if(n.win==e)return"delete"==t?(U.splice(o,1),!0):r;return"deleteAll"==t&&(U.length=0),null}var Y=function(e){if(e&&e instanceof V)return e.refresh(),e;var t=q(e=m(e,"getNativeSelection")),r=n(e),o=N?v(e):null;return t?(t.nativeSelection=r,t.docSelection=o,t.refresh()):(t=new V(r,o,e),U.push({win:e,selection:t})),t};e.getSelection=Y,a.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection");var Q,G=V.prototype;function X(e,n){for(var r,o=l(n[0].startContainer),a=h(o).createControlRange(),i=0,s=n.length;i<s;++i){r=H(n[i]);try{a.add(r)}catch(e){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}a.select(),F(e)}if(!E&&T&&a.areHostMethods(S,["removeAllRanges","addRange"])){G.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),M(this)};var Z=function(e,t){x(e.nativeSelection,t),e.refresh()};G.addRange=_?function(t,n){if(P&&N&&"Control"==this.docSelection.type)z(this,t);else if(p(n)&&O)Z(this,t);else{var o;D?o=this.rangeCount:(this.removeAllRanges(),o=0);var a=k(t).cloneRange();try{this.nativeSelection.addRange(a)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==o+1){if(e.config.checkSelectionRanges){var i=b(this.nativeSelection,this.rangeCount-1);i&&!g(i,t)&&(t=new c(i))}this._ranges[this.rangeCount-1]=t,B(this,t,J(this.nativeSelection)),this.isCollapsed=r(this)}else this.refresh()}}:function(e,t){p(t)&&O?Z(this,e):(this.nativeSelection.addRange(k(e)),this.refresh())},G.setRanges=function(e){if(P&&N&&e.length>1)X(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(i(S,"empty")&&i(w,"select")&&P&&E))return t.fail("No means of selecting a Range or TextRange was found"),!1;G.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=l(this.anchorNode);else if("Control"==this.docSelection.type){var t=this.docSelection.createRange();t.length&&(e=l(t.item(0)))}e&&(h(e).createTextRange().select(),this.docSelection.empty())}}catch(e){}M(this)},G.addRange=function(t){"Control"==this.docSelection.type?z(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,B(this,t,!1))},G.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?X(this,e):t&&this.addRange(e[0])}}if(G.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new d("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},E)Q=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=h(t.win.document).createTextRange()).collapse(!0),"Control"==t.docSelection.type?F(t):L(n)?W(t,n):M(t)};else if(i(S,"getRangeAt")&&"number"==typeof S.rangeCount)Q=function(t){if(P&&N&&"Control"==t.docSelection.type)F(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,o=t.rangeCount;n<o;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));B(t,t._ranges[t.rangeCount-1],J(t.nativeSelection)),t.isCollapsed=r(t)}else M(t)};else{if(!T||"boolean"!=typeof S.isCollapsed||"boolean"!=typeof w.collapsed||!u.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;Q=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=b(n,0),e._ranges=[t],e.rangeCount=1,function(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}(e),e.isCollapsed=r(e)):M(e)}}G.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,r=this.anchorOffset;if(Q(this),e){var o=t.length;if(o!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=r)return!0;for(;o--;)if(!g(t[o],this._ranges[o]))return!0;return!1}};var J,$=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var r=0,o=n.length;r<o;++r)g(t,n[r])||e.addRange(n[r]);e.rangeCount||M(e)};function K(e,t){if(e.win.document!=l(t))throw new d("WRONG_DOCUMENT_ERR")}function ee(t){return function(n,r){var o;this.rangeCount?(o=this.getRangeAt(0))["set"+(t?"Start":"End")](n,r):(o=e.createRange(this.win.document)).setStartAndEnd(n,r),this.setSingleRange(o,this.isBackward())}}function te(e){var t=[],n=new f(e.anchorNode,e.anchorOffset),r=new f(e.focusNode,e.focusOffset),o="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var a=0,i=e.rangeCount;a<i;++a)t[a]=s.inspect(e.getRangeAt(a));return"["+o+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}G.removeRange=P&&N?function(e){if("Control"==this.docSelection.type){for(var t=this.docSelection.createRange(),n=H(e),r=l(t.item(0)),o=h(r).createControlRange(),a=!1,i=0,s=t.length;i<s;++i)t.item(i)!==n||a?o.add(t.item(i)):a=!0;o.select(),F(this)}else $(this,e)}:function(e){$(this,e)},!E&&T&&u.implementsDomRange?(J=R,G.isBackward=function(){return J(this)}):J=G.isBackward=function(){return!1},G.isBackwards=G.isBackward,G.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},G.collapse=function(t,n){K(this,t);var r=e.createRange(t);r.collapseToPoint(t,n),this.setSingleRange(r),this.isCollapsed=!0},G.collapseToStart=function(){if(!this.rangeCount)throw new d("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},G.collapseToEnd=function(){if(!this.rangeCount)throw new d("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},G.selectAllChildren=function(t){K(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},G.deleteFromDocument=function(){if(P&&N&&"Control"==this.docSelection.type){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),o.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var r=0,a=n.length;r<a;++r)n[r].deleteContents();this.addRange(n[a-1])}}},G.eachRange=function(e,t){for(var n=0,r=this._ranges.length;n<r;++n)if(e(this.getRangeAt(n)))return t},G.getAllRanges=function(){var e=[];return this.eachRange((function(t){e.push(t)})),e},G.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},G.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange((function(r){n.push(r[e].apply(r,t||[]))})),n},G.setStart=ee(!0),G.setEnd=ee(!1),e.rangePrototype.select=function(e){Y(this.getDocument()).setSingleRange(this,e)},G.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange((function(n){e(n),t.push(n)})),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},G.containsNode=function(e,t){return this.eachRange((function(n){return n.containsNode(e,t)}),!0)||!1},G.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},G.moveToBookmark=function(t){for(var n,r,o=[],a=0;n=t.rangeBookmarks[a++];)(r=e.createRange(this.win)).moveToBookmark(n),o.push(r);t.backward?this.setSingleRange(o[0],"backward"):this.setRanges(o)},G.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},G.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},G.toHtml=function(){var e=[];return this.eachRange((function(t){e.push(s.toHtml(t))})),e.join("")},u.implementsTextRange&&(G.getNativeTextRange=function(){var n;if(n=this.docSelection){var r=n.createRange();if(L(r))return r;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),G.getName=function(){return"WrappedSelection"},G.inspect=function(){return te(this)},G.detach=function(){q(this.win,"delete"),j(this)},V.detachAll=function(){q(null,"deleteAll")},V.inspect=te,V.isDirectionBackward=p,e.Selection=V,e.selectionPrototype=G,e.addShimListener((function(e){void 0===e.getSelection&&(e.getSelection=function(){return Y(e)}),e=null}))}));var I=!1,b=function(e){I||(I=!0,!R.initialized&&R.config.autoInitialize&&y())};return m&&("complete"==document.readyState?b():(o(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",b,!1),g(window,"load",b))),R})?r.call(t,n,t,e):r)||(e.exports=o)},pqgc:function(e,t,n){var r,o,a;o=[n("diuS")],void 0===(a="function"==typeof(r=function(e){return e.createModule("SaveRestore",["WrappedRange"],(function(e,t){var n=e.dom,r=n.removeNode,o=e.Selection.isDirectionBackward;function a(e,t){return(t||document).getElementById(e)}function i(e,t){var r,o="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),a=n.getDocument(e.startContainer),i=e.cloneRange();return i.collapse(t),(r=a.createElement("span")).id=o,r.style.lineHeight="0",r.style.display="none",r.className="rangySelectionBoundary",r.appendChild(a.createTextNode("\ufeff")),i.insertNode(r),r}function s(e,n,o,i){var s=a(o,e);s?(n[i?"setStartBefore":"setEndBefore"](s),r(s)):t.warn("Marker element has been removed. Cannot restore selection.")}function c(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function d(t,n){var r,a=e.DomRange.getRangeDocument(t),s=t.toString(),c=o(n);return t.collapsed?{document:a,markerId:(r=i(t,!1)).id,collapsed:!0}:(r=i(t,!1),{document:a,startMarkerId:i(t,!0).id,endMarkerId:r.id,collapsed:!1,backward:c,toString:function(){return"original text: '"+s+"', new text: '"+t.toString()+"'"}})}function f(n,o){var i=n.document;void 0===o&&(o=!0);var c=e.createRange(i);if(n.collapsed){var d=a(n.markerId,i);if(d){d.style.display="inline";var f=d.previousSibling;f&&3==f.nodeType?(r(d),c.collapseToPoint(f,f.length)):(c.collapseBefore(d),r(d))}else t.warn("Marker element has been removed. Cannot restore selection.")}else s(i,c,n.startMarkerId,!0),s(i,c,n.endMarkerId,!1);return o&&c.normalizeBoundaries(),c}function u(t,n){var r,i,s=[],f=o(n);(t=t.slice(0)).sort(c);for(var u=0,l=t.length;u<l;++u)s[u]=d(t[u],f);for(u=l-1;u>=0;--u)r=t[u],i=e.DomRange.getRangeDocument(r),r.collapsed?r.collapseAfter(a(s[u].markerId,i)):(r.setEndBefore(a(s[u].endMarkerId,i)),r.setStartAfter(a(s[u].startMarkerId,i)));return s}function l(e){for(var t=[],n=e.length-1;n>=0;n--)t[n]=f(e[n],!0);return t}function h(e,t){var n=a(t,e);n&&r(n)}e.util.extend(e,{saveRange:d,restoreRange:f,saveRanges:u,restoreRanges:l,saveSelection:function(n){if(!e.isSelectionValid(n))return t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var r=e.getSelection(n),o=r.getAllRanges(),a=1==o.length&&r.isBackward(),i=u(o,a);return a?r.setSingleRange(o[0],a):r.setRanges(o),{win:n,rangeInfos:i,restored:!1}},restoreSelection:function(t,n){if(!t.restored){var r=t.rangeInfos,o=e.getSelection(t.win),a=l(r);1==r.length&&n&&e.features.selectionHasExtend&&r[0].backward?(o.removeAllRanges(),o.addRange(a[0],!0)):o.setRanges(a),t.restored=!0}},removeMarkerElement:h,removeMarkers:function(e){for(var t,n=e.rangeInfos,r=0,o=n.length;r<o;++r)(t=n[r]).collapsed?h(e.doc,t.markerId):(h(e.doc,t.startMarkerId),h(e.doc,t.endMarkerId))}})})),e})?r.apply(t,o):r)||(e.exports=a)}}]);