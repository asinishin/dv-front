(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"/1cb":function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.optsReportByPeriod",[]).factory("optsReportByPeriod",["$rootScope","$translate","$filter",function(e,t,r){var n=r("date"),a=[{id:"week",_name:"REPORTS.BY_PERIOD.WEEK",format:function(e,t){return n(e,"MMM d")+" - "+n(t,"MMM d")}},{id:"month",_name:"REPORTS.BY_PERIOD.MONTH",format:function(e,t){return n(e,"MMM")}},{id:"quarter",_name:"REPORTS.BY_PERIOD.QUARTER",format:function(e,t){return n(e,"MMM")+" - "+n(t,"MMM")}},{id:"year",_name:"REPORTS.BY_PERIOD.YEAR",format:function(e,t){return n(e,"yyyy")}}];function i(){o()(a).call(a,(function(e){e.name=t.instant(e._name)}))}return i(),e.$on("$setTranslationsSuccess",i),a}])},"3i5X":function(e,t,r){"use strict";r.r(t);r("8cZI");var n=r("nbuU"),o=r.n(n);t.default=angular.module("deskworks.reports.reportHeader",["deskworks.reports.reportStyles"]).factory("reportHeader",["$filter","$translate","reportStyles",function(e,t,r){return function(){return 3===arguments.length?a.apply(void 0,arguments):n.apply(void 0,arguments)};function n(n){var a,i,s,l,d=n.config,u=n.doc,c=n.data,f=n.resources,p=o()(a=f.centers).call(a,(function(e){return e.id===+d.centerId})),g=u.internal.pageSize.width;u.setFontStyle("normal"),u.setTextColor(r.header.textColor),s=r.pageMargins[3],l=40,u.setFontSize(14),i=d.reportName.toUpperCase(),u.text(i,s,l),s+=u.getTextWidth(i)+3,(d.fromDate||d.toDate)&&(u.setFontSize(7),i=t.instant("REPORTS.HEADER.FOR_PERIOD").toUpperCase(),d.fromDate&&(i+=" "+t.instant("REPORTS.HEADER.FROM").toUpperCase()+":"),u.text(i,s,l),s+=u.getTextWidth(i)+3,d.fromDate&&(u.setFontSize(9),i=e("date")(d.fromDate,"mediumDate")||"",u.text(i,s,l),s+=u.getTextWidth(i)+3),u.setFontSize(7),i=t.instant("REPORTS.HEADER.THROUGH").toUpperCase()+":",u.text(i,s,l),s+=u.getTextWidth(i)+3,u.setFontSize(9),i=e("date")(d.toDate,"mediumDate")||"",u.text(i,s,l),s+=u.getTextWidth(i)+3),s=g-r.pageMargins[1],u.setFontSize(9),i=""+c.pageCount,s-=u.getTextWidth(i),u.text(i,s,l),u.setFontSize(7),i=t.instant("REPORTS.HEADER.PAGE").toUpperCase()+":",s-=u.getTextWidth(i+" "),u.text(i,s,l-.6),s=r.pageMargins[3],l+=11,u.setFontSize(7),i=t.instant("REPORTS.HEADER.REPORT_FOR").toUpperCase()+":",u.text(i,s,l-.6),s+=u.getTextWidth(i+" "),u.setFontSize(9),i=d.reportFor||(p?[p.name,p.city,p.state].join(", "):"All Centers"),u.text(i,s,l),s+=u.getTextWidth(i+" "),s=g-r.pageMargins[1],u.setFontSize(9),i=e("date")(moment(),"mediumDate"),s-=u.getTextWidth(i),u.text(i,s,l),u.setFontSize(7),i=t.instant("REPORTS.HEADER.REPORT_DATE").toUpperCase()+":",s-=u.getTextWidth(i+" "),u.text(i,s,l-.6)}function a(n,o,a){var i,s,l,d=o.internal.pageSize.width;o.setFontStyle("normal"),o.setTextColor(r.header.textColor),s=r.pageMargins[3],l=40,o.setFontSize(14),i=a.reportName.toUpperCase(),o.text(i,s,l),s+=o.getTextWidth(i)+3,a.reportDates&&(o.setFontSize(7),i=t.instant("REPORTS.HEADER.FOR_PERIOD").toUpperCase(),a.reportDates.fromDate&&(i+=" "+t.instant("REPORTS.HEADER.FROM").toUpperCase()+":"),o.text(i,s,l),s+=o.getTextWidth(i)+3,a.reportDates.fromDate&&(o.setFontSize(9),i=e("date")(a.reportDates.fromDate,"mediumDate")||"",o.text(i,s,l),s+=o.getTextWidth(i)+3),o.setFontSize(7),i=t.instant("REPORTS.HEADER.THROUGH").toUpperCase()+":",o.text(i,s,l),s+=o.getTextWidth(i)+3,o.setFontSize(9),i=e("date")(a.reportDates.toDate,"mediumDate")||"",o.text(i,s,l),s+=o.getTextWidth(i)+3),s=d-r.pageMargins[1],o.setFontSize(9),i=""+n.pageCount,s-=o.getTextWidth(i),o.text(i,s,l),o.setFontSize(7),i=t.instant("REPORTS.HEADER.PAGE").toUpperCase()+":",s-=o.getTextWidth(i+" "),o.text(i,s,l-.6),s=r.pageMargins[3],l+=11,o.setFontSize(7),i=t.instant("REPORTS.HEADER.REPORT_FOR").toUpperCase()+":",o.text(i,s,l-.6),s+=o.getTextWidth(i+" "),o.setFontSize(9),i=a.reportFor||(!1===a.reportOptions.centerId||+a.reportOptions.centerId)&&[a.center.name,a.center.city,a.center.state.name].join(", ")||"All Centers",o.text(i,s,l),s+=o.getTextWidth(i+" "),s=d-r.pageMargins[1],o.setFontSize(9),i=e("date")(moment(),"mediumDate"),s-=o.getTextWidth(i),o.text(i,s,l),o.setFontSize(7),i=t.instant("REPORTS.HEADER.REPORT_DATE").toUpperCase()+":",s-=o.getTextWidth(i+" "),o.text(i,s,l-.6)}}])},"5+k5":function(e,t,r){"use strict";r.r(t);r("y89P");var n=r("yCd9"),o=r.n(n),a=r("WSeP"),i=r.n(a),s=r("Xai3");t.default=angular.module("deskworks.reports.ReportBuilder",[s.default.name,"csvMake","jsPDF","deskworks.logo","deskworks.reports.reportStyles","deskworks.reports.reportHeader","deskworks.reports.reportFooter","deskworks.center.service"]).factory("ReportBuilder",["$rootScope","$q","$timeout","$window","$filter","$http","state","logo","jsPDF","csvMake","centerService","reportStyles","reportHeader","reportFooter","reportSort",function(e,t,r,n,a,s,l,d,u,c,f,p,g,m,h){return function(r){var n=this;e.$watch((function(){return r.reportOptions.centerId}),(function(e,t){e!==t&&(r.reportData=null,r.center=null)})),n.resolve=function(){return t.all({reportData:r.reportData||r.getReportData().catch((function(t){return e.showError(t,"Failed to load report data.")})),center:r.center||f.get(+r.reportOptions.centerId||l.getCurrentCenterId()).catch((function(t){return e.showError(t,"Failed to load center data.")})),logo:r.logo||d.getSiteLogo()}).then((function(e){return r.reportData=e.reportData,r.center=e.center,r.logo=e.logo,r}))},n.buildPdf=function(e,t){return n.generatePdf(e,t).then((function(e){return e.output("blob")}))},n.generatePdf=function(e,t,a){return n.resolve().then((function(n){var s,l,d=a||new u(r.reportOptions.paperLayout,"pt",r.reportOptions.paperSize),c=e(r);i()(s=c.rows).call(s,(function(e){var t;i()(t=c.columns).call(t,(function(t,r){e[r]&&!angular.isUndefined(e[r].content)||(e[r]={content:e[r]});var n=e[r];!1===n.content?n.content="":(t.pdf&&(n.content=t.pdf(n.content)),n.content=angular.isUndefined(n.content)||null===n.content||""===n.content?"-":n.content)}))}));var f={columns:o()(l=c.columns).call(l,(function(e){return e.title.toUpperCase()})),body:c.rows,headStyles:(t||p).headStyles,bodyStyles:(t||p).bodyStyles,columnStyles:(t||p).columnStyles,tableMargin:t&&t.tableMargin||(t||p).pageMargins,startY:r.startY||(t||p).startY||!1,didParseCell:function(e){var t=e.row,r=e.cell,n=e.column;if("body"===e.section){angular.extend(r.styles,{minCellWidth:50,fillColor:!1},c.styles[t.index],c.columns[n.index].styles)}else angular.extend(r.styles,c.columns[n.index].styles)},didDrawCell:function(e){return function(e,t){var r=e.cell,n=e.doc;return 0===e.column.index&&r.styles.borderColor&&r.styles.borderWidth&&(n.setLineWidth(r.styles.borderWidth),n.setDrawColor(r.styles.borderColor[0],r.styles.borderColor[1],r.styles.borderColor[2]),n.rect(e.settings.margin.left+r.styles.borderWidth/2,e.row.y+r.styles.borderWidth/2,e.table.width-r.styles.borderWidth,e.row.height-2*r.styles.borderWidth,"S")),!1}(e,c.columns)},didDrawPage:function(e){(r.reportHeader||g)(e.table,d,r),(r.reportFooter||m)(e.table,d,r)}};return f.margin=f.tableMargin||(t||p).pageMargins,d.autoTable(f),d}))},n.buildCsv=function(e){var t,n,a={charset:"utf-8"},s=e(r);return i()(t=s.rows).call(t,(function(e){var t;i()(t=s.columns).call(t,(function(t,r){e[r]&&angular.isDefined(e[r].content)&&(e[r]=e[r].content),t.csv&&(e[r]=t.csv(e[r])),e[r]=angular.isUndefined(e[r])||null===e[r]||!1===e[r]||""===e[r]?"":e[r]}))})),s.rows.unshift(o()(n=s.columns).call(n,(function(e){return e.title.toUpperCase()}))),new Blob([c.generate(s.rows,a)],{type:"text/csv;charset="+a.charset+";"})},n.getReportFileName=function(e,t){var n=!1===r.reportOptions.centerId||+r.reportOptions.centerId?r.center.shortName:"all-centers",o=r.reportName;return n=(n||"").toLowerCase().replace(/\s+/g,"-"),o=(o||"").toLowerCase().replace(/\s+/g,"-"),e=(e||"pdf").toLowerCase(),o+"-"+n+"-"+a("date")(moment(),"yyyyMMdd-HHmmss")+(t||"")+"."+e},n.sortData=h}}])},"5ual":function(e,t,r){"use strict";r.r(t);var n=r("6RpP"),o=r.n(n),a=r("yCd9"),i=r.n(a);t.default=angular.module("deskworks.WriteOffReportCtrl",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.WriteOffReport","deskworks.writeOffReportColumns","deskworks.reportOrderBy"]).controller("WriteOffReportCtrl",["$scope","$timeout","$translate","$filter","$location","helper","state","fileSaver","reportStyles","ReportBuilder","WriteOffReport","writeOffReportColumns",function(e,t,r,n,a,s,l,d,u,c,f,p){var g,m=this;function h(e){var t,n,a,l={columns:e.reportColumns,rows:[],styles:[]},d=0;return l.rows=i()(t=m.reportBuilder.sortData(e.reportData,e.orderBy)).call(t,(function(e,t){var r;return l.styles.push(t%2?null:u.rowOdd),d+=e.amount,i()(r=l.columns).call(r,(function(t){return e[t.dataKey]}))})),l.rows.push(o()(n=i()(a=Array.apply(null,Array(l.columns.length-2))).call(a,Boolean.prototype.valueOf,!1)).call(n,[r.instant("REPORTS.TOTAL")+":",s.round(d)])),l.styles.push(u.h3),l}m.config={reportName:r.instant("WRITE_OFF_REPORT.REPORT_NAME"),reportOptions:{},reportColumns:p,reportDates:{fromDate:moment().date(1),toDate:moment()},getReportData:function(){return f.query({centerId:m.config.reportOptions.centerId||null,fromDate:n("date")(m.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:n("date")(m.config.reportDates.toDate,"yyyy-MM-dd")})}},l.setPageTitle(m.config.reportName),m.reportBuilder=new c(m.config),e.$watch((function(){return{reportOptions:m.config.reportOptions,reportDates:m.config.reportDates,orderBy:m.config.orderBy,orderSort:m.config.orderSort}}),(function(e,r){g&&(t.cancel(g),g=null),g=t((function(){if(m.pdf=null,!angular.isUndefined(m.config.reportOptions.centerId)&&m.config.reportDates.fromDate&&m.config.reportDates.toDate){var t=e.reportDates.fromDate,n=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(m.config.reportData=null),t=e.reportDates.toDate,n=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(m.config.reportData=null),m.reportBuilder.buildPdf(h).then((function(e){m.pdf=e}))}}),100)}),!0),m.downloadPdf=function(){m.pdf&&d(m.pdf,m.reportBuilder.getReportFileName("pdf"))},m.downloadCsv=function(){m.pdf&&d(m.reportBuilder.buildCsv(h),m.reportBuilder.getReportFileName("csv"))}}])},"8d/h":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.optsPaperSize",[]).factory("optsPaperSize",(function(){return[{id:"letter",name:"Letter"},{id:"A4",name:"A4"},{id:"A3",name:"A3"},{id:"A2",name:"A2"},{id:"A1",name:"A1"},{id:"A0",name:"A0"}]}))},"92Gs":function(e,t,r){"use strict";r.r(t);var n=r("YtL8"),o=r.n(n),a=r("Xai3");t.default=angular.module("deskworks.reportGroupBy",[a.default.name]).factory("reportGroupBy",["reportSort",function(e){return function(t,r){var n;return o()(n=e(t,r)).call(n,(function(e,t){var n=e[e.length-1]||[],o=n[0]||{};return o[r]===t[r]||moment.isMoment(o[r])&&moment.isMoment(t[r])&&o[r].isSame(t[r],"day")||(n=[],e.push(n)),n.push(t),e}),[])}}])},"9LJv":function(e,t,r){"use strict";r.r(t);r("RKBc");t.default=angular.module("fileSaver",[]).factory("fileSaver",["$window",function(e){return function(t,r,n,o){if(e.cordova&&e.cordova.InAppBrowser&&"ios"===e.cordova.platformId){var a=new FileReader;return a.onloadend=function(){var t=a.result;return e.cordova.InAppBrowser.open(t,"_blank","hidenavigationbuttons=yes,hideurlbar=yes,enableViewportScale=yes,location=no")},void a.readAsDataURL(t)}return e.saveAs(t,r,n,o)}}])},GO8p:function(e,t,r){"use strict";r.r(t);var n=r("lu0O"),o=r.n(n);r("dbsv");t.default=angular.module("jsPDF",[]).factory("jsPDF",["$window",function(e){return e.jsPDF=o.a,e.jsPDF}])},T3vP:function(e,t,r){"use strict";r.r(t);r("8cZI"),r("JBxO"),r("y89P");var n=r("WSeP"),o=r.n(n),a=r("xeXu"),i=r.n(a);t.default=angular.module("csvMake",[]).service("csvMake",["$q","$timeout","$window","$document",function(e,t,r,n){this.generate=function(e,t){return t.txtDelim=t.txtDelim||'"',t.decimalSep=t.decimalSep||".",t.fieldSep=t.fieldSep||",",t.charset=t.charset||"utf-8",t.fieldSep=this.isSpecialChar(t.fieldSep)?this.getSpecialChar(t.fieldSep):t.fieldSep,this.stringify(e,t)};var a={"\\t":"\t","\\b":"\b","\\v":"\v","\\f":"\f","\\r":"\r"};this.stringifyField=function(e,t){return"locale"===t.decimalSep&&this.isFloat(e)?e.toLocaleString():"."!==t.decimalSep&&this.isFloat(e)?e.toString().replace(".",t.decimalSep):"string"==typeof e?(e=e.replace(/"/g,'""'),(t.quoteStrings||i()(e).call(e,",")>-1||i()(e).call(e,"\n")>-1||i()(e).call(e,"\r")>-1)&&(e=t.txtDelim+e+t.txtDelim),e):"boolean"==typeof e?e?"TRUE":"FALSE":e},this.isFloat=function(e){return+e===e&&(!isFinite(e)||Boolean(e%1))},this.stringifyAsync=function(t,r){var n=e.defer(),a=this,i="",s="",l=e.when(t).then((function(e){var t,l;angular.isDefined(r.header)&&r.header&&(t=[],o()(angular).call(angular,r.header,(function(e,t){this.push(a.stringifyField(e,r))}),t),l=t.join(r.fieldSep?r.fieldSep:","),s+=l+"\r\n");var d,u,c=[];(angular.isArray(e)?c=e:angular.isFunction(e)&&(c=e()),angular.isDefined(r.label)&&r.label&&"boolean"==typeof r.label)&&(d=[],o()(angular).call(angular,c[0],(function(e,t){this.push(a.stringifyField(t,r))}),d),u=d.join(r.fieldSep?r.fieldSep:","),s+=u+"\r\n");o()(angular).call(angular,c,(function(e,t){var n,i,l=angular.copy(c[t]);i=[];var d=r.columnOrder?r.columnOrder:l;o()(angular).call(angular,d,(function(e,t){var n=r.columnOrder?l[e]:e;this.push(a.stringifyField(n,r))}),i),n=i.join(r.fieldSep?r.fieldSep:","),s+=t<c.length?n+"\r\n":n})),r.addByteOrderMarker&&(i+="\ufeff"),i+=s,n.resolve(i)}));return"function"==typeof l.catch&&l.catch((function(e){n.reject(e)})),n.promise},this.stringify=function(e,t){var r,n,a=this,i="",s="";angular.isDefined(t.header)&&t.header&&(r=[],o()(angular).call(angular,t.header,(function(e,r){this.push(a.stringifyField(e,t))}),r),n=r.join(t.fieldSep?t.fieldSep:","),s+=n+"\r\n");var l,d,u=e;angular.isDefined(t.label)&&t.label&&"boolean"==typeof t.label&&(l=[],o()(angular).call(angular,u[0],(function(e,r){this.push(a.stringifyField(r,t))}),l),d=l.join(t.fieldSep?t.fieldSep:","),s+=d+"\r\n");return o()(angular).call(angular,u,(function(e,r){var n,i,l=angular.copy(u[r]);i=[];var d=t.columnOrder?t.columnOrder:l;o()(angular).call(angular,d,(function(e,r){var n=t.columnOrder?l[e]:e;this.push(a.stringifyField(n,t))}),i),n=i.join(t.fieldSep?t.fieldSep:","),s+=r<u.length?n+"\r\n":n})),t.addByteOrderMarker&&(i+="\ufeff"),i+=s},this.isSpecialChar=function(e){return void 0!==a[e]},this.getSpecialChar=function(e){return a[e]}}])},UwMB:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.reportStyles",["systemColors","deskworks.helper"]).factory("reportStyles",["systemColors","helper",function(e,t){return{pageMargins:[60,25,50,25],headStyles:{fontSize:9,fontStyle:"normal",valign:"middle",fillColor:t.hex2rgbArr(e.info),textColor:255},bodyStyles:{overflow:"linebreak",textColor:0},header:{textColor:e.primary},footer:{textColor:e.primary},rowOdd:{fillColor:[245,245,245]},h1:{fontStyle:"bold",fillColor:t.hex2rgbArr(e.primary),textColor:[255,255,255]},h2:{fontStyle:"bold",textColor:t.hex2rgbArr(e.info),borderWidth:1,borderColor:t.hex2rgbArr(e.info)},h3:{fontStyle:"bold"}}}])},Xai3:function(e,t,r){"use strict";r.r(t);var n=r("6RpP"),o=r.n(n),a=r("hsT8"),i=r.n(a);t.default=angular.module("deskworks.reportSort",[]).factory("reportSort",["$filter",function(e){return function(t,r,n){var a,s=[];return r=""+r,t=i()(t).call(t,(function(e){if((e[r]||0===e[r])&&""!==e[r])return!0;s.push(e)})),o()(a=e("orderBy")(t,r,n)).call(a,s)}}])},Yes4:function(e,t,r){"use strict";r.r(t),t.default=angular.module("systemColors",[]).factory("systemColors",["$window","$timeout","helper",function(e,t,r){var n={},o=angular.element('<div style="display: none"></div>');return o.append('<div class="text-text"></div>'),o.append('<div class="text-brand"></div>'),o.append('<div class="text-brand"></div>'),o.append('<div class="text-danger"></div>'),o.append("<div></div>"),o.append('<div class="sidebar-group-header"></div>'),document.body.appendChild(o[0]),n.text=r.rgb2hex(e.getComputedStyle(o.children()[0]).getPropertyValue("color"))||"#444",n.info=r.rgb2hex(e.getComputedStyle(o.children()[4]).getPropertyValue("color"))||"#4d4e4c",n.primary=r.rgb2hex(e.getComputedStyle(o.children()[5]).getPropertyValue("background-color"))||"#949594",n.warning=r.rgb2hex(e.getComputedStyle(o.children()[3]).getPropertyValue("color"))||"#ff9b00",o.remove(),n}])},aHVT:function(e,t){e.exports="<div id=writeOffReport class=gutter-v> <form name=formWriteOffReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <report-dates ng-model=$ctrl.config.reportDates></report-dates> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <report-options ng-model=$ctrl.config.reportOptions> <report-order-by ng-model=$ctrl.config.orderBy report-columns=$ctrl.config.reportColumns></report-order-by> </report-options> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=$ctrl.downloadPdf() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=$ctrl.downloadCsv() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=$ctrl.pdf></div> </ff-panel> </div> "},bHMQ:function(e,t,r){"use strict";r.r(t);t.default=angular.module("deskworks.logo",[]).factory("logo",["$window","$http","$q","deskworksConfig",function(e,t,r,n){var o,a;return{getSiteLogo:function(){return o=o||r((function(e){var t=new Image;t.crossOrigin="anonymous",t.src=n.getApiAbsUrl("/white-label/images/logo-print.png"),t.onerror=function(){console.warn("Report failed to load site logo."),e(null),t=null},t.onload=function(){e(t),t=null}})).then(i)},getSiteLogoInv:function(){return a=a||r((function(e){var t=document.querySelector(".sidebar-logo a img");t||console.warn("Report failed to load site logo."),e(t)})).then(i)},resetSiteLogo:function(){o=null},resetSiteLogoInv:function(){a=null}};function i(e){if(!e)return null;var t=e.width/480,r=e.height/171,n=t>r?t:r,o=Math.round(e.width/n),a=Math.round(e.height/n),i=document.createElement("canvas");document.body.appendChild(i),i.width=o,i.height=a,i.getContext("2d").drawImage(e,0,0,o,a);var s=i.toDataURL("image/png");return document.body.removeChild(i),{width:o,height:a,data:s}}}])},fKuI:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.WriteOffReport",["ngResource","datesDeserializer","deserializeNumbers","deskworks.config"]).factory("WriteOffReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=t(["date"]),a=r(["amount"]),i=e(n.getApiAbsUrl("/write-off-report"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,o,a]}});return{query:function(e){return i.query(e).$promise}}}])},h0ZB:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.writeOffReportColumns",[]).factory("writeOffReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userCompany",_title:"WRITE_OFF_REPORT.COLUMNS.COMPANY"},{dataKey:"userName",_title:"WRITE_OFF_REPORT.COLUMNS.NAME",defaultOrder:!0},{dataKey:"orderId",_title:"WRITE_OFF_REPORT.COLUMNS.ORDER_ID",styles:{halign:"right"}},{dataKey:"date",_title:"WRITE_OFF_REPORT.COLUMNS.DATE",styles:{halign:"right"},pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"amount",_title:"WRITE_OFF_REPORT.COLUMNS.AMOUNT",styles:{halign:"right"},pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},rjaI:function(e,t,r){"use strict";r.r(t);r("8cZI");var n=r("nbuU"),o=r.n(n);t.default=angular.module("deskworks.reports.reportFooter",["deskworks.reports.reportStyles"]).factory("reportFooter",["$filter","reportStyles",function(e,t){return function(){return 3===arguments.length?n.apply(void 0,arguments):r.apply(void 0,arguments)};function r(e){var r,n=e.config,a=e.doc,i=(e.data,e.resources),s=o()(r=i.centers).call(r,(function(e){return e.id===+n.centerId}));if(s){var l,d=a.internal.pageSize.width,u=a.internal.pageSize.height;a.setFontStyle("normal"),a.setTextColor(t.footer.textColor),a.setFontSize(9),l=[s.name,s.phone,s.street1],s.street2&&l.push(s.street2),l.push(s.city),l.push(s.state.name||s.state),l.push(s.zip),l=l.join(" / "),a.text(l,(d-a.getTextWidth(l))/2,u-30)}}function n(e,r,n){var o,a=r.internal.pageSize.width,i=r.internal.pageSize.height;r.setFontStyle("normal"),r.setTextColor(t.footer.textColor),r.setFontSize(9),o=[n.center.name,n.center.phone,n.center.street1],n.center.street2&&o.push(n.center.street2),o.push(n.center.city),o.push(n.center.state.name||n.center.state),o.push(n.center.zip),o=o.join(" / "),r.text(o,(a-r.getTextWidth(o))/2,i-30)}}])},yt4b:function(e,t,r){"use strict";r.r(t);r("y89P");var n=r("Tfwl"),o=r.n(n),a=r("XAgg"),i=r.n(a),s=r("yKah"),l=r.n(s),d=r("lvz6"),u=r.n(d),c=r("hsT8"),f=r.n(c),p=r("Ekwr"),g=r.n(p),m=r("03wM"),h=r.n(m),y=r("nbuU"),v=r.n(y),S=r("yCd9"),w=r.n(S),R=r("WSeP"),b=r.n(R),C=r("fzuT"),D=r.n(C),O=r("D4RU"),x=r.n(O),E=r("Xai3");function T(e,t){var r=h()(e);if(g.a){var n=g()(e);t&&(n=f()(n).call(n,(function(t){return u()(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r,n=null!=arguments[t]?arguments[t]:{};if(t%2)b()(r=T(Object(n),!0)).call(r,(function(t){D()(e,t,n[t])}));else if(l.a)i()(e,l()(n));else{var a;b()(a=T(Object(n))).call(a,(function(t){o()(e,t,u()(n,t))}))}}return e}t.default=angular.module("deskworks.reports.reportHelper",[E.default.name,"csvMake","jsPDF","fileSaver","deskworks.logo","deskworks.reports.reportStyles","deskworks.reports.reportHeader","deskworks.reports.reportFooter"]).factory("reportHelper",["$rootScope","$q","$timeout","$window","$filter","$http","dwAlerts","state","logo","jsPDF","csvMake","centerService","reportStyles","reportHeader","reportFooter","reportSort","fileSaver",function(e,t,r,n,o,a,i,s,l,d,u,c,f,p,g,m,h){return{sort:m,paramsChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return x()(r).call(r,(function(r){return moment.isMoment(e[r])?!moment.isMoment(t[r])||!e[r].isSame(t[r]):e[r]!==t[r]}))},loadResources:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return{}};return t.all(k({},e(),{centers:c.query().catch((function(e){return i.error(e,"Failed to query centers.")})),logo:l.getSiteLogo()}))},buildPdf:function(e){var t,r,n=e.config,o=e.report,a=e.resources,i=e.doc,s=void 0===i?new d(n.paperLayout,"pt",n.paperSize):i,l=e.startY;b()(t=o.rows).call(t,(function(e){var t;b()(t=o.columns).call(t,(function(t,r){e[r]&&!angular.isUndefined(e[r].content)||(e[r]={content:e[r]});var n=e[r];!1===n.content?n.content="":(t.pdf&&(n.content=t.pdf(n.content)),n.content=angular.isUndefined(n.content)||null===n.content||""===n.content?"-":n.content)}))}));var u={columns:w()(r=o.columns).call(r,(function(e){return e.title.toUpperCase()})),body:o.rows,headStyles:(n.styles||f).headStyles,bodyStyles:(n.styles||f).bodyStyles,columnStyles:(n.styles||f).columnStyles,tableMargin:n.styles&&n.styles.tableMargin||(n.styles||f).pageMargins,startY:l||(n.styles||f).startY||!1,didParseCell:function(e){var t=e.row,r=e.cell,n=e.column;if("body"===e.section){angular.extend(r.styles,{minCellWidth:50,fillColor:!1},o.styles[t.index],o.columns[n.index].styles)}else angular.extend(r.styles,o.columns[n.index].styles)},didDrawCell:function(e){return function(e,t){var r=e.cell,n=e.doc;0===e.column.index&&r.styles.borderColor&&r.styles.borderWidth&&(n.setLineWidth(r.styles.borderWidth),n.setDrawColor(r.styles.borderColor[0],r.styles.borderColor[1],r.styles.borderColor[2]),n.rect(e.settings.margin.left+r.styles.borderWidth/2,e.row.y+r.styles.borderWidth/2,e.table.width-r.styles.borderWidth,e.row.height-2*r.styles.borderWidth,"S"));return!1}(e,o.columns)},didDrawPage:function(e){(n.header||p)({config:n,doc:s,data:e.table,resources:a}),(n.footer||g)({config:n,doc:s,data:e.table,resources:a})}};return u.margin=u.tableMargin||(n.styles||f).pageMargins,s.autoTable(u),s},buildCsv:function(e){var t,r,n=e.report,o={charset:"utf-8"};return b()(t=n.rows).call(t,(function(e){var t;b()(t=n.columns).call(t,(function(t,r){e[r]&&angular.isDefined(e[r].content)&&(e[r]=e[r].content),t.csv&&(e[r]=t.csv(e[r])),e[r]=angular.isUndefined(e[r])||null===e[r]||!1===e[r]||""===e[r]?"":e[r]}))})),n.rows.unshift(w()(r=n.columns).call(r,(function(e){return e.title.toUpperCase()}))),new Blob([u.generate(n.rows,o)],{type:"text/csv;charset="+o.charset+";"})},getReportFileName:function(e){var t,r=e.extension,n=void 0===r?"pdf":r,a=e.postfix,i=void 0===a?"":a,s=e.config,l=e.resources,d=s.reportName.toLowerCase().replace(/\s+/g,"-"),u=(v()(t=l.centers).call(t,(function(e){return e.id===+s.centerId}))||{name:"all-centers"}).name.toLowerCase().replace(/\s+/g,"-");return d+"-"+u+"-"+o("date")(moment(),"yyyyMMdd-HHmmss")+i+"."+n.toLowerCase()},download:function(e){var t=e.blob,r=e.fileName;if(!t)return;h(t,r)}}}])},zvMh:function(e,t,r){"use strict";r.r(t);r("8cZI"),r("JT/7"),r("JBxO"),r("kPpV"),r("/usm"),r("HJh7"),r("BqNe"),r("HKDy"),r("OgzJ"),r("lCat"),r("EApN"),r("MFGm"),r("lZgT"),r("JzGb"),r("WH+p"),r("xg3p"),r("soU3"),r("ajWl"),r("s5En"),r("EjQN"),r("36lJ"),r("fD/E"),r("LWud"),r("AxL9"),r("HztR"),r("xmYR"),r("cF0Y");t.default=angular.module("b64",[]).factory("b64",["$window",function(e){var t=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array;return function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=e.length;n<o;++n)t[n]=e[n],r[e.charCodeAt(n)]=n;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63}(),{toByteArray:function(e){var t,o,a,i,s,l,d=e.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s="="===e[d-2]?2:"="===e[d-1]?1:0,l=new n(3*d/4-s),a=s>0?d-4:d;var u=0;for(t=0,o=0;t<a;t+=4,o+=3)i=r[e.charCodeAt(t)]<<18|r[e.charCodeAt(t+1)]<<12|r[e.charCodeAt(t+2)]<<6|r[e.charCodeAt(t+3)],l[u++]=i>>16&255,l[u++]=i>>8&255,l[u++]=255&i;2===s?(i=r[e.charCodeAt(t)]<<2|r[e.charCodeAt(t+1)]>>4,l[u++]=255&i):1===s&&(i=r[e.charCodeAt(t)]<<10|r[e.charCodeAt(t+1)]<<4|r[e.charCodeAt(t+2)]>>2,l[u++]=i>>8&255,l[u++]=255&i);return l},fromByteArray:function(e){for(var r,n=e.length,a=n%3,i="",s=[],l=0,d=n-a;l<d;l+=16383)s.push(o(e,l,l+16383>d?d:l+16383));1===a?(r=e[n-1],i+=t[r>>2],i+=t[r<<4&63],i+="=="):2===a&&(r=(e[n-2]<<8)+e[n-1],i+=t[r>>10],i+=t[r>>4&63],i+=t[r<<2&63],i+="=");return s.push(i),s.join("")}};function o(e,r,n){for(var o,a,i=[],s=r;s<n;s+=3)o=(e[s]<<16)+(e[s+1]<<8)+e[s+2],i.push(t[(a=o)>>18&63]+t[a>>12&63]+t[a>>6&63]+t[63&a]);return i.join("")}}])}}]);