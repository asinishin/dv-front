(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{OiyR:function(t,e,n){"use strict";var r=n("WSeP"),a=n.n(r),o=n("YtL8"),l=n.n(o),i=n("hsT8"),s=n.n(i),u=n("nbuU"),c=n.n(u),d=n("xeXu"),m=n.n(d);e.a=angular.module("deskworks.invoiceHelper",[]).factory("invoiceHelper",["$translate","$filter",function(t,e){var n=["recurring","rental","deposit","payment","refund"],r=[{id:"recurring",_name:"INVOICE.RECURRING",filter:function(t){return"recurring"===t.type}},{id:"rental",_name:"INVOICE.RENTAL",filter:function(t){return"rental"===t.type}},{id:"deposit",_name:"INVOICE.DEPOSITS",filter:function(t){return"deposit"===t.type}},{id:"other",_name:"INVOICE.OTHER_CHARGES",filter:function(t){return m()(n).call(n,t.type)<0}},{id:"payment",_name:"INVOICE.PAYMENTS",filter:function(t){return"payment"===t.type}},{id:"refund",_name:"INVOICE.REFUNDS",filter:function(t){return"refund"===t.type}}];return{getGroup:function(e){var n=e.items,a=e.type;return a=c()(r).call(r,(function(t){return t.id===a})),n=s()(n).call(n,(function(t){return t.include&&s()(a).call(a,t)})),{name:t.instant(a._name),items:n,total:l()(n).call(n,(function(t,e){return t+ +e.amount}),0)}},getChargesTotal:function(t){var e;return l()(e=s()(t).call(t,(function(t){return t.include&&"payment"!==t.type&&"refund"!==t.type}))).call(e,(function(t,e){return t+(+e.amount||0)}),0)},getTaxTotals:o,getBalance:function(t){var e,n,r=l()(e=s()(t).call(t,(function(t){return t.include&&"payment"!==t.type&&"refund"!==t.type}))).call(e,(function(t,e){return t+(+e.amount||0)}),0)+l()(t).call(t,(function(t,e){return!e.include||"payment"!==e.type&&"refund"!==e.type?t:t+(+e.amount||0)}),0);return a()(n=o(t)).call(n,(function(t){r+=t.amount||0})),r},getLogoSize:function(t){var e=t.resources,n=0,r=0;if(e.logo){r=80;var a=(n=140)/e.logo.width,o=r/e.logo.height;a<=o?r*=a/o:n*=o/a}return{width:n,height:r}}};function o(t){var e,n=[];return a()(e=s()(t).call(t,(function(t){return t.include&&"payment"!==t.type&&"refund"!==t.type}))).call(e,(function(t){a()(angular).call(angular,t.taxes,(function(t,e){n.length<=e&&n.push({name:t.taxName,amount:0}),n[e].amount+=+t.taxAmount}))})),n}}])},uAdW:function(t,e,n){"use strict";n.r(e);var r=n("5/DJ"),a=angular.module("deskworks.alternateInvoiceStyles",["deskworks.helper",r.a.name]).factory("alternateInvoiceStyles",["helper","reportStyles",function(t,e){var n=angular.copy(e);return n.framePadding=[12,12,12,12],n.pageMargins=[52,40,40,40],n.startY=250,n.header.textColor="#000000",n.bodyStyles.lineWidth=1,n.bodyStyles.lineColor=0,n.bodyStyles.cellPadding=8,n.bodyStyles.fontSize=11,n.headStyles={fontSize:11,fontStyle:"bold",valign:"middle",fillColor:null,textColor:0,cellPadding:8,textTransform:null,lineWidth:1,lineColor:0},n.h1={halign:"right",fontStyle:"bold"},n.h2={fontStyle:"bold"},n.h3={halign:"right"},n}]),o=n("WSeP"),l=n.n(o),i=angular.module("deskworks.alternateInvoiceColumns",[]).factory("alternateInvoiceColumns",["$rootScope","$filter","$translate",function(t,e,n){var r=[{dataKey:"date",_title:"INVOICE.COLUMNS.DATE_ADDED",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(t){return e("date")(t,"mediumDate")},csv:function(t){return e("date")(t,"shortDate")}},{dataKey:"name",_title:"INVOICE.COLUMNS.ITEM",include:!0,styles:{minCellWidth:110}},{dataKey:"description",_title:"INVOICE.COLUMNS.DESCRIPTION",include:!0,styles:{minCellWidth:140},pdf:function(t){return e("date")(t,"mediumDate")},csv:function(t){return e("date")(t,"shortDate")}},{dataKey:"price",_title:"INVOICE.COLUMNS.PRICE",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(t){return e("ncurrency")(t)},csv:function(t){return e("ncurrency")(t)}},{dataKey:"qty",_title:"INVOICE.COLUMNS.QUANTITY",include:!0,styles:{cellWidth:"wrap",halign:"right"}},{dataKey:"amount",_title:"INVOICE.COLUMNS.AMOUNT",include:!0,styles:{cellWidth:"wrap",halign:"right"},pdf:function(t){return e("ncurrency")(t)},csv:function(t){return e("ncurrency")(t)}}];function a(){l()(r).call(r,(function(t){t.title=n.instant(t._title)}))}return a(),t.$on("$setTranslationsSuccess",a),r}]),s=(n("8cZI"),n("OiyR")),u=angular.module("deskworks.alternateInvoiceHeader",[s.a.name]).factory("alternateInvoiceHeader",["$rootScope","$filter","$translate","invoiceHelper",function(t,e,n,r){return function(a){var o,l,i,s=a.config,u=a.doc,c=a.data,d=a.resources,m=s.styles,y=u.internal.pageSize.width,p=u.internal.pageSize.height,f=r.getLogoSize({resources:d}),g=f.width,h=f.height,I=c.settings.margin,S=angular.copy(m.framePadding);S[0]+=h,I.top=m.pageMargins[0]+h,u.setFontStyle("normal"),u.setTextColor(m.header.textColor),u.setLineWidth(1),u.setDrawColor(0,0,0),u.rect(I.left-S[3],I.top-S[0],y-I.right-I.left+S[3]+S[1],p-I.top-I.bottom+S[0]+S[2],"S"),u.setFillColor(255,255,255),u.rect(y/2-100,I.top-S[0]-1,200,2,"F"),d.logo&&(l=y/2,i=I.top-S[0]-14,u.addImage(d.logo.data,l-g/2,i,g,h));if(u.setFontSize(9),o=n.instant("INVOICE.ALTERNATE.FOOTER",{company:t.wlLinks.companyName}),l=u.getTextWidth(o)+25,u.setFillColor(255,255,255),u.rect(y/2-l/2,p-I.bottom+S[2]-1,l,2,"F"),l=(y-u.getTextWidth(o))/2,i=p-I.bottom+S[2]+3,u.text(o,l,i),1!==c.pageCount)return;l=I.left,i=I.top+10,u.setFontSize(11),u.setFontStyle("normal"),o=n.instant("INVOICE.HEADER.DATE")+": "+e("date")(s.date||s.endDate,"mediumDate"),u.text(o,l,i),i+=26,u.text(s.userCompany||"",l,i),i+=13,s.address&&(u.text(s.address.street||"",l,i),i+=13,u.text([s.address.city,s.address.state.name||s.address.state,s.address.zip].join(", "),l,i),i+=26);u.text("Dear "+(s.userName||"")+",",l,i),i+=26,u.text("This is your invoice for membership charges for the coming month.",l,i),i+=26,u.text("Your billing method will be charged in a few days.",l,i),i+=26,u.setFontStyle("bold"),u.text("ORDER ID: "+s.orderId,l,i),u.setFontStyle("normal")}}]),c=n("yCd9"),d=n.n(c),m=n("hsT8"),y=n.n(m),p=angular.module("deskworks.alternateInvoiceBody",[s.a.name]).factory("alternateInvoiceBody",["$translate","$filter","invoiceHelper",function(t,e,n){return function(r){var a=r.config,o=(r.params,r.data),i=r.columns,s=r.resources,u=a.styles,c={columns:y()(i).call(i,(function(t){return t.include})),rows:[],styles:[]};f(n.getGroup({items:o.items,type:"recurring"})),f(n.getGroup({items:o.items,type:"rental"})),f(n.getGroup({items:o.items,type:"deposit"})),f(n.getGroup({items:o.items,type:"other"}));var m=n.getTaxTotals(o.items);m.length&&(c.rows.push([{content:t.instant("INVOICE.CHARGES")+": "+e("ncurrency")(n.getChargesTotal(o.items)),colSpan:c.columns.length}]),c.styles.push(u.h1),l()(m).call(m,(function(t){c.rows.push([{content:t.name+": "+e("ncurrency")(t.amount),colSpan:c.columns.length}]),c.styles.push(u.h1)})));f(n.getGroup({items:o.items,type:"payment"})),f(n.getGroup({items:o.items,type:"refund"})),c.rows.push([{content:t.instant("INVOICE.TOTAL")+": "+e("ncurrency")(n.getBalance(o.items)),colSpan:c.columns.length}]),c.styles.push(u.h1);var p=n.getLogoSize({resources:s}).height;u._startY||(u._startY=u.startY);return u.startY=u._startY+p-25,c;function f(n){var r;n.items&&n.items.length&&(c.rows.push([{content:n.name,colSpan:c.columns.length,styles:{halign:"left"}}]),c.styles.push(u.h2),l()(r=n.items).call(r,(function(t,e){var n;c.rows.push(d()(n=c.columns).call(n,(function(e){return t[e.dataKey]}))),c.styles.push(null)})),c.rows.push([{content:t.instant("INVOICE.TOTAL")+" "+n.name+": "+e("ncurrency")(n.total),colSpan:c.columns.length}]),c.styles.push(u.h3))}}}]),f=["$injector",function(t){return t.loadNewModules([a.name,i.name,u.name,p.name]),{styles:t.get("alternateInvoiceStyles"),columns:t.get("alternateInvoiceColumns"),header:t.get("alternateInvoiceHeader"),body:t.get("alternateInvoiceBody")}}];e.default=f}}]);