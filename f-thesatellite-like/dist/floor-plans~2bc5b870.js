(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"/MEN":function(t,e,n){},"03Ts":function(t,e,n){},"3W34":function(t,e){t.exports='<div class="ff-grid gutter-v-half gutter-h-half" style="justify-content:flex-start"> <ff-panel flex="0 1 auto" class="ff-flex-start" style="z-index:1" ngf-drop="$ctrl.upload($ctrl.plan, $files, $invalidFiles)" ngf-pattern="\'image/png,image/jpeg\'" ngf-drag-over-class="dragover"> <div class="ff-relative" flex="none" ng-click="$ctrl.onPlanClick($event)" ff-dim="!$ctrl.plan.$$imageLoaded"> <ff-img ff-src="{{$ctrl.plan.image}}" ff-img-loaded="$ctrl.plan.$$imageLoaded" class="fp-image" ff-alt="Floor Plan"></ff-img> <div class="fp-points" dnd-list dnd-drop="callback({ list: $ctrl.plan.points, targetIndex: index, event: event })"> <div ng-repeat="point in $ctrl.plan.points" dnd-draggable="null" dnd-callback="$ctrl.dropPoint(list, $index, event)" ng-click="$ctrl.onPointClick(point, $event)" class="fp-point" ng-class="{ available: !!point.$$unit.availableFullTime, selected: $ctrl.point === point, invalid: !point.$$unit }" ng-style="{ top: point.y + \'%\', left: point.x + \'%\' }"> <ff-tip ng-if="point.$$unit && !ffBlock.editMode" tip-type="white"> <ff-header>{{point.$$unit.name}}</ff-header> <ff-row> <ff-label flex="0 1 60px"><span translate="FLOOR_PLANS.POINT.STATUS"></span></ff-label> <ff-static><span translate="{{\'FLOOR_PLANS.POINT.STATUS.\' + (point.$$unit.availableFullTime ? \'AVAILABLE\' : \'NOT_AVAILABLE\')}}"></span></ff-static> </ff-row> <ff-row ng-if="point.$$unit.attachedUserName && !point.$$unit.$$user"> <ff-label flex="0 1 60px"><span translate="FLOOR_PLANS.POINT.MEMBER"></span></ff-label> <ff-static>{{point.$$unit.attachedUserName}}</ff-static> </ff-row> <ff-static ng-if="point.$$unit.$$user" class="ff-no-frame"> <ff-img flex="0 0 60px" class="fp-avatar" ff-src="{{point.$$unit.$$user.photo}}" ng-if="point.$$unit.$$user.photo" ff-alt="{{point.$$unit.$$user.name}}"></ff-img> <ff-col flex="auto"> <ff-col flex="auto" class="fp-user-container"> <div class="fp-user-name">{{point.$$unit.$$user.name}}</div> <div class="fp-user-company">{{point.$$unit.$$user.company}}</div> </ff-col> <ff-btn flex="none" sense="userSelect" size="sm" class="fp-btn-more" ff-click="$ctrl.more(point)"> <span translate="FLOOR_PLANS.POINT.BTN_MORE"></span> </ff-btn> </ff-col> </ff-static> </ff-tip> </div> </div> </div> </ff-panel> <div flex="{md: \'0 1 352px\'}" ng-if="$ctrl.point && (ffBlock.editMode || $ctrl.point.$$unit)"> <div class="ff-grid gutter-v-half"> <floor-plan-point-settings ng-if="$ctrl.point && ffBlock.editMode" class="ff-flex-start" point="$ctrl.point" categories="$ctrl.categories" units="$ctrl.units" delete-point="$ctrl.deletePoint()" save="$ctrl.save($ctrl.plan)"></floor-plan-point-settings> <floor-plan-point-details ng-if="$ctrl.point.$$unit" point="$ctrl.point" view="$ctrl.view" pricing-enabled="$ctrl.plan.pricingEnabled" area-enabled="$ctrl.plan.areaEnabled"></floor-plan-point-details> </div> </div> <ff-panel flex="{md: \'0 1 352px\'}" ng-if="!$ctrl.point && ffBlock.editMode" class="ff-flex-start"> <div><ff-icon sense="info"></ff-icon> <span translate="FLOOR_PLANS.POINT.HINT.SELECT"></span></div> <div><ff-icon sense="info"></ff-icon> <span translate="FLOOR_PLANS.POINT.HINT.CREATE"></span></div> <div><ff-icon sense="info"></ff-icon> <span translate="FLOOR_PLANS.POINT.HINT.DRAG"></span></div> </ff-panel> </div> '},DLcK:function(t,e,n){"use strict";n.r(e);n("3dw1");var r=n("yCd9"),l=n.n(r),a=n("nbuU"),i=n.n(a),f=n("0zKI"),o=n.n(f),s=(n("03Ts"),n("3W34")),c=n.n(s),p=n("tUjE"),d=n("JVmQ"),u=n("I5Zy"),$=n("iAzO");e.default=angular.module("deskworks.floorPlanDirective",[u.a.name,p.default.name,d.default.name,$.a.name]).directive("floorPlan",(function(){return{template:c.a,restrict:"E",scope:!0,controller:"FloorPlanDirectiveCtrl as $ctrl",bindToController:{plan:"<",categories:"<",units:"<",view:"<",upload:"<",save:"&"}}})).controller("FloorPlanDirectiveCtrl",["$element","$scope","$window","state","dwAlerts","helper","dwModal",function(t,e,n,r,a,f,s){var c=this;c.$onInit=function(){e.$watchCollection((function(){var t;return l()(t=c.plan.points).call(t,(function(t){return(t.$$unit||{}).id}))}),(function(t){c.units.forEach((function(t){var e;t.$$hasPoint=!!i()(e=c.plan.points).call(e,(function(e){return e.$$unit===t}))})),c.categories.forEach((function(t){var e;t.$$hasUnits=!!i()(e=c.units).call(e,(function(e){return!e.$$hasPoint&&e.reservationTypeId===t.id}))}))})),e.$watch("$ctrl.plan",(function(){c.point=null}))},c.onPointClick=function(t,n){e.ffBlock.editMode&&(c.point=t,n&&n.stopPropagation())},c.onPlanClick=function(n){if(e.ffBlock.editMode){var r=t[0].querySelector(".fp-image"),l={x:f.round(100*n.offsetX/r.offsetWidth),y:f.round(100*n.offsetY/r.offsetHeight)};c.plan.points.push(l),c.onPointClick(l)}},c.dropPoint=function(n,r,l){if(e.ffBlock.editMode){var a=n[r],i=t[0].querySelector(".fp-image");return a.x=f.round(100*l.offsetX/i.offsetWidth),a.y=f.round(100*l.offsetY/i.offsetHeight),c.save(c.plan),!0}},c.deletePoint=function(){var t;if(c.point)return o()(t=c.plan.points).call(t,c.plan.points.indexOf(c.point),1),c.point=null,c.save(c.plan)},c.more=function(t){s.show({scope:e,templateUrl:"members/our-members/our-member-modal.tpl.html",controller:"OurMemberModalCtrl",inputs:{member:t.$$unit.$$user}})}}])},EFlW:function(t,e){t.exports='<ff-panel> <div class="ff-col"> <div> <ff-header><span translate="FLOOR_PLANS.POINT.HEADER"></span></ff-header> <ff-select name="reservationCategory" ff-model="$ctrl.point.$$category" ff-required="true" ff-validate-alert="{{\'FLOOR_PLANS.CATEGORY\' | translate}}" ff-options="opt.name for opt in $ctrl.categories | filter: $ctrl.filterCategory"></ff-select> <ff-select name="reservationUnit" ff-model="$ctrl.point.$$unit" ff-change="$ctrl.save()" ff-required="true" ff-validate-alert="{{\'FLOOR_PLANS.UNIT\' | translate}}" ff-options="opt.name for opt in $ctrl.units | filter: $ctrl.filterUnit"></ff-select> </div> <ff-static ng-if="!$ctrl.point.$$category || !$ctrl.point.$$unit" class="ff-no-frame"> <span ng-if="!$ctrl.point.$$category"><ff-icon sense="info"></ff-icon> <span translate="FLOOR_PLANS.CATEGORY.HINT"></span></span> <span ng-if="$ctrl.point.$$category && !$ctrl.point.$$unit"><ff-icon sense="info"></ff-icon> <span translate="FLOOR_PLANS.UNIT.HINT"></span></span> </ff-static> <ff-btn-group style="margin-top:.5rem"> <ff-btn sense="delete" size="sm" ff-click="$ctrl.deletePoint()"><span translate="FLOOR_PLANS.POINT.BTN_DELETE"></span></ff-btn> </ff-btn-group> </div> </ff-panel> '},I5Zy:function(t,e,n){"use strict";var r=n("0zKI"),l=n.n(r),a=(n("RF9M"),n("/MEN"),n("jd5N"));e.a=angular.module("dnd",["dndLists",a.a.name]).factory("dnd",["keese",function(t){return{move:function(e,n,r,a){var i=e[n];r&&l()(r).call(r,a,0,i);e===r&&a<=n&&n++;if(l()(e).call(e,n,1),r){var f=r.indexOf(i);i.order=t.generate(r[f-1]&&r[f-1].order,r[f+1]&&r[f+1].order)}return i}}}])},JVmQ:function(t,e,n){"use strict";n.r(e);var r=n("EFlW"),l=n.n(r);e.default=angular.module("deskworks.floorPlanPointSettingsDirective",[]).directive("floorPlanPointSettings",(function(){return{template:l.a,restrict:"E",scope:!0,controller:"FloorPlanPointSettingsDirectiveCtrl as $ctrl",bindToController:{point:"<",categories:"<",units:"<",deletePoint:"&",save:"&"}}})).controller("FloorPlanPointSettingsDirectiveCtrl",["$scope",function(t){var e=this;e.filterCategory=function(t){return t.$$hasUnits||t===e.point.$$category},e.filterUnit=function(t){return t.reservationTypeId===(e.point.$$category&&e.point.$$category.id)&&(!t.$$hasPoint||e.point.$$unit===t)}}])},Sh1H:function(t,e,n){"use strict";n.r(e),e.default=angular.module("deskworks.FloorPlan",["ngResource","ngFileUpload","deskworks.config"]).factory("FloorPlan",["$resource","$timeout","Upload","deskworksConfig",function(t,e,n,r){var l=t(r.getApiAbsUrl("/floor-plans/:id"),{},{update:{method:"PUT"}});return{new:function(){return{enabled:!0,pricingEnabled:!0,areaEnabled:!0,points:[]}},query:function(t){return l.query({centerId:t}).$promise},save:function(t,e){return e.id?l.update({id:e.id,centerId:t},e).$promise:l.save({centerId:t},e).$promise.then((function(t){return e.id=t.id,t}))},delete:function(t){return l.delete({id:t}).$promise},uploadImage:function(t,e){return n.upload({url:r.getApiAbsUrl("/floor-plans/".concat(t)),method:"PUT",withCredentials:!0,data:{image:e}})}}}])},"SjL+":function(t,e,n){"use strict";n.r(e);n("8cZI");var r=n("hBaI"),l=n.n(r);e.default=angular.module("deskworks.floorPlanEmbeddingDirective",["deskworks.config"]).directive("floorPlanEmbedding",(function(){return{template:l.a,restrict:"E",scope:!0,controller:"FloorPlanEmbeddingDirectiveCtrl as $ctrl",bindToController:{floorPlan:"<"}}})).controller("FloorPlanEmbeddingDirectiveCtrl",["$scope","state","helper","deskworksConfig",function(t,e,n,r){var l=this;l.$onInit=function(){var t=r.getApiOrigin(),a=e.getCurrentCenterId();l.getCode=function(e){return n.join(["<script dw-floor-plans",'dw-center-id="'.concat(a,'"'),l.all?null:'dw-floor-plan-id="'.concat(l.floorPlan.id,'"'),'src="'.concat(t,'/floor-plans.js"'),'class="dw-spin"><\/script>']," ")}}}])},aGPx:function(t,e,n){},cfxb:function(t,e){t.exports='<ff-panel> <div ng-if="$ctrl.view === \'public\'"> <ff-header>{{$ctrl.point.$$unit.name}}</ff-header> <ff-img class="fp-unit-photo" ng-if="$ctrl.point.$$unit.photo" ff-alt="{{$ctrl.point.$$unit.name}}" ff-src="{{$ctrl.point.$$unit.thumbnail}}" ff-src-hq="{{$ctrl.point.$$unit.photo}}"></ff-img> <ff-static class="fp-descr" ng-if="$ctrl.point.$$unit.description">{{$ctrl.point.$$unit.description}}</ff-static> <ff-row ng-if="$ctrl.point.$$unit.capacity"> <ff-static><span translate="GLOBAL.UNIT_CAPACITY" translate-values="{ capacity: $ctrl.point.$$unit.capacity }"></span></ff-static> </ff-row> <ff-row> <ff-label flex="0 0 52px"><span translate="FLOOR_PLANS.POINT.STATUS"></span></ff-label> <ff-static> <span translate="{{\'FLOOR_PLANS.POINT.STATUS.\' + ($ctrl.point.$$unit.availableFullTime ? \'AVAILABLE\' : \'NOT_AVAILABLE\')}}"></span> </ff-static> </ff-row> <ff-row ng-if="$ctrl.pricingEnabled && $ctrl.point.$$unit.fullTimePrice"> <ff-label flex="0 0 52px"><span translate="FLOOR_PLANS.POINT.PRICE"></span></ff-label> <ff-static>{{$ctrl.point.$$unit.fullTimePrice | ncurrency}}</ff-static> </ff-row> <ff-row ng-if="$ctrl.areaEnabled && $ctrl.point.$$unit.area"> <ff-label flex="0 0 52px"><span translate="FLOOR_PLANS.POINT.AREA"></span></ff-label> <ff-static>{{$ctrl.point.$$unit.area}} {{$ctrl.areaUnit}}</ff-static> </ff-row> </div> <div ng-if="$ctrl.view === \'community\'"> <ff-header>{{$ctrl.point.$$unit.name}}</ff-header> <div> <ff-row> <ff-label flex="0 1 80px"><span translate="FLOOR_PLANS.POINT.STATUS"></span></ff-label> <ff-static> <span translate="{{\'FLOOR_PLANS.POINT.STATUS.\' + ($ctrl.point.$$unit.availableFullTime ? \'AVAILABLE\' : \'NOT_AVAILABLE\')}}"></span> </ff-static> </ff-row> <ff-row ng-if="$ctrl.point.$$unit.attachedUserName && !$ctrl.point.$$unit.$$user"> <ff-label flex="0 1 80px"><span translate="FLOOR_PLANS.POINT.MEMBER"></span></ff-label> <ff-static>{{$ctrl.point.$$unit.attachedUserName}}</ff-static> </ff-row> <ff-row ng-if="$ctrl.point.$$unit.$$user"> <ff-static> <ff-img flex="0 0 60px" class="fp-avatar" ff-src="{{$ctrl.point.$$unit.$$user.photo}}" ng-if="$ctrl.point.$$unit.$$user.photo" ff-alt="{{$ctrl.point.$$unit.$$user.name}}"></ff-img> <ff-col style="margin-right:.5rem;padding:.5rem 0"> <span class="fp-user-name">{{$ctrl.point.$$unit.$$user.name}}</span> <span class="fp-user-company">{{$ctrl.point.$$unit.$$user.company}}</span> </ff-col> <ff-btn flex="none" sense="userSelect" size="sm" class="fp-btn-more" ff-click="$ctrl.more()"> <span translate="FLOOR_PLANS.POINT.BTN_MORE"></span> </ff-btn> </ff-static> </ff-row> <ff-row ng-if="$ctrl.point.$$unit.fullTimeProductId && ffBlock.editMode"> <ff-label flex="0 1 80px"><span translate="FLOOR_PLANS.POINT.PRODUCT"></span></ff-label> <ff-static>{{$ctrl.point.$$unit.fullTimeProductName}}</ff-static> </ff-row> <ff-row ng-if="$ctrl.point.$$unit.fullTimeProductId && ffBlock.editMode"> <ff-label flex="0 1 80px"><span translate="FLOOR_PLANS.POINT.PRICE"></span></ff-label> <ff-static>{{$ctrl.point.$$unit.fullTimePrice | ncurrency}}</ff-static> </ff-row> <ff-row ng-if="$ctrl.point.$$unit.fullTimeProductId && ffBlock.editMode"> <ff-label flex="0 1 80px"><span translate="FLOOR_PLANS.POINT.NET"></span></ff-label> <ff-static>{{$ctrl.point.$$unit.fullTimeNet | ncurrency}}</ff-static> </ff-row> <ff-row ng-if="$ctrl.point.$$unit.fullTimeProductId && ffBlock.editMode"> <ff-label flex="0 1 80px"><span translate="FLOOR_PLANS.POINT.DISCOUNT"></span></ff-label> <ff-static>{{$ctrl.point.$$unit.fullTimeDiscount | ncurrency}}</ff-static> </ff-row> </div> </div> </ff-panel> '},e32L:function(t,e,n){"use strict";n.r(e);var r=n("wOy2"),l=n.n(r);e.default=angular.module("deskworks.floorPlanSettingsDirective",[]).directive("floorPlanSettings",(function(){return{template:l.a,restrict:"E",scope:!0,controller:"FloorPlanSettingsDirectiveCtrl as $ctrl",bindToController:{plan:"<",delete:"&",upload:"<",save:"&"}}})).controller("FloorPlanSettingsDirectiveCtrl",["$scope",function(t){}])},eL8s:function(t,e,n){"use strict";n.r(e);n("3dw1"),n("Muwe"),n("y89P");var r=n("yCd9"),l=n.n(r),a=n("lRNC"),i=n.n(a),f=["$injector",function(t){var e,r,a=(e=n("xlK/"),l()(r=i()(e).call(e)).call(r,e));t.loadNewModules(l()(a).call(a,(function(t){return t.default.name}))),t.invoke(["$templateCache",function(t){var e=n("zB24");i()(e).call(e).forEach((function(n){return t.put(n.replace(/^\.\//,""),e(n))}))}])}];e.default=f},hBaI:function(t,e){t.exports="<ff-panel> <ff-panel-header><span translate=\"FLOOR_PLANS.EMBEDDING.HEADER\"></span></ff-panel-header> <ff-static> <label><ff-checkbox ff-model=\"$ctrl.all\"><span translate=\"FLOOR_PLANS.EMBEDDING.ALL\"></span></ff-checkbox></label> &nbsp; <ff-hint><span translate=\"FLOOR_PLANS.EMBEDDING.ALL.HINT\"></span></ff-hint> </ff-static> <ff-static><span translate=\"FLOOR_PLANS.EMBEDDING.HINT\"></span></ff-static> <ff-static ff-style=\"{'white-space': 'pre-wrap', 'font-family': 'monospace', 'font-size': '.85em', 'line-height': '1.25'}\">{{$ctrl.getCode()}}</ff-static> </ff-panel> "},hfBW:function(t,e,n){"use strict";n.r(e);n("3dw1"),n("JBxO"),n("FdtR");var r=n("yCd9"),l=n.n(r),a=n("nbuU"),i=n.n(a),f=n("hsT8"),o=n.n(f),s=n("0zKI"),c=n.n(s),p=(n("aGPx"),n("Sh1H")),d=n("DLcK"),u=n("e32L"),$=n("SjL+"),g=n("2/1H");e.default=angular.module("deskworks.FloorPlansCtrl",["autoSave","deskworks.reservationCategory.service",p.default.name,d.default.name,u.default.name,$.default.name,g.a.name,"deskworks.OurMembers"]).controller("FloorPlansCtrl",["$scope","$translate","$filter","$q","$window","$timeout","session","dwAlerts","state","helper","autoSave","FloorPlan","ReservationUnit","reservationCategoryService","OurMembers",function(t,e,n,r,a,f,s,p,d,u,$,g,m,v,P){var h=this;d.setPageTitle(e.instant("FLOOR_PLANS.PAGE_TITLE")),h.onInit=function(){f((function(){h.view=t.$resolve.communityOnly?"community":"public",h.fetch().then((function(t){var e=t.floorPlans,n=t.reservationCategories,r=t.reservationUnits,a=t.members;h.categories=l()(n).call(n,(function(t){return u.pick(t,["id","name"])})),h.units=l()(r).call(r,(function(t){var e=u.pick(t,["id","name","description","area","capacity","thumbnail","photo","attachedUserId","attachedUserName","availableFullTime","fullTimeProductId","fullTimeProductName","fullTimePrice","fullTimeNet","fullTimeDiscount","reservationTypeId"]);return e.attachedUserId&&(e.$$user=i()(a).call(a,(function(t){return t.id===e.attachedUserId}))),e})),h.floorPlans=e,h.floorPlan=h.floorPlans[0],h.floorPlans.forEach((function(t){t.points.forEach((function(t){var e,n;t.$$unit=i()(e=h.units).call(e,(function(e){return e.id===t.reservationUnitId})),t.$$category=t.$$unit&&i()(n=h.categories).call(n,(function(e){return e.id===t.$$unit.reservationTypeId}))}))}))}))}))},h.fetch=function(){var t={};return t.floorPlans=g.query(d.getCurrentCenterId()).catch((function(t){return p.error(t,"Failed to query floor plans.")})),t.reservationCategories=v.query(d.getCurrentCenterId()).catch((function(t){return p.error(t,"Failed to query reservation categories.")})),t.reservationUnits=m.query(d.getCurrentCenterId()).catch((function(t){return p.error(t,"Failed to query reservation units.")})),t.members=P.query({centerId:d.getCurrentCenterId(),limit:1e4}).catch((function(t){return p.error(t,"Failed to query our members.")})),r.all(t)},h.addPlan=function(){h.floorPlan=g.new(),h.floorPlans.push(h.floorPlan)},h.save=$.wrap((function(){var t;if(u.pointFirstInvalid("floor-plan-settings"))return;var e=u.pick(h.floorPlan,["id","name","enabled","pricingEnabled","areaEnabled","points"]);return e.points=o()(t=e.points).call(t,(function(t){return!(!t.$$unit||!(t.reservationUnitId=t.$$unit.id))})),g.save(d.getCurrentCenterId(),e).catch((function(t){return p.error(t,"Failed to save floor plan")})).then((function(t){h.floorPlan.id=t.id}))})),h.deletePlan=function(t){if(!t.id||a.confirm(e.instant("FLOOR_PLANS.CONFIRM_DELETE")))return(t.id?g.delete(t.id):r.when()).catch((function(t){return p.error(t,"Failed to delete floor plan.")})).then((function(){var e;c()(e=h.floorPlans).call(e,h.floorPlans.indexOf(t),1),t===h.floorPlan&&(h.floorPlan=h.floorPlans[0])}))},h.uploadPlanImage=function(t,n,r){if(!u.pointFirstInvalid("floor-plan-settings")){if(r&&r.length>0)return p.error(e.instant("FLOOR_PLANS.IMAGE.INVALID_FORMAT"));if(t&&t.id&&n&&n.length)return t.$$spinUpload=!0,g.uploadImage(t.id,n[0]).catch((function(t){return p.error(t,"Failed to upload floor plan image.")})).finally((function(){t.$$spinUpload=!1})).then((function(e){t.thumbnail=e.data.thumbnail+"?"+Date.now(),t.image=e.data.image+"?"+Date.now()}))}},h.onInit()}])},jd5N:function(t,e,n){"use strict";var r=n("gQJ2"),l=n.n(r);e.a=angular.module("keese",[]).factory("keese",(function(){var t="0123456789?@ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",e=t.length,n=function(){for(var e={},n=0;n<t.length;n++)e[t[n]]=n;return e}();return{generate:function(t,e,n){return n?a(t,e,n):r(t,e)}};function r(t,e){return t?e?i(t,e):((n=o(t)).digits=n.digits.substr(0,n.order_length+1),f(n,o("1"))):e?i("0",e):"1";var n}function a(t,e,n){var l=new Array(n);if(n>0)if(e)!function t(e,n,a,i){var f=Math.floor((a+i)/2),o=r(e,n);l[f]=o,a<f&&t(e,o,a,f);f+1<i&&t(o,n,f+1,i)}(t,e,0,n);else for(var a=0;a<n;a++){var i=keese(t,null);l[a]=i,t=i}return l}function i(r,a){if(r>a)throw new Error("assertion failed: "+l()(r)+" < "+l()(a));var i=o(r),p=o(a);c(i,p);for(var d=0,u=Math.max(i.digits.length,p.digits.length),$=0;$<u||d>0;$++){var g=n[i.digits[$]]||0,m=d+(n[p.digits[$]]||0);if(g!==m){if(g!==m-1){for(var v=Math.floor((m-g)/2),P="",h=0;h<$;h++)P+="0";P+=t[v];var b=o(s(i.order_length,P));return i.digits=i.digits.substr(0,$+1),f(i,b)}d=e}}throw new Error}function f(r,l){c(r,l);for(var a="",i=r.order_length,f=0,o=Math.max(r.digits.length,l.digits.length)-1;o>=0;o--)f+=n[r.digits[o]]||0,f+=n[l.digits[o]]||0,a=t[f%e]+a,f=Math.floor(f/e);for(;f>0;)a=t[f%e]+a,f=Math.floor(f/e),i++;return s(i,a)}function o(t){var e=t.lastIndexOf("~")+1;return{order_length:e,digits:t.substr(e)}}function s(t,e){for(;t>0&&"0"==e.charAt(0);)e=e.substr(1),t--;for(var n="",r=0;r<t;r++)n+="~";return n+e}function c(t,e){p(t,e.order_length),p(e,t.order_length)}function p(t,e){for(;t.order_length<e;)t.digits="0"+t.digits,t.order_length++}}))},"s8F+":function(t,e){t.exports='<div class="floor-plans" ff-bulk-read-only="$resolve.communityOnly"> <h1 class="page-title">{{state.getPageTitle()}}</h1> <div class="ff-grid gutter-v-half gutter-h-half"> <ff-panel flex="{md: \'0 0 40%\'}" class="ff-flex-start"> <ff-panel-header><span translate="FLOOR_PLANS.SELECT_A_PLAN"></span></ff-panel-header> <ff-row ff-dim="!$ctrl.floorPlans"> <ff-select name="floorPlan" ff-model="$ctrl.floorPlan" class="ff-read-only-ignore" ff-options="p.name || \'\' for p in $ctrl.floorPlans"></ff-select> <ff-btn-group class="buttons-row" flex="none"> <ff-btn sense="add" size="xs" ff-click="$ctrl.addPlan()"></ff-btn> </ff-btn-group> </ff-row> <div class="ff-grid gutter-h-half ff-read-only-ignore" style="justify-content:flex-start" ng-if="!$resolve.communityOnly"> <label flex="none"> <ff-radio ff-model="$ctrl.view" ff-value="\'public\'"><span translate="FLOOR_PLANS.VIEW.PUBLIC"></span></ff-radio> </label> <label flex="none"> <ff-radio ff-model="$ctrl.view" ff-value="\'community\'"><span translate="FLOOR_PLANS.VIEW.COMMUNITY"></span></ff-radio> </label> </div> </ff-panel> <floor-plan-settings flex="{md: \'0 0 60%\'}" ng-if="ffBlock.editMode && $ctrl.floorPlan" class="animate-collapse" plan="$ctrl.floorPlan" delete="$ctrl.deletePlan($ctrl.floorPlan)" save="$ctrl.save($ctrl.floorPlan)" upload="$ctrl.uploadPlanImage"></floor-plan-settings> <floor-plan ng-if="$ctrl.floorPlan.image" class="animate-collapse" plan="$ctrl.floorPlan" categories="$ctrl.categories" units="$ctrl.units" view="$ctrl.view" save="$ctrl.save()" upload="$ctrl.uploadPlanImage"></floor-plan> <floor-plan-embedding ng-if="ffBlock.editMode && $ctrl.floorPlan.image" floor-plan="$ctrl.floorPlan" class="animate-collapse"></floor-plan-embedding> </div> </div> '},tUjE:function(t,e,n){"use strict";n.r(e);var r=n("nbuU"),l=n.n(r),a=n("cfxb"),i=n.n(a),f=n("iAzO");e.default=angular.module("deskworks.floorPlanPointDetailsDirective",[f.a.name]).directive("floorPlanPointDetails",(function(){return{template:i.a,restrict:"E",scope:!0,controller:"FloorPlanPointDetailsDirectiveCtrl as $ctrl",bindToController:{point:"<",pricingEnabled:"<",areaEnabled:"<",view:"<"}}})).controller("FloorPlanPointDetailsDirectiveCtrl",["$scope","dwModal",function(t,e){var n,r=this;r.areaUnit=(l()(n=window.dwLocales).call(n,(function(e){return e.id===t.currentLocale}))||{}).area||"ftÂ²",r.more=function(){e.show({scope:t,templateUrl:"members/our-members/our-member-modal.tpl.html",controller:"OurMemberModalCtrl",inputs:{member:r.point.$$unit.$$user}})}}])},wOy2:function(t,e){t.exports='<ff-panel ngf-drop="$ctrl.upload($ctrl.plan, $files, $invalidFiles)" ngf-pattern="\'image/png,image/jpeg\'" ngf-drag-over-class="dragover"> <ff-panel-header> <span translate="FLOOR_PLANS.SETTINGS.HEADER"></span> <ff-hint><span translate="FLOOR_PLANS.IMAGE.HINT"></span></ff-hint> </ff-panel-header> <ff-spin ng-if="$ctrl.plan.$$autoSaving"></ff-spin> <div class="ff-grid" style="justify-content:flex-start"> <label class="ff-row" flex="0 1 240px"> <ff-label flex="0 1 60px"><req translate="FLOOR_PLANS.NAME"></req></ff-label> <ff-text name="floorPlanName" ff-model="$ctrl.plan.name" ff-change="$ctrl.save()" ff-required="true" ff-validate-alert="{{\'FLOOR_PLANS.NAME\' | translate}}"></ff-text> </label> <ff-static class="ff-no-frame" flex="auto"> <div class="ff-grid gutter-h-half"> <label flex="none"> <ff-checkbox name="enabled" ff-model="$ctrl.plan.enabled" ff-change="$ctrl.save()"> <span translate="FLOOR_PLANS.ENABLED"></span> </ff-checkbox> </label> <label flex="none"> <ff-checkbox name="pricingEnabled" ff-model="$ctrl.plan.pricingEnabled" ff-change="$ctrl.save()"> <span translate="FLOOR_PLANS.PRICING_VISIBLE"></span> </ff-checkbox> </label> <label flex="none"> <ff-checkbox name="areaEnabled" ff-model="$ctrl.plan.areaEnabled" ff-change="$ctrl.save()"> <span translate="FLOOR_PLANS.AREA_VISIBLE"></span> </ff-checkbox> </label> </div> </ff-static> </div> <ff-btn-group style="margin-top:.5rem"> <ff-btn sense="upload" size="sm" ff-spin="$ctrl.plan.$$spinUpload" ngf-select="$ctrl.upload($ctrl.plan, $files, $invalidFiles)" ngf-pattern="\'image/png,image/jpeg\'" accept="image/png,image/jpeg"> <span translate="FLOOR_PLANS.IMAGE.BTN_UPLOAD"></span> </ff-btn> <ff-btn sense="delete" size="sm" ff-click="$ctrl.delete()"><span translate="FLOOR_PLANS.BTN_DELETE"></span></ff-btn> </ff-btn-group> </ff-panel> '},"xlK/":function(t,e,n){var r={"./directives/floor-plan-embedding.directive.js":"SjL+","./directives/floor-plan-point-details.directive.js":"tUjE","./directives/floor-plan-point-settings.directive.js":"JVmQ","./directives/floor-plan-settings.directive.js":"e32L","./directives/floor-plan.directive.js":"DLcK","./floor-plans/floor-plans.controller.js":"hfBW","./services/floor-plan.service.js":"Sh1H"};function l(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}l.keys=function(){return Object.keys(r)},l.resolve=a,t.exports=l,l.id="xlK/"},zB24:function(t,e,n){var r={"./directives/floor-plan-embedding.tpl.html":"hBaI","./directives/floor-plan-point-details.tpl.html":"cfxb","./directives/floor-plan-point-settings.tpl.html":"EFlW","./directives/floor-plan-settings.tpl.html":"wOy2","./directives/floor-plan.tpl.html":"3W34","./floor-plans/floor-plans.tpl.html":"s8F+"};function l(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}l.keys=function(){return Object.keys(r)},l.resolve=a,t.exports=l,l.id="zB24"}}]);