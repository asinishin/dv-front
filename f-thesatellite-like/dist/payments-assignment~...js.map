{"version":3,"sources":["webpack:///../node_modules/core-js/internals/array-method-has-species-support.js","webpack:///../node_modules/core-js/modules/es.array.filter.js","webpack:///./bundles/payments-assignment sync .*\\.tpl\\.html$","webpack:///./bundles/payments-assignment/bulk-assignment/bulk-assignment-filter.directive.js","webpack:///./bundles/payments-assignment/bulk-assignment/bulk-assignment-filter.tpl.html","webpack:///./bundles/payments-assignment/bulk-assignment/bulk-assignment.controller.js","webpack:///./bundles/payments-assignment/bulk-assignment/bulk-assignment.service.js","webpack:///./bundles/payments-assignment/bulk-assignment/bulk-assignment.tpl.html","webpack:///./bundles/payments-assignment/dialog/payments-assignment-dialog.service.js","webpack:///./bundles/payments-assignment/dialog/payments-assignment-dialog.tpl.html","webpack:///./bundles/payments-assignment/discount-assignment/discount-assignment-btn.directive.js","webpack:///./bundles/payments-assignment/discount-assignment/discount-assignment.directive.js","webpack:///./bundles/payments-assignment/discount-assignment/discount-assignment.scss?ae93","webpack:///./bundles/payments-assignment/discount-assignment/discount-assignment.tpl.html","webpack:///./bundles/payments-assignment/index.js","webpack:///./bundles/payments-assignment/payments-assignment/payments-assignment.directive.js","webpack:///./bundles/payments-assignment/payments-assignment/payments-assignment.service.js","webpack:///./bundles/payments-assignment/payments-assignment/payments-assignment.tpl.html","webpack:///./shared/autofocus/autofocus.directive.js","webpack:///./shared/dw-invoice/dw-invoice-small.directive.js","webpack:///./shared/dw-invoice/dw-invoice-small.tpl.html"],"names":["angular","module","directive","$compile","restrict","scope","transclude","priority","controller","bindToController","model","link","$scope","$element","$attrs","$ctrl","$transclude","clone","newScope","tpl","template","element","querySelector","append","after","$location","$filter","$translate","filters","id","name","instant","predicate","hasPaymentAssignments","manualPaymentAssignment","$onInit","watchFromDate","watchToDate","watchFilter","$watch","search","fromDate","val","date","moment","isMoment","isSame","replace","toDate","filter","f","BulkPaymentsAssignment","dwInvoiceSmall","bulkPaymentsAssignmentFilterDirective","reportHelper","$timeout","dwAlerts","state","helper","debounce","setPageTitle","paramsChanged","subtract","startOf","endOf","onInit","fetch","orders","np","op","fetching","query","centerId","getCurrentCenterId","pick","catch","err","error","finally","then","result","assign","o","include","data","invoices","length","save","info","forEach","factory","$resource","deskworksConfig","datesDeserializer","desDates","resOrders","getApiAbsUrl","method","isArray","transformResponse","fromJson","resBulk","params","$promise","dwModal","paymentsAssignmentDirective","open","purchaseId","show","inputs","close","back","discount","addClass","PaymentsAssignment","toggle","$$collapsed","pointFirstInvalid","$onChanges","autofocusDirective","assignment","$onDestroy","get","charges","charge","amount","validate","value","total","key","reduce","sum","isNaN","amountLeft","index","$injector","loadNewModules","paymentsAssignmentDialog","BulkPaymentsAssignmentCtrl","discountAssignmentDirective","discountAssignmentBtnDirective","invoke","$templateCache","ctx","require","put","payments","expression","obj","p","calcBalances","deserializeNumbers","desNumbers","res","update","deserialize","round","tax","balance","payment","delta","isNumber","autofocus","input","parentNode","focus","invoice","compile","tElement","tAttrs"],"mappings":"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","file":"payments-assignment~...js?_rev=5bd9ac4597b3d1a654d1","sourcesContent":["var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var map = {\n\t\"./bulk-assignment/bulk-assignment-filter.tpl.html\": \"./bundles/payments-assignment/bulk-assignment/bulk-assignment-filter.tpl.html\",\n\t\"./bulk-assignment/bulk-assignment.tpl.html\": \"./bundles/payments-assignment/bulk-assignment/bulk-assignment.tpl.html\",\n\t\"./dialog/payments-assignment-dialog.tpl.html\": \"./bundles/payments-assignment/dialog/payments-assignment-dialog.tpl.html\",\n\t\"./discount-assignment/discount-assignment.tpl.html\": \"./bundles/payments-assignment/discount-assignment/discount-assignment.tpl.html\",\n\t\"./payments-assignment/payments-assignment.tpl.html\": \"./bundles/payments-assignment/payments-assignment/payments-assignment.tpl.html\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/payments-assignment sync recursive .*\\\\.tpl\\\\.html$\";","import template from './bulk-assignment-filter.tpl.html';\n\nexport default angular.module('deskworks.bulkPaymentsAssignmentFilterDirective', [])\n\n  .directive('bulkPaymentsAssignmentFilter', ($compile) => {\n    return {\n      restrict: 'EAC',\n      scope: true,\n      transclude: 'element',\n      priority: 2, // To be higher than ngModel directive with priority: 1\n      controller: 'BulkPaymentsAssignmentFilterCtrl as $ctrl',\n      bindToController: {\n        model: '<',\n      },\n\n      link: ($scope, $element, $attrs, $ctrl, $transclude) => {\n        $transclude((clone, newScope) => {\n          const tpl = $compile(template)($scope);\n          angular.element(tpl[0].querySelector ? tpl[0].querySelector('.ff-panel-body') : tpl).append(clone); // append custom content before compilation\n          $element.after(tpl);\n        });\n      },\n    };\n  })\n\n  .controller('BulkPaymentsAssignmentFilterCtrl', function($scope, $location, $filter, $translate) {\n    const $ctrl = this;\n\n    $ctrl.filters = [\n      { id: 'all', name: $translate.instant('PAYMENTS_ASSIGNMENT.FILTER.ALL'), predicate: {} },\n      { id: 'withoutAssignment', name: $translate.instant('PAYMENTS_ASSIGNMENT.FILTER.WITHOUT_ASSIGNMENT'), predicate: { hasPaymentAssignments: false } },\n      { id: 'withAssignment', name: $translate.instant('PAYMENTS_ASSIGNMENT.FILTER.WITH_ASSIGNMENT'), predicate: { hasPaymentAssignments: true } },\n      { id: 'withManualAssignment', name: $translate.instant('PAYMENTS_ASSIGNMENT.FILTER.WITH_MANUAL_ASSIGNMENT'), predicate: { manualPaymentAssignment: true } },\n    ];\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = () => {\n      watchFromDate();\n      watchToDate();\n      watchFilter();\n    };\n\n    /**\n     * Map fromDate to URL search param\n     */\n    function watchFromDate() {\n      $scope.$watch(() => $location.search().fromDate, (val) => {\n        const date = $filter('toDate')(val);\n        $ctrl.model.fromDate = moment.isMoment(date) && !$ctrl.model.fromDate.isSame(date) ? date : $ctrl.model.fromDate;\n      });\n      $scope.$watch('$ctrl.model.fromDate', (val) => {\n        if (!moment.isMoment(val)) return;\n        $location.search('fromDate', $filter('date')(val, 'yyyy-MM-dd')).replace();\n      });\n    }\n\n    /**\n     * Map toDate to URL search param\n     */\n    function watchToDate() {\n      $scope.$watch(() => $location.search().toDate, (val) => {\n        const date = $filter('toDate')(val);\n        $ctrl.model.toDate = moment.isMoment(date) && !$ctrl.model.toDate.isSame(date) ? date : $ctrl.model.toDate;\n      });\n      $scope.$watch('$ctrl.model.toDate', (val) => {\n        if (!moment.isMoment(val)) return;\n        $location.search('toDate', $filter('date')(val, 'yyyy-MM-dd')).replace();\n      });\n    }\n\n    /**\n     * Map filter to URL search param\n     */\n    function watchFilter() {\n      $scope.$watch(() => $location.search().filter, (val) => {\n        $ctrl.model.filter = $ctrl.filters.find(f => f.id === val) || $ctrl.filters[0];\n      });\n      $scope.$watch('$ctrl.model.filter', (val) => {\n        $location.search('filter', val.id).replace();\n      });\n    }\n  });\n","// Module\nvar code = \"<ff-panel> <div class=\\\"ff-grid gutter-h\\\"> <div class=\\\"ff-grid\\\" flex=\\\"{lg: '0 0 50%'}\\\"> <label class=\\\"ff-row\\\" flex=\\\"{sm: '0 0 50%'}\\\" ng-if=\\\"$ctrl.model.fromDate !== false\\\"> <ff-label flex=\\\"{sm: '0 0 50px', xs: '0 0 50px'}\\\" ff-required=\\\"true\\\"><span translate=\\\"PAYMENTS_ASSIGNMENT.FROM\\\"></span></ff-label> <ff-date flex=\\\"0 0 124px\\\" ff-model=\\\"$ctrl.model.fromDate\\\" ff-required=\\\"true\\\" ff-date-order=\\\"{ early: $ctrl.model.fromDate, late: $ctrl.model.toDate }\\\" ff-validate-alert=\\\"{ field: '{{'PAYMENTS_ASSIGNMENT.FROM' | translate}}', late: '{{'PAYMENTS_ASSIGNMENT.TO' | translate}}' }\\\"></ff-date> <span class=\\\"ff-label\\\"></span> </label> <label class=\\\"ff-row\\\" flex=\\\"{sm: '0 0 50%'}\\\"> <ff-label flex=\\\"{sm: '0 0 32px', xs: '0 0 50px'}\\\" ff-required=\\\"true\\\"><span translate=\\\"PAYMENTS_ASSIGNMENT.TO\\\"></span></ff-label> <ff-date flex=\\\"0 0 124px\\\" ff-model=\\\"$ctrl.model.toDate\\\" ff-required=\\\"true\\\" ff-date-order=\\\"{ early: $ctrl.model.fromDate, late: $ctrl.model.toDate }\\\" ff-validate-alert=\\\"{ field: '{{'PAYMENTS_ASSIGNMENT.TO' | translate}}', early: '{{'PAYMENTS_ASSIGNMENT.FROM' | translate}}' }\\\"></ff-date> <span class=\\\"ff-label\\\"></span> </label> </div> <ff-row flex=\\\"{lg: '0 0 50%'}\\\"> <ff-label flex=\\\"0 0 60px\\\"><span translate=\\\"PAYMENTS_ASSIGNMENT.FILTER\\\"></span></ff-label> <ff-select ff-model=\\\"$ctrl.model.filter\\\" ff-options=\\\"opt.name for opt in $ctrl.filters\\\"></ff-select> </ff-row> </div> </ff-panel> \";\n// Exports\nmodule.exports = code;","import dwInvoiceSmall from 'shared/dw-invoice/dw-invoice-small.directive';\nimport BulkPaymentsAssignment from './bulk-assignment.service';\nimport bulkPaymentsAssignmentFilterDirective from './bulk-assignment-filter.directive';\nimport reportHelper from 'shared/reports/services/report-helper.service';\n\nexport default angular.module('deskworks.BulkPaymentsAssignmentCtrl', [\n  BulkPaymentsAssignment.name,\n  dwInvoiceSmall.name,\n  bulkPaymentsAssignmentFilterDirective.name,\n  reportHelper.name,\n  'debounce',\n])\n\n  .controller('BulkPaymentsAssignmentCtrl', function($scope, $translate, $timeout, dwAlerts, state, helper, debounce,\n                                                     BulkPaymentsAssignment, reportHelper) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('PAYMENTS_ASSIGNMENT.BULK.PAGE_TITLE'));\n\n    const { paramsChanged } = reportHelper;\n\n    $ctrl.filters = {\n      fromDate: moment().subtract(1, 'month').startOf('month'),\n      toDate: moment().subtract(1, 'month').endOf('month'),\n    }\n\n    $ctrl.onInit = () => {\n      const fetch = debounce(() => {\n        $ctrl.orders = [];\n        $ctrl.fetch();\n      }, 500);\n      $scope.$watch('$ctrl.filters', (np, op) => {\n        if (paramsChanged(np, op, ['fromDate', 'toDate']) || !$ctrl.orders) {\n          fetch();\n        }\n      }, true);\n    };\n\n    /**\n     * Fetch\n     */\n    $ctrl.fetch = () => {\n      if ($ctrl.fetching) return $ctrl.fetching;\n      $ctrl.fetching = BulkPaymentsAssignment.query({ centerId: state.getCurrentCenterId(), ...helper.pick($ctrl.filters, ['fromDate', 'toDate']) })\n        .catch(err => dwAlerts.error(err, 'Failed to query bulk payments assignment.'))\n        .finally(() => { $ctrl.fetching = null; })\n        .then(result => { $ctrl.orders = result; });\n    };\n\n    /**\n     * Assign Payments\n     */\n    $ctrl.assign = () => {\n      const orders = ($ctrl.orders || []).filter(o => o.include);\n      const data = { invoices: orders.map(o => o.id) };\n      if (!orders.length) return dwAlerts.error($translate.instant('BULK_INVOICING.NOTHING_SELECTED'));\n      return BulkPaymentsAssignment.save(data)\n        .catch(err => dwAlerts.error(err, 'Failed to assign payments.'))\n        .then(() => {\n          dwAlerts.info($translate.instant('PAYMENTS_ASSIGNMENT.BULK.SUCCESS'));\n          orders.forEach(o => { o.hasPaymentAssignments = true; });\n        });\n    };\n\n    $timeout(() => $ctrl.onInit());\n  });\n","export default angular.module('deskworks.BulkPaymentsAssignment', [\n  'ngResource',\n  'datesDeserializer',\n  'deskworks.config',\n])\n  .factory('BulkPaymentsAssignment', function($resource, $timeout, $filter, deskworksConfig, datesDeserializer) {\n\n    const desDates = datesDeserializer(['date', 'items.date']);\n\n    const resOrders = $resource(deskworksConfig.getApiAbsUrl('/payments-assignment/orders'), {}, {\n      query: { method: 'GET', isArray: true, transformResponse: [angular.fromJson, desDates] },\n    });\n\n    const resBulk = $resource(deskworksConfig.getApiAbsUrl('/payments-assignment/bulk-assignment'), {}, {\n      save: { method: 'POST' },\n    });\n\n    return {\n      /**\n       * @param params.centerId\n       * @param params.fromDate\n       * @param params.toDate\n       * @returns {Resource.$promise}\n       */\n      query: params => resOrders.query({\n        ...params,\n        fromDate: $filter('date')(params.fromDate, 'yyyy-MM-dd'),\n        toDate: $filter('date')(params.toDate, 'yyyy-MM-dd'),\n      }).$promise,\n\n      /**\n       * @param params.orderIds\n       * @returns {Resource.$promise}\n       */\n      save: (params) => resBulk.save({}, params).$promise,\n    };\n  });\n","// Module\nvar code = \"<div class=\\\"bulk-invoicing\\\" ff-bulk-read-only> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v\\\"> <bulk-payments-assignment-filter model=\\\"$ctrl.filters\\\"></bulk-payments-assignment-filter> <ff-panel flex=\\\"0 0 100%\\\"> <ff-panel-header><span translate=\\\"PAYMENTS_ASSIGNMENT.BULK.HEADER\\\"></span></ff-panel-header> <ff-spin class=\\\"ff-spin-placeholder\\\" ng-if=\\\"$ctrl.fetching || !$ctrl.orders\\\"></ff-spin> <span ng-if=\\\"$ctrl.orders && !($ctrl.orders | filter: $ctrl.filters.filter.predicate).length && !$ctrl.fetching\\\"><span translate=\\\"GLOBAL.NONE\\\"></span></span> <ff-row ng-if=\\\"ffBlock.editMode && ($ctrl.orders | filter: $ctrl.filters.filter.predicate).length > 0\\\"> <label flex=\\\"none\\\"><ff-include-all flex=\\\"0 0 30px\\\" items=\\\"$ctrl.orders\\\"></ff-include-all></label> </ff-row> <ff-header ng-show=\\\"($ctrl.orders | filter: $ctrl.filters.filter.predicate).length > 0\\\"> <ff-row> <span flex=\\\"0 0 30px\\\" class=\\\"ff-center\\\" title=\\\"{{'GLOBAL.INCLUDE' | translate}}\\\" ng-if=\\\"ffBlock.editMode\\\"><ff-icon sense=\\\"check\\\"></ff-icon></span> <cell flex=\\\"1 1 150px\\\"><span translate=\\\"BULK_INVOICING.COMPANY\\\"></span></cell> <cell flex=\\\"1 1 150px\\\"><span translate=\\\"BULK_INVOICING.USER\\\"></span></cell> <cell flex=\\\"1 0 60px\\\" class=\\\"ff-center show-sm\\\"><span translate=\\\"BULK_INVOICING.ORDER_ID\\\"></span></cell> <cell flex=\\\"0 1 110px\\\" class=\\\"ff-center show-sm\\\"><span translate=\\\"BULK_INVOICING.DATE\\\"></span></cell> <cell flex=\\\"1 2 220px\\\" class=\\\"show-xl\\\"><span translate=\\\"BULK_INVOICING.COMMENTS\\\"></span></cell> <cell flex=\\\"0 0 30px\\\" class=\\\"ff-center show-md\\\"><ff-icon sense=\\\"billing\\\" title=\\\"{{'PAYMENTS_ASSIGNMENT.FILTER.WITH_ASSIGNMENT' | translate}}\\\"></ff-icon></cell> <cell flex=\\\"0 0 30px\\\" class=\\\"ff-center show-md\\\"><ff-icon sense=\\\"user\\\" title=\\\"{{'PAYMENTS_ASSIGNMENT.FILTER.WITH_MANUAL_ASSIGNMENT' | translate}}\\\"></ff-icon></cell> <cell flex=\\\"1 0 94px\\\" class=\\\"ff-right\\\"><span translate=\\\"BULK_INVOICING.BALANCE\\\"></span></cell> <ff-btn flex=\\\"none\\\" sense=\\\"collapse\\\" size=\\\"xs\\\" class=\\\"buttons-row zero-height\\\"></ff-btn> </ff-row> </ff-header> <ff-col ng-repeat=\\\"invoice in $ctrl.orders | filter: $ctrl.filters.filter.predicate\\\"> <ff-row class=\\\"invoice-head\\\" ng-class=\\\"{ active: invoice.uncollapsed }\\\" ff-click=\\\"invoice.uncollapsed = !invoice.uncollapsed\\\"> <ff-checkbox flex=\\\"0 0 30px\\\" class=\\\"ff-center\\\" ff-model=\\\"invoice.include\\\" ng-if=\\\"ffBlock.editMode\\\"></ff-checkbox> <ff-static flex=\\\"1 1 150px\\\" ff-bind=\\\"::invoice.userCompany\\\"></ff-static> <ff-static flex=\\\"1 1 150px\\\" ff-bind=\\\"::invoice.userName\\\"></ff-static> <ff-static flex=\\\"1 0 60px\\\" class=\\\"ff-center show-sm\\\" ff-bind=\\\"::invoice.orderId\\\"></ff-static> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-center show-sm\\\" ff-bind=\\\"::invoice.date | date:'mediumDate'\\\"></ff-static> <ff-static flex=\\\"1 2 220px\\\" class=\\\"show-xl\\\" ff-bind=\\\"::invoice.comments\\\"></ff-static> <ff-static flex=\\\"0 0 30px\\\" class=\\\"ff-center show-md\\\"><ff-icon sense=\\\"check\\\" ng-if=\\\"invoice.hasPaymentAssignments\\\"></ff-icon></ff-static> <ff-static flex=\\\"0 0 30px\\\" class=\\\"ff-center show-md\\\"><ff-icon sense=\\\"check\\\" ng-if=\\\"invoice.manualPaymentAssignment\\\"></ff-icon></ff-static> <ff-static flex=\\\"1 0 94px\\\" class=\\\"ff-right\\\" ff-bind=\\\"::invoice.balance | ncurrency\\\"></ff-static> <ff-btn flex=\\\"none\\\" sense=\\\"collapse\\\" size=\\\"xs\\\" class=\\\"buttons-row\\\" title=\\\"{{'GLOBAL.BTN_VIEW' | translate}}\\\" ff-click=\\\"invoice.uncollapsed = !invoice.uncollapsed\\\" ng-class=\\\"{ collapsed: !invoice.uncollapsed }\\\"></ff-btn> </ff-row> <ff-row ng-collapse=\\\"!invoice.uncollapsed\\\"> <span flex=\\\"0 0 30px\\\" class=\\\"invisible\\\"></span> <dw-invoice-small invoice=\\\"invoice\\\"></dw-invoice-small> <ff-btn sense=\\\"collapse\\\" size=\\\"xs\\\" flex=\\\"none\\\" class=\\\"buttons-row zero-height\\\"></ff-btn> </ff-row> </ff-col> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"save\\\" ff-click=\\\"$ctrl.assign()\\\"><span translate=\\\"PAYMENTS_ASSIGNMENT.BULK.BTN_ASSIGN\\\"></span></ff-btn> </ff-btn-group> </div> </div> \";\n// Exports\nmodule.exports = code;","import template from './payments-assignment-dialog.tpl.html';\nimport dwModal from 'shared/dw-modal/dw-modal.service';\nimport paymentsAssignmentDirective from '../payments-assignment/payments-assignment.directive';\n\nexport default angular.module('deskworks.paymentsAssignmentDialog', [\n  dwModal.name,\n  paymentsAssignmentDirective.name,\n])\n\n  .factory('paymentsAssignmentDialog', function(dwModal) {\n\n    return {\n      open,\n    };\n\n    function open({ scope, purchaseId }) {\n      return dwModal.show({\n        scope,\n        template,\n        controller: 'PaymentsAssignmentModalCtrl as $ctrl',\n        inputs: { purchaseId },\n      });\n    }\n  })\n\n  .controller('PaymentsAssignmentModalCtrl', function($scope, purchaseId, close) {\n    const $ctrl = this;\n\n    $ctrl.purchaseId = purchaseId;\n    $scope.close = close;\n\n    $ctrl.back = () => close();\n  });\n","// Module\nvar code = \"<div class=\\\"dw-modal\\\"> <div class=\\\"dw-modal-fade\\\" style=\\\"background-color:#fff\\\"></div> <div style=\\\"overflow:auto;width:100%;height:100%;z-index:1;padding:1rem\\\"> <payments-assignment purchase-id=\\\"$ctrl.purchaseId\\\" back=\\\"$ctrl.back\\\"></payments-assignment> </div> </div> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.discountAssignmentBtnDirective', [\n  'deskworks.helper',\n])\n\n  .directive('discountAssignmentBtn', function() {\n    return {\n      template: `\n<ff-btn-group flex=\"none\" class=\"buttons-row\">\n  <ff-btn sense=\"collapse\" size=\"sm\" ff-click=\"$ctrl.toggle()\" ng-class=\"{ collapsed: $ctrl.discount.$$collapsed }\" title=\"{{'DISCOUNT_ASSIGNMENT.HINT' | translate}}\">\n    <span translate=\"DISCOUNT_ASSIGNMENT.BTN_ASSIGN\"></span>\n  </ff-btn>\n</ff-btn-group>\n`,\n      restrict: 'E',\n      scope: true,\n      controller: 'DiscountAssignmentBtnCtrl as $ctrl',\n      bindToController: {\n        discount: '<',\n      },\n      link: function($scope, $element, $attrs) {\n        $element.addClass('ff-row');\n      }\n    };\n  })\n\n  .controller('DiscountAssignmentBtnCtrl', function($scope, state, dwAlerts, helper, PaymentsAssignment) {\n    const $ctrl = this;\n\n    $ctrl.toggle = () => {\n      if ($ctrl.discount.$$collapsed) {\n        if (helper.pointFirstInvalid('#add-discount')) { return; }\n      }\n\n      $ctrl.discount.$$collapsed = !$ctrl.discount.$$collapsed;\n    };\n\n    $ctrl.$onChanges = () => {\n      if (!$ctrl.discount) { return; }\n      $ctrl.discount.$$collapsed = true;\n    };\n  });\n","import './discount-assignment.scss';\nimport template from './discount-assignment.tpl.html';\nimport PaymentsAssignment from '../payments-assignment/payments-assignment.service';\nimport autofocusDirective from 'shared/autofocus/autofocus.directive';\n\nexport default angular.module('deskworks.discountAssignmentDirective', [\n  'deskworks.helper',\n  PaymentsAssignment.name,\n  autofocusDirective.name,\n])\n\n  .directive('discountAssignment', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'DiscountAssignmentCtrl as $ctrl',\n      bindToController: {\n        purchaseId: '<',\n        discount: '<',\n      },\n    };\n  })\n\n  .controller('DiscountAssignmentCtrl', function($scope, state, dwAlerts, helper, PaymentsAssignment) {\n    const $ctrl = this;\n\n    $ctrl.$onChanges = () => {\n      if (!$ctrl.purchaseId) { return; }\n      $ctrl.discount.assignment = $ctrl.discount.assignment || {};\n      $ctrl.fetch();\n    };\n\n    $ctrl.$onDestroy = () => {\n      delete $ctrl.discount.assignment;\n    };\n\n    /**\n     * Fetch\n     */\n    $ctrl.fetch = () => {\n      if ($ctrl.fetching) return $ctrl.fetching;\n      $ctrl.fetching = PaymentsAssignment.get({ purchaseId: $ctrl.purchaseId })\n        .catch(err => dwAlerts.error(err, 'Failed to get payments assignment.'))\n        .finally(() => { $ctrl.fetching = null; })\n        .then(result => {\n          $ctrl.charges = result.charges.filter(charge => charge.amount - charge.discount > 0);\n          $ctrl.charges.forEach(charge => {\n            charge.amount -= charge.discount;\n          });\n        });\n    };\n\n    $ctrl.validate = (value) => {\n      const total = Object.keys($ctrl.discount.assignment)\n        .map(key => $ctrl.discount.assignment[key])\n        .reduce((sum, amount) => sum + (isNaN(+amount) ? 0 : +amount ), 0);\n      $ctrl.amountLeft = $ctrl.discount.amount - total;\n      return $ctrl.discount.amount == total;\n    };\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<form name=\\\"$ctrl.form\\\" class=\\\"gutter-v\\\" style=\\\"margin-top:.5rem\\\"> <ff-panel> <div ff-dim=\\\"$ctrl.fetching\\\"> <ff-header> <ff-row> <cell flex=\\\"1 0 80px\\\"><span> <span translate=\\\"GLOBAL.PRODUCT\\\"></span> <ff-hint><span translate=\\\"DISCOUNT_ASSIGNMENT.HINT\\\"></span></ff-hint> </span></cell> <cell flex=\\\"0 0 90px\\\" class=\\\"ff-right\\\"><span translate=\\\"GLOBAL.AMOUNT\\\"></span></cell> <cell flex=\\\"0 0 90px\\\" class=\\\"ff-right\\\"><span translate=\\\"GLOBAL.DISCOUNT\\\"></span></cell> </ff-row> </ff-header> <ff-static class=\\\"ff-no-frame\\\" ng-if=\\\"!$ctrl.charges.length\\\"><span translate=\\\"GLOBAL.NONE\\\"></span></ff-static> <ff-row ng-repeat=\\\"charge in $ctrl.charges\\\"> <ff-static flex=\\\"1 0 80px\\\">{{charge.name}}</ff-static> <ff-static flex=\\\"0 0 90px\\\" class=\\\"ff-right\\\">{{charge.amount | currency}}</ff-static> <ff-number flex=\\\"0 0 90px\\\" ff-model=\\\"$ctrl.discount.assignment[charge.id]\\\" class=\\\"ff-right discount-amount\\\" placeholder=\\\"0\\\" ff-gte=\\\"0\\\" ff-lte=\\\"charge.amount < $ctrl.discount.amount ? charge.amount : $ctrl.discount.amount\\\" ff-custom=\\\"$ctrl.validate($value)\\\" autofocus=\\\"{{!$index}}\\\" ff-validate-alert=\\\"{ field: '{{'GLOBAL.DISCOUNT' | translate}}', custom: 'DISCOUNT_ASSIGNMENT.INVALID_TOTAL', amount: $ctrl.discount.amount, left: $ctrl.amountLeft }\\\"></ff-number> </ff-row> </div> </ff-panel> </form> \";\n// Exports\nmodule.exports = code;","import paymentsAssignmentDialog from './dialog/payments-assignment-dialog.service';\nimport BulkPaymentsAssignmentCtrl from './bulk-assignment/bulk-assignment.controller';\nimport discountAssignmentDirective from './discount-assignment/discount-assignment.directive';\nimport discountAssignmentBtnDirective from './discount-assignment/discount-assignment-btn.directive';\n\nconst index = ['$injector', function index($injector) {\n  $injector.loadNewModules([\n    paymentsAssignmentDialog.name,\n    BulkPaymentsAssignmentCtrl.name,\n    discountAssignmentDirective.name,\n    discountAssignmentBtnDirective.name,\n  ]);\n\n  $injector.invoke(['$templateCache', $templateCache => {\n    const ctx = require.context('./', true, /.*\\.tpl\\.html$/)\n    ctx.keys().forEach(key => $templateCache.put(key.replace(/^\\.\\//, ''), ctx(key)));\n  }]);\n}];\n\nexport default index;\n","import template from './payments-assignment.tpl.html';\nimport PaymentsAssignment from './payments-assignment.service';\nimport autofocusDirective from 'shared/autofocus/autofocus.directive';\n\nexport default angular.module('deskworks.paymentsAssignmentDirective', [\n  'deskworks.helper',\n  PaymentsAssignment.name,\n  autofocusDirective.name,\n])\n\n  .directive('paymentsAssignment', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'PaymentsAssignmentCtrl as $ctrl',\n      bindToController: {\n        purchaseId: '<',\n        back: '<',\n      },\n    };\n  })\n\n  .controller('PaymentsAssignmentCtrl', function($scope, state, dwAlerts, helper, PaymentsAssignment) {\n    const $ctrl = this;\n\n    $ctrl.$onInit = () => {\n      $ctrl.charges = [];\n      $ctrl.payments = [];\n      const expression = () => $ctrl.charges.reduce((obj, charge) => (obj[charge.id] = $ctrl.payments.reduce((sum, p) => sum + charge.payments[p.id] || 0, 0), obj), {});\n      $scope.$watch(expression, () => PaymentsAssignment.calcBalances({ charges: $ctrl.charges, payments: $ctrl.payments }), true);\n    };\n\n    $ctrl.$onChanges = () => {\n      if (!$ctrl.purchaseId) return;\n      $ctrl.fetch();\n    };\n\n    /**\n     * Fetch\n     */\n    $ctrl.fetch = () => {\n      if ($ctrl.fetching) return $ctrl.fetching;\n      $ctrl.fetching = PaymentsAssignment.get({ purchaseId: $ctrl.purchaseId })\n        .catch(err => dwAlerts.error(err, 'Failed to get payments assignment.'))\n        .finally(() => { $ctrl.fetching = null; })\n        .then(result => {\n          $ctrl.charges = result.charges;\n          $ctrl.payments = result.payments;\n        });\n    };\n\n    /**\n     * Save\n     */\n    $ctrl.save = () => {\n      if (helper.pointFirstInvalid('payments-assignment')) return;\n      const data = { charges: $ctrl.charges.map(charge => ({ id: charge.id, payments: charge.payments })) };\n      return PaymentsAssignment.save({ purchaseId: $ctrl.purchaseId }, data)\n        .catch(err => dwAlerts.error(err, 'Failed to save payments assignment.'))\n        .then(() => $ctrl.back());\n    };\n  });\n","export default angular.module('deskworks.PaymentsAssignment', [\n  'ngResource',\n  'datesDeserializer',\n  'deserializeNumbers',\n  'deskworks.config',\n])\n\n  .factory('PaymentsAssignment', function($resource, $timeout, deskworksConfig, datesDeserializer, deserializeNumbers, helper) {\n\n    const desDates = datesDeserializer(['payments.billedAt', 'charges.billedAt']);\n    const desNumbers = deserializeNumbers(['payments.amount', 'charges.amount', 'charges.discount',  'charges.tax']);\n\n    const res = $resource(deskworksConfig.getApiAbsUrl('/payments-assignment/:purchaseId'), {}, {\n      get: { method: 'GET', isArray: false, transformResponse: [angular.fromJson, desDates, desNumbers] },\n      update: { method: 'PUT' },\n    });\n\n    return {\n      get: params => res.get(params).$promise\n        .then(data => deserialize(data)),\n\n      /**\n       * @param params\n       * @param params.purchaseId\n       * @param data\n       */\n      save: (params, data) => res.update(params, data).$promise,\n\n      calcBalances,\n    };\n\n    function deserialize(data) {\n      data.charges.forEach(charge => {\n        charge.total = helper.round(charge.amount - charge.discount + charge.tax);\n      });\n\n      calcBalances({ payments: data.payments, charges: data.charges });\n\n      return data;\n    }\n\n    function calcBalances({ payments, charges }) {\n      charges.forEach(charge => {\n        charge.balance = charge.total;\n      });\n      payments.forEach(payment => {\n        payment.balance = payment.amount;\n        charges.forEach(charge => {\n          const delta = angular.isNumber(charge.payments[payment.id]) ? +charge.payments[payment.id] : 0;\n          charge.balance = helper.round(charge.balance - delta);\n          payment.balance = helper.round(payment.balance - delta);\n        });\n      });\n    }\n  });\n","// Module\nvar code = \"<form name=\\\"$ctrl.form\\\" class=\\\"gutter-v\\\"> <ff-panel> <ff-panel-header><span translate=\\\"PAYMENTS_ASSIGNMENT.PAYMENTS\\\"></span></ff-panel-header> <div ff-dim=\\\"$ctrl.fetching\\\"> <ff-header> <ff-row> <cell flex=\\\"0 1 110px\\\" class=\\\"ff-right show-sm\\\"><span translate=\\\"GLOBAL.DATE\\\"></span></cell> <cell><span translate=\\\"GLOBAL.NAME\\\"></span></cell> <cell flex=\\\"0 1 90px\\\" class=\\\"ff-right show-md\\\"><span translate=\\\"GLOBAL.AMOUNT\\\"></span></cell> <cell flex=\\\"0 1 90px\\\" class=\\\"ff-right\\\"><span translate=\\\"GLOBAL.BALANCE\\\"></span></cell> </ff-row> </ff-header> <ff-static class=\\\"ff-no-frame\\\" ng-if=\\\"!$ctrl.payments.length\\\"><span translate=\\\"GLOBAL.NONE\\\"></span></ff-static> <ff-row ng-repeat=\\\"payment in $ctrl.payments\\\"> <ff-static flex=\\\"0 1 110px\\\" class=\\\"ff-right show-sm\\\">{{payment.billedAt | date}}</ff-static> <ff-static>{{payment.name}}</ff-static> <ff-static flex=\\\"0 1 90px\\\" class=\\\"ff-right show-md\\\">{{payment.amount | ncurrency}}</ff-static> <ff-static flex=\\\"0 1 90px\\\" class=\\\"ff-right\\\">{{payment.balance | ncurrency}}</ff-static> </ff-row> </div> </ff-panel> <ff-panel> <ff-panel-header><span translate=\\\"PAYMENTS_ASSIGNMENT.HEADER\\\"></span></ff-panel-header> <div ff-dim=\\\"$ctrl.fetching\\\"> <ff-header> <ff-row> <cell flex=\\\"1 0 80px\\\"><span translate=\\\"GLOBAL.PRODUCT\\\"></span></cell> <cell flex=\\\"0 0 90px\\\" class=\\\"ff-right show-lg\\\"><span translate=\\\"GLOBAL.AMOUNT\\\"></span></cell> <cell flex=\\\"0 0 90px\\\" class=\\\"ff-right show-lg\\\"><span translate=\\\"GLOBAL.DISCOUNT\\\"></span></cell> <cell flex=\\\"0 0 90px\\\" class=\\\"ff-right show-md\\\"><span translate=\\\"GLOBAL.TAX\\\"></span></cell> <cell flex=\\\"0 0 90px\\\" class=\\\"ff-right show-sm\\\"><span translate=\\\"GLOBAL.TOTAL\\\"></span></cell> <cell flex=\\\"0 1 230px\\\" class=\\\"ff-right\\\"><span translate=\\\"PAYMENTS_ASSIGNMENT.PAYMENTS\\\"></span></cell> <cell flex=\\\"0 0 90px\\\" class=\\\"ff-right\\\"><span translate=\\\"GLOBAL.BALANCE\\\"></span></cell> </ff-row> </ff-header> <ff-static class=\\\"ff-no-frame\\\" ng-if=\\\"!$ctrl.charges.length\\\"><span translate=\\\"GLOBAL.NONE\\\"></span></ff-static> <ff-row ng-repeat=\\\"charge in $ctrl.charges\\\"> <ff-static flex=\\\"1 0 80px\\\">{{charge.name}}</ff-static> <ff-static flex=\\\"0 0 90px\\\" class=\\\"ff-right show-lg\\\">{{charge.amount | ncurrency}}</ff-static> <ff-static flex=\\\"0 0 90px\\\" class=\\\"ff-right show-lg\\\">{{charge.discount | ncurrency}}</ff-static> <ff-static flex=\\\"0 0 90px\\\" class=\\\"ff-right show-md\\\">{{charge.tax | ncurrency}}</ff-static> <ff-static flex=\\\"0 0 90px\\\" class=\\\"ff-right show-sm\\\">{{charge.total | ncurrency}}</ff-static> <ff-static flex=\\\"0 1 230px\\\"> <span ng-if=\\\"!$ctrl.payments.length\\\" translate=\\\"GLOBAL.NONE\\\" style=\\\"margin:0 auto\\\"></span> <ff-col ng-init=\\\"chargeIndex = $index\\\"> <label ng-repeat=\\\"payment in $ctrl.payments\\\" class=\\\"ff-row\\\" ng-class=\\\"{ 'ff-no-frame': $index === $ctrl.payments.length - 1 }\\\"> <ff-label class=\\\"ff-right\\\">{{payment.name}}</ff-label> <ff-number flex=\\\"0 0 65px\\\" ff-model=\\\"charge.payments[payment.id]\\\" class=\\\"ff-right\\\" autofocus=\\\"{{!$index && !chargeIndex}}\\\" ff-validate-alert=\\\"{{'GLOBAL.AMOUNT' | translate}}\\\" placeholder=\\\"0\\\"></ff-number> </label> </ff-col> </ff-static> <ff-static flex=\\\"0 0 90px\\\" class=\\\"ff-right\\\">{{charge.balance | ncurrency}}</ff-static> </ff-row> </div> </ff-panel> <ff-btn-group> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> <ff-btn sense=\\\"save\\\" type=\\\"submit\\\" ff-click=\\\"$ctrl.save()\\\" ff-disabled=\\\"$ctrl.form.$pristine\\\"> <span translate=\\\"GLOBAL.BTN_SAVE\\\"></span> </ff-btn> </ff-btn-group> </form> \";\n// Exports\nmodule.exports = code;","/**\n * autofocus directive\n */\nexport default angular.module('autofocusDirective', [])\n\n  .directive('autofocus', function($timeout) {\n    return {\n      restrict: 'A',\n      link: ($scope, $element, $attrs) => {\n        if ($attrs.autofocus === 'false') return;\n        const input = $element[0].parentNode.querySelector('input') || $element[0].parentNode.querySelector('select') || $element[0].parentNode.querySelector('button');\n        if (input) $timeout(() => input.focus());\n      },\n    };\n  });\n","import template from './dw-invoice-small.tpl.html';\n\n/**\n * dwInvoiceSmall directive - component for displaying Deskworks specific small invoices\n */\nexport default angular.module('deskworks.dwInvoice.small', [\n  'deskworks.state',\n  'flexForms',\n  'deskworks.helper',\n])\n\n  .directive('dwInvoiceSmall', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'dwInvoiceSmallCtrl as dwInvoice',\n      bindToController: {\n        invoice: '=*',\n      },\n\n      compile: function(tElement, tAttrs) {\n        tElement.addClass('dw-invoice');\n        return function link() {};\n      }\n    };\n  })\n\n  .controller('dwInvoiceSmallCtrl', function() {\n  });\n","// Module\nvar code = \"<ff-header> <ff-row> <cell flex=\\\"10 0 50%\\\"><span translate=\\\"PURCHASE.INVOICE.DESCRIPTION\\\"></span></cell> <cell flex=\\\"3 0 45px\\\" class=\\\"ff-center show-sm\\\"><span translate=\\\"PURCHASE.INVOICE.DATE\\\"></span></cell> <cell flex=\\\"1 0 64px\\\" class=\\\"ff-right show-md\\\"><span translate=\\\"PURCHASE.INVOICE.PRICE\\\"></span></cell> <cell flex=\\\"1 0 36px\\\" class=\\\"ff-center\\\"><span translate=\\\"PURCHASE.INVOICE.QUANTITY\\\"></span></cell> <cell flex=\\\"0 0 94px\\\" class=\\\"ff-right\\\"><span translate=\\\"PURCHASE.INVOICE.AMOUNT\\\"></span></cell> </ff-row> </ff-header> <ff-row ng-repeat=\\\"item in ::dwInvoice.invoice.items\\\"> <ff-static flex=\\\"10 0 50%\\\" ff-bind=\\\"::item.description\\\"></ff-static> <ff-static flex=\\\"3 0 45px\\\" class=\\\"ff-center show-sm\\\" ff-bind=\\\"::item.date | date:'mediumDate'\\\"></ff-static> <ff-static flex=\\\"1 0 64px\\\" class=\\\"ff-right show-md\\\" ff-bind=\\\"::item.price | ncurrency\\\"></ff-static> <ff-static flex=\\\"1 0 36px\\\" class=\\\"ff-center\\\" ff-bind=\\\"::item.quantity\\\"></ff-static> <ff-static flex=\\\"0 0 94px\\\" class=\\\"ff-right\\\" ff-bind=\\\"::item.amount | ncurrency\\\"></ff-static> </ff-row> <ff-row class=\\\"invoice-charges\\\"> <ff-label><span translate=\\\"PURCHASE.INVOICE.CHARGES\\\"></span></ff-label> <ff-static flex=\\\"0 0 94px\\\" class=\\\"ff-right\\\" ff-bind=\\\"::dwInvoice.invoice.total | ncurrency\\\"></ff-static> </ff-row> <ff-row class=\\\"invoice-tax\\\" ng-repeat=\\\"tax in dwInvoice.invoice.taxes\\\"> <ff-label>{{tax.taxName}}</ff-label> <ff-static flex=\\\"0 0 94px\\\" class=\\\"ff-right\\\" ff-bind=\\\"tax.taxAmount | ncurrency\\\"></ff-static> </ff-row> <ff-row class=\\\"invoice-payment\\\"> <ff-label><span translate=\\\"PURCHASE.INVOICE.PAYMENT\\\"></span></ff-label> <ff-static flex=\\\"0 0 94px\\\" class=\\\"ff-right\\\" ff-bind=\\\"::dwInvoice.invoice.payment | ncurrency\\\"></ff-static> </ff-row> <ff-row class=\\\"invoice-balance\\\"> <ff-label><span translate=\\\"PURCHASE.INVOICE.BALANCE\\\"></span></ff-label> <ff-static flex=\\\"0 0 94px\\\" class=\\\"ff-right\\\" ff-bind=\\\"::dwInvoice.invoice.balance | ncurrency\\\"></ff-static> </ff-row> \";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}