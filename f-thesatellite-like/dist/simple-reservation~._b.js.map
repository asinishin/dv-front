{"version":3,"sources":["webpack:///./bundles/simple-reservation sync .*\\.tpl\\.html$","webpack:///./bundles/simple-reservation sync \\..+\\/.+\\.js$","webpack:///./bundles/simple-reservation/01-centers/centers.controller.js","webpack:///./bundles/simple-reservation/01-centers/centers.scss?7405","webpack:///./bundles/simple-reservation/01-centers/centers.tpl.html","webpack:///./bundles/simple-reservation/02-reservation-categories/reservation-categories.controller.js","webpack:///./bundles/simple-reservation/02-reservation-categories/reservation-categories.scss?b89a","webpack:///./bundles/simple-reservation/02-reservation-categories/reservation-categories.tpl.html","webpack:///./bundles/simple-reservation/03-reservation-category/reservation-category.controller.js","webpack:///./bundles/simple-reservation/03-reservation-category/reservation-category.scss?109b","webpack:///./bundles/simple-reservation/03-reservation-category/reservation-category.tpl.html","webpack:///./bundles/simple-reservation/03-reservation-category/swiper.directive.js","webpack:///./bundles/simple-reservation/03-reservation-category/swiper.scss?f844","webpack:///./bundles/simple-reservation/03-reservation-category/tabs.js","webpack:///./bundles/simple-reservation/03-reservation-category/tabs.scss?8644","webpack:///./bundles/simple-reservation/04-date/date.controller.js","webpack:///./bundles/simple-reservation/04-date/date.scss?b83d","webpack:///./bundles/simple-reservation/04-date/date.tpl.html","webpack:///./bundles/simple-reservation/05-reservation-units/reservation-units.controller.js","webpack:///./bundles/simple-reservation/05-reservation-units/reservation-units.scss?4897","webpack:///./bundles/simple-reservation/05-reservation-units/reservation-units.tpl.html","webpack:///./bundles/simple-reservation/06-time/simple-reservation-time.controller.js","webpack:///./bundles/simple-reservation/06-time/simple-reservation-time.scss?87e3","webpack:///./bundles/simple-reservation/06-time/simple-reservation-time.tpl.html","webpack:///./bundles/simple-reservation/06-time/simple-select-time.component.js","webpack:///./bundles/simple-reservation/06-time/simple-select-time.tpl.html","webpack:///./bundles/simple-reservation/07-user-profile/user-profile.controller.js","webpack:///./bundles/simple-reservation/08-purchase/purchase.controller.js","webpack:///./bundles/simple-reservation/08-purchase/purchase.tpl.html","webpack:///./bundles/simple-reservation/ff-panel-card.scss?8837","webpack:///./bundles/simple-reservation/index.js","webpack:///./bundles/simple-reservation/other/complete.controller.js","webpack:///./bundles/simple-reservation/other/complete.tpl.html","webpack:///./bundles/simple-reservation/other/confirm.controller.js","webpack:///./bundles/simple-reservation/other/confirm.tpl.html","webpack:///./bundles/simple-reservation/other/simple-reservation-sign-in.controller.js","webpack:///./bundles/simple-reservation/other/simple-reservation-sign-in.tpl.html","webpack:///./shared/dw-invoice/dw-invoice-payment-processing-fee.directive.js","webpack:///./shared/need-help/need-help.directive.js","webpack:///./shared/new-billing-profile/new-billing-profile.directive.js","webpack:///./shared/new-billing-profile/new-billing-profile.tpl.html","webpack:///./shared/res-bar/res-bar.component.js","webpack:///./shared/res-bar/res-bar.scss?c718","webpack:///./shared/res-bar/res-bar.tpl.html","webpack:///./shared/reservation-agreement/reservation-agreement.directive.js","webpack:///./shared/reservation-agreement/reservation-agreement.tpl.html","webpack:///./shared/staff-help/staff-help.controller.js","webpack:///./shared/staff-help/staff-help.tpl.html","webpack:///./shared/templates/new-user-profile.tpl.html"],"names":["angular","module","controller","$scope","$translate","centers","state","vm","setPageTitle","instant","length","replace","setPath","getPath","id","getMapUrl","center","encodeURIComponent","street1","city","select","getCurrentCenterId","setCurrentCenterId","reservationCategories","settings","categories","category","staffOnlyCount","reservationUnits","unit","hideStaffOnlyUnits","whoCanReserve","availableCount","isLoggedAdmin","isLoggedMember","isLoggedNonMember","getLoggedUserId","staffOnly","back","$route","$sce","reservationCategory","centerId","current","params","description","trustAsHtml","photos","photoUrls","photo","url","products","p","priceItems","reserve","value","directive","$timeout","swiperCount","restrict","scope","images","thumbnail","ffAlt","link","$element","$attrs","swiper","addClass","$watch","isDefined","isUndefined","createSwiper","swiperContainer","Swiper","pagination","paginationClickable","document","getElementById","getElementsByTagName","image","Image","onload","element","css","removeClass","src","prev","swipePrev","next","swipeNext","template","ctrl","oldIndex","tabs","index","evt","destroyed","previousIndex","findTabIndex","previousSelected","tab","onDeselect","$event","$selectedIndex","isDefaultPrevented","active","selected","onSelect","addTab","push","t1","t2","newActiveIndex","removeTab","i","newActiveTabIndex","val","$on","transclude","bindToController","type","controllerAs","attrs","vertical","$parent","$eval","justified","$parse","require","heading","classes","elm","tabsetCtrl","disabled","disable","Math","max","apply","t","$transcludeFn","updateHeadingElement","html","append","uibTabContentTransclude","contents","forEach","node","isTabHeading","headingElement","tagName","hasAttribute","toLowerCase","$filter","unavailableDates","reservationTypeId","dateMin","moment","startOf","checkDateDisabled","date","indexOf","selectedDate","resBar","name","$locale","resUnits","resTypeId","units","availabilities","reload","$ctrl","component","templateUrl","bindings","calData","hideRecurringReservations","reservationFields","$q","dwAlerts","helper","userProfile","reg","userProfileService","centerService","purchaseService","ReservationCost","schema","new","userName","fullNameCompany","bindTestUserGenerator","pointFirstInvalid","timeStart","getParam","timeEnd","registerNewUser","when","then","login","password","catch","err","error","calcAsync","reservationUnitId","cost","reject","userId","data","reservationFrom","reservationTo","reservationRepeatFrequency","reservationRepeatDuration","createPurchaseForReservation","finally","updateParams","result","purchasePackageId","setParam","noop","newBillingProfile","needHelp","reservationAgreement","ReservationUnit","dwInvoice","dwInvoicePaymentProcessingFee","niceTimeDirective","session","purchase","reservationUnit","reservationService","optsRepeatFrequency","centerName","user","reservationNote","emailConfirmation","repeatFrequency","opt","repeatDurationOptions","repeatDuration","spin","saveBillingProfile","_","balance","createReservationWithPayment","updatePurchase","accessCode","fields","JSON","parse","key","field","f","$$serialize","from","to","title","reservationTitle","saveWithPayment","get","staffHelp","createStaffHelp","purchaseId","notice","hasRecurring","isAdmin","$injector","importAll","r","js","loadNewModules","m","default","invoke","$templateCache","ctx","put","staffHelpTpl","userProfileTpl","deskworksConfig","event","newUrl","preventDefault","home","origin","logout","resetParams","getDefaultRoute","reservationCategoryService","repeatFrequencyOptions","isRole","getCurrentUserId","postData","save","reservation","access_code","$location","stopPropagation","invoice","creditCards","eChecks","$onChanges","enablePaymentProcessingCharges","rate","paymentProcessingRates","cc","ach","prevIdx","items","fee","round","item","addedBy","amount","billedAt","createdAt","price","quantity","chargesTotalInitial","chargesTotal","balanceInitial","phone","$onInit","creditCardTypes","ccType","enable","creditCard","$watchCollection","methods","paymentMethodId","billingMethod","bindTestBillingGenerator","isSingleMode","eCheck","isNew","ranges","period","range","reservations","res","resRange","subtract","reduce","end","start","limitMin","calcAvailabilities","av","x1","dateToX","x2","translations","$window","$$route","location","href"],"mappings":"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","file":"simple-reservation~._b.js?_rev=99ba28ea6b1af7682bb1","sourcesContent":["var map = {\n\t\"./01-centers/centers.tpl.html\": \"./bundles/simple-reservation/01-centers/centers.tpl.html\",\n\t\"./02-reservation-categories/reservation-categories.tpl.html\": \"./bundles/simple-reservation/02-reservation-categories/reservation-categories.tpl.html\",\n\t\"./03-reservation-category/reservation-category.tpl.html\": \"./bundles/simple-reservation/03-reservation-category/reservation-category.tpl.html\",\n\t\"./04-date/date.tpl.html\": \"./bundles/simple-reservation/04-date/date.tpl.html\",\n\t\"./05-reservation-units/reservation-units.tpl.html\": \"./bundles/simple-reservation/05-reservation-units/reservation-units.tpl.html\",\n\t\"./06-time/simple-reservation-time.tpl.html\": \"./bundles/simple-reservation/06-time/simple-reservation-time.tpl.html\",\n\t\"./06-time/simple-select-time.tpl.html\": \"./bundles/simple-reservation/06-time/simple-select-time.tpl.html\",\n\t\"./08-purchase/purchase.tpl.html\": \"./bundles/simple-reservation/08-purchase/purchase.tpl.html\",\n\t\"./other/complete.tpl.html\": \"./bundles/simple-reservation/other/complete.tpl.html\",\n\t\"./other/confirm.tpl.html\": \"./bundles/simple-reservation/other/confirm.tpl.html\",\n\t\"./other/simple-reservation-sign-in.tpl.html\": \"./bundles/simple-reservation/other/simple-reservation-sign-in.tpl.html\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/simple-reservation sync recursive .*\\\\.tpl\\\\.html$\";","var map = {\n\t\"./01-centers/centers.controller.js\": \"./bundles/simple-reservation/01-centers/centers.controller.js\",\n\t\"./02-reservation-categories/reservation-categories.controller.js\": \"./bundles/simple-reservation/02-reservation-categories/reservation-categories.controller.js\",\n\t\"./03-reservation-category/reservation-category.controller.js\": \"./bundles/simple-reservation/03-reservation-category/reservation-category.controller.js\",\n\t\"./03-reservation-category/swiper.directive.js\": \"./bundles/simple-reservation/03-reservation-category/swiper.directive.js\",\n\t\"./03-reservation-category/tabs.js\": \"./bundles/simple-reservation/03-reservation-category/tabs.js\",\n\t\"./04-date/date.controller.js\": \"./bundles/simple-reservation/04-date/date.controller.js\",\n\t\"./05-reservation-units/reservation-units.controller.js\": \"./bundles/simple-reservation/05-reservation-units/reservation-units.controller.js\",\n\t\"./06-time/simple-reservation-time.controller.js\": \"./bundles/simple-reservation/06-time/simple-reservation-time.controller.js\",\n\t\"./06-time/simple-select-time.component.js\": \"./bundles/simple-reservation/06-time/simple-select-time.component.js\",\n\t\"./07-user-profile/user-profile.controller.js\": \"./bundles/simple-reservation/07-user-profile/user-profile.controller.js\",\n\t\"./08-purchase/purchase.controller.js\": \"./bundles/simple-reservation/08-purchase/purchase.controller.js\",\n\t\"./other/complete.controller.js\": \"./bundles/simple-reservation/other/complete.controller.js\",\n\t\"./other/confirm.controller.js\": \"./bundles/simple-reservation/other/confirm.controller.js\",\n\t\"./other/simple-reservation-sign-in.controller.js\": \"./bundles/simple-reservation/other/simple-reservation-sign-in.controller.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/simple-reservation sync recursive \\\\..+\\\\/.+\\\\.js$\";","import './centers.scss';\n\nexport default angular.module('deskworks.SimpleReservationCentersCtrl', [])\n\n  .controller('SimpleReservationCentersCtrl', function($scope, $translate, centers, state) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('SIMPLE_RES.CENTERS.PAGE_TITLE'));\n\n    // Redirect to Select Reservation Category if there is only one center in centers list\n    if (centers.length === 1) {\n      state.replace();\n      state.setPath(state.getPath() + '/centers/' + centers[0].id + '/types');\n    }\n\n    vm.centers = centers;\n\n    vm.getMapUrl = function(center) {\n      return 'https://maps.google.com?q=' + encodeURIComponent(`${center.street1}, ${center.city}, ${center.state}`);\n    };\n\n    /**\n     * Select center handler, proceeds to the next step\n     */\n    vm.select = function(center) {\n      if (state.getCurrentCenterId() !== center.id) state.setCurrentCenterId(center.id);\n      return state.setPath('/simple-reservation/centers/' + center.id + '/types');\n    };\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div class=\\\"sr-centers\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <ff-board> <div class=\\\"ff-grid ff-gutter-h ff-gutter-v\\\"> <ff-panel class=\\\"ff-panel-card\\\" flex=\\\"{md: '0 0 50%'}\\\" ng-repeat=\\\"center in vm.centers\\\"> <ff-img ff-src=\\\"{{::center.thumbnail}}\\\" ff-src-hq=\\\"{{::center.photo}}\\\" ff-alt=\\\"{{::center.name}}\\\" img-placeholder=\\\"{{'GLOBAL.NO_PHOTO' | translate}}\\\"></ff-img> <div flex=\\\"1 1 auto\\\"> <ff-header style=\\\"margin-bottom:.5rem\\\">{{::center.name}}</ff-header> <div class=\\\"ff-grid gutter-v-half\\\" flex=\\\"1 1 auto\\\"> <div flex=\\\"1 1 auto\\\"> <div class=\\\"sr-center-address\\\"> <ff-icon sense=\\\"location\\\"></ff-icon> <a href=\\\"{{::vm.getMapUrl(center)}}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"> {{::center.street2 ? center.street1 + ', ' + center.street2 : center.street1}} </a> </div> <div class=\\\"sr-center-phone\\\"> <ff-icon sense=\\\"phone\\\"></ff-icon> <a href=\\\"tel:{{::center.phone}}\\\">{{::center.phone}}</a> </div> <div class=\\\"sr-center-email\\\"> <ff-icon sense=\\\"email\\\"></ff-icon> <a href=\\\"mailto:{{::center.email}}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">{{::center.email}}</a> </div> </div> <ff-btn-group flex=\\\"0 0 auto\\\"> <ff-btn sense=\\\"ok\\\" ff-click=\\\"vm.select(center)\\\" aria-label=\\\"{{('SIMPLE_RES.BTN_SELECT' | translate) + ' ' + center.name}}\\\"> <span translate=\\\"SIMPLE_RES.BTN_SELECT\\\"></span> </ff-btn> </ff-btn-group> </div> </div> </ff-panel> </div> </ff-board> </div> \";\n// Exports\nmodule.exports = code;","import './reservation-categories.scss';\n\nexport default angular.module('deskworks.SimpleReservationCategoriesCtrl', [])\n\n  .controller('SimpleReservationCategoriesCtrl', function($scope, $translate, state,\n                                                          center, reservationCategories, settings) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('SIMPLE_RES.CATEGORIES.PAGE_TITLE'));\n\n    vm.center = center;\n\n    vm.categories = reservationCategories\n      .filter(category => {\n        const staffOnlyCount = category.reservationUnits.filter(unit => !settings.hideStaffOnlyUnits && unit.whoCanReserve === 'staffOnly').length;\n        const availableCount = category.reservationUnits.filter(unit =>\n          (unit.whoCanReserve !== 'notAvailable') &&\n          (unit.whoCanReserve !== 'staffOnly' || state.isLoggedAdmin()) &&\n          (unit.whoCanReserve !== 'member' || state.isLoggedMember() || state.isLoggedAdmin()) &&\n          (unit.whoCanReserve !== 'nonMember' || state.isLoggedNonMember() || state.isLoggedAdmin() || !state.getLoggedUserId())\n        ).length;\n        category.staffOnly = !!staffOnlyCount && !availableCount;\n        return !!availableCount || !!staffOnlyCount;\n      });\n\n    /**\n     * Select reservation category handler, proceeds to the next step\n     */\n    vm.select = category => state.setPath(state.getPath() + '/' + category.id);\n\n    /**\n     * Back button handler\n     */\n    vm.back = state.back;\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div class=\\\"sr-categories\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <ff-board> <div class=\\\"ff-grid gutter-h gutter-v\\\"> <ff-panel class=\\\"ff-panel-card\\\" flex=\\\"{md: '0 0 50%'}\\\" ng-repeat=\\\"category in vm.categories\\\"> <ff-img ff-src=\\\"{{::category.thumbnail}}\\\" ff-src-hq=\\\"{{::category.photo}}\\\" ff-alt=\\\"{{::category.name}}\\\" img-placeholder=\\\"{{'GLOBAL.NO_PHOTO' | translate}}\\\"></ff-img> <div flex=\\\"1 1 auto\\\" class=\\\"ff-col\\\"> <ff-header style=\\\"margin-bottom:.5rem\\\">{{::category.name}}</ff-header> <div class=\\\"ff-grid gutter-v-half\\\" flex=\\\"1 1 auto\\\"> <div flex=\\\"1 1 100%\\\" class=\\\"sr-cat-desc\\\" ng-if=\\\"::category.description\\\" ng-bind-html=\\\"::category.description\\\"></div> <div flex=\\\"1 1 auto\\\" ng-if=\\\"::category.staffOnly\\\"> <span translate=\\\"RESERVATIONS.STAFF_ONLY\\\" translate-values=\\\"{ centerName: vm.center.name, centerPhone: vm.center.phone, centerEmail: vm.center.email }\\\"> </span> </div> <ff-btn-group flex=\\\"0 0 auto\\\" ng-if=\\\"::!category.staffOnly\\\"> <ff-btn sense=\\\"ok\\\" ff-click=\\\"vm.select(category)\\\" aria-label=\\\"{{('SIMPLE_RES.BTN_SELECT' | translate) + ' ' + category.name}}\\\"> <span translate=\\\"SIMPLE_RES.BTN_SELECT\\\"></span> </ff-btn> </ff-btn-group> </div> </div> </ff-panel> </div> </ff-board> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","import './reservation-category.scss';\n\nexport default angular.module('deskworks.SimpleReservationCategoryCtrl', [\n  'ngSanitize',\n  'ui.bootstrap.tabs',\n  'swiper',\n])\n\n  .controller('SimpleReservationCategoryCtrl', function($scope, $route, $sce, $translate,\n                                                        reservationCategory, state) {\n    var vm = this;\n\n    vm.centerId = $route.current.params.centerId;\n    vm.category = reservationCategory;\n\n    state.setPageTitle($translate.instant('SIMPLE_RES.CATEGORY.PAGE_TITLE'));\n\n    vm.category.description = $sce.trustAsHtml(vm.category.description);\n\n    // Convert photo objects to raw urls array for slider\n    if(vm.category.photos) {\n      vm.category.photoUrls = vm.category.photos.map(photo => photo.url);\n    }\n\n    // Filter out empty products\n    vm.category.products = vm.category.products.filter(p => p.priceItems && p.priceItems.length);\n\n    /**\n     * Reserve button handler, proceeds to the next step\n     */\n    vm.reserve = function() {\n      return state.setPath(state.getPath() + '/dates');\n    };\n\n    /**\n     * Back button handler\n     */\n    vm.back = state.back;\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div class=\\\"sr-category-details rental-type-details\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <ff-board> <ff-panel class=\\\"sr-category-panel\\\"> <ff-header style=\\\"margin-bottom:.5rem\\\">{{vm.category.name}}</ff-header> <div class=\\\"sr-swiper-wrapper\\\" ng-if=\\\"vm.category.photos.length\\\"> <div class=\\\"sr-swiper-content\\\"> <swiper images=\\\"vm.category.photoUrls\\\" thumbnail=\\\"vm.category.thumbnail\\\" ff-alt=\\\"{{vm.category.name}}\\\"></swiper> </div> </div> <div class=\\\"tabs-block\\\"> <uib-tabset type=\\\"pills\\\"> <uib-tab heading=\\\"{{'SIMPLE_RES.CATEGORY.PRICES' | translate}}\\\"> <div ng-repeat=\\\"product in vm.category.products\\\" class=\\\"sr-category-products\\\"> <h3 ng-bind=\\\"product.name\\\"></h3> <div class=\\\"ff-row\\\" ng-repeat=\\\"priceItem in product.priceItems\\\"> <div flex=\\\"1 1 auto\\\" ng-bind=\\\"priceItem.name\\\"></div> <div flex=\\\"0 0 70px\\\" ng-bind=\\\"priceItem.price | currency\\\"></div> </div> </div> <div ng-hide=\\\"vm.category.products && vm.category.products.length\\\" translate=\\\"SIMPLE_RES.CATEGORY.PRICES.EMPTY\\\"></div> </uib-tab> <uib-tab heading=\\\"{{'SIMPLE_RES.CATEGORY.DESCRIPTION' | translate}}\\\"> <div ng-bind-html=\\\"vm.category.description || ('SIMPLE_RES.CATEGORY.DESCRIPTION.EMPTY' | translate)\\\"></div> </uib-tab> </uib-tabset> </div> </ff-panel> </ff-board> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> <ff-btn sense=\\\"ok\\\" ff-click=\\\"vm.reserve()\\\"><span translate=\\\"SIMPLE_RES.CATEGORY.BTN_RESERVE\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","import Swiper from 'swiper';\nimport './swiper.scss';\n\nexport default angular.module('swiper', [])\n\n  .value('swiperCount', 0)// Incremented each time a new swiper is created. Used as UID for swiper-container.\n\n  .directive('swiper', function($timeout, swiperCount) {\n    return {\n      restrict: 'E',\n      scope: {\n        images: '<',\n        thumbnail: '<',\n        ffAlt: '@',\n      },\n      link: function ($scope, $element, $attrs) {\n        let swiper;\n\n        $element.addClass('loading');\n\n        // Wait until images get available\n        $scope.$watch('images', () => {\n          if (angular.isDefined($scope.images) && angular.isUndefined(swiper)) {\n            createSwiper();\n          }\n        });\n\n        function createSwiper() {\n          $scope.swiperContainer = 'swiper-' + swiperCount++;\n          $timeout(() => { // wait for digest complete to instantiate swiper\n            swiper = new Swiper('#' + $scope.swiperContainer, {\n              // calculateHeight: true,\n              // resizeReInit: true,\n              pagination: '.swiper-pagination',\n              paginationClickable: true,\n              // onImagesReady: swiper => $element.removeClass('loading'),\n            });\n\n            // Show swiper only when the first image is loaded\n            const images = document.getElementById($scope.swiperContainer).getElementsByTagName('img');\n            if (images.length > 0) {\n              const image = new Image();\n              image.onload = () => {\n                angular.element(document.getElementById($scope.swiperContainer)).css('opacity', 1);\n                $element.removeClass('loading');\n              };\n              image.src = images[0].src;\n            }\n\n          }, 0, false);\n        }\n\n        $scope.prev = function() {\n          swiper.swipePrev();\n        };\n        $scope.next = function() {\n          swiper.swipeNext();\n        };\n      },\n      template:\n      '<div class=\"swiper-thumbnail\" ng-if=\"thumbnail\"><ff-img ff-src=\"{{thumbnail}}\" alt=\"{{ffAlt}}\" img-placeholder=\"{{\\'GLOBAL.NO_PHOTO\\' | translate}}\"></div>' +\n      '<div class=\"swiper-container\" id=\"{{swiperContainer}}\">' +\n        '<div class=\"swiper-wrapper\">' +\n          '<div class=\"swiper-slide\" ng-repeat=\"image in images\"><img ng-src=\"{{image}}\" alt=\"{{ffAlt}}\"></div>' +\n        '</div>' +\n        '<div class=\"swiper-pagination\" ng-show=\"images.length > 1\"></div>' +\n        '<div class=\"swiper-prev\" ng-show=\"images.length > 1\" ng-click=\"prev()\" aria-label=\"{{\\'SIMPLE_RES.CATEGORY.PREV_SLIDE\\' | translate}}\"><span class=\"fa fa-chevron-left\"></span></div>' +\n        '<div class=\"swiper-next\" ng-show=\"images.length > 1\" ng-click=\"next()\" aria-label=\"{{\\'SIMPLE_RES.CATEGORY.NEXT_SLIDE\\' | translate}}\"><span class=\"fa fa-chevron-right\"></span></div>' +\n      '</div>',\n    };\n  });\n","// extracted by extract-css-chunks-webpack-plugin","import './tabs.scss';\n\n/**\n * Isolated ui.bootstrap.tabs module from ui.bootstrap package\n */\nangular.module('ui.bootstrap.tabs', [])\n\n  .controller('UibTabsetController', ['$scope', function ($scope) {\n    var ctrl = this,\n      oldIndex;\n    ctrl.tabs = [];\n\n    ctrl.select = function(index, evt) {\n      if (!destroyed) {\n        var previousIndex = findTabIndex(oldIndex);\n        var previousSelected = ctrl.tabs[previousIndex];\n        if (previousSelected) {\n          previousSelected.tab.onDeselect({\n            $event: evt,\n            $selectedIndex: index\n          });\n          if (evt && evt.isDefaultPrevented()) {\n            return;\n          }\n          previousSelected.tab.active = false;\n        }\n\n        var selected = ctrl.tabs[index];\n        if (selected) {\n          selected.tab.onSelect({\n            $event: evt\n          });\n          selected.tab.active = true;\n          ctrl.active = selected.index;\n          oldIndex = selected.index;\n        } else if (!selected && angular.isDefined(oldIndex)) {\n          ctrl.active = null;\n          oldIndex = null;\n        }\n      }\n    };\n\n    ctrl.addTab = function addTab(tab) {\n      ctrl.tabs.push({\n        tab: tab,\n        index: tab.index\n      });\n      ctrl.tabs.sort(function(t1, t2) {\n        if (t1.index > t2.index) {\n          return 1;\n        }\n\n        if (t1.index < t2.index) {\n          return -1;\n        }\n\n        return 0;\n      });\n\n      if (tab.index === ctrl.active || !angular.isDefined(ctrl.active) && ctrl.tabs.length === 1) {\n        var newActiveIndex = findTabIndex(tab.index);\n        ctrl.select(newActiveIndex);\n      }\n    };\n\n    ctrl.removeTab = function removeTab(tab) {\n      var index;\n      for (var i = 0; i < ctrl.tabs.length; i++) {\n        if (ctrl.tabs[i].tab === tab) {\n          index = i;\n          break;\n        }\n      }\n\n      if (ctrl.tabs[index].index === ctrl.active) {\n        var newActiveTabIndex = index === ctrl.tabs.length - 1 ?\n        index - 1 : index + 1 % ctrl.tabs.length;\n        ctrl.select(newActiveTabIndex);\n      }\n\n      ctrl.tabs.splice(index, 1);\n    };\n\n    $scope.$watch('tabset.active', function(val) {\n      if (angular.isDefined(val) && val !== oldIndex) {\n        ctrl.select(findTabIndex(val));\n      }\n    });\n\n    var destroyed;\n    $scope.$on('$destroy', function() {\n      destroyed = true;\n    });\n\n    function findTabIndex(index) {\n      for (var i = 0; i < ctrl.tabs.length; i++) {\n        if (ctrl.tabs[i].index === index) {\n          return i;\n        }\n      }\n    }\n  }])\n\n  .directive('uibTabset', function() {\n    return {\n      transclude: true,\n      replace: true,\n      scope: {},\n      bindToController: {\n        active: '=?',\n        type: '@'\n      },\n      controller: 'UibTabsetController',\n      controllerAs: 'tabset',\n      template:\n        '<div>' +\n          '<ul class=\"nav nav-{{tabset.type || \\'tabs\\'}}\" ng-class=\"{\\'nav-stacked\\': vertical, \\'nav-justified\\': justified}\" ng-transclude></ul>' +\n          '<div class=\"tab-content\">' +\n            '<div class=\"tab-pane\" ng-repeat=\"tab in tabset.tabs\" ng-class=\"{active: tabset.active === tab.index}\" uib-tab-content-transclude=\"tab\"></div>' +\n          '</div>' +\n        '</div>',\n      link: function(scope, element, attrs) {\n        scope.vertical = angular.isDefined(attrs.vertical) ?\n          scope.$parent.$eval(attrs.vertical) : false;\n        scope.justified = angular.isDefined(attrs.justified) ?\n          scope.$parent.$eval(attrs.justified) : false;\n      }\n    };\n  })\n\n  .directive('uibTab', ['$parse', function($parse) {\n    return {\n      require: '^uibTabset',\n      replace: true,\n      template:\n        '<li ng-class=\"[{active: active, disabled: disabled}, classes]\" class=\"uib-tab nav-item\">' +\n          '<a href ng-click=\"select($event)\" class=\"nav-link\" role=\"button\" uib-tab-heading-transclude>{{heading}}</a>' +\n        '</li>',\n      transclude: true,\n      scope: {\n        heading: '@',\n        index: '=?',\n        classes: '@?',\n        onSelect: '&select', //This callback is called in contentHeadingTransclude\n        //once it inserts the tab's content into the dom\n        onDeselect: '&deselect'\n      },\n      controller: function() {\n        //Empty controller so other directives can require being 'under' a tab\n      },\n      controllerAs: 'tab',\n      link: function(scope, elm, attrs, tabsetCtrl, transclude) {\n        scope.disabled = false;\n        if (attrs.disable) {\n          scope.$parent.$watch($parse(attrs.disable), function(value) {\n            scope.disabled = !! value;\n          });\n        }\n\n        if (angular.isUndefined(attrs.index)) {\n          if (tabsetCtrl.tabs && tabsetCtrl.tabs.length) {\n            scope.index = Math.max.apply(null, tabsetCtrl.tabs.map(function(t) { return t.index; })) + 1;\n          } else {\n            scope.index = 0;\n          }\n        }\n\n        if (angular.isUndefined(attrs.classes)) {\n          scope.classes = '';\n        }\n\n        scope.select = function(evt) {\n          if (!scope.disabled) {\n            var index;\n            for (var i = 0; i < tabsetCtrl.tabs.length; i++) {\n              if (tabsetCtrl.tabs[i].tab === scope) {\n                index = i;\n                break;\n              }\n            }\n\n            tabsetCtrl.select(index, evt);\n          }\n        };\n\n        tabsetCtrl.addTab(scope);\n        scope.$on('$destroy', function() {\n          tabsetCtrl.removeTab(scope);\n        });\n\n        //We need to transclude later, once the content container is ready.\n        //when this link happens, we're inside a tab heading.\n        scope.$transcludeFn = transclude;\n      }\n    };\n  }])\n\n  .directive('uibTabHeadingTransclude', function() {\n    return {\n      restrict: 'A',\n      require: '^uibTab',\n      link: function(scope, elm) {\n        scope.$watch('headingElement', function updateHeadingElement(heading) {\n          if (heading) {\n            elm.html('');\n            elm.append(heading);\n          }\n        });\n      }\n    };\n  })\n\n  .directive('uibTabContentTransclude', function() {\n    return {\n      restrict: 'A',\n      require: '^uibTabset',\n      link: function(scope, elm, attrs) {\n        var tab = scope.$eval(attrs.uibTabContentTransclude).tab;\n\n        //Now our tab is ready to be transcluded: both the tab heading area\n        //and the tab content area are loaded.  Transclude 'em both.\n        tab.$transcludeFn(tab.$parent, function(contents) {\n          angular.forEach(contents, function(node) {\n            if (isTabHeading(node)) {\n              //Let tabHeadingTransclude know.\n              tab.headingElement = node;\n            } else {\n              elm.append(node);\n            }\n          });\n        });\n      }\n    };\n\n    function isTabHeading(node) {\n      return node.tagName && (\n          node.hasAttribute('uib-tab-heading') ||\n          node.hasAttribute('data-uib-tab-heading') ||\n          node.hasAttribute('x-uib-tab-heading') ||\n          node.tagName.toLowerCase() === 'uib-tab-heading' ||\n          node.tagName.toLowerCase() === 'data-uib-tab-heading' ||\n          node.tagName.toLowerCase() === 'x-uib-tab-heading' ||\n          node.tagName.toLowerCase() === 'uib:tab-heading'\n        );\n    }\n  });\n","// extracted by extract-css-chunks-webpack-plugin","import './date.scss';\n\nexport default angular.module('deskworks.SimpleReservationDateCtrl', [])\n\n  .controller('SimpleReservationDateCtrl', function($scope, $route, $filter, $translate,\n                                                    unavailableDates, state) {\n    var vm = this;\n\n    state.setPageTitle($translate.instant('SIMPLE_RES.DATE.PAGE_TITLE'));\n\n    vm.centerId = $route.current.params.centerId;\n    vm.reservationTypeId = $route.current.params.reservationTypeId;\n    vm.unavailableDates = unavailableDates;\n    vm.dateMin = moment().startOf('day');\n\n    /**\n     * Callback for datepicker to disable unavailable dates\n     */\n    vm.checkDateDisabled = function(date) {\n      return vm.unavailableDates.indexOf($filter('date')(date, 'yyyy-MM-dd')) >= 0;\n    };\n\n    /**\n     * Next button handler\n     */\n    vm.next = function() {\n      if(angular.isDefined(vm.selectedDate)) {\n        return state.setPath(state.getPath() + '/' + $filter('date')(vm.selectedDate, 'yyyy-MM-dd') + '/units');\n      }\n    };\n\n    /**\n     * Back button handler\n     */\n    vm.back = state.back;\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div class=\\\"sr-date\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <ff-board> <ff-panel class=\\\"sr-date-panel\\\"> <ff-datepicker ff-model=\\\"vm.selectedDate\\\" date-min=\\\"vm.dateMin\\\" date-disabled=\\\"vm.checkDateDisabled($date)\\\"></ff-datepicker> </ff-panel> </ff-board> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\"> <span translate=\\\"GLOBAL.BTN_BACK\\\"></span> </ff-btn> <ff-btn sense=\\\"next\\\" type=\\\"submit\\\" ff-disabled=\\\"!vm.selectedDate\\\" ff-click=\\\"vm.next()\\\"> <span translate=\\\"GLOBAL.BTN_NEXT\\\"></span> </ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","import './reservation-units.scss';\nimport resBar from 'shared/res-bar/res-bar.component';\n\nexport default angular.module('deskworks.SimpleReservationUnitsCtrl', [resBar.name])\n\n  .controller('SimpleReservationUnitsCtrl', function($scope, $route, $translate, $locale, state, resUnits, center, settings) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('SIMPLE_RES.UNITS.PAGE_TITLE'));\n\n    vm.center = center;\n    vm.resTypeId = $route.current.params.reservationTypeId;\n    vm.date = $route.current.params.date;\n\n    vm.units = resUnits\n      .filter(unit => unit.availabilities.length || unit.whoCanReserve === 'staffOnly' && !settings.hideStaffOnlyUnits);\n\n    /**\n     * Reloads the current route as time availability depends on auth state.\n     */\n    $scope.$on('LOGOUT', $route.reload);\n    $scope.$on('LOGIN', $route.reload);\n\n    /**\n     * Select reservation unit handler, proceeds to next step\n     */\n    vm.select = function(unit) {\n      return state.setPath(state.getPath() + '/' + unit.id);\n    };\n\n    /**\n     * Skip this screen if only one unit is available and it's not staffOnly\n     */\n    if (vm.units.length === 1 && vm.units[0].whoCanReserve !== 'staffOnly') {\n      state.replace();\n      vm.select(vm.units[0]);\n    }\n\n    /**\n     * Back button handler\n     */\n    vm.back = state.back;\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div class=\\\"sr-units\\\"> <h1 class=\\\"page-title ff-row\\\"> <span>{{state.getPageTitle()}}</span> <div flex=\\\"none\\\" class=\\\"ff-col legend\\\"> <div class=\\\"available\\\" flex=\\\"none\\\" translate=\\\"RESERVATIONS.CALENDAR.LEGEND.AVAILABLE\\\"></div> <div class=\\\"unavailable\\\" flex=\\\"none\\\" translate=\\\"RESERVATIONS.CALENDAR.LEGEND.UNAVAILABLE\\\"></div> </div> </h1> <ff-board> <ff-panel ng-if=\\\"!vm.units.length\\\"><span translate=\\\"SIMPLE_RES.UNITS.EMPTY\\\"></span></ff-panel> <div class=\\\"em\\\" style=\\\"margin:0 0 .5rem 1rem\\\">{{vm.date | date:'longDate'}}</div> <div class=\\\"ff-grid ff-gutter-h ff-gutter-v\\\"> <ff-panel class=\\\"ff-panel-card\\\" flex=\\\"{md: '0 0 50%'}\\\" ng-repeat=\\\"unit in vm.units\\\"> <ff-header style=\\\"margin-bottom:.5rem\\\">{{::unit.name}}</ff-header> <res-bar unit=\\\"unit\\\" availabilities=\\\"unit.$$availabilities\\\"></res-bar> <div class=\\\"ff-tmargin\\\" style=\\\"height:100%\\\"> <div class=\\\"ff-grid gutter-h-half\\\" style=\\\"flex-wrap:nowrap;align-items:center\\\"> <div ng-if=\\\"unit.capacity\\\" translate=\\\"GLOBAL.UNIT_CAPACITY\\\" translate-values=\\\"{ capacity: unit.capacity }\\\" flex=\\\"auto\\\" style=\\\"font-size:.9rem;line-height:1.1\\\"></div> <ff-btn-group flex=\\\"none\\\" style=\\\"margin-top:auto\\\"> <ff-btn sense=\\\"ok\\\" ff-click=\\\"vm.select(unit)\\\" aria-label=\\\"{{('SIMPLE_RES.BTN_SELECT' | translate) + ' ' + unit.name}}\\\" ff-disabled=\\\"!unit.$$availabilities.length\\\"> <span translate=\\\"SIMPLE_RES.BTN_SELECT\\\"></span></ff-btn> </ff-btn-group> </div> </div> </ff-panel> </div> </ff-board> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","import './simple-reservation-time.scss';\n\nexport default angular.module('deskworks.SimpleReservationTimeCtrl', ['deskworks.simpleSelectTime'])\n\n  .controller('SimpleReservationTimeCtrl', function($scope, $translate, state) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('SIMPLE_RES.TIME.PAGE_TITLE'));\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <simple-select-time center=\\\"$resolve.center\\\" cal-data=\\\"$resolve.calData\\\" reservation-prices=\\\"$resolve.reservationPrices\\\" hide-recurring-reservations=\\\"$resolve.settings.hideRecurringReservations\\\" reservation-fields=\\\"$resolve.reservationFields\\\"></simple-select-time> \";\n// Exports\nmodule.exports = code;","import 'shared/reservation-form/res-reservation.component';\n\n/**\n * simpleSelectTime component - time selection for Simple Reservation\n */\nangular.module('deskworks.simpleSelectTime', [\n  'deskworks.resReservation',\n])\n\n  .component('simpleSelectTime', {\n    templateUrl: '06-time/simple-select-time.tpl.html',\n    controller: 'ResReservationController',\n    bindings: {\n      center: '<',\n      calData: '<',\n      date: '<',\n      hideRecurringReservations: '<',\n      reservationFields: '<',\n    }\n  });\n","// Module\nvar code = \"<form class=\\\"sr-time\\\" novalidate> <ff-board> <ff-panel class=\\\"sr-time-panel\\\"> <ff-panel-header>{{$ctrl.date | date:'longDate'}}</ff-panel-header> <div class=\\\"sr-time-container\\\"> <div class=\\\"ff-relative\\\"> <time-selector class=\\\"ff-bmargin\\\" date=\\\"$ctrl.date\\\" time-start=\\\"$ctrl.timeStart\\\" time-end=\\\"$ctrl.timeEnd\\\" scale=\\\"$ctrl.reservationUnit.scale\\\" buffer=\\\"$ctrl.reservationUnit.buffer\\\" limit-min=\\\"$ctrl.reservationUnit.limitMin\\\" reservations=\\\"$ctrl.reservationUnit.reservations\\\" availabilities=\\\"$ctrl.reservationUnit.availabilities\\\"> </time-selector> <ff-info ng-if=\\\"!$ctrl.reservationUnit.availabilities.length && $ctrl.reservationUnit.whoCanReserve === 'staffOnly'\\\" class=\\\"staff-only\\\" translate=\\\"RESERVATIONS.STAFF_ONLY\\\" translate-values=\\\"{ centerName: $ctrl.center.name, centerPhone: $ctrl.center.phone, centerEmail: $ctrl.center.email }\\\"> </ff-info> </div> <ff-textarea name=\\\"reservationNote\\\" ff-maxlength=\\\"250\\\" ff-model=\\\"$ctrl.reservationNote\\\" rowspan=\\\"2\\\" placeholder=\\\"{{'RESERVATIONS.NOTES' | translate}}\\\" aria-label=\\\"{{'RESERVATIONS.NOTES' | translate}}\\\"></ff-textarea> <label class=\\\"sr-time-email\\\"> <ff-checkbox name=\\\"emailConfirmation\\\" ff-model=\\\"$ctrl.emailConfirmation\\\"> <span translate=\\\"RESERVATIONS.EMAIL_CONFIRMATION\\\"></span> </ff-checkbox> </label> <div class=\\\"ff-grid ff-gutter-h\\\" ng-if=\\\"$ctrl.hasRecurring()\\\"> <label class=\\\"ff-row\\\" flex=\\\"1 1 auto\\\"> <ff-label flex=\\\"0 1 64px\\\"> <span translate=\\\"RESERVATIONS.REPEAT_FREQUENCY\\\"></span> </ff-label> <ff-select name=\\\"repeatFrequency\\\" ff-model=\\\"$ctrl.repeatFrequency\\\" ff-options=\\\"opt.name for opt in $ctrl.optsRepeatFrequency\\\" ff-change=\\\"$ctrl.repeatDuration = $ctrl.repeatFrequency.repeatDurationOptions[0]\\\"></ff-select> </label> <label class=\\\"ff-row\\\" ng-if=\\\"$ctrl.repeatFrequency.repeatDurationOptions\\\" flex=\\\"{md: '0 1 200px'}\\\"> <ff-label flex=\\\"0 1 86px\\\"> <span translate=\\\"RESERVATIONS.REPEAT_DURATION\\\"></span> </ff-label> <ff-select name=\\\"repeatDuration\\\" flex=\\\"0 1 50px\\\" ff-model=\\\"$ctrl.repeatDuration\\\" ff-options=\\\"opt for opt in $ctrl.repeatFrequency.repeatDurationOptions\\\"></ff-select> <ff-label>{{$ctrl.repeatFrequency.repeatDurationFilter($ctrl.repeatDuration, true)}}</ff-label> </label> </div> <fd-field field=\\\"field\\\" ng-repeat=\\\"field in $ctrl.reservationType.fields\\\"></fd-field> </div> </ff-panel> </ff-board> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"back\\\" ff-click=\\\"$ctrl.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> <ff-btn sense=\\\"next\\\" type=\\\"submit\\\" ff-disabled=\\\"!$ctrl.timeStart || !$ctrl.timeEnd || !$ctrl.reservationUnit.availabilities.length && $ctrl.reservationUnit.whoCanReserve === 'staffOnly'\\\" ff-click=\\\"$ctrl.next()\\\"> <span translate=\\\"GLOBAL.BTN_NEXT\\\"></span> </ff-btn> </ff-btn-group> </form> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.SimpleReservationUserProfileCtrl', [\n  'ngRoute',\n  'deskworks.userProfile.service',\n  'deskworks.center.service',\n  'deskworks.routeHelper',\n  'deskworks.helper',\n  'deskworks.ReservationCost',\n])\n\n  .controller('SimpleReservationUserProfileCtrl', function($scope, $filter, $timeout, $q, $route, $translate, dwAlerts,\n                                                           helper, state, userProfile, reg, userProfileService, centerService,\n                                                           purchaseService, ReservationCost) {\n    const vm = this;\n\n    vm.reg = reg;\n    vm.userProfile = userProfile;\n    vm.schema = userProfile.schema;\n\n    state.setPageTitle($translate.instant(vm.reg.new ? 'USER_PROFILE.NEW_USER.PAGE_TITLE' : 'USER_PROFILE.PAGE_TITLE', { userName: vm.userProfile.fullNameCompany }));\n\n    /**\n     * Bind test user data generator\n     */\n    userProfileService.bindTestUserGenerator($scope, vm.userProfile, vm.reg);\n\n    /**\n     * Next button handler\n     */\n    vm.next = function() {\n      if (helper.pointFirstInvalid('#userProfile')) return;\n\n      const timeStart = $filter('toDate')(state.getParam('start'));\n      const timeEnd = $filter('toDate')(state.getParam('end'));\n\n      return (vm.reg.new ? userProfileService.registerNewUser(0, vm.userProfile) : $q.when())\n        .then(function() {\n          if (vm.reg.new) { // Need to login under just created user\n            return state.login(vm.userProfile.login, vm.userProfile.password)\n              .catch(err => dwAlerts.error(err, 'Failed to login under created user.'));\n          }\n        })\n        .then(() => ReservationCost.calcAsync($route.current.params.centerId, vm.userProfile.id, $route.current.params.reservationUnitId, state.getParam('start'), state.getParam('end')))\n        .then(cost => {\n          if (!cost) return state.setPath(state.getPath() + '/confirm')\n            .then(() => $q.reject()); // free reservation - no purchase, proceed to confirm step\n        })\n        .then(() => {\n          const centerId = $route.current.params.centerId;\n          const userId = vm.userProfile.id;\n          const data = {\n            reservationUnitId: $route.current.params.reservationUnitId,\n            reservationFrom: state.getParam('start'),\n            reservationTo: state.getParam('end'),\n            reservationRepeatFrequency: state.getParam('freq'),\n            reservationRepeatDuration: state.getParam('duration'),\n          };\n\n          return purchaseService.createPurchaseForReservation(centerId, userId, data)\n            .catch(err => dwAlerts.error(err, 'Failed to create purchase for reservation.'))\n            .finally(() => {\n              if (vm.reg.new) {\n                state.replace();\n                $route.updateParams({ userId: vm.userProfile.id });\n              }\n            });\n        })\n        .then(result => {\n          return $timeout(() => { // Navigate on next digest as current digest replaces history state\n            if (result.purchasePackageId) state.setParam('purchasePackageId', result.purchasePackageId);\n            return state.setPath(state.getPath() + '/purchases/' + result.id);\n          });\n        })\n        .catch(angular.noop);\n    };\n  });\n","import newBillingProfile from 'shared/new-billing-profile/new-billing-profile.directive';\nimport needHelp from 'shared/need-help/need-help.directive';\nimport reservationAgreement from 'shared/reservation-agreement/reservation-agreement.directive';\nimport ReservationUnit from 'shared/services/inventory/reservation-unit.service';\nimport dwInvoice from 'shared/dw-invoice/dw-invoice.directive';\nimport dwInvoicePaymentProcessingFee from 'shared/dw-invoice/dw-invoice-payment-processing-fee.directive';\nimport niceTimeDirective from 'shared/nice-date-time/nice-time.directive';\n\nexport default angular.module('deskworks.SimpleReservationPurchaseCtrl', [\n  'ngRoute',\n  'deskworks.helper',\n  'deskworks.StaffHelpCtrl',\n  'deskworks.userProfile.service',\n  'deskworks.purchase.service',\n  'deskworks.reservationService',\n  'deskworks.reservationUnit.optsRepeatFrequency',\n  newBillingProfile.name,\n  needHelp.name,\n  reservationAgreement.name,\n  ReservationUnit.name,\n  dwInvoice.name,\n  dwInvoicePaymentProcessingFee.name,\n  niceTimeDirective.name,\n])\n\n  .controller('SimpleReservationPurchaseCtrl', function($scope, $filter, $q, $route, $translate, $timeout,\n                                                        dwAlerts, helper, session, state, reg, settings, center,\n                                                        purchase, userProfile, userProfileService, reservationUnit,\n                                                        purchaseService, reservationService, optsRepeatFrequency,\n                                                        reservationFields) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('SIMPLE_RES.PURCHASE.PAGE_TITLE', { centerName: center.name }));\n\n    vm.reg = reg;\n    vm.center = center;\n    vm.settings = settings;\n    vm.user = userProfile;\n    vm.purchase = purchase;\n    vm.reservationUnit = reservationUnit;\n\n    vm.date = $filter('toDate')($route.current.params.date);\n    vm.timeStart = $filter('toDate')(state.getParam('start'));\n    vm.timeEnd = $filter('toDate')(state.getParam('end'));\n    vm.reservationNote = state.getParam('note') || '';\n    vm.emailConfirmation = !!state.getParam('confirm');\n\n    vm.repeatFrequency = optsRepeatFrequency[0];\n    if (state.getParam('freq')) {\n      vm.repeatFrequency = optsRepeatFrequency.find(opt => opt.id === state.getParam('freq'));\n      if (vm.repeatFrequency && vm.repeatFrequency.repeatDurationOptions) {\n        if ((state.getParam('duration') - 1) < vm.repeatFrequency.repeatDurationOptions.length) {\n          vm.repeatDuration = +state.getParam('duration');\n        }\n      }\n    }\n\n    /**\n     * Next button handler\n     */\n    vm.next = () => {\n      if (helper.pointFirstInvalid('#simpleReservationPurchase')) return;\n\n      vm.spin = true;\n      return userProfileService.saveBillingProfile($route.current.params.centerId, vm.user)\n        .then(_ => {\n          if (+vm.purchase.balance <= 0) return state.setPath(state.getPath() + '/complete');\n\n          return vm.createReservationWithPayment()\n            .then(result => vm.updatePurchase().then(_ => result))\n            .then(result => {\n              state.replace().setParam('accessCode', result.accessCode);\n              return $timeout(_ => state.setPath(state.getPath() + '/complete'));\n            });\n        })\n        .finally(_ => { vm.spin = false; });\n    };\n\n    /**\n     * Create reservation with payment\n     */\n    vm.createReservationWithPayment = _ => {\n      const fields = JSON.parse(state.getParam('fields') || \"{}\");\n      Object.keys(fields).forEach(key => {\n        const field = reservationFields.find(f => f.id === +key);\n        fields[key] = field.$$serialize(field, fields[key]);\n      });\n\n      const data = {\n        from: vm.timeStart,\n        to: vm.timeEnd,\n        reservationNote: state.getParam('note'),\n        title: vm.reservationTitle,\n        reservationUnitId: $route.current.params.reservationUnitId,\n        emailConfirmation: !!state.getParam('confirm'),\n        repeatFrequency: state.getParam('freq'),\n        repeatDuration: state.getParam('duration'),\n        fields,\n      };\n\n      if (state.getParam('purchasePackageId')) data.purchasePackageId = +state.getParam('purchasePackageId');\n\n      return reservationService.saveWithPayment(vm.center.id, vm.user.id, data)\n        .catch(err => dwAlerts.error(err, 'Failed to make reservation and payment.'));\n    };\n\n    /**\n     * Update purchase order\n     */\n    vm.updatePurchase = _ => purchaseService.get(vm.center.id, vm.user.id, vm.purchase.id)\n      .catch(err => dwAlerts.error(err, 'Failed to get purchase.'))\n      .then(purchase => { vm.purchase = purchase; });\n\n    /**\n     * Back button handler\n     */\n    vm.back = () => state.setPath(state.getPath().replace(/\\/purchases\\/\\d+$/, ''));\n\n    /**\n     * Staff Help button handler\n     */\n    vm.staffHelp = () =>\n      purchaseService.createStaffHelp(vm.center.id, $route.current.params.userId, $route.current.params.purchaseId)\n        .catch(err => dwAlerts.error(err, 'Failed to create staff help.'))\n        .then(result => {\n          state.setParam('notice', result.notice);\n          return state.setPath(state.getPath() + '/staff-help');\n        });\n\n    /**\n     * Whether recurring settings are available\n     */\n    vm.hasRecurring = () => session.isAdmin() || !settings.hideRecurringReservations;\n  });\n","// Module\nvar code = \"<div> <h1 class=\\\"page-title flex\\\"> <span>{{state.getPageTitle()}}</span> <need-help phone=\\\"vm.center.phone\\\"></need-help> </h1> <form name=\\\"formPurchase\\\" id=\\\"simpleReservationPurchase\\\" novalidate> <ff-board ff-dim=\\\"vm.spin\\\"> <div class=\\\"ff-grid gutter-v gutter-h\\\"> <ff-panel ng-if=\\\"vm.date\\\"> <ff-panel-header> <span translate=\\\"SIMPLE_RES.PURCHASE.RESERVATION.HEADER\\\"></span> </ff-panel-header> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.LOCATION\\\"></span></ff-label> <ff-static ff-bind=\\\"::vm.center.name\\\" name=\\\"center\\\"></ff-static> </ff-row> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.SPACE\\\"></span></ff-label> <ff-static ff-bind=\\\"::vm.reservationUnit.name\\\" name=\\\"reservationUnit\\\"></ff-static> </ff-row> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.DATE\\\"></span></ff-label> <ff-static ff-bind=\\\"::vm.date | date:'longDate'\\\" name=\\\"date\\\"></ff-static> </ff-row> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.TIME\\\"></span></ff-label> <ff-static> <span><span nice-time=\\\"::vm.timeStart\\\"></span> - <span nice-time=\\\"::vm.timeEnd\\\"></span></span> </ff-static> </ff-row> <ff-row ng-if=\\\"vm.hasRecurring()\\\"> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.REPEAT_FREQUENCY\\\"></span></ff-label> <ff-static><span ng-bind=\\\"::vm.repeatFrequency.name\\\"></span></ff-static> </ff-row> <ff-row ng-if=\\\"vm.hasRecurring() && vm.repeatFrequency.repeatDurationOptions\\\"> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.REPEAT_DURATION\\\"></span></ff-label> <ff-static>{{::vm.repeatFrequency.repeatDurationFilter(vm.repeatDuration)}}</ff-static> </ff-row> </ff-panel> <ff-panel> <ff-panel-header> <span translate=\\\"SIMPLE_RES.PURCHASE.ORDER.HEADER\\\" translate-values=\\\"{ orderId: vm.purchase.orderId }\\\"></span> </ff-panel-header> <dw-invoice invoice=\\\"vm.purchase\\\" center=\\\"vm.center\\\" allow-remove=\\\"false\\\" dw-invoice-payment-processing-fee settings=\\\"$resolve.settings\\\" credit-cards=\\\"$resolve.userProfile.creditCards\\\" e-checks=\\\"$resolve.userProfile.eChecks\\\"></dw-invoice> </ff-panel> <div> <ff-panel-header> <div translate=\\\"BILLING_PROFILE.PAGE_TITLE\\\" translate-values=\\\"{ userName: vm.user.fullNameCompany }\\\"></div> <small translate=\\\"GLOBAL.REQUIRED_FIELDS_MARKED_WITH\\\"></small> </ff-panel-header> <new-billing-profile user=\\\"vm.user\\\" settings=\\\"vm.settings\\\" id=\\\"newBillingProfile\\\" class=\\\"ff-grid gutter-v\\\"></new-billing-profile> </div> <ff-col> <div class=\\\"ff-grid gutter-h gutter-v\\\" style=\\\"justify-content:flex-end\\\"> <reservation-agreement flex=\\\"0 0 300px\\\" ng-if=\\\"wlLinks.reservationAgreementLinkUrl\\\"></reservation-agreement> <ff-panel flex=\\\"0 0 300px\\\"> <label class=\\\"ff-row\\\"> <ff-checkbox name=\\\"emailConfirmation\\\" ff-model=\\\"vm.emailConfirmation\\\"> <span translate=\\\"RESERVATIONS.EMAIL_CONFIRMATION\\\"></span> </ff-checkbox> </label> </ff-panel> </div> </ff-col> </div> </ff-board> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"help\\\" ff-click=\\\"vm.staffHelp()\\\"><span translate=\\\"GLOBAL.BTN_STAFF_HELP\\\"></span></ff-btn> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> <ff-btn sense=\\\"next\\\" type=\\\"submit\\\" ff-click=\\\"vm.next()\\\"><span translate=\\\"SIMPLE_RES.BILLING.BTN_PURCHASE\\\"></span></ff-btn> </ff-btn-group> </form> </div> \";\n// Exports\nmodule.exports = code;","// extracted by extract-css-chunks-webpack-plugin","import './ff-panel-card.scss';\n\nimport 'shared/staff-help/staff-help.controller';\nimport staffHelpTpl from 'shared/staff-help/staff-help.tpl.html';\nimport userProfileTpl from 'shared/templates/new-user-profile.tpl.html';\n\nconst index = ['$injector', function index($injector) {\n  // JS\n  const importAll = r => r.keys().map(r);\n  const js = importAll(require.context('./', true, /\\..+\\/.+\\.js$/));\n  $injector.loadNewModules(js.filter(m => m.default).map(m => m.default.name));\n\n  // Templates\n  $injector.invoke(['$templateCache', function($templateCache) {\n    const ctx = require.context('./', true, /.*\\.tpl\\.html$/);\n    ctx.keys().forEach(key => $templateCache.put(key.replace(/^\\.\\//, ''), ctx(key)));\n\n    $templateCache.put('staff-help/staff-help.tpl.html', staffHelpTpl);\n    $templateCache.put('templates/new-user-profile.tpl.html', userProfileTpl);\n  }]);\n}];\n\nexport default index;\n","import dwInvoice from 'shared/dw-invoice/dw-invoice.directive';\n\nexport default angular.module('deskworks.SimpleReservationCompleteCtrl', [\n  dwInvoice.name,\n])\n\n  .controller('SimpleReservationCompleteCtrl', function($scope, $q, $timeout, $translate, dwAlerts, state, helper,\n                                                        deskworksConfig, center, purchase, settings) {\n    const vm = this;\n\n    vm.center = center;\n    vm.purchase = purchase;\n    vm.accessCode = state.getParam('accessCode');\n    vm.settings = settings;\n\n    state.setPageTitle($translate.instant('SIMPLE_RES.COMPLETE.PAGE_TITLE'));\n\n    /**\n     * Prevent using Back button\n     */\n    $scope.$on('$locationChangeStart', (event, newUrl) => {\n      if (newUrl && newUrl.indexOf('/simple-reservation') >= 0) {\n        event.preventDefault();\n        dwAlerts.error($translate.instant('SIMPLE_RES.COMPLETE.BACK_ERROR'));\n      }\n    });\n\n    /**\n     * Back to Home Page button handler\n     */\n    vm.home = function() {\n      const origin = state.getParam('origin');\n      const centerId = state.getCurrentCenterId();\n      (origin ? state.logout() : $q.when()).finally(() =>{ // If origin presents, log out\n        state.resetParams();\n        state.setPath(origin || deskworksConfig.getDefaultRoute());\n        if (origin) {\n          state.setCurrentCenterId(centerId);\n        } else {\n          if (vm.center) state.setCurrentCenterId(vm.center.id);\n        }\n      });\n      return $timeout(10000);\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"simpleReservationComplete\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid ff-gutter-v\\\" ng-if=\\\"vm.accessCode && vm.settings.enableAccessCodes || vm.purchase\\\"> <ff-panel ng-if=\\\"vm.accessCode && vm.settings.enableAccessCodes\\\"> <span class=\\\"ff-center ff-bmargin\\\" translate=\\\"SIMPLE_RES.COMPLETE.ACCESS_CODE\\\" translate-values=\\\"{ accessCode: vm.accessCode }\\\"></span> </ff-panel> <ff-panel ng-if=\\\"vm.purchase\\\"> <ff-panel-header> <span translate=\\\"SIMPLE_RES.COMPLETE.ORDER.HEADER\\\" translate-values=\\\"{ orderId: vm.purchase.orderId }\\\"></span> </ff-panel-header> <dw-invoice invoice=\\\"vm.purchase\\\" center=\\\"vm.center\\\" allow-remove=\\\"false\\\"></dw-invoice> </ff-panel> </div> <ff-btn-group class=\\\"buttons-bottom\\\" ng-class=\\\"{'ff-center': !vm.purchase}\\\"> <ff-btn sense=\\\"home\\\" type=\\\"submit\\\" ff-click=\\\"vm.home()\\\"><span translate=\\\"GLOBAL.BTN_HOME\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","import niceTimeDirective from 'shared/nice-date-time/nice-time.directive';\n\nexport default angular.module('deskworks.SimpleReservationConfirmCtrl', [\n  'deskworks.center.service',\n  'deskworks.reservationCategory.service',\n  'deskworks.reservationService',\n  'deskworks.reservationUnit.optsRepeatFrequency',\n  'deskworks.ReservationCost',\n  niceTimeDirective.name,\n])\n  .controller('SimpleReservationConfirmCtrl', function($scope, $route, $filter, $translate, $q, settings, dwAlerts, helper,\n                                                       session, center, state, reservationUnit, reservationCategoryService,\n                                                       reservationService, ReservationCost, reservationFields, optsRepeatFrequency) {\n    const vm = this;\n\n    state.setPageTitle($translate.instant('RESERVATIONS.CONFIRM.PAGE_TITLE'));\n\n    vm.center = center;\n    vm.reservationUnit = reservationUnit;\n    vm.date = $filter('toDate')(state.getParam('start'));\n    vm.timeStart = $filter('toDate')(state.getParam('start'));\n    vm.timeEnd = $filter('toDate')(state.getParam('end'));\n    vm.reservationNote = state.getParam('note') || '';\n    vm.emailConfirmation = !!state.getParam('confirm');\n\n    vm.repeatFrequencyOptions = optsRepeatFrequency;\n    vm.repeatFrequency = vm.repeatFrequencyOptions[0];\n\n    if (state.getParam('freq')) {\n      vm.repeatFrequency = helper.find(vm.repeatFrequencyOptions, state.getParam('freq'));\n      if (vm.repeatFrequency && vm.repeatFrequency.repeatDurationOptions) {\n        if ((state.getParam('duration') - 1) < vm.repeatFrequency.repeatDurationOptions.length) {\n          vm.repeatDuration = +state.getParam('duration');\n        }\n      }\n    }\n\n    /**\n     * Back button handler -> Simple Reservation / Select Time\n     */\n    vm.back = state.back;\n\n    /**\n     * Next button handler\n     */\n    vm.next = function() {\n\n      return $q.when(\n        session.isRole('nonMember') &&\n        ReservationCost.calcAsync(vm.center.id, state.getCurrentUserId(), vm.reservationUnit.id, state.getParam('start'), state.getParam('end'))\n          .then(cost => {\n            if (cost) return dwAlerts.error('Not allowed. Chargeable reservation.');\n          })\n      )\n        .then(() => { // reservation without payment\n          const fields = JSON.parse(state.getParam('fields') || \"{}\");\n          Object.keys(fields).forEach(key => {\n            const field = reservationFields.find(f => f.id === +key);\n            fields[key] = field.$$serialize(field, fields[key]);\n          });\n\n          const postData = {\n            centerId: vm.center.id,\n            reservationUnitId: vm.reservationUnit.id,\n            from: vm.timeStart,\n            to: vm.timeEnd,\n            reservationNote: vm.reservationNote,\n            emailConfirmation: !!vm.emailConfirmation,\n            repeatFrequency: vm.repeatFrequency.id,\n            repeatDuration: vm.repeatDuration,\n            fields,\n          };\n\n          return reservationService.save(vm.center.id, state.getCurrentUserId(), postData)\n            .catch(err => dwAlerts.error(err, 'Failed to make reservation.'))\n        })\n        .then(reservation => {\n          state.setParam('accessCode', reservation ? reservation.accessCode || reservation.access_code : null);\n          return state.setPath('/simple-reservation/complete');\n        });\n    };\n\n    /**\n     * Whether recurring settings are available\n     */\n    vm.hasRecurring = () => session.isAdmin() || !settings.hideRecurringReservations;\n  });\n","// Module\nvar code = \"<form name=\\\"formSimpleReservationConfirm\\\" id=\\\"simpleReservationConfirm\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <ff-board> <ff-panel style=\\\"max-width:480px\\\"> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.LOCATION\\\"></span></ff-label> <ff-static ff-bind=\\\"vm.center.name\\\" name=\\\"center\\\"></ff-static> </ff-row> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.SPACE\\\"></span></ff-label> <ff-static ff-bind=\\\"vm.reservationUnit.name\\\" name=\\\"reservationUnit\\\"></ff-static> </ff-row> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.DATE\\\"></span></ff-label> <ff-static ff-bind=\\\"vm.date | date:'longDate'\\\" name=\\\"date\\\"></ff-static> </ff-row> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.TIME\\\"></span></ff-label> <ff-static> <span><span nice-time=\\\"vm.timeStart\\\"></span> - <span nice-time=\\\"vm.timeEnd\\\"></span></span> </ff-static> </ff-row> <div ng-if=\\\"vm.hasRecurring()\\\"> <ff-row> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.REPEAT_FREQUENCY\\\"></span></ff-label> <ff-static name=\\\"repeats\\\"><span ng-bind=\\\"vm.repeatFrequency.name\\\"></span></ff-static> </ff-row> <ff-row ng-if=\\\"vm.repeatFrequency.repeatDurationOptions\\\"> <ff-label flex=\\\"0 1 100px\\\"><span translate=\\\"RESERVATIONS.REPEAT_DURATION\\\"></span></ff-label> <ff-static>{{vm.repeatFrequency.repeatDurationFilter(vm.repeatDuration)}}</ff-static> </ff-row> </div> </ff-panel> </ff-board> <ff-btn-group class=\\\"buttons-bottom\\\"> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> <ff-btn sense=\\\"next\\\" type=\\\"submit\\\" ff-click=\\\"vm.next()\\\"><span translate=\\\"GLOBAL.BTN_NEXT\\\"></span></ff-btn> </ff-btn-group> </form> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.SimpleReservationSignInCtrl', [\n  'flexForms',\n  'deskworks.state',\n  'deskworks.config',\n  'deskworks.dwSignIn'\n])\n\n  .controller('SimpleReservationSignInCtrl', function($scope, $q, $location, $route, $translate, state) {\n    var vm = this;\n\n    state.setPageTitle($translate.instant('SIGN_IN.PAGE_TITLE'));\n\n    /**\n     * dwSignIn:SignIn event listener, proceeds to Simple Reservation / User Profile\n     */\n    $scope.$on('dwSignIn:SignIn', function($event) {\n      $event.stopPropagation();\n\n      state.replace(); // Hide sign-in step in history to skip it with back button\n\n      if(state.isLoggedNonMember()) {\n        // Non-member - long simple reservation\n        state.setPath(state.getPath() + '/' + state.getLoggedUserId());\n      } else {\n        // Member/coordinator/admin - just make reservation and complete without payment\n        state.setPath(state.getPath() + '/' + state.getLoggedUserId() + '/confirm');\n      }\n    });\n\n    /**\n     * dwSignIn:SignUp event listener, proceeds to Simple Reservation / Non-member Self-registration\n     */\n    $scope.$on('dwSignIn:SignUp', function($event) {\n      $event.stopPropagation();\n\n      state.setPath(state.getPath() + '/new');\n    });\n  });\n","// Module\nvar code = \"<dw-sign-in id=\\\"signIn\\\" show-sign-up=\\\"true\\\"></dw-sign-in> \";\n// Exports\nmodule.exports = code;","/**\n * dwInvoicePaymentProcessingFee directive -\n */\nexport default angular.module('deskworks.dwInvoicePaymentProcessingFee', [\n  'deskworks.state',\n  'deskworks.helper',\n])\n\n  .directive('dwInvoicePaymentProcessingFee', function() {\n    return {\n      restrict: 'A',\n      scope: true,\n      controller: 'DwInvoicePaymentProcessingFeeCtrl as $ctrl',\n      bindToController: {\n        invoice: '<',\n        settings: '<',\n        creditCards: '<',\n        eChecks: '<',\n      },\n    };\n  })\n\n  .controller('DwInvoicePaymentProcessingFeeCtrl', function($scope, $timeout, state, helper) {\n    const $ctrl = this;\n\n    $ctrl.$onChanges = () => $timeout(() => {\n      if (!$ctrl.invoice || !$ctrl.settings || !$ctrl.creditCards || !$ctrl.eChecks) return;\n      if (!$ctrl.settings.enablePaymentProcessingCharges) return;\n\n      let rate = 0;\n\n      if ($ctrl.creditCards.length) rate = $ctrl.settings.paymentProcessingRates.cc || 0;\n      else if ($ctrl.eChecks.length) rate = $ctrl.settings.paymentProcessingRates.ach || 0;\n\n      const prevIdx = $ctrl.invoice.items.findIndex(i => i.id === 'fake-payment-processing-fee');\n      if (prevIdx >= 0) $ctrl.invoice.items.splice(prevIdx, 1); // remove exiting fake-payment-processing-fee\n\n      if (!rate || !+$ctrl.invoice.balance) return;\n\n      const fee = helper.round(rate * +$ctrl.invoice.balance / 100);\n\n      const item = {\n        addedBy: 'system',\n        amount: fee,\n        billedAt: moment(),\n        createdAt: moment(),\n        description: \"Payment processing fee\",\n        id: \"fake-payment-processing-fee\",\n        name: \"Payment Fee\",\n        price: fee,\n        quantity: 1,\n      };\n\n      $ctrl.invoice.items.push(item);\n\n      if (angular.isUndefined($ctrl.invoice.chargesTotalInitial)) {\n        $ctrl.invoice.chargesTotalInitial = +$ctrl.invoice.chargesTotal;\n      }\n      if (angular.isUndefined($ctrl.invoice.balanceInitial)) {\n        $ctrl.invoice.balanceInitial = +$ctrl.invoice.balance;\n      }\n\n      $ctrl.invoice.chargesTotal = helper.round($ctrl.invoice.chargesTotalInitial + fee);\n      $ctrl.invoice.balance = helper.round($ctrl.invoice.balanceInitial + fee);\n    });\n  });\n\n","/**\n * Need help? Phone 1-800-000-000.\n */\nexport default angular.module('needHelp', [])\n  .directive('needHelp', function() {\n    return {\n      restrict: 'E',\n      scope: true,\n      controller: function() {},\n      controllerAs: '$ctrl',\n      template: '<span translate=\"GLOBAL.NEED_HELP\" class=\"need-help\" ng-if=\"$ctrl.phone\" ' +\n        'translate-values=\"{ phone: \\'<a href=&quot;tel:\\' + $ctrl.phone + \\'&quot;>\\' + $ctrl.phone + \\'</a>\\' }\"></span>',\n      bindToController: {\n        phone: '<',\n      },\n    };\n  });\n","import template from './new-billing-profile.tpl.html';\n\n/**\n * New Billing Profile\n */\nexport default angular.module('newBillingProfile', [])\n\n  .directive('newBillingProfile', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'NewBillingProfileCtrl as $ctrl',\n      bindToController: {\n        settings: '<',\n        user: '<',\n      },\n    };\n  })\n\n  .controller('NewBillingProfileCtrl', function($scope, userProfileService) {\n    const $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = () => {\n      // filter credit card types according to settings\n      $ctrl.settings.creditCardTypes = $ctrl.settings.creditCardTypes.filter(ccType => ccType.enable);\n\n      $ctrl.user.creditCards.forEach(cc => {\n        cc.type = $ctrl.settings.creditCardTypes.find(type => type.id === cc.type) || cc.type || {};\n      });\n\n      // add one CC if no payment methods\n      $ctrl.user.creditCards = $ctrl.user.creditCards || [];\n      if (!$ctrl.user.creditCards.length && !$ctrl.user.eChecks.length) {\n        const cc = userProfileService.creditCard.new($ctrl.user);\n        cc.type = $ctrl.settings.creditCardTypes[0];\n        $ctrl.user.creditCards.push(cc);\n      }\n\n      $scope.$watchCollection(_ => $ctrl.user.creditCards.concat($ctrl.user.eChecks), methods => {\n        if (methods && $ctrl.user.paymentMethodId && !methods.find(m => m.id === $ctrl.user.paymentMethodId)) {\n          $ctrl.user.billingMethod = null; // reset billing/payment method when payment method deleted\n          $ctrl.user.paymentMethodId = null;\n        }\n      });\n\n      userProfileService.bindTestBillingGenerator($scope, $ctrl.user); // Bind test user data generator\n    };\n\n    $ctrl.isSingleMode = () => {\n      const { creditCards, eChecks } = $ctrl.user;\n      return !creditCards.length && (!eChecks.length || userProfileService.eCheck.isNew(eChecks[0])) ||\n        !eChecks.length && (!creditCards.length || userProfileService.creditCard.isNew(creditCards[0]));\n    };\n  });\n","// Module\nvar code = \"<span translate=\\\"BILLING_PROFILE.PAYMENT_METHOD.EMPTY\\\" ng-if=\\\"$ctrl.showSwitchCC() && $ctrl.showSwitchACH()\\\"></span> <up-billing-method user=\\\"$ctrl.user\\\" settings=\\\"$ctrl.settings\\\" ng-if=\\\"!$ctrl.isSingleMode()\\\"></up-billing-method> <up-credit-cards user-profile=\\\"$ctrl.user\\\" settings=\\\"$ctrl.settings\\\" single=\\\"$ctrl.isSingleMode()\\\" ng-if=\\\"$ctrl.user.creditCards.length || !$ctrl.isSingleMode()\\\"></up-credit-cards> <up-e-checks user-profile=\\\"$ctrl.user\\\" single=\\\"$ctrl.isSingleMode()\\\" ng-if=\\\"$ctrl.settings.enableEChecks && ($ctrl.user.eChecks.length || !$ctrl.isSingleMode())\\\"></up-e-checks> \";\n// Exports\nmodule.exports = code;","import template from './res-bar.tpl.html';\nimport './res-bar.scss';\n\n/**\n * resBar component - reservation availability bar used in Bay Reservation / Select Unit\n */\nexport default angular.module('deskworks.resBar', [])\n\n  .component('resBar', {\n    template,\n    controller: 'ResBarCtrl',\n    bindings: {\n      unit: '<',\n      availabilities: '=?',\n    },\n  })\n\n  .controller('ResBarCtrl', function($scope, $filter) {\n    const $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = function() {\n      $scope.$watchCollection('$ctrl.unit.availabilities', () => {\n        if (!$ctrl.unit) { return; }\n        let ranges = [];\n        $ctrl.unit.availabilities.forEach(period => {\n          ranges.push(moment.range(period.from, period.to));\n        });\n\n        $ctrl.unit.reservations.forEach(res => {\n          const resRange = moment.range(res.from, res.to);\n          ranges = ranges\n            .map(r => r.subtract(resRange))\n            .reduce((result, ranges) => result.concat(ranges), []);\n        });\n\n        ranges = ranges.filter(r => (r.end - r.start) / 3600000 >= ($ctrl.unit.limitMin || 0));\n\n        $ctrl.availabilities = calcAvailabilities(ranges.map(r => ({ from: r.start, to: r.end })));\n      });\n    };\n\n    function calcAvailabilities(availabilities) {\n      if (!availabilities || !availabilities.length) { return []; }\n      const start = availabilities[0].from;\n      const end = availabilities[availabilities.length - 1].to;\n\n      return availabilities.map(av => ({ ...av, x1: dateToX(av.from), x2: dateToX(av.to) }));\n\n      function dateToX(date) {\n        return (date - start) * 100 / (end - start);\n      }\n    }\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div ng-repeat=\\\"av in $ctrl.availabilities\\\" ng-style=\\\"{ left: av.x1 + '%', right: 100 - av.x2 + '%' }\\\" class=\\\"availability\\\"> <span nice-time=\\\"av.from\\\" nice-format=\\\"shortHours\\\" class=\\\"from\\\"></span> <span nice-time=\\\"av.to\\\" nice-format=\\\"shortHours\\\" class=\\\"to\\\"></span> </div> \";\n// Exports\nmodule.exports = code;","/**\n * reservationAgreement directive - 'Reservation Agreement' section in purchase step of Book It Now and Simple Reservation wizards\n */\n\nimport template from './reservation-agreement.tpl.html';\n\nexport default angular.module('deskworks.reservationAgreement', [\n  'deskworks.helper',\n  'deskworks.state',\n])\n\n  .directive('reservationAgreement', function() {\n    return {\n      restrict: 'E',\n      scope: true,\n      template,\n      translations: ['reservations'],\n    };\n  });\n","// Module\nvar code = \"<ff-panel id=\\\"reservationAgreement\\\" class=\\\"ff-no-frame\\\"> <label> <ff-checkbox ff-model=\\\"reservationAgreement\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{ required: ('RESERVATIONS.RESERVATION_AGREEMENT.REQUIRED' | translate) }\\\" title=\\\"{{'RESERVATIONS.RESERVATION_AGREEMENT.REQUIRED' | translate}}\\\"> <div translate=\\\"RESERVATIONS.RESERVATION_AGREEMENT.LABEL\\\"></div> <a ng-href=\\\"{{::wlLinks.reservationAgreementLinkUrl}}\\\" ng-bind=\\\"::wlLinks.reservationAgreementLinkText\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"></a> </ff-checkbox> </label> </ff-panel> \";\n// Exports\nmodule.exports = code;","export default angular.module('deskworks.StaffHelpCtrl', [\n  'ngRoute',\n  'deskworks.helper',\n  'deskworks.config',\n])\n\n  .controller('StaffHelpCtrl', function($scope, $timeout, $q, $route, $window, $translate, dwAlerts,\n                                        helper, state, deskworksConfig) { 'use strict';\n    const vm = this;\n\n    vm.notice = state.getParam('notice');\n\n    state.setPageTitle($translate.instant('SIMPLE_RES.STAFF_HELP.PAGE_TITLE'));\n\n    /**\n     * Prevent using Back button\n     */\n    $scope.$on('$routeChangeStart', (event, next, current) => {\n      if (next.$$route && (\n          next.$$route.controller === 'MemberSignUpBillingCtrl' || next.$$route.controller === 'MemberSignUpPurchaseCtrl' ||\n          next.$$route.controller === 'SimpleReservationBillingCtrl' || next.$$route.controller === 'SimpleReservationPurchaseCtrl' ||\n          next.$$route.controller === 'BuyPassBillingCtrl' || next.$$route.controller === 'BuyPassPurchaseCtrl')\n      ) {\n        dwAlerts.error($translate.instant('SIMPLE_RES.STAFF_HELP.BACK_ERROR'));\n        event.preventDefault();\n      }\n    });\n\n    /**\n     * Next button handler\n     */\n    vm.home = function() {\n      if (state.getParam('redirect')) { // redirect to splash page from Buy A Pass flow\n        $window.location.href = state.getParam('redirect');\n      } else {\n        const origin = state.getParam('origin');\n        const centerId = state.getCurrentCenterId();\n        (origin ? state.logout() : $q.when())\n          .finally(() => { // If origin presents, log out\n            state.resetParams();\n            if (origin) state.setCurrentCenterId(centerId);\n            return state.setPath(origin || deskworksConfig.getDefaultRoute());\n          });\n      }\n\n      return $timeout(10000);\n    };\n  });\n","// Module\nvar code = \"<div id=\\\"staffHelp\\\" class=\\\"ff-tmargin\\\"> <ff-board> <ff-panel> <span ng-bind=\\\"::vm.notice\\\"></span> </ff-panel> </ff-board> <ff-btn-group class=\\\"buttons-bottom ff-center\\\"> <ff-btn sense=\\\"home\\\" type=\\\"submit\\\" ff-click=\\\"vm.home()\\\"><span translate=\\\"GLOBAL.BTN_HOME\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"user-profile\\\" id=\\\"userProfile\\\"> <h1 class=\\\"page-title flex\\\"> <span> {{state.getPageTitle()}} <span ng-if=\\\"vm.reg.member && !vm.reg.selfRegistration\\\" ng-style=\\\"{ color: vm.center.color }\\\">{{vm.center.name}}</span> </span> <need-help phone=\\\"vm.reg.phone\\\"></need-help> </h1> <ff-board> <ff-panel role=\\\"article\\\" aria-label=\\\"{{'USER_PROFILE.USER_PROFILE' | translate}}\\\"> <ff-panel-header ng-if=\\\"vm.reg\\\"> <span translate=\\\"GLOBAL.STEP_X_OF_Y\\\" translate-values=\\\"vm.reg\\\" ng-if=\\\"vm.reg.stepCount\\\"></span> <small translate=\\\"GLOBAL.REQUIRED_FIELDS_MARKED_WITH\\\"></small> </ff-panel-header> <div class=\\\"ff-grid ff-gutter-v ff-gutter-h\\\"> <up-personal-info user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\"></up-personal-info> <up-addresses flex=\\\"{md: '0 0 50%'}\\\" user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" center=\\\"vm.center\\\" single=\\\"true\\\"></up-addresses> <div flex=\\\"{md: '0 0 50%'}\\\"> <div class=\\\"ff-grid ff-gutter-v\\\"> <up-login-info user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" member-directory-url=\\\"wlLinks.memberDirectoryUrl\\\"></up-login-info> <up-phones user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\" single=\\\"true\\\"></up-phones> </div> </div> <up-photo flex=\\\"{md: '0 0 50%'}\\\" user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\"></up-photo> <div flex=\\\"{md: '0 0 50%'}\\\"> <div class=\\\"ff-grid ff-gutter-v\\\"> <up-lead-source user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\"></up-lead-source> <up-terms-of-service user=\\\"vm.userProfile\\\" schema=\\\"vm.schema\\\" reg=\\\"vm.reg\\\"></up-terms-of-service> </div> </div> </div> </ff-panel> </ff-board> <ff-btn-group class=\\\"buttons-bottom\\\" ng-if=\\\"vm.reg\\\"> <ff-btn sense=\\\"back\\\" ff-click=\\\"vm.back()\\\" ng-if=\\\"vm.back\\\"><span translate=\\\"GLOBAL.BTN_BACK\\\"></span></ff-btn> <ff-btn sense=\\\"next\\\" ff-click=\\\"vm.next()\\\"><span translate=\\\"GLOBAL.BTN_NEXT\\\"></span></ff-btn> </ff-btn-group> </div> \";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}