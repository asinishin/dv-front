{"version":3,"sources":["webpack:///./bundles/floor-plans sync .*\\.tpl\\.html$","webpack:///./bundles/floor-plans sync \\..+\\/.+\\.js$","webpack:///./bundles/floor-plans/directives/floor-plan-embedding.directive.js","webpack:///./bundles/floor-plans/directives/floor-plan-embedding.tpl.html","webpack:///./bundles/floor-plans/directives/floor-plan-point-details.directive.js","webpack:///./bundles/floor-plans/directives/floor-plan-point-details.tpl.html","webpack:///./bundles/floor-plans/directives/floor-plan-point-settings.directive.js","webpack:///./bundles/floor-plans/directives/floor-plan-point-settings.tpl.html","webpack:///./bundles/floor-plans/directives/floor-plan-settings.directive.js","webpack:///./bundles/floor-plans/directives/floor-plan-settings.tpl.html","webpack:///./bundles/floor-plans/directives/floor-plan.directive.js","webpack:///./bundles/floor-plans/directives/floor-plan.scss?ae4c","webpack:///./bundles/floor-plans/directives/floor-plan.tpl.html","webpack:///./bundles/floor-plans/directives/floor-plans.directive.js","webpack:///./bundles/floor-plans/directives/floor-plans.scss","webpack:///./bundles/floor-plans/directives/floor-plans.tpl.html","webpack:///./bundles/floor-plans/floor-plans-community/floor-plans-community.controller.js","webpack:///./bundles/floor-plans/floor-plans-community/floor-plans-community.scss","webpack:///./bundles/floor-plans/floor-plans-community/floor-plans-community.tpl.html","webpack:///./bundles/floor-plans/floor-plans-reservation/floor-plans-reservation.controller.js","webpack:///./bundles/floor-plans/floor-plans-reservation/floor-plans-reservation.tpl.html","webpack:///./bundles/floor-plans/floor-plans/floor-plans.controller.js","webpack:///./bundles/floor-plans/floor-plans/floor-plans.scss","webpack:///./bundles/floor-plans/floor-plans/floor-plans.tpl.html","webpack:///./bundles/floor-plans/index.js","webpack:///./bundles/floor-plans/services/floor-plan.service.js","webpack:///./shared/drag-n-drop/dnd.service.js","webpack:///./shared/drag-n-drop/drag-n-drop.scss?4a61","webpack:///./shared/drag-n-drop/keese.service.js","webpack:///./shared/res-bar/res-bar.component.js","webpack:///./shared/res-bar/res-bar.scss?c718","webpack:///./shared/res-bar/res-bar.tpl.html"],"names":["angular","module","directive","template","restrict","scope","controller","bindToController","floorPlan","$scope","state","helper","deskworksConfig","$ctrl","$onInit","origin","getApiOrigin","centerId","getCurrentCenterId","getCode","_","join","all","id","dwModal","name","point","pricingEnabled","areaEnabled","view","areaUnit","window","dwLocales","i","currentLocale","area","more","show","templateUrl","inputs","member","$$unit","$$user","plan","categories","units","save","deletePoint","points","indexOf","filterCategory","cat","$$hasUnits","$$category","filterUnit","unit","reservationTypeId","$$hasPoint","upload","dnd","floorPlanPointDetailsDirective","floorPlanPointSettingsDirective","transclude","hoverTip","focusContent","noFocusContent","isAvailable","$element","$window","dwAlerts","onPointClick","event","stopPropagation","onPlanClick","ffBlock","editMode","img","querySelector","x","round","offsetX","offsetWidth","y","offsetY","offsetHeight","push","dropPoint","list","index","selectorExtra","planSettings","bottomExtra","plans","FloorPlan","$onChanges","addPlan","new","floorPlansDirective","ReservationUnit","$translate","$filter","$q","$timeout","session","reservationCategoryService","OurMembers","setPageTitle","instant","onInit","fetch","then","results","reservationCategories","reservationUnits","members","pick","result","attachedUserId","m","forEach","u","reservationUnitId","c","availableFullTime","fetchPlans","query","catch","err","error","promises","limit","resBar","calendarService","reduce","listUnit","reservation","reservations","r","from","isSameOrBefore","moment","to","isSameOrAfter","userId","whoCanReserve","availabilities","length","isReservable","isAdmin","reserve","setParam","setPath","getPath","floorPlanDirective","floorPlanSettingsDirective","floorPlanEmbeddingDirective","autoSave","$watchCollection","p","$watch","wrap","pointFirstInvalid","deletePlan","confirm","delete","when","uploadPlanImage","$files","$invalidFiles","$$spinUpload","uploadImage","finally","thumbnail","data","Date","now","image","$injector","importAll","js","require","loadNewModules","default","wizardReservation","invoke","$templateCache","ctx","key","put","replace","factory","$resource","Upload","res","getApiAbsUrl","update","method","enabled","$promise","file","url","withCredentials","keese","move","srcList","srcIndex","targetList","targetIndex","item","order","generate","alphabet","radix","order_specifier","values","low","high","count","multi_keese","single_keese","average","increment","Array","value","recurse","low_value","high_value","low_index","high_index","mid_index","Math","floor","mid_value","n","parse","digits","substr","order_length","add","Error","a","b","pad_to_equal_order","b_carry","max_digit_length","max","a_value","b_value","half_distance_value","half_distance_digits","j","half_distance","construct","result_digits","lastIndexOf","charAt","pad_in_place","component","bindings","ranges","period","range","resRange","subtract","end","start","limitMin","calcAvailabilities","av","x1","dateToX","x2","date"],"mappings":"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","file":"floor-plans~._b.js?_rev=7ad9efbe4251eb6135a8","sourcesContent":["var map = {\n\t\"./directives/floor-plan-embedding.tpl.html\": \"./bundles/floor-plans/directives/floor-plan-embedding.tpl.html\",\n\t\"./directives/floor-plan-point-details.tpl.html\": \"./bundles/floor-plans/directives/floor-plan-point-details.tpl.html\",\n\t\"./directives/floor-plan-point-settings.tpl.html\": \"./bundles/floor-plans/directives/floor-plan-point-settings.tpl.html\",\n\t\"./directives/floor-plan-settings.tpl.html\": \"./bundles/floor-plans/directives/floor-plan-settings.tpl.html\",\n\t\"./directives/floor-plan.tpl.html\": \"./bundles/floor-plans/directives/floor-plan.tpl.html\",\n\t\"./directives/floor-plans.tpl.html\": \"./bundles/floor-plans/directives/floor-plans.tpl.html\",\n\t\"./floor-plans-community/floor-plans-community.tpl.html\": \"./bundles/floor-plans/floor-plans-community/floor-plans-community.tpl.html\",\n\t\"./floor-plans-reservation/floor-plans-reservation.tpl.html\": \"./bundles/floor-plans/floor-plans-reservation/floor-plans-reservation.tpl.html\",\n\t\"./floor-plans/floor-plans.tpl.html\": \"./bundles/floor-plans/floor-plans/floor-plans.tpl.html\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/floor-plans sync recursive .*\\\\.tpl\\\\.html$\";","var map = {\n\t\"./directives/floor-plan-embedding.directive.js\": \"./bundles/floor-plans/directives/floor-plan-embedding.directive.js\",\n\t\"./directives/floor-plan-point-details.directive.js\": \"./bundles/floor-plans/directives/floor-plan-point-details.directive.js\",\n\t\"./directives/floor-plan-point-settings.directive.js\": \"./bundles/floor-plans/directives/floor-plan-point-settings.directive.js\",\n\t\"./directives/floor-plan-settings.directive.js\": \"./bundles/floor-plans/directives/floor-plan-settings.directive.js\",\n\t\"./directives/floor-plan.directive.js\": \"./bundles/floor-plans/directives/floor-plan.directive.js\",\n\t\"./directives/floor-plans.directive.js\": \"./bundles/floor-plans/directives/floor-plans.directive.js\",\n\t\"./floor-plans-community/floor-plans-community.controller.js\": \"./bundles/floor-plans/floor-plans-community/floor-plans-community.controller.js\",\n\t\"./floor-plans-reservation/floor-plans-reservation.controller.js\": \"./bundles/floor-plans/floor-plans-reservation/floor-plans-reservation.controller.js\",\n\t\"./floor-plans/floor-plans.controller.js\": \"./bundles/floor-plans/floor-plans/floor-plans.controller.js\",\n\t\"./services/floor-plan.service.js\": \"./bundles/floor-plans/services/floor-plan.service.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./bundles/floor-plans sync recursive \\\\..+\\\\/.+\\\\.js$\";","import template from  './floor-plan-embedding.tpl.html';\n\nexport default angular.module('deskworks.floorPlanEmbeddingDirective', [\n  'deskworks.config',\n])\n\n  .directive('floorPlanEmbedding', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'FloorPlanEmbeddingDirectiveCtrl as $ctrl',\n      bindToController: {\n        floorPlan: '<',\n      },\n    };\n  })\n\n  .controller('FloorPlanEmbeddingDirectiveCtrl', function($scope, state, helper, deskworksConfig) {\n    const $ctrl = this;\n\n    $ctrl.$onInit = () => {\n      const origin = deskworksConfig.getApiOrigin();\n      const centerId = state.getCurrentCenterId();\n\n      $ctrl.getCode = _ => helper.join([\n        '<script dw-floor-plans',\n        `dw-center-id=\"${centerId}\"`,\n        $ctrl.all ? null : `dw-floor-plan-id=\"${$ctrl.floorPlan.id}\"`,\n        `dw-origin=\"${origin}\"`,\n        `src=\"${origin}/floor-plans.js\"`,\n        'class=\"dw-spin\"></script>',\n      ], ' ');\n    };\n  });\n","// Module\nvar code = \"<ff-panel> <ff-panel-header><span translate=\\\"FLOOR_PLANS.EMBEDDING.HEADER\\\"></span></ff-panel-header> <ff-static> <label><ff-checkbox ff-model=\\\"$ctrl.all\\\"><span translate=\\\"FLOOR_PLANS.EMBEDDING.ALL\\\"></span></ff-checkbox></label> &nbsp; <ff-hint><span translate=\\\"FLOOR_PLANS.EMBEDDING.ALL.HINT\\\"></span></ff-hint> </ff-static> <ff-static><span translate=\\\"FLOOR_PLANS.EMBEDDING.HINT\\\"></span></ff-static> <ff-static ff-style=\\\"{'white-space': 'pre-wrap', 'font-family': 'monospace', 'font-size': '.85em', 'line-height': '1.25'}\\\">{{$ctrl.getCode()}}</ff-static> </ff-panel> \";\n// Exports\nmodule.exports = code;","import template from  './floor-plan-point-details.tpl.html';\nimport dwModal from 'shared/dw-modal/dw-modal.service';\n\nexport default angular.module('deskworks.floorPlanPointDetailsDirective', [\n  dwModal.name,\n])\n\n  .directive('floorPlanPointDetails', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'FloorPlanPointDetailsDirectiveCtrl as $ctrl',\n      bindToController: {\n        point: '<',\n        pricingEnabled: '<',\n        areaEnabled: '<',\n        view: '<',\n      },\n    };\n  })\n\n  .controller('FloorPlanPointDetailsDirectiveCtrl', function($scope, dwModal) {\n    const $ctrl = this;\n\n    $ctrl.areaUnit = (window.dwLocales.find(i => i.id === $scope.currentLocale) || {}).area || 'ft²';\n\n    /**\n     * View member details\n     */\n    $ctrl.more = function() {\n      dwModal.show({\n        scope: $scope,\n        templateUrl: 'members/our-members/our-member-modal.tpl.html',\n        controller: 'OurMemberModalCtrl',\n        inputs: { member: $ctrl.point.$$unit.$$user },\n      });\n    };\n  });\n","// Module\nvar code = \"<ff-panel> <div ng-if=\\\"$ctrl.view === 'public'\\\"> <ff-header>{{$ctrl.point.$$unit.name}}</ff-header> <ff-img class=\\\"fp-unit-photo\\\" ng-if=\\\"$ctrl.point.$$unit.photo\\\" ff-alt=\\\"{{$ctrl.point.$$unit.name}}\\\" ff-src=\\\"{{$ctrl.point.$$unit.thumbnail}}\\\" ff-src-hq=\\\"{{$ctrl.point.$$unit.photo}}\\\"></ff-img> <ff-static class=\\\"fp-descr\\\" ng-if=\\\"$ctrl.point.$$unit.description\\\">{{$ctrl.point.$$unit.description}}</ff-static> <ff-row ng-if=\\\"$ctrl.point.$$unit.capacity\\\"> <ff-static><span translate=\\\"GLOBAL.UNIT_CAPACITY\\\" translate-values=\\\"{ capacity: $ctrl.point.$$unit.capacity }\\\"></span></ff-static> </ff-row> <ff-row> <ff-label flex=\\\"0 0 52px\\\"><span translate=\\\"FLOOR_PLANS.POINT.STATUS\\\"></span></ff-label> <ff-static> <span translate=\\\"{{'FLOOR_PLANS.POINT.STATUS.' + ($ctrl.point.$$unit.availableFullTime ? 'AVAILABLE' : 'NOT_AVAILABLE')}}\\\"></span> </ff-static> </ff-row> <ff-row ng-if=\\\"$ctrl.pricingEnabled && $ctrl.point.$$unit.fullTimePrice\\\"> <ff-label flex=\\\"0 0 52px\\\"><span translate=\\\"FLOOR_PLANS.POINT.PRICE\\\"></span></ff-label> <ff-static>{{$ctrl.point.$$unit.fullTimePrice | ncurrency}}</ff-static> </ff-row> <ff-row ng-if=\\\"$ctrl.areaEnabled && $ctrl.point.$$unit.area\\\"> <ff-label flex=\\\"0 0 52px\\\"><span translate=\\\"FLOOR_PLANS.POINT.AREA\\\"></span></ff-label> <ff-static>{{$ctrl.point.$$unit.area}} {{$ctrl.areaUnit}}</ff-static> </ff-row> </div> <div ng-if=\\\"$ctrl.view === 'community'\\\"> <ff-header>{{$ctrl.point.$$unit.name}}</ff-header> <div> <ff-row> <ff-label flex=\\\"0 1 80px\\\"><span translate=\\\"FLOOR_PLANS.POINT.STATUS\\\"></span></ff-label> <ff-static> <span translate=\\\"{{'FLOOR_PLANS.POINT.STATUS.' + ($ctrl.point.$$unit.availableFullTime ? 'AVAILABLE' : 'NOT_AVAILABLE')}}\\\"></span> </ff-static> </ff-row> <ff-row ng-if=\\\"$ctrl.point.$$unit.attachedUserName && !$ctrl.point.$$unit.$$user\\\"> <ff-label flex=\\\"0 1 80px\\\"><span translate=\\\"FLOOR_PLANS.POINT.MEMBER\\\"></span></ff-label> <ff-static>{{$ctrl.point.$$unit.attachedUserName}}</ff-static> </ff-row> <ff-row ng-if=\\\"$ctrl.point.$$unit.$$user\\\"> <ff-static> <ff-img flex=\\\"0 0 60px\\\" class=\\\"fp-avatar\\\" ff-src=\\\"{{$ctrl.point.$$unit.$$user.photo}}\\\" ng-if=\\\"$ctrl.point.$$unit.$$user.photo\\\" ff-alt=\\\"{{$ctrl.point.$$unit.$$user.name}}\\\"></ff-img> <ff-col style=\\\"margin-right:.5rem;padding:.5rem 0\\\"> <span class=\\\"fp-user-name\\\">{{$ctrl.point.$$unit.$$user.name}}</span> <span class=\\\"fp-user-company\\\">{{$ctrl.point.$$unit.$$user.company}}</span> </ff-col> <ff-btn flex=\\\"none\\\" sense=\\\"userSelect\\\" size=\\\"sm\\\" class=\\\"fp-btn-more\\\" ff-click=\\\"$ctrl.more()\\\"> <span translate=\\\"FLOOR_PLANS.POINT.BTN_MORE\\\"></span> </ff-btn> </ff-static> </ff-row> <ff-row ng-if=\\\"$ctrl.point.$$unit.fullTimeProductId && ffBlock.editMode\\\"> <ff-label flex=\\\"0 1 80px\\\"><span translate=\\\"FLOOR_PLANS.POINT.PRODUCT\\\"></span></ff-label> <ff-static>{{$ctrl.point.$$unit.fullTimeProductName}}</ff-static> </ff-row> <ff-row ng-if=\\\"$ctrl.point.$$unit.fullTimeProductId && ffBlock.editMode\\\"> <ff-label flex=\\\"0 1 80px\\\"><span translate=\\\"FLOOR_PLANS.POINT.PRICE\\\"></span></ff-label> <ff-static>{{$ctrl.point.$$unit.fullTimePrice | ncurrency}}</ff-static> </ff-row> <ff-row ng-if=\\\"$ctrl.point.$$unit.fullTimeProductId && ffBlock.editMode\\\"> <ff-label flex=\\\"0 1 80px\\\"><span translate=\\\"FLOOR_PLANS.POINT.NET\\\"></span></ff-label> <ff-static>{{$ctrl.point.$$unit.fullTimeNet | ncurrency}}</ff-static> </ff-row> <ff-row ng-if=\\\"$ctrl.point.$$unit.fullTimeProductId && ffBlock.editMode\\\"> <ff-label flex=\\\"0 1 80px\\\"><span translate=\\\"FLOOR_PLANS.POINT.DISCOUNT\\\"></span></ff-label> <ff-static>{{$ctrl.point.$$unit.fullTimeDiscount | ncurrency}}</ff-static> </ff-row> </div> </div> </ff-panel> \";\n// Exports\nmodule.exports = code;","import template from  './floor-plan-point-settings.tpl.html';\n\nexport default angular.module('deskworks.floorPlanPointSettingsDirective', [])\n\n  .directive('floorPlanPointSettings', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'FloorPlanPointSettingsDirectiveCtrl as $ctrl',\n      bindToController: {\n        plan: '<',\n        point: '=',\n        categories: '<',\n        units: '<',\n        save: '&',\n      },\n    };\n  })\n\n  .controller('FloorPlanPointSettingsDirectiveCtrl', function($scope) {\n    const $ctrl = this;\n\n    /**\n     * Delete point\n     */\n    $ctrl.deletePoint = () => {\n      if (!$ctrl.point) return;\n      $ctrl.plan.points.splice($ctrl.plan.points.indexOf($ctrl.point), 1);\n      $ctrl.point = null;\n      return $ctrl.save($ctrl.plan);\n    };\n\n\n    /**\n     * Callbacks for angular filter\n     */\n    $ctrl.filterCategory = (cat) => cat.$$hasUnits || $ctrl.point && cat === $ctrl.point.$$category;\n    $ctrl.filterUnit = (unit) => (unit.reservationTypeId === ($ctrl.point && $ctrl.point.$$category && $ctrl.point.$$category.id)) && (!unit.$$hasPoint || $ctrl.point.$$unit === unit);\n  });\n","// Module\nvar code = \"<ff-panel> <div class=\\\"ff-col\\\"> <div> <ff-header><span translate=\\\"FLOOR_PLANS.POINT.HEADER\\\"></span></ff-header> <ff-select name=\\\"reservationCategory\\\" ff-model=\\\"$ctrl.point.$$category\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'FLOOR_PLANS.CATEGORY' | translate}}\\\" ff-options=\\\"opt.name for opt in $ctrl.categories | filter: $ctrl.filterCategory\\\"></ff-select> <ff-select name=\\\"reservationUnit\\\" ff-model=\\\"$ctrl.point.$$unit\\\" ff-change=\\\"$ctrl.save()\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'FLOOR_PLANS.UNIT' | translate}}\\\" ff-options=\\\"opt.name for opt in $ctrl.units | filter: $ctrl.filterUnit\\\"></ff-select> </div> <ff-static ng-if=\\\"!$ctrl.point.$$category || !$ctrl.point.$$unit\\\" class=\\\"ff-no-frame\\\"> <span ng-if=\\\"!$ctrl.point.$$category\\\"><ff-icon sense=\\\"info\\\"></ff-icon> <span translate=\\\"FLOOR_PLANS.CATEGORY.HINT\\\"></span></span> <span ng-if=\\\"$ctrl.point.$$category && !$ctrl.point.$$unit\\\"><ff-icon sense=\\\"info\\\"></ff-icon> <span translate=\\\"FLOOR_PLANS.UNIT.HINT\\\"></span></span> </ff-static> <ff-btn-group style=\\\"margin-top:.5rem\\\"> <ff-btn sense=\\\"delete\\\" size=\\\"sm\\\" ff-click=\\\"$ctrl.deletePoint()\\\"><span translate=\\\"FLOOR_PLANS.POINT.BTN_DELETE\\\"></span></ff-btn> </ff-btn-group> </div> </ff-panel> \";\n// Exports\nmodule.exports = code;","import template from  './floor-plan-settings.tpl.html';\n\nexport default angular.module('deskworks.floorPlanSettingsDirective', [\n])\n\n  .directive('floorPlanSettings', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'FloorPlanSettingsDirectiveCtrl as $ctrl',\n      bindToController: {\n        plan: '<',\n        upload: '<',\n        save: '&',\n      },\n    };\n  })\n\n  .controller('FloorPlanSettingsDirectiveCtrl', function($scope) {\n    // const $ctrl = this;\n  });\n","// Module\nvar code = \"<ff-panel ngf-drop=\\\"$ctrl.upload($ctrl.plan, $files, $invalidFiles)\\\" ngf-pattern=\\\"'image/png,image/jpeg'\\\" ngf-drag-over-class=\\\"dragover\\\"> <ff-panel-header> <span translate=\\\"FLOOR_PLANS.SETTINGS.HEADER\\\"></span> <ff-hint><span translate=\\\"FLOOR_PLANS.IMAGE.HINT\\\"></span></ff-hint> </ff-panel-header> <ff-spin ng-if=\\\"$ctrl.plan.$$autoSaving\\\"></ff-spin> <div class=\\\"ff-grid\\\" style=\\\"justify-content:flex-start\\\"> <label class=\\\"ff-row\\\" flex=\\\"0 1 240px\\\"> <ff-label flex=\\\"0 1 60px\\\"><req translate=\\\"FLOOR_PLANS.NAME\\\"></req></ff-label> <ff-text name=\\\"floorPlanName\\\" ff-model=\\\"$ctrl.plan.name\\\" ff-change=\\\"$ctrl.save()\\\" ff-required=\\\"true\\\" ff-validate-alert=\\\"{{'FLOOR_PLANS.NAME' | translate}}\\\"></ff-text> </label> <ff-static class=\\\"ff-no-frame\\\" flex=\\\"auto\\\"> <div class=\\\"ff-grid gutter-h-half\\\"> <label flex=\\\"none\\\"> <ff-checkbox name=\\\"enabled\\\" ff-model=\\\"$ctrl.plan.enabled\\\" ff-change=\\\"$ctrl.save()\\\"> <span translate=\\\"FLOOR_PLANS.ENABLED\\\"></span> </ff-checkbox> </label> <label flex=\\\"none\\\"> <ff-checkbox name=\\\"pricingEnabled\\\" ff-model=\\\"$ctrl.plan.pricingEnabled\\\" ff-change=\\\"$ctrl.save()\\\"> <span translate=\\\"FLOOR_PLANS.PRICING_VISIBLE\\\"></span> </ff-checkbox> </label> <label flex=\\\"none\\\"> <ff-checkbox name=\\\"areaEnabled\\\" ff-model=\\\"$ctrl.plan.areaEnabled\\\" ff-change=\\\"$ctrl.save()\\\"> <span translate=\\\"FLOOR_PLANS.AREA_VISIBLE\\\"></span> </ff-checkbox> </label> </div> </ff-static> </div> <ff-btn-group style=\\\"margin-top:.5rem\\\"> <ff-btn sense=\\\"upload\\\" size=\\\"sm\\\" ff-spin=\\\"$ctrl.plan.$$spinUpload\\\" ngf-select=\\\"$ctrl.upload($ctrl.plan, $files, $invalidFiles)\\\" ngf-pattern=\\\"'image/png,image/jpeg'\\\" accept=\\\"image/png,image/jpeg\\\"> <span translate=\\\"FLOOR_PLANS.IMAGE.BTN_UPLOAD\\\"></span> </ff-btn> <ff-btn sense=\\\"delete\\\" size=\\\"sm\\\" ff-click=\\\"$ctrl.delete()\\\"><span translate=\\\"FLOOR_PLANS.BTN_DELETE\\\"></span></ff-btn> </ff-btn-group> </ff-panel> \";\n// Exports\nmodule.exports = code;","import './floor-plan.scss';\nimport template from  './floor-plan.tpl.html';\nimport floorPlanPointDetailsDirective from \"./floor-plan-point-details.directive\";\nimport floorPlanPointSettingsDirective from \"./floor-plan-point-settings.directive\";\nimport dnd from 'shared/drag-n-drop/dnd.service';\n\nexport default angular.module('deskworks.floorPlanDirective', [\n  dnd.name,\n  floorPlanPointDetailsDirective.name,\n  floorPlanPointSettingsDirective.name,\n])\n\n  .directive('floorPlan', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'FloorPlanDirectiveCtrl as $ctrl',\n      transclude: {\n        hoverTip: '?hoverTip',\n        focusContent: '?focusContent',\n        noFocusContent: '?noFocusContent',\n      },\n      bindToController: {\n        plan: '<',\n        point: '=?',\n        save: '&',\n        isAvailable: '<?',\n      },\n    };\n  })\n\n  .controller('FloorPlanDirectiveCtrl', function($element, $scope, $window, state, dwAlerts, helper) {\n    const $ctrl = this;\n\n    $ctrl.$onInit = () => {\n    };\n\n    /**\n     * Click point\n     */\n    $ctrl.onPointClick = (point, event) => {\n      $ctrl.point = point;\n      if (event) event.stopPropagation();\n    };\n\n    /**\n     * Click floor plan\n     */\n    $ctrl.onPlanClick = (event) => {\n      if (!$scope.ffBlock.editMode) { return; }\n      const img = $element[0].querySelector('.fp-image');\n      const point = {\n        x: helper.round(event.offsetX * 100 / img.offsetWidth),\n        y: helper.round(event.offsetY * 100 / img.offsetHeight),\n      };\n      $ctrl.plan.points.push(point);\n      $ctrl.onPointClick(point);\n    };\n\n    /**\n     * Drop point after dragging\n     */\n    $ctrl.dropPoint = (list, index, event) => {\n      if (!$scope.ffBlock.editMode) { return; }\n      const point = list[index];\n\n      const img = $element[0].querySelector('.fp-image');\n      point.x = helper.round(event.offsetX * 100 / img.offsetWidth);\n      point.y = helper.round(event.offsetY * 100 / img.offsetHeight);\n\n      $ctrl.save($ctrl.plan);\n\n      return true;\n    };\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div class=\\\"ff-grid gutter-v-half gutter-h-half fp-grid\\\"> <ff-panel flex=\\\"0 1 auto\\\" class=\\\"ff-flex-start\\\" style=\\\"z-index:1\\\" ngf-drop=\\\"$ctrl.upload($ctrl.plan, $files, $invalidFiles)\\\" ngf-pattern=\\\"'image/png,image/jpeg'\\\" ngf-drag-over-class=\\\"dragover\\\"> <div class=\\\"ff-relative\\\" flex=\\\"none\\\" ng-click=\\\"$ctrl.onPlanClick($event)\\\" ff-dim=\\\"!$ctrl.plan.$$imageLoaded\\\"> <ff-img ff-src=\\\"{{$ctrl.plan.image}}\\\" ff-img-loaded=\\\"$ctrl.plan.$$imageLoaded\\\" class=\\\"fp-image\\\" ff-alt=\\\"Floor Plan\\\"></ff-img> <div class=\\\"fp-points\\\" dnd-list dnd-drop=\\\"callback({ list: $ctrl.plan.points, targetIndex: index, event: event })\\\"> <div ng-repeat=\\\"point in $ctrl.plan.points\\\" dnd-draggable=\\\"null\\\" dnd-callback=\\\"$ctrl.dropPoint(list, $index, event)\\\" ng-click=\\\"$ctrl.onPointClick(point, $event)\\\" class=\\\"fp-point ff-tip-trigger\\\" ng-class=\\\"{ available: $ctrl.isAvailable(point.$$unit), selected: $ctrl.point === point, invalid: !point.$$unit }\\\" ng-style=\\\"{ top: point.y + '%', left: point.x + '%' }\\\"> <ng-transclude ng-transclude-slot=\\\"hoverTip\\\"></ng-transclude> </div> </div> </div> </ff-panel> <div flex=\\\"{md: '0 1 352px'}\\\" ng-if=\\\"$ctrl.point\\\"> <div ng-transclude=\\\"focusContent\\\"></div> </div> <div flex=\\\"{md: '0 1 352px'}\\\" ng-if=\\\"!$ctrl.point\\\" class=\\\"ff-flex-start\\\"> <div ng-transclude=\\\"noFocusContent\\\"></div> </div> </div> \";\n// Exports\nmodule.exports = code;","import './floor-plans.scss';\nimport template from  './floor-plans.tpl.html';\n\nexport default angular.module('deskworks.floorPlansDirective', [\n])\n\n  .directive('floorPlans', function() {\n    return {\n      template,\n      restrict: 'E',\n      scope: true,\n      controller: 'FloorPlansDirectiveCtrl as $ctrl',\n      transclude: {\n        hoverTip: '?hoverTip',\n        focusContent: '?focusContent',\n        noFocusContent: '?noFocusContent',\n        selectorExtra: '?selectorExtra',\n        planSettings: '?planSettings',\n        bottomExtra: '?bottomExtra',\n      },\n      bindToController: {\n        plans: '<',\n        plan: '=?',\n        point: '=?',\n        save: '&',\n        isAvailable: '<?',\n      },\n    };\n  })\n\n  .controller('FloorPlansDirectiveCtrl', function($scope, FloorPlan) {\n    const $ctrl = this;\n\n    $ctrl.$onInit = () => {\n    };\n\n    $ctrl.$onChanges = () => {\n      if ($ctrl.plans && !$ctrl.plan) {\n        $ctrl.plan = $ctrl.plans[0];\n      }\n    };\n\n    /**\n     * New plan\n     */\n    $ctrl.addPlan = () => {\n      $ctrl.plan = FloorPlan.new();\n      $ctrl.plans.push($ctrl.plan);\n    };\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div class=\\\"floor-plans\\\"> <h1 class=\\\"page-title\\\">{{state.getPageTitle()}}</h1> <div class=\\\"ff-grid gutter-v-half gutter-h-half\\\"> <ff-panel flex=\\\"{md: '0 0 40%'}\\\" class=\\\"ff-flex-start\\\"> <ff-panel-header><span translate=\\\"FLOOR_PLANS.SELECT_A_PLAN\\\"></span></ff-panel-header> <ff-row ff-dim=\\\"!$ctrl.plans\\\"> <ff-select name=\\\"floorPlan\\\" ff-model=\\\"$ctrl.plan\\\" class=\\\"ff-read-only-ignore\\\" ff-options=\\\"p.name || '-' for p in $ctrl.plans\\\"></ff-select> <ff-btn-group class=\\\"buttons-row\\\" flex=\\\"none\\\"> <ff-btn sense=\\\"add\\\" size=\\\"xs\\\" ff-click=\\\"$ctrl.addPlan()\\\"></ff-btn> </ff-btn-group> </ff-row> <ng-transclude ng-transclude-slot=\\\"selectorExtra\\\" class=\\\"hide-empty\\\"></ng-transclude> </ff-panel> <ng-transclude ng-transclude-slot=\\\"planSettings\\\" flex=\\\"{md: '0 0 60%'}\\\" class=\\\"hide-empty\\\"></ng-transclude> <floor-plan ng-if=\\\"$ctrl.plan.image\\\" class=\\\"animate-collapse\\\" plan=\\\"$ctrl.plan\\\" save=\\\"$ctrl.save()\\\" point=\\\"$ctrl.point\\\" is-available=\\\"$ctrl.isAvailable\\\"> <hover-tip> <ng-transclude ng-transclude-slot=\\\"hoverTip\\\"></ng-transclude> </hover-tip> <focus-content> <ng-transclude ng-transclude-slot=\\\"focusContent\\\"></ng-transclude> </focus-content> <no-focus-content> <ng-transclude ng-transclude-slot=\\\"noFocusContent\\\"></ng-transclude> </no-focus-content> </floor-plan> <ng-transclude ng-transclude-slot=\\\"bottomExtra\\\" class=\\\"hide-empty\\\"></ng-transclude> </div> </div> \";\n// Exports\nmodule.exports = code;","import './floor-plans-community.scss';\nimport FloorPlan from '../services/floor-plan.service';\nimport floorPlansDirective from '../directives/floor-plans.directive';\nimport ReservationUnit from 'shared/services/inventory/reservation-unit.service';\nimport dwModal from 'shared/dw-modal/dw-modal.service';\n\nexport default angular.module('deskworks.FloorPlansCommunityCtrl', [\n  'deskworks.reservationCategory.service',\n  FloorPlan.name,\n  floorPlansDirective.name,\n  ReservationUnit.name,\n  dwModal.name,\n])\n\n  .controller('FloorPlansCommunityCtrl', function($scope, $translate, $filter, $q, $window, $timeout,\n                                                  dwModal, session, dwAlerts, state, helper,\n                                                  FloorPlan, ReservationUnit, reservationCategoryService, OurMembers) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('FLOOR_PLANS.PAGE_TITLE'));\n\n    /**\n     * On Init\n     */\n    $ctrl.onInit = () => {\n      $timeout(() => {\n        $ctrl.fetch()\n          .then(results => {\n            const { plans, reservationCategories, reservationUnits, members } = results;\n\n            $ctrl.categories = reservationCategories.map(cat => helper.pick(cat, ['id', 'name']));\n\n            $ctrl.units = reservationUnits.map(unit => {\n              const result = helper.pick(unit, ['id', 'name', 'description', 'area', 'capacity', 'thumbnail', 'photo',\n                'attachedUserId', 'attachedUserName', 'availableFullTime',\n                'fullTimeProductId', 'fullTimeProductName', 'fullTimePrice', 'fullTimeNet', 'fullTimeDiscount',\n                'reservationTypeId']);\n              if (result.attachedUserId) result.$$user = members.find(m => m.id === result.attachedUserId);\n              return result;\n            });\n\n            $ctrl.plan = $ctrl.plans[0];\n            $ctrl.plans.forEach(plan => {\n              plan.points.forEach(point => {\n                point.$$unit = $ctrl.units.find(u => u.id === point.reservationUnitId);\n                point.$$category = point.$$unit && $ctrl.categories.find(c => c.id === point.$$unit.reservationTypeId);\n              });\n              plan.points = plan.points.filter(point => !!point.$$unit);\n            });\n          });\n      });\n    };\n\n    $ctrl.isAvailable = unit => {\n      return !!unit && unit.availableFullTime;\n    };\n\n    $ctrl.more = function(point) {\n      dwModal.show({\n        scope: $scope,\n        templateUrl: 'members/our-members/our-member-modal.tpl.html',\n        controller: 'OurMemberModalCtrl',\n        inputs: { member: point.$$unit.$$user },\n      });\n    };\n\n    $ctrl.fetchPlans = () => FloorPlan.query(state.getCurrentCenterId())\n      .catch(err => dwAlerts.error(err, 'Failed to query floor plans.'))\n      .then(plans => {\n        $ctrl.plans = plans;\n      });\n\n    /**\n     * Fetch data\n     */\n    $ctrl.fetch = () => {\n      const promises = {};\n\n      promises.plans = $ctrl.fetchPlans();\n\n      promises.reservationCategories = reservationCategoryService.query(state.getCurrentCenterId())\n        .catch(err => dwAlerts.error(err, 'Failed to query reservation categories.'));\n\n      promises.reservationUnits = ReservationUnit.query(state.getCurrentCenterId())\n        .catch(err => dwAlerts.error(err, 'Failed to query reservation units.'));\n\n      promises.members = OurMembers.query({ centerId: state.getCurrentCenterId(), limit: 10000 })\n        .catch(err => dwAlerts.error(err, 'Failed to query our members.'));\n\n      return $q.all(promises);\n    };\n\n    $ctrl.onInit();\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<floor-plans plans=\\\"$ctrl.plans\\\" plan=\\\"$ctrl.plan\\\" point=\\\"$ctrl.point\\\" is-available=\\\"$ctrl.isAvailable\\\" ff-bulk-read-only=\\\"true\\\"> <hover-tip ng-init=\\\"point = $parent.$parent.point\\\"> <ff-tip ng-if=\\\"point.$$unit\\\" tip-type=\\\"white\\\"> <ff-header>{{point.$$unit.name}}</ff-header> <ff-row> <ff-label flex=\\\"0 1 60px\\\"><span translate=\\\"FLOOR_PLANS.POINT.STATUS\\\"></span></ff-label> <ff-static><span translate=\\\"{{'FLOOR_PLANS.POINT.STATUS.' + (point.$$unit.availableFullTime ? 'AVAILABLE' : 'NOT_AVAILABLE')}}\\\"></span></ff-static> </ff-row> <ff-row ng-if=\\\"point.$$unit.attachedUserName && !point.$$unit.$$user\\\"> <ff-label flex=\\\"0 1 60px\\\"><span translate=\\\"FLOOR_PLANS.POINT.MEMBER\\\"></span></ff-label> <ff-static>{{point.$$unit.attachedUserName}}</ff-static> </ff-row> <ff-static ng-if=\\\"point.$$unit.$$user\\\" class=\\\"ff-no-frame\\\"> <ff-img flex=\\\"0 0 60px\\\" class=\\\"fp-avatar\\\" ff-src=\\\"{{point.$$unit.$$user.photo}}\\\" ng-if=\\\"point.$$unit.$$user.photo\\\" ff-alt=\\\"{{point.$$unit.$$user.name}}\\\"></ff-img> <ff-col flex=\\\"auto\\\"> <ff-col flex=\\\"auto\\\" class=\\\"fp-user-container\\\"> <div class=\\\"fp-user-name\\\">{{point.$$unit.$$user.name}}</div> <div class=\\\"fp-user-company\\\">{{point.$$unit.$$user.company}}</div> </ff-col> <ff-btn flex=\\\"none\\\" sense=\\\"userSelect\\\" size=\\\"sm\\\" class=\\\"fp-btn-more\\\" ff-click=\\\"$ctrl.more(point)\\\"> <span translate=\\\"FLOOR_PLANS.POINT.BTN_MORE\\\"></span> </ff-btn> </ff-col> </ff-static> </ff-tip> </hover-tip> </floor-plans> \";\n// Exports\nmodule.exports = code;","import FloorPlan from '../services/floor-plan.service';\nimport floorPlansDirective from '../directives/floor-plans.directive';\nimport ReservationUnit from 'shared/services/inventory/reservation-unit.service';\nimport resBar from 'shared/res-bar/res-bar.component';\n\nexport default angular.module('deskworks.FloorPlansReservationCtrl', [\n  'deskworks.reservationCategory.service',\n  'deskworks.calendarService',\n  FloorPlan.name,\n  floorPlansDirective.name,\n  ReservationUnit.name,\n  resBar.name,\n])\n\n  .controller('FloorPlansReservationCtrl', function($scope, $translate, $filter, $q, $window, $timeout,\n                                                    session, dwAlerts, state, helper,\n                                                    FloorPlan, ReservationUnit, calendarService, OurMembers) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('FLOOR_PLANS.PAGE_TITLE'));\n\n    /**\n     * On Init\n     */\n    $ctrl.onInit = () => {\n      $timeout(() => {\n        $ctrl.fetch()\n          .then(results => {\n            const { plans, categories, units, members } = results;\n\n            $ctrl.categories = categories.map(cat => helper.pick(cat, ['id', 'name']));\n\n            categories.forEach(cat => { cat.reservationUnits.forEach(unit => { unit.reservationTypeId = cat.id; }); });\n\n            $ctrl.units = categories.reduce((units, cat) => units.concat(cat.reservationUnits), [])\n              .map(unit => {\n                const listUnit = units.find(u => u.id === unit.id) || {};\n                const result = helper.pick({ ...listUnit, ...unit }, ['id', 'name', 'description', 'area', 'capacity',\n                  'thumbnail', 'photo', 'whoCanReserve', 'reservations', 'availabilities',\n                  'attachedUserId', 'attachedUserName', 'availableFullTime', 'reservationTypeId']);\n                const reservation = unit.reservations.find(r => r.from.isSameOrBefore(moment()) && r.to.isSameOrAfter(moment())) || {};\n                if (result.attachedUserId || reservation.userId) {\n                  result.$$user = members.find(m => m.id === (result.attachedUserId || reservation.userId));\n                }\n                return result;\n              });\n\n            // $ctrl.floorPlans = floorPlans;\n            $ctrl.plan = $ctrl.plans[0];\n            $ctrl.plans.forEach(plan => {\n              plan.points.forEach(point => {\n                point.$$unit = $ctrl.units.find(u => u.id === point.reservationUnitId);\n                point.$$category = point.$$unit && $ctrl.categories.find(c => c.id === point.$$unit.reservationTypeId);\n              });\n              plan.points = plan.points.filter(point => !!point.$$unit);\n            });\n          });\n      });\n    };\n\n    $ctrl.isAvailable = unit => {\n      return !!unit && unit.whoCanReserve !== 'notAvailable' && unit.whoCanReserve !== 'staffOnly' && unit.availabilities.length > 0;\n    };\n\n    $ctrl.isReservable = unit => {\n      return session.isAdmin() || !!unit && unit.whoCanReserve !== 'notAvailable' && unit.availabilities.length > 0;\n    };\n\n    $ctrl.reserve = () => {\n      state.setParam('unit', $ctrl.point.$$unit.id);\n      return state.setPath(state.getPath() + '/reservation');\n    };\n\n    $ctrl.fetchPlans = () => FloorPlan.query(state.getCurrentCenterId())\n      .catch(err => dwAlerts.error(err, 'Failed to query floor plans.'))\n      .then(plans => {\n        $ctrl.plans = plans;\n      });\n\n    /**\n     * Fetch data\n     */\n    $ctrl.fetch = () => {\n      const promises = {};\n\n      promises.plans = $ctrl.fetchPlans();\n\n      promises.units = ReservationUnit.query(state.getCurrentCenterId())\n        .catch(err => dwAlerts.error(err, 'Failed to query reservation units.'));\n\n      promises.categories = calendarService.query(state.getCurrentCenterId(), moment(), moment())\n        .catch(err => dwAlerts.error(err, 'Failed to query calendar.'));\n\n      promises.members = OurMembers.query({ centerId: state.getCurrentCenterId(), limit: 10000 })\n        .catch(err => dwAlerts.error(err, 'Failed to query our members.'));\n\n      return $q.all(promises);\n    };\n\n    $ctrl.onInit();\n  });\n","// Module\nvar code = \"<floor-plans plans=\\\"$ctrl.plans\\\" plan=\\\"$ctrl.plan\\\" point=\\\"$ctrl.point\\\" is-available=\\\"$ctrl.isAvailable\\\" ff-bulk-read-only=\\\"true\\\"> <hover-tip ng-init=\\\"point = $parent.$parent.point\\\"> <ff-tip ng-if=\\\"point.$$unit\\\" tip-type=\\\"white\\\" style=\\\"padding:5px;min-width:160px;width:160px\\\"> <span>{{point.$$unit.name}}</span> </ff-tip> </hover-tip> <focus-content> <ff-panel> <div> <ff-header>{{$ctrl.point.$$unit.name}}</ff-header> <div class=\\\"ff-col\\\"> <ff-img class=\\\"fp-unit-photo\\\" ng-if=\\\"$ctrl.point.$$unit.photo\\\" ff-alt=\\\"{{$ctrl.point.$$unit.name}}\\\" ff-src=\\\"{{$ctrl.point.$$unit.photo}}\\\" ff-src-hq=\\\"{{$ctrl.point.$$unit.photo}}\\\"></ff-img> <ff-static class=\\\"fp-descr\\\" ng-if=\\\"$ctrl.point.$$unit.description\\\">{{$ctrl.point.$$unit.description}}</ff-static> <ff-row ng-if=\\\"$ctrl.point.$$unit.capacity\\\"> <ff-static><span translate=\\\"GLOBAL.UNIT_CAPACITY\\\" translate-values=\\\"{ capacity: $ctrl.point.$$unit.capacity }\\\"></span></ff-static> </ff-row> <ff-static ng-if=\\\"$ctrl.point.$$unit.$$user\\\" class=\\\"ff-no-frame\\\" style=\\\"text-transform:uppercase;font-weight:700;margin-bottom:-.75rem;display:block\\\"> <span translate=\\\"FLOOR_PLANS.POINT.WHO_IS_THERE\\\"></span> </ff-static> <ff-row ng-if=\\\"$ctrl.point.$$unit.$$user\\\"> <ff-static> <ff-img flex=\\\"0 0 60px\\\" class=\\\"fp-avatar\\\" ff-src=\\\"{{$ctrl.point.$$unit.$$user.photo}}\\\" ng-if=\\\"$ctrl.point.$$unit.$$user.photo\\\" ff-alt=\\\"{{$ctrl.point.$$unit.$$user.name}}\\\"></ff-img> <ff-col style=\\\"margin-right:.5rem;padding:.5rem 0\\\"> <span class=\\\"fp-user-name\\\">{{$ctrl.point.$$unit.$$user.name}}</span> </ff-col> <ff-btn flex=\\\"none\\\" sense=\\\"userSelect\\\" size=\\\"sm\\\" class=\\\"fp-btn-more\\\" ff-click=\\\"$ctrl.more()\\\"> <span translate=\\\"FLOOR_PLANS.POINT.BTN_MORE\\\"></span> </ff-btn> </ff-static> </ff-row> <div class=\\\"ff-row fp-legend gutter-h-half\\\"> <div flex=\\\"auto\\\" translate=\\\"FLOOR_PLANS.POINT.AVAILABILITY_TODAY\\\"></div> <div flex=\\\"none\\\" style=\\\"display:block;margin:-8px 0\\\"> <div class=\\\"available\\\" translate=\\\"FLOOR_PLANS.POINT.AVAILABILITY_TODAY.AVAILABLE\\\"></div> <div class=\\\"unavailable\\\" translate=\\\"FLOOR_PLANS.POINT.AVAILABILITY_TODAY.UNAVAILABLE\\\"></div> </div> </div> <res-bar unit=\\\"$ctrl.point.$$unit\\\"></res-bar> <div ng-if=\\\"$ctrl.point.$$unit.reservations.length\\\" style=\\\"margin:.6rem 0 0 0;font-size:.95rem\\\"> <div ng-repeat=\\\"res in $ctrl.point.$$unit.reservations\\\" ng-if=\\\"res.userName\\\" style=\\\"margin-top:.4rem\\\"> <span nice-time=\\\"res.from\\\"></span> - <span nice-time=\\\"res.to\\\"></span> - <span>{{res.userName}}</span> </div> </div> <ff-btn-group class=\\\"ff-tmargin\\\" ng-if=\\\"$ctrl.isReservable($ctrl.point.$$unit)\\\"> <ff-btn sense=\\\"ok\\\" size=\\\"sm\\\" class=\\\"ff-btn-full\\\" ff-click=\\\"$ctrl.reserve()\\\"> <span translate=\\\"FLOOR_PLANS.POINT.BTN_RESERVE\\\"></span> </ff-btn> </ff-btn-group> </div> </div> </ff-panel> </focus-content> </floor-plans> \";\n// Exports\nmodule.exports = code;","import './floor-plans.scss';\nimport FloorPlan from '../services/floor-plan.service';\nimport floorPlanDirective from '../directives/floor-plan.directive';\nimport floorPlanSettingsDirective from '../directives/floor-plan-settings.directive';\nimport floorPlanEmbeddingDirective from '../directives/floor-plan-embedding.directive';\nimport ReservationUnit from 'shared/services/inventory/reservation-unit.service';\n\nexport default angular.module('deskworks.FloorPlansCtrl', [\n  'autoSave',\n  'deskworks.reservationCategory.service',\n  FloorPlan.name,\n  floorPlanDirective.name,\n  floorPlanSettingsDirective.name,\n  floorPlanEmbeddingDirective.name,\n  ReservationUnit.name,\n  'deskworks.OurMembers',\n])\n\n  .controller('FloorPlansCtrl', function($scope, $translate, $filter, $q, $window, $timeout, session, dwAlerts, state, helper, autoSave,\n                                         FloorPlan, ReservationUnit, reservationCategoryService, OurMembers) {\n    const $ctrl = this;\n\n    state.setPageTitle($translate.instant('FLOOR_PLANS.PAGE_TITLE'));\n\n    /**\n     * On Init\n     */\n    $ctrl.onInit = () => {\n      $timeout(() => {\n        $ctrl.view = 'community';\n\n        $ctrl.fetch()\n          .then(results => {\n            const { plans, reservationCategories, reservationUnits, members } = results;\n\n            $ctrl.categories = reservationCategories.map(cat => helper.pick(cat, ['id', 'name']));\n\n            $ctrl.units = reservationUnits.map(unit => {\n              const result = helper.pick(unit, ['id', 'name', 'description', 'area', 'capacity', 'thumbnail', 'photo',\n                'attachedUserId', 'attachedUserName', 'availableFullTime',\n                'fullTimeProductId', 'fullTimeProductName', 'fullTimePrice', 'fullTimeNet', 'fullTimeDiscount',\n                'reservationTypeId']);\n              if (result.attachedUserId) result.$$user = members.find(m => m.id === result.attachedUserId);\n              return result;\n            });\n\n            $ctrl.plan = $ctrl.plans[0];\n            $ctrl.plans.forEach(plan => {\n              plan.points.forEach(point => {\n                point.$$unit = $ctrl.units.find(u => u.id === point.reservationUnitId);\n                point.$$category = point.$$unit && $ctrl.categories.find(c => c.id === point.$$unit.reservationTypeId);\n              });\n            });\n\n            /**\n             * Pre-calculate categories and units usage\n             */\n            $scope.$watchCollection(() => $ctrl.plan ? $ctrl.plan.points.map(p => (p.$$unit || {}).id) : [], () => {\n              $ctrl.units.forEach(unit => { unit.$$hasPoint = !!$ctrl.plan.points.find(p => p.$$unit === unit); });\n              $ctrl.categories.forEach(cat => { cat.$$hasUnits = !!$ctrl.units.find(u => !u.$$hasPoint && u.reservationTypeId === cat.id); });\n            });\n          });\n\n        /**\n         * Reset selected point on switching plan\n         */\n        $scope.$watch('$ctrl.plan', () => { $ctrl.point = null });\n      });\n    };\n\n    $ctrl.isAvailable = unit => {\n      return !!unit && unit.availableFullTime;\n    };\n\n    $ctrl.fetchPlans = () => FloorPlan.query(state.getCurrentCenterId())\n      .catch(err => dwAlerts.error(err, 'Failed to query floor plans.'))\n      .then(plans => {\n        $ctrl.plans = plans;\n      });\n\n    /**\n     * Fetch data\n     */\n    $ctrl.fetch = () => {\n      const promises = {};\n\n      promises.plans = $ctrl.fetchPlans();\n\n      promises.reservationCategories = reservationCategoryService.query(state.getCurrentCenterId())\n        .catch(err => dwAlerts.error(err, 'Failed to query reservation categories.'));\n\n      promises.reservationUnits = ReservationUnit.query(state.getCurrentCenterId())\n        .catch(err => dwAlerts.error(err, 'Failed to query reservation units.'));\n\n      promises.members = OurMembers.query({ centerId: state.getCurrentCenterId(), limit: 10000 })\n        .catch(err => dwAlerts.error(err, 'Failed to query our members.'));\n\n      return $q.all(promises);\n    };\n\n    /**\n     * Save plan\n     */\n    $ctrl.save = autoSave.wrap(save);\n    function save() {\n      if (helper.pointFirstInvalid('floor-plan-settings')) return;\n\n      const plan = helper.pick($ctrl.plan, ['id', 'name', 'enabled', 'pricingEnabled', 'areaEnabled', 'points']);\n      plan.points = plan.points.filter(p => !!(p.$$unit && (p.reservationUnitId = p.$$unit.id)));\n\n      return FloorPlan.save(state.getCurrentCenterId(), plan)\n        .catch(err => dwAlerts.error(err, 'Failed to save floor plan'))\n        .then(result => { $ctrl.plan.id = result.id });\n    }\n\n    /**\n     * Delete plan\n     */\n    $ctrl.deletePlan = (plan) => {\n      if (plan.id && !$window.confirm($translate.instant('FLOOR_PLANS.CONFIRM_DELETE'))) return;\n\n      return (plan.id ? FloorPlan.delete(plan.id) : $q.when())\n        .catch(err => dwAlerts.error(err, 'Failed to delete floor plan.'))\n        .then(() => {\n          $ctrl.plans.splice($ctrl.plans.indexOf(plan), 1);\n          if (plan === $ctrl.plan) $ctrl.plan = $ctrl.plans[0];\n        });\n    };\n\n    /**\n     * Upload plan image\n     */\n    $ctrl.uploadPlanImage = (plan, $files, $invalidFiles) => {\n      if (helper.pointFirstInvalid('floor-plan-settings')) return;\n\n      if ($invalidFiles && $invalidFiles.length > 0) return dwAlerts.error($translate.instant('FLOOR_PLANS.IMAGE.INVALID_FORMAT'));\n      if (!plan || !plan.id || !$files || !$files.length) return;\n\n      plan.$$spinUpload = true;\n      return FloorPlan.uploadImage(plan.id, $files[0])\n        .catch(err => dwAlerts.error(err, 'Failed to upload floor plan image.'))\n        .finally(() => { plan.$$spinUpload = false; })\n        .then(result => { plan.thumbnail = result.data.thumbnail + '?' + Date.now(); plan.image = result.data.image + '?' + Date.now(); });\n    };\n\n    $ctrl.onInit();\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<floor-plans plans=\\\"$ctrl.plans\\\" plan=\\\"$ctrl.plan\\\" point=\\\"$ctrl.point\\\" save=\\\"$ctrl.save()\\\" is-available=\\\"$ctrl.isAvailable\\\" ff-bulk-read-only> <focus-content> <div class=\\\"ff-grid gutter-v-half\\\"> <floor-plan-point-settings ng-if=\\\"$parent.ffBlock.editMode\\\" class=\\\"ff-flex-start\\\" point=\\\"$ctrl.point\\\" categories=\\\"$ctrl.categories\\\" units=\\\"$ctrl.units\\\" plan=\\\"$ctrl.plan\\\" save=\\\"$ctrl.save($ctrl.plan)\\\"></floor-plan-point-settings> <floor-plan-point-details ng-if=\\\"$ctrl.point.$$unit\\\" point=\\\"$ctrl.point\\\" view=\\\"$ctrl.view\\\" pricing-enabled=\\\"$ctrl.plan.pricingEnabled\\\" area-enabled=\\\"$ctrl.plan.areaEnabled\\\"></floor-plan-point-details> </div> </focus-content> <no-focus-content> <ff-panel ng-if=\\\"$parent.ffBlock.editMode\\\" class=\\\"ff-flex-start\\\"> <div><ff-icon sense=\\\"info\\\"></ff-icon> <span translate=\\\"FLOOR_PLANS.POINT.HINT.SELECT\\\"></span></div> <div><ff-icon sense=\\\"info\\\"></ff-icon> <span translate=\\\"FLOOR_PLANS.POINT.HINT.CREATE\\\"></span></div> <div><ff-icon sense=\\\"info\\\"></ff-icon> <span translate=\\\"FLOOR_PLANS.POINT.HINT.DRAG\\\"></span></div> </ff-panel> </no-focus-content> <selector-extra> <div class=\\\"ff-grid gutter-h-half ff-read-only-ignore\\\" style=\\\"justify-content:flex-start\\\"> <label flex=\\\"none\\\"> <ff-radio ff-model=\\\"$ctrl.view\\\" ff-value=\\\"'public'\\\"><span translate=\\\"FLOOR_PLANS.VIEW.PUBLIC\\\"></span></ff-radio> </label> <label flex=\\\"none\\\"> <ff-radio ff-model=\\\"$ctrl.view\\\" ff-value=\\\"'community'\\\"><span translate=\\\"FLOOR_PLANS.VIEW.COMMUNITY\\\"></span></ff-radio> </label> </div> </selector-extra> <plan-settings> <floor-plan-settings ng-if=\\\"$parent.ffBlock.editMode && $ctrl.plan\\\" class=\\\"animate-collapse\\\" plan=\\\"$ctrl.plan\\\" delete=\\\"$ctrl.deletePlan($ctrl.plan)\\\" save=\\\"$ctrl.save($ctrl.plan)\\\" upload=\\\"$ctrl.uploadPlanImage\\\"></floor-plan-settings> </plan-settings> <bottom-extra> <floor-plan-embedding ng-if=\\\"$parent.ffBlock.editMode && $ctrl.plan.image\\\" floor-plan=\\\"$ctrl.plan\\\" class=\\\"animate-collapse\\\" style=\\\"display:block\\\"></floor-plan-embedding> </bottom-extra> </floor-plans> \";\n// Exports\nmodule.exports = code;","import wizardReservation from 'shared/wizard-reservation/wizard-reservation.module';\n\nconst index = ['$injector', function index($injector) {\n  // JS\n  const importAll = r => r.keys().map(r);\n  const js = importAll(require.context('./', true, /\\..+\\/.+\\.js$/));\n  $injector.loadNewModules(js.map(m => m.default.name));\n\n  $injector.loadNewModules([wizardReservation.name]);\n\n  // Templates\n  $injector.invoke(['$templateCache', function($templateCache) {\n    const ctx = require.context('./', true, /.*\\.tpl\\.html$/);\n    ctx.keys().forEach(key => $templateCache.put(key.replace(/^\\.\\//, ''), ctx(key)));\n  }]);\n}];\n\nexport default index;\n","export default angular.module('deskworks.FloorPlan', [\n  'ngResource',\n  'ngFileUpload',\n  'deskworks.config',\n])\n\n  .factory('FloorPlan', function($resource, $timeout, Upload, deskworksConfig) {\n\n    const res = $resource(deskworksConfig.getApiAbsUrl('/floor-plans/:id'), {}, {\n      update: { method: 'PUT' },\n    });\n\n    return {\n      new: () => ({ enabled: true, pricingEnabled: true, areaEnabled: true, points: [] }),\n\n      query: (centerId) => res.query({ centerId }).$promise,\n\n      save: (centerId, plan) => plan.id ?\n        res.update({ id: plan.id, centerId }, plan).$promise :\n        res.save({ centerId }, plan).$promise\n          .then(result => (plan.id = result.id, result)),\n\n      delete: (id) => res.delete({ id }).$promise,\n\n      /**\n       * Upload image\n       */\n      uploadImage: (id, file) => Upload.upload({\n        url: deskworksConfig.getApiAbsUrl(`/floor-plans/${id}`),\n        method: 'PUT',\n        withCredentials: true,\n        data: { image: file },\n      }),\n\n    };\n  });\n","import 'angular-drag-and-drop-lists';\nimport './drag-n-drop.scss';\nimport keese from './keese.service';\n\n/**\n * Drag'n'Drop helper service\n */\nexport default angular.module('dnd', [\n  'dndLists',\n  keese.name,\n])\n\n  .factory('dnd', function(keese) {\n    return {\n      move: move,\n    };\n\n    /**\n     * Move item from srcList[srcIndex] to targetList[targetIndex], auto-generates new order. Returns moved item.\n     */\n    function move(srcList, srcIndex, targetList, targetIndex) {\n      const item = srcList[srcIndex];\n\n      if (targetList) targetList.splice(targetIndex, 0, item); // copy item from source to target\n      // remove source item, possibly correcting index. We must do this immediately, otherwise ng-repeat complains about duplicates\n      if (srcList === targetList && targetIndex <= srcIndex) srcIndex++;\n      srcList.splice(srcIndex, 1); // remove source item\n\n      if (targetList) {\n        const index = targetList.indexOf(item); // find new index of item\n        item.order = keese.generate(targetList[index - 1] && targetList[index - 1].order, targetList[index + 1] && targetList[index + 1].order);\n      }\n\n      return item;\n    }\n  });\n","// extracted by extract-css-chunks-webpack-plugin","/**\n * Sort keys generator. Based on node-keese v1.1.1: https://github.com/thejoshwolfe/node-keese\n */\nexport default angular.module('keese', [])\n  .factory('keese', function() {\n\n    const alphabet = \"0123456789?@ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n    const radix = alphabet.length;\n    const order_specifier = '~'; // bigger than any from the alphabet\n\n    /**\n     * Character to numerical value aka index of the character: \"0\": 0, \"z\": 63, etc.\n     */\n    const values = (function() {\n      const values = {};\n      for (let i = 0; i < alphabet.length; i++) values[alphabet[i]] = i;\n      return values;\n    })();\n\n    return {\n      /**\n       * Main exported function. Generates new sort key.\n       * @param low - previous sort key or null/undefined\n       * @param high - next sort key or null/undefined\n       * @param count - if defined - the result is an Array of size count values\n       * @returns {*} - single key or array of keys, depending on count\n       */\n      generate: function keese(low, high, count) {\n        if (count) {\n          return multi_keese(low, high, count);\n        } else {\n          return single_keese(low, high);\n        }\n      }\n    };\n\n    function single_keese(low, high) {\n      if (!low) {\n        if (!high) {\n          return '1'; // return anything above 0\n        } else {\n          return average('0', high); // go smaller\n        }\n      } else {\n        if (!high) {\n          return increment(low); // go bigger\n        } else {\n          return average(low, high); // go in between\n        }\n      }\n    }\n    function multi_keese(low, high, count) {\n      let result = new Array(count);\n      if (count > 0) {\n        if (!high) {\n          for (let i = 0; i < count; i++) { // just allocate straight forward\n            const value = keese(low, null);\n            result[i] = value;\n            low = value;\n          }\n        } else {\n          recurse(low, high, 0, count); // binary tree descent\n        }\n      }\n      return result;\n      function recurse(low_value, high_value, low_index, high_index) {\n        const mid_index = Math.floor((low_index + high_index) / 2);\n        const mid_value = single_keese(low_value, high_value);\n        result[mid_index] = mid_value;\n        if (low_index < mid_index) recurse(low_value, mid_value, low_index, mid_index);\n        if (mid_index + 1 < high_index) recurse(mid_value, high_value, mid_index + 1, high_index);\n      }\n    }\n\n    function increment(value) {\n      const n = parse(value);\n      n.digits = n.digits.substr(0, n.order_length + 1); // drop the fraction\n      return add(n, parse(\"1\"));\n    }\n\n    function average(low, high) {\n      if (low > high) {\n        throw new Error('assertion failed: ' + JSON.stringify(low) + \" < \" + JSON.stringify(high));\n      }\n      const a = parse(low);\n      const b = parse(high);\n      pad_to_equal_order(a, b);\n      let b_carry = 0;\n      const max_digit_length = Math.max(a.digits.length, b.digits.length);\n      for (let i = 0; i < max_digit_length || b_carry > 0; i++) {\n        const a_value =            values[a.digits[i]] || 0;\n        const b_value = b_carry + (values[b.digits[i]] || 0);\n        if (a_value === b_value) continue;\n        if (a_value === b_value - 1) {\n          b_carry = radix; // we need more digits, but remember that b is ahead\n          continue;\n        }\n        // we have a distance of at least 2 between the values.\n        // half the distance floored is sure to be a positive single digit.\n        let half_distance_value = Math.floor((b_value - a_value) / 2);\n        let half_distance_digits = '';\n        for (let j = 0; j < i; j++)\n          half_distance_digits += '0';\n        half_distance_digits += alphabet[half_distance_value];\n        const half_distance = parse(construct(a.order_length, half_distance_digits));\n        // truncate insignificant digits of a\n        a.digits = a.digits.substr(0, i + 1);\n        return add(a, half_distance);\n      }\n      throw new Error(); // unreachable\n    }\n\n    function add(a, b) {\n      pad_to_equal_order(a, b);\n      let result_digits = \"\";\n      let order_length = a.order_length;\n      let value = 0;\n      for (let i = Math.max(a.digits.length, b.digits.length) - 1; i >= 0; i--) {\n        value += values[a.digits[i]] || 0;\n        value += values[b.digits[i]] || 0;\n        result_digits = alphabet[value % radix] + result_digits;\n        value = Math.floor(value / radix);\n      }\n      // overflow up to moar digits\n      while (value > 0) {\n        result_digits = alphabet[value % radix] + result_digits;\n        value = Math.floor(value / radix);\n        order_length++;\n      }\n      return construct(order_length, result_digits);\n    }\n\n    function parse(value) {\n      const order_length = value.lastIndexOf(order_specifier) + 1;\n      return {\n        order_length: order_length,\n        digits: value.substr(order_length)\n      };\n    }\n    function construct(order_length, digits) {\n      while (order_length > 0 && digits.charAt(0) == '0') { // strip unnecessary leading zeros\n        digits = digits.substr(1);\n        order_length--;\n      }\n      let result = \"\";\n      for (let i = 0; i < order_length; i++)\n        result += order_specifier;\n      return result + digits;\n    }\n\n    function pad_to_equal_order(a, b) {\n      pad_in_place(a, b.order_length);\n      pad_in_place(b, a.order_length);\n    }\n    function pad_in_place(n, order_length) {\n      while (n.order_length < order_length) {\n        n.digits = \"0\" + n.digits;\n        n.order_length++;\n      }\n    }\n  });\n","import template from './res-bar.tpl.html';\nimport './res-bar.scss';\n\n/**\n * resBar component - reservation availability bar used in Bay Reservation / Select Unit\n */\nexport default angular.module('deskworks.resBar', [])\n\n  .component('resBar', {\n    template,\n    controller: 'ResBarCtrl',\n    bindings: {\n      unit: '<',\n      availabilities: '=?',\n    },\n  })\n\n  .controller('ResBarCtrl', function($scope, $filter) {\n    const $ctrl = this;\n\n    /**\n     * $onInit\n     */\n    $ctrl.$onInit = function() {\n      $scope.$watchCollection('$ctrl.unit.availabilities', () => {\n        if (!$ctrl.unit) { return; }\n        let ranges = [];\n        $ctrl.unit.availabilities.forEach(period => {\n          ranges.push(moment.range(period.from, period.to));\n        });\n\n        $ctrl.unit.reservations.forEach(res => {\n          const resRange = moment.range(res.from, res.to);\n          ranges = ranges\n            .map(r => r.subtract(resRange))\n            .reduce((result, ranges) => result.concat(ranges), []);\n        });\n\n        ranges = ranges.filter(r => (r.end - r.start) / 3600000 >= ($ctrl.unit.limitMin || 0));\n\n        $ctrl.availabilities = calcAvailabilities(ranges.map(r => ({ from: r.start, to: r.end })));\n      });\n    };\n\n    function calcAvailabilities(availabilities) {\n      if (!availabilities || !availabilities.length) { return []; }\n      const start = availabilities[0].from;\n      const end = availabilities[availabilities.length - 1].to;\n\n      return availabilities.map(av => ({ ...av, x1: dateToX(av.from), x2: dateToX(av.to) }));\n\n      function dateToX(date) {\n        return (date - start) * 100 / (end - start);\n      }\n    }\n  });\n","// extracted by extract-css-chunks-webpack-plugin","// Module\nvar code = \"<div ng-repeat=\\\"av in $ctrl.availabilities\\\" ng-style=\\\"{ left: av.x1 + '%', right: 100 - av.x2 + '%' }\\\" class=\\\"availability\\\"> <span nice-time=\\\"av.from\\\" nice-format=\\\"shortHours\\\" class=\\\"from\\\"></span> <span nice-time=\\\"av.to\\\" nice-format=\\\"shortHours\\\" class=\\\"to\\\"></span> </div> \";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}