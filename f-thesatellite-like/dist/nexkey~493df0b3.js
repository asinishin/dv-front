(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"+XAh":function(e,t,n){"use strict";n.r(t);n("FdtR"),n("JBxO");t.default=angular.module("deskworks.nexkeySettingsDirective",["debounce","deskworks.center.service","deskworks.NexkeyCenter"]).directive("nexkeySettings",(function(){return{templateUrl:"settings/nexkey-settings.tpl.html",restrict:"E",scope:!0,controller:"NexkeySettingsCtrl as $ctrl"}})).controller("NexkeySettingsCtrl",["$q","debounce","dwAlerts","helper","state","NexkeyCenter",function(e,t,n,r,o,a){var c=this;c.$onInit=function(){c.load()},c.load=function(){return c.spin=!0,a.query().then((function(e){return c.nexkeyCenters=e,e})).finally((function(){c.spin=!1}))},c.saveCenter=t((function(e,t){if(t&&t.$invalid)return;return e.$$spin=!0,a.save(e).finally((function(){e.$$spin=!1})).catch((function(e){return n.error(e,"Failed to save Nexkey center.")}))}),500)}])},"/laD":function(e,t,n){"use strict";n.r(t);n("3dw1"),n("y89P"),n("Muwe");var r=n("yCd9"),o=n.n(r),a=n("lRNC"),c=n.n(a),s=["$injector",function(e){var t,r,a=(t=n("NYVy"),o()(r=c()(t).call(t)).call(r,t));e.loadNewModules(o()(a).call(a,(function(e){return e.default.name}))),e.invoke(["$templateCache",function(e){var t=n("xATu");c()(t).call(t).forEach((function(n){return e.put(n.replace(/^\.\//,""),t(n))}))}])}];t.default=s},"7v6b":function(e,t,n){e.exports=n("M381")},BFGI:function(e,t){e.exports='<ff-panel> <ff-panel-header> <span translate="INTEGRATIONS_SETUP.NEXKEY.HEADER"></span> </ff-panel-header> <ff-spin class="ff-spin-placeholder" ng-if="$ctrl.spin"></ff-spin> <form name="form" novalidate ng-repeat="center in $ctrl.nexkeyCenters" class="animate-collapse"> <ff-header ng-style="{ \'padding-top\': $index ? \'.5rem\' : \'0\' }"> <ff-row> <cell>{{::center.name}}</cell> <ff-spin flex="0 0 16px" class="ff-spin-sm" ng-if="center.$$spin"></ff-spin> </ff-row> </ff-header> <label class="ff-row"> <ff-label flex="0 0 100px"><span translate="INTEGRATIONS_SETUP.ENABLED"></span></ff-label> <ff-static> <ff-checkbox name="enabled" ff-model="center.enabled" ff-change="$ctrl.saveCenter(center, form)"></ff-checkbox> </ff-static> </label> <label class="ff-row"> <ff-label flex="0 0 100px"><span ng-class="{ req: center.enabled }" translate="INTEGRATIONS_SETUP.API_KEY"></span></ff-label> <ff-text ff-model="center.apiKey" ff-change="$ctrl.saveCenter(center, form)" ff-required="center.enabled" ff-validate-alert="{{\'INTEGRATIONS_SETUP.API_KEY\' | translate}}"></ff-text> </label> <label class="ff-row"> <ff-label flex="0 0 100px"><span ng-class="{ req: center.enabled }" translate="INTEGRATIONS_SETUP.API_SECRET"></span></ff-label> <ff-text ff-model="center.apiSecret" ff-change="$ctrl.saveCenter(center, form)" ff-required="center.enabled" ff-validate-alert="{{\'INTEGRATIONS_SETUP.API_SECRET\' | translate}}"></ff-text> </label> </form> </ff-panel> '},DDl7:function(e,t,n){n("h2hn");var r=n("/ZBe").Object,o=e.exports=function(e,t,n){return r.defineProperty(e,t,n)};r.defineProperty.sham&&(o.sham=!0)},Ekwr:function(e,t,n){e.exports=n("MK67")},HGI2:function(e,t,n){n("BZMQ");var r=n("/ZBe");e.exports=r.Object.getOwnPropertySymbols},LPPa:function(e,t,n){n("YpQb");var r=n("/ZBe");e.exports=r.Object.getOwnPropertyDescriptors},M381:function(e,t,n){var r=n("DDl7");e.exports=r},MK67:function(e,t,n){var r=n("HGI2");e.exports=r},NYVy:function(e,t,n){var r={"./locks/nexkey-locks.directive.js":"Y5W7","./services/nexkey-center.service.js":"a3GV","./services/nexkey-unit.service.js":"dh+n","./settings/nexkey-settings.directive.js":"+XAh"};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id="NYVy"},OiSP:function(e,t){e.exports='<label class="ff-row animate-collapse" ng-if="$ctrl.center.enabled"> <ff-label flex="0 1 170px"> <span> <span translate="NEXKEY.LOCKS"></span> <ff-hint><span translate="NEXKEY.LOCKS.HINT"></span></ff-hint> </span> </ff-label> <ff-text name="lockIds" ff-model="$ctrl.settings.lockIds"></ff-text> </label> '},QPzo:function(e,t,n){var r=n("qqp4");e.exports=r},Y5W7:function(e,t,n){"use strict";n.r(t);n("3dw1");var r=n("03wM"),o=n.n(r),a=n("Ekwr"),c=n.n(a),s=n("hsT8"),i=n.n(s),f=n("lvz6"),l=n.n(f),u=n("yKah"),d=n.n(u),p=n("fzuT"),k=n.n(p),x=n("yCd9"),v=n.n(x),y=n("a8hB"),h=n.n(y);n("8cZI"),n("aZFp"),n("Muwe");function g(e,t){var n=o()(e);if(c.a){var r=c()(e);t&&(r=i()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):d.a?Object.defineProperties(e,d()(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,l()(n,t))}))}return e}t.default=angular.module("deskworks.nexkeyLocksDirective",["deskworks.NexkeyCenter","deskworks.NexkeyUnit"]).directive("nexkeyLocks",(function(){return{templateUrl:"locks/nexkey-locks.tpl.html",restrict:"E",scope:!0,controller:"NexkeyLocksCtrl as $ctrl",bindToController:{centerId:"<?",unitId:"<?",save:"="}}})).controller("NexkeyLocksCtrl",["$q","dwAlerts","helper","state","NexkeyCenter","NexkeyUnit",function(e,t,n,r,o,a){var c=this;function s(){var e;if(c.unitId){var n,r=b(b({},c.unit),{},{lockIds:v()(n=c.unit.lockIds.split(",")).call(n,(function(e){return h()(e).call(e)}))});return a.save(r).catch((function(e){return t.error(e,"Failed to save Nexkey unit.")}))}var s=b(b({},c.center),{},{lockIds:v()(e=c.center.lockIds.split(",")).call(e,(function(e){return h()(e).call(e)}))});return o.save(s).catch((function(e){return t.error(e,"Failed to save Nexkey center.")}))}c.$onInit=function(){c.load(),c.save=s},c.load=function(){var n=[o.get({id:c.centerId}).catch((function(e){return t.error(e,"Failed to get Nexkey center.")}))];return c.unitId&&n.push(a.get({id:c.unitId}).catch((function(e){return t.error(e,"Failed to get Nexkey unit.")}))),e.all(n).then((function(e){c.center=e[0],c.unit=e[1],c.settings=c.unit||c.center,c.settings.lockIds=c.settings.lockIds.join(", ")}))}}])},YpQb:function(e,t,n){var r=n("iddO"),o=n("loUa"),a=n("cJ2G"),c=n("Btbx"),s=n("3tq3"),i=n("i13M");r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){for(var t,n,r=c(e),o=s.f,f=a(r),l={},u=0;f.length>u;)void 0!==(n=o(r,t=f[u++]))&&i(l,t,n);return l}})},a3GV:function(e,t,n){"use strict";n.r(t),t.default=angular.module("deskworks.NexkeyCenter",["ngResource","deskworks.config"]).factory("NexkeyCenter",["$resource","deskworksConfig",function(e,t){var n=e(t.getApiAbsUrl("/nexkey/centers/:id"),{},{update:{method:"PUT"}});return{query:function(){return n.query({}).$promise},get:function(e){return n.get(e).$promise},save:function(e){return n.update({id:e.id},e).$promise}}}])},cJ2G:function(e,t,n){var r=n("UkRz"),o=n("FkQy"),a=n("/ADo"),c=n("CvrR");e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(c(e)),n=a.f;return n?t.concat(n(e)):t}},"dh+n":function(e,t,n){"use strict";n.r(t),t.default=angular.module("deskworks.NexkeyUnit",["ngResource","deskworks.config"]).factory("NexkeyUnit",["$resource","deskworksConfig",function(e,t){var n=e(t.getApiAbsUrl("/nexkey/units/:id"),{},{update:{method:"PUT"}});return{get:function(e){return n.get(e).$promise},save:function(e){return n.update({id:e.id},e).$promise}}}])},fzuT:function(e,t,n){var r=n("7v6b");e.exports=function(e,t,n){return t in e?r(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},h2hn:function(e,t,n){var r=n("iddO"),o=n("loUa");r({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:n("UkIg").f})},iDDw:function(e,t,n){var r=n("LPPa");e.exports=r},lvz6:function(e,t,n){e.exports=n("QPzo")},qqp4:function(e,t,n){n("zzoj");var r=n("/ZBe").Object,o=e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)};r.getOwnPropertyDescriptor.sham&&(o.sham=!0)},xATu:function(e,t,n){var r={"./locks/nexkey-locks.tpl.html":"OiSP","./settings/nexkey-settings.tpl.html":"BFGI"};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id="xATu"},yKah:function(e,t,n){e.exports=n("iDDw")},zzoj:function(e,t,n){var r=n("iddO"),o=n("wkvk"),a=n("Btbx"),c=n("3tq3").f,s=n("loUa"),i=o((function(){c(1)}));r({target:"Object",stat:!0,forced:!s||i,sham:!s},{getOwnPropertyDescriptor:function(e,t){return c(a(e),t)}})}}]);