(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"+xqF":function(e,t){e.exports='<form name=formResType id=reservationCategory ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-panel> <label class=ff-row> <ff-label flex="0 1 200px"><req translate=RESERVATION_CATEGORIES.NAME></req></ff-label> <ff-text flex="1 1 400px" name=name ff-model=vm.category.name ff-required=true ff-validate-alert="{{\'RESERVATION_CATEGORIES.NAME\' | translate}}"></ff-text> </label> <ff-row> <ff-richtext ff-model=vm.category.description></ff-richtext> </ff-row> <label class=ff-row ng-repeat="customer in vm.cancellation"> <ff-label flex="0 1 350px"> <span> <span translate={{customer.notice}}></span> <ff-hint><span translate={{customer.hint}}></span></ff-hint> </span> </ff-label> <ff-select flex="0 0 52px" ff-model=customer.model ff-options="hours for hours in vm.hours"></ff-select> <ff-label><span translate=RESERVATION_CATEGORIES.HOURS></span></ff-label> </label> </ff-panel> <ff-btn-group> <ff-btn sense=save type=submit ff-click=vm.save(formResType) ff-disabled=formResType.$pristine> <span translate=GLOBAL.BTN_SAVE></span> </ff-btn> <ff-btn sense=remove ng-if="vm.category.id !== \'new\'" ff-click=vm.remove()><span translate=GLOBAL.BTN_DELETE></span></ff-btn> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> <ff-panel ng-if="vm.category.id !== \'new\'" ngf-drop="vm.uploadPhoto($files, $invalidFiles)" ngf-pattern="\'image/png,image/jpeg\'" ngf-drag-over-class=dragover> <ff-panel-header> <span translate=RESERVATION_CATEGORIES.PHOTOS.HEADER></span> <ff-hint><span translate=RESERVATION_CATEGORIES.PHOTOS.HINT></span></ff-hint> </ff-panel-header> <div class="ff-grid gutter-h-half"> <ff-col flex="{md: \'0 0 50%\'}" ng-repeat="photo in vm.category.photos"> <ff-img ff-src={{photo.url}}></ff-img> <ff-btn-group style="margin:.5rem 0"> <ff-btn sense=edit size=xs title="{{\'GLOBAL.BTN_EDIT\' | translate}}" ff-spin=photo.spin ngf-select="vm.uploadPhoto($files, $invalidFiles, photo)" ngf-pattern="\'image/png,image/jpeg\'" accept=image/png,image/jpeg></ff-btn> <ff-btn sense=remove size=xs title="{{\'GLOBAL.BTN_DELETE\' | translate}}" ff-click=vm.removePhoto(photo)></ff-btn> </ff-btn-group> </ff-col> </div> <ff-btn-group> <ff-btn sense=add size=sm ngf-select="vm.uploadPhoto($files, $invalidFiles)" ff-spin=vm.spinAddPhoto ngf-pattern="\'image/png,image/jpeg\'" accept=image/png,image/jpeg><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </ff-panel> </div> </form> '},"10fB":function(e,t){e.exports='<ff-row> <ff-select ff-model=$ctrl.rule[$ctrl.role].available ff-options="opt.id as opt.name for opt in $ctrl.options" ff-change=$ctrl.onChangeAvailable()></ff-select> <ff-btn flex=none sense=add size=xs ng-class="{ invisible: !$ctrl.rule[$ctrl.role].available }" title="{{\'RESERVATION_RULES.BTN_ADD_INTERVAL.HINT\' | translate}}" ff-click=$ctrl.addInterval()></ff-btn> </ff-row> <ff-row ng-repeat="interval in $ctrl.rule[$ctrl.role].intervals track by $index" ng-if=$ctrl.rule[$ctrl.role].available> <ff-time ff-model=interval.from ff-change=$ctrl.rule.$as() ff-required=true ff-time-order="{ early: interval.from, late: interval.to }" ff-validate-alert="{ field: (\'RESERVATION_RULES.TIME_FROM\' | translate), late: (\'RESERVATION_RULES.TIME_TO\' | translate) }" placeholder="09:00 AM"></ff-time> <ff-time ff-model=interval.to ff-change=$ctrl.rule.$as() ff-required=true ff-time-order="{ early: interval.from, late: interval.to }" ff-validate-alert="{ field: (\'RESERVATION_RULES.TIME_TO\' | translate), early: (\'RESERVATION_RULES.TIME_FROM\' | translate) }" placeholder="05:00 PM"></ff-time> <ff-btn flex=none sense=delete size=xs ff-click=$ctrl.deleteInterval(interval) title="{{\'RESERVATION_RULES.BTN_DELETE_INTERVAL.HINT\' | translate}}"></ff-btn> </ff-row> <ff-row ng-repeat="ghost in $ctrl.rule[$ctrl.role].$ghosts track by $index"> <ff-static></ff-static> </ff-row> '},"1Kfe":function(e,t){e.exports='<div class=membership-categories ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-panel style=max-width:600px> <ff-header> <ff-row> <cell><span translate=MEMBERSHIP_CATEGORIES.LIST.HEADER></span></cell> <ff-hint flex=none ng-if=ffBlock.editMode><span translate=MEMBERSHIP_CATEGORIES.LIST.HINT></span></ff-hint> </ff-row> </ff-header> <span ng-if=!vm.membershipCategories.length translate=MEMBERSHIP_CATEGORIES.LIST.EMPTY></span> <div ng-if=ffBlock.editMode dnd-list dnd-drop="callback({ targetList: vm.membershipCategories, targetIndex: index })"> <ff-row ng-repeat="category in vm.membershipCategories" dnd-draggable=null ff-dim=category.$spin dnd-callback="vm.onDrop(vm.membershipCategories, $index, targetList, targetIndex)" ng-include="\'membershipCategoryTpl\'"> </ff-row> </div> <div ng-if=!ffBlock.editMode> <ff-row ng-repeat="category in vm.membershipCategories" ng-include="\'membershipCategoryTpl\'"></ff-row> </div> </ff-panel> <ff-btn-group> <ff-btn sense=new ff-click=vm.new()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </div> </div> <script type=text/ng-template id=membershipCategoryTpl> <ff-static ff-bind="category.name"></ff-static>\n\n  <ff-btn-group flex="none" class="buttons-row">\n    <ff-btn sense="edit" size="xs" ff-click="vm.edit(category)"><span translate="GLOBAL.BTN_EDIT"></span></ff-btn>\n  </ff-btn-group> <\/script> '},"7LHe":function(e,t){e.exports='<form name=formReservationRules novalidate> <div class=gutter-v> <ff-panel> <ff-panel-header ng-if=$ctrl.reservationUnitId> <div class="ff-grid gutter-v-half gutter-h-half"> <div flex=auto> <span translate=RESERVATION_RULES.ACTIVE.HEADER></span> <ff-hint><span translate=RESERVATION_RULES.ACTIVE.HINT></span></ff-hint> </div> <ff-btn flex=none sense=clone size=sm ff-click=$ctrl.resetRules() style="margin:-.5rem 0 .5rem 0"> <span translate=RESERVATION_RULES.ACTIVE.BTN_RESET></span> </ff-btn> </div> </ff-panel-header> <ff-panel-header ng-if=!$ctrl.reservationUnitId> <span translate=RESERVATION_RULES.DEFAULT.HEADER></span> <ff-hint><span translate=RESERVATION_RULES.DEFAULT.HINT></span></ff-hint> </ff-panel-header> <ff-col ff-dim=!$ctrl.rules class=gutter-v> <ff-col> <div class="rr-container gutter-v-half"> <rr-rule rule=$ctrl.whoCanReserve options=$ctrl.conf.whoCanReserve.opts flex="{sm: \'1 1 137px\', md: \'0 0 180px\'}">{{$ctrl.conf.whoCanReserve.name}}</rr-rule> <rr-rule rule=$ctrl.fullTimeProduct options=$ctrl.conf.fullTimeProduct.opts ng-if="$ctrl.reservationUnitId && $ctrl.conf.fullTimeProduct.opts" rule-save=$ctrl.saveFullTimeProduct() flex="{sm: \'1 1 176px\', md: \'0 0 350px\'}">{{$ctrl.conf.fullTimeProduct.name}}</rr-rule> <rr-rule rule=$ctrl.attachedUser ng-if="$ctrl.reservationUnitId && $ctrl.whoCanReserve.value === \'notAvailable\'" flex="{sm: \'1 1 313px\', md: \'0 0 250px\'}">{{$ctrl.conf.attachedUser.name}}</rr-rule> </div> </ff-col> <ff-col ng-if=!$ctrl.hideRules> <div class="rr-container gutter-v-half"> <rr-rule rule=rule options=$ctrl.conf[rule.uid].opts ng-repeat="rule in $ctrl.rules | filter:{ type: \'roles\' }" flex="{sm: \'0 0 50%\', md: \'0 0 200px\'}"> <span ng-bind-html=$ctrl.conf[rule.uid].name></span> </rr-rule> </div> </ff-col> <ff-col ng-if=!$ctrl.hideRules> <div class="rr-container gutter-v-half"> <rr-rule rule=rule ng-repeat="rule in $ctrl.rules | filter:{ type: \'weekday\' }" flex="{sm: \'0 0 50%\', md: \'0 0 200px\'}">{{rule.name.toUpperCase()}}</rr-rule> </div> </ff-col> </ff-col> </ff-panel> <ff-panel class=rr-calendar ng-if=!$ctrl.reservationUnitId> <ff-panel-header> <span translate=RESERVATION_RULES.ANNUAL.HEADER></span> <ff-hint><span translate=RESERVATION_RULES.ANNUAL.HINT></span></ff-hint> </ff-panel-header> <ff-col ff-dim=!$ctrl.rules> <div class="rr-container gutter-v-half"> <rr-rule rule=rule ng-repeat="rule in $ctrl.rules | filter:{ type: \'date\' }" flex="{sm: \'0 0 50%\', md: \'0 0 200px\'}"></rr-rule> </div> <ff-btn-group class=ff-section-buttons> <ff-btn sense=add size=sm ff-click=$ctrl.addDate()><span translate=RESERVATION_RULES.BTN_ADD_DATE></span></ff-btn> </ff-btn-group> </ff-col> </ff-panel> </div> </form> '},BQwv:function(e,t){e.exports='<script type=text/ng-template id=productListTpl> <ff-panel>\n    <ff-panel-header>{{productType.name}}</ff-panel-header>\n    <ff-two-columns>\n      <span ng-if="!productType.products.length" translate="PRODUCTS.LIST.EMPTY"></span>\n\n      <ff-row-head ng-show="productType.products.length">\n        <ff-header>\n          <ff-row>\n            <cell flex="1 0 60px" class="ff-center"><span translate="PRODUCTS.CODE"></span></cell>\n            <cell flex="1 1 400px"><span translate="PRODUCTS.PRODUCT"></span></cell>\n            <ff-btn sense="edit" size="xs" flex="none" class="buttons-row zero-height" title="{{\'GLOBAL.BTN_EDIT\' | translate }}"></ff-btn>\n          </ff-row>\n        </ff-header>\n      </ff-row-head>\n\n      <ff-row ng-repeat="product in productType.products">\n        <ff-static flex="1 0 60px" class="ff-center" ff-bind="product.code"></ff-static>\n        <ff-static flex="1 1 400px" ff-bind="product.name"></ff-static>\n        <ff-btn sense="edit" size="xs" flex="none" class="buttons-row" title="{{\'GLOBAL.BTN_EDIT\' | translate}}" ff-click="vm.edit(product)"></ff-btn>\n      </ff-row>\n    </ff-two-columns>\n  </ff-panel> <\/script> <div class=product-list ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-btn-group ng-show="vm.productTypes.length > 0"> <ff-btn sense=new ff-click=vm.new()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> <div ng-include="\'productListTpl\'" ng-repeat="productType in vm.productTypes"></div> <div> <ff-btn sense=collapse ff-click="vm.collapsed = !vm.collapsed" class=ff-bmargin ng-class="{ collapsed: vm.collapsed }" ng-if="vm.customProducts.products.length > 0"><span translate=PRODUCTS.LIST.CUSTOM></span></ff-btn> <div class=custom-products ng-collapse=vm.collapsed ng-if="vm.customProducts.products.length > 0"> <div ng-include="\'productListTpl\'" ng-init="productType = vm.customProducts"></div> </div> </div> <ff-btn-group> <ff-btn sense=new ff-click=vm.new()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </div> </div> '},EgkG:function(e,t,r){"use strict";r.r(t);r("DbwS"),r("t91x");t.default=angular.module("deskworks.ProductCategoriesCtrl",["debounce","deskworks.ProductCategory"]).controller("ProductCategoriesCtrl",["$scope","$translate","dwAlerts","state","helper","debounce","categories","ProductCategory",function(e,t,r,n,a,s,f,l){var i=this;n.setPageTitle(t.instant("PRODUCT_CATEGORIES.PAGE_TITLE")),i.categories=f,i.save=s(function(e,t,n){if(t.$invalid)return;return e.$$spin=!0,l.save(e).catch(function(e){return r.error(e,"Failed to save product category.")}).finally(function(){e.$$spin=!1})},1e3),i.new=function(){return i.categories.push({})},i.delete=function(e,n){if(e.id){if(!confirm(t.instant("PRODUCT_CATEGORIES.CONFIRM_DELETE")))return;return e.$$spin=!0,l.delete(e.id).catch(function(e){return r.error(e,"Failed to delete product category.")}).then(function(){return i.categories.splice(n,1)}).finally(function(){e.$$spin=!1})}i.categories.splice(n,1)}}])},F3iT:function(e,t){e.exports="<ng-form name=rrForm> <ff-header ff-spin=$ctrl.rule.$$autoSaving class=\"ff-relative ff-spin-sm\"> <ff-header class=rr-role></ff-header> <cell ng-transclude flex=auto> <ff-row> <ff-col> <ff-date ff-model=$ctrl.rule.date ff-required=true ff-validate-alert=Date ff-change=$ctrl.rule.$as()></ff-date> <ff-text ff-model=$ctrl.rule.name ff-change=$ctrl.rule.$as()></ff-text> </ff-col> <ff-btn flex=none sense=delete size=xs ff-click=$ctrl.deleteRule() title=\"{{'RESERVATION_RULES.BTN_DELETE_DATE' | translate}}\"></ff-btn> </ff-row> </cell> </ff-header> <ff-row ng-repeat=\"role in $ctrl.roles\" ng-if=\"(role.$visible || $ctrl.rule.type === 'date') && $ctrl.rule.type !== 'value' && $ctrl.rule.type !== 'static'\"> <ff-label class=rr-role>{{role.name}}</ff-label> <rr-limit rule=$ctrl.rule role=role.id options=$ctrl.options ng-if=\"$ctrl.rule.type === 'roles'\"></rr-limit> <rr-weekday-limit rule=$ctrl.rule role=role.id ng-if=\"$ctrl.rule.type === 'weekday'\"></rr-weekday-limit> <rr-date-limit rule=$ctrl.rule role=role.id ng-if=\"$ctrl.rule.type === 'date'\"></rr-date-limit> </ff-row> <ff-row ng-if=\"$ctrl.rule.type === 'value'\"> <rr-limit rule=$ctrl.rule options=$ctrl.options></rr-limit> </ff-row> <ff-row ng-if=\"$ctrl.rule.type === 'static'\"> <rr-static rule=$ctrl.rule></rr-static> </ff-row> </ng-form> "},GaQu:function(e,t){e.exports='<div class=reservation-type-list ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-panel> <span ng-if=!vm.categories.length translate=RESERVATION_CATEGORIES.LIST.EMPTY></span> <ff-header ng-show=vm.categories.length> <ff-row> <cell flex="0 0 60%"> <span> <span translate=RESERVATION_CATEGORIES.LIST.CATEGORY></span> <ff-hint ng-if=ffBlock.editMode><span translate=RESERVATION_CATEGORIES.LIST.HINT></span></ff-hint> </span> </cell> <cell flex="0 1 40%" class=ff-center><span translate=RESERVATION_CATEGORIES.LIST.NOTICE></span></cell> <ff-btn size=xs flex=none class="buttons-row zero-height"></ff-btn> </ff-row> </ff-header> <div ng-if=ffBlock.editMode dnd-list dnd-drop="callback({ targetList: vm.categories, targetIndex: index })"> <ff-row ng-repeat="category in vm.categories" dnd-draggable=null dnd-callback="vm.onDrop(vm.categories, $index, targetList, targetIndex)" ff-dim=category.$spin ng-include="\'reservationCategoryTpl\'"> </ff-row> </div> <div ng-if=!ffBlock.editMode> <ff-row ng-repeat="category in vm.categories" ng-include="\'reservationCategoryTpl\'"></ff-row> </div> </ff-panel> <ff-btn-group> <ff-btn sense=new ff-click=vm.new()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </div> </div> <script type=text/ng-template id=reservationCategoryTpl> <ff-static flex="0 0 60%" ff-bind="category.name"></ff-static>\n  <ff-static flex="0 1 40%" class="ff-center">\n    {{category.cancellationNonMemberNoticeHours | nd}} / {{category.cancellationMemberNoticeHours | nd}}\n  </ff-static>\n  <ff-btn sense="edit" size="xs" flex="none" class="buttons-row" title="{{\'GLOBAL.BTN_EDIT\' | translate}}" ff-click="vm.edit(category)"></ff-btn> <\/script> '},LnCy:function(e,t){e.exports='<div class=gutter-v> <form name=vm.form id=priceListEdit ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class="ff-grid gutter-v gutter-h"> <ff-panel flex="{lg: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 160px"><req translate=PRICE_LISTS.NAME></req></ff-label> <ff-text flex="1 1 200px" ff-model=vm.priceList.name ff-required=true ff-validate-alert="{{\'PRICE_LISTS.NAME\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 160px"><req translate=PRICE_LISTS.USE_FOR></req></ff-label> <ff-select flex="1 1 200px" ff-model=vm.priceList.useFor ff-required=true ff-validate-alert="{{\'PRICE_LISTS.USE_FOR\' | translate}}" ff-options="opt.name for opt in vm.useForOptions"></ff-select> </label> <div class="ff-grid gutter-h-half"> <label flex=none> <ff-checkbox ff-model=vm.priceList.visibleForVisitors ff-label="{{\'PRICE_LISTS.VISIBLE_FOR_VISITORS_DURING_RESERVATION\' | translate}}"></ff-checkbox> </label> <ff-row flex=none> <label flex=none> <ff-checkbox ff-model=vm.priceList.isArchived>{{\'PRICE_LISTS.ARCHIVED\' | translate}}</ff-checkbox> </label> <ff-static class=ff-no-frame><ff-hint>{{\'PRICE_LISTS.ARCHIVED.HINT\' | translate}}</ff-hint></ff-static> </ff-row> </div> </ff-panel> <ff-panel flex="{lg: \'0 0 50%\'}" ng-if=vm.priceList.date class=ff-flex-start> <label class=ff-row> <ff-label flex="0 1 100px"><span translate=PRICE_LISTS.LAST_UPDATE></span></ff-label> <ff-static ff-bind="vm.priceList.date | date:\'mediumDate\'"></ff-static> </label> </ff-panel> <ff-btn-group> <ff-btn sense=save type=submit ff-click=vm.save() ff-disabled=vm.form.$pristine> <span translate=GLOBAL.BTN_SAVE></span> </ff-btn> <ff-btn sense=remove ff-click=vm.remove() ng-if="vm.priceList.id !== \'new\'"> <span translate=GLOBAL.BTN_DELETE></span> </ff-btn> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> </div> </form> <ff-panel ng-repeat="productType in vm.productTypes" id=productType-{{productType.id}} ff-bulk-read-only ng-if="vm.priceList.id !== \'new\'"> <ff-panel-header>{{productType.name}}</ff-panel-header> <span ng-if=!productType.products.length translate=GLOBAL.NONE></span> <ff-btn-group class=ff-section-buttons> <ff-btn sense=add size=sm ff-click=vm.addProduct(productType)> <span translate=PRICE_LISTS.PRODUCTS.BTN_ADD></span> </ff-btn> </ff-btn-group> <ff-header ng-show="productType.products.length > 0"> <ff-row> <cell><req translate=PRICE_LISTS.PRODUCTS.PRODUCT></req></cell> <cell flex="0 0 60px" class=ff-right><req translate=PRICE_LISTS.PRODUCTS.PRICE></req></cell> <ff-btn-group flex="0 0 auto" class="buttons-row zero-height"> <ff-btn sense=save size=xs></ff-btn> <ff-btn sense=remove size=xs></ff-btn> </ff-btn-group> </ff-row> </ff-header> <form name=productForm id=productForm-{{$index}} ng-repeat="product in productType.products"> <ff-row> <ff-select flex="1 1 80px" ff-attr-name="{ \'product\' }" ff-model=product.product ff-required=true ff-validate-alert="{{\'PRICE_LISTS.PRODUCTS.PRODUCT\' | translate}}" ff-unique="{ array: productType.products, prop: \'product\' }" ff-model-options="{ allowInvalid: true }" ff-options="product.name for product in productType.options"> </ff-select> <label flex="{xs: \'0 1 80px\', md: \'0 1 106px\'}" ng-if=product.product.hasPasses> <ff-label flex="0 1 48px"><req translate=PRICE_LISTS.PRODUCTS.PASSES></req></ff-label> <ff-number ff-model=product.passQty ff-required=true ff-validate-alert="{{\'PRICE_LISTS.PRODUCTS.PASSES\' | translate}}"></ff-number> </label> <label flex="0 1 106px" ng-if=product.product.isCreditable> <ff-label flex="0 0 48px"><req translate=PRICE_LISTS.PRODUCTS.CREDIT></req></ff-label> <ff-price class=ff-right ff-model=product.reservationCredit ff-validate-alert="{{\'PRICE_LISTS.PRODUCTS.CREDIT\' | translate}}"></ff-price> </label> <ff-price flex="0 0 60px" class=ff-right ff-model=product.price ff-required=true ff-validate-alert="{{\'PRICE_LISTS.PRODUCTS.PRICE\' | translate}}"></ff-price> <ff-btn-group flex="0 0 auto" class=buttons-row> <ff-btn sense=save size=xs type=submit ff-click="vm.saveProduct(product, productForm, $index)" ff-disabled=productForm.$pristine title="{{\'GLOBAL.BTN_SAVE\' | translate}}"> </ff-btn> <ff-btn sense=remove size=xs ff-click="vm.removeProduct(product, $index, productType)" title="{{\'GLOBAL.BTN_DELETE\' | translate}}"></ff-btn> </ff-btn-group> </ff-row> </form> <ff-btn-group ng-show="productType.products.length > 0" class=ff-section-buttons> <ff-btn sense=add size=sm ff-click=vm.addProduct(productType)> <span translate=PRICE_LISTS.PRODUCTS.BTN_ADD></span> </ff-btn> </ff-btn-group> </ff-panel> </div> '},OngR:function(e,t){e.exports='<div> <ff-select ff-model=$ctrl.rule[$ctrl.role] ff-options="opt.id as opt.name for opt in $ctrl.options" ng-if="$ctrl.rule.type === \'roles\'" ff-change=$ctrl.rule.$as()></ff-select> <ff-select ff-model=$ctrl.rule.value ff-options="opt.id as opt.name for opt in $ctrl.options" ng-if="$ctrl.rule.type === \'value\'" ff-change=$ctrl.rule.$as()></ff-select> </div> '},SnCj:function(e,t,r){var n={"./membership-category/membership-category-edit.controller.js":"bLIb","./membership-category/membership-category-list.controller.js":"yIgt","./price-list/price-list-edit.controller.js":"eE3n","./price-list/price-list-list.controller.js":"ubVp","./product-categories/product-categories.controller.js":"EgkG","./product/product-edit.controller.js":"xMQj","./product/product-list.controller.js":"qJVN","./reservation-category/reservation-category-edit.controller.js":"lmCY","./reservation-category/reservation-category-list.controller.js":"XzrI","./reservation-unit/reservation-unit-edit.controller.js":"cWtD","./reservation-unit/reservation-unit-list.controller.js":"fQs0"};function a(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id="SnCj"},W5jD:function(e,t,r){"use strict";r.r(t);r("t91x");var n=["$injector",function(e){var t,n=(t=r("SnCj")).keys().map(t);e.loadNewModules(n.map(function(e){return e.default.name})),e.invoke(["$templateCache",function(e){var t=r("pFKl");t.keys().forEach(function(r){return e.put(r.replace(/^\.\//,""),t(r))})}])}];t.default=n},XzrI:function(e,t,r){"use strict";r.r(t);r("DbwS"),r("t91x");t.default=angular.module("deskworks.inventory.reservationCategories",["dnd","deskworks.state","deskworks.reservationCategory.service"]).controller("InventoryReservationCategoriesCtrl",["$scope","$translate","state","dnd","dwAlerts","reservationCategories","reservationCategoryService",function(e,t,r,n,a,s,f){r.setPageTitle(t.instant("RESERVATION_CATEGORIES.PAGE_TITLE")),this.categories=s,this.edit=function(e){return r.setPath("/reservation-types/"+e.id)},this.new=function(){return r.setPath("/reservation-types/new")},this.onDrop=function(e,t,s,l){var i=n.move(e,t,s,l);return i.$spin=!0,f.update(r.getCurrentCenterId(),i.id,{order:i.order}).catch(function(e){return a.error(e,"Failed to reorder reservation category.")}).finally(function(){return delete i.$spin}),!0}}])},aJ1N:function(e,t,r){"use strict";r("T7M0"),r("0rqx");angular.module("ffRichtext",["textAngular"]).directive("ffRichtext",["ffHelper",function(e){return{restrict:"E",scope:!0,compile:function(t,r){var n=angular.element("<text-angular></text-angular>");return e.copyInnerAttrs(t,r,n),t.append(n),this.link},link:function(e,t,r){var n=angular.element(t[0].querySelector("[contenteditable]"));e.$watch("ffBlock.editMode",function(e){angular.isUndefined(e)||(t.toggleClass("ff-read-only",!e),n.attr("contenteditable",e))})}}}])},bLIb:function(e,t,r){"use strict";r.r(t);r("it7j");t.default=angular.module("deskworks.inventory.membershipCategory.edit",["keese","deskworks.inventory.membershipCategory.service"]).controller("MembershipCategoryEditCtrl",["$scope","$route","$translate","dwAlerts","keese","state","helper","membershipCategories","membershipCategoryService",function(e,t,r,n,a,s,f,l,i){var o=this;o.category=f.find(l,t.current.params.membershipCategoryId)||{},"new"===t.current.params.membershipCategoryId&&(o.category.id="new"),s.setPageTitle(r.instant("new"===o.category.id?"MEMBERSHIP_CATEGORIES.NEW.PAGE_TITLE":"MEMBERSHIP_CATEGORIES.EDIT.PAGE_TITLE")),o.save=function(e){if(!f.pointFirstInvalid("#membershipCategory")){var t,r={name:o.category.name,note:o.category.note};return"new"===o.category.id?(r.order=a.generate(l[l.length-1]&&l[l.length-1].order),t=i.create(r)):t=i.update(o.category.id,r),t.catch(function(e){return n.error(e,"Failed to save membership category.")}).then(function(t){if(e.$setPristine(!0),"new"===o.category.id)return s.setPath("/membership-types/"+t.id)})}},o.remove=function(){if(confirm(r.instant("MEMBERSHIP_CATEGORIES.CONFIRM_DELETE")))return i.delete(o.category.id).catch(function(e){return n.error(e,"Failed to remove membership category.")}).then(function(){return s.setPath("/membership-types")})},o.back=function(){return s.setPath("/membership-types")}}])},cWtD:function(e,t,r){"use strict";r.r(t);r("DbwS"),r("t91x"),r("nzBw");var n=r("2/1H");t.default=angular.module("deskworks.inventory.reservationUnit.edit",["deskworks.reservationCategory.service","deskworks.reservationRules",n.a.name]).controller("InventoryReservationUnitEditCtrl",["$scope","$route","$translate","dwAlerts","state","helper","unit","categories","ReservationUnit",function(e,t,r,n,a,s,f,l,i){var o=this;a.setPageTitle(r.instant("new"===f.id?"RESERVATION_UNITS.NEW.PAGE_TITLE":"RESERVATION_UNITS.EDIT.PAGE_TITLE")),o.unit=f,o.categories=l,o.saveReservationUnit=function(e){if(!s.pointFirstInvalid("#reservation-unit-edit")){var r=s.pick(o.unit,["id","name","reservationTypeId","syncWithCalendar","calendarId","description","area"]);return r.area=r.area?+r.area:null,i.save(a.getCurrentCenterId(),r).then(function(e){if(o.form.$setPristine(),"new"===o.unit.id)return a.setPath("/reservation-units/"+e.id);t.reload()}).catch(function(e){return n.error(e,"Failed to save reservation unit.")})}},o.removeReservationUnit=function(){if(confirm(r.instant("RESERVATION_UNITS.CONFIRM_DELETE")))return i.delete(a.getCurrentCenterId(),o.unit.id).then(function(){return a.setPath("/reservation-units")}).catch(function(e){return n.error(e,"Failed to remove reservation unit.")})},o.uploadPhoto=function(e,t){return t&&t.length>0?n.error(r.instant("GLOBAL.PHOTO.INVALID_FORMAT")):e&&e.length>0?(o.spinUpload=!0,i.uploadPhoto(a.getCurrentCenterId(),o.unit.id,e[0]).catch(function(e){return n.error(e,"Failed to upload photo.")}).finally(function(){o.spinUpload=!1}).then(function(e){o.unit.thumbnail=e.data.thumbnail?e.data.thumbnail+"?"+Date.now():o.unit.thumbnail,o.unit.photo=e.data.photo+"?"+Date.now()})):void 0},o.back=function(){return a.setPath("/reservation-units")},o.calSyncChange=function(){o.unit.syncWithCalendar||(o.unit.calendarId=null),o.calendarIdEnabled=o.unit.syncWithCalendar},e.$watch("state.getCurrentCenterId()",function(e,t){e!==t&&a.setPath("/reservation-units")})}])},"d7C/":function(e,t){e.exports='<div id=productCategories ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <ff-panel style=max-width:600px class=ff-bmargin> <ff-header> <ff-row> <cell class=ff-right flex="0 0 60px"><req translate=PRODUCT_CATEGORIES.CODE></req></cell> <cell><span translate=PRODUCT_CATEGORIES.NAME></span></cell> <ff-hint flex=none><span translate=PRODUCT_CATEGORIES.HINT></span></ff-hint> </ff-row> </ff-header> <form name=form ng-repeat="category in $ctrl.categories" novalidate> <ff-row ff-dim=category.$$spin> <ff-text name=productCategoryCode ff-model=category.code flex="0 0 60px" class=ff-right ff-change="$ctrl.save(category, form, $index)" placeholder=1-05 ff-required=true ff-validate-alert="{{\'PRODUCT_CATEGORIES.CODE\' | translate}}" ff-disabled="category.code === \'0-00\'"></ff-text> <ff-text name=productCategoryName ff-model=category.name placeholder="Private Office" ff-change="$ctrl.save(category, form, $index)"></ff-text> <ff-btn-group flex=none class=buttons-row> <ff-btn sense=remove size=xs flex="0 0 auto" ff-click="$ctrl.delete(category, $index)" title="{{\'GLOBAL.BTN_DELETE\' | translate}}" ff-disabled="category.code === \'0-00\'"></ff-btn> </ff-btn-group> </ff-row> </form> <ff-btn-group class=ff-section-buttons> <ff-btn sense=new size=sm ff-click=$ctrl.new()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </ff-panel> </div> '},dSKb:function(e,t){e.exports='<form name=formProduct id=productEdit novalidate ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class="ff-grid gutter-v gutter-h-half"> <ff-panel flex="{lg: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 0 92px"><req translate=PRODUCTS.NAME></req></ff-label> <ff-text name=name ff-model=vm.product.name ff-required=true ff-maxlength=128 ff-validate-alert="{{\'PRODUCTS.NAME\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 0 92px"><span translate=PRODUCTS.DESCRIPTION></span></ff-label> <ff-textarea name=description ff-model=vm.product.description ff-maxlength=1024 rowspan=3 ff-validate-alert="{{\'PRODUCTS.DESCRIPTION\' | translate}}"></ff-textarea> </label> <div class=ff-grid> <label flex="{sm: \'0 0 65%\'}" class=ff-row> <ff-label flex="0 0 92px"><req translate=PRODUCTS.ITEM_CATEGORY></req></ff-label> <ff-select name=productCategory ff-model=vm.product.productCategoryId ff-options="opt.id as opt.fullName for opt in vm.productCategories" ff-required=true ff-validate-alert="{{\'PRODUCTS.ITEM_CATEGORY\' | translate}}"></ff-select> </label> <label flex="{sm: \'0 0 35%\'}" class=ff-row> <ff-label flex="0 0 92px"><req translate=PRODUCTS.ITEM_NUMBER></req></ff-label> <ff-number name=productNumber ff-model=vm.product.productNumber ff-required=true ff-gte=0 ff-lt=100 ff-validate-alert="{{\'PRODUCTS.ITEM_NUMBER\' | translate}}"></ff-number> </label> </div> <quick-books-account product-id=vm.product.id save=vm.saveQuickBooks ng-if=vm.product.id></quick-books-account> <label class=ff-row ng-if="vm.product.type.id === \'membership\' && !vm.product.hideInSelfRegistration && vm.product.id"> <ff-label flex="0 0 92px"> <span translate=PRODUCTS.WEBSITE_LINK></span> <ff-hint><span translate=PRODUCTS.WEBSITE_LINK.HINT></span></ff-hint> </ff-label> <ff-static> <a href={{vm.getMemberSignUpUrl()}} target=_blank rel=noopener>{{vm.getMemberSignUpUrl()}}</a> </ff-static> </label> </ff-panel> <ff-panel flex="{lg: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 0 90px"><req translate=PRODUCTS.PRODUCT_TYPE></req></ff-label> <ff-select name=productType ff-model=vm.product.type ff-required=true ff-validate-alert="{{\'PRODUCTS.PRODUCT_TYPE\' | translate}}" ff-options="type.name for type in vm.product.options.productTypes"></ff-select> </label> <label class=ff-row flex="1 1 50%" ng-if="vm.product.type.id === \'membership\' || vm.product.type.id === \'services\'"> <ff-label flex="0 0 90px" ng-if="vm.product.type.id === \'membership\'"> <req translate=PRODUCTS.MEMBERSHIP_CATEGORY></req> </ff-label> <ff-select name=membershipType ff-model=vm.product.membershipType ff-required=true ng-if="vm.product.type.id === \'membership\'" ff-validate-alert="{{\'PRODUCTS.MEMBERSHIP_CATEGORY\' | translate}}" ff-options="type.name for type in vm.product.options.membershipTypes"></ff-select> </label> <label class=ff-row flex="1 1 50%" ng-if="vm.product.type.id === \'membership\' || vm.product.type.id === \'services\'"> <ff-label flex="0 0 90px"> <req translate=PRODUCTS.BILLING_FREQUENCY></req> </ff-label> <ff-select name=billingFrequency ff-model=vm.product.billingFrequency ff-required=true ff-validate-alert="{{\'PRODUCTS.BILLING_FREQUENCY\' | translate}}" ff-options="billingFrequency.name for billingFrequency in vm.product.options.billingFrequencies"></ff-select> </label> <div class=ff-grid ng-if="vm.product.type.id === \'membership\'"> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-checkbox name=isCreditable ff-model=vm.product.isCreditable class=ff-control> <span translate=PRODUCTS.IS_CREDITABLE></span> </ff-checkbox> </label> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-checkbox name=hasPasses ff-model=vm.product.hasPasses class=ff-control> <span translate=PRODUCTS.HAS_PASSES></span> </ff-checkbox> </label> </div> <label class=ff-row ng-if="vm.product.type.id === \'membership\'"> <ff-label flex="1 0 50%" ng-disabled=!vm.product.hasPasses> <req translate=PRODUCTS.PASS_PRODUCT></req> </ff-label> <ff-select flex="1 0 50%" name=passProduct ff-model=vm.product.passProduct ff-disabled=!vm.product.hasPasses ff-required=vm.product.hasPasses ff-validate-alert="{{\'PRODUCTS.PASS_PRODUCT\' | translate}}" ff-options="passProduct.name for passProduct in vm.product.options.passProducts"></ff-select> </label> <div class=ff-grid ng-if="vm.product.type.id === \'membership\'"> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-label flex="0 0 50%" ng-disabled=!vm.product.hasPasses> <req translate=PRODUCTS.COUNT_CHECK_INS_PER></req> </ff-label> <ff-select flex="1 0 50%" name=countCheckInsPer ff-model=vm.product.countCheckInsPer ff-disabled=!vm.product.hasPasses ff-required=vm.product.hasPasses ff-validate-alert="{{\'PRODUCTS.COUNT_CHECK_INS_PER\' | translate}}"> <option value={{opt.id}} ng-repeat="opt in vm.optsCountCheckInsPer">{{opt.name}}</option> </ff-select> </label> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-checkbox name=reserveWithNonMemberRules ff-model=vm.product.reserveWithNonMemberRules class=ff-control> <span translate=PRODUCTS.ONLY_NON_MEMBER_HOURS></span> </ff-checkbox> </label> </div> <div class=ff-grid ng-if="vm.product.type.id === \'rental\'"> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-checkbox name=allowReservationCredits ff-model=vm.product.allowReservationCredits class=ff-control> <span translate=PRODUCTS.ALLOW_RESERVATION_CREDITS></span> </ff-checkbox> </label> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-checkbox name=canBuyOnSplashPage ff-model=vm.product.canBuyOnSplashPage class=ff-control> <span translate=PRODUCTS.BUY_ON_SPLASH_PAGE></span> </ff-checkbox> </label> </div> <div class=ff-grid> <label flex="{sm: \'1 0 50%\'}" class=ff-row> <ff-checkbox name=taxable ff-model=vm.product.taxable class=ff-control> <span translate=PRODUCTS.TAXABLE></span> </ff-checkbox> </label> <label flex="{sm: \'0 0 50%\'}" class=ff-row ng-if="vm.product.type.id === \'membership\' || vm.product.type.id === \'services\'"> <ff-checkbox name=hideInSelfRegistration ff-model=vm.product.hideInSelfRegistration class=ff-control> <span translate=PRODUCTS.HIDE_FOR_SIGN_UP></span> </ff-checkbox> </label> </div> <label class=ff-row ng-if="vm.product.type.id === \'membership\'"> <ff-checkbox name=hasRegistrationFee ff-model=vm.product.hasRegistrationFee class=ff-control> <span translate=PRODUCTS.HAS_REGISTRATION_FEE></span> </ff-checkbox> </label> <ff-row ng-if="vm.product.type.id === \'rental\'"> <label flex="1 0 50%" class=ff-row> <ff-label flex="3 0 60px"><req translate=PRODUCTS.PASS_SIZE></req></ff-label> <ff-number flex="1 1 10px" name=passSize ff-model=vm.product.passSize ff-required=true ff-validate-alert="{{\'PRODUCTS.PASS_SIZE\' | translate}}"></ff-number> </label> <ff-static flex="{xs: \'0 0 0\', sm: \'0 0 50%\'}"></ff-static> </ff-row> <div class=ff-grid ng-if="vm.product.type.id === \'rental\'"> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-label flex="3 0 60px"><req translate=PRODUCTS.MIN_PASS translate-values="{ minPassUnit: vm.passMinUnit }"></req></ff-label> <ff-select flex="1 1 10px" name=passMin ff-model=vm.product.passMin ff-required=true ff-validate-alert="Min {{vm.passMinUnit}}" ff-options="opt.id as opt.name for opt in vm.optsPassMin"></ff-select> </label> <label flex="{sm: \'0 0 50%\'}" class=ff-row> <ff-label flex="3 0 60px"><req translate=PRODUCTS.MAX_PASS></req></ff-label> <ff-select flex="1 1 10px" name=passMax ff-model=vm.product.passMax ff-required=true ff-options="max.name for max in vm.optsPassMax" ff-validate-alert="{{\'PRODUCTS.MAX_PASS\' | translate}}"></ff-select> </label> </div> <label class=ff-row ng-if="vm.product.type.id === \'rental\'"> <ff-label flex="1 1 220px"><span translate=PRODUCTS.RESERVATION_CATEGORY></span></ff-label> <ff-select flex="1 1 344px" name=reservationType ff-model=vm.product.reservationTypeId> <option value="" translate=PRODUCTS.NO_RESERVATION_CATEGORY></option> <option ng-repeat="resType in vm.product.options.reservationTypes" value={{resType.id}}>{{resType.name}}</option> </ff-select> </label> </ff-panel> <printer-usage-free-copies flex="{md: \'0 0 50%\'}" style=margin-left:auto free-copies-settings=vm.product.printerUsageFreeCopiesSettings ng-if="vm.product.type.id === \'membership\' && vm.product.printerUsageFreeCopiesSettings.length > 0"></printer-usage-free-copies> <ff-btn-group> <ff-btn sense=save type=submit ff-disabled=formProduct.$pristine ff-click=vm.save(formProduct)> <span translate=GLOBAL.BTN_SAVE></span> </ff-btn> <ff-btn sense=remove ng-if=vm.product.id ff-click=vm.remove()> <span translate=GLOBAL.BTN_DELETE></span> </ff-btn> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> </div> </form> <div id=productPriceLists ff-bulk-read-only style="margin:1.5rem 0"> <ff-panel ng-if=vm.product.id> <ff-panel-header><span translate=PRODUCTS.PRICE_LISTS.HEADER></span></ff-panel-header> <ff-btn-group class=ff-section-buttons> <ff-btn sense=add size=sm ff-click=vm.addPriceList()><span translate=PRODUCTS.PRICE_LISTS.BTN_ADD></span></ff-btn> </ff-btn-group> <ff-header ng-show="vm.product.priceLists.length > 0"> <ff-row> <cell><req translate=PRODUCTS.PRICE_LISTS.PRICE_LIST></req></cell> <cell flex="0 0 60px" ng-if=vm.product.hasPasses><req translate=PRODUCTS.PRICE_LISTS.PASSES></req></cell> <cell flex="0 0 60px" class=ff-right ng-if=vm.product.isCreditable><req translate=PRODUCTS.PRICE_LISTS.CREDIT></req></cell> <cell flex="0 0 60px" class=ff-right><req translate=PRODUCTS.PRICE_LISTS.PRICE></req></cell> <ff-btn-group flex=none class="buttons-row zero-height"> <ff-btn sense=save size=xs title="{{\'GLOBAL.BTN_SAVE\' | translate}}"></ff-btn> <ff-btn sense=remove size=xs title="{{\'GLOBAL.BTN_DELETE\' | translate}}"></ff-btn> </ff-btn-group> </ff-row> </ff-header> <form name=priceListForm id=productPriceList-{{priceList.id}} ng-repeat="priceList in vm.product.priceLists" novalidate> <ff-row> <ff-select name=priceList ff-model=priceList.priceList ff-required=true ff-validate-alert="{{\'PRODUCTS.PRICE_LISTS.PRICE_LIST\' | translate}}" ff-unique="{ array: vm.product.priceLists, prop: \'priceList\' }" ff-model-options="{ allowInvalid: true }" ff-options="priceList.name for priceList in vm.product.options.priceLists"> </ff-select> <ff-number flex="0 0 60px" name=passQty class=ff-center ff-model=priceList.passQty ff-required=true ff-validate-alert="{{\'PRODUCTS.PRICE_LISTS.PASSES\' | translate}}" ng-if=vm.product.hasPasses></ff-number> <ff-price flex="0 0 60px" name=credit class=ff-right ff-model=priceList.reservationCredit ff-required=true ff-validate-alert="{{\'PRODUCTS.PRICE_LISTS.CREDIT\' | translate}}" ng-if=vm.product.isCreditable></ff-price> <ff-price flex="0 0 60px" name=price class=ff-right ff-model=priceList.price ff-required=true ff-validate-alert="{{\'PRODUCTS.PRICE_LISTS.PRICE\' | translate}}"></ff-price> <ff-btn-group flex=none class=buttons-row> <ff-btn sense=save type=submit size=xs title="{{\'GLOBAL.BTN_SAVE\' | translate}}" ff-click="vm.savePriceList(priceList, priceListForm)" ff-disabled=priceListForm.$pristine></ff-btn> <ff-btn sense=remove size=xs title="{{\'GLOBAL.BTN_DELETE\' | translate}}" ff-click="vm.removePriceList(priceList, $index)"></ff-btn> </ff-btn-group> </ff-row> </form> <ff-btn-group ng-show="vm.product.priceLists.length > 0" class=ff-section-buttons> <ff-btn sense=add size=sm ff-click=vm.addPriceList()> <span translate=PRODUCTS.PRICE_LISTS.BTN_ADD></span> </ff-btn> </ff-btn-group> </ff-panel> </div> '},eE3n:function(e,t,r){"use strict";r.r(t);r("it7j");t.default=angular.module("deskworks.inventory.priceList.edit",["deskworks.inventory.priceList.service"]).controller("PriceListEditCtrl",["$scope","$rootScope","$filter","$timeout","$translate","dwAlerts","state","helper","priceList","priceListService","optsProductType",function(e,t,r,n,a,s,f,l,i,o,c){var d=this;f.setPageTitle(a.instant("new"===i.id?"PRICE_LISTS.NEW.PAGE_TITLE":"PRICE_LISTS.EDIT.PAGE_TITLE")),d.priceList=i,d.useForOptions=[{id:"members",name:a.instant("PRICE_LISTS.USE_FOR.MEMBERS")},{id:"nonMembers",name:a.instant("PRICE_LISTS.USE_FOR.NON_MEMBERS")},{id:"none",name:a.instant("PRICE_LISTS.USE_FOR.NONE")}],d.priceList.useFor=l.find(d.useForOptions,d.priceList.useFor),d.productTypes=angular.copy(c),d.productTypes.forEach(function(e){e.products=[],e.options=[]}),d.priceList.options.products.forEach(function(e){var t=l.find(d.productTypes,e.type);t?t.options.push(e):console.warn("Product option of unknown type:",e)}),d.priceList.products.forEach(function(e){e.product=l.find(d.priceList.options.products,e.productId),e.price=r("price")(e.price),angular.isDefined(e.reservationCredit)&&(e.reservationCredit=r("price")(e.reservationCredit)),null===e.passQty&&(e.passQty=0);var t=l.find(d.productTypes,e.product.type);t?t.products.push(e):console.warn("Product of unknown type:",e)}),d.remove=function(){if(confirm(a.instant("PRICE_LISTS.CONFIRM_DELETE")))return o.deletePricelist(f.getCurrentCenterId(),d.priceList.id).then(function(){return f.setPath("/pricelists")}).catch(function(e){return s.error(e,"Failed to remove price list.")})},d.save=function(){if(!l.pointFirstInvalid("#priceListEdit")){var e={name:d.priceList.name,visibleForVisitors:d.priceList.visibleForVisitors,useFor:d.priceList.useFor?d.priceList.useFor.id:d.priceList.useFor,isArchived:d.priceList.isArchived};return("new"===d.priceList.id?o.createPricelist(f.getCurrentCenterId(),e):o.updatePricelist(f.getCurrentCenterId(),d.priceList.id,e)).then(function(e){if(d.priceList.date=moment(),d.form.$setPristine(),"new"===d.priceList.id)return f.setPath("/pricelists/"+e.id)}).catch(function(e){return s.error(e,"Failed to save price list.")})}},d.back=function(){return f.setPath("/pricelists")},d.addProduct=function(e){if(!e.options.length)return s.error(a.instant("PRICE_LISTS.NO_PRODUCTS_ERROR"));var t={id:"new",productId:e.options[0].id,product:e.options[0],price:"",passQty:0};e.products.push(t),n(function(){var t=document.querySelector("#productType-"+e.id+" form:last-of-type");t&&(t=t.querySelector("select:first-of-type"))&&t.focus()})},d.saveProduct=function(e,t,r){if(!l.pointFirstInvalid("#productForm-"+r)){var n={productId:e.product.id,price:e.price};return e.product.isCreditable&&(n.reservationCredit=e.reservationCredit),e.product.hasPasses&&(n.passQty=e.passQty),("new"===e.id?o.createProduct(f.getCurrentCenterId(),d.priceList.id,n):o.updateProduct(f.getCurrentCenterId(),d.priceList.id,e.id,n)).then(function(r){"new"===e.id&&(e.id=r.id),t.$setPristine()}).catch(function(e){return s.error(e,"Failed to save product.")})}},d.removeProduct=function(e,t,r){if("new"===e.id)r.products.splice(t,1);else if(confirm(a.instant("PRICE_LISTS.PRODUCTS.CONFIRM_DELETE")))return o.deleteProduct(f.getCurrentCenterId(),d.priceList.id,e.id).then(function(){return r.products.splice(t,1)}).catch(function(e){return s.error(e,"Failed to remove product.")})},e.$watch("state.getCurrentCenterId()",function(e,t){e!==t&&f.setPath("/pricelists")})}])},ekOF:function(e,t){e.exports='<div id=inventoryPriceLists ng-if=!vm.cloning ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-panel> <ff-header ng-if=vm.priceLists.length> <ff-row> <cell flex="0 0 36px" ng-hide=vm.printCollapsed class=ff-center title="{{\'PRICE_LISTS.LIST.PRINT\' | translate}}"> <ff-icon sense=print></ff-icon> </cell> <cell flex="1 1 70%" translate=PRICE_LISTS.NAME></cell> <cell flex="0 0 15%" class=ff-center><span translate=PRICE_LISTS.LAST_UPDATE></span></cell> <cell flex="0 0 15%" class=ff-center><span translate=PRICE_LISTS.VISIBLE_FOR_VISITORS></span></cell> <cell flex="0 0 15%" class=ff-center><span translate=PRICE_LISTS.ARCHIVED></span></cell> <ff-btn-group flex="0 0 auto" class="buttons-row zero-height"> <ff-btn sense=edit size=xs></ff-btn> <ff-btn sense=clone size=xs></ff-btn> </ff-btn-group> </ff-row> </ff-header> <span ng-if=!vm.priceLists.length translate=PRICE_LISTS.LIST.EMPTY></span> <ff-row ng-repeat="pl in vm.priceLists"> <ff-static flex="0 0 36px" class=ff-center ng-hide=vm.printCollapsed> <ff-checkbox class=ff-read-only-ignore ff-model=pl.include></ff-checkbox> </ff-static> <ff-static flex="1 1 70%" ff-bind=pl.name></ff-static> <ff-static flex="0 0 15%" class=ff-center ff-bind-html="pl.date | date:\'mediumDate\'"></ff-static> <ff-static flex="0 0 15%" class=ff-center ff-bind="pl.visibleForVisitors | yesno"></ff-static> <ff-static flex="0 0 15%" class=ff-center ff-bind="pl.isArchived | yesno"></ff-static> <ff-btn-group flex="0 0 auto" class=buttons-row> <ff-btn sense=edit size=xs ff-click=vm.edit(pl) title="{{\'GLOBAL.BTN_EDIT\' | translate}}"></ff-btn> <ff-btn sense=clone size=xs ff-click=vm.clone(pl) title="{{\'PRICE_LISTS.LIST.BTN_CLONE\' | translate}}"></ff-btn> </ff-btn-group> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=new ff-click=vm.new()><span translate=GLOBAL.BTN_NEW></span></ff-btn> <ff-btn sense=collapseBtn ff-click=vm.togglePrint() ng-class="{ collapsed: vm.printCollapsed }" ff-disabled=!vm.priceLists.length><span translate=PRICE_LISTS.LIST.BTN_PRINT></span></ff-btn> </ff-btn-group> </div> <div ng-collapse=vm.printCollapsed class=ff-grid> <ng-include src="\'price-list-report/price-list-report.tpl.html\'" class=ff-tmargin></ng-include> </div> </div> <form name=formClonePriceList id=clonePriceList ng-if=vm.cloning ff-bulk-read-only style=max-width:600px> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-panel> <ff-panel-header> <span translate=PRICE_LISTS.CLONE.HEADER translate-values="{ priceList: vm.cloning.name }"></span> </ff-panel-header> <label class=ff-row> <ff-label flex="0 1 160px"><span translate=PRICE_LISTS.CLONE.CENTER></span></ff-label> <dw-select-center flex="1 0 180px" ff-model=vm.dstCenterId></dw-select-center> </label> <label class=ff-row> <ff-label flex="0 1 160px" ff-model=vm.editAfterCloning><span translate=PRICE_LISTS.CLONE.EDIT></span></ff-label> <ff-static><ff-checkbox flex="0 0 30px" ff-model=vm.editAfterCloning></ff-checkbox></ff-static> </label> </ff-panel> <ff-btn-group> <ff-btn type=submit sense=clone ff-click=vm.clone(vm.cloning)><span translate=PRICE_LISTS.LIST.BTN_CLONE></span></ff-btn> <ff-btn sense=cancel ff-click="vm.cloning = false"><span translate=GLOBAL.BTN_CANCEL></span></ff-btn> </ff-btn-group> </div> </form> '},fQs0:function(e,t,r){"use strict";r.r(t);r("it7j");var n=r("2/1H");t.default=angular.module("deskworks.inventory.reservationUnit.list",["deskworks.reservationRules.optsWhoCanReserve",n.a.name]).controller("InventoryReservationUnitListCtrl",["$scope","$translate","state","helper","reservationUnits","optsWhoCanReserve",function(e,t,r,n,a,s){r.setPageTitle(t.instant("RESERVATION_UNITS.PAGE_TITLE")),this.reservationUnits=a,this.reservationUnits.forEach(function(e){e.whoCanReserve=(n.find(s,e.whoCanReserve)||{}).name}),this.edit=function(e){return r.setPath("/reservation-units/"+e.id)},this.new=function(){return r.setPath("/reservation-units/new")}}])},"gQ/F":function(e,t){e.exports='<form name=formMembershipCategory id=membershipCategory ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-panel style=max-width:600px> <label class=ff-row> <ff-label flex="0 0 62px"><req translate=MEMBERSHIP_CATEGORIES.NAME></req></ff-label> <ff-text name=name ff-model=vm.category.name ff-required=true ff-validate-alert="{{\'MEMBERSHIP_CATEGORIES.NAME\' | translate}}"></ff-text> </label> <ff-row> <ff-textarea name=description ff-model=vm.category.note placeholder="{{\'MEMBERSHIP_CATEGORIES.NAME\' | translate}}"></ff-textarea> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=save type=submit ff-click=vm.save(formMembershipCategory) ff-disabled=formMembershipCategory.$pristine> <span translate=GLOBAL.BTN_SAVE></span> </ff-btn> <ff-btn sense=remove ng-if="vm.category.id !== \'new\'" ff-click=vm.remove()> <span translate=GLOBAL.BTN_DELETE></span> </ff-btn> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> </div> </form> '},lmCY:function(e,t,r){"use strict";r.r(t);r("DbwS"),r("t91x"),r("2UZ+"),r("aJ1N");t.default=angular.module("deskworks.inventory.reservationCategory",["keese","ffRichtext","deskworks.helper","deskworks.reservationCategory.service"]).controller("InventoryReservationCategoryEditCtrl",["$scope","$window","$translate","keese","dwAlerts","state","helper","reservationCategory","reservationCategories","reservationCategoryService",function(e,t,r,n,a,s,f,l,i,o){var c=this;if(s.setPageTitle(r.instant("new"===l.id?"RESERVATION_CATEGORIES.NEW.PAGE_TITLE":"RESERVATION_CATEGORIES.EDIT.PAGE_TITLE")),c.category=l,c.hours=[0,1,2,12,24,48,72,120,168],c.cancellation=[{notice:"RESERVATION_CATEGORIES.NOTICE_NON_MEMBER",hint:"RESERVATION_CATEGORIES.NOTICE_NON_MEMBER.HINT",model:c.category.cancellationNonMemberNoticeHours},{notice:"RESERVATION_CATEGORIES.NOTICE_MEMBER",hint:"RESERVATION_CATEGORIES.NOTICE_MEMBER.HINT",model:c.category.cancellationMemberNoticeHours}],c.category.photos){var d=f.findIndex(c.category.photos,null);d>=0&&c.category.photos.splice(d,1)}c.save=function(e){if(!f.pointFirstInvalid("#reservationCategory")){var t,r={name:c.category.name,description:c.category.description,cancellationNonMemberNoticeHours:c.cancellation[0].model,cancellationMemberNoticeHours:c.cancellation[1].model};return"new"===c.category.id?(r.order=n.generate(i[i.length-1]&&i[i.length-1].order),t=o.create(s.getCurrentCenterId(),r)):t=o.update(s.getCurrentCenterId(),c.category.id,r),t.then(function(t){if(e.$setPristine(),"new"===c.category.id)return s.setPath("/reservation-types/"+t.id)}).catch(function(e){return a.error(e,"Failed to save reservation category.")})}},c.remove=function(){if(t.confirm(r.instant("RESERVATION_CATEGORIES.CONFIRM_DELETE")))return o.delete(s.getCurrentCenterId(),c.category.id).then(function(){return s.setPath("/reservation-types")}).catch(function(e){return a.error(e,"Failed to remove reservation category.")})},c.back=function(){return s.setPath("/reservation-types")},c.uploadPhoto=function(e,t,n){return t&&t.length>0?a.error(r.instant("RESERVATION_CATEGORIES.PHOTOS.INVALID_FORMAT")):e&&e.length>0?(n?(f=o.updatePhoto(s.getCurrentCenterId(),c.category.id,n.id,e[0]),n.spin=!0):(f=o.createPhoto(s.getCurrentCenterId(),c.category.id,e[0]),c.spinAddPhoto=!0),f.then(function(e){n?n.url=e.data.url:c.category.photos.push({id:e.data.id,url:e.data.url})}).catch(function(e){return a.error(e,"Failed to upload reservation category photo.")}).finally(function(){c.spinAddPhoto=!1,n&&(n.spin=!1)})):void 0;var f},c.removePhoto=function(e){if(t.confirm(r.instant("RESERVATION_CATEGORIES.PHOTOS.CONFIRM_DELETE")))return o.deletePhoto(s.getCurrentCenterId(),c.category.id,e.id).then(function(){var t=f.findIndex(c.category.photos,e.id);t>=0&&c.category.photos.splice(t,1)}).catch(function(e){return a.error(e,"Failed to remove reservation category photo.")})}}])},nzBw:function(e,t,r){"use strict";r("it7j");var n=r("7LHe"),a=r.n(n),s=(r("rYdl"),r("F3iT")),f=r.n(s),l=(angular.module("deskworks.reservationRules.rrRule",["autoSave","deskworks.reservationRules.service"]).directive("rrRule",function(){return{scope:!0,require:{rrCtrl:"^^reservationRules"},transclude:!0,template:f.a,controller:"RrRuleCtrl as $ctrl",bindToController:{rule:"<",options:"<",ruleSave:"&?"}}}).controller("RrRuleCtrl",["$scope","$element","$timeout","helper","dwAlerts","ReservationRules","autoSave",function(e,t,r,n,a,s,f){var l=this;l.$onInit=function(){t.addClass("ff-col"),l.roles=s.roles},l.$onChanges=function(){l.rule&&r(function(){var t=l.ruleSave||function(){return s.save({centerId:l.rrCtrl.centerId,reservationUnitId:l.rrCtrl.reservationUnitId},this).catch(function(e){return a.error(e,"Failed to save rule.")})};l.rule.$as=f.wrap(t,e.rrForm)})},l.deleteRule=function(){return(l.rule.id?s.delete({centerId:l.rrCtrl.centerId,ruleId:l.rule.id}):r()).then(function(){return l.rrCtrl.rules.splice(l.rrCtrl.rules.indexOf(l.rule),1)}).catch(function(e){return a.error(e,"Failed to delete rule")})}}]),r("OngR")),i=r.n(l),o=(angular.module("deskworks.reservationRules.rrLimit",[]).directive("rrLimit",function(){return{scope:!0,template:i.a,controller:"RrLimitCtrl as $ctrl",bindToController:{rule:"<",role:"<",options:"<"}}}).controller("RrLimitCtrl",["$scope","$element",function(e,t){this.$onInit=function(){return t.addClass("ff-col")}}]),r("zae7")),c=r.n(o),d=(angular.module("deskworks.reservationRules.rrDateLimit",["deskworks.reservationRules.service"]).directive("rrDateLimit",function(){return{scope:!0,require:["rrDateLimit","^^reservationRules"],template:c.a,controller:"RrDateLimitCtrl as $ctrl",bindToController:{rule:"<",role:"<"},link:function(e,t,r,n){n[0].rrCtrl=n[1]}}}).controller("RrDateLimitCtrl",["$scope","$element","$timeout","$translate","helper","ReservationRules",function(e,t,r,n,a,s){var f=this;f.options=[{id:!0,name:n.instant("RESERVATION_RULES.AVAILABLE")},{id:!1,name:n.instant("RESERVATION_RULES.NOT_AVAILABLE")}],f.$onInit=function(){t.addClass("ff-col"),e.$watch("$ctrl.rrCtrl.rules",f.updateGhosts)},f.addInterval=function(){f.rule.$$autoSaving||(f.rule[f.role].$ghosts&&f.rule[f.role].$ghosts.pop(),r(function(){f.rule[f.role].intervals.push({from:null,to:null}),f.updateGhosts()}))},f.deleteInterval=function(e){if(!f.rule.$$autoSaving)return f.rule[f.role].intervals.splice(f.rule[f.role].intervals.indexOf(e),1),r(f.updateGhosts),e.id?f.rule.$as():null},f.updateGhosts=function(){if(f.rrCtrl){var e=f.rrCtrl.rules.filter(function(e){return"date"===e.type});s.roles.forEach(function(t){var r=e.reduce(function(e,r){return r[t.id].available&&r[t.id].intervals.length>e?r[t.id].intervals.length:e},0);e.forEach(function(e){e[t.id].$ghosts=new Array(r-(e[t.id].available?e[t.id].intervals.length:0))})})}}}]),r("wJY6")),p=r.n(d),u=(angular.module("deskworks.reservationRules.rrStatic",[]).directive("rrStatic",function(){return{scope:!0,require:["rrWeekdayLimit","^^reservationRules"],template:p.a,controller:"RrStaticCtrl as $ctrl",bindToController:{rule:"<"}}}).controller("RrStaticCtrl",["$scope","$element","helper",function(e,t,r){this.$onInit=function(){return t.addClass("ff-col")}}]),r("10fB")),m=r.n(u);angular.module("deskworks.reservationRules.rrWeekdayLimit",["deskworks.reservationRules.service"]).directive("rrWeekdayLimit",function(){return{scope:!0,require:["rrWeekdayLimit","^^reservationRules"],template:m.a,controller:"RrWeekdayLimitCtrl as $ctrl",bindToController:{rule:"<",role:"<"},link:function(e,t,r,n){n[0].rrCtrl=n[1],n[0].onInit()}}}).controller("RrWeekdayLimitCtrl",["$scope","$element","$timeout","$translate","$locale","helper","ReservationRules",function(e,t,r,n,a,s,f){var l=this;l.weekdayIds=["sun","mon","tue","wed","thu","fri","sat"],l.options=[{id:!0,name:n.instant("RESERVATION_RULES.AVAILABLE")},{id:!1,name:n.instant("RESERVATION_RULES.NOT_AVAILABLE")}],l.onChangeAvailable=function(){if(angular.isString(l.rule[l.role].available)){var e=s.find(l.rrCtrl.rules,{uid:l.rule[l.role].available});l.rule[l.role].intervals=e[l.role].intervals.map(function(e){return{from:e.from.clone(),to:e.to.clone()}}),l.rule[l.role].available=e[l.role].available}l.updateGhosts(),l.rule.$as()},l.onInit=function(){t.addClass("ff-col"),l.weekdayIds.forEach(function(e){e!==l.rule.uid&&l.options.push({id:e,name:n.instant("RESERVATION_RULES.COPY_FROM",{weekday:s.find(l.rrCtrl.rules,{uid:e}).name.toUpperCase()})})}),e.$watchCollection("$ctrl.rule[$ctrl.role].intervals",function(){return l.updateGhosts()})},l.addInterval=function(){l.rule.$$autoSaving||(l.rule[l.role].$ghosts.pop(),r(function(){return l.rule[l.role].intervals.push({from:null,to:null})}))},l.deleteInterval=function(e){if(!l.rule.$$autoSaving)return l.rule[l.role].intervals.splice(l.rule[l.role].intervals.indexOf(e),1),e.id?l.rule.$as():null},l.updateGhosts=function(){var e=l.rrCtrl.rules.filter(function(e){return"weekday"===e.type});f.roles.forEach(function(t){var r=e.reduce(function(e,r){return r[t.id].available&&r[t.id].intervals.length>e?r[t.id].intervals.length:e},0);e.forEach(function(e){e[t.id].$ghosts=new Array(r-(e[t.id].available?e[t.id].intervals.length:0))})})}}]),angular.module("deskworks.reservationRules",["deskworks.reservationRules.service","deskworks.inventory.product.service","deskworks.reservationRules.rrRule","deskworks.reservationRules.rrLimit","deskworks.reservationRules.rrWeekdayLimit","deskworks.reservationRules.rrDateLimit","deskworks.reservationRules.rrStatic","deskworks.reservationRules.optsWhoCanReserve","deskworks.reservationRules.optsReservationLimitMin","deskworks.reservationRules.optsReservationLimitMax","deskworks.reservationRules.optsDaysInAdvance"]).directive("reservationRules",function(){return{scope:!0,template:a.a,controller:"ReservationRulesCtrl as $ctrl",bindToController:{centerId:"<",reservationUnitId:"<"}}}).controller("ReservationRulesCtrl",["$scope","$q","$filter","$timeout","$translate","helper","dwAlerts","ReservationRules","productService","ReservationUnit","optsWhoCanReserve","optsReservationLimitMin","optsReservationLimitMax","optsDaysInAdvance",function(e,t,r,n,a,s,f,l,i,o,c,d,p,u){var m=this;m.conf={whoCanReserve:{name:a.instant("RESERVATION_RULES.WHO_CAN_RESERVE"),opts:c},fullTimeProduct:{name:a.instant("RESERVATION_RULES.FULL_TIME_PRODUCT")},attachedUser:{name:a.instant("RESERVATION_RULES.ATTACHED_USER")},limitMin:{name:a.instant("RESERVATION_RULES.MIN_LIMIT"),opts:d},limitMax:{name:a.instant("RESERVATION_RULES.MAX_LIMIT"),opts:p},daysInAdvance:{name:a.instant("RESERVATION_RULES.DAYS_IN_ADVANCE"),opts:u}},m.$onInit=function(){m.form=e.formReservationRules},m.$onChanges=function(){l.query({centerId:m.centerId,reservationUnitId:m.reservationUnitId}).catch(function(e){return f.error(e,"Failed to load reservation rules.")}).then(function(e){m.rules=e,m.whoCanReserve=s.find(m.rules,{uid:"whoCanReserve"})}),m.reservationUnitId&&(o.get(m.centerId,m.reservationUnitId).catch(function(e){return f.error(e,"Reservation Rules failed to get reservation unit.")}).then(function(e){m.fullTimeProduct={uid:"fullTimeProduct",type:"value",value:e.fullTimeProductId},m.attachedUser={uid:"attachedUser",type:"static",value:e.attachedUserName}}),i.getMembershipProducts(m.centerId).catch(function(e){return f.error(e,"Reservation Rules failed to query membership products.")}).then(function(e){angular.forEach(e,function(e){e.name+=" ("+r("ncurrency")(e.price)+")"}),m.conf.fullTimeProduct.opts=e,m.conf.fullTimeProduct.opts.unshift({id:null,name:a.instant("GLOBAL.NONE")})}))},e.$watch("$ctrl.whoCanReserve.value",function(e){e&&(l.roles.forEach(function(t){t.$visible=t.$isVisible(e)}),m.hideRules="staffOnly"===e||"notAvailable"===e)}),m.addDate=function(){m.rules.push({type:"date",member:{available:!1,intervals:[]},nonMember:{available:!1,intervals:[]}})},m.resetRules=function(){if(window.confirm(a.instant("RESERVATION_RULES.ACTIVE.BTN_RESET.CONFIRM")))return l.query({centerId:m.centerId}).catch(function(e){return f.error(e,"Failed to load reservation rules defaults from center.")}).then(function(e){return m.copyRules(e)})},m.copyRules=function(e){return t.all(e.filter(function(e){return"value"===e.type||"roles"===e.type||"weekday"===e.type}).map(function(e){var t=s.find(m.rules,{uid:e.uid});if(t){switch(e.type){case"value":t.value=e.value;break;case"roles":l.roles.forEach(function(r){t[r.id]=e[r.id]});break;case"weekday":l.roles.forEach(function(r){t[r.id].available=e[r.id].available,t[r.id].intervals=e[r.id].intervals.map(function(e){return{from:e.from,to:e.to}})})}return n(function(){return t.$as()},100)}}))},m.saveFullTimeProduct=function(){return o.save(m.centerId,{id:m.reservationUnitId,fullTimeProductId:m.fullTimeProduct.value&&+m.fullTimeProduct.value||null}).catch(function(e){return f.error(e,"Failed to save full time product.")})}}])},pFKl:function(e,t,r){var n={"./membership-category/membership-category-edit.tpl.html":"gQ/F","./membership-category/membership-category-list.tpl.html":"1Kfe","./price-list/price-list-edit.tpl.html":"LnCy","./price-list/price-list-list.tpl.html":"ekOF","./product-categories/product-categories.tpl.html":"d7C/","./product/product-edit.tpl.html":"dSKb","./product/product-list.tpl.html":"BQwv","./reservation-category/reservation-category-edit.tpl.html":"+xqF","./reservation-category/reservation-category-list.tpl.html":"GaQu","./reservation-unit/reservation-unit-edit.tpl.html":"y0bl","./reservation-unit/reservation-unit-list.tpl.html":"w4nh"};function a(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id="pFKl"},qJVN:function(e,t,r){"use strict";r.r(t);r("it7j");t.default=angular.module("deskworks.inventory.product.list",["deskworks.inventory.product.service"]).controller("ProductListCtrl",["$scope","$translate","state","helper","products","productService","optsProductType",function(e,t,r,n,a,s,f){var l=this;r.setPageTitle(t.instant("PRODUCTS.PAGE_TITLE")),l.collapsed=!0,l.productTypes=angular.copy(f),l.productTypes.forEach(function(e){e.products=[]}),l.customProducts={id:"custom",name:t.instant("PRODUCTS.LIST.CUSTOM"),products:[]},a.forEach(function(e){var t=n.find(l.productTypes,e.type);e.custom?l.customProducts.products.push(e):t?t.products.push(e):console.warn("Product of unknown type:",e)}),l.edit=function(e){return r.setPath("/products/"+e.id)},l.new=function(){return r.setPath("/products/new")}}])},rYdl:function(e,t,r){},ubVp:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.inventory.priceList.list",["deskworks.inventory.priceList.service"]).controller("PriceListListCtrl",["$rootScope","$scope","$timeout","$route","$translate","dwAlerts","state","helper","priceLists","centers","priceListService","lazyLoadReports",function(e,t,r,n,a,s,f,l,i,o,c,d){var p=this;f.setPageTitle(a.instant("PRICE_LISTS.PAGE_TITLE")),p.centers=o,p.dstCenterId=f.getCurrentCenterId(),p.priceLists=i,p.priceLists.forEach(function(e){e.include=!0}),p.editAfterCloning=!0,p.printCollapsed=!0,p.edit=function(e){return f.setPath("/pricelists/"+e.id)},p.clone=function(e){if(!(p.centers.length>1)||p.cloning)return c.clonePricelist(f.getCurrentCenterId(),e.id,p.dstCenterId).then(function(e){return p.editAfterCloning?(f.setCurrentCenterId(p.dstCenterId),f.setPath("/pricelists/"+e.id)):(n.reload(),r(5e3))}).catch(function(e){return s.error(e,"Failed to copy price list.")});p.cloning=e},p.new=function(){return f.setPath("/pricelists/new")},p.togglePrint=function(){return d.then(function(){p.printCollapsed=!p.printCollapsed})},e.$on("CHANGE-CENTER",function(){n.reload()})}])},uuTV:function(e,t){e.exports='<ff-panel> <ff-panel-header><span translate=PRINTER_USAGE_SETTINGS.FREE_COPIES.HEADER></span></ff-panel-header> <label class=ff-row ng-repeat="type in $ctrl.types"> <ff-label flex="0 1 200px"><req>{{$ctrl.typeNames[type.printerUsageType]}}</req></ff-label> <ff-number flex="0 0 50px" ff-model=type.freeCount ff-required=true ff-validate-alert="{{\'PRINTER_USAGE_SETTINGS.FREE_COPIES.FOR\' | translate:{ type: $ctrl.typeNames[type.printerUsageType] } }}"></ff-number> <ff-static></ff-static> </label> </ff-panel> '},w4nh:function(e,t){e.exports='<div class=reservation-unit-list ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-panel> <span ng-if=!vm.reservationUnits.length translate=RESERVATION_UNITS.LIST.EMPTY></span> <ff-header ng-show="vm.reservationUnits.length > 0"> <ff-row> <cell flex="1 1 33%"><span translate=RESERVATION_UNITS.UNIT></span></cell> <cell flex="1 1 33%" class=show-sm><span translate=RESERVATION_UNITS.CATEGORY></span></cell> <cell flex="1 0 16%" class=ff-center><span translate=RESERVATION_UNITS.WHO_CAN_RESERVE></span></cell> <cell flex="1 0 16%" class=ff-center><span translate=RESERVATION_UNITS.SYNC_WITH_CALENDAR></span></cell> <ff-btn sense=edit size=xs flex=none class="buttons-row zero-height" title="{{\'GLOBAL.BTN_EDIT\' | translate}}"></ff-btn> </ff-row> </ff-header> <ff-row ng-repeat="unit in vm.reservationUnits"> <ff-static flex="1 1 33%" ff-bind=unit.name></ff-static> <ff-static flex="1 1 33%" class=show-sm ff-bind=unit.reservationTypeName></ff-static> <ff-static flex="1 0 16%" class=ff-center ff-bind=unit.whoCanReserve></ff-static> <ff-static flex="1 0 16%" class=ff-center ff-bind="unit.syncWithCalendar | yesno"></ff-static> <ff-btn sense=edit size=xs flex=none class=buttons-row ff-click=vm.edit(unit) title="{{\'GLOBAL.BTN_EDIT\' | translate}}"></ff-btn> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=new ff-click=vm.new()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </div> </div> '},wJY6:function(e,t){e.exports='<ff-static ff-bind="$ctrl.rule.value | nd"></ff-static> '},xMQj:function(e,t,r){"use strict";r.r(t);r("it7j");var n=r("uuTV"),a=r.n(n);angular.module("deskworks.printerUsageFreeCopies",["deskworks.printerUsageTypeNames"]).directive("printerUsageFreeCopies",function(){return{template:a.a,restrict:"EAC",scope:!0,controller:"PrinterUsageFreeCopiesCtrl as $ctrl",bindToController:{types:"<freeCopiesSettings"}}}).controller("PrinterUsageFreeCopiesCtrl",["printerUsageTypeNames",function(e){var t=this;t.$onInit=function(){t.typeNames=e}}]),t.default=angular.module("deskworks.inventory.product.edit",["deskworks.inventory.product.service","deskworks.inventory.optsCountCheckInsPer","deskworks.printerUsageFreeCopies"]).controller("ProductEditCtrl",["$scope","$q","$window","$translate","dwAlerts","state","helper","product","settings","productService","optsPassMin","optsPassMax","optsCountCheckInsPer","productCategories",function(e,t,r,n,a,s,f,l,i,o,c,d,p,u){var m=this;s.setPageTitle(n.instant(l.id?"PRODUCTS.EDIT.PAGE_TITLE":"PRODUCTS.NEW.PAGE_TITLE")),m.product=l,m.optsPassMin=c,m.optsPassMax=d,m.optsCountCheckInsPer=p,m.productCategories=u.filter(function(e){return"0-00"!==e.code}),m.productCategories.forEach(function(e){e.fullName=f.join([e.name,"["+e.code+"]"]," ")}),m.passMinUnit=i.minPassInPercent?"pass":"time",i.minPassInPercent||(m.optsPassMin=angular.copy(m.optsPassMin),m.optsPassMin.forEach(function(e){e.name+=" hr"})),m.product.options.passProducts=[],o.getProducts().then(function(e){angular.isArray(e)&&(e.forEach(function(e){"rental"===e.type&&m.product.options.passProducts.push(e)}),m.product.passProduct=f.find(m.product.options.passProducts,m.product.passProductId))}),m.save=function(e){if(!f.pointFirstInvalid("#productEdit"))return(m.product.id?t.all([o.updateProduct(m.product).catch(function(e){return a.error(e,"Failed to save product.")}),t.when(m.saveQuickBooks&&m.saveQuickBooks())]):o.createProduct(m.product).catch(function(e){return a.error(e,"Failed to save product.")})).then(function(t){if(e.$setPristine(!0),!m.product.id)return s.setPath("/products/"+t.id)})},m.remove=function(){if(confirm(n.instant("PRODUCTS.CONFIRM_DELETE")))return o.deleteProduct(m.product.id).catch(function(e){return a.error(e,"Failed to remove product.")}).then(function(){return s.setPath("/products")})},m.back=function(){return s.setPath("/products")},m.addPriceList=function(){var e=f.uid();m.product.priceLists.push({id:e,priceListsId:m.product.options.priceLists[0].id,priceList:m.product.options.priceLists[0],price:"",passQty:0}),f.focus("#productPriceList-"+e+" select:first-of-type")},m.savePriceList=function(e,t){if(!f.pointFirstInvalid("#productPriceList-"+e.id)){var r={priceListId:e.priceList.id,price:e.price};return m.product.isCreditable&&(r.reservationCredit=e.reservationCredit),m.product.hasPasses&&(r.passQty=e.passQty),(f.isUid(e.id)?o.createPriceList(m.product.id,r):o.updatePriceList(m.product.id,e.id,r)).catch(function(e){return a.error(e,"Failed to save price list.")}).then(function(r){return f.isUid(e.id)&&(e.id=r.id),t.$setPristine(!0),r})}},m.removePriceList=function(e,t){if(!f.isUid(e.id))return o.deletePriceList(m.product.id,e.id).catch(function(e){return a.error(e,"Failed to remove price list.")}).then(function(e){return m.product.priceLists.splice(t,1),e});m.product.priceLists.splice(t,1)},m.getMemberSignUpUrl=function(){var e=window.location.origin,t=s.getCurrentCenterId(),r=m.product.id;return"".concat(e,"/member-sign-up-landing?center=").concat(t,"&productId=").concat(r)}}])},y0bl:function(e,t){e.exports='<div class="ff-grid gutter-v"> <form name=$ctrl.form id=reservation-unit-edit novalidate ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class="ff-grid gutter-v gutter-h"> <ff-panel flex="{ md: \'0 0 50%\' }"> <ff-panel-header> <span translate=RESERVATION_UNITS.GENERAL.HEADER></span> </ff-panel-header> <label class=ff-row> <ff-label flex="0 1 170px"><req translate=RESERVATION_UNITS.NAME></req></ff-label> <ff-text flex="1 1 300px" name=name ff-model=$ctrl.unit.name ff-required=true ff-validate-alert="{{\'RESERVATION_UNITS.NAME\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 170px"><req translate=RESERVATION_UNITS.CATEGORY></req></ff-label> <ff-select flex="1 1 300px" ff-model=$ctrl.unit.reservationTypeId ff-options="cat.id as cat.name for cat in $ctrl.categories" ff-required=true ff-validate-alert="{{\'RESERVATION_UNITS.CATEGORY\' | translate}}"></ff-select> </label> <label class=ff-row> <ff-label flex="0 1 170px"><span translate=RESERVATION_UNITS.DESCRIPTION></span></ff-label> <ff-text flex="1 1 300px" ff-model=$ctrl.unit.description></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 170px"><span translate=RESERVATION_UNITS.AREA></span></ff-label> <ff-number name=area flex="1 1 300px" ff-model=$ctrl.unit.area ff-validate-alert="{{\'RESERVATION_UNITS.AREA\' | translate}}"></ff-number> </label> <ff-static> <label> <ff-checkbox ff-model=$ctrl.unit.syncWithCalendar ff-label="{{\'RESERVATION_UNITS.SYNC_WITH_CALENDAR\' | translate}}" ff-change=$ctrl.calSyncChange()></ff-checkbox> </label> </ff-static> <label class=ff-row> <ff-label flex="0 1 170px"> <span> <span translate=RESERVATION_UNITS.CALENDAR_ID></span> <ff-hint><span translate=RESERVATION_UNITS.CALENDAR_ID.HINT></span></ff-hint> </span> </ff-label> <ff-text flex="1 1 300px" name=calendarId ff-model=$ctrl.unit.calendarId ff-disabled=!$ctrl.calendarIdEnabled ff-validate-alert="{{\'RESERVATION_UNITS.CALENDAR_ID\' | translate}}"></ff-text> </label> </ff-panel> <ff-panel flex="{ md: \'0 0 50%\' }" ng-if="$ctrl.unit.id && $ctrl.unit.id !== \'new\'" ngf-drop="$ctrl.uploadPhoto($files, $invalidFiles)" ngf-pattern="\'image/png,image/jpeg\'" ngf-drag-over-class=dragover> <ff-panel-header> <span translate=GLOBAL.PHOTO></span> <ff-hint><span translate=RESERVATION_UNITS.PHOTO.HINT></span></ff-hint> </ff-panel-header> <ff-col style=height:100%> <ff-col flex=auto style=align-items:flex-start> <ff-img flex=auto ff-style="{ height: \'100%\', width: \'auto\' }" ff-src={{$ctrl.unit.thumbnail}} ff-src-hq={{$ctrl.unit.photo}}></ff-img> </ff-col> <ff-btn-group class=ff-section-buttons> <ff-btn sense=upload size=sm ff-spin=$ctrl.spinUpload ngf-select="$ctrl.uploadPhoto($files, $invalidFiles)" ngf-pattern="\'image/png,image/jpeg\'" accept=image/png,image/jpeg> <span translate=GLOBAL.BTN_UPLOAD></span> </ff-btn> </ff-btn-group> </ff-col> </ff-panel> <ff-btn-group> <ff-btn sense=save type=submit ff-click=$ctrl.saveReservationUnit() ff-disabled=$ctrl.form.$pristine> <span translate=GLOBAL.BTN_SAVE></span> </ff-btn> <ff-btn sense=remove ng-if="$ctrl.unit.id !== \'new\'" ff-click=$ctrl.removeReservationUnit()> <span translate=GLOBAL.BTN_DELETE></span> </ff-btn> <ff-btn sense=back ff-click=$ctrl.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> </div> </form> <reservation-rules center-id=state.getCurrentCenterId() reservation-unit-id=$ctrl.unit.id ng-if="$ctrl.unit.id !== \'new\'" ff-bulk-read-only></reservation-rules> </div> '},yIgt:function(e,t,r){"use strict";r.r(t);r("DbwS"),r("t91x");t.default=angular.module("deskworks.inventory.membershipCategory.list",["dnd","deskworks.inventory.membershipCategory.service"]).controller("MembershipCategoryListCtrl",["$scope","$translate","state","dnd","helper","dwAlerts","membershipCategories","membershipCategoryService",function(e,t,r,n,a,s,f,l){r.setPageTitle(t.instant("MEMBERSHIP_CATEGORIES.PAGE_TITLE")),this.membershipCategories=f,this.edit=function(e){return r.setPath("/membership-types/"+e.id)},this.new=function(){return r.setPath("/membership-types/new")},this.onDrop=function(e,t,r,a){var f=n.move(e,t,r,a);return f.$spin=!0,l.update(f.id,{order:f.order}).catch(function(e){return s.error(e,"Failed to reorder membership category.")}).finally(function(){return delete f.$spin}),!0}}])},zae7:function(e,t){e.exports='<ff-row> <ff-select ff-model=$ctrl.rule[$ctrl.role].available ff-options="opt.id as opt.name for opt in $ctrl.options" ff-change="$ctrl.updateGhosts() + $ctrl.rule.$as()"></ff-select> <ff-btn flex=none sense=add size=xs ng-class="{ invisible: !$ctrl.rule[$ctrl.role].available }" title="{{\'RESERVATION_RULES.BTN_ADD_INTERVAL.HINT\' | translate}}" ff-click=$ctrl.addInterval()></ff-btn> </ff-row> <ff-row ng-repeat="interval in $ctrl.rule[$ctrl.role].intervals" ng-if=$ctrl.rule[$ctrl.role].available> <ff-time ff-model=interval.from ff-change=$ctrl.rule.$as() ff-required=true ff-time-order="{ early: interval.from, late: interval.to }" ff-validate-alert="{ field: (\'RESERVATION_RULES.TIME_FROM\' | translate), late: (\'RESERVATION_RULES.TIME_TO\' | translate) }" placeholder="09:00 AM"></ff-time> <ff-time ff-model=interval.to ff-change=$ctrl.rule.$as() ff-required=true ff-time-order="{ early: interval.from, late: interval.to }" ff-validate-alert="{ field: (\'RESERVATION_RULES.TIME_TO\' | translate), early: (\'RESERVATION_RULES.TIME_FROM\' | translate) }" placeholder="05:00 PM"></ff-time> <ff-btn flex=none sense=delete size=xs ff-click=$ctrl.deleteInterval(interval) title="{{\'RESERVATION_RULES.BTN_DELETE_INTERVAL.HINT\' | translate}}"></ff-btn> </ff-row> <ff-row ng-repeat="item in $ctrl.rule[$ctrl.role].$ghosts track by $index"> <ff-static></ff-static> </ff-row> '}}]);