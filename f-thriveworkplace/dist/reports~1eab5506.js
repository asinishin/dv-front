(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"+qiB":function(e,t){e.exports='<label class=ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.BY_PERIOD></span></ff-label> <ff-select ff-model=$ctrl.ngModel ff-options="opt.id as opt.name for opt in $ctrl.optsPeriod"></ff-select> </label> '},"//ZJ":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.reportDates",["deskworks.helper"]).directive("reportDates",["$compile","$templateCache",function(e,t){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportDatesCtrl as $ctrl",bindToController:{ngModel:"<",embed:"@"},link:function(r,o,n,a,i){i(function(n,a){var i=e(t.get("directives/report-dates.tpl.html"))(r);angular.element(i[0].querySelector?i[0].querySelector(".panel-body"):i).append(n),o.after(i)})}}}]).controller("ReportDatesCtrl",["$scope","$location","$filter","state","helper",function(e,t,r,o,n){var a=this;a.$onInit=function(){!1!==a.ngModel.fromDate&&(e.$watch(function(){return t.search().fromDate},function(e){var t=r("toDate")(e);a.ngModel.fromDate=moment.isMoment(t)&&!a.ngModel.fromDate.isSame(t)?t:a.ngModel.fromDate}),e.$watch("$ctrl.ngModel.fromDate",function(e){moment.isMoment(e)&&t.search("fromDate",r("date")(e,"yyyy-MM-dd")).replace()})),!1!==a.ngModel.toDate&&(e.$watch(function(){return t.search().toDate},function(e){var t=r("toDate")(e);a.ngModel.toDate=moment.isMoment(t)&&!a.ngModel.toDate.isSame(t)?t:a.ngModel.toDate}),e.$watch("$ctrl.ngModel.toDate",function(e){moment.isMoment(e)&&t.search("toDate",r("date")(e,"yyyy-MM-dd")).replace()}))}}])},"/MGB":function(e,t,r){var o={"./accounts-receivable-report/accounts-receivable-report.tpl.html":"/cev","./availability-report/availability-report.tpl.html":"ZfFK","./check-in-report/check-in-report.tpl.html":"TVyk","./credit-balance-report/credit-balance-report.tpl.html":"lfjW","./deposit-transaction-report/deposit-transaction-report.tpl.html":"HIxv","./directives/report-by-period.tpl.html":"+qiB","./directives/report-columns.tpl.html":"LLH2","./directives/report-dates.tpl.html":"pEUA","./directives/report-options.tpl.html":"9W37","./directives/report-order-by.tpl.html":"73rf","./directives/report-owner-region.tpl.html":"U+0Z","./income-by-item-report/income-by-item-report.tpl.html":"UUPn","./income-report/income-report.tpl.html":"pvmN","./invoice/invoice.tpl.html":"aoB6","./mailbox-report/mailbox-report.tpl.html":"iTQj","./member-statement/member-statement.tpl.html":"C/0G","./member-usage-report/member-usage-report.tpl.html":"lKYt","./membership-report/membership-report.tpl.html":"EKM0","./price-list-report/price-list-report.tpl.html":"CR4+","./recurring-billing-report/recurring-billing-report.tpl.html":"GGg2","./reservation-report/reservation-report.tpl.html":"+1+s","./reservation-usage-report/reservation-usage-report.tpl.html":"BEjt","./reservation-utilization-report/reservation-utilization-report.tpl.html":"nJHl","./security-deposit-report/security-deposit-report.tpl.html":"kJoc","./write-off-report/write-off-report.tpl.html":"aHVT"};function n(e){var t=a(e);return r(t)}function a(e){if(!r.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=a,e.exports=n,n.id="/MGB"},"/XlY":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reportByPeriod",["deskworks.helper","deskworks.reports.optsReportByPeriod"]).directive("reportByPeriod",["$compile","$templateCache",function(e,t){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportByPeriodCtrl as $ctrl",bindToController:{ngModel:"="},link:function(r,o,n,a,i){i(function(n,a){var i=e(t.get("directives/report-by-period.tpl.html"))(r);angular.element(i[0].querySelector?i[0].querySelector(".ff-panel-body"):i).append(n),o.after(i)})}}}]).controller("ReportByPeriodCtrl",["$scope","$location","state","helper","optsReportByPeriod",function(e,t,r,o,n){var a=this;a.optsPeriod=n,a.$onInit=function(){e.$watch(function(){return t.search().byPeriod},function(e){a.ngModel=e||a.ngModel||a.optsPeriod[0].id}),e.$watch("$ctrl.ngModel",function(e){t.search("byPeriod",e).replace()})}}])},"/cev":function(e,t){e.exports="<div id=accountsReceivableReport class=gutter-v> <form name=formAccountsReceivableReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 65%', md: '0 0 50%'}\"> <div class=gutter-v> <report-dates ng-model=vm.config.reportDates></report-dates> <report-columns ng-model=vm.config.reportColumns></report-columns> </div> </div> <div flex=\"{lg: '0 0 35%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions></report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},"2+c3":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.depositTransactionReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.depositTransactionReport.service","deskworks.reports.depositTransactionReportColumns"]).controller("DepositTransactionReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","DepositTransactionReport","depositTransactionReportColumns","banks","centers",function(e,t,r,o,n,a,i,s,l,c,f,d,p){var u,m=this,g=[];function R(e){var t={columns:e.reportColumns.columns.filter(function(e){return e.include}),rows:[]};g=[];var r,n=Array.apply(null,new Array(t.columns.length)).map(function(e){return!1});return e.reportData.forEach(function(i,l){(r=a.findIndexByKeyValue(t.columns,"dataKey","total"))>=0&&(t.rows.push([i.date].concat(n.slice(0,Math.max(r-2,0))).concat(r>1?[o.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.DAILY")+":",i.total]:[i.total]).concat(n.slice(0,n.length-r-1))),g.push(s.h1)),i.billingMethods.forEach(function(i){(r=a.findIndexByKeyValue(t.columns,"dataKey","subtotal"))>=0&&(t.rows.push(0===r?[i.subtotal]:[i.name+" "+o.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.DEPOSITS")].concat(n.slice(0,Math.max(r-3,0))).concat(r>2?[i.name+" "+o.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",!1,i.subtotal]:2===r?[i.name+" "+o.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",i.subtotal]:1===r?[i.subtotal]:[]).concat(n.slice(0,n.length-r-1))),g.push(s.h2)),m.reportBuilder.sortData([].concat.apply([],i.centers.map(function(e){return e.payments})),e.reportColumns.order).forEach(function(e,r){t.rows.push(t.columns.map(function(t){return"subtotal"!==t.dataKey&&"total"!==t.dataKey&&e[t.dataKey]})),g.push(r%2?null:s.rowOdd)}),i.centers.forEach(function(e){(r=a.findIndexByKeyValue(t.columns,"dataKey","subtotal"))>=0&&t.rows.push(n.slice(0,Math.max(r-2,0)).concat(r>2?[e.name+" "+o.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",!1,e.subtotal]:r>0?[e.name+" "+o.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",e.subtotal]:[e.subtotal]).concat(n.slice(0,n.length-r-1))),g.push(s.h3)}),t.rows.push(n.slice()),g.push(null)})}),t}m.config={reportName:o.instant("DEPOSIT_TRANSACTION_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:f},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return c.query({bankId:m.config.reportOptions.bankId,centerId:m.config.reportOptions.centerId||null,fromDate:r("date")(m.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(m.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:m.config.reportOwnerRegion.ownerId,regionId:m.config.reportOwnerRegion.regionId}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,g[t.row.index])}},n.setPageTitle(m.config.reportName),m.config.reportDates.fromDate.subtract(1,"M").date(1),m.config.reportDates.toDate.date(0),m.reportBuilder=new l(m.config),e.$watch("vm.config.reportOptions.bankId",function(e){e&&(m.centers=p.filter(function(t){return t.bankId===e}),m.centers.unshift({id:0,name:"All Centers"}),a.findByKeyValue(m.centers,"id",m.config.reportOptions.centerId)||(m.config.reportOptions.centerId=m.centers[0].id,n.setParam("centerId",m.config.reportOptions.centerId),n.replace()))}),e.$watch(function(){return{reportOptions:m.config.reportOptions,reportDates:m.config.reportDates,reportColumns:m.config.reportColumns,reportOwnerRegion:m.config.reportOwnerRegion}},function(e,r){u&&(t.cancel(u),u=null),u=t(function(){if(m.pdf=null,!angular.isUndefined(m.config.reportOptions.bankId)){var t=e.reportDates.fromDate,o=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(o)&&t.isSame(o)||(m.config.reportData=null),t=e.reportDates.toDate,o=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(o)&&t.isSame(o)||(m.config.reportData=null),e.reportOptions.bankId!==r.reportOptions.bankId&&(m.config.reportData=null),m.reportBuilder.buildPdf(R).then(function(e){m.pdf=e})}},100)},!0),m.downloadPdf=function(){m.pdf&&i(m.pdf,m.reportBuilder.getReportFileName("pdf"))},m.downloadCsv=function(){m.pdf&&i(m.reportBuilder.buildCsv(R),m.reportBuilder.getReportFileName("csv"))}}])},"2zAN":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.incomeByItemReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("IncomeByItemReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var o=t(["productCategories.products.date"]);return e(r.getApiAbsUrl("/centers/:centerId/income-by-item-reports"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,o]}})}])},"4AnZ":function(e,t,r){"use strict";r.r(t);r("GNLJ");t.default=angular.module("pdfPreview",[]).directive("pdfPreview",["$window","helper",function(e,t){return{restrict:"A",scope:!0,template:'<iframe ng-hide="ie"></iframe><ff-info class="text-warning" ng-if="ie"><ff-icon sense="warning"></ff-icon> Microsoft Edge & Internet Explorer don\'t support live PDF preview. You can download the PDF or use another browser to have live preview, e.g. Chrome/Firefox/Opera/Safari.</ff-info>',compile:function(r,o){var n=r.parent().parent();return t.isMobile()&&n.hasClass("flex-form")?(r.parent().parent().css("display","none"),function(){}):t.isIE()?function(e,t,r){e.ie=!0}:(r.addClass("pdf-preview"),function(t,r,o){var n,a=r.children(),i=angular.element('<div class="ff-dimmer ff-spin"></div>');i.on("click",function(e){e.stopPropagation()}),a.on("load",function(){angular.element(i).remove(),r.removeClass("ff-dim")}),t.$watch(o.pdfPreview,function(t){r.append(i),r.addClass("ff-dim"),n&&(e.URL.revokeObjectURL(n),n=null),t&&(n=e.URL.createObjectURL(t),a[0].src=n)}),t.$on("$destroy",function(){n&&(e.URL.revokeObjectURL(n),n=null)})})}}}])},"7/Y1":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.checkInReportTotalsColumns",[]).factory("checkInReportTotalsColumns",["$rootScope","$filter","$translate",function(e,t,r){var o=[{dataKey:"userName",_title:"CHECK_IN_REPORT.COLUMNS.NAME"},{dataKey:"userCompany",_title:"CHECK_IN_REPORT.COLUMNS.COMPANY"},{dataKey:"totalHoursTimeRange",_title:"CHECK_IN_REPORT.COLUMNS.TOTAL_HOURS_TIME_RANGE",halign:"right",pdf:function(e){return t("hours-minutes")(e)},csv:function(e){return t("hours-minutes")(e)}},{dataKey:"date",_title:"CHECK_IN_REPORT.COLUMNS.DATE",halign:"right",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"totalHoursDay",_title:"CHECK_IN_REPORT.COLUMNS.TOTAL_HOURS_DAY",halign:"right",pdf:function(e){return t("hours-minutes")(e)},csv:function(e){return t("hours-minutes")(e)}}];function n(){o.forEach(function(e){e.title=r.instant(e._title)})}return n(),e.$on("$setTranslationsSuccess",n),o}])},"73rf":function(e,t){e.exports='<label class=ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.COLUMNS.ORDER_BY></span></ff-label> <ff-select ff-model=$ctrl.ngModel ff-options="(opt.id || opt.dataKey) as (opt.name || opt.title) for opt in $ctrl.reportColumns"></ff-select> </label> '},"8g2Y":function(e,t,r){var o={"./accounts-receivable-report/accounts-receivable-report-columns.service.js":"QU59","./accounts-receivable-report/accounts-receivable-report.controller.js":"Ytnt","./accounts-receivable-report/accounts-receivable-report.service.js":"xU/f","./availability-report/availability-report-columns.service.js":"vopJ","./availability-report/availability-report.controller.js":"TGNl","./availability-report/availability-report.service.js":"nkhl","./check-in-report/check-in-report-bar-chart.service.js":"cjYI","./check-in-report/check-in-report-columns.service.js":"U+9+","./check-in-report/check-in-report-totals-columns.service.js":"7/Y1","./check-in-report/check-in-report.controller.js":"ynEu","./check-in-report/check-in-report.service.js":"Gago","./credit-balance-report/credit-balance-report-columns.service.js":"h5Ea","./credit-balance-report/credit-balance-report.controller.js":"kCKf","./credit-balance-report/credit-balance-report.service.js":"Iitq","./deposit-transaction-report/deposit-transaction-report-columns.service.js":"xWoj","./deposit-transaction-report/deposit-transaction-report.controller.js":"2+c3","./deposit-transaction-report/deposit-transaction-report.service.js":"ukw3","./directives/chart.directive.js":"u7OF","./directives/pdf-preview.directive.js":"4AnZ","./directives/report-by-period.directive.js":"/XlY","./directives/report-columns.directive.js":"MKNM","./directives/report-dates.directive.js":"//ZJ","./directives/report-options.directive.js":"Gf5d","./directives/report-order-by.directive.js":"ZimX","./directives/report-owner-region.directive.js":"OeSc","./income-by-item-report/income-by-item-pie-chart.service.js":"qFux","./income-by-item-report/income-by-item-report-columns.service.js":"sSbM","./income-by-item-report/income-by-item-report.controller.js":"MmAi","./income-by-item-report/income-by-item-report.service.js":"2zAN","./income-by-item-report/income-by-member-report-columns.service.js":"kUla","./income-by-item-report/income-by-order-report-columns.service.js":"UMDU","./income-report/income-report-columns.service.js":"Du13","./income-report/income-report.controller.js":"vtWt","./income-report/income-report.service.js":"Mvrh","./invoice/invoice-columns.service.js":"pfDI","./invoice/invoice-header.service.js":"grn2","./invoice/invoice-styles.service.js":"E9xF","./invoice/invoice.controller.js":"bm4+","./invoice/invoice.service.js":"zl1W","./mailbox-report/mailbox-report-columns.service.js":"IWno","./mailbox-report/mailbox-report.controller.js":"HFgu","./mailbox-report/mailbox-report.service.js":"L+wq","./member-statement/member-statement-columns.service.js":"haNf","./member-statement/member-statement.controller.js":"SeF/","./member-statement/member-statement.service.js":"aRIa","./member-usage-report/member-usage-report-columns.service.js":"rlfb","./member-usage-report/member-usage-report.controller.js":"U9c4","./member-usage-report/member-usage-report.service.js":"PjE5","./membership-report/membership-report-columns.service.js":"3DDD","./membership-report/membership-report.controller.js":"2S09","./membership-report/membership-report.service.js":"8scq","./price-list-report/price-list-report-columns.service.js":"Mmgn","./price-list-report/price-list-report.controller.js":"6avE","./price-list-report/price-list-report.service.js":"SoPU","./recurring-billing-report/recurring-billing-report-columns.service.js":"LM7I","./recurring-billing-report/recurring-billing-report.controller.js":"ZfRm","./recurring-billing-report/recurring-billing-report.service.js":"dd2W","./reservation-report/reservation-report-columns.service.js":"vRPl","./reservation-report/reservation-report.controller.js":"LJmX","./reservation-report/reservation-report.service.js":"IWz8","./reservation-usage-report/reservation-usage-report-columns.service.js":"KkfT","./reservation-usage-report/reservation-usage-report.controller.js":"qctg","./reservation-usage-report/reservation-usage-report.service.js":"piGw","./reservation-utilization-report/reservation-utilization-pie-chart.service.js":"qD0y","./reservation-utilization-report/reservation-utilization-report-aggregate.service.js":"t9tK","./reservation-utilization-report/reservation-utilization-report-columns.service.js":"g9E+","./reservation-utilization-report/reservation-utilization-report.controller.js":"1THZ","./reservation-utilization-report/reservation-utilization-report.service.js":"qhd7","./security-deposit-report/security-deposit-report-columns.service.js":"UUql","./security-deposit-report/security-deposit-report.controller.js":"hlyU","./security-deposit-report/security-deposit-report.service.js":"JAJz","./services/b64.service.js":"zvMh","./services/csv-make.service.js":"T3vP","./services/file-saver.service.js":"9LJv","./services/jspdf.service.js":"GO8p","./services/logo.service.js":"bHMQ","./services/opts-paper-size.service.js":"8d/h","./services/opts-report-by-period.service.js":"/1cb","./services/report-builder.service.js":"5+k5","./services/report-footer.service.js":"rjaI","./services/report-group-by.service.js":"92Gs","./services/report-header.service.js":"3i5X","./services/report-sort.service.js":"Xai3","./services/report-styles.service.js":"UwMB","./services/system-colors.service.js":"Yes4","./write-off-report/write-off-report-columns.service.js":"h0ZB","./write-off-report/write-off-report.controller.js":"5ual","./write-off-report/write-off-report.service.js":"fKuI"};function n(e){var t=a(e);return r(t)}function a(e){if(!r.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=a,e.exports=n,n.id="8g2Y"},"9W37":function(e,t){e.exports='<ff-panel> <ff-panel-header><span translate=REPORTS.OPTIONS.HEADER></span></ff-panel-header> <label class=ff-row ng-if=$ctrl.banks> <ff-label flex="0 0 100px"><span translate=REPORTS.OPTIONS.BANK></span></ff-label> <ff-select ff-model=$ctrl.ngModel.bankId ff-options="bank.id as bank.name for bank in $ctrl.banks"></ff-select> </label> <label class=ff-row ng-if="$ctrl.ngModel.centerId !== false && !$ctrl.centers" ng-show="state.getUserCenters().length > 1"> <ff-label flex="0 0 100px"><span translate=REPORTS.OPTIONS.CENTER></span></ff-label> <dw-select-center ff-model=$ctrl.ngModel.centerId ff-option-all="{{$ctrl.allCenters !== false}}"></dw-select-center> </label> <label class=ff-row ng-if="$ctrl.ngModel.centerId !== false && $ctrl.centers" ng-show="state.getUserCenters().length > 1"> <ff-label flex="0 0 100px"><span translate=REPORTS.OPTIONS.CENTER></span></ff-label> <ff-select ff-model=$ctrl.ngModel.centerId ff-options="center.id as center.name for center in $ctrl.centers"></ff-select> </label> <label class=ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.OPTIONS.SIZE></span></ff-label> <ff-select ff-model=$ctrl.ngModel.paperSize> <option ng-repeat="size in $ctrl.optsPaperSize" value={{size.id}}>{{size.name}}</option> </ff-select> </label> <ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.OPTIONS.LAYOUT></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half"> <label flex="0 0 auto"> <ff-radio ff-model=$ctrl.ngModel.paperLayout ff-value="\'p\'"> <span translate=REPORTS.OPTIONS.LAYOUT.PORTRAIT></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio ff-model=$ctrl.ngModel.paperLayout ff-value="\'l\'"> <span translate=REPORTS.OPTIONS.LAYOUT.LANDSCAPE></span> </ff-radio> </label> </div> </ff-static> </ff-row> </ff-panel> '},Du13:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.incomeReportColumns",[]).factory("incomeReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var o=[{dataKey:"userCompany",_title:"INCOME_REPORT.COLUMNS.COMPANY",include:!0,minWidth:250},{dataKey:"userName",_title:"INCOME_REPORT.COLUMNS.NAME",include:!0,minWidth:200},{dataKey:"date",_title:"INCOME_REPORT.COLUMNS.DATE",include:!0,width:"wrap",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"method",_title:"INCOME_REPORT.COLUMNS.METHOD",include:!0,width:"wrap"},{dataKey:"amount",_title:"INCOME_REPORT.COLUMNS.AMOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function n(){o.forEach(function(e){e.title=r.instant(e._title)})}return n(),e.$on("$setTranslationsSuccess",n),o}])},GNLJ:function(e,t,r){},Gago:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.CheckInReport",["ngResource","datesDeserializer","deskworks.config"]).factory("CheckInReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var o=t(["checkInTime","checkOutTime"]),n=e(r.getApiAbsUrl("/check-in-report"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,o]}});return{query:function(e){return n.query(e).$promise.then(function(e){return e.forEach(function(e){e.duration=e.checkOutTime.diff(e.checkInTime)}),e})}}}])},Gf5d:function(e,t,r){"use strict";r.r(t);r("it7j");t.default=angular.module("deskworks.reports.reportOptions",["deskworks.helper","deskworks.reports.optsPaperSize"]).directive("reportOptions",["$compile","$templateCache",function(e,t){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportOptionsCtrl as $ctrl",bindToController:{ngModel:"<",centers:"<",allCenters:"<",banks:"<"},link:function(r,o,n,a,i){i(function(n,a){var i=e(t.get("directives/report-options.tpl.html"))(r);angular.element(i[0].querySelector?i[0].querySelector(".ff-panel-body"):i).append(n),o.after(i)})}}}]).controller("ReportOptionsCtrl",["$scope","$location","state","helper","optsPaperSize",function(e,t,r,o,n){var a=this;a.optsPaperSize=n,a.$onInit=function(){!1!==a.ngModel.centerId&&(e.$watch(function(){return t.search().centerId},function(e){a.ngModel.centerId=e||0===e?+e:r.getCurrentCenterId()}),e.$watch("$ctrl.ngModel.centerId",function(r){r&&e.vm&&e.vm.config&&e.vm.config.reportOwnerRegion&&(e.vm.config.reportOwnerRegion.ownerId=e.vm.config.reportOwnerRegion.regionId=void 0),t.search("centerId",r).replace()})),a.banks&&(e.$watch(function(){return t.search().bankId},function(e){a.ngModel.bankId=e||0===e?+e:a.banks&&a.banks[0]&&a.banks[0].id}),e.$watch("$ctrl.ngModel.bankId",function(e){t.search("bankId",e).replace()})),e.$watch(function(){return t.search().paperSize},function(e){a.ngModel.paperSize=(a.optsPaperSize.find(function(t){return t.id===e})||a.optsPaperSize[0]).id}),e.$watch("$ctrl.ngModel.paperSize",function(e){t.search("paperSize",e).replace()}),e.$watch(function(){return t.search().paperLayout},function(e){a.ngModel.paperLayout=e||a.ngModel.paperLayout||"l"}),e.$watch("$ctrl.ngModel.paperLayout",function(e){t.search("paperLayout",e).replace()})}}])},HIxv:function(e,t){e.exports="<div id=depositTransactionReport class=gutter-v> <form name=formDepositTransactionReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <div class=gutter-v> <report-dates ng-model=vm.config.reportDates></report-dates> <report-columns ng-model=vm.config.reportColumns></report-columns> </div> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions banks=$resolve.banks centers=vm.centers></report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},Iitq:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.creditBalanceReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("CreditBalanceReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var o=t(["credits.date"]);return e(r.getApiAbsUrl("/centers/:centerId/credit-balance-reports"),{centerId:"@centerId"},{get:{method:"GET",transformResponse:[angular.fromJson,o]}})}])},LLH2:function(e,t){e.exports='<ff-panel> <ff-panel-header><span translate=REPORTS.COLUMNS.HEADER></span></ff-panel-header> <ff-header> <ff-two-columns> <ff-row-head> <span class=ff-center flex="0 0 32px" title="{{\'REPORTS.COLUMNS.ORDER_BY\' | translate}}"> <ff-icon sense=sort></ff-icon> </span> <span translate=REPORTS.COLUMNS.COLUMN></span> <span flex="0 0 32px" class=ff-center title="{{\'GLOBAL.INCLUDE\' | translate}}"> <ff-icon sense=check></ff-icon> </span> </ff-row-head> </ff-two-columns> </ff-header> <ff-two-columns> <ff-col> <ff-row ng-repeat="column in $ctrl.ngModel.columns | limitTo: $ctrl.leftColCount"> <ff-radio class="ff-center ff-control" flex="0 0 32px" ff-model=$ctrl.ngModel.order ff-value=column.dataKey ff-disabled=column.readonly></ff-radio> <ff-static ff-bind=column.title></ff-static> <ff-checkbox class="ff-center ff-control" flex="0 0 32px" ff-model=column.include ff-disabled=column.readonly></ff-checkbox> </ff-row> </ff-col> <ff-col> <ff-row ng-repeat="column in $ctrl.ngModel.columns | limitTo: $ctrl.rightColCount : $ctrl.leftColCount"> <ff-radio class="ff-center ff-control" flex="0 0 32px" ff-model=$ctrl.ngModel.order ff-value=column.dataKey ff-disabled=column.readonly></ff-radio> <ff-static ff-bind=column.title></ff-static> <ff-checkbox class="ff-center ff-control" flex="0 0 32px" ff-model=column.include ff-disabled=column.readonly></ff-checkbox> </ff-row> </ff-col> </ff-two-columns> </ff-panel> '},MKNM:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.reportColumns",["deskworks.helper"]).directive("reportColumns",["$compile","$templateCache",function(e,t){return{restrict:"E",scope:!0,transclude:"element",priority:2,controller:"ReportColumnsCtrl as $ctrl",bindToController:{ngModel:"<"},link:function(r,o,n,a,i){i(function(n,a){o.after(e(t.get("directives/report-columns.tpl.html"))(r))})}}}]).controller("ReportColumnsCtrl",["$scope","$location","helper",function(e,t,r){var o=this;o.$onInit=function(){e.$watch(function(){return t.search().order},function(e){o.ngModel.order=(r.findByKeyValue(o.ngModel.columns,"dataKey",e)||r.findByKeyValue(o.ngModel.columns,"defaultOrder",!0)||o.ngModel.columns[0]).dataKey}),e.$watch("$ctrl.ngModel.order",function(){t.search("order",o.ngModel.order).replace(),(r.findByKeyValue(o.ngModel.columns,"dataKey",o.ngModel.order)||{}).include=!0}),e.$watch(function(){return t.search().columns},function(e){e&&(o.ngModel.columns.forEach(function(e){e.include=!1}),e.split(",").forEach(function(e){(r.findByKeyValue(o.ngModel.columns,"dataKey",e)||{}).include=!0}))}),e.$watchCollection(function(){return o.ngModel.columns.map(function(e){return!!e.include})},function(){(r.findByKeyValue(o.ngModel.columns,"dataKey",o.ngModel.order)||{}).include=!0,o.leftColCount=o.rightColCount=Math.floor(o.ngModel.columns.length/2),o.leftColCount+o.rightColCount<o.ngModel.columns.length&&o.leftColCount++;var e=o.ngModel.columns.filter(function(e){return e.include}).map(function(e){return e.dataKey}).join(",");t.search("columns",e).replace()})}}])},MmAi:function(e,t,r){"use strict";r.r(t);r("it7j");t.default=angular.module("deskworks.reports.incomeByItemReport",["pdfPreview","fileSaver","chart","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.incomeByItemReport.service","deskworks.reports.incomeByItemReportColumns","deskworks.reports.incomeByMemberReportColumns","deskworks.reports.incomeByOrderReportColumns","deskworks.reports.incomeByItemPieChart"]).controller("IncomeByItemReportCtrl",["$scope","$timeout","$filter","$translate","$location","state","helper","fileSaver","reportStyles","ReportBuilder","IncomeByItemReport","incomeByItemReportColumns","incomeByMemberReportColumns","incomeByOrderReportColumns","incomeByItemPieChart",function(e,t,r,o,n,a,i,s,l,c,f,d,p,u,m){var g,R=this,v=[];function h(t){var o,n=[];return t.forEach(function(e){n=n.concat(e.productCategories)}),{codes:(o=R.pieProduct?m.pieByUsers(n,R.pieCategory.code,R.pieProduct.code):R.pieCategory?m.pieByProducts(n,R.pieCategory.code):m.pieByCategories(n)).map(function(e){return e.code}),labels:o.map(function(e){return e.name}),data:[{data:o.map(function(e){return i.round(e.value)})}],options:{tooltips:{callbacks:{label:function(e,t){return t.labels[e.index]+": "+r("ncurrency")(t.datasets[0].data[e.index])}}},legend:{display:!0,position:"right"},onClick:function(t,r){e.$apply(function(){var e=r[0]&&r[0]._index;angular.isNumber(e)&&(R.pieProduct||(R.pieCategory?R.pieProduct={code:R.pie.codes[e],name:R.pie.labels[e]}:R.pieCategory={code:R.pie.codes[e],name:R.pie.labels[e]},R.pie=h(R.config.reportData)))})}}}}function O(e){var t={columns:e.reportColumns.columns,rows:[]};v=[];var r=0;return e.reportData.forEach(function(e,n){var a=0;t.rows.push([!1,o.instant("INCOME_BY_ITEM_REPORT.TOTALS.ITEM_TYPE")+": "+e.name,!1,!1,!1,!1,!1,!1,!1]),v.push(l.h1),e.productCategories.forEach(function(e){var r=0;e.products.forEach(function(e,o){t.rows.push([e.code,e.name,e.userName,e.orderNo,e.date,e.qty,e.amount,!1,!1]),v.push(o%2?null:l.rowOdd),r+=i.toNumber(e.amount)}),a+=r;var n=i.join([e.name,"["+e.code+"]",o.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL")]," ");t.rows.push([!1,n,!1,!1,!1,!1,!1,i.round(r),!1]),v.push(l.h2)}),r+=a,t.rows.push([!1,!1,o.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL")+" "+e.name,!1,!1,!1,!1,!1,i.round(a)]),v.push(l.h3),t.rows.push([!1,!1,!1,!1,!1,!1,!1,!1,!1]),v.push(null)}),t.rows.push([!1,!1,!1,!1,!1,!1,!1,o.instant("INCOME_BY_ITEM_REPORT.TOTALS.INCOME")+":",i.round(r)]),v.push(l.h3),t}function E(e){var t={columns:e.reportColumns.columns,rows:[]};v=[];var r=[];e.reportData.forEach(function(e){e.productCategories.forEach(function(e){e.products.forEach(function(e){var t=i.findByKeyValue(r,"name",e.userName);t||(t={name:e.userName,products:[]},r.push(t)),t.products.push(e)})})}),r=R.reportBuilder.sortData(r,"name");var n=0;return r.forEach(function(e){var r=0;R.reportBuilder.sortData(e.products,"date").forEach(function(e,o){t.rows.push([e.userName,e.code,e.name,e.orderNo,e.date,e.qty,e.amount,!1]),v.push(o%2?null:l.rowOdd),r+=i.toNumber(e.amount)}),n+=r,t.rows.push([e.name+" "+o.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL"),!1,!1,!1,!1,!1,!1,i.round(r)]),v.push(l.h2)}),t.rows.push([!1,!1,!1,!1,!1,!1,!1,!1]),v.push(null),t.rows.push([!1,!1,!1,!1,!1,!1,o.instant("INCOME_BY_ITEM_REPORT.TOTALS.INCOME")+":",i.round(n)]),v.push(l.h3),t}function T(e){var t={columns:e.reportColumns.columns,rows:[]};v=[];var r=[];e.reportData.forEach(function(e){e.productCategories.forEach(function(e){e.products.forEach(function(e){var t=i.find(r,{orderNo:e.orderNo});t||(t={orderNo:e.orderNo,products:[]},r.push(t)),t.products.push(e)})})}),r=R.reportBuilder.sortData(r,"name");var n=0;return r.forEach(function(e){var r=0;R.reportBuilder.sortData(e.products,"date").forEach(function(e,o){t.rows.push([e.orderNo,e.userName,e.code,e.name,e.date,e.qty,e.amount,!1]),v.push(o%2?null:l.rowOdd),r+=i.toNumber(e.amount)}),n+=r,t.rows.push([!1,o.instant("INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO")+" #"+e.orderNo+" "+o.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL"),!1,!1,!1,!1,!1,i.round(r)]),v.push(l.h2)}),t.rows.push([!1,!1,!1,!1,!1,!1,!1,!1]),v.push(null),t.rows.push([!1,!1,!1,!1,!1,!1,o.instant("INCOME_BY_ITEM_REPORT.TOTALS.INCOME")+":",i.round(n)]),v.push(l.h3),t}R.config={reportName:o.instant("INCOME_BY_ITEM_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},orderBy:"item",reportColumns:{columns:d},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return f.query({centerId:R.config.reportOptions.centerId,fromDate:r("date")(R.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(R.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:R.config.reportOwnerRegion.ownerId,regionId:R.config.reportOwnerRegion.regionId}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,v[t.row.index])}},a.setPageTitle(o.instant("INCOME_BY_ITEM_REPORT.PAGE_TITLE")),R.config.reportDates.fromDate.subtract(1,"M").date(1),R.config.reportDates.toDate.date(0),!1!==R.config.orderBy&&(e.$watch(function(){return n.search().orderBy},function(e){R.config.orderBy=e||"item"}),e.$watch("vm.config.orderBy",function(e){n.search("orderBy",e).replace()})),R.reportBuilder=new c(R.config),e.$watch(function(){return{reportOptions:R.config.reportOptions,reportDates:R.config.reportDates,orderBy:R.config.orderBy,reportOwnerRegion:R.config.reportOwnerRegion}},function(e,r){g&&(t.cancel(g),g=null),g=t(function(){if(R.pdf=null,angular.isDefined(R.config.reportOptions.centerId)){var t=e.reportDates.fromDate,o=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(o)&&t.isSame(o)||(R.config.reportData=null),t=e.reportDates.toDate,o=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(o)&&t.isSame(o)||(R.config.reportData=null),R.config.reportColumns={columns:"member"===e.orderBy?p:"order"===e.orderBy?u:d},R.reportBuilder.buildPdf("member"===e.orderBy?E:"order"===e.orderBy?T:O).then(function(e){R.pdf=e}).then(function(){R.pieCategory=null,R.pieProduct=null,R.pie=h(R.config.reportData)})}},100)},!0),R.downloadPdf=function(){R.pdf&&s(R.pdf,R.reportBuilder.getReportFileName("pdf"))},R.downloadCsv=function(){R.pdf&&(R.config.reportColumns={columns:"member"===R.config.orderBy?p:d},s(R.reportBuilder.buildCsv("member"===R.config.orderBy?E:"order"===R.config.orderBy?T:O),R.reportBuilder.getReportFileName("csv")))},R.pieBack=function(){R.pieProduct?R.pieProduct=null:R.pieCategory=null,R.pie=h(R.config.reportData)}}])},Mvrh:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.incomeReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("IncomeReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var o=t(["payments.date"]);return e(r.getApiAbsUrl("/centers/:centerId/income-reports"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{get:{method:"GET",transformResponse:[angular.fromJson,o]}})}])},OeSc:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.reportOwnerRegion",["deskworks.Owner","deskworks.Region","deskworks.setup.service"]).directive("reportOwnerRegion",["$compile","$templateCache",function(e,t){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportOwnerRegionCtrl as $ctrl",bindToController:{ngModel:"<",reportData:"="},link:function(r,o,n,a,i){i(function(n,a){var i=e(t.get("directives/report-owner-region.tpl.html"))(r);angular.element(i[0].querySelector?i[0].querySelector(".panel-body"):i).append(n),o.after(i)})}}}]).controller("ReportOwnerRegionCtrl",["$scope","$location","$translate","$q","dwAlerts","Owner","Region","setupService","state",function(e,t,r,o,n,a,i,s,l){var c=this;"master"===l.getLoggedUser().role&&(c.$onInit=function(){s.getSetupSettings().catch(function(e){return n(e,"Failed to get setup settings.")}).then(function(e){if(e.isFranchise)return o.all([a.query().catch(function(e){return n(e,"Failed to query owners.")}).then(function(e){c.owners=e,c.owners.unshift({name:r.instant("REPORTS.OWNER_REGION.OWNER.ALL")})}),i.query().catch(function(e){return n(e,"Failed to query regions.")}).then(function(e){c.regions=e,c.regions.unshift({name:r.instant("REPORTS.OWNER_REGION.REGION.ALL")})})])}),!1!==c.ngModel.ownerId&&(e.$watch(function(){return t.search().ownerId},function(e,t){c.ngModel.ownerId=e||0===e?+e:c.owners&&c.owners[0]&&c.owners[0].id,e!==t&&(c.reportData=null)}),e.$watch("$ctrl.ngModel.ownerId",function(e){t.search("ownerId",e).replace()})),!1!==c.ngModel.regionId&&(e.$watch(function(){return t.search().regionId},function(e,t){c.ngModel.regionId=e||0===e?+e:c.regions&&c.regions[0]&&c.regions[0].id,e!==t&&(c.reportData=null)}),e.$watch("$ctrl.ngModel.regionId",function(e){t.search("regionId",e).replace()}))},c.onChange=function(){(c.ngModel.ownerId||c.ngModel.regionId)&&(e.vm.config.reportOptions.centerId=0)})}])},QU59:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.accountsReceivableReportColumns",[]).factory("accountsReceivableReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var o=[{dataKey:"userCompany",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.COMPANY",include:!0,minWidth:150},{dataKey:"userName",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.USER_NAME",include:!0,minWidth:120},{dataKey:"date",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.BILL_DATE",include:!0,width:"wrap",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")},defaultOrder:!0},{dataKey:"amount",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.AMOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"amountDue",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.AMOUNT_DUE",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"daysLate",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.DAYS_LATE",include:!0,halign:"right"},{dataKey:"comment",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.COMMENT",include:!0,minWidth:120},{dataKey:"orderId",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.ORDER_ID",include:!1,halign:"center",width:"wrap"}];function n(){o.forEach(function(e){e.title=r.instant(e._title)})}return n(),e.$on("$setTranslationsSuccess",n),o}])},TGNl:function(e,t,r){"use strict";r.r(t);r("5hJT");t.default=angular.module("deskworks.reports.availabilityReport",["pdfPreview","fileSaver","jsPDF","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.availabilityReport.service","deskworks.reports.availabilityReportColumns"]).controller("AvailabilityReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","jsPDF","reportStyles","ReportBuilder","AvailabilityReport","availabilityReportColumns",function(e,t,r,o,n,a,i,s,l,c,f,d){var p,u=this,m=[],g={0:{columnWidth:230},1:{columnWidth:60}},R={0:{columnWidth:230},1:{columnWidth:60},2:{columnWidth:60},3:{columnWidth:60}};function v(e){var t={columns:d.available,rows:[]};m=[];var r=Array.apply(null,new Array(t.columns.length)).map(function(e){return!1}),n=0;return e.reportData.forEach(function(e,o){var a=e.reservationUnits.filter(function(e){return!e.attachedUser});a.length&&(t.rows.push([e.name].concat(r.slice(0,r.length-1))),m.push(l.h2),a.forEach(function(e,r){n+=e.price,t.rows.push(t.columns.map(function(t){return e[t.dataKey]})),m.push(r%2?null:l.rowOdd)}))}),t.rows.push([o.instant("AVAILABILITY_REPORT.TOTALS.VACANCY"),n].concat(r.slice(0,r.length-2))),m.push(l.h1),t}function h(e){var t={columns:d.unavailable,rows:[]};m=[];var r=Array.apply(null,new Array(t.columns.length)).map(function(e){return!1}),n=0;return e.reportData.forEach(function(e,o){var a=e.reservationUnits.filter(function(e){return!!e.attachedUser});a.length&&(t.rows.push([e.name].concat(r.slice(0,r.length-1))),m.push(l.h2),a.forEach(function(e,r){e.netPrice=e.price-e.discount||0,n+=e.netPrice,t.rows.push(t.columns.map(function(t){return e[t.dataKey]})),m.push(r%2?null:l.rowOdd)}))}),t.rows.push([o.instant("AVAILABILITY_REPORT.TOTALS.OCCUPIED"),!1,!1,n].concat(r.slice(0,r.length-4))),m.push(l.h1),t}u.config={reportName:o.instant("AVAILABILITY_REPORT.REPORT_NAME"),reportOptions:{},getReportData:function(){return f.query({centerId:u.config.reportOptions.centerId}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,m[t.row.index])}},n.setPageTitle(u.config.reportName),u.reportBuilder=new c(u.config),e.$watch(function(){return{reportOptions:u.config.reportOptions,reportColumns:u.config.reportColumns}},function(e,r){p&&(t.cancel(p),p=null),p=t(function(){if(u.pdf=null,!angular.isUndefined(u.config.reportOptions.centerId)){var e=new s(u.config.reportOptions.paperLayout,"pt",u.config.reportOptions.paperSize),t=l.pageMargins[0];e.setFontSize(11),e.setFontStyle("bold"),e.autoTableText(o.instant("AVAILABILITY_REPORT.AVAILABLE")+":",l.pageMargins[3],t,{});var r=Object.assign({startY:t+15,columnStyles:g},l);u.reportBuilder.generatePdf(v,r,e).then(function(e){var t=e.autoTableEndPosY()+20;e.setFontSize(11),e.setFontStyle("bold"),e.autoTableText(o.instant("AVAILABILITY_REPORT.UNAVAILABLE")+":",l.pageMargins[3],t,{});var r=Object.assign({startY:t+15,columnStyles:R},l);u.reportBuilder.generatePdf(h,r,e).then(function(e){u.pdf=e.output("blob")})})}},100)},!0),u.downloadPdf=function(){u.pdf&&i(u.pdf,u.reportBuilder.getReportFileName("pdf"))},u.downloadCsv=function(){u.pdf&&(i(u.reportBuilder.buildCsv(v),u.reportBuilder.getReportFileName("csv","-available")),i(u.reportBuilder.buildCsv(h),u.reportBuilder.getReportFileName("csv","-unavailable")))}}])},TVyk:function(e,t){e.exports="<div id=checkInReport class=gutter-v> <form name=formCheckInReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <report-dates ng-model=$ctrl.config.reportDates></report-dates> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=$ctrl.config.reportOptions> <ff-row> <ff-label flex=\"0 0 100px\"><span translate=CHECK_IN_REPORT.ORDER_BY></span></ff-label> <ff-static> <div class=\"ff-grid gutter-h-half\"> <label flex=none> <ff-radio ff-model=$ctrl.config.orderBy ff-value=\"'userName'\"> <span translate=CHECK_IN_REPORT.ORDER_BY.NAME></span> </ff-radio> </label> <label flex=none> <ff-radio ff-model=$ctrl.config.orderBy ff-value=\"'userCompany'\"> <span translate=CHECK_IN_REPORT.ORDER_BY.COMPANY></span> </ff-radio> </label> <label flex=none> <ff-radio ff-model=$ctrl.config.orderBy ff-value=\"'checkInTime'\"> <span translate=CHECK_IN_REPORT.ORDER_BY.DATE></span> </ff-radio> </label> </div> </ff-static> </ff-row> </report-options> </div> </div> <ff-panel flex=auto> <ff-panel-header> <span ng-if=\"$ctrl.config.orderBy === 'checkInTime'\" translate=CHECK_IN_REPORT.BAR_CHART.USAGE_PER_DAY></span> <span ng-if=\"$ctrl.config.orderBy === 'userName'\" translate=CHECK_IN_REPORT.BAR_CHART.USAGE_BY_MEMBER></span> <span ng-if=\"$ctrl.config.orderBy === 'userCompany'\" translate=CHECK_IN_REPORT.BAR_CHART.USAGE_BY_COMPANY></span> </ff-panel-header> <div ff-dim=!$ctrl.pdf ng-init=\"$c = $ctrl\"> <chart chart-type={{$ctrl.bar.type}} chart-labels=$ctrl.bar.labels chart-data=$ctrl.bar.data chart-options=$ctrl.bar.options ng-style=\"{ 'max-height': $c.config.orderBy === 'checkInTime' ? null : 'none', 'height': $c.config.orderBy === 'checkInTime' ? null : $c.bar.labels.length * 25 + 'px' }\"></chart> </div> </ff-panel> <ff-btn-group> <ff-btn sense=download ff-click=$ctrl.downloadPdf() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=$ctrl.downloadCsv() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </div> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=$ctrl.pdf></div> </ff-panel> </div> "},Tbc7:function(e,t,r){"use strict";r.r(t);r("t91x");var o=["$injector",function(e){var t,o=(t=r("8g2Y")).keys().map(t);e.loadNewModules(o.map(function(e){return e.default.name})),e.invoke(["$templateCache",function(e){var t=r("/MGB");t.keys().forEach(function(r){return e.put(r.replace(/^\.\//,""),t(r))})}])}];t.default=o},"U+0Z":function(e,t){e.exports='<ff-panel ng-if="$ctrl.owners && $ctrl.regions"> <ff-panel-header><span translate=REPORTS.OWNER_REGION.HEADER></span></ff-panel-header> <label class=ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.OWNER_REGION.OWNER></span></ff-label> <ff-select ff-model=$ctrl.ngModel.ownerId ff-options="owner.id as owner.name for owner in $ctrl.owners" ff-change=$ctrl.onChange()></ff-select> </label> <label class=ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.OWNER_REGION.REGION></span></ff-label> <ff-select ff-model=$ctrl.ngModel.regionId ff-options="region.id as region.name for region in $ctrl.regions" ff-change=$ctrl.onChange()></ff-select> </label> </ff-panel> '},"U+9+":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.checkInReportColumns",[]).factory("checkInReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var o=[{dataKey:"userName",_title:"CHECK_IN_REPORT.COLUMNS.NAME"},{dataKey:"userCompany",_title:"CHECK_IN_REPORT.COLUMNS.COMPANY"},{dataKey:"checkInTime",_title:"CHECK_IN_REPORT.COLUMNS.DATE",halign:"center",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"checkInTime",_title:"CHECK_IN_REPORT.COLUMNS.CHECK_IN",halign:"center",pdf:function(e){return t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortTime")}},{dataKey:"checkOutTime",_title:"CHECK_IN_REPORT.COLUMNS.CHECK_OUT",halign:"center",pdf:function(e){return t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortTime")}},{dataKey:"duration",_title:"CHECK_IN_REPORT.COLUMNS.USAGE_HOURS",halign:"right",pdf:function(e){return t("hours-minutes")(e)},csv:function(e){return t("hours-minutes")(e)}}];function n(){o.forEach(function(e){e.title=r.instant(e._title)})}return n(),e.$on("$setTranslationsSuccess",n),o}])},UMDU:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.incomeByOrderReportColumns",[]).factory("incomeByOrderReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var o=[{dataKey:"orderNo",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO",include:!0,width:"wrap"},{dataKey:"userName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"productCode",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE",include:!0,width:"wrap"},{dataKey:"productName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME",include:!0},{dataKey:"date",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.DATE",include:!0,width:"wrap",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"qty",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY",include:!0,halign:"center",width:"wrap"},{dataKey:"amount",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function n(){o.forEach(function(e){e.title=r.instant(e._title)})}return n(),e.$on("$setTranslationsSuccess",n),o}])},UUPn:function(e,t){e.exports='<div id=incomeByItemReport class=gutter-v> <form name=formIncomeByItemReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <report-dates ng-model=vm.config.reportDates></report-dates> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions> <ff-row> <ff-label flex="0 0 100px"><span translate=INCOME_BY_ITEM_REPORT.ORDER_BY></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half"> <label flex="0 0 auto"> <ff-radio ff-model=vm.config.orderBy ff-value="\'item\'"> <span translate=INCOME_BY_ITEM_REPORT.ORDER_BY.ITEM></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio ff-model=vm.config.orderBy ff-value="\'member\'"> <span translate=INCOME_BY_ITEM_REPORT.ORDER_BY.MEMBER></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio ff-model=vm.config.orderBy ff-value="\'order\'"> <span translate=INCOME_BY_ITEM_REPORT.ORDER_BY.ORDER></span> </ff-radio> </label> </div> </ff-static> </ff-row> </report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> <ff-panel flex="1 1 auto"> <ff-panel-header> <ff-row class=gutter-h-half> <div> <span ng-if="!vm.pieCategory && !vm.pieProduct" translate=INCOME_BY_ITEM_REPORT.PRODUCT_CATEGORIES_PIE_CHART.HEADER></span> <span ng-if="vm.pieCategory || vm.pieProduct" ng-bind="vm.pieProduct.name || vm.pieCategory.name"></span> </div> <div flex="0 0 auto" style=align-items:center> <ff-btn ng-if="vm.pieCategory || vm.pieProduct" size=sm sense=back style="margin:-.5rem 0" title="{{\'GLOBAL.BTN_BACK\' | translate}}" ff-click=vm.pieBack()><span translate=GLOBAL.BTN_BACK></span></ff-btn> </div> </ff-row> </ff-panel-header> <div ff-dim=!vm.pdf> <chart chart-type=pie chart-labels=vm.pie.labels chart-data=vm.pie.data chart-options=vm.pie.options></chart> </div> </ff-panel> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> '},Ytnt:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.accountsReceivableReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.accountsReceivableReport.service","deskworks.reports.accountsReceivableReportColumns"]).controller("AccountsReceivableReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","AccountsReceivableReport","accountsReceivableReportColumns",function(e,t,r,o,n,a,i,s,l,c,f){var d,p=this,u=[];function m(e){var t={columns:e.reportColumns.columns.filter(function(e){return e.include}),rows:e.reportData.payments};t.rows=p.reportBuilder.sortData(t.rows,e.reportColumns.order),u=[],t.rows=t.rows.map(function(e,r){return u.push(r%2?null:s.rowOdd),t.columns.map(function(t){return e[t.dataKey]})});var r,n=Array.apply(null,new Array(t.columns.length)).map(function(e){return!1});return t.rows.push(n),u.push(null),(r=a.findIndexByKeyValue(t.columns,"dataKey","daysLate"))>=0&&(t.rows.push(n.slice(0,Math.max(r-1,0)).concat(r>0?[o.instant("ACCOUNTS_RECEIVABLE_REPORT.TOTALS.AVG_DAYS_LATE")+":",e.reportData.averageDaysLate]:[e.reportData.averageDaysLate]).concat(n.slice(0,n.length-r-1))),u.push(s.h3)),(r=a.findIndexByKeyValue(t.columns,"dataKey","amountDue"))>=0&&(t.rows.push(n.slice(0,Math.max(r-1,0)).concat(r>0?[o.instant("ACCOUNTS_RECEIVABLE_REPORT.TOTALS.TOTAL_DUE")+":",e.reportData.total]:[e.reportData.total]).concat(n.slice(0,n.length-r-1))),u.push(s.h3)),t}p.config={reportName:o.instant("ACCOUNTS_RECEIVABLE_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:angular.copy(f)},reportDates:{fromDate:!1,toDate:moment()},getReportData:function(){return c.get({centerId:p.config.reportOptions.centerId,date:r("date")(p.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:p.config.reportOwnerRegion.ownerId,regionId:p.config.reportOwnerRegion.regionId}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,u[t.row.index])}},n.setPageTitle(p.config.reportName),p.reportBuilder=new l(p.config),e.$watch(function(){return{reportOptions:p.config.reportOptions,reportDates:p.config.reportDates,reportColumns:p.config.reportColumns,reportOwnerRegion:p.config.reportOwnerRegion}},function(e,r){d&&(t.cancel(d),d=null),d=t(function(){if(p.pdf=null,!angular.isUndefined(p.config.reportOptions.centerId)){var t=e.reportDates.fromDate,o=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(o)&&t.isSame(o)||(p.config.reportData=null),t=e.reportDates.toDate,o=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(o)&&t.isSame(o)||(p.config.reportData=null),p.reportBuilder.buildPdf(m).then(function(e){p.pdf=e})}},100)},!0),p.downloadPdf=function(){p.pdf&&i(p.pdf,p.reportBuilder.getReportFileName("pdf"))},p.downloadCsv=function(){p.pdf&&i(p.reportBuilder.buildCsv(m),p.reportBuilder.getReportFileName("csv"))}}])},ZfFK:function(e,t){e.exports="<div id=availabilityReport class=gutter-v> <form name=formAvailabilityReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\" style=margin-left:auto> <report-options ng-model=vm.config.reportOptions all-centers=false></report-options> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},ZimX:function(e,t,r){"use strict";r.r(t);r("it7j");var o=r("73rf"),n=r.n(o);t.default=angular.module("deskworks.reportOrderBy",[]).directive("reportOrderBy",["$compile",function(e){return{restrict:"E",scope:!0,transclude:"element",priority:2,controller:"ReportOrderByCtrl as $ctrl",bindToController:{ngModel:"=",reportColumns:"<"},link:function(t,r,o,a,i){i(function(o,a){var i=e(n.a)(t);angular.element(i[0].querySelector?i[0].querySelector(".ff-panel-body"):i).append(o),r.after(i)})}}}]).controller("ReportOrderByCtrl",["$scope","$location",function(e,t){var r=this;r.$onInit=function(){e.$watch(function(){return t.search().orderBy},function(e){var t=r.reportColumns.find(function(e){return e.defaultOrder})||r.reportColumns[0];r.ngModel=e||r.ngModel||t.id||t.dataKey}),e.$watch("$ctrl.ngModel",function(e){t.search("orderBy",e).replace()})}}])},cjYI:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.checkInReportBarChart",[]).factory("checkInReportBarChart",["$translate","$filter","helper","whitelabel",function(e,t,r,o){return{getChartConfig:function(e,r){var n={labels:e.map(function(e){return e.name||"-"}),data:[{data:e.map(function(e){return e.value/36e5}),backgroundColor:o.getProperty("--brand-color")}],options:{legend:{display:!1},tooltips:{callbacks:{label:function(r,o){return t("hours-minutes")(e[r.index].value)}}},scales:{xAxes:[{maxBarThickness:100}]}}};return n.type="checkInTime"===r?"bar":"horizontalBar",n}}}])},h5Ea:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.creditBalanceReportColumns",[]).factory("creditBalanceReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var o=[{dataKey:"centerName",_title:"CREDIT_BALANCE_REPORT.COLUMNS.CENTER",include:!0},{dataKey:"userName",_title:"CREDIT_BALANCE_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"date",_title:"CREDIT_BALANCE_REPORT.COLUMNS.DATE",include:!0,width:"wrap",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"order",_title:"CREDIT_BALANCE_REPORT.COLUMNS.ORDER_ID",include:!0,width:"wrap"},{dataKey:"amount",_title:"CREDIT_BALANCE_REPORT.COLUMNS.BALANCE",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function n(){o.forEach(function(e){e.title=r.instant(e._title)})}return n(),e.$on("$setTranslationsSuccess",n),o}])},hY1K:function(e,t,r){},kCKf:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.creditBalanceReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.creditBalanceReport.service","deskworks.reports.creditBalanceReportColumns"]).controller("CreditBalanceReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","CreditBalanceReport","creditBalanceReportColumns",function(e,t,r,o,n,a,i,s,l,c,f){var d,p=this,u=[];function m(e){var t={columns:e.reportColumns.columns,rows:[]};return u=[],t.rows=e.reportData.credits.map(function(e,r){return u.push(r%2?null:s.rowOdd),t.columns.map(function(t){return e[t.dataKey]})}),t.rows.push([!1,!1,!1,!1,!1]),u.push(null),t.rows.push([!1,!1,!1,o.instant("CREDIT_BALANCE_REPORT.TOTALS.CREDIT")+":",e.reportData.total]),u.push(s.h3),t}p.config={reportName:o.instant("CREDIT_BALANCE_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:f},getReportData:function(){return c.get({centerId:p.config.reportOptions.centerId,ownerId:p.config.reportOwnerRegion.ownerId,regionId:p.config.reportOwnerRegion.regionId}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,u[t.row.index])}},n.setPageTitle(p.config.reportName),p.reportBuilder=new l(p.config),e.$watch(function(){return{reportOptions:p.config.reportOptions,reportOwnerRegion:p.config.reportOwnerRegion}},function(e,r){d&&(t.cancel(d),d=null),d=t(function(){p.pdf=null,angular.isUndefined(p.config.reportOptions.centerId)||p.reportBuilder.buildPdf(m).then(function(e){p.pdf=e})},100)},!0),p.downloadPdf=function(){p.pdf&&i(p.pdf,p.reportBuilder.getReportFileName("pdf"))},p.downloadCsv=function(){p.pdf&&i(p.reportBuilder.buildCsv(m),p.reportBuilder.getReportFileName("csv"))}}])},kUla:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.incomeByMemberReportColumns",[]).factory("incomeByMemberReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var o=[{dataKey:"userName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"productCode",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE",include:!0,width:"wrap"},{dataKey:"productName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME",include:!0},{dataKey:"orderNo",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO",include:!0,width:"wrap"},{dataKey:"date",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.DATE",include:!0,width:"wrap",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"qty",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY",include:!0,halign:"center",width:"wrap"},{dataKey:"amount",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function n(){o.forEach(function(e){e.title=r.instant(e._title)})}return n(),e.$on("$setTranslationsSuccess",n),o}])},lfjW:function(e,t){e.exports="<div id=creditBalanceReport class=gutter-v> <form name=formCreditBalanceReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\" style=margin-left:auto> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions></report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},nkhl:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.availabilityReport.service",["ngResource","deserializeNumbers","deskworks.config"]).factory("AvailabilityReport",["$resource","deserializeNumbers","deskworksConfig",function(e,t,r){var o=r.getApiAbsUrl("/centers/:centerId/availability-reports"),n=t(["reservationUnits.price","reservationUnits.discount"]);return e(o,{centerId:"@centerId"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,n]}})}])},pEUA:function(e,t){e.exports="<ff-panel ng-hide=$ctrl.embed> <ff-panel-header><span translate=REPORTS.PERIOD.HEADER></span></ff-panel-header> <div class=ff-grid> <label class=ff-row flex=\"{lg: '0 0 50%'}\" ng-if=\"$ctrl.ngModel.fromDate !== false\"> <ff-label flex=\"{lg: '0 0 80px', xs: '0 0 100px'}\" ff-required=true><span translate=REPORTS.PERIOD.FROM_DATE></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=$ctrl.ngModel.fromDate ff-required=true ff-date-order=\"{ early: $ctrl.ngModel.fromDate, late: $ctrl.ngModel.toDate }\" ff-validate-alert=\"{ field: '{{'REPORTS.PERIOD.FROM_DATE' | translate}}', late: '{{'REPORTS.PERIOD.TO_DATE' | translate}}' }\"></ff-date> <span class=ff-label></span> </label> <label class=ff-row flex=\"{lg: $ctrl.ngModel.fromDate === false ? 'auto' : '0 0 50%'}\"> <ff-label flex=\"{lg: '0 0 62px', xs: '0 0 100px'}\" ff-required=true><span translate=REPORTS.PERIOD.TO_DATE></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=$ctrl.ngModel.toDate ff-required=true ff-date-order=\"{ early: $ctrl.ngModel.fromDate, late: $ctrl.ngModel.toDate }\" ff-validate-alert=\"{ field: '{{'REPORTS.PERIOD.TO_DATE' | translate}}', early: '{{'REPORTS.PERIOD.FROM_DATE' | translate}}' }\"></ff-date> <span class=ff-label></span> </label> </div> </ff-panel> <ff-row ng-if=\"$ctrl.embed && $ctrl.ngModel.fromDate !== false\"> <label> <ff-label flex={{$ctrl.embed}} ff-required=true><span translate=REPORTS.PERIOD.FROM_DATE></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=$ctrl.ngModel.fromDate ff-required=true ff-validate-alert=\"{{'REPORTS.PERIOD.FROM_DATE' | translate}}\"></ff-date> <span class=ff-label></span> </label> </ff-row> <ff-row ng-if=$ctrl.embed> <label> <ff-label flex={{$ctrl.embed}} ff-required=true><span translate=REPORTS.PERIOD.TO_DATE></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=$ctrl.ngModel.toDate ff-required=true ff-validate-alert=\"{{'REPORTS.PERIOD.TO_DATE' | translate}}\"></ff-date> <span class=ff-label></span> </label> </ff-row> "},pvmN:function(e,t){e.exports="<div id=incomeReport class=gutter-v> <form name=formIncomeReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <report-dates ng-model=vm.config.reportDates></report-dates> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions></report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},qFux:function(e,t,r){"use strict";r.r(t);r("it7j");t.default=angular.module("deskworks.reports.incomeByItemPieChart",[]).factory("incomeByItemPieChart",["$filter","helper",function(e,t){return{pieByCategories:function(e){return o(e).map(function(e){return{code:e.code,name:t.join([e.name,"["+e.code+"]"]," "),value:e.total}})},pieByProducts:function(e,n){var a=o(e).find(function(e){return e.code===n}),i=[];return a.products.forEach(function(e){var r=i.find(function(t){return t.code===e.code});r||(r={code:e.code,name:t.join([e.name,"["+e.code+"]"]," "),value:0},i.push(r)),r.value+=t.toNumber(e.amount)}),i=r(i,"value",!0)},pieByUsers:function(e,n,a){var i=o(e).find(function(e){return e.code===n}),s=[];return i.products.forEach(function(e){if(e.code===a){var r=s.find(function(t){return t.name===e.userName});r||(r={code:e.code,name:e.userName,value:0},s.push(r)),r.value+=t.toNumber(e.amount)}}),s=r(s,"value",!0)}};function r(t,r,o){var n=[];return t=t.filter(function(e){if((e[r]||0===e[r])&&""!==e[r])return!0;n.push(e)}),e("orderBy")(t,r,o).concat(n)}function o(e){var o=[];return e.forEach(function(e){var t=o.find(function(t){return t.code===e.code});t?t.products=t.products.concat(e.products):((t=angular.copy(e)).total=0,o.push(t))}),o.forEach(function(e){e.products.forEach(function(r){e.total+=t.toNumber(r.amount)})}),r(o,"total",!0).slice(0,10)}}])},sSbM:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.incomeByItemReportColumns",[]).factory("incomeByItemReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var o=[{dataKey:"productCode",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE",include:!0,width:"wrap"},{dataKey:"productName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME",include:!0},{dataKey:"userName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"orderNo",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO",include:!0,width:"wrap"},{dataKey:"date",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.DATE",include:!0,width:"wrap",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"qty",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY",include:!0,halign:"center",width:"wrap"},{dataKey:"amount",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"subtotal",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.SUBTOTAL",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function n(){o.forEach(function(e){e.title=r.instant(e._title)})}return n(),e.$on("$setTranslationsSuccess",n),o}])},u7OF:function(e,t,r){"use strict";r.r(t);r("S2gh"),r("hY1K");t.default=angular.module("chart",["deskworks.helper"]).directive("chart",["$window","systemColors",function(e,t){return e.Chart.defaults.global.legend.labels.boxWidth=12,e.Chart.defaults.global.tooltips.cornerRadius=3,e.Chart.defaults.global.tooltips.displayColors=!1,e.Chart.defaults.global.tooltips.backgroundColor="rgba(0,0,0,0.65)",e.Chart.defaults.global.elements.rectangle.borderWidth=1,e.Chart.defaults.global.elements.rectangle.backgroundColor=t.primary,e.Chart.defaults.global.elements.arc.borderWidth=1,{restrict:"E",scope:!0,controller:"ChartCtrl as $ctrl",bindToController:{type:"@chartType",labels:"<chartLabels",data:"<chartData",options:"<chartOptions"},template:"<canvas></canvas>"}}]).controller("ChartCtrl",["$scope","$element","$window","helper",function(e,t,r,o){var n,a=this,i={maintainAspectRatio:!1},s={backgroundColor:["#317da3","#e6194b","#3cb44b","#ffe119","#f58231","#911eb4","#aa6e28","#008080","#808080","#800000","#3244a1","#e64c19","#3db372","#d1ff1a","#f5c131","#b31e81","#a89728","#005580","#806659","#804000"],hoverBorderWidth:2,hoverBorderColor:"#fff"};a.$onDestroy=function(){n&&n.destroy()},a.$onChanges=function(e){if(a.options){var o={labels:a.labels,datasets:a.data.slice()};o.datasets[0]=angular.extend({},s,o.datasets[0]),!n||e.type&&e.type.currentValue!==e.type.previousValue?(n&&n.destroy(),n=new r.Chart(t.children(),{type:a.type,data:o,options:angular.extend({},i,a.options)})):(angular.extend(n.data,o),angular.extend(n.options,i,a.options),n.update())}}}])},ukw3:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.depositTransactionReport.service",["ngResource","deserializeNumbers","datesDeserializer","deskworks.config"]).factory("DepositTransactionReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,o){var n=o.getApiAbsUrl("/banks/:bankId/deposit-transaction-reports"),a=t(["date","billingMethods.centers.payments.date"]),i=r(["billingMethods.centers.payments.amount"]);return e(n,{bankId:"@bankId",centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,a,i]}})}])},vopJ:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.availabilityReportColumns",[]).factory("availabilityReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var o={available:[{dataKey:"name",_title:"AVAILABILITY_REPORT.COLUMNS.UNIT",include:!0,defaultOrder:!0},{dataKey:"price",_title:"AVAILABILITY_REPORT.COLUMNS.PRICE",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"description",_title:"AVAILABILITY_REPORT.COLUMNS.DESCRIPTION",include:!0}],unavailable:[{dataKey:"name",_title:"AVAILABILITY_REPORT.COLUMNS.UNIT",include:!0,defaultOrder:!0},{dataKey:"price",_title:"AVAILABILITY_REPORT.COLUMNS.PRICE",include:!0,halign:"right",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"discount",_title:"AVAILABILITY_REPORT.COLUMNS.DISCOUNT",include:!0,halign:"right",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"netPrice",_title:"AVAILABILITY_REPORT.COLUMNS.NET_PRICE",include:!0,halign:"right",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"attachedUser",_title:"AVAILABILITY_REPORT.COLUMNS.CLIENT",include:!0}]};function n(){o.available.forEach(function(e){e.title=r.instant(e._title)}),o.unavailable.forEach(function(e){e.title=r.instant(e._title)})}return n(),e.$on("$setTranslationsSuccess",n),o}])},vtWt:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.incomeReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.incomeReport.service","deskworks.reports.incomeReportColumns"]).controller("IncomeReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","IncomeReport","incomeReportColumns",function(e,t,r,o,n,a,i,s,l,c,f){var d,p=this,u=[];function m(e){var t={columns:e.reportColumns.columns,rows:[]};return u=[],t.rows=e.reportData.payments.map(function(e,r){return u.push(r%2?null:s.rowOdd),t.columns.map(function(t){return e[t.dataKey]})}),t.rows.push([!1,!1,!1,!1,!1]),u.push(null),t.rows.push([!1,!1,!1,o.instant("INCOME_REPORT.TOTAL_INCOME")+":",e.reportData.total]),u.push(s.h3),t}p.config={reportName:o.instant("INCOME_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:f},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return c.get({centerId:p.config.reportOptions.centerId,fromDate:r("date")(p.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(p.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:p.config.reportOwnerRegion.ownerId,regionId:p.config.reportOwnerRegion.regionId}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,u[t.row.index])}},n.setPageTitle(o.instant("INCOME_REPORT.PAGE_TITLE")),p.config.reportDates.fromDate.date(1),p.config.reportDates.toDate.add(1,"M").date(0),p.reportBuilder=new l(p.config),e.$watch(function(){return{reportOptions:p.config.reportOptions,reportDates:p.config.reportDates,reportOwnerRegion:p.config.reportOwnerRegion}},function(e,r){d&&(t.cancel(d),d=null),d=t(function(){if(p.pdf=null,!angular.isUndefined(p.config.reportOptions.centerId)){var t=e.reportDates.fromDate,o=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(o)&&t.isSame(o)||(p.config.reportData=null),t=e.reportDates.toDate,o=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(o)&&t.isSame(o)||(p.config.reportData=null),p.reportBuilder.buildPdf(m).then(function(e){p.pdf=e})}},100)},!0),p.downloadPdf=function(){p.pdf&&i(p.pdf,p.reportBuilder.getReportFileName("pdf"))},p.downloadCsv=function(){p.pdf&&i(p.reportBuilder.buildCsv(m),p.reportBuilder.getReportFileName("csv"))}}])},"xU/f":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.accountsReceivableReport.service",["ngResource","datesDeserializer","deserializeNumbers","deskworks.config"]).factory("AccountsReceivableReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,o){var n=t(["payments.date"]),a=r(["payments.amountDue","payments.amount"]);return e(o.getApiAbsUrl("/centers/:centerId/accounts-receivable-reports"),{centerId:"@centerId",date:"@date"},{get:{method:"GET",transformResponse:[angular.fromJson,n,a]}})}])},xWoj:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.depositTransactionReportColumns",["deskworks.helper"]).factory("depositTransactionReportColumns",["$rootScope","$filter","$translate","helper",function(e,t,r,o){var n=[{dataKey:"reference",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.REFERENCE",include:!0,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"userName",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.USER_NAME",include:!0,defaultOrder:!0},{dataKey:"payorName",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.PAYOR",include:!0},{dataKey:"userCompany",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.COMPANY",include:!0},{dataKey:"amount",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.AMOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"subtotal",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.SUBTOTAL",include:!0,halign:"right",readonly:!0,width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.TOTAL",include:!0,halign:"right",readonly:!0,width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"orderId",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.ORDER_ID",include:!1,halign:"center",width:"wrap"}];function a(){n.forEach(function(e){e.title=r.instant(e._title)})}return a(),e.$on("$setTranslationsSuccess",a),n}])},ynEu:function(e,t,r){"use strict";r.r(t);var o=r("92Gs");t.default=angular.module("deskworks.CheckInReportCtrl",["pdfPreview","fileSaver","chart","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.CheckInReport","deskworks.checkInReportColumns","deskworks.checkInReportTotalsColumns","deskworks.reports.checkInReportBarChart",o.default.name]).controller("CheckInReportCtrl",["$scope","$location","$timeout","$translate","$filter","state","fileSaver","reportStyles","ReportBuilder","CheckInReport","checkInReportBarChart","checkInReportColumns","checkInReportTotalsColumns","reportGroupBy",function(e,t,r,o,n,a,i,s,l,c,f,d,p,u){var m,g=this;function R(e){var t={columns:d,rows:[],styles:[]},r=u(e.reportData,e.orderBy),n=Array.apply(null,new Array(t.columns.length)).map(function(){return!1});return r.forEach(function(e){var r=0;e.forEach(function(e,o){t.rows.push(t.columns.map(function(t){return e[t.dataKey]})),t.styles.push(o%2?null:s.rowOdd),r+=e.duration}),t.rows.push(n.slice(0,t.columns.length-2).concat([o.instant("CHECK_IN_REPORT.COLUMNS.SUBTOTAL")+":",r])),t.styles.push(s.h2)}),t}function v(e){var t={userName:["userName","totalHoursTimeRange"],userCompany:["userCompany","totalHoursTimeRange"],checkInTime:["date","totalHoursDay"]},r={columns:p.filter(function(r){return t[e.orderBy].indexOf(r.dataKey)>=0}),rows:[],styles:[]};return u(e.reportData,e.orderBy).forEach(function(t,o){var n=t.reduce(function(e,t){return e+t.duration},0);r.rows.push([t[0][e.orderBy],n]),r.styles.push(o%2?null:s.rowOdd)}),r}g.config={reportName:o.instant("CHECK_IN_REPORT.REPORT_NAME"),reportOptions:{},orderBy:"checkInTime",reportColumns:{columns:d},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return c.query({centerId:g.config.reportOptions.centerId,fromDate:n("date")(g.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:n("date")(g.config.reportDates.toDate,"yyyy-MM-dd")})}},a.setPageTitle(g.config.reportName),g.config.reportDates.fromDate.date(1),!1!==g.config.orderBy&&(e.$watch(function(){return t.search().orderBy},function(e){g.config.orderBy=e||"checkInTime"}),e.$watch("$ctrl.config.orderBy",function(e){t.search("orderBy",e).replace()})),g.reportBuilder=new l(g.config),e.$watch(function(){return{reportOptions:g.config.reportOptions,reportDates:g.config.reportDates,orderBy:g.config.orderBy}},function(e,t){m&&(r.cancel(m),m=null),m=r(function(){if(g.pdf=null,g.config.reportDates.fromDate&&g.config.reportDates.toDate){var r=e.reportDates.fromDate,o=t.reportDates.fromDate;!moment.isMoment(r)||moment.isMoment(o)&&r.isSame(o)||(g.config.reportData=null),r=e.reportDates.toDate,o=t.reportDates.toDate,!moment.isMoment(r)||moment.isMoment(o)&&r.isSame(o)||(g.config.reportData=null);new jsPDF(g.config.reportOptions.paperLayout,"pt",g.config.reportOptions.paperSize);g.reportBuilder.generatePdf(R).then(function(e){var t=angular.copy(s);t.startY=e.autoTableEndPosY()+40,t.tableMargin=s.pageMargins.slice(),t.tableMargin[3]=340,g.reportBuilder.generatePdf(v,t,e).then(function(e){g.pdf=e.output("blob")}).then(function(){var e,t;g.bar=(e=g.config,t=u(e.reportData,e.orderBy).map(function(t){var r=t.reduce(function(e,t){return e+t.duration},0);return{name:"checkInTime"===e.orderBy?n("date")(t[0][e.orderBy]):t[0][e.orderBy],value:r}}),f.getChartConfig(t,e.orderBy))})})}},100)},!0),g.downloadPdf=function(){g.pdf&&i(g.pdf,g.reportBuilder.getReportFileName("pdf"))},g.downloadCsv=function(){g.pdf&&(i(g.reportBuilder.buildCsv(R),g.reportBuilder.getReportFileName("csv","-main")),i(g.reportBuilder.buildCsv(v),g.reportBuilder.getReportFileName("csv","-totals")))}}])}}]);