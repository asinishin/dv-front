(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"+qiB":function(e,t){e.exports='<label class=ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.BY_PERIOD></span></ff-label> <ff-select ff-model=$ctrl.ngModel ff-options="opt.id as opt.name for opt in $ctrl.optsPeriod"></ff-select> </label> '},"//ZJ":function(e,t,r){"use strict";r.r(t);r("y89P"),r("X5mX");t.default=angular.module("deskworks.reports.reportDates",["deskworks.helper"]).directive("reportDates",["$compile","$templateCache",function(e,t){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportDatesCtrl as $ctrl",bindToController:{ngModel:"<",embed:"@"},link:function(r,n,o,a,i){i((function(o,a){var i=e(t.get("directives/report-dates.tpl.html"))(r);angular.element(i[0].querySelector?i[0].querySelector(".ff-panel-body"):i).append(o),n.after(i)}))}}}]).controller("ReportDatesCtrl",["$scope","$location","$filter","state","helper",function(e,t,r,n,o){var a=this;a.$onInit=function(){!1!==a.ngModel.fromDate&&(e.$watch((function(){return t.search().fromDate}),(function(e){var t=r("toDate")(e);a.ngModel.fromDate=moment.isMoment(t)&&!a.ngModel.fromDate.isSame(t)?t:a.ngModel.fromDate})),e.$watch("$ctrl.ngModel.fromDate",(function(e){moment.isMoment(e)&&t.search("fromDate",r("date")(e,"yyyy-MM-dd")).replace()}))),!1!==a.ngModel.toDate&&(e.$watch((function(){return t.search().toDate}),(function(e){var t=r("toDate")(e);a.ngModel.toDate=moment.isMoment(t)&&!a.ngModel.toDate.isSame(t)?t:a.ngModel.toDate})),e.$watch("$ctrl.ngModel.toDate",(function(e){moment.isMoment(e)&&t.search("toDate",r("date")(e,"yyyy-MM-dd")).replace()})))}}])},"/MGB":function(e,t,r){var n={"./accounts-receivable-report/accounts-receivable-report.tpl.html":"/cev","./availability-report/availability-report.tpl.html":"ZfFK","./check-in-report/check-in-report.tpl.html":"TVyk","./credit-balance-report/credit-balance-report.tpl.html":"lfjW","./deposit-transaction-report/deposit-transaction-report.tpl.html":"HIxv","./directives/report-by-period.tpl.html":"+qiB","./directives/report-columns.tpl.html":"LLH2","./directives/report-dates.tpl.html":"pEUA","./directives/report-options.tpl.html":"9W37","./directives/report-order-by.tpl.html":"73rf","./directives/report-owner-region.tpl.html":"U+0Z","./income-by-item-report/income-by-item-report.tpl.html":"UUPn","./income-report/income-report.tpl.html":"pvmN","./invoice/invoice.tpl.html":"aoB6","./mailbox-report/mailbox-report.tpl.html":"iTQj","./member-statement/member-statement.tpl.html":"C/0G","./member-usage-report/member-usage-report.tpl.html":"lKYt","./membership-report/membership-report.tpl.html":"EKM0","./price-list-report/price-list-report.tpl.html":"CR4+","./recurring-billing-report/recurring-billing-report.tpl.html":"GGg2","./reservation-report/reservation-report.tpl.html":"+1+s","./reservation-usage-report/reservation-usage-report.tpl.html":"BEjt","./reservation-utilization-report/reservation-utilization-report.tpl.html":"nJHl","./security-deposit-report/security-deposit-report.tpl.html":"kJoc","./write-off-report/write-off-report.tpl.html":"aHVT"};function o(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id="/MGB"},"/XlY":function(e,t,r){"use strict";r.r(t);r("y89P"),r("X5mX");t.default=angular.module("deskworks.reportByPeriod",["deskworks.helper","deskworks.reports.optsReportByPeriod"]).directive("reportByPeriod",["$compile","$templateCache",function(e,t){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportByPeriodCtrl as $ctrl",bindToController:{ngModel:"="},link:function(r,n,o,a,i){i((function(o,a){var i=e(t.get("directives/report-by-period.tpl.html"))(r);angular.element(i[0].querySelector?i[0].querySelector(".ff-panel-body"):i).append(o),n.after(i)}))}}}]).controller("ReportByPeriodCtrl",["$scope","$location","state","helper","optsReportByPeriod",function(e,t,r,n,o){var a=this;a.optsPeriod=o,a.$onInit=function(){e.$watch((function(){return t.search().byPeriod}),(function(e){a.ngModel=e||a.ngModel||a.optsPeriod[0].id})),e.$watch("$ctrl.ngModel",(function(e){t.search("byPeriod",e).replace()}))}}])},"/cev":function(e,t){e.exports="<div id=accountsReceivableReport class=gutter-v> <form name=formAccountsReceivableReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 65%', md: '0 0 50%'}\"> <div class=gutter-v> <report-dates ng-model=vm.config.reportDates></report-dates> <report-columns ng-model=vm.config.reportColumns></report-columns> </div> </div> <div flex=\"{lg: '0 0 35%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions></report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},"2+c3":function(e,t,r){"use strict";r.r(t);r("y89P");var n=r("ipr/"),o=r.n(n),a=r("6RpP"),i=r.n(a),l=r("WSeP"),s=r.n(l),c=r("yCd9"),d=r.n(c),f=r("hsT8"),p=r.n(f);t.default=angular.module("deskworks.reports.depositTransactionReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.depositTransactionReport.service","deskworks.reports.depositTransactionReportColumns"]).controller("DepositTransactionReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","DepositTransactionReport","depositTransactionReportColumns","banks","centers",function(e,t,r,n,a,l,c,f,u,m,g,R,v){var O,h=this,y=[];function T(e){var t,r,a,c={columns:p()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:[]};y=[];var u,m=d()(r=Array.apply(null,new Array(c.columns.length))).call(r,(function(e){return!1}));return s()(a=e.reportData).call(a,(function(t,r){var a,p,g,R;(u=l.findIndexByKeyValue(c.columns,"dataKey","total"))>=0&&(c.rows.push(i()(p=i()(g=i()(R=[t.date]).call(R,o()(m).call(m,0,Math.max(u-2,0)))).call(g,u>1?[n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.DAILY")+":",t.total]:[t.total])).call(p,o()(m).call(m,0,m.length-u-1))),y.push(f.h1));s()(a=t.billingMethods).call(a,(function(t){var r,a,p,g,R;(u=l.findIndexByKeyValue(c.columns,"dataKey","subtotal"))>=0&&(c.rows.push(0===u?[t.subtotal]:i()(p=i()(g=i()(R=[t.name+" "+n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.DEPOSITS")]).call(R,o()(m).call(m,0,Math.max(u-3,0)))).call(g,u>2?[t.name+" "+n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",!1,t.subtotal]:2===u?[t.name+" "+n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",t.subtotal]:1===u?[t.subtotal]:[])).call(p,o()(m).call(m,0,m.length-u-1))),y.push(f.h2));var v=h.reportBuilder.sortData(i()([]).apply([],d()(r=t.centers).call(r,(function(e){return e.payments}))),e.reportColumns.order);s()(v).call(v,(function(e,t){var r;c.rows.push(d()(r=c.columns).call(r,(function(t){return"subtotal"!==t.dataKey&&"total"!==t.dataKey&&e[t.dataKey]}))),y.push(t%2?null:f.rowOdd)})),s()(a=t.centers).call(a,(function(e){var t,r;(u=l.findIndexByKeyValue(c.columns,"dataKey","subtotal"))>=0&&c.rows.push(i()(t=i()(r=o()(m).call(m,0,Math.max(u-2,0))).call(r,u>2?[e.name+" "+n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",!1,e.subtotal]:u>0?[e.name+" "+n.instant("DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL")+":",e.subtotal]:[e.subtotal])).call(t,o()(m).call(m,0,m.length-u-1)));y.push(f.h3)})),c.rows.push(o()(m).call(m)),y.push(null)}))})),c}h.config={reportName:n.instant("DEPOSIT_TRANSACTION_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:g},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return m.query({bankId:h.config.reportOptions.bankId,centerId:h.config.reportOptions.centerId||null,fromDate:r("date")(h.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(h.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:h.config.reportOwnerRegion.ownerId,regionId:h.config.reportOwnerRegion.regionId}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,y[t.row.index])}},a.setPageTitle(h.config.reportName),h.config.reportDates.fromDate.subtract(1,"M").date(1),h.config.reportDates.toDate.date(0),h.reportBuilder=new u(h.config),e.$watch("vm.config.reportOptions.bankId",(function(e){e&&(h.centers=p()(v).call(v,(function(t){return t.bankId===e})),h.centers.unshift({id:0,name:"All Centers"}),l.findByKeyValue(h.centers,"id",h.config.reportOptions.centerId)||(h.config.reportOptions.centerId=h.centers[0].id,a.setParam("centerId",h.config.reportOptions.centerId),a.replace()))})),e.$watch((function(){return{reportOptions:h.config.reportOptions,reportDates:h.config.reportDates,reportColumns:h.config.reportColumns,reportOwnerRegion:h.config.reportOwnerRegion}}),(function(e,r){O&&(t.cancel(O),O=null),O=t((function(){if(h.pdf=null,!angular.isUndefined(h.config.reportOptions.bankId)){var t=e.reportDates.fromDate,n=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(h.config.reportData=null),t=e.reportDates.toDate,n=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(h.config.reportData=null),e.reportOptions.bankId!==r.reportOptions.bankId&&(h.config.reportData=null),h.reportBuilder.buildPdf(T).then((function(e){h.pdf=e}))}}),100)}),!0),h.downloadPdf=function(){h.pdf&&c(h.pdf,h.reportBuilder.getReportFileName("pdf"))},h.downloadCsv=function(){h.pdf&&c(h.reportBuilder.buildCsv(T),h.reportBuilder.getReportFileName("csv"))}}])},"2zAN":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.incomeByItemReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("IncomeByItemReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["productCategories.products.date"]);return e(r.getApiAbsUrl("/centers/:centerId/income-by-item-reports"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,n]}})}])},"4AnZ":function(e,t,r){"use strict";r.r(t);r("GNLJ");t.default=angular.module("pdfPreview",[]).directive("pdfPreview",["$window","helper",function(e,t){return{restrict:"A",scope:!0,template:'<iframe ng-hide="ie"></iframe><ff-info class="text-danger" ng-if="ie"><ff-icon sense="warning"></ff-icon> Microsoft Edge & Internet Explorer don\'t support live PDF preview. You can download the PDF or use another browser to have live preview, e.g. Chrome/Firefox/Opera/Safari.</ff-info>',compile:function(r,n){var o=r.parent().parent();return t.isMobile()&&o.hasClass("flex-form")?(r.parent().parent().css("display","none"),function(){}):t.isIE()?function(e,t,r){e.ie=!0}:(r.addClass("pdf-preview"),function(t,r,n){var o,a=r.children(),i=angular.element('<div class="ff-dimmer ff-spin"></div>');i.on("click",(function(e){e.stopPropagation()})),a.on("load",(function(){angular.element(i).remove(),r.removeClass("ff-dim")})),t.$watch(n.pdfPreview,(function(t){r.append(i),r.addClass("ff-dim"),o&&(e.URL.revokeObjectURL(o),o=null),t&&(o=e.URL.createObjectURL(t),a[0].src=o)})),t.$on("$destroy",(function(){o&&(e.URL.revokeObjectURL(o),o=null)}))})}}}])},"7/Y1":function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.checkInReportTotalsColumns",[]).factory("checkInReportTotalsColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userName",_title:"CHECK_IN_REPORT.COLUMNS.NAME"},{dataKey:"userCompany",_title:"CHECK_IN_REPORT.COLUMNS.COMPANY"},{dataKey:"totalHoursTimeRange",_title:"CHECK_IN_REPORT.COLUMNS.TOTAL_HOURS_TIME_RANGE",halign:"right",pdf:function(e){return t("hoursMinutes")(e)},csv:function(e){return t("hoursMinutes")(e)}},{dataKey:"date",_title:"CHECK_IN_REPORT.COLUMNS.DATE",halign:"right",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"totalHoursDay",_title:"CHECK_IN_REPORT.COLUMNS.TOTAL_HOURS_DAY",halign:"right",pdf:function(e){return t("hoursMinutes")(e)},csv:function(e){return t("hoursMinutes")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},"73rf":function(e,t){e.exports='<label class=ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.COLUMNS.ORDER_BY></span></ff-label> <ff-select ff-model=$ctrl.ngModel ff-options="(opt.id || opt.dataKey) as (opt.name || opt.title) for opt in $ctrl.reportColumns"></ff-select> </label> '},"8g2Y":function(e,t,r){var n={"./accounts-receivable-report/accounts-receivable-report-columns.service.js":"QU59","./accounts-receivable-report/accounts-receivable-report.controller.js":"Ytnt","./accounts-receivable-report/accounts-receivable-report.service.js":"xU/f","./availability-report/availability-report-columns.service.js":"vopJ","./availability-report/availability-report.controller.js":"TGNl","./availability-report/availability-report.service.js":"nkhl","./check-in-report/check-in-report-bar-chart.service.js":"cjYI","./check-in-report/check-in-report-columns.service.js":"U+9+","./check-in-report/check-in-report-totals-columns.service.js":"7/Y1","./check-in-report/check-in-report.controller.js":"ynEu","./check-in-report/check-in-report.service.js":"Gago","./credit-balance-report/credit-balance-report-columns.service.js":"h5Ea","./credit-balance-report/credit-balance-report.controller.js":"kCKf","./credit-balance-report/credit-balance-report.service.js":"Iitq","./deposit-transaction-report/deposit-transaction-report-columns.service.js":"xWoj","./deposit-transaction-report/deposit-transaction-report.controller.js":"2+c3","./deposit-transaction-report/deposit-transaction-report.service.js":"ukw3","./directives/chart.directive.js":"u7OF","./directives/pdf-preview.directive.js":"4AnZ","./directives/report-by-period.directive.js":"/XlY","./directives/report-columns.directive.js":"MKNM","./directives/report-dates.directive.js":"//ZJ","./directives/report-options.directive.js":"Gf5d","./directives/report-order-by.directive.js":"ZimX","./directives/report-owner-region.directive.js":"OeSc","./income-by-item-report/income-by-item-pie-chart.service.js":"qFux","./income-by-item-report/income-by-item-report-columns.service.js":"sSbM","./income-by-item-report/income-by-item-report.controller.js":"MmAi","./income-by-item-report/income-by-item-report.service.js":"2zAN","./income-by-item-report/income-by-member-report-columns.service.js":"kUla","./income-by-item-report/income-by-order-report-columns.service.js":"UMDU","./income-report/income-report-columns.service.js":"Du13","./income-report/income-report.controller.js":"vtWt","./income-report/income-report.service.js":"Mvrh","./invoice/invoice-columns.service.js":"pfDI","./invoice/invoice-header.service.js":"grn2","./invoice/invoice-styles.service.js":"E9xF","./invoice/invoice.controller.js":"bm4+","./invoice/invoice.service.js":"zl1W","./mailbox-report/mailbox-report-columns.service.js":"IWno","./mailbox-report/mailbox-report.controller.js":"HFgu","./mailbox-report/mailbox-report.service.js":"L+wq","./member-statement/member-statement-columns.service.js":"haNf","./member-statement/member-statement.controller.js":"SeF/","./member-statement/member-statement.service.js":"aRIa","./member-usage-report/member-usage-report-columns.service.js":"rlfb","./member-usage-report/member-usage-report.controller.js":"U9c4","./member-usage-report/member-usage-report.service.js":"PjE5","./membership-report/membership-report-columns.service.js":"3DDD","./membership-report/membership-report.controller.js":"2S09","./membership-report/membership-report.service.js":"8scq","./price-list-report/price-list-report-columns.service.js":"Mmgn","./price-list-report/price-list-report.controller.js":"6avE","./price-list-report/price-list-report.service.js":"SoPU","./recurring-billing-report/recurring-billing-report-columns.service.js":"LM7I","./recurring-billing-report/recurring-billing-report.controller.js":"ZfRm","./recurring-billing-report/recurring-billing-report.service.js":"dd2W","./reservation-report/reservation-report-columns.service.js":"vRPl","./reservation-report/reservation-report.controller.js":"LJmX","./reservation-report/reservation-report.service.js":"IWz8","./reservation-usage-report/reservation-usage-report-columns.service.js":"KkfT","./reservation-usage-report/reservation-usage-report.controller.js":"qctg","./reservation-usage-report/reservation-usage-report.service.js":"piGw","./reservation-utilization-report/reservation-utilization-pie-chart.service.js":"qD0y","./reservation-utilization-report/reservation-utilization-report-aggregate.service.js":"t9tK","./reservation-utilization-report/reservation-utilization-report-columns.service.js":"g9E+","./reservation-utilization-report/reservation-utilization-report.controller.js":"1THZ","./reservation-utilization-report/reservation-utilization-report.service.js":"qhd7","./security-deposit-report/security-deposit-report-columns.service.js":"UUql","./security-deposit-report/security-deposit-report.controller.js":"hlyU","./security-deposit-report/security-deposit-report.service.js":"JAJz","./services/b64.service.js":"zvMh","./services/csv-make.service.js":"T3vP","./services/file-saver.service.js":"9LJv","./services/jspdf.service.js":"GO8p","./services/logo.service.js":"bHMQ","./services/opts-paper-size.service.js":"8d/h","./services/opts-report-by-period.service.js":"/1cb","./services/report-builder.service.js":"5+k5","./services/report-footer.service.js":"rjaI","./services/report-group-by.service.js":"92Gs","./services/report-header.service.js":"3i5X","./services/report-sort.service.js":"Xai3","./services/report-styles.service.js":"UwMB","./services/system-colors.service.js":"Yes4","./write-off-report/write-off-report-columns.service.js":"h0ZB","./write-off-report/write-off-report.controller.js":"5ual","./write-off-report/write-off-report.service.js":"fKuI"};function o(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id="8g2Y"},"9W37":function(e,t){e.exports='<ff-panel> <ff-panel-header><span translate=REPORTS.OPTIONS.HEADER></span></ff-panel-header> <label class=ff-row ng-if=$ctrl.banks> <ff-label flex="0 0 100px"><span translate=REPORTS.OPTIONS.BANK></span></ff-label> <ff-select ff-model=$ctrl.ngModel.bankId ff-options="bank.id as bank.name for bank in $ctrl.banks"></ff-select> </label> <label class=ff-row ng-if="$ctrl.ngModel.centerId !== false && !$ctrl.centers" ng-show="state.getUserCenters().length > 1"> <ff-label flex="0 0 100px"><span translate=REPORTS.OPTIONS.CENTER></span></ff-label> <dw-select-center ff-model=$ctrl.ngModel.centerId ff-option-all="{{$ctrl.allCenters !== false}}"></dw-select-center> </label> <label class=ff-row ng-if="$ctrl.ngModel.centerId !== false && $ctrl.centers" ng-show="state.getUserCenters().length > 1"> <ff-label flex="0 0 100px"><span translate=REPORTS.OPTIONS.CENTER></span></ff-label> <ff-select ff-model=$ctrl.ngModel.centerId ff-options="center.id as center.name for center in $ctrl.centers"></ff-select> </label> <label class=ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.OPTIONS.SIZE></span></ff-label> <ff-select ff-model=$ctrl.ngModel.paperSize> <option ng-repeat="size in $ctrl.optsPaperSize" value={{size.id}}>{{size.name}}</option> </ff-select> </label> <ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.OPTIONS.LAYOUT></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half"> <label flex="0 0 auto"> <ff-radio ff-model=$ctrl.ngModel.paperLayout ff-value="\'p\'"> <span translate=REPORTS.OPTIONS.LAYOUT.PORTRAIT></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio ff-model=$ctrl.ngModel.paperLayout ff-value="\'l\'"> <span translate=REPORTS.OPTIONS.LAYOUT.LANDSCAPE></span> </ff-radio> </label> </div> </ff-static> </ff-row> </ff-panel> '},Du13:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.incomeReportColumns",[]).factory("incomeReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userCompany",_title:"INCOME_REPORT.COLUMNS.COMPANY",include:!0,minWidth:250},{dataKey:"userName",_title:"INCOME_REPORT.COLUMNS.NAME",include:!0,minWidth:200},{dataKey:"date",_title:"INCOME_REPORT.COLUMNS.DATE",include:!0,width:"wrap",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"method",_title:"INCOME_REPORT.COLUMNS.METHOD",include:!0,width:"wrap"},{dataKey:"amount",_title:"INCOME_REPORT.COLUMNS.AMOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},GNLJ:function(e,t,r){},Gago:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.CheckInReport",["ngResource","datesDeserializer","deskworks.config"]).factory("CheckInReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["checkInTime","checkOutTime"]),a=e(r.getApiAbsUrl("/check-in-report"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,n]}});return{query:function(e){return a.query(e).$promise.then((function(e){return o()(e).call(e,(function(e){e.duration=e.checkOutTime.diff(e.checkInTime)})),e}))}}}])},Gf5d:function(e,t,r){"use strict";r.r(t);r("y89P"),r("X5mX");var n=r("nbuU"),o=r.n(n),a=r("9HME");t.default=angular.module("deskworks.reports.reportOptions",["deskworks.helper","deskworks.reports.optsPaperSize",a.a.name]).directive("reportOptions",["$compile","$templateCache",function(e,t){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportOptionsCtrl as $ctrl",bindToController:{ngModel:"<",centers:"<",allCenters:"<",banks:"<"},link:function(r,n,o,a,i){i((function(o,a){var i=e(t.get("directives/report-options.tpl.html"))(r);angular.element(i[0].querySelector?i[0].querySelector(".ff-panel-body"):i).append(o),n.after(i)}))}}}]).controller("ReportOptionsCtrl",["$scope","$location","state","helper","optsPaperSize",function(e,t,r,n,a){var i=this;i.optsPaperSize=a,i.$onInit=function(){!1!==i.ngModel.centerId&&(e.$watch((function(){return t.search().centerId}),(function(e){i.ngModel.centerId=e||0===e?+e:r.getCurrentCenterId()})),e.$watch("$ctrl.ngModel.centerId",(function(r){r&&e.vm&&e.vm.config&&e.vm.config.reportOwnerRegion&&(e.vm.config.reportOwnerRegion.ownerId=e.vm.config.reportOwnerRegion.regionId=void 0),t.search("centerId",r).replace()}))),i.banks&&(e.$watch((function(){return t.search().bankId}),(function(e){i.ngModel.bankId=e||0===e?+e:i.banks&&i.banks[0]&&i.banks[0].id})),e.$watch("$ctrl.ngModel.bankId",(function(e){t.search("bankId",e).replace()}))),e.$watch((function(){return t.search().paperSize}),(function(e){var t;i.ngModel.paperSize=(o()(t=i.optsPaperSize).call(t,(function(t){return t.id===e}))||i.optsPaperSize[0]).id})),e.$watch("$ctrl.ngModel.paperSize",(function(e){t.search("paperSize",e).replace()})),e.$watch((function(){return t.search().paperLayout}),(function(e){i.ngModel.paperLayout=e||i.ngModel.paperLayout||"l"})),e.$watch("$ctrl.ngModel.paperLayout",(function(e){t.search("paperLayout",e).replace()}))}}])},HIxv:function(e,t){e.exports="<div id=depositTransactionReport class=gutter-v> <form name=formDepositTransactionReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <div class=gutter-v> <report-dates ng-model=vm.config.reportDates></report-dates> <report-columns ng-model=vm.config.reportColumns></report-columns> </div> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions banks=$resolve.banks centers=vm.centers></report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},Iitq:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.creditBalanceReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("CreditBalanceReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["credits.date"]);return e(r.getApiAbsUrl("/centers/:centerId/credit-balance-reports"),{centerId:"@centerId"},{get:{method:"GET",transformResponse:[angular.fromJson,n]}})}])},LLH2:function(e,t){e.exports='<ff-panel> <ff-panel-header><span translate=REPORTS.COLUMNS.HEADER></span></ff-panel-header> <ff-header> <ff-two-columns> <ff-row-head> <span class=ff-center flex="0 0 32px" title="{{\'REPORTS.COLUMNS.ORDER_BY\' | translate}}"> <ff-icon sense=sort></ff-icon> </span> <span translate=REPORTS.COLUMNS.COLUMN></span> <span flex="0 0 32px" class=ff-center title="{{\'GLOBAL.INCLUDE\' | translate}}"> <ff-icon sense=check></ff-icon> </span> </ff-row-head> </ff-two-columns> </ff-header> <ff-two-columns> <ff-col> <ff-row ng-repeat="column in $ctrl.ngModel.columns | limitTo: $ctrl.leftColCount"> <ff-radio class="ff-center ff-control" flex="0 0 32px" ff-model=$ctrl.ngModel.order ff-value=column.dataKey ff-disabled=column.readonly></ff-radio> <ff-static ff-bind=column.title></ff-static> <ff-checkbox class="ff-center ff-control" flex="0 0 32px" ff-model=column.include ff-disabled=column.readonly></ff-checkbox> </ff-row> </ff-col> <ff-col> <ff-row ng-repeat="column in $ctrl.ngModel.columns | limitTo: $ctrl.rightColCount : $ctrl.leftColCount"> <ff-radio class="ff-center ff-control" flex="0 0 32px" ff-model=$ctrl.ngModel.order ff-value=column.dataKey ff-disabled=column.readonly></ff-radio> <ff-static ff-bind=column.title></ff-static> <ff-checkbox class="ff-center ff-control" flex="0 0 32px" ff-model=column.include ff-disabled=column.readonly></ff-checkbox> </ff-row> </ff-col> </ff-two-columns> </ff-panel> '},MKNM:function(e,t,r){"use strict";r.r(t);r("8cZI"),r("y89P"),r("X5mX"),r("aZFp");var n=r("hsT8"),o=r.n(n),a=r("yCd9"),i=r.n(a),l=r("WSeP"),s=r.n(l);t.default=angular.module("deskworks.reports.reportColumns",["deskworks.helper"]).directive("reportColumns",["$compile","$templateCache",function(e,t){return{restrict:"E",scope:!0,transclude:"element",priority:2,controller:"ReportColumnsCtrl as $ctrl",bindToController:{ngModel:"<"},link:function(r,n,o,a,i){i((function(o,a){n.after(e(t.get("directives/report-columns.tpl.html"))(r))}))}}}]).controller("ReportColumnsCtrl",["$scope","$location","helper",function(e,t,r){var n=this;n.$onInit=function(){e.$watch((function(){return t.search().order}),(function(e){n.ngModel.order=(r.findByKeyValue(n.ngModel.columns,"dataKey",e)||r.findByKeyValue(n.ngModel.columns,"defaultOrder",!0)||n.ngModel.columns[0]).dataKey})),e.$watch("$ctrl.ngModel.order",(function(){t.search("order",n.ngModel.order).replace(),(r.findByKeyValue(n.ngModel.columns,"dataKey",n.ngModel.order)||{}).include=!0})),e.$watch((function(){return t.search().columns}),(function(e){var t,o;e&&(s()(t=n.ngModel.columns).call(t,(function(e){e.include=!1})),s()(o=e.split(",")).call(o,(function(e){(r.findByKeyValue(n.ngModel.columns,"dataKey",e)||{}).include=!0})))})),e.$watchCollection((function(){var e;return i()(e=n.ngModel.columns).call(e,(function(e){return!!e.include}))}),(function(){var e,a;(r.findByKeyValue(n.ngModel.columns,"dataKey",n.ngModel.order)||{}).include=!0,n.leftColCount=n.rightColCount=Math.floor(n.ngModel.columns.length/2),n.leftColCount+n.rightColCount<n.ngModel.columns.length&&n.leftColCount++;var l=i()(e=o()(a=n.ngModel.columns).call(a,(function(e){return e.include}))).call(e,(function(e){return e.dataKey})).join(",");t.search("columns",l).replace()}))}}])},MmAi:function(e,t,r){"use strict";r.r(t);r("8cZI"),r("y89P"),r("X5mX");var n=r("nbuU"),o=r.n(n),a=r("yCd9"),i=r.n(a),l=r("6RpP"),s=r.n(l),c=r("WSeP"),d=r.n(c);t.default=angular.module("deskworks.reports.incomeByItemReport",["pdfPreview","fileSaver","chart","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.incomeByItemReport.service","deskworks.reports.incomeByItemReportColumns","deskworks.reports.incomeByMemberReportColumns","deskworks.reports.incomeByOrderReportColumns","deskworks.reports.incomeByItemPieChart"]).controller("IncomeByItemReportCtrl",["$scope","$timeout","$filter","$translate","$location","state","helper","fileSaver","reportStyles","ReportBuilder","IncomeByItemReport","incomeByItemReportColumns","incomeByMemberReportColumns","incomeByOrderReportColumns","incomeByItemPieChart",function(e,t,r,n,a,l,c,f,p,u,m,g,R,v,O){var h,y=this,T=[];function E(t){var n,o=[];return d()(t).call(t,(function(e){o=s()(o).call(o,e.productCategories)})),n=y.pieProduct?O.pieByUsers(o,y.pieCategory.code,y.pieProduct.code):y.pieCategory?O.pieByProducts(o,y.pieCategory.code):O.pieByCategories(o),{codes:i()(n).call(n,(function(e){return e.code})),labels:i()(n).call(n,(function(e){return e.name})),data:[{data:i()(n).call(n,(function(e){return c.round(e.value)}))}],options:{tooltips:{callbacks:{label:function(e,t){return t.labels[e.index]+": "+r("ncurrency")(t.datasets[0].data[e.index])}}},legend:{display:!0,position:"right"},onClick:function(t,r){e.$apply((function(){var e=r[0]&&r[0]._index;angular.isNumber(e)&&(y.pieProduct||(y.pieCategory?y.pieProduct={code:y.pie.codes[e],name:y.pie.labels[e]}:y.pieCategory={code:y.pie.codes[e],name:y.pie.labels[e]},y.pie=E(y.config.reportData)))}))}}}}function C(e){var t,r={columns:e.reportColumns.columns,rows:[]};T=[];var o=0;return d()(t=e.reportData).call(t,(function(e,t){var a,i=0;r.rows.push([!1,n.instant("INCOME_BY_ITEM_REPORT.TOTALS.ITEM_TYPE")+": "+e.name,!1,!1,!1,!1,!1,!1,!1]),T.push(p.h1),d()(a=e.productCategories).call(a,(function(e){var t,o=0;d()(t=e.products).call(t,(function(e,t){r.rows.push([e.code,e.name,e.userName,e.orderNo,e.date,e.qty,e.amount,!1,!1]),T.push(t%2?null:p.rowOdd),o+=c.toNumber(e.amount)})),i+=o;var a=c.join([e.name,"["+e.code+"]",n.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL")]," ");r.rows.push([!1,a,!1,!1,!1,!1,!1,c.round(o),!1]),T.push(p.h2)})),o+=i,r.rows.push([!1,!1,n.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL")+" "+e.name,!1,!1,!1,!1,!1,c.round(i)]),T.push(p.h3),r.rows.push([!1,!1,!1,!1,!1,!1,!1,!1,!1]),T.push(null)})),r.rows.push([!1,!1,!1,!1,!1,!1,!1,n.instant("INCOME_BY_ITEM_REPORT.TOTALS.INCOME")+":",c.round(o)]),T.push(p.h3),r}function w(e){var t,r={columns:e.reportColumns.columns,rows:[]};T=[];var o=[];d()(t=e.reportData).call(t,(function(e){var t;d()(t=e.productCategories).call(t,(function(e){var t;d()(t=e.products).call(t,(function(e){var t=c.findByKeyValue(o,"name",e.userName);t||(t={name:e.userName,products:[]},o.push(t)),t.products.push(e)}))}))})),o=y.reportBuilder.sortData(o,"name");var a=0;return d()(o).call(o,(function(e){var t,o=0;d()(t=y.reportBuilder.sortData(e.products,"date")).call(t,(function(e,t){r.rows.push([e.userName,e.code,e.name,e.orderNo,e.date,e.qty,e.amount,!1]),T.push(t%2?null:p.rowOdd),o+=c.toNumber(e.amount)})),a+=o,r.rows.push([e.name+" "+n.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL"),!1,!1,!1,!1,!1,!1,c.round(o)]),T.push(p.h2)})),r.rows.push([!1,!1,!1,!1,!1,!1,!1,!1]),T.push(null),r.rows.push([!1,!1,!1,!1,!1,!1,n.instant("INCOME_BY_ITEM_REPORT.TOTALS.INCOME")+":",c.round(a)]),T.push(p.h3),r}function b(e){var t,r={columns:e.reportColumns.columns,rows:[]};T=[];var a=[];d()(t=e.reportData).call(t,(function(e){var t;d()(t=e.productCategories).call(t,(function(e){var t;d()(t=e.products).call(t,(function(e){var t=o()(c).call(c,a,{orderNo:e.orderNo});t||(t={orderNo:e.orderNo,products:[]},a.push(t)),t.products.push(e)}))}))})),a=y.reportBuilder.sortData(a,"name");var i=0;return d()(a).call(a,(function(e){var t,o=0;d()(t=y.reportBuilder.sortData(e.products,"date")).call(t,(function(e,t){r.rows.push([e.orderNo,e.userName,e.code,e.name,e.date,e.qty,e.amount,!1]),T.push(t%2?null:p.rowOdd),o+=c.toNumber(e.amount)})),i+=o,r.rows.push([!1,n.instant("INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO")+" #"+e.orderNo+" "+n.instant("INCOME_BY_ITEM_REPORT.TOTALS.TOTAL"),!1,!1,!1,!1,!1,c.round(o)]),T.push(p.h2)})),r.rows.push([!1,!1,!1,!1,!1,!1,!1,!1]),T.push(null),r.rows.push([!1,!1,!1,!1,!1,!1,n.instant("INCOME_BY_ITEM_REPORT.TOTALS.INCOME")+":",c.round(i)]),T.push(p.h3),r}y.config={reportName:n.instant("INCOME_BY_ITEM_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},orderBy:"item",reportColumns:{columns:g},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return m.query({centerId:y.config.reportOptions.centerId,fromDate:r("date")(y.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(y.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:y.config.reportOwnerRegion.ownerId,regionId:y.config.reportOwnerRegion.regionId}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,T[t.row.index])}},l.setPageTitle(n.instant("INCOME_BY_ITEM_REPORT.PAGE_TITLE")),y.config.reportDates.fromDate.subtract(1,"M").date(1),y.config.reportDates.toDate.date(0),!1!==y.config.orderBy&&(e.$watch((function(){return a.search().orderBy}),(function(e){y.config.orderBy=e||"item"})),e.$watch("vm.config.orderBy",(function(e){a.search("orderBy",e).replace()}))),y.reportBuilder=new u(y.config),e.$watch((function(){return{reportOptions:y.config.reportOptions,reportDates:y.config.reportDates,orderBy:y.config.orderBy,reportOwnerRegion:y.config.reportOwnerRegion}}),(function(e,r){h&&(t.cancel(h),h=null),h=t((function(){if(y.pdf=null,angular.isDefined(y.config.reportOptions.centerId)){var t=e.reportDates.fromDate,n=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(y.config.reportData=null),t=e.reportDates.toDate,n=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(y.config.reportData=null),y.config.reportColumns={columns:"member"===e.orderBy?R:"order"===e.orderBy?v:g},y.reportBuilder.buildPdf("member"===e.orderBy?w:"order"===e.orderBy?b:C).then((function(e){y.pdf=e})).then((function(){y.pieCategory=null,y.pieProduct=null,y.pie=E(y.config.reportData)}))}}),100)}),!0),y.downloadPdf=function(){y.pdf&&f(y.pdf,y.reportBuilder.getReportFileName("pdf"))},y.downloadCsv=function(){y.pdf&&(y.config.reportColumns={columns:"member"===y.config.orderBy?R:g},f(y.reportBuilder.buildCsv("member"===y.config.orderBy?w:"order"===y.config.orderBy?b:C),y.reportBuilder.getReportFileName("csv")))},y.pieBack=function(){y.pieProduct?y.pieProduct=null:y.pieCategory=null,y.pie=E(y.config.reportData)}}])},Mvrh:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.incomeReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("IncomeReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["payments.date"]);return e(r.getApiAbsUrl("/centers/:centerId/income-reports"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{get:{method:"GET",transformResponse:[angular.fromJson,n]}})}])},OeSc:function(e,t,r){"use strict";r.r(t);r("y89P"),r("X5mX");t.default=angular.module("deskworks.reports.reportOwnerRegion",["deskworks.Owner","deskworks.Region","deskworks.setup.service"]).directive("reportOwnerRegion",["$compile","$templateCache",function(e,t){return{restrict:"EAC",scope:!0,transclude:"element",priority:2,controller:"ReportOwnerRegionCtrl as $ctrl",bindToController:{ngModel:"<",reportData:"="},link:function(r,n,o,a,i){i((function(o,a){var i=e(t.get("directives/report-owner-region.tpl.html"))(r);angular.element(i[0].querySelector?i[0].querySelector(".ff-panel-body"):i).append(o),n.after(i)}))}}}]).controller("ReportOwnerRegionCtrl",["$scope","$location","$translate","$q","dwAlerts","Owner","Region","setupService","state",function(e,t,r,n,o,a,i,l,s){var c=this;"master"===s.getLoggedUser().role&&(c.$onInit=function(){l.getSetupSettings().catch((function(e){return o(e,"Failed to get setup settings.")})).then((function(e){if(e.isFranchise)return n.all([a.query().catch((function(e){return o(e,"Failed to query owners.")})).then((function(e){c.owners=e,c.owners.unshift({name:r.instant("REPORTS.OWNER_REGION.OWNER.ALL")})})),i.query().catch((function(e){return o(e,"Failed to query regions.")})).then((function(e){c.regions=e,c.regions.unshift({name:r.instant("REPORTS.OWNER_REGION.REGION.ALL")})}))])})),!1!==c.ngModel.ownerId&&(e.$watch((function(){return t.search().ownerId}),(function(e,t){c.ngModel.ownerId=e||0===e?+e:c.owners&&c.owners[0]&&c.owners[0].id,e!==t&&(c.reportData=null)})),e.$watch("$ctrl.ngModel.ownerId",(function(e){t.search("ownerId",e).replace()}))),!1!==c.ngModel.regionId&&(e.$watch((function(){return t.search().regionId}),(function(e,t){c.ngModel.regionId=e||0===e?+e:c.regions&&c.regions[0]&&c.regions[0].id,e!==t&&(c.reportData=null)})),e.$watch("$ctrl.ngModel.regionId",(function(e){t.search("regionId",e).replace()})))},c.onChange=function(){(c.ngModel.ownerId||c.ngModel.regionId)&&(e.vm.config.reportOptions.centerId=0)})}])},QU59:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.accountsReceivableReportColumns",[]).factory("accountsReceivableReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userCompany",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.COMPANY",include:!0,minWidth:150},{dataKey:"userName",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.USER_NAME",include:!0,minWidth:120},{dataKey:"date",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.BILL_DATE",include:!0,width:"wrap",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")},defaultOrder:!0},{dataKey:"amount",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.AMOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"amountDue",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.AMOUNT_DUE",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"daysLate",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.DAYS_LATE",include:!0,halign:"right"},{dataKey:"comment",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.COMMENT",include:!0,minWidth:120},{dataKey:"orderId",_title:"ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.ORDER_ID",include:!1,halign:"center",width:"wrap"}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},TGNl:function(e,t,r){"use strict";r.r(t);var n=r("ipr/"),o=r.n(n),a=r("6RpP"),i=r.n(a),l=r("hsT8"),s=r.n(l),c=r("WSeP"),d=r.n(c),f=r("yCd9"),p=r.n(f),u=r("1PCL"),m=r.n(u);t.default=angular.module("deskworks.reports.availabilityReport",["pdfPreview","fileSaver","jsPDF","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.availabilityReport.service","deskworks.reports.availabilityReportColumns"]).controller("AvailabilityReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","jsPDF","reportStyles","ReportBuilder","AvailabilityReport","availabilityReportColumns",function(e,t,r,n,a,l,c,f,u,g,R,v){var O,h=this,y=[],T={0:{columnWidth:230},1:{columnWidth:60}},E={0:{columnWidth:230},1:{columnWidth:60},2:{columnWidth:60},3:{columnWidth:60}};function C(e){var t,r,a,l={columns:v.available,rows:[]};y=[];var c=p()(t=Array.apply(null,new Array(l.columns.length))).call(t,(function(e){return!1})),f=0;return d()(r=e.reportData).call(r,(function(e,t){var r,n,a=s()(r=e.reservationUnits).call(r,(function(e){return!e.attachedUser}));a.length&&(l.rows.push(i()(n=[e.name]).call(n,o()(c).call(c,0,c.length-1))),y.push(u.h2),d()(a).call(a,(function(e,t){var r;f+=e.price,l.rows.push(p()(r=l.columns).call(r,(function(t){return e[t.dataKey]}))),y.push(t%2?null:u.rowOdd)})))})),l.rows.push(i()(a=[n.instant("AVAILABILITY_REPORT.TOTALS.VACANCY"),f]).call(a,o()(c).call(c,0,c.length-2))),y.push(u.h1),l}function w(e){var t,r,a,l={columns:v.unavailable,rows:[]};y=[];var c=p()(t=Array.apply(null,new Array(l.columns.length))).call(t,(function(e){return!1})),f=0;return d()(r=e.reportData).call(r,(function(e,t){var r,n,a=s()(r=e.reservationUnits).call(r,(function(e){return!!e.attachedUser}));a.length&&(l.rows.push(i()(n=[e.name]).call(n,o()(c).call(c,0,c.length-1))),y.push(u.h2),d()(a).call(a,(function(e,t){var r;e.netPrice=e.price-e.discount||0,f+=e.netPrice,l.rows.push(p()(r=l.columns).call(r,(function(t){return e[t.dataKey]}))),y.push(t%2?null:u.rowOdd)})))})),l.rows.push(i()(a=[n.instant("AVAILABILITY_REPORT.TOTALS.OCCUPIED"),!1,!1,f]).call(a,o()(c).call(c,0,c.length-4))),y.push(u.h1),l}h.config={reportName:n.instant("AVAILABILITY_REPORT.REPORT_NAME"),reportOptions:{},getReportData:function(){return R.query({centerId:h.config.reportOptions.centerId}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,y[t.row.index])}},a.setPageTitle(h.config.reportName),h.reportBuilder=new g(h.config),e.$watch((function(){return{reportOptions:h.config.reportOptions,reportColumns:h.config.reportColumns}}),(function(e,r){O&&(t.cancel(O),O=null),O=t((function(){if(h.pdf=null,!angular.isUndefined(h.config.reportOptions.centerId)){var e=new f(h.config.reportOptions.paperLayout,"pt",h.config.reportOptions.paperSize),t=u.pageMargins[0];e.setFontSize(11),e.setFontStyle("bold"),e.autoTableText(n.instant("AVAILABILITY_REPORT.AVAILABLE")+":",u.pageMargins[3],t,{});var r=m()({startY:t+15,columnStyles:T},u);h.reportBuilder.generatePdf(C,r,e).then((function(e){var t=e.autoTableEndPosY()+20;e.setFontSize(11),e.setFontStyle("bold"),e.autoTableText(n.instant("AVAILABILITY_REPORT.UNAVAILABLE")+":",u.pageMargins[3],t,{});var r=m()({startY:t+15,columnStyles:E},u);h.reportBuilder.generatePdf(w,r,e).then((function(e){h.pdf=e.output("blob")}))}))}}),100)}),!0),h.downloadPdf=function(){h.pdf&&c(h.pdf,h.reportBuilder.getReportFileName("pdf"))},h.downloadCsv=function(){h.pdf&&(c(h.reportBuilder.buildCsv(C),h.reportBuilder.getReportFileName("csv","-available")),c(h.reportBuilder.buildCsv(w),h.reportBuilder.getReportFileName("csv","-unavailable")))}}])},TVyk:function(e,t){e.exports="<div id=checkInReport class=gutter-v> <form name=formCheckInReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <report-dates ng-model=$ctrl.config.reportDates></report-dates> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=$ctrl.config.reportOptions> <ff-row> <ff-label flex=\"0 0 100px\"><span translate=CHECK_IN_REPORT.ORDER_BY></span></ff-label> <ff-static> <div class=\"ff-grid gutter-h-half\"> <label flex=none> <ff-radio ff-model=$ctrl.config.orderBy ff-value=\"'userName'\"> <span translate=CHECK_IN_REPORT.ORDER_BY.NAME></span> </ff-radio> </label> <label flex=none> <ff-radio ff-model=$ctrl.config.orderBy ff-value=\"'userCompany'\"> <span translate=CHECK_IN_REPORT.ORDER_BY.COMPANY></span> </ff-radio> </label> <label flex=none> <ff-radio ff-model=$ctrl.config.orderBy ff-value=\"'checkInTime'\"> <span translate=CHECK_IN_REPORT.ORDER_BY.DATE></span> </ff-radio> </label> </div> </ff-static> </ff-row> </report-options> </div> </div> <ff-panel flex=auto> <ff-panel-header> <span ng-if=\"$ctrl.config.orderBy === 'checkInTime'\" translate=CHECK_IN_REPORT.BAR_CHART.USAGE_PER_DAY></span> <span ng-if=\"$ctrl.config.orderBy === 'userName'\" translate=CHECK_IN_REPORT.BAR_CHART.USAGE_BY_MEMBER></span> <span ng-if=\"$ctrl.config.orderBy === 'userCompany'\" translate=CHECK_IN_REPORT.BAR_CHART.USAGE_BY_COMPANY></span> </ff-panel-header> <div ff-dim=!$ctrl.pdf ng-init=\"$c = $ctrl\"> <chart chart-type={{$ctrl.bar.type}} chart-labels=$ctrl.bar.labels chart-data=$ctrl.bar.data chart-options=$ctrl.bar.options ng-style=\"{ 'max-height': $c.config.orderBy === 'checkInTime' ? null : 'none', 'height': $c.config.orderBy === 'checkInTime' ? null : $c.bar.labels.length * 25 + 'px' }\"></chart> </div> </ff-panel> <ff-btn-group> <ff-btn sense=download ff-click=$ctrl.downloadPdf() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=$ctrl.downloadCsv() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </div> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=$ctrl.pdf></div> </ff-panel> </div> "},Tbc7:function(e,t,r){"use strict";r.r(t);r("y89P");var n=r("WSeP"),o=r.n(n),a=r("lRNC"),i=r.n(a),l=r("yCd9"),s=r.n(l),c=["$injector",function(e){var t,n,a=(t=r("8g2Y"),s()(n=i()(t).call(t)).call(n,t));e.loadNewModules(s()(a).call(a,(function(e){return e.default.name}))),e.invoke(["$templateCache",function(e){var t,n=r("/MGB");o()(t=i()(n).call(n)).call(t,(function(t){return e.put(t.replace(/^\.\//,""),n(t))}))}])}];t.default=c},"U+0Z":function(e,t){e.exports='<ff-panel ng-if="$ctrl.owners && $ctrl.regions"> <ff-panel-header><span translate=REPORTS.OWNER_REGION.HEADER></span></ff-panel-header> <label class=ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.OWNER_REGION.OWNER></span></ff-label> <ff-select ff-model=$ctrl.ngModel.ownerId ff-options="owner.id as owner.name for owner in $ctrl.owners" ff-change=$ctrl.onChange()></ff-select> </label> <label class=ff-row> <ff-label flex="0 0 100px"><span translate=REPORTS.OWNER_REGION.REGION></span></ff-label> <ff-select ff-model=$ctrl.ngModel.regionId ff-options="region.id as region.name for region in $ctrl.regions" ff-change=$ctrl.onChange()></ff-select> </label> </ff-panel> '},"U+9+":function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.checkInReportColumns",[]).factory("checkInReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userName",_title:"CHECK_IN_REPORT.COLUMNS.NAME"},{dataKey:"userCompany",_title:"CHECK_IN_REPORT.COLUMNS.COMPANY"},{dataKey:"checkInTime",_title:"CHECK_IN_REPORT.COLUMNS.DATE",halign:"center",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"checkInTime",_title:"CHECK_IN_REPORT.COLUMNS.CHECK_IN",halign:"center",pdf:function(e){return t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortTime")}},{dataKey:"checkOutTime",_title:"CHECK_IN_REPORT.COLUMNS.CHECK_OUT",halign:"center",pdf:function(e){return t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortTime")}},{dataKey:"duration",_title:"CHECK_IN_REPORT.COLUMNS.USAGE_HOURS",halign:"right",pdf:function(e){return t("hoursMinutes")(e)},csv:function(e){return t("hoursMinutes")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},UMDU:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.incomeByOrderReportColumns",[]).factory("incomeByOrderReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"orderNo",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO",include:!0,width:"wrap"},{dataKey:"userName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"productCode",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE",include:!0,width:"wrap"},{dataKey:"productName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME",include:!0},{dataKey:"date",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.DATE",include:!0,width:"wrap",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"qty",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY",include:!0,halign:"center",width:"wrap"},{dataKey:"amount",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},UUPn:function(e,t){e.exports='<div id=incomeByItemReport class=gutter-v> <form name=formIncomeByItemReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class="ff-grid gutter-v gutter-h"> <div flex="{lg: \'0 0 61%\', md: \'0 0 50%\'}"> <report-dates ng-model=vm.config.reportDates></report-dates> </div> <div flex="{lg: \'0 0 39%\', md: \'0 0 50%\'}"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions> <ff-row> <ff-label flex="0 0 100px"><span translate=INCOME_BY_ITEM_REPORT.ORDER_BY></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half"> <label flex="0 0 auto"> <ff-radio ff-model=vm.config.orderBy ff-value="\'item\'"> <span translate=INCOME_BY_ITEM_REPORT.ORDER_BY.ITEM></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio ff-model=vm.config.orderBy ff-value="\'member\'"> <span translate=INCOME_BY_ITEM_REPORT.ORDER_BY.MEMBER></span> </ff-radio> </label> <label flex="0 0 auto"> <ff-radio ff-model=vm.config.orderBy ff-value="\'order\'"> <span translate=INCOME_BY_ITEM_REPORT.ORDER_BY.ORDER></span> </ff-radio> </label> </div> </ff-static> </ff-row> </report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> <ff-panel flex="1 1 auto"> <ff-panel-header> <ff-row class=gutter-h-half> <div> <span ng-if="!vm.pieCategory && !vm.pieProduct" translate=INCOME_BY_ITEM_REPORT.PRODUCT_CATEGORIES_PIE_CHART.HEADER></span> <span ng-if="vm.pieCategory || vm.pieProduct" ng-bind="vm.pieProduct.name || vm.pieCategory.name"></span> </div> <div flex="0 0 auto" style=align-items:center> <ff-btn ng-if="vm.pieCategory || vm.pieProduct" size=sm sense=back style="margin:-.5rem 0" title="{{\'GLOBAL.BTN_BACK\' | translate}}" ff-click=vm.pieBack()><span translate=GLOBAL.BTN_BACK></span></ff-btn> </div> </ff-row> </ff-panel-header> <div ff-dim=!vm.pdf> <chart chart-type=pie chart-labels=vm.pie.labels chart-data=vm.pie.data chart-options=vm.pie.options></chart> </div> </ff-panel> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> '},Ytnt:function(e,t,r){"use strict";r.r(t);var n=r("ipr/"),o=r.n(n),a=r("6RpP"),i=r.n(a),l=r("yCd9"),s=r.n(l),c=r("hsT8"),d=r.n(c);t.default=angular.module("deskworks.reports.accountsReceivableReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.accountsReceivableReport.service","deskworks.reports.accountsReceivableReportColumns"]).controller("AccountsReceivableReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","AccountsReceivableReport","accountsReceivableReportColumns",function(e,t,r,n,a,l,c,f,p,u,m){var g,R=this,v=[];function O(e){var t,r,a,c={columns:d()(t=e.reportColumns.columns).call(t,(function(e){return e.include})),rows:e.reportData.payments};c.rows=R.reportBuilder.sortData(c.rows,e.reportColumns.order),v=[],c.rows=s()(r=c.rows).call(r,(function(e,t){var r;return v.push(t%2?null:f.rowOdd),s()(r=c.columns).call(r,(function(t){return e[t.dataKey]}))}));var p,u,m,g,O,h=s()(a=Array.apply(null,new Array(c.columns.length))).call(a,(function(e){return!1}));(c.rows.push(h),v.push(null),(p=l.findIndexByKeyValue(c.columns,"dataKey","daysLate"))>=0)&&(c.rows.push(i()(u=i()(m=o()(h).call(h,0,Math.max(p-1,0))).call(m,p>0?[n.instant("ACCOUNTS_RECEIVABLE_REPORT.TOTALS.AVG_DAYS_LATE")+":",e.reportData.averageDaysLate]:[e.reportData.averageDaysLate])).call(u,o()(h).call(h,0,h.length-p-1))),v.push(f.h3));(p=l.findIndexByKeyValue(c.columns,"dataKey","amountDue"))>=0&&(c.rows.push(i()(g=i()(O=o()(h).call(h,0,Math.max(p-1,0))).call(O,p>0?[n.instant("ACCOUNTS_RECEIVABLE_REPORT.TOTALS.TOTAL_DUE")+":",e.reportData.total]:[e.reportData.total])).call(g,o()(h).call(h,0,h.length-p-1))),v.push(f.h3));return c}R.config={reportName:n.instant("ACCOUNTS_RECEIVABLE_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:angular.copy(m)},reportDates:{fromDate:!1,toDate:moment()},getReportData:function(){return u.get({centerId:R.config.reportOptions.centerId,date:r("date")(R.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:R.config.reportOwnerRegion.ownerId,regionId:R.config.reportOwnerRegion.regionId}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,v[t.row.index])}},a.setPageTitle(R.config.reportName),R.reportBuilder=new p(R.config),e.$watch((function(){return{reportOptions:R.config.reportOptions,reportDates:R.config.reportDates,reportColumns:R.config.reportColumns,reportOwnerRegion:R.config.reportOwnerRegion}}),(function(e,r){g&&(t.cancel(g),g=null),g=t((function(){if(R.pdf=null,!angular.isUndefined(R.config.reportOptions.centerId)){var t=e.reportDates.fromDate,n=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(R.config.reportData=null),t=e.reportDates.toDate,n=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(R.config.reportData=null),R.reportBuilder.buildPdf(O).then((function(e){R.pdf=e}))}}),100)}),!0),R.downloadPdf=function(){R.pdf&&c(R.pdf,R.reportBuilder.getReportFileName("pdf"))},R.downloadCsv=function(){R.pdf&&c(R.reportBuilder.buildCsv(O),R.reportBuilder.getReportFileName("csv"))}}])},ZfFK:function(e,t){e.exports="<div id=availabilityReport class=gutter-v> <form name=formAvailabilityReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\" style=margin-left:auto> <report-options ng-model=vm.config.reportOptions all-centers=false></report-options> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},ZimX:function(e,t,r){"use strict";r.r(t);r("y89P"),r("X5mX");var n=r("nbuU"),o=r.n(n),a=r("73rf"),i=r.n(a);t.default=angular.module("deskworks.reportOrderBy",[]).directive("reportOrderBy",["$compile",function(e){return{restrict:"E",scope:!0,transclude:"element",priority:2,controller:"ReportOrderByCtrl as $ctrl",bindToController:{ngModel:"=",reportColumns:"<"},link:function(t,r,n,o,a){a((function(n,o){var a=e(i.a)(t);angular.element(a[0].querySelector?a[0].querySelector(".ff-panel-body"):a).append(n),r.after(a)}))}}}]).controller("ReportOrderByCtrl",["$scope","$location",function(e,t){var r=this;r.$onInit=function(){e.$watch((function(){return t.search().orderBy}),(function(e){var t,n=o()(t=r.reportColumns).call(t,(function(e){return e.defaultOrder}))||r.reportColumns[0];r.ngModel=e||r.ngModel||n.id||n.dataKey})),e.$watch("$ctrl.ngModel",(function(e){t.search("orderBy",e).replace()}))}}])},cjYI:function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n);t.default=angular.module("deskworks.reports.checkInReportBarChart",[]).factory("checkInReportBarChart",["$translate","$filter","helper","whitelabel",function(e,t,r,n){return{getChartConfig:function(e,r){var a={labels:o()(e).call(e,(function(e){return e.name||"-"})),data:[{data:o()(e).call(e,(function(e){return e.value/36e5})),backgroundColor:n.getProperty("--brand-color")}],options:{legend:{display:!1},tooltips:{callbacks:{label:function(r,n){return t("hoursMinutes")(e[r.index].value)}}},scales:{xAxes:[{maxBarThickness:100}]}}};return a.type="checkInTime"===r?"bar":"horizontalBar",a}}}])},h5Ea:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.creditBalanceReportColumns",[]).factory("creditBalanceReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"centerName",_title:"CREDIT_BALANCE_REPORT.COLUMNS.CENTER",include:!0},{dataKey:"userName",_title:"CREDIT_BALANCE_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"date",_title:"CREDIT_BALANCE_REPORT.COLUMNS.DATE",include:!0,width:"wrap",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"order",_title:"CREDIT_BALANCE_REPORT.COLUMNS.ORDER_ID",include:!0,width:"wrap"},{dataKey:"amount",_title:"CREDIT_BALANCE_REPORT.COLUMNS.BALANCE",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},hY1K:function(e,t,r){},kCKf:function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n);t.default=angular.module("deskworks.reports.creditBalanceReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.creditBalanceReport.service","deskworks.reports.creditBalanceReportColumns"]).controller("CreditBalanceReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","CreditBalanceReport","creditBalanceReportColumns",function(e,t,r,n,a,i,l,s,c,d,f){var p,u=this,m=[];function g(e){var t,r={columns:e.reportColumns.columns,rows:[]};return m=[],r.rows=o()(t=e.reportData.credits).call(t,(function(e,t){var n;return m.push(t%2?null:s.rowOdd),o()(n=r.columns).call(n,(function(t){return e[t.dataKey]}))})),r.rows.push([!1,!1,!1,!1,!1]),m.push(null),r.rows.push([!1,!1,!1,n.instant("CREDIT_BALANCE_REPORT.TOTALS.CREDIT")+":",e.reportData.total]),m.push(s.h3),r}u.config={reportName:n.instant("CREDIT_BALANCE_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:f},getReportData:function(){return d.get({centerId:u.config.reportOptions.centerId,ownerId:u.config.reportOwnerRegion.ownerId,regionId:u.config.reportOwnerRegion.regionId}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,m[t.row.index])}},a.setPageTitle(u.config.reportName),u.reportBuilder=new c(u.config),e.$watch((function(){return{reportOptions:u.config.reportOptions,reportOwnerRegion:u.config.reportOwnerRegion}}),(function(e,r){p&&(t.cancel(p),p=null),p=t((function(){u.pdf=null,angular.isUndefined(u.config.reportOptions.centerId)||u.reportBuilder.buildPdf(g).then((function(e){u.pdf=e}))}),100)}),!0),u.downloadPdf=function(){u.pdf&&l(u.pdf,u.reportBuilder.getReportFileName("pdf"))},u.downloadCsv=function(){u.pdf&&l(u.reportBuilder.buildCsv(g),u.reportBuilder.getReportFileName("csv"))}}])},kUla:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.incomeByMemberReportColumns",[]).factory("incomeByMemberReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"productCode",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE",include:!0,width:"wrap"},{dataKey:"productName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME",include:!0},{dataKey:"orderNo",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO",include:!0,width:"wrap"},{dataKey:"date",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.DATE",include:!0,width:"wrap",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"qty",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY",include:!0,halign:"center",width:"wrap"},{dataKey:"amount",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},lfjW:function(e,t){e.exports="<div id=creditBalanceReport class=gutter-v> <form name=formCreditBalanceReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\" style=margin-left:auto> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions></report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},nkhl:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.availabilityReport.service",["ngResource","deserializeNumbers","deskworks.config"]).factory("AvailabilityReport",["$resource","deserializeNumbers","deskworksConfig",function(e,t,r){var n=r.getApiAbsUrl("/centers/:centerId/availability-reports"),o=t(["reservationUnits.price","reservationUnits.discount"]);return e(n,{centerId:"@centerId"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,o]}})}])},pEUA:function(e,t){e.exports="<ff-panel ng-hide=$ctrl.embed> <ff-panel-header><span translate=REPORTS.PERIOD.HEADER></span></ff-panel-header> <div class=ff-grid> <label class=ff-row flex=\"{lg: '0 0 50%'}\" ng-if=\"$ctrl.ngModel.fromDate !== false\"> <ff-label flex=\"{lg: '0 0 80px', xs: '0 0 100px'}\" ff-required=true><span translate=REPORTS.PERIOD.FROM_DATE></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=$ctrl.ngModel.fromDate ff-required=true ff-date-order=\"{ early: $ctrl.ngModel.fromDate, late: $ctrl.ngModel.toDate }\" ff-validate-alert=\"{ field: '{{'REPORTS.PERIOD.FROM_DATE' | translate}}', late: '{{'REPORTS.PERIOD.TO_DATE' | translate}}' }\"></ff-date> <span class=ff-label></span> </label> <label class=ff-row flex=\"{lg: $ctrl.ngModel.fromDate === false ? 'auto' : '0 0 50%'}\"> <ff-label flex=\"{lg: '0 0 62px', xs: '0 0 100px'}\" ff-required=true><span translate=REPORTS.PERIOD.TO_DATE></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=$ctrl.ngModel.toDate ff-required=true ff-date-order=\"{ early: $ctrl.ngModel.fromDate, late: $ctrl.ngModel.toDate }\" ff-validate-alert=\"{ field: '{{'REPORTS.PERIOD.TO_DATE' | translate}}', early: '{{'REPORTS.PERIOD.FROM_DATE' | translate}}' }\"></ff-date> <span class=ff-label></span> </label> </div> </ff-panel> <ff-row ng-if=\"$ctrl.embed && $ctrl.ngModel.fromDate !== false\"> <label> <ff-label flex={{$ctrl.embed}} ff-required=true><span translate=REPORTS.PERIOD.FROM_DATE></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=$ctrl.ngModel.fromDate ff-required=true ff-validate-alert=\"{{'REPORTS.PERIOD.FROM_DATE' | translate}}\"></ff-date> <span class=ff-label></span> </label> </ff-row> <ff-row ng-if=$ctrl.embed> <label> <ff-label flex={{$ctrl.embed}} ff-required=true><span translate=REPORTS.PERIOD.TO_DATE></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=$ctrl.ngModel.toDate ff-required=true ff-validate-alert=\"{{'REPORTS.PERIOD.TO_DATE' | translate}}\"></ff-date> <span class=ff-label></span> </label> </ff-row> "},pvmN:function(e,t){e.exports="<div id=incomeReport class=gutter-v> <form name=formIncomeReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <report-dates ng-model=vm.config.reportDates></report-dates> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions></report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},qFux:function(e,t,r){"use strict";r.r(t);r("8cZI");var n=r("ipr/"),o=r.n(n),a=r("6RpP"),i=r.n(a),l=r("hsT8"),s=r.n(l),c=r("WSeP"),d=r.n(c),f=r("nbuU"),p=r.n(f),u=r("yCd9"),m=r.n(u);t.default=angular.module("deskworks.reports.incomeByItemPieChart",[]).factory("incomeByItemPieChart",["$filter","helper",function(e,t){return{pieByCategories:function(e){var r;return m()(r=n(e)).call(r,(function(e){return{code:e.code,name:t.join([e.name,"["+e.code+"]"]," "),value:e.total}}))},pieByProducts:function(e,o){var a,i,l=p()(a=n(e)).call(a,(function(e){return e.code===o})),s=[];return d()(i=l.products).call(i,(function(e){var r=p()(s).call(s,(function(t){return t.code===e.code}));r||(r={code:e.code,name:t.join([e.name,"["+e.code+"]"]," "),value:0},s.push(r)),r.value+=t.toNumber(e.amount)})),s=r(s,"value",!0)},pieByUsers:function(e,o,a){var i,l,s=p()(i=n(e)).call(i,(function(e){return e.code===o})),c=[];return d()(l=s.products).call(l,(function(e){if(e.code===a){var r=p()(c).call(c,(function(t){return t.name===e.userName}));r||(r={code:e.code,name:e.userName,value:0},c.push(r)),r.value+=t.toNumber(e.amount)}})),c=r(c,"value",!0)}};function r(t,r,n){var o,a=[];return t=s()(t).call(t,(function(e){if((e[r]||0===e[r])&&""!==e[r])return!0;a.push(e)})),i()(o=e("orderBy")(t,r,n)).call(o,a)}function n(e){var n,a=[];return d()(e).call(e,(function(e){var t,r=p()(a).call(a,(function(t){return t.code===e.code}));r?r.products=i()(t=r.products).call(t,e.products):((r=angular.copy(e)).total=0,a.push(r))})),d()(a).call(a,(function(e){var r;d()(r=e.products).call(r,(function(r){e.total+=t.toNumber(r.amount)}))})),o()(n=r(a,"total",!0)).call(n,0,10)}}])},sSbM:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.incomeByItemReportColumns",[]).factory("incomeByItemReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"productCode",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE",include:!0,width:"wrap"},{dataKey:"productName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME",include:!0},{dataKey:"userName",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"orderNo",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO",include:!0,width:"wrap"},{dataKey:"date",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.DATE",include:!0,width:"wrap",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"qty",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY",include:!0,halign:"center",width:"wrap"},{dataKey:"amount",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"subtotal",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.SUBTOTAL",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function a(){o()(n).call(n,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},u7OF:function(e,t,r){"use strict";r.r(t);var n=r("ipr/"),o=r.n(n);r("S2gh"),r("hY1K");t.default=angular.module("chart",["deskworks.helper"]).directive("chart",["$window","systemColors",function(e,t){return e.Chart.defaults.global.legend.labels.boxWidth=12,e.Chart.defaults.global.tooltips.cornerRadius=3,e.Chart.defaults.global.tooltips.displayColors=!1,e.Chart.defaults.global.tooltips.backgroundColor="rgba(0,0,0,0.65)",e.Chart.defaults.global.elements.rectangle.borderWidth=1,e.Chart.defaults.global.elements.rectangle.backgroundColor=t.primary,e.Chart.defaults.global.elements.arc.borderWidth=1,{restrict:"E",scope:!0,controller:"ChartCtrl as $ctrl",bindToController:{type:"@chartType",labels:"<chartLabels",data:"<chartData",options:"<chartOptions"},template:"<canvas></canvas>"}}]).controller("ChartCtrl",["$scope","$element","$window","helper",function(e,t,r,n){var a,i=this,l={maintainAspectRatio:!1},s={backgroundColor:["#317da3","#e6194b","#3cb44b","#ffe119","#f58231","#911eb4","#aa6e28","#008080","#808080","#800000","#3244a1","#e64c19","#3db372","#d1ff1a","#f5c131","#b31e81","#a89728","#005580","#806659","#804000"],hoverBorderWidth:2,hoverBorderColor:"#fff"};i.$onDestroy=function(){a&&a.destroy()},i.$onChanges=function(e){var n;if(i.options){var c={labels:i.labels,datasets:o()(n=i.data).call(n)};c.datasets[0]=angular.extend({},s,c.datasets[0]),!a||e.type&&e.type.currentValue!==e.type.previousValue?(a&&a.destroy(),a=new r.Chart(t.children(),{type:i.type,data:c,options:angular.extend({},l,i.options)})):(angular.extend(a.data,c),angular.extend(a.options,l,i.options),a.update())}}}])},ukw3:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.depositTransactionReport.service",["ngResource","deserializeNumbers","datesDeserializer","deskworks.config"]).factory("DepositTransactionReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=n.getApiAbsUrl("/banks/:bankId/deposit-transaction-reports"),a=t(["date","billingMethods.centers.payments.date"]),i=r(["billingMethods.centers.payments.amount"]);return e(o,{bankId:"@bankId",centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,a,i]}})}])},vopJ:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.availabilityReportColumns",[]).factory("availabilityReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n={available:[{dataKey:"name",_title:"AVAILABILITY_REPORT.COLUMNS.UNIT",include:!0,defaultOrder:!0},{dataKey:"price",_title:"AVAILABILITY_REPORT.COLUMNS.PRICE",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"description",_title:"AVAILABILITY_REPORT.COLUMNS.DESCRIPTION",include:!0}],unavailable:[{dataKey:"name",_title:"AVAILABILITY_REPORT.COLUMNS.UNIT",include:!0,defaultOrder:!0},{dataKey:"price",_title:"AVAILABILITY_REPORT.COLUMNS.PRICE",include:!0,halign:"right",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"discount",_title:"AVAILABILITY_REPORT.COLUMNS.DISCOUNT",include:!0,halign:"right",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"netPrice",_title:"AVAILABILITY_REPORT.COLUMNS.NET_PRICE",include:!0,halign:"right",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"attachedUser",_title:"AVAILABILITY_REPORT.COLUMNS.CLIENT",include:!0}]};function a(){var e,t;o()(e=n.available).call(e,(function(e){e.title=r.instant(e._title)})),o()(t=n.unavailable).call(t,(function(e){e.title=r.instant(e._title)}))}return a(),e.$on("$setTranslationsSuccess",a),n}])},vtWt:function(e,t,r){"use strict";r.r(t);var n=r("yCd9"),o=r.n(n);t.default=angular.module("deskworks.reports.incomeReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.incomeReport.service","deskworks.reports.incomeReportColumns"]).controller("IncomeReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","IncomeReport","incomeReportColumns",function(e,t,r,n,a,i,l,s,c,d,f){var p,u=this,m=[];function g(e){var t,r={columns:e.reportColumns.columns,rows:[]};return m=[],r.rows=o()(t=e.reportData.payments).call(t,(function(e,t){var n;return m.push(t%2?null:s.rowOdd),o()(n=r.columns).call(n,(function(t){return e[t.dataKey]}))})),r.rows.push([!1,!1,!1,!1,!1]),m.push(null),r.rows.push([!1,!1,!1,n.instant("INCOME_REPORT.TOTAL_INCOME")+":",e.reportData.total]),m.push(s.h3),r}u.config={reportName:n.instant("INCOME_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:f},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return d.get({centerId:u.config.reportOptions.centerId,fromDate:r("date")(u.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(u.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:u.config.reportOwnerRegion.ownerId,regionId:u.config.reportOwnerRegion.regionId}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,m[t.row.index])}},a.setPageTitle(n.instant("INCOME_REPORT.PAGE_TITLE")),u.config.reportDates.fromDate.date(1),u.config.reportDates.toDate.add(1,"M").date(0),u.reportBuilder=new c(u.config),e.$watch((function(){return{reportOptions:u.config.reportOptions,reportDates:u.config.reportDates,reportOwnerRegion:u.config.reportOwnerRegion}}),(function(e,r){p&&(t.cancel(p),p=null),p=t((function(){if(u.pdf=null,!angular.isUndefined(u.config.reportOptions.centerId)){var t=e.reportDates.fromDate,n=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(u.config.reportData=null),t=e.reportDates.toDate,n=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(u.config.reportData=null),u.reportBuilder.buildPdf(g).then((function(e){u.pdf=e}))}}),100)}),!0),u.downloadPdf=function(){u.pdf&&l(u.pdf,u.reportBuilder.getReportFileName("pdf"))},u.downloadCsv=function(){u.pdf&&l(u.reportBuilder.buildCsv(g),u.reportBuilder.getReportFileName("csv"))}}])},"xU/f":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.accountsReceivableReport.service",["ngResource","datesDeserializer","deserializeNumbers","deskworks.config"]).factory("AccountsReceivableReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=t(["payments.date"]),a=r(["payments.amountDue","payments.amount"]);return e(n.getApiAbsUrl("/centers/:centerId/accounts-receivable-reports"),{centerId:"@centerId",date:"@date"},{get:{method:"GET",transformResponse:[angular.fromJson,o,a]}})}])},xWoj:function(e,t,r){"use strict";r.r(t);var n=r("WSeP"),o=r.n(n);t.default=angular.module("deskworks.reports.depositTransactionReportColumns",["deskworks.helper"]).factory("depositTransactionReportColumns",["$rootScope","$filter","$translate","helper",function(e,t,r,n){var a=[{dataKey:"reference",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.REFERENCE",include:!0,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"userName",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.USER_NAME",include:!0,defaultOrder:!0},{dataKey:"payorName",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.PAYOR",include:!0},{dataKey:"userCompany",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.COMPANY",include:!0},{dataKey:"amount",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.AMOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"subtotal",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.SUBTOTAL",include:!0,halign:"right",readonly:!0,width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"total",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.TOTAL",include:!0,halign:"right",readonly:!0,width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"orderId",_title:"DEPOSIT_TRANSACTION_REPORT.COLUMNS.ORDER_ID",include:!1,halign:"center",width:"wrap"}];function i(){o()(a).call(a,(function(e){e.title=r.instant(e._title)}))}return i(),e.$on("$setTranslationsSuccess",i),a}])},ynEu:function(e,t,r){"use strict";r.r(t);r("y89P"),r("X5mX");var n=r("YtL8"),o=r.n(n),a=r("xeXu"),i=r.n(a),l=r("hsT8"),s=r.n(l),c=r("6RpP"),d=r.n(c),f=r("WSeP"),p=r.n(f),u=r("yCd9"),m=r.n(u),g=r("ipr/"),R=r.n(g),v=r("92Gs");t.default=angular.module("deskworks.CheckInReportCtrl",["pdfPreview","fileSaver","chart","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.CheckInReport","deskworks.checkInReportColumns","deskworks.checkInReportTotalsColumns","deskworks.reports.checkInReportBarChart",v.default.name]).controller("CheckInReportCtrl",["$scope","$location","$timeout","$translate","$filter","state","fileSaver","reportStyles","ReportBuilder","CheckInReport","checkInReportBarChart","checkInReportColumns","checkInReportTotalsColumns","reportGroupBy",function(e,t,r,n,a,l,c,f,u,g,v,O,h,y){var T,E=this;function C(e){var t,r={columns:O,rows:[],styles:[]},o=y(e.reportData,e.orderBy),a=m()(t=Array.apply(null,new Array(r.columns.length))).call(t,(function(){return!1}));return p()(o).call(o,(function(e){var t,o=0;p()(e).call(e,(function(e,t){var n;r.rows.push(m()(n=r.columns).call(n,(function(t){return e[t.dataKey]}))),r.styles.push(t%2?null:f.rowOdd),o+=e.duration})),r.rows.push(d()(t=R()(a).call(a,0,r.columns.length-2)).call(t,[n.instant("CHECK_IN_REPORT.COLUMNS.SUBTOTAL")+":",o])),r.styles.push(f.h2)})),r}function w(e){var t={userName:["userName","totalHoursTimeRange"],userCompany:["userCompany","totalHoursTimeRange"],checkInTime:["date","totalHoursDay"]},r={columns:s()(h).call(h,(function(r){var n;return i()(n=t[e.orderBy]).call(n,r.dataKey)>=0})),rows:[],styles:[]},n=y(e.reportData,e.orderBy);return p()(n).call(n,(function(t,n){var a=o()(t).call(t,(function(e,t){return e+t.duration}),0);r.rows.push([t[0][e.orderBy],a]),r.styles.push(n%2?null:f.rowOdd)})),r}E.config={reportName:n.instant("CHECK_IN_REPORT.REPORT_NAME"),reportOptions:{},orderBy:"checkInTime",reportColumns:{columns:O},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return g.query({centerId:E.config.reportOptions.centerId,fromDate:a("date")(E.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:a("date")(E.config.reportDates.toDate,"yyyy-MM-dd")})}},l.setPageTitle(E.config.reportName),E.config.reportDates.fromDate.date(1),!1!==E.config.orderBy&&(e.$watch((function(){return t.search().orderBy}),(function(e){E.config.orderBy=e||"checkInTime"})),e.$watch("$ctrl.config.orderBy",(function(e){t.search("orderBy",e).replace()}))),E.reportBuilder=new u(E.config),e.$watch((function(){return{reportOptions:E.config.reportOptions,reportDates:E.config.reportDates,orderBy:E.config.orderBy}}),(function(e,t){T&&(r.cancel(T),T=null),T=r((function(){if(E.pdf=null,E.config.reportDates.fromDate&&E.config.reportDates.toDate){var r=e.reportDates.fromDate,n=t.reportDates.fromDate;!moment.isMoment(r)||moment.isMoment(n)&&r.isSame(n)||(E.config.reportData=null),r=e.reportDates.toDate,n=t.reportDates.toDate,!moment.isMoment(r)||moment.isMoment(n)&&r.isSame(n)||(E.config.reportData=null);new jsPDF(E.config.reportOptions.paperLayout,"pt",E.config.reportOptions.paperSize);E.reportBuilder.generatePdf(C).then((function(e){var t,r=angular.copy(f);r.startY=e.autoTableEndPosY()+40,r.tableMargin=R()(t=f.pageMargins).call(t),r.tableMargin[3]=340,E.reportBuilder.generatePdf(w,r,e).then((function(e){E.pdf=e.output("blob")})).then((function(){var e,t,r;E.bar=(e=E.config,t=y(e.reportData,e.orderBy),r=m()(t).call(t,(function(t){var r=o()(t).call(t,(function(e,t){return e+t.duration}),0);return{name:"checkInTime"===e.orderBy?a("date")(t[0][e.orderBy]):t[0][e.orderBy],value:r}})),v.getChartConfig(r,e.orderBy))}))}))}}),100)}),!0),E.downloadPdf=function(){E.pdf&&c(E.pdf,E.reportBuilder.getReportFileName("pdf"))},E.downloadCsv=function(){E.pdf&&(c(E.reportBuilder.buildCsv(C),E.reportBuilder.getReportFileName("csv","-main")),c(E.reportBuilder.buildCsv(w),E.reportBuilder.getReportFileName("csv","-totals")))}}])}}]);