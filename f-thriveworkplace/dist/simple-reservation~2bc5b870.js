(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"+mGx":function(e,t){e.exports='<div class=sr-centers> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <ff-board> <div class="ff-grid ff-gutter-h ff-gutter-v"> <ff-panel class=ff-panel-card flex="{md: \'0 0 50%\'}" ng-repeat="center in vm.centers"> <ff-img ff-src={{::center.thumbnail}} ff-src-hq={{::center.photo}}></ff-img> <ff-panel flex="1 1 auto"> <ff-panel-header style=margin-bottom:.5rem>{{::center.name}}</ff-panel-header> <div class="ff-grid gutter-v-half" flex="1 1 auto"> <div flex="1 1 auto"> <div class=sr-center-address> <ff-icon sense=location></ff-icon> <a href={{::vm.getMapUrl(center)}} target=_blank rel=noopener> {{::center.street2 ? center.street1 + \', \' + center.street2 : center.street1}} </a> </div> <div class=sr-center-phone> <ff-icon sense=phone></ff-icon> <a href=tel:{{::center.phone}}>{{::center.phone}}</a> </div> <div class=sr-center-email> <ff-icon sense=email></ff-icon> <a href=mailto:{{::center.email}} target=_blank rel=noopener>{{::center.email}}</a> </div> </div> <ff-btn-group flex="0 0 auto"> <ff-btn sense=ok ff-click=vm.select(center)><span translate=SIMPLE_RES.BTN_SELECT></span></ff-btn> </ff-btn-group> </div> </ff-panel> </ff-panel> </div> </ff-board> </div> '},"1Od8":function(e,t,r){},"26Fw":function(e,t,r){"use strict";r.r(t);r("oySO");t.default=angular.module("deskworks.SimpleReservationDateCtrl",[]).controller("SimpleReservationDateCtrl",["$scope","$route","$filter","$translate","unavailableDates","state",function(e,t,r,n,a,s){var i=this;s.setPageTitle(n.instant("SIMPLE_RES.DATE.PAGE_TITLE")),i.centerId=t.current.params.centerId,i.reservationTypeId=t.current.params.reservationTypeId,i.unavailableDates=a,i.dateMin=moment().startOf("day"),i.checkDateDisabled=function(e){return i.unavailableDates.indexOf(r("date")(e,"yyyy-MM-dd"))>=0},i.next=function(){if(angular.isDefined(i.selectedDate))return s.setPath(s.getPath()+"/"+r("date")(i.selectedDate,"yyyy-MM-dd")+"/units")},i.back=s.back}])},"4HDf":function(e,t){e.exports='<div class=sr-categories> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <ff-board> <div class="ff-grid gutter-h gutter-v"> <ff-panel class=ff-panel-card flex="{md: \'0 0 50%\'}" ng-repeat="category in vm.categories"> <ff-img ff-src={{::category.thumbnail}} ff-src-hq={{::category.photo}}></ff-img> <ff-panel flex="1 1 auto"> <ff-panel-header style=margin-bottom:.5rem>{{::category.name}}</ff-panel-header> <div class="ff-grid gutter-v-half" flex="1 1 auto"> <div flex="1 1 auto" class=sr-cat-desc ng-if=::category.description ng-bind-html=::category.description></div> <div flex="1 1 auto" ng-if=::category.staffOnly> <span translate=RESERVATIONS.STAFF_ONLY translate-values="{ centerName: vm.center.name, centerPhone: vm.center.phone, centerEmail: vm.center.email }"> </span> </div> <ff-btn-group flex="0 0 auto" ng-if=::!category.staffOnly> <ff-btn sense=ok ff-click=vm.select(category)><span translate=SIMPLE_RES.BTN_SELECT></span></ff-btn> </ff-btn-group> </div> </ff-panel> </ff-panel> </div> </ff-board> <ff-btn-group class=buttons-bottom> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> </div> '},"5myT":function(e,t,r){"use strict";r.r(t);r("bOPx");angular.module("deskworks.simpleSelectTime",["deskworks.resReservation"]).component("simpleSelectTime",{templateUrl:"06-time/simple-select-time.tpl.html",controller:"ResReservationController",bindings:{center:"<",calData:"<",date:"<"}})},"5nZu":function(e,t,r){"use strict";r("DbwS"),r("t91x"),angular.module("deskworks.StaffHelpCtrl",["ngRoute","deskworks.helper","deskworks.config"]).controller("StaffHelpCtrl",["$scope","$timeout","$q","$route","$window","$translate","dwAlerts","helper","state","deskworksConfig",function(e,t,r,n,a,s,i,l,o,f){this.notice=o.getParam("notice"),o.setPageTitle(s.instant("SIMPLE_RES.STAFF_HELP.PAGE_TITLE")),e.$on("$routeChangeStart",function(e,t,r){!t.$$route||"MemberSignUpBillingCtrl"!==t.$$route.controller&&"MemberSignUpPurchaseCtrl"!==t.$$route.controller&&"SimpleReservationBillingCtrl"!==t.$$route.controller&&"SimpleReservationPurchaseCtrl"!==t.$$route.controller&&"BuyPassBillingCtrl"!==t.$$route.controller&&"BuyPassPurchaseCtrl"!==t.$$route.controller||(i.error(s.instant("SIMPLE_RES.STAFF_HELP.BACK_ERROR")),e.preventDefault())}),this.home=function(){if(o.getParam("redirect"))a.location.href=o.getParam("redirect");else{var e=o.getParam("origin"),n=o.getCurrentCenterId();(e?o.logout():r.when()).finally(function(){return o.resetParams(),e&&o.setCurrentCenterId(n),o.setPath(e||f.getDefaultRoute())})}return t(1e4)}}])},"71HN":function(e,t){e.exports='<div class="sr-category-details rental-type-details"> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <ff-board> <ff-panel class=sr-category-panel> <ff-panel> <ff-panel-header style=margin-bottom:.5rem>{{vm.category.name}}</ff-panel-header> <div class=sr-swiper-wrapper> <div class=sr-swiper-content> <swiper images=vm.category.photoUrls thumbnail=vm.category.thumbnail></swiper> </div> </div> <div class=tabs-block> <uib-tabset type=pills> <uib-tab heading="{{\'SIMPLE_RES.CATEGORY.PRICES\' | translate}}"> <div ng-repeat="product in vm.category.products" class=sr-category-products> <h5 ng-bind=product.name></h5> <div class=ff-row ng-repeat="priceItem in product.priceItems"> <div flex="1 1 auto" ng-bind=priceItem.name></div> <div flex="0 0 70px" ng-bind="priceItem.price | currency"></div> </div> </div> <div ng-hide="vm.category.products && vm.category.products.length" translate=SIMPLE_RES.CATEGORY.PRICES.EMPTY></div> </uib-tab> <uib-tab heading="{{\'SIMPLE_RES.CATEGORY.DESCRIPTION\' | translate}}"> <div ng-bind-html="vm.category.description || (\'SIMPLE_RES.CATEGORY.DESCRIPTION.EMPTY\' | translate)"></div> </uib-tab> </uib-tabset> </div> </ff-panel> </ff-panel> </ff-board> <ff-btn-group class=buttons-bottom> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> <ff-btn sense=ok ff-click=vm.reserve()><span translate=SIMPLE_RES.CATEGORY.BTN_RESERVE></span></ff-btn> </ff-btn-group> </div> '},"8MBW":function(e,t,r){"use strict";r.r(t);r("x3lI");angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(e){var t,r,n=this;function a(e){for(var t=0;t<n.tabs.length;t++)if(n.tabs[t].index===e)return t}n.tabs=[],n.select=function(e,s){if(!r){var i=a(t),l=n.tabs[i];if(l){if(l.tab.onDeselect({$event:s,$selectedIndex:e}),s&&s.isDefaultPrevented())return;l.tab.active=!1}var o=n.tabs[e];o?(o.tab.onSelect({$event:s}),o.tab.active=!0,n.active=o.index,t=o.index):!o&&angular.isDefined(t)&&(n.active=null,t=null)}},n.addTab=function(e){if(n.tabs.push({tab:e,index:e.index}),n.tabs.sort(function(e,t){return e.index>t.index?1:e.index<t.index?-1:0}),e.index===n.active||!angular.isDefined(n.active)&&1===n.tabs.length){var t=a(e.index);n.select(t)}},n.removeTab=function(e){for(var t,r=0;r<n.tabs.length;r++)if(n.tabs[r].tab===e){t=r;break}if(n.tabs[t].index===n.active){var a=t===n.tabs.length-1?t-1:t+1%n.tabs.length;n.select(a)}n.tabs.splice(t,1)},e.$watch("tabset.active",function(e){angular.isDefined(e)&&e!==t&&n.select(a(e))}),e.$on("$destroy",function(){r=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",template:'<div><ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul><div class="tab-content"><div class="tab-pane" ng-repeat="tab in tabset.tabs" ng-class="{active: tabset.active === tab.index}" uib-tab-content-transclude="tab"></div></div></div>',link:function(e,t,r){e.vertical=!!angular.isDefined(r.vertical)&&e.$parent.$eval(r.vertical),e.justified=!!angular.isDefined(r.justified)&&e.$parent.$eval(r.justified)}}}).directive("uibTab",["$parse",function(e){return{require:"^uibTabset",replace:!0,template:'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item"><a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a></li>',transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(t,r,n,a,s){t.disabled=!1,n.disable&&t.$parent.$watch(e(n.disable),function(e){t.disabled=!!e}),angular.isUndefined(n.index)&&(a.tabs&&a.tabs.length?t.index=Math.max.apply(null,a.tabs.map(function(e){return e.index}))+1:t.index=0),angular.isUndefined(n.classes)&&(t.classes=""),t.select=function(e){if(!t.disabled){for(var r,n=0;n<a.tabs.length;n++)if(a.tabs[n].tab===t){r=n;break}a.select(r,e)}},a.addTab(t),t.$on("$destroy",function(){a.removeTab(t)}),t.$transcludeFn=s}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}).directive("uibTabContentTransclude",function(){return{restrict:"A",require:"^uibTabset",link:function(e,t,r){var n=e.$eval(r.uibTabContentTransclude).tab;n.$transcludeFn(n.$parent,function(e){angular.forEach(e,function(e){!function(e){return e.tagName&&(e.hasAttribute("uib-tab-heading")||e.hasAttribute("data-uib-tab-heading")||e.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===e.tagName.toLowerCase()||"data-uib-tab-heading"===e.tagName.toLowerCase()||"x-uib-tab-heading"===e.tagName.toLowerCase()||"uib:tab-heading"===e.tagName.toLowerCase())}(e)?t.append(e):n.headingElement=e})})}}})},"9QnR":function(e,t){e.exports='<div id=newBillingProfile> <h4 class="page-title flex"> <span>{{state.getPageTitle()}}</span> <need-help phone="$resolve.center.phone || vm.reg.phone"></need-help> </h4> <ff-board> <ff-panel style=max-width:450px> <ff-panel-header> <span translate=GLOBAL.STEP_X_OF_Y translate-values=vm.reg ng-if=vm.reg.stepCount></span> <span ng-if=vm.reg.stepCount>&nbsp;</span> <small translate=GLOBAL.REQUIRED_FIELDS_MARKED_WITH></small> </ff-panel-header> <div class="ff-grid gutter-v"> <up-credit-cards user-profile=vm.userProfile reg=vm.reg settings=vm.settings single=true ng-if=vm.userProfile.creditCards.length></up-credit-cards> <up-e-checks user-profile=vm.userProfile reg=vm.reg single=true ng-if="vm.settings.enableEChecks && vm.userProfile.eChecks.length"></up-e-checks> <ff-btn-group ng-if=vm.showSwitchButton()> <ff-btn sense=add size=sm ng-if=vm.userProfile.eChecks.length ff-click=vm.addCC()> <span translate=BILLING_PROFILE.CREDIT_CARDS.BTN_ADD></span> </ff-btn> <ff-btn sense=add size=sm ng-if=vm.userProfile.creditCards.length ff-click=vm.addECheck()> <span translate=BILLING_PROFILE.E_CHECKS.BTN_ADD></span> </ff-btn> </ff-btn-group> </div> </ff-panel> </ff-board> <ff-btn-group class=buttons-bottom> <ff-btn sense=help ff-click=vm.staffHelp() ng-if=vm.staffHelp><span translate=GLOBAL.BTN_STAFF_HELP></span></ff-btn> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> <ff-btn sense=next ff-click=vm.next() ng-if=vm.next><span translate=SIMPLE_RES.BILLING.BTN_PURCHASE></span></ff-btn> <ff-btn sense=next ff-click=vm.complete() ng-if=vm.complete><span translate=MEMBER_SIGN_UP.BILLING.BTN_COMPLETE></span></ff-btn> </ff-btn-group> </div> '},"9ynW":function(e,t,r){"use strict";r.r(t);r("DbwS"),r("t91x");t.default=angular.module("deskworks.SimpleReservationCompleteCtrl",[]).controller("SimpleReservationCompleteCtrl",["$scope","$q","$timeout","$translate","dwAlerts","state","helper","deskworksConfig","center","purchase","settings",function(e,t,r,n,a,s,i,l,o,f,c){var u=this;u.center=o,u.purchase=f,u.accessCode=s.getParam("accessCode"),u.settings=c,s.setPageTitle(n.instant("SIMPLE_RES.COMPLETE.PAGE_TITLE")),e.$on("$routeChangeStart",function(e,t,r){!t.$$route||"SimpleReservationConfirmCtrl"!==t.$$route.controller&&"SimpleReservationBillingCtrl"!==t.$$route.controller||(a.error(n.instant("SIMPLE_RES.COMPLETE.BACK_ERROR")),e.preventDefault())}),u.home=function(){var e=s.getParam("origin"),n=s.getCurrentCenterId();return(e?s.logout():t.when()).finally(function(){s.resetParams(),s.setPath(e||l.getDefaultRoute()),e?s.setCurrentCenterId(n):u.center&&s.setCurrentCenterId(u.center.id)}),r(1e4)}}])},EilH:function(e,t,r){"use strict";r.r(t);r("uUpP");t.default=angular.module("deskworks.SimpleReservationUnitsCtrl",["deskworks.resClock"]).controller("SimpleReservationUnitsCtrl",["$scope","$route","$translate","$locale","state","resUnits","center",function(e,t,r,n,a,s,i){var l=this;a.setPageTitle(r.instant("SIMPLE_RES.UNITS.PAGE_TITLE")),l.center=i,l.resTypeId=t.current.params.reservationTypeId,l.date=t.current.params.date,l.units=s.filter(function(e){return e.availabilities.length||"staffOnly"===e.whoCanReserve}),e.$on("LOGOUT",t.reload),e.$on("LOGIN",t.reload),l.select=function(e){return a.setPath(a.getPath()+"/"+e.id)},1===l.units.length&&"staffOnly"!==l.units[0].whoCanReserve&&(a.replace(),l.select(l.units[0])),l.back=a.back}])},FBsi:function(e,t,r){},Fq4b:function(e,t,r){},Glix:function(e,t,r){},HxVc:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.SimpleReservationSignInCtrl",["flexForms","deskworks.state","deskworks.config","deskworks.dwSignIn"]).controller("SimpleReservationSignInCtrl",["$scope","$q","$location","$route","$translate","state",function(e,t,r,n,a,s){s.setPageTitle(a.instant("SIGN_IN.PAGE_TITLE")),e.$on("dwSignIn:SignIn",function(e){e.stopPropagation(),s.replace(),s.isLoggedNonMember()?s.setPath(s.getPath()+"/"+s.getLoggedUserId()):s.setPath(s.getPath()+"/"+s.getLoggedUserId()+"/confirm")}),e.$on("dwSignIn:SignUp",function(e){e.stopPropagation(),s.setPath(s.getPath()+"/new")})}])},IJqC:function(e,t){e.exports="<ff-panel id=reservationAgreement class=ff-no-frame> <label> <ff-checkbox ff-model=reservationAgreement ff-required=true ff-validate-alert=\"{ required: ('RESERVATIONS.RESERVATION_AGREEMENT.REQUIRED' | translate) }\" title=\"{{'RESERVATIONS.RESERVATION_AGREEMENT.REQUIRED' | translate}}\"> <div translate=RESERVATIONS.RESERVATION_AGREEMENT.LABEL></div> <a ng-href={{::wlLinks.reservationAgreementLinkUrl}} ng-bind=::wlLinks.reservationAgreementLinkText target=_blank rel=noopener></a> </ff-checkbox> </label> </ff-panel> "},Ij62:function(e,t,r){"use strict";r.r(t);r("FBsi");t.default=angular.module("deskworks.SimpleReservationCentersCtrl",[]).controller("SimpleReservationCentersCtrl",["$scope","$translate","centers","state",function(e,t,r,n){n.setPageTitle(t.instant("SIMPLE_RES.CENTERS.PAGE_TITLE")),1===r.length&&(n.replace(),n.setPath(n.getPath()+"/centers/"+r[0].id+"/types")),this.centers=r,this.getMapUrl=function(e){return"https://maps.google.com?q="+encodeURIComponent("".concat(e.street1,", ").concat(e.city,", ").concat(e.state))},this.select=function(e){return n.getCurrentCenterId()!==e.id&&n.setCurrentCenterId(e.id),n.setPath("/simple-reservation/centers/"+e.id+"/types")}}])},KYZr:function(e,t,r){"use strict";r.r(t);r("1Od8");t.default=angular.module("deskworks.SimpleReservationTimeCtrl",["deskworks.simpleSelectTime"]).controller("SimpleReservationTimeCtrl",["$scope","$translate","state",function(e,t,r){r.setPageTitle(t.instant("SIMPLE_RES.TIME.PAGE_TITLE"))}])},KdAj:function(e,t){e.exports='<div class=sr-units> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <ff-board> <ff-panel ng-if=!vm.units.length><span translate=SIMPLE_RES.UNITS.EMPTY></span></ff-panel> <div class=em style="margin:0 0 .5rem 1rem">{{vm.date | date:\'longDate\'}}</div> <div class="ff-grid ff-gutter-h ff-gutter-v"> <ff-panel class=ff-panel-card flex="{md: \'0 0 50%\'}" ng-repeat="unit in vm.units"> <ff-panel> <ff-panel-header style=margin-bottom:.5rem>{{unit.name}}</ff-panel-header> <div class=ff-grid> <div flex="1 1 auto" class=sr-clocks> <res-clock res-unit=unit am=true></res-clock> <res-clock res-unit=unit am=false></res-clock> </div> <ff-btn-group flex="0 0 auto"> <ff-btn sense=ok ff-click=vm.select(unit)><span translate=SIMPLE_RES.BTN_SELECT></span></ff-btn> </ff-btn-group> </div> </ff-panel> </ff-panel> </div> </ff-board> <ff-btn-group class=buttons-bottom> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> </div> '},KjfD:function(e,t,r){},"NM/t":function(e,t){e.exports='<div id=simpleReservationComplete> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <ff-board> <div class="ff-grid ff-gutter-v"> <ff-panel> <span class="ff-center ff-bmargin" ng-if="vm.accessCode && vm.settings.enableAccessCodes" translate=SIMPLE_RES.COMPLETE.ACCESS_CODE translate-values="{ accessCode: vm.accessCode }"></span> </ff-panel> <ff-panel ng-if=vm.purchase> <ff-panel-header> <span translate=SIMPLE_RES.COMPLETE.ORDER.HEADER translate-values="{ orderId: vm.purchase.orderId }"></span> </ff-panel-header> <dw-invoice invoice=vm.purchase center=vm.center allow-remove=false></dw-invoice> </ff-panel> </div> </ff-board> <ff-btn-group class=buttons-bottom ng-class="{\'ff-center\': !vm.purchase}"> <ff-btn sense=home type=submit ff-click=vm.home()><span translate=GLOBAL.BTN_HOME></span></ff-btn> </ff-btn-group> </div> '},QEpw:function(e,t){e.exports='<div class="ff-grid gutter-v"> <up-credit-cards user-profile=$ctrl.user settings=$ctrl.settings single=true ng-if=$ctrl.user.creditCards.length></up-credit-cards> <up-e-checks user-profile=$ctrl.user single=true ng-if="$ctrl.settings.enableEChecks && $ctrl.user.eChecks.length"></up-e-checks> <ff-btn-group ng-if=$ctrl.showSwitchButton()> <ff-btn sense=add size=sm ng-if=$ctrl.user.eChecks.length ff-click=$ctrl.addCC()> <span translate=BILLING_PROFILE.CREDIT_CARDS.BTN_ADD></span> </ff-btn> <ff-btn sense=add size=sm ng-if=$ctrl.user.creditCards.length ff-click=$ctrl.addECheck()> <span translate=BILLING_PROFILE.E_CHECKS.BTN_ADD></span> </ff-btn> </ff-btn-group> </div> '},SLH3:function(e,t,r){"use strict";r.r(t);r("KjfD");t.default=angular.module("deskworks.SimpleReservationCategoriesCtrl",[]).controller("SimpleReservationCategoriesCtrl",["$scope","$translate","state","center","reservationCategories",function(e,t,r,n,a){r.setPageTitle(t.instant("SIMPLE_RES.CATEGORIES.PAGE_TITLE")),this.center=n,this.categories=a.filter(function(e){var t=e.reservationUnits.filter(function(e){return"staffOnly"===e.whoCanReserve}).length,n=e.reservationUnits.filter(function(e){return"notAvailable"!==e.whoCanReserve&&("staffOnly"!==e.whoCanReserve||r.isLoggedAdmin())&&("member"!==e.whoCanReserve||r.isLoggedMember()||r.isLoggedAdmin())&&("nonMember"!==e.whoCanReserve||r.isLoggedNonMember()||r.isLoggedAdmin()||!r.getLoggedUserId())}).length;return e.staffOnly=!!t&&!n,!!n||!!t}),this.select=function(e){return r.setPath(r.getPath()+"/"+e.id)},this.back=r.back}])},TiT8:function(e,t,r){var n={"./01-centers/centers.controller.js":"Ij62","./02-reservation-categories/reservation-categories.controller.js":"SLH3","./03-reservation-category/reservation-category.controller.js":"kAKh","./03-reservation-category/swiper.directive.js":"pAtM","./03-reservation-category/tabs.js":"8MBW","./04-date/date.controller.js":"26Fw","./05-reservation-units/reservation-units.controller.js":"EilH","./06-time/simple-reservation-time.controller.js":"KYZr","./06-time/simple-select-time.component.js":"5myT","./07-user-profile/user-profile.controller.js":"zT5p","./08-purchase/purchase.controller.js":"v/E5","./other/complete.controller.js":"9ynW","./other/confirm.controller.js":"hjI7","./other/simple-reservation-sign-in.controller.js":"HxVc"};function a(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id="TiT8"},VHWN:function(e,t,r){},aE5K:function(e,t){e.exports='<div class=user-profile id=userProfile> <h4 class="page-title flex"> <span> {{state.getPageTitle()}} <span ng-if="vm.reg.member && !vm.reg.selfRegistration" ng-style="{ color: vm.center.color }">{{vm.center.name}}</span> </span> <need-help phone=vm.reg.phone></need-help> </h4> <ff-board> <ff-panel> <ff-panel-header ng-if=vm.reg> <span translate=GLOBAL.STEP_X_OF_Y translate-values=vm.reg ng-if=vm.reg.stepCount></span> <small translate=GLOBAL.REQUIRED_FIELDS_MARKED_WITH></small> </ff-panel-header> <div class="ff-grid ff-gutter-v ff-gutter-h"> <up-personal-info user=vm.userProfile schema=vm.schema reg=vm.reg></up-personal-info> <up-addresses flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg center=vm.center single=true></up-addresses> <div flex="{md: \'0 0 50%\'}"> <div class="ff-grid ff-gutter-v"> <up-login-info user=vm.userProfile schema=vm.schema reg=vm.reg member-directory-url=wlLinks.memberDirectoryUrl></up-login-info> <up-phones user=vm.userProfile schema=vm.schema reg=vm.reg single=true></up-phones> </div> </div> <up-photo flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg></up-photo> <div flex="{md: \'0 0 50%\'}"> <div class="ff-grid ff-gutter-v"> <up-lead-source user=vm.userProfile schema=vm.schema reg=vm.reg></up-lead-source> <up-terms-of-service user=vm.userProfile schema=vm.schema reg=vm.reg></up-terms-of-service> </div> </div> </div> </ff-panel> </ff-board> <ff-btn-group class=buttons-bottom ng-if=vm.reg> <ff-btn sense=back ff-click=vm.back() ng-if=vm.back><span translate=GLOBAL.BTN_BACK></span></ff-btn> <ff-btn sense=next ff-click=vm.next()><span translate=GLOBAL.BTN_NEXT></span></ff-btn> </ff-btn-group> </div> '},aIjk:function(e,t,r){"use strict";t.a=angular.module("needHelp",[]).directive("needHelp",function(){return{restrict:"E",scope:!0,controller:function(){},controllerAs:"$ctrl",template:'<span translate="GLOBAL.NEED_HELP" class="need-help" ng-if="$ctrl.phone" '+"translate-values=\"{ phone: '<a href=&quot;tel:' + $ctrl.phone + '&quot;>' + $ctrl.phone + '</a>' }\"></span>",bindToController:{phone:"<"}}})},dLOS:function(e,t,r){"use strict";r("it7j");var n=r("QEpw"),a=r.n(n);t.a=angular.module("newBillingProfile",[]).directive("newBillingProfile",function(){return{template:a.a,restrict:"E",scope:!0,controller:"NewBillingProfileCtrl as $ctrl",bindToController:{settings:"<",user:"<"}}}).controller("NewBillingProfileCtrl",["$scope","userProfileService",function(e,t){var r=this;r.$onInit=function(){if(r.settings.creditCardTypes=r.settings.creditCardTypes.filter(function(e){return e.enable}),r.user.creditCards.forEach(function(e){e.type=r.settings.creditCardTypes.find(function(t){return t.id===e.type})||e.type||{}}),r.user.creditCards=r.user.creditCards||[],!r.user.creditCards.length){var n=t.creditCard.new(r.user);n.type=r.settings.creditCardTypes[0],r.user.creditCards.push(n)}t.bindTestBillingGenerator(e,r.user)},r.showSwitchButton=function(){var e=!r.user.creditCards[0]||t.creditCard.isNew(r.user.creditCards[0]),n=!r.user.eChecks[0]||t.eCheck.isNew(r.user.eChecks[0]);return e&&n&&r.settings.enableEChecks},r.addCC=function(){var e=t.creditCard.new(r.user);r.user.creditCards=[e],r.user.eChecks=[]},r.addECheck=function(){var e=t.eCheck.new(r.user);r.user.eChecks=[e],r.user.creditCards=[]}}])},"e+LO":function(e,t){e.exports='<form name=formSimpleReservationConfirm id=simpleReservationConfirm> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <ff-board> <ff-panel style=max-width:480px> <ff-row> <ff-label flex="0 1 100px"><span translate=RESERVATIONS.LOCATION></span></ff-label> <ff-static ff-bind=vm.center.name name=center></ff-static> </ff-row> <ff-row> <ff-label flex="0 1 100px"><span translate=RESERVATIONS.SPACE></span></ff-label> <ff-static ff-bind=vm.reservationUnit.name name=reservationUnit></ff-static> </ff-row> <ff-row> <ff-label flex="0 1 100px"><span translate=RESERVATIONS.DATE></span></ff-label> <ff-static ff-bind="vm.date | date:\'longDate\'" name=date></ff-static> </ff-row> <ff-row> <ff-label flex="0 1 100px"><span translate=RESERVATIONS.TIME></span></ff-label> <ff-static> <span><span nice-time=vm.timeStart></span> - <span nice-time=vm.timeEnd></span></span> </ff-static> </ff-row> <ff-row> <ff-label flex="0 1 100px"><span translate=RESERVATIONS.REPEAT_FREQUENCY></span></ff-label> <ff-static name=repeats><span ng-bind=vm.repeatFrequency.name></span></ff-static> </ff-row> <ff-row ng-show=vm.repeatFrequency.repeatDurationOptions> <ff-label flex="0 1 100px"><span translate=RESERVATIONS.REPEAT_DURATION></span></ff-label> <ff-static>{{vm.repeatFrequency.repeatDurationFilter(vm.repeatDuration)}}</ff-static> </ff-row> </ff-panel> </ff-board> <ff-btn-group class=buttons-bottom> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> <ff-btn sense=next type=submit ff-click=vm.next()><span translate=GLOBAL.BTN_NEXT></span></ff-btn> </ff-btn-group> </form> '},hjI7:function(e,t,r){"use strict";r.r(t);r("it7j");t.default=angular.module("deskworks.SimpleReservationConfirmCtrl",["deskworks.center.service","deskworks.reservationCategory.service","deskworks.reservationService","deskworks.reservationUnit.optsRepeatFrequency","deskworks.ReservationCost"]).controller("SimpleReservationConfirmCtrl",["$scope","$route","$filter","$translate","$q","dwAlerts","session","center","helper","state","reservationUnit","reservationCategoryService","reservationService","ReservationCost","optsRepeatFrequency",function(e,t,r,n,a,s,i,l,o,f,c,u,p,d,m){var g=this;f.setPageTitle(n.instant("RESERVATIONS.CONFIRM.PAGE_TITLE")),g.center=l,g.reservationUnit=c,g.date=r("toDate")(f.getParam("start")),g.timeStart=r("toDate")(f.getParam("start")),g.timeEnd=r("toDate")(f.getParam("end")),g.reservationNote=f.getParam("note")||"",g.emailConfirmation=!!f.getParam("confirm"),g.repeatFrequencyOptions=m,g.repeatFrequency=g.repeatFrequencyOptions[0],f.getParam("freq")&&(g.repeatFrequency=o.find(g.repeatFrequencyOptions,f.getParam("freq")),g.repeatFrequency&&g.repeatFrequency.repeatDurationOptions&&f.getParam("duration")-1<g.repeatFrequency.repeatDurationOptions.length&&(g.repeatDuration=+f.getParam("duration"))),g.back=f.back,g.next=function(){return a.when(i.isRole("nonMember")&&d.calcAsync(g.center.id,f.getCurrentUserId(),g.reservationUnit.id,f.getParam("start"),f.getParam("end")).then(function(e){if(e)return s.error("Not allowed. Chargeable reservation.")})).then(function(){var e={centerId:g.center.id,reservationUnitId:g.reservationUnit.id,from:g.timeStart,to:g.timeEnd,reservationNote:g.reservationNote,emailConfirmation:!!g.emailConfirmation,repeatFrequency:g.repeatFrequency.id,repeatDuration:g.repeatDuration};return p.save(g.center.id,f.getCurrentUserId(),e).catch(function(e){return s.error(e,"Failed to make reservation.")})}).then(function(e){return f.setParam("accessCode",e?e.accessCode||e.access_code:null),f.setPath("/simple-reservation/complete")})}}])},kAKh:function(e,t,r){"use strict";r.r(t);r("Fq4b");t.default=angular.module("deskworks.SimpleReservationCategoryCtrl",["ngSanitize","ui.bootstrap.tabs","swiper"]).controller("SimpleReservationCategoryCtrl",["$scope","$route","$sce","$translate","reservationCategory","state",function(e,t,r,n,a,s){var i=this;i.centerId=t.current.params.centerId,i.category=a,s.setPageTitle(n.instant("SIMPLE_RES.CATEGORY.PAGE_TITLE")),i.category.description=r.trustAsHtml(i.category.description),i.category.photos&&(i.category.photoUrls=i.category.photos.map(function(e){return e.url})),i.category.products=i.category.products.filter(function(e){return e.priceItems&&e.priceItems.length}),i.reserve=function(){return s.setPath(s.getPath()+"/dates")},i.back=s.back}])},l7sz:function(e,t){e.exports='<div id=staffHelp class=ff-tmargin> <ff-board> <ff-panel> <span ng-bind=::vm.notice></span> </ff-panel> </ff-board> <ff-btn-group class="buttons-bottom ff-center"> <ff-btn sense=home type=submit ff-click=vm.home()><span translate=GLOBAL.BTN_HOME></span></ff-btn> </ff-btn-group> </div> '},mAfg:function(e,t,r){"use strict";r.r(t);r("t91x"),r("VHWN"),r("5nZu");var n=r("l7sz"),a=r.n(n),s=r("aE5K"),i=r.n(s),l=r("9QnR"),o=r.n(l),f=["$injector",function(e){var t,n=(t=r("TiT8")).keys().map(t);e.loadNewModules(n.filter(function(e){return e.default}).map(function(e){return e.default.name})),e.invoke(["$templateCache",function(e){var t=r("o6Dd");t.keys().forEach(function(r){return e.put(r.replace(/^\.\//,""),t(r))}),e.put("staff-help/staff-help.tpl.html",a.a),e.put("templates/new-user-profile.tpl.html",i.a),e.put("templates/new-billing-profile.tpl.html",o.a)}])}];t.default=f},o6Dd:function(e,t,r){var n={"./01-centers/centers.tpl.html":"+mGx","./02-reservation-categories/reservation-categories.tpl.html":"4HDf","./03-reservation-category/reservation-category.tpl.html":"71HN","./04-date/date.tpl.html":"ypT5","./05-reservation-units/reservation-units.tpl.html":"KdAj","./06-time/simple-reservation-time.tpl.html":"wMt5","./06-time/simple-select-time.tpl.html":"wXwX","./08-purchase/purchase.tpl.html":"pJ+n","./other/complete.tpl.html":"NM/t","./other/confirm.tpl.html":"e+LO","./other/simple-reservation-sign-in.tpl.html":"qQ0/"};function a(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id="o6Dd"},oySO:function(e,t,r){},pAtM:function(e,t,r){"use strict";r.r(t);var n=r("9hLu"),a=r.n(n);r("Glix");angular.module("swiper",[]).value("swiperCount",0).directive("swiper",["$timeout","swiperCount",function(e,t){return{restrict:"E",scope:{images:"<",thumbnail:"<"},link:function(r,n,s){var i;n.addClass("loading"),r.$watch("images",function(){angular.isDefined(r.images)&&angular.isUndefined(i)&&(r.swiperContainer="swiper-"+t++,e(function(){i=new a.a("#"+r.swiperContainer,{pagination:".swiper-pagination",paginationClickable:!0});var e=document.getElementById(r.swiperContainer).getElementsByTagName("img");if(e.length>0){var t=new Image;t.onload=function(){angular.element(document.getElementById(r.swiperContainer)).css("opacity",1),n.removeClass("loading")},t.src=e[0].src}},0,!1))}),r.prev=function(){i.swipePrev()},r.next=function(){i.swipeNext()}},template:'<div class="swiper-thumbnail" ng-if="thumbnail"><img ng-src="{{thumbnail}}"></div><div class="swiper-container" id="{{swiperContainer}}"><div class="swiper-wrapper"><div class="swiper-slide" ng-repeat="image in images"><img ng-src="{{image}}"></div></div><div class="swiper-pagination" ng-show="images.length > 1"></div><div class="swiper-prev" ng-show="images.length > 1" ng-click="prev()"><span class="fa fa-chevron-left"></span></div><div class="swiper-next" ng-show="images.length > 1" ng-click="next()"><span class="fa fa-chevron-right"></span></div></div>'}}])},"pJ+n":function(e,t){e.exports='<div> <h4 class="page-title flex"> <span>{{state.getPageTitle()}}</span> <need-help phone=vm.center.phone></need-help> </h4> <form name=formPurchase id=simpleReservationPurchase novalidate> <ff-board> <div class="ff-grid gutter-v gutter-h"> <ff-panel ng-if=vm.date> <ff-panel-header> <span translate=SIMPLE_RES.PURCHASE.RESERVATION.HEADER></span> </ff-panel-header> <ff-row> <ff-label flex="0 1 100px"><span translate=RESERVATIONS.LOCATION></span></ff-label> <ff-static ff-bind=::vm.center.name name=center></ff-static> </ff-row> <ff-row> <ff-label flex="0 1 100px"><span translate=RESERVATIONS.SPACE></span></ff-label> <ff-static ff-bind=::vm.reservationUnit.name name=reservationUnit></ff-static> </ff-row> <ff-row> <ff-label flex="0 1 100px"><span translate=RESERVATIONS.DATE></span></ff-label> <ff-static ff-bind="::vm.date | date:\'longDate\'" name=date></ff-static> </ff-row> <ff-row> <ff-label flex="0 1 100px"><span translate=RESERVATIONS.TIME></span></ff-label> <ff-static> <span><span nice-time=::vm.timeStart></span> - <span nice-time=::vm.timeEnd></span></span> </ff-static> </ff-row> <ff-row> <ff-label flex="0 1 100px"><span translate=RESERVATIONS.REPEAT_FREQUENCY></span></ff-label> <ff-static><span ng-bind=::vm.repeatFrequency.name></span></ff-static> </ff-row> <ff-row ng-show=::vm.repeatFrequency.repeatDurationOptions> <ff-label flex="0 1 100px"><span translate=RESERVATIONS.REPEAT_DURATION></span></ff-label> <ff-static>{{::vm.repeatFrequency.repeatDurationFilter(vm.repeatDuration)}}</ff-static> </ff-row> </ff-panel> <ff-panel> <ff-panel-header> <span translate=SIMPLE_RES.PURCHASE.ORDER.HEADER translate-values="{ orderId: vm.purchase.orderId }"></span> </ff-panel-header> <dw-invoice invoice=vm.purchase center=vm.center allow-remove=false dw-invoice-payment-processing-fee settings=$resolve.settings credit-cards=$resolve.userProfile.creditCards e-checks=$resolve.userProfile.eChecks></dw-invoice> </ff-panel> <ff-panel style=max-width:450px> <ff-panel-header> <div translate=BILLING_PROFILE.PAGE_TITLE translate-values="{ userName: vm.user.fullName }"></div> <small translate=GLOBAL.REQUIRED_FIELDS_MARKED_WITH></small> </ff-panel-header> <new-billing-profile user=vm.user settings=vm.settings id=newBillingProfile></new-billing-profile> </ff-panel> <ff-col style=max-width:340px> <ff-col class=gutter-v style=margin-top:auto> <reservation-agreement ng-if=wlLinks.reservationAgreementLinkUrl></reservation-agreement> <ff-panel> <label class=ff-row> <ff-checkbox name=emailConfirmation ff-model=vm.emailConfirmation> <span translate=RESERVATIONS.EMAIL_CONFIRMATION></span> </ff-checkbox> </label> </ff-panel> </ff-col> </ff-col> </div> </ff-board> <ff-btn-group class=buttons-bottom> <ff-btn sense=help ff-click=vm.staffHelp()><span translate=GLOBAL.BTN_STAFF_HELP></span></ff-btn> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> <ff-btn sense=next type=submit ff-click=vm.next()><span translate=SIMPLE_RES.BILLING.BTN_PURCHASE></span></ff-btn> </ff-btn-group> </form> </div> '},"qQ0/":function(e,t){e.exports="<dw-sign-in id=signIn show-sign-up=true></dw-sign-in> "},tzPS:function(e,t,r){"use strict";var n=r("IJqC"),a=r.n(n);t.a=angular.module("deskworks.reservationAgreement",["deskworks.helper","deskworks.state"]).directive("reservationAgreement",function(){return{restrict:"E",scope:!0,template:a.a,translations:["reservations"]}})},uUpP:function(e,t,r){},"v/E5":function(e,t,r){"use strict";r.r(t);r("it7j");var n=r("dLOS"),a=r("aIjk"),s=r("tzPS"),i=r("2/1H");t.default=angular.module("deskworks.SimpleReservationPurchaseCtrl",["ngRoute","deskworks.helper","deskworks.StaffHelpCtrl","deskworks.userProfile.service","deskworks.purchase.service","deskworks.reservationService","deskworks.reservationUnit.optsRepeatFrequency",n.a.name,a.a.name,s.a.name,"deskworks.dwInvoicePaymentProcessingFee",i.a.name]).controller("SimpleReservationPurchaseCtrl",["$scope","$filter","$timeout","$q","$route","$translate","dwAlerts","helper","state","reg","settings","center","purchase","userProfile","userProfileService","reservationUnit","purchaseService","reservationService","optsRepeatFrequency",function(e,t,r,n,a,s,i,l,o,f,c,u,p,d,m,g,v,b,h){var E=this;o.setPageTitle(s.instant("SIMPLE_RES.PURCHASE.PAGE_TITLE",{centerName:u.name})),E.reg=f,E.center=u,E.settings=c,E.user=d,E.purchase=p,E.reservationUnit=g,E.date=t("toDate")(a.current.params.date),E.timeStart=t("toDate")(o.getParam("start")),E.timeEnd=t("toDate")(o.getParam("end")),E.reservationNote=o.getParam("note")||"",E.emailConfirmation=!!o.getParam("confirm"),E.repeatFrequency=h[0],o.getParam("freq")&&(E.repeatFrequency=h.find(function(e){return e.id===o.getParam("freq")}),E.repeatFrequency&&E.repeatFrequency.repeatDurationOptions&&o.getParam("duration")-1<E.repeatFrequency.repeatDurationOptions.length&&(E.repeatDuration=+o.getParam("duration"))),E.next=function(){if(!l.pointFirstInvalid("#simpleReservationPurchase")){var t=o.prohibitBack(["SimpleReservationPurchaseCtrl"],s("SIMPLE_RES.BILLING.BACK_ERROR"),e);return m.saveBillingProfile(a.current.params.centerId,E.user).then(function(){var e={from:E.timeStart,to:E.timeEnd,reservationNote:o.getParam("note"),title:E.reservationTitle,centerId:+a.current.params.centerId,reservationUnitId:a.current.params.reservationUnitId,emailConfirmation:!!o.getParam("confirm"),repeatFrequency:o.getParam("freq"),repeatDuration:o.getParam("duration")};return o.getParam("purchasePackageId")&&(e.purchasePackageId=+o.getParam("purchasePackageId")),b.save(a.current.params.centerId,a.current.params.userId,e).catch(function(e){return i.error(e,"Failed to make reservation.")}).then(function(e){var t={centerId:a.current.params.centerId,userId:a.current.params.userId,purchaseId:a.current.params.purchaseId,reservationId:e.id};return v.createPayment(t,{}).then(function(){return o.setParam("accessCode",e.accessCode),o.setPath(o.getPath()+"/complete")}).catch(function(t){return b.delete(a.current.params.centerId,a.current.params.userId,e.id,!1,o.getParam("freq"),o.getParam("duration")),i.error(t,"Failed to make payment.")})})}).catch(t)}},E.back=function(){return o.setPath(o.getPath().replace(/\/purchases\/\d+$/,""))},E.staffHelp=function(){return v.createStaffHelp(E.center.id,a.current.params.userId,a.current.params.purchaseId).catch(function(e){return i.error(e,"Failed to create staff help.")}).then(function(e){return o.setParam("notice",e.notice),o.setPath(o.getPath()+"/staff-help")})}}])},wMt5:function(e,t){e.exports="<h4 class=page-title ng-bind=state.getPageTitle()></h4> <simple-select-time center=$resolve.center cal-data=$resolve.calData reservation-prices=$resolve.reservationPrices></simple-select-time> "},wXwX:function(e,t){e.exports='<form class=sr-time novalidate> <ff-board> <ff-panel class=sr-time-panel> <ff-panel-header>{{$ctrl.date | date:\'longDate\'}}</ff-panel-header> <div class=sr-time-container> <div class=ff-relative> <time-selector class=ff-bmargin date=$ctrl.date time-start=$ctrl.timeStart time-end=$ctrl.timeEnd reservations=$ctrl.reservationUnit.reservations availabilities=$ctrl.reservationUnit.availabilities> </time-selector> <ff-info ng-if="!$ctrl.reservationUnit.availabilities.length && $ctrl.reservationUnit.whoCanReserve === \'staffOnly\'" class=staff-only translate=RESERVATIONS.STAFF_ONLY translate-values="{ centerName: $ctrl.center.name, centerPhone: $ctrl.center.phone, centerEmail: $ctrl.center.email }"> </ff-info> </div> <ff-textarea name=reservationNote ff-maxlength=250 ff-model=$ctrl.reservationNote rowspan=2 placeholder="{{\'RESERVATIONS.NOTES\' | translate}}"></ff-textarea> <label class=sr-time-email> <ff-checkbox name=emailConfirmation ff-model=$ctrl.emailConfirmation> <span translate=RESERVATIONS.EMAIL_CONFIRMATION></span> </ff-checkbox> </label> <div class="ff-grid ff-gutter-h"> <label class=ff-row flex="1 1 auto"> <ff-label flex="0 1 64px"> <span translate=RESERVATIONS.REPEAT_FREQUENCY></span> </ff-label> <ff-select name=repeatFrequency ff-model=$ctrl.repeatFrequency ff-options="opt.name for opt in $ctrl.optsRepeatFrequency" ff-change="$ctrl.repeatDuration = $ctrl.repeatFrequency.repeatDurationOptions[0]"></ff-select> </label> <label class=ff-row ng-if=$ctrl.repeatFrequency.repeatDurationOptions flex="{md: \'0 1 200px\'}"> <ff-label flex="0 1 86px"> <span translate=RESERVATIONS.REPEAT_DURATION></span> </ff-label> <ff-select name=repeatDuration flex="0 1 50px" ff-model=$ctrl.repeatDuration ff-options="opt for opt in $ctrl.repeatFrequency.repeatDurationOptions"></ff-select> <ff-label>{{$ctrl.repeatFrequency.repeatDurationFilter($ctrl.repeatDuration, true)}}</ff-label> </label> </div> </div> </ff-panel> </ff-board> <ff-btn-group class=buttons-bottom> <ff-btn sense=back ff-click=$ctrl.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> <ff-btn sense=next type=submit ff-disabled="!$ctrl.timeStart || !$ctrl.timeEnd || !$ctrl.reservationUnit.availabilities.length && $ctrl.reservationUnit.whoCanReserve === \'staffOnly\'" ff-click=$ctrl.next()> <span translate=GLOBAL.BTN_NEXT></span> </ff-btn> </ff-btn-group> </form> '},x3lI:function(e,t,r){},ypT5:function(e,t){e.exports="<div class=sr-date> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <ff-board> <ff-panel class=sr-date-panel> <ff-datepicker ff-model=vm.selectedDate date-min=vm.dateMin date-disabled=vm.checkDateDisabled($date)></ff-datepicker> </ff-panel> </ff-board> <ff-btn-group class=buttons-bottom> <ff-btn sense=back ff-click=vm.back()> <span translate=GLOBAL.BTN_BACK></span> </ff-btn> <ff-btn sense=next type=submit ff-disabled=!vm.selectedDate ff-click=vm.next()> <span translate=GLOBAL.BTN_NEXT></span> </ff-btn> </ff-btn-group> </div> "},zT5p:function(e,t,r){"use strict";r.r(t);r("DbwS"),r("t91x");t.default=angular.module("deskworks.SimpleReservationUserProfileCtrl",["ngRoute","deskworks.userProfile.service","deskworks.center.service","deskworks.routeHelper","deskworks.helper","deskworks.ReservationCost"]).controller("SimpleReservationUserProfileCtrl",["$scope","$filter","$timeout","$q","$route","$translate","dwAlerts","helper","state","userProfile","reg","userProfileService","centerService","purchaseService","ReservationCost",function(e,t,r,n,a,s,i,l,o,f,c,u,p,d,m){var g=this;g.reg=c,g.userProfile=f,g.schema=f.schema,o.setPageTitle(s.instant(g.reg.new?"USER_PROFILE.NEW_USER.PAGE_TITLE":"USER_PROFILE.PAGE_TITLE",{userName:g.userProfile.fullName})),u.bindTestUserGenerator(e,g.userProfile,g.reg),g.next=function(){if(!l.pointFirstInvalid("#userProfile")){t("toDate")(o.getParam("start")),t("toDate")(o.getParam("end"));return(g.reg.new?u.registerNewUser(0,g.userProfile):n.when()).then(function(){if(g.reg.new)return o.login(g.userProfile.login,g.userProfile.password).catch(function(e){return i.error(e,"Failed to login under created user.")})}).then(function(){return m.calcAsync(a.current.params.centerId,g.userProfile.id,a.current.params.reservationUnitId,o.getParam("start"),o.getParam("end"))}).then(function(e){if(!e)return o.setPath(o.getPath()+"/confirm").then(function(){return n.reject()})}).then(function(){var e=a.current.params.centerId,t=g.userProfile.id,r={reservationUnitId:a.current.params.reservationUnitId,reservationFrom:o.getParam("start"),reservationTo:o.getParam("end"),reservationRepeatFrequency:o.getParam("freq"),reservationRepeatDuration:o.getParam("duration")};return d.createPurchaseForReservation(e,t,r).catch(function(e){return i.error(e,"Failed to create purchase for reservation.")}).finally(function(){g.reg.new&&(o.replace(),a.updateParams({userId:g.userProfile.id}))})}).then(function(e){return r(function(){return e.purchasePackageId&&o.setParam("purchasePackageId",e.purchasePackageId),o.setPath(o.getPath()+"/purchases/"+e.id)})}).catch(angular.noop)}}}])}}]);