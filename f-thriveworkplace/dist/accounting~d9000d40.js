(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"9LrB":function(e,n,f){"use strict";f.r(n),n.default=angular.module("deskworks.AccountingBulkInvoicingCtrl",["deskworks.accounting.bulkInvoicing.service"]).controller("AccountingBulkInvoicingCtrl",["$scope","$route","$translate","dwAlerts","state","helper","invoices","bulkInvoicingService",function(e,n,f,s,i,l,c,t){var a=this;i.setPageTitle(f.instant("BULK_INVOICING.PAGE_TITLE")),a.invoices=c,a.invoices.forEach(function(e){e.collapsed=!0,angular.isArray(e.items)&&e.items.forEach(function(e){e.description=[e.name||"",e.description||""].join(" ")})}),a.sendInvoices=function(){var e={invoices:[]};return a.invoices.forEach(function(n){n.include&&e.invoices.push(n.id)}),e.invoices.length?t.sendEmails(i.getCurrentCenterId(),e).catch(function(e){return s.error(e,"Failed to send invoices.")}).then(function(){s.info(f.instant("BULK_INVOICING.SUCCESS")),n.reload()}):s.error(f.instant("BULK_INVOICING.NOTHING_SELECTED"))}}])},DzHV:function(e,n,f){"use strict";f.r(n),n.default=angular.module("deskworks.AccountingBulkChargesCtrl",["deskworks.accounting.bulkInvoicing.service"]).controller("AccountingBulkChargesCtrl",["$scope","$route","$translate","dwAlerts","state","helper","invoices","bulkInvoicingService",function(e,n,f,s,i,l,c,t){var a=this;i.setPageTitle(f.instant("BULK_CHARGES.PAGE_TITLE")),a.invoices=c,a.invoices.forEach(function(e){e.collapsed=!0}),a.chargeCards=function(){var e={invoices:[]};return a.invoices.forEach(function(n){n.include&&e.invoices.push(n.id)}),e.invoices.length?t.billPurchases(i.getCurrentCenterId(),e).catch(function(e){return s.error(e,"Failed to charge credit cards.")}).then(function(){s.info(f.instant("BULK_CHARGES.SUCCESS")),n.reload()}):s.error(f.instant("BULK_CHARGES.NOTHING_SELECTED"))}}])},KB4M:function(e,n,f){var s={"./bulk-charges/bulk-charges.controller.js":"DzHV","./bulk-invoicing/bulk-invoicing.controller.js":"9LrB"};function i(e){var n=l(e);return f(n)}function l(e){if(!f.o(s,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=l,e.exports=i,i.id="KB4M"},TO6M:function(e,n){e.exports='<div class=bulk-invoicing ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-panel> <ff-panel-header><span translate=BULK_INVOICING.HEADER></span></ff-panel-header> <span ng-if=!vm.invoices.length><span translate=GLOBAL.NONE></span></span> <ff-row ng-if="ffBlock.editMode && vm.invoices.length > 0"> <label flex=none><ff-include-all flex="0 0 30px" items=vm.invoices></ff-include-all></label> </ff-row> <ff-header ng-show="vm.invoices.length > 0"> <ff-row> <span flex="0 0 30px" class=ff-center title="{{\'GLOBAL.INCLUDE\' | translate}}" ng-if=ffBlock.editMode><ff-icon sense=check></ff-icon></span> <cell flex="1 1 150px"><span translate=BULK_INVOICING.COMPANY></span></cell> <cell flex="1 1 150px"><span translate=BULK_INVOICING.USER></span></cell> <cell flex="1 0 60px" class="ff-center show-sm"><span translate=BULK_INVOICING.ORDER_ID></span></cell> <cell flex="3 0 45px" class="ff-center show-sm"><span translate=BULK_INVOICING.DATE></span></cell> <cell flex="1 2 300px" class=show-md><span translate=BULK_INVOICING.COMMENTS></span></cell> <cell flex="1 0 94px" class=ff-right><span translate=BULK_INVOICING.BALANCE></span></cell> <ff-btn flex=none sense=collapse size=xs class="buttons-row zero-height"></ff-btn> </ff-row> </ff-header> <ff-col ng-repeat="invoice in ::vm.invoices"> <ff-row class=invoice-head ng-class="{ active: !invoice.collapsed }" ff-click="invoice.collapsed = !invoice.collapsed"> <ff-checkbox flex="0 0 30px" class=ff-center ff-model=invoice.include ng-if=ffBlock.editMode></ff-checkbox> <ff-static flex="1 1 150px" ff-bind=::invoice.userCompany></ff-static> <ff-static flex="1 1 150px" ff-bind=::invoice.userName></ff-static> <ff-static flex="1 0 60px" class="ff-center show-sm" ff-bind=::invoice.orderId></ff-static> <ff-static flex="3 0 45px" class="ff-center show-sm" ff-bind="::invoice.date | date:\'mediumDate\'"></ff-static> <ff-static flex="1 2 300px" class=show-md ff-bind=::invoice.comments></ff-static> <ff-static flex="1 0 94px" class=ff-right ff-bind="::invoice.balance | ncurrency"></ff-static> <ff-btn flex=none sense=collapse size=xs class=buttons-row title="{{\'GLOBAL.BTN_VIEW\' | translate}}" ff-click="invoice.collapsed = !invoice.collapsed" ng-class="{ collapsed: invoice.collapsed }"></ff-btn> </ff-row> <ff-row ng-collapse=invoice.collapsed> <span flex="0 0 30px" class=invisible></span> <dw-invoice-small invoice=invoice></dw-invoice-small> <ff-btn sense=collapse size=xs flex=none class="buttons-row zero-height"></ff-btn> </ff-row> </ff-col> </ff-panel> <ff-btn-group> <ff-btn sense=save ff-click=vm.sendInvoices()><span translate=BULK_INVOICING.BTN_SEND></span></ff-btn> </ff-btn-group> </div> </div> '},fjnr:function(e,n,f){"use strict";f.r(n);f("t91x");var s=["$injector",function(e){var n,s=(n=f("KB4M")).keys().map(n);e.loadNewModules(s.map(function(e){return e.default.name})),e.invoke(["$templateCache",function(e){var n=f("ggrf");n.keys().forEach(function(f){return e.put(f.replace(/^\.\//,""),n(f))})}])}];n.default=s},ggrf:function(e,n,f){var s={"./bulk-charges/bulk-charges.tpl.html":"veCJ","./bulk-invoicing/bulk-invoicing.tpl.html":"TO6M"};function i(e){var n=l(e);return f(n)}function l(e){if(!f.o(s,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=l,e.exports=i,i.id="ggrf"},veCJ:function(e,n){e.exports='<div class=bulk-invoicing ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-panel> <ff-panel-header><span translate=BULK_CHARGES.HEADER></span></ff-panel-header> <span ng-if=!vm.invoices.length><span translate=GLOBAL.NONE></span></span> <ff-row ng-if="ffBlock.editMode && vm.invoices.length > 0"> <label flex=none><ff-include-all flex="0 0 30px" items=vm.invoices></ff-include-all></label> </ff-row> <ff-header ng-show="vm.invoices.length > 0"> <ff-row> <span flex="0 0 30px" class=ff-center title="{{\'GLOBAL.INCLUDE\' | translate}}" ng-if=ffBlock.editMode><ff-icon sense=check></ff-icon></span> <cell flex="1 1 150px"><span translate=BULK_CHARGES.COMPANY></span></cell> <cell flex="1 1 150px"><span translate=BULK_CHARGES.USER></span></cell> <cell flex="1 0 60px" class=ff-center><span translate=BULK_CHARGES.ORDER_ID></span></cell> <cell flex="3 0 45px" class=ff-center><span translate=BULK_CHARGES.DATE></span></cell> <cell flex="1 2 300px"><span translate=BULK_CHARGES.COMMENTS></span></cell> <cell flex="1 0 94px" class=ff-right><span translate=BULK_CHARGES.TOTAL></span></cell> <ff-btn flex=none sense=collapse size=xs class="buttons-row zero-height"></ff-btn> </ff-row> </ff-header> <ff-col ng-repeat="invoice in ::vm.invoices"> <ff-row class=invoice-head ng-class="{ active: !invoice.collapsed }" ff-click="invoice.collapsed = !invoice.collapsed"> <ff-checkbox flex="0 0 30px" class=ff-center ff-model=invoice.include ng-if=ffBlock.editMode></ff-checkbox> <ff-static flex="1 1 150px" ff-bind=::invoice.userCompany></ff-static> <ff-static flex="1 1 150px" ff-bind=::invoice.userName></ff-static> <ff-static flex="1 0 60px" class=ff-center ff-bind=::invoice.orderId></ff-static> <ff-static flex="3 0 45px" class=ff-center ff-bind="::invoice.date | date:\'mediumDate\'"></ff-static> <ff-static flex="1 2 300px" ff-bind=::invoice.comments class=ff-small></ff-static> <ff-static flex="1 0 94px" class=ff-right ff-bind="::invoice.total | ncurrency"></ff-static> <ff-btn-group flex="0 0 auto"> <ff-btn sense=collapse size=xs class=buttons-row title="{{\'GLOBAL.BTN_VIEW\' | translate}}" ff-click="invoice.collapsed = !invoice.collapsed" ng-class="{ collapsed: invoice.collapsed }"></ff-btn> </ff-btn-group> </ff-row> <ff-row ng-collapse=invoice.collapsed> <ff-label flex="0 0 30px" class=invisible></ff-label> <dw-invoice-small invoice=invoice></dw-invoice-small> <ff-btn-group flex="0 0 auto" class=invisible> <ff-btn sense=collapse size=xs> <span translate=GLOBAL.BTN_VIEW></span> </ff-btn> </ff-btn-group> </ff-row> </ff-col> </ff-panel> <ff-btn-group> <ff-btn sense=save ff-click=vm.chargeCards()><span translate=BULK_CHARGES.BTN_CHARGE></span></ff-btn> </ff-btn-group> </div> </div> '}}]);