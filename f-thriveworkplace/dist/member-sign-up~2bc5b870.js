(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"/pDC":function(e,t){e.exports='<div id=memberSignUpPurchase> <h4 class="page-title flex"> <span>{{state.getPageTitle()}}</span> <need-help phone=vm.center.phone></need-help> </h4> <ff-board> <div class="ff-grid gutter-v gutter-h"> <ff-panel> <ff-panel-header> <span translate=GLOBAL.STEP_X_OF_Y translate-values=vm.reg></span> </ff-panel-header> <div class=em>Order Id: {{vm.purchase.orderId}}</div> <dw-invoice invoice=vm.purchase center=vm.center update-invoice=vm.updateInvoice() dw-invoice-payment-processing-fee settings=$resolve.settings credit-cards=$resolve.userProfile.creditCards e-checks=$resolve.userProfile.eChecks></dw-invoice> </ff-panel> <ff-panel style=max-width:450px> <ff-panel-header> <div translate=BILLING_PROFILE.PAGE_TITLE translate-values="{ userName: vm.user.fullName }"></div> <small translate=GLOBAL.REQUIRED_FIELDS_MARKED_WITH></small> </ff-panel-header> <new-billing-profile user=vm.user settings=vm.settings id=newBillingProfile></new-billing-profile> </ff-panel> </div> </ff-board> <ff-board> <dw-add-charges purchase=vm.purchase update-invoice=vm.updateInvoice()></dw-add-charges> </ff-board> <ff-btn-group class=buttons-bottom> <ff-btn sense=help ff-click=vm.staffHelp()><span translate=GLOBAL.BTN_STAFF_HELP></span></ff-btn> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> <ff-btn sense=next type=submit ff-click=vm.next()><span translate=SIMPLE_RES.BILLING.BTN_PURCHASE></span></ff-btn> </ff-btn-group> </div> '},"0V8K":function(e,t){e.exports='<form name=vm.form id=memberSignUpMembership> <h4 class="page-title flex"> <span>{{state.getPageTitle()}} - <small translate=MEMBER_SIGN_UP.MEMBERSHIP.THANKS></small></span> <need-help phone=vm.center.phone></need-help> </h4> <ff-board class=ff-no-frame> <div class="ff-grid ff-gutter-v ff-gutter-h"> <ff-panel ng-hide="state.getParam(\'origin\') || state.getParam(\'redirect\')" flex="{md: \'0 0 50%\'}"> <ff-panel-header> <span translate=GLOBAL.STEP_X_OF_Y translate-values=vm.reg></span> </ff-panel-header> <label class=ff-row> <ff-label flex="1 0 124px" class=em> <span translate=MEMBER_SIGN_UP.MEMBERSHIP.CENTER.HEADER></span> </ff-label> <ff-select flex="1 1 70%" ff-model=vm.center ff-options="center.name for center in vm.centers" name=center ff-required=true ff-validate-alert="{{\'MEMBER_SIGN_UP.MEMBERSHIP.CENTER.CENTER\' | translate}}" ff-change=vm.loadMembershipCategories()></ff-select> </label> </ff-panel> <div flex="{md: \'0 0 50%\'}" class=no-margin></div> <ff-panel ng-show=vm.center flex="{md: \'0 0 50%\'}" ng-if=!vm.settings.skipPlanMemberSignUp> <ff-panel-header><span translate=MEMBER_SIGN_UP.MEMBERSHIP.CATEGORY.HEADER></span></ff-panel-header> <ff-col ff-dim=vm.updating> <ff-info ng-if=!vm.membershipCategories.length translate=MEMBER_SIGN_UP.MEMBERSHIP.CATEGORY.EMPTY></ff-info> <label ng-repeat="cat in vm.membershipCategories"> <ff-label class=ff-reduce-height> <ff-radio flex="0 0 26px" ff-model=vm.membershipCategory ff-value=cat name=membershipCategory ff-required=true ff-validate-alert="{{\'MEMBER_SIGN_UP.MEMBERSHIP.CATEGORY.MEMB_CATEGORY\' | translate}}" ff-change=vm.membershipCategoryChange()></ff-radio> {{cat.name}} </ff-label> </label> </ff-col> </ff-panel> <ff-panel ng-show=vm.center flex="{md: \'0 0 50%\'}" ng-if="!vm.settings.skipPlanMemberSignUp && vm.membershipCategories.length"> <ff-panel-header><span translate=MEMBER_SIGN_UP.MEMBERSHIP.CATEGORY.DESCRIPTION></span></ff-panel-header> <ff-col ff-dim=vm.updating> <ff-static class=pre-description> <span translate=MEMBER_SIGN_UP.MEMBERSHIP.CATEGORY.HINT ng-if=!vm.membershipCategory></span> <span translate=MEMBER_SIGN_UP.MEMBERSHIP.CATEGORY.NO_DESCRIPTION ng-if="vm.membershipCategory && !vm.membershipCategory.note"></span> <span ng-bind=vm.membershipCategory.note ng-if="vm.membershipCategory && vm.membershipCategory.note"></span> </ff-static> </ff-col> </ff-panel> <ff-panel ng-show="vm.membershipCategory.products.length > 0" flex="{md: \'0 0 50%\'}" ng-if=!vm.settings.skipPlanMemberSignUp> <ff-panel-header><span translate=MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.HEADER></span></ff-panel-header> <ff-col ff-dim=vm.updating> <label class=ff-row> <ff-label flex="0 0 100px" class=em> <span translate=MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.SELECT_PLAN></span> </ff-label> <ff-select ff-model=vm.membershipProduct ff-options="product.name for product in vm.membershipCategory.products" ff-required="vm.membershipCategory.products.length > 0" name=plan ff-validate-alert="{{\'MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.PLAN\' | translate}}"></ff-select> </label> <label class=ff-row> <ff-label flex="0 0 100px" class=em> <span translate=MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.PRICE></span> </ff-label> <ff-static ff-bind="vm.membershipProduct.price | nd | ncurrency" name=price></ff-static> </label> <label class=ff-row> <ff-label flex="0 0 100px" class=em> <span translate=MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.START_DATE></span> </ff-label> <ff-date ff-model=vm.membershipStartDate name=membershipStartDate ff-validate-alert="{{\'MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.START_DATE\' | translate}}"></ff-date> </label> </ff-col> </ff-panel> <ff-panel flex="{md: \'0 0 50%\'}" ng-if="!vm.settings.skipPlanMemberSignUp && vm.membershipProduct && vm.membershipProduct.description"> <ff-panel-header><span translate=MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.DESCRIPTION></span></ff-panel-header> <ff-col ff-dim=vm.updating> <ff-static class=pre-description>{{vm.membershipProduct.description}}</ff-static> </ff-col> </ff-panel> </div> </ff-board> <ff-btn-group class=buttons-bottom> <ff-btn sense=next type=submit ff-click=vm.next()><span translate=MEMBER_SIGN_UP.MEMBERSHIP.BTN_PROCEED></span></ff-btn> </ff-btn-group> </form> '},"0k4W":function(e,t,r){"use strict";r.r(t);r("DbwS"),r("t91x");t.default=angular.module("deskworks.MemberSignUpNoPlanCompleteCtrl",[]).controller("MemberSignUpNoPlanCompleteCtrl",["$scope","$q","$timeout","$translate","state","helper","deskworksConfig",function(e,t,r,n,s,a,i){s.setPageTitle(n.instant("MEMBER_SIGN_UP.COMPLETE.PAGE_TITLE")),this.home=function(){var e=s.getParam("origin"),n=s.getCurrentCenterId();return(e?s.logout():t.when()).finally(function(){s.resetParams(),s.setPath(e||i.getDefaultRoute()),e&&s.setCurrentCenterId(n)}),r(1e4)}}])},"4lIQ":function(e,t,r){"use strict";r.r(t);var n=r("dLOS"),s=r("aIjk");t.default=angular.module("deskworks.MemberSignUpPurchaseCtrl",["ngRoute","deskworks.helper","deskworks.dwAddCharges","deskworks.userProfile.service","deskworks.purchase.service","deskworks.StaffHelpCtrl",n.a.name,s.a.name,"deskworks.dwInvoicePaymentProcessingFee"]).controller("MemberSignUpPurchaseCtrl",["$scope","$route","$translate","$timeout","$window","dwAlerts","helper","state","session","reg","center","settings","purchase","purchaseService","userProfileService","userProfile",function(e,t,r,n,s,a,i,l,f,o,c,p,u,m,d,g){var h=this;l.setPageTitle(r.instant("MEMBER_SIGN_UP.PURCHASE.PAGE_TITLE",{centerName:c.name})),h.reg=o,h.center=c,h.settings=p,h.user=g,h.purchase=u,h.next=function(){if(!i.pointFirstInvalid("#memberSignUpPurchase")){var r=l.prohibitBack(["MemberSignUpPurchaseCtrl"],"Please wait until payment gets completed.",e);return d.saveBillingProfile(l.getCurrentCenterId(),h.user).then(function(){return m.createPayment(l.getCurrentCenterId(),t.current.params.userId,t.current.params.purchaseId,{},!0,l.getParam("productId"),l.getParam("membershipStartDate")).catch(function(e){return a.error(e,"Failed to make payment.")}).then(function(){return l.getParam("redirect")?(s.location.href=l.getParam("redirect")+"&login="+h.user.login,n(15e3)):(d.resetCache(),d.get(l.getCurrentCenterId(),t.current.params.userId).catch(function(e){return a.error(e,"Failed to get user profile.")}).then(function(t){return f.user.role=t.role,e.$emit("LOGIN"),l.setPath(l.getPath()+"/complete")}))})}).catch(r)}},h.back=l.back,h.staffHelp=function(){return m.createStaffHelp(h.center.id,t.current.params.userId,t.current.params.purchaseId,!0,l.getParam("productId")).catch(function(e){return a.error(e,"Failed to create staff help.")}).then(function(r){return d.resetCache(),d.get(l.getCurrentCenterId(),t.current.params.userId).catch(function(e){return a.error(e,"Failed to get user profile.")}).then(function(t){return f.user.role=t.role,e.$emit("LOGIN"),l.setParam("notice",r.notice),l.setPath(l.getPath()+"/staff-help")})})},h.updateInvoice=function(){return m.get(l.getCurrentCenterId(),l.getCurrentUserId(),h.purchase.id).catch(function(e){return a.error(e,"Failed to update invoice.")}).then(function(e){h.purchase=e})}}])},"5nZu":function(e,t,r){"use strict";r("DbwS"),r("t91x"),angular.module("deskworks.StaffHelpCtrl",["ngRoute","deskworks.helper","deskworks.config"]).controller("StaffHelpCtrl",["$scope","$timeout","$q","$route","$window","$translate","dwAlerts","helper","state","deskworksConfig",function(e,t,r,n,s,a,i,l,f,o){this.notice=f.getParam("notice"),f.setPageTitle(a.instant("SIMPLE_RES.STAFF_HELP.PAGE_TITLE")),e.$on("$routeChangeStart",function(e,t,r){!t.$$route||"MemberSignUpBillingCtrl"!==t.$$route.controller&&"MemberSignUpPurchaseCtrl"!==t.$$route.controller&&"SimpleReservationBillingCtrl"!==t.$$route.controller&&"SimpleReservationPurchaseCtrl"!==t.$$route.controller&&"BuyPassBillingCtrl"!==t.$$route.controller&&"BuyPassPurchaseCtrl"!==t.$$route.controller||(i.error(a.instant("SIMPLE_RES.STAFF_HELP.BACK_ERROR")),e.preventDefault())}),this.home=function(){if(f.getParam("redirect"))s.location.href=f.getParam("redirect");else{var e=f.getParam("origin"),n=f.getCurrentCenterId();(e?f.logout():r.when()).finally(function(){return f.resetParams(),e&&f.setCurrentCenterId(n),f.setPath(e||o.getDefaultRoute())})}return t(1e4)}}])},"5vmx":function(e,t,r){"use strict";r.r(t);r("it7j");t.default=angular.module("deskworks.MemberSignUpNoPlanBillingCtrl",["ngRoute","deskworks.userProfile.service","deskworks.routeHelper","deskworks.helper","needHelp","deskworks.StaffHelpCtrl"]).controller("MemberSignUpNoPlanBillingCtrl",["$scope","$translate","helper","state","userProfile","reg","settings","userProfileService",function(e,t,r,n,s,a,i,l){var f=this;if(f.userProfile=s,f.reg=a,f.settings=i,n.setPageTitle(t.instant("BILLING_PROFILE.PAGE_TITLE",{userName:r.join([f.userProfile.firstName,f.userProfile.lastName]," ")})),i.creditCardTypes=i.creditCardTypes.filter(function(e){return e.enable}),f.userProfile.creditCards.forEach(function(e){e.type=r.find(i.creditCardTypes,e.type)||e.type||{}}),f.userProfile.creditCards=f.userProfile.creditCards||[],!f.userProfile.creditCards.length){var o=l.creditCard.new(f.userProfile);o.type=i.creditCardTypes[0],f.userProfile.creditCards.push(o)}l.bindTestBillingGenerator(e,f.userProfile,f.reg),f.complete=function(){if(!r.pointFirstInvalid("#newBillingProfile"))return l.saveBillingProfile(0,f.userProfile).then(function(){return n.setPath(n.getPath()+"/complete")})},f.back=n.back}])},"7gqy":function(e,t,r){var n={"./steps/01-landing.controller.js":"Gfdi","./steps/01-membership.controller.js":"b7+Z","./steps/02-profile.controller.js":"Rqj+","./steps/03-purchase.controller.js":"4lIQ","./steps/04-complete.controller.js":"h9bl","./steps/no-plan-billing.controller.js":"5vmx","./steps/no-plan-complete.controller.js":"0k4W"};function s(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=a,e.exports=s,s.id="7gqy"},"9QnR":function(e,t){e.exports='<div id=newBillingProfile> <h4 class="page-title flex"> <span>{{state.getPageTitle()}}</span> <need-help phone="$resolve.center.phone || vm.reg.phone"></need-help> </h4> <ff-board> <ff-panel style=max-width:450px> <ff-panel-header> <span translate=GLOBAL.STEP_X_OF_Y translate-values=vm.reg ng-if=vm.reg.stepCount></span> <span ng-if=vm.reg.stepCount>&nbsp;</span> <small translate=GLOBAL.REQUIRED_FIELDS_MARKED_WITH></small> </ff-panel-header> <div class="ff-grid gutter-v"> <up-credit-cards user-profile=vm.userProfile reg=vm.reg settings=vm.settings single=true ng-if=vm.userProfile.creditCards.length></up-credit-cards> <up-e-checks user-profile=vm.userProfile reg=vm.reg single=true ng-if="vm.settings.enableEChecks && vm.userProfile.eChecks.length"></up-e-checks> <ff-btn-group ng-if=vm.showSwitchButton()> <ff-btn sense=add size=sm ng-if=vm.userProfile.eChecks.length ff-click=vm.addCC()> <span translate=BILLING_PROFILE.CREDIT_CARDS.BTN_ADD></span> </ff-btn> <ff-btn sense=add size=sm ng-if=vm.userProfile.creditCards.length ff-click=vm.addECheck()> <span translate=BILLING_PROFILE.E_CHECKS.BTN_ADD></span> </ff-btn> </ff-btn-group> </div> </ff-panel> </ff-board> <ff-btn-group class=buttons-bottom> <ff-btn sense=help ff-click=vm.staffHelp() ng-if=vm.staffHelp><span translate=GLOBAL.BTN_STAFF_HELP></span></ff-btn> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> <ff-btn sense=next ff-click=vm.next() ng-if=vm.next><span translate=SIMPLE_RES.BILLING.BTN_PURCHASE></span></ff-btn> <ff-btn sense=next ff-click=vm.complete() ng-if=vm.complete><span translate=MEMBER_SIGN_UP.BILLING.BTN_COMPLETE></span></ff-btn> </ff-btn-group> </div> '},Gfdi:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.MemberSignUpLandingCtrl",["ngRoute","deskworks.helper","needHelp"]).controller("MemberSignUpLandingCtrl",["$scope","$translate","$filter","dwAlerts","state","helper","center","product",function(e,t,r,n,s,a,i,l){var f=this;f.center=i,f.product=l,f.membershipStartDate=s.getParam("membershipStartDate"),f.membershipStartDate=f.membershipStartDate?r("toDate")(f.membershipStartDate):moment(),s.setPageTitle(t.instant("MEMBER_SIGN_UP.LANDING.PAGE_TITLE",{centerName:f.center.name})),f.next=function(){return s.setParam("membershipStartDate",r("date")(f.membershipStartDate,"yyyy-MM-dd")),s.setPath("/member-sign-up/"+(s.getCurrentUserId()||"new"))}}])},HKBC:function(e,t,r){"use strict";r.r(t);r("t91x"),r("aIjk"),r("5nZu");var n=r("l7sz"),s=r.n(n),a=r("aE5K"),i=r.n(a),l=r("9QnR"),f=r.n(l),o=["$injector",function(e){var t,n=(t=r("7gqy")).keys().map(t);e.loadNewModules(n.map(function(e){return e.default.name})),e.invoke(["$templateCache",function(e){var t=r("epFx");t.keys().forEach(function(r){return e.put(r.replace(/^\.\//,""),t(r))}),e.put("staff-help/staff-help.tpl.html",s.a),e.put("templates/new-user-profile.tpl.html",i.a),e.put("templates/new-billing-profile.tpl.html",f.a)}])}];t.default=o},QEpw:function(e,t){e.exports='<div class="ff-grid gutter-v"> <up-credit-cards user-profile=$ctrl.user settings=$ctrl.settings single=true ng-if=$ctrl.user.creditCards.length></up-credit-cards> <up-e-checks user-profile=$ctrl.user single=true ng-if="$ctrl.settings.enableEChecks && $ctrl.user.eChecks.length"></up-e-checks> <ff-btn-group ng-if=$ctrl.showSwitchButton()> <ff-btn sense=add size=sm ng-if=$ctrl.user.eChecks.length ff-click=$ctrl.addCC()> <span translate=BILLING_PROFILE.CREDIT_CARDS.BTN_ADD></span> </ff-btn> <ff-btn sense=add size=sm ng-if=$ctrl.user.creditCards.length ff-click=$ctrl.addECheck()> <span translate=BILLING_PROFILE.E_CHECKS.BTN_ADD></span> </ff-btn> </ff-btn-group> </div> '},"Rqj+":function(e,t,r){"use strict";r.r(t);r("aIjk");t.default=angular.module("deskworks.MemberSignUpProfileCtrl",["ngRoute","deskworks.routeHelper","deskworks.helper","deskworks.userProfile.service","deskworks.userProfile.optsMembershipStatus","needHelp"]).controller("MemberSignUpProfileCtrl",["$scope","$timeout","$q","$translate","dwAlerts","helper","state","userProfile","reg","userProfileService","purchaseService","settings","optsMembershipStatus",function(e,t,r,n,s,a,i,l,f,o,c,p,u){var m=this;m.reg=f,m.schema=l.schema,m.userProfile=l,m.settings=p,i.getParam("productId")||(m.reg.stepCount-=1,m.userProfile.membershipStatus=u[0]),i.setPageTitle(n.instant(m.reg.new?"USER_PROFILE.NEW_MEMBER.PAGE_TITLE":"USER_PROFILE.PAGE_TITLE",{userName:m.userProfile.fullName})),o.bindTestUserGenerator(e,m.userProfile,m.reg),m.next=function(){if(!a.pointFirstInvalid("#userProfile"))return r.when().then(function(){if(m.reg.new)return o.registerNewUser(i.getCurrentCenterId(),m.userProfile,!0)}).then(function(){if(m.reg.new)return i.login(m.userProfile.login,m.userProfile.password).catch(function(e){return s.error(e,"Failed to login under created user.")})}).then(function(){if(m.reg.new)return i.replace(),i.setPath(i.getPath().replace(/\/new/,"/"+m.userProfile.id)),t()}).then(function(){if(i.getParam("productId"))return c.createPurchase(i.getCurrentCenterId(),m.userProfile.id,!0,i.getParam("productId"),null,i.getParam("membershipStartDate")).catch(function(e){return s.error(e,"Failed to create purchase.")})}).then(function(e){return i.getParam("productId")?i.setPath(i.getPath()+"/purchases/"+e.id):i.setPath(i.getPath()+"/billing")})},m.back=i.back}])},aE5K:function(e,t){e.exports='<div class=user-profile id=userProfile> <h4 class="page-title flex"> <span> {{state.getPageTitle()}} <span ng-if="vm.reg.member && !vm.reg.selfRegistration" ng-style="{ color: vm.center.color }">{{vm.center.name}}</span> </span> <need-help phone=vm.reg.phone></need-help> </h4> <ff-board> <ff-panel> <ff-panel-header ng-if=vm.reg> <span translate=GLOBAL.STEP_X_OF_Y translate-values=vm.reg ng-if=vm.reg.stepCount></span> <small translate=GLOBAL.REQUIRED_FIELDS_MARKED_WITH></small> </ff-panel-header> <div class="ff-grid ff-gutter-v ff-gutter-h"> <up-personal-info user=vm.userProfile schema=vm.schema reg=vm.reg></up-personal-info> <up-addresses flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg center=vm.center single=true></up-addresses> <div flex="{md: \'0 0 50%\'}"> <div class="ff-grid ff-gutter-v"> <up-login-info user=vm.userProfile schema=vm.schema reg=vm.reg member-directory-url=wlLinks.memberDirectoryUrl></up-login-info> <up-phones user=vm.userProfile schema=vm.schema reg=vm.reg single=true></up-phones> </div> </div> <up-photo flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg></up-photo> <div flex="{md: \'0 0 50%\'}"> <div class="ff-grid ff-gutter-v"> <up-lead-source user=vm.userProfile schema=vm.schema reg=vm.reg></up-lead-source> <up-terms-of-service user=vm.userProfile schema=vm.schema reg=vm.reg></up-terms-of-service> </div> </div> </div> </ff-panel> </ff-board> <ff-btn-group class=buttons-bottom ng-if=vm.reg> <ff-btn sense=back ff-click=vm.back() ng-if=vm.back><span translate=GLOBAL.BTN_BACK></span></ff-btn> <ff-btn sense=next ff-click=vm.next()><span translate=GLOBAL.BTN_NEXT></span></ff-btn> </ff-btn-group> </div> '},aIjk:function(e,t,r){"use strict";t.a=angular.module("needHelp",[]).directive("needHelp",function(){return{restrict:"E",scope:!0,controller:function(){},controllerAs:"$ctrl",template:'<span translate="GLOBAL.NEED_HELP" class="need-help" ng-if="$ctrl.phone" '+"translate-values=\"{ phone: '<a href=&quot;tel:' + $ctrl.phone + '&quot;>' + $ctrl.phone + '</a>' }\"></span>",bindToController:{phone:"<"}}})},"b7+Z":function(e,t,r){"use strict";r.r(t);r("DbwS"),r("t91x"),r("it7j"),r("aIjk");t.default=angular.module("deskworks.MemberSignUpMembershipCtrl",["ngRoute","deskworks.center.service","deskworks.membership.service","deskworks.helper","needHelp"]).controller("MemberSignUpMembershipCtrl",["$scope","$route","$timeout","$translate","$filter","dwAlerts","state","helper","reg","data","membershipService",function(e,t,r,n,s,a,i,l,f,o,c){var p=this;i.setPageTitle(n.instant("MEMBER_SIGN_UP.MEMBERSHIP.PAGE_TITLE")),p.centers=o.centers,p.reg=f,p.settings=o.settings,p.settings.skipPlanMemberSignUp&&(p.reg.stepCount-=1),p.center=l.find(p.centers,i.getCurrentCenterId()),p.center||1!==p.centers.length||(p.center=p.centers[0]),p.loadMembershipCategories=function(){p.center&&!p.settings.skipPlanMemberSignUp&&(p.updating=!0,c.query(p.center.id).catch(function(e){return a.error(e,"Failed to query membership categories.")}).finally(function(){return p.updating=!1}).then(function(e){p.membershipCategories=e.filter(function(e){return e.products.length>0}),delete p.membershipProduct,p.updating=!1,p.membershipStartDate=i.getParam("membershipStartDate"),p.membershipStartDate=p.membershipStartDate?s("toDate")(p.membershipStartDate):moment(),p.membershipCategories.some(function(e){var t=l.find(e.products,i.getParam("productId"));return t?(p.membershipCategory=e,p.membershipProduct=t):delete p.membershipCategory,!!t})}))},p.loadMembershipCategories(),p.membershipCategoryChange=function(){delete p.membershipProduct},p.next=function(){if(!l.pointFirstInvalid("#memberSignUpMembership"))return i.replace(),i.setCurrentCenterId(p.center.id),p.settings.skipPlanMemberSignUp||i.setParam("productId",p.membershipProduct.id),i.setParam("membershipStartDate",s("date")(p.membershipStartDate,"yyyy-MM-dd")),r(function(){return i.setPath(i.getPath()+"/"+(i.getCurrentUserId()||"new"))})}}])},dLOS:function(e,t,r){"use strict";r("it7j");var n=r("QEpw"),s=r.n(n);t.a=angular.module("newBillingProfile",[]).directive("newBillingProfile",function(){return{template:s.a,restrict:"E",scope:!0,controller:"NewBillingProfileCtrl as $ctrl",bindToController:{settings:"<",user:"<"}}}).controller("NewBillingProfileCtrl",["$scope","userProfileService",function(e,t){var r=this;r.$onInit=function(){if(r.settings.creditCardTypes=r.settings.creditCardTypes.filter(function(e){return e.enable}),r.user.creditCards.forEach(function(e){e.type=r.settings.creditCardTypes.find(function(t){return t.id===e.type})||e.type||{}}),r.user.creditCards=r.user.creditCards||[],!r.user.creditCards.length){var n=t.creditCard.new(r.user);n.type=r.settings.creditCardTypes[0],r.user.creditCards.push(n)}t.bindTestBillingGenerator(e,r.user)},r.showSwitchButton=function(){var e=!r.user.creditCards[0]||t.creditCard.isNew(r.user.creditCards[0]),n=!r.user.eChecks[0]||t.eCheck.isNew(r.user.eChecks[0]);return e&&n&&r.settings.enableEChecks},r.addCC=function(){var e=t.creditCard.new(r.user);r.user.creditCards=[e],r.user.eChecks=[]},r.addECheck=function(){var e=t.eCheck.new(r.user);r.user.eChecks=[e],r.user.creditCards=[]}}])},epFx:function(e,t,r){var n={"./steps/01-landing.tpl.html":"gv4n","./steps/01-membership.tpl.html":"0V8K","./steps/03-purchase.tpl.html":"/pDC","./steps/04-complete.tpl.html":"fzQs"};function s(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=a,e.exports=s,s.id="epFx"},fzQs:function(e,t){e.exports='<div id=memberSignUpComplete> <h4 class="page-title flex"> <span>{{state.getPageTitle()}}</span> <need-help phone=$resolve.center.phone></need-help> </h4> <ff-info class="ff-center ff-bmargin" ng-if="vm.accessCode && vm.settings.enableAccessCodes" translate=SIMPLE_RES.COMPLETE.ACCESS_CODE translate-values="{ accessCode: vm.accessCode }"></ff-info> <ff-board> <ff-panel ng-if=vm.purchase> <ff-panel-header> <span translate=SIMPLE_RES.COMPLETE.ORDER.HEADER translate-values="{ orderId: vm.purchase.orderId }"></span> </ff-panel-header> <dw-invoice invoice=vm.purchase center=vm.center allow-remove=false></dw-invoice> </ff-panel> <ff-panel ng-if="!vm.purchase && !vm.accessCode"> <ff-info class=ff-center translate=MEMBER_SIGN_UP.COMPLETE.SUCCESS></ff-info> </ff-panel> </ff-board> <ff-btn-group class=buttons-bottom ng-class="{\'ff-center\': !vm.purchase}"> <ff-btn sense=home type=submit ff-click=vm.home()><span translate=GLOBAL.BTN_HOME></span></ff-btn> </ff-btn-group> </div> '},gv4n:function(e,t){e.exports='<form id=memberSignUpLanding novalidate> <h4 class=page-title>{{state.getPageTitle()}}</h4> <ff-board> <ff-panel style="max-width:480px;margin:0 auto"> <div class=gutter-v-half> <ff-header class=ff-grid> <span flex="0 1 auto">{{::$ctrl.product.name}}&nbsp;</span> <span flex=none class=text-brand>{{::($ctrl.product.price || 0) | ncurrency}}</span> </ff-header> <div ng-if=::$ctrl.product.description>{{::$ctrl.product.description}}</div> <label class=ff-row style=max-width:220px;margin-left:auto> <ff-label flex="0 0 90px"> <span translate=MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.START_DATE></span> </ff-label> <ff-date ff-model=$ctrl.membershipStartDate name=membershipStartDate ff-validate-alert="{{\'MEMBER_SIGN_UP.MEMBERSHIP.PRODUCT.START_DATE\' | translate}}"></ff-date> </label> </div> </ff-panel> </ff-board> <ff-btn-group> <ff-btn sense=next type=submit ff-click=$ctrl.next()><span translate=MEMBER_SIGN_UP.MEMBERSHIP.BTN_PROCEED></span></ff-btn> </ff-btn-group> </form> '},h9bl:function(e,t,r){"use strict";r.r(t);r("DbwS"),r("t91x"),r("aIjk");t.default=angular.module("deskworks.MemberSignUpCompleteCtrl",["needHelp"]).controller("MemberSignUpCompleteCtrl",["$scope","$q","$timeout","$translate","dwAlerts","state","helper","deskworksConfig","center","purchase",function(e,t,r,n,s,a,i,l,f,o){this.center=f,this.purchase=o,a.setPageTitle(n.instant("MEMBER_SIGN_UP.COMPLETE.PAGE_TITLE")),e.$on("$routeChangeStart",function(e,t,r){t.$$route&&"MemberSignUpBillingCtrl"===t.$$route.controller&&(s.error(n.instant("MEMBER_SIGN_UP.COMPLETE.BACK_ERROR")),e.preventDefault())}),this.home=function(){var e=a.getParam("origin"),n=a.getCurrentCenterId();return(e?a.logout():t.when()).finally(function(){a.resetParams(),a.setPath(e||l.getDefaultRoute()),e&&a.setCurrentCenterId(n)}),r(1e4)}}])},l7sz:function(e,t){e.exports='<div id=staffHelp class=ff-tmargin> <ff-board> <ff-panel> <span ng-bind=::vm.notice></span> </ff-panel> </ff-board> <ff-btn-group class="buttons-bottom ff-center"> <ff-btn sense=home type=submit ff-click=vm.home()><span translate=GLOBAL.BTN_HOME></span></ff-btn> </ff-btn-group> </div> '}}]);