(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"0YJG":function(e,r,t){"use strict";t.r(r);t("it7j");angular.module("deskworks.upAccessCodes",[]).directive("upAccessCodes",function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-access-codes.tpl.html",controller:"upAccessCodesCtrl as $ctrl",bindToController:{user:"<userProfile",save:"="}}}).controller("upAccessCodesCtrl",["$scope","$q","$filter","$timeout","state","helper","systemService",function(e,r,t,s,n,a,l){var f=this;function o(){var e=[];return angular.forEach(f.user.accessCards,function(r){var t=a.find(f.rollback,r.id);if(!t||t.number!==r.number){var s={number:r.number,userId:f.user.userId||f.user.id};r.id&&"new"!==r.id?e.push(l.updateAccessCard(n.getCurrentCenterId(),r.id,s)):e.push(l.createAccessCard(n.getCurrentCenterId(),s).then(function(e){r.id=e.id}))}}),angular.forEach(f.rollback,function(r){a.findByKeyValue(f.user.accessCards,"id",r.id)||e.push(l.removeAccessCard(n.getCurrentCenterId(),r.id))}),r.all(e)}f.$onInit=function(){f.save=o,e.$watch("ffBlock.editMode",function(e){e&&(f.rollback=angular.copy(f.user.accessCards))}),e.$on("ffControl::EditCancel",function(){e.ffBlock.editMode&&(f.user.accessCards=f.rollback||f.user.accessCards,f.rollback=null)})},f.add=function(){e.ffBlock.editMode||e.$emit("ffBlock::EditStart"),l.getAccessCard(n.getCurrentCenterId(),"new").then(function(e){s(function(){return f.user.accessCards.push(e)})})},f.delete=function(r){var t=f.user.accessCards.indexOf(r);t>=0&&(f.user.accessCards.splice(t,1),e.ffBlockForm.$setDirty())}}])},"1TsL":function(e,r,t){},"2M2i":function(e,r){angular.module("deskworks.upCoMembers",["dwModal","deskworks.helper","deskworks.state","deskworks.userProfile.service"]).directive("upCoMembers",function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-co-members.tpl.html",controller:"upCoMembersCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}}).controller("upCoMembersCtrl",["$scope","$q","dwAlerts","dwModal","helper","state","userProfileService",function(e,r,t,s,n,a,l){"use strict";var f=this;f.exUserCollapsed=!0,f.new=l.coMember.new,f.isNew=l.coMember.isNew,f.makeCoMemberInactive=!0,f.save=function(e){return l.coMember.save(a.getCurrentCenterId(),f.user.id,e).catch(function(e){return t.error(e,"Failed to save co-member.")}).then(function(){return e.saveAccessCards?e.saveAccessCards().catch(function(e){return t.error(e,"Failed to save access cards.")}):null})},f.delete=function(r){return s.show({scope:e,templateUrl:"DeleteCoMemberTpl",controller:["$scope","close",function(e,r){e.close=r}]}).then(function(e){return e.element[0].querySelector("button[type=submit]").focus(),e.close.then(function(e){if(!e)throw"modal cancel"})}).then(function(){return l.coMember.delete(a.getCurrentCenterId(),f.user.id,r,f.makeCoMemberInactive).catch(function(e){return t.error(e,"Failed to delete co-member.")})})},f.isNewExisting=function(e){return(e.userId||e.existingUserId)&&n.isUid(e.id)},f.newExisting=function(e){return l.get(a.getCurrentCenterId(),e.id).catch(function(e){return t.error(e,"Failed to get user profile.")}).then(function(e){f.user.coMembers.push(l.coMember.convertUserToCoMember(e)),delete f.quickUser})}}])},"2cun":function(e,r){angular.module("deskworks.upMailboxes",["deskworks.helper","deskworks.state","deskworks.userProfile.service"]).directive("upMailboxes",function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-mailboxes.tpl.html",controller:"upMailboxesCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}}).controller("upMailboxesCtrl",["$scope","$window","$q","$translate","dwAlerts","helper","state","userProfileService","optsMailboxHandling",function(e,r,t,s,n,a,l,f,o){"use strict";var i=this;i.handlingOpts=o,i.new=f.mailbox.new,i.isNew=f.mailbox.isNew,i.save=function(e){return f.mailbox.save(l.getCurrentCenterId(),i.user.id,e).catch(function(e){return n.error(e,"Failed to save mailbox.")})},i.delete=function(e){return r.confirm(s.instant("USER_PROFILE.MAILBOXES.CONFIRM_DELETE"))?f.mailbox.delete(l.getCurrentCenterId(),i.user.id,e).catch(function(e){return n.error(e,"Failed to delete mailbox.")}):t.reject()}}])},3658:function(e,r,t){"use strict";t.r(r);var s=t("Dz1X");r.default=angular.module("deskworks.upCreditCards",["deskworks.helper","deskworks.state","deskworks.userProfile.service",s.default.name]).directive("upCreditCards",function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/billing-sections/up-credit-cards.tpl.html",controller:"upCreditCardsCtrl as $ctrl",bindToController:{user:"<userProfile",reg:"<",settings:"<",single:"<"}}}).controller("upCreditCardsCtrl",["$scope","$element","$attrs","$q","$window","$translate","dwAlerts","helper","state","userProfileService","paymentMethodsHelper",function(e,r,t,s,n,a,l,f,o,i,c){var u=this;u.new=function(){var e=i.creditCard.new();return e.firstName=u.user.firstName,e.lastName=u.user.lastName,e.company=u.user.company,e.type=u.settings.creditCardTypes[0],u.user.billingAddress&&(e.street=u.user.billingAddress.street,e.city=u.user.billingAddress.city,e.country=u.user.billingAddress.country,e.state=u.user.billingAddress.state,e.zip=u.user.billingAddress.zip),e},u.isNew=i.creditCard.isNew,u.hasDeleteButton=function(e,r){return(u.isNew(e)?c.countAll(u.user):c.countExisting(u.user))>1&&(!r.editMode||u.reg)},u.save=function(e){return i.creditCard.save(o.getCurrentCenterId(),u.user.id,e).catch(function(e){return l.error(e,"Failed to save credit card.")}).then(function(r){return u.user.creditCards.forEach(function(e){e.defaultPaymentMethod=!1}),e.defaultPaymentMethod=!0,r})},u.delete=function(e){return i.creditCard.isNew(e)?s.when():n.confirm(a.instant("BILLING_PROFILE.CREDIT_CARDS.CONFIRM_DELETE"))?i.creditCard.delete(o.getCurrentCenterId(),u.user.id,e).catch(function(e){return l.error(e,"Failed to delete credit card.")}).then(function(r){if(e.defaultPaymentMethod)for(var t=0;t<u.user.creditCards.length;t++)if(u.user.creditCards[t]!==e&&!u.isNew(u.user.creditCards[t]))return u.makeDefault(u.user.creditCards[t])}):s.reject()},u.makeDefault=function(e){return i.creditCard.save(o.getCurrentCenterId(),u.user.id,e).catch(function(e){return l.error(e,"Failed to set credit card as default payment method.")}).then(function(r){return u.user.creditCards.forEach(function(e){e.defaultPaymentMethod=!1}),e.defaultPaymentMethod=!0,r})}}])},"3IK2":function(e,r){angular.module("deskworks.upAddresses",["deskworks.helper","deskworks.state","deskworks.userProfile.service"]).directive("upAddresses",function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-addresses.tpl.html",controller:"upAddressesCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",center:"<",single:"<"}}}).controller("upAddressesCtrl",["$scope","$q","$window","$translate","dwAlerts","state","helper","userProfileService","optsAddressType","optsCountry","optsState",function(e,r,t,s,n,a,l,f,o,i,c){"use strict";var u=this;u.types=o,u.countries=i,u.states=c,u.new=f.address.new,u.isNew=f.address.isNew,u.countExisting=function(){return u.user.addresses.reduce(function(e,r){return l.isUid(r.id)?e:e+1},0)},u.save=function(e){return f.address.save(a.getCurrentCenterId(),u.user.id,e).catch(function(e){return n.error(e,"Failed to save address.")})},u.delete=function(e){return f.address.isNew(e)?r.when():t.confirm(s.instant("USER_PROFILE.ADDRESSES.CONFIRM_DELETE"))?f.address.delete(a.getCurrentCenterId(),u.user.id,e).catch(function(e){return n.error(e,"Failed to delete address.")}):r.reject()}}])},"3xdx":function(e,r){e.exports='<ff-panel id=upShareable ng-if=$ctrl.schema.shareable ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header> <span translate=USER_PROFILE.SHAREABLE_INFO.HEADER></span> <ff-hint><span translate=USER_PROFILE.SHAREABLE_INFO.HINT></span></ff-hint> </ff-panel-header> <ff-col ff-dim=!$ctrl.fields> <ff-row> <ff-label flex="0 1 160px"><span translate=USER_PROFILE.SHAREABLE_INFO.PUBLIC_FIELDS></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half"> <label flex="0 0 auto"> <ff-checkbox ff-model=$ctrl.user.sharePhoto> <span translate=USER_PROFILE.PHOTO.HEADER></span> </ff-checkbox> </label> <label flex="0 0 auto"> <ff-checkbox ff-model=$ctrl.user.shareCompany> <span translate=USER_PROFILE.PERSONAL_INFO.COMPANY></span> </ff-checkbox> </label> <label flex="0 0 auto"> <ff-checkbox ff-model=$ctrl.user.shareOccupation> <span translate=USER_PROFILE.PERSONAL_INFO.OCCUPATION></span> </ff-checkbox> </label> </div> </ff-static> </ff-row> <label class=ff-row> <ff-label flex="0 1 160px"><span translate=GLOBAL.EMAIL></span></ff-label> <ff-select name=shareEmail ff-model=$ctrl.user.shareEmail ff-options="opt.id as opt.name for opt in $ctrl.optsShareEmail"></ff-select> </label> <fd-field field=field ng-repeat="field in $ctrl.fields"></fd-field> </ff-col> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.shareable.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},"4jLY":function(e,r,t){},"5KKy":function(e,r){angular.module("deskworks.upLeadSource",["deskworks.userProfile.service"]).directive("upLeadSource",function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-lead-source.tpl.html",controller:"upLeadSourceCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}}).controller("upLeadSourceCtrl",["$scope","dwAlerts","state","userProfileService",function(e,r,t,s){"use strict";var n=this;n.save=function(){return s.updateRaw(t.getCurrentCenterId(),n.user,{leadSourceId:n.user.leadSource.id}).catch(function(e){return r.error(e,"Failed to save lead source.")})}}])},"80Eh":function(e,r){e.exports='<ff-panel id=upPersonalInfo ng-if=$ctrl.schema.personalInfo ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.PERSONAL_INFO.HEADER></span></ff-panel-header> <div class="ff-grid gutter-h"> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 116px"><req translate=USER_PROFILE.PERSONAL_INFO.FIRST_NAME></req></ff-label> <ff-text name=firstName ff-model=$ctrl.user.firstName placeholder=John ff-required=true ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.FIRST_NAME\' | translate}}"></ff-text> </label> <ff-row ng-if="$ctrl.schema.personalInfo.middleName !== false"> <label> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PERSONAL_INFO.MIDDLE_NAME></span></ff-label> <ff-text name=middleName ff-model=$ctrl.user.middleName placeholder=James ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.MIDDLE_NAME\' | translate}}"></ff-text> </label> </ff-row> <label class=ff-row> <ff-label flex="0 1 116px"><req translate=USER_PROFILE.PERSONAL_INFO.LAST_NAME></req></ff-label> <ff-text name=lastName ff-model=$ctrl.user.lastName ff-required=true dw-last-name placeholder=Doe ff-change=$ctrl.onChangeLastName()></ff-text> </label> </ff-col> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 116px"><req translate=GLOBAL.EMAIL></req></ff-label> <ff-email name=email ff-model=$ctrl.user.email ff-required=true dw-email placeholder=jdoe@mail.com></ff-email> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PERSONAL_INFO.COMPANY></span></ff-label> <ff-text name=company ff-model=$ctrl.user.company placeholder="JDOE Software" ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.COMPANY\' | translate}}"></ff-text> </label> <label class=ff-row ng-if="$ctrl.schema.personalInfo.occupation !== false"> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PERSONAL_INFO.OCCUPATION></span></ff-label> <ff-text name=occupation ff-model=$ctrl.user.occupation placeholder="Software Solutions Architect" ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.OCCUPATION\' | translate}}"></ff-text> </label> </ff-col> </div> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.personalInfo.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},"99YD":function(e,r){angular.module("deskworks.upComments",["deskworks.userProfile.service"]).directive("upComments",function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-comments.tpl.html",controller:"upCommentsCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}}).controller("upCommentsCtrl",["$scope","dwAlerts","state","userProfileService",function(e,r,t,s){"use strict";var n=this;n.save=function(){return s.updateRaw(t.getCurrentCenterId(),n.user,{comments:n.user.comments}).catch(function(e){return r.error(e,"Failed to save comments.")})}}])},"9GwV":function(e,r,t){"use strict";t.r(r);t("kYjL");angular.module("deskworks.members.userProfile",["deskworks.members.userProfile.new","deskworks.members.userProfile.edit","deskworks.upPersonalInfo","deskworks.upLoginInfo","deskworks.upPhoto","deskworks.upSystemInfo","deskworks.upAddresses","deskworks.upPhones","deskworks.upComments","deskworks.upMembership","deskworks.upPrinterCodes","deskworks.upDocuments","deskworks.upLeadSource","deskworks.upTermsOfService","deskworks.upCustomFields","deskworks.upShareable","deskworks.upCoMembers","deskworks.upMailboxes","deskworks.upCreditCards","deskworks.upEChecks","deskworks.lazyLoaders"])},AWhf:function(e,r){angular.module("deskworks.OurMemberModalCtrl",[]).controller("OurMemberModalCtrl",["$scope","close","member",function(e,r,t){"use strict";e.close=r,e.member=t,e.emails=t.fields.filter(function(e){return"email"===e.type}),e.phones=t.fields.filter(function(e){return"phone"===e.type}),e.urls=t.fields.filter(function(e){return"url"===e.type}),e.fields=t.fields.filter(function(e){return["email","phone","url"].indexOf(e.type)<0}),t.email&&e.emails.unshift({value:t.email}),e.urls.forEach(function(e){var r=(e.name||"").toLowerCase(),t=(e.value||"").toLowerCase();r.indexOf("facebook")>=0||t.indexOf("facebook.com")>=0?e.icon="fa-facebook-square":r.indexOf("twitter")>=0||t.indexOf("twitter.com")>=0?e.icon="fa-twitter-square":r.indexOf("linkedin")>=0||t.indexOf("linkedin.com")>=0?e.icon="fa-linkedin-square":r.indexOf("github")>=0||t.indexOf("github.com")>=0?e.icon="fa-github-square":r.indexOf("youtube")>=0||t.indexOf("youtube.com")>=0?e.icon="fa-youtube-square":r.indexOf("vimeo")>=0||t.indexOf("vimeo.com")>=0?e.icon="fa-vimeo-square":r.match(/google(?:\s|-)?(?:plus|\+)/)||t.indexOf("plus.google.com")>=0?e.icon="fa-google-plus-square":e.icon="fa-globe"})}])},Dial:function(e,r,t){"use strict";t.r(r);t("t91x");angular.module("deskworks.globalConfig",["ngRoute","ngStorage","tmh.dynamicLocale","pascalprecht.translate","dateFilters","setLocale","setTranslations","resolveTimezone","deskworks.config","deskworks.setup.service","userTasksPolicy","resolveGtm","sessionInjector","sessionRefresher"]).config(["$httpProvider","$localStorageProvider","$routeProvider","$locationProvider","$translateProvider","$qProvider","deskworksConfigProvider","tmhDynamicLocaleProvider",function(e,r,t,s,n,a,l,f){e.defaults.withCredentials=!0,r.setKeyPrefix("dw"),s.html5Mode(!0).hashPrefix(""),e.interceptors.push("sessionInjector"),e.interceptors.push("sessionRefresher"),n.fallbackLanguage("en").preferredLanguage("en").useLoader("$translatePartialLoader",{urlTemplate:"translations/{part}-{lang}.json",loadFailureHandler:"$translateErrorHandler"}).useSanitizeValueStrategy("sceParameters").addInterpolation("$translateMessageFormatInterpolation"),f.defaultLocale("en-us"),l.setApiUrl("/api/v1"),t.otherwise({redirectTo:function(e,r,t){var s=Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&");return l.getDefaultRoute()+(s.length>0?"?"+s:"")}}),t.whenOrig=t.when,t.when=function(e,r){return r.resolve=r.resolve||{},r.resolve.resolveLocale=["$q","$rootScope","dwAlerts","setLocale","setTranslations","setupService",function(e,t,s,n,a,l){return l.getSetupSettings().catch(function(e){return s.error(e,"Failed to get setup settings.")}).then(function(s){return t.settings=s,e.all([n(s),a(r.translations||[],s.locale)])})}],r.resolve.resolveTimezone=["resolveTimezone",function(e){return e()}],r.resolve.userTasksPolicy=["userTasksPolicy",function(e){return e()}],r.resolve.resolveGtm=["resolveGtm",function(e){return e()}],t.whenOrig(e,r)}}])},DyEQ:function(e,r,t){"use strict";t.r(r);t("2UZ+"),t("it7j");angular.module("deskworks.upDocuments",["deskworks.helper","deskworks.state","deskworks.userProfile.service"]).directive("upDocuments",function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-documents.tpl.html",controller:"upDocumentsCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}}).controller("upDocumentsCtrl",["$scope","$element","$q","$translate","dwAlerts","helper","state","userProfileService",function(e,r,t,s,n,a,l,f){var o=this;o.$onInit=function(){e.$on("ffBlock::EditStart",function(){o.docsRollback=angular.copy(o.user.documents)}),e.$on("ffBlock::EditCancel",function(){o.user.documents=o.docsRollback})},o.add=function(t,a){if(a&&a.length>0)return n.error(s.instant("USER_PROFILE.DOCUMENTS.INVALID_FORMAT"));t&&t.length>0&&(o.editMode||e.$broadcast("ffBlock::EditStart"),t.forEach(function(e){return o.user.documents.push(f.document.new(e))}),angular.element(r[0].querySelector('form[name="ffBlockForm"]')).scope().ffBlockForm.$setDirty())},o.save=function(){var e=[];return o.user.documents.forEach(function(r){var t=a.find(o.docsRollback,r.id);t&&t.name===r.name||e.push(f.document.save(l.getCurrentCenterId(),o.user.id,r).catch(function(e){return n.error(e,"Failed to save document.")}))}),o.docsRollback.forEach(function(r){a.find(o.user.documents,r.id)||e.push(f.document.delete(l.getCurrentCenterId(),o.user.id,r).catch(function(e){return n.error(e,"Failed to delete document.")}))}),t.all(e)},o.delete=function(e){var t=a.findIndex(o.user.documents,e.id);t>=0&&(o.user.documents.splice(t,1),angular.element(r[0].querySelector('form[name="ffBlockForm"]')).scope().ffBlockForm.$setDirty())}}])},Dz1X:function(e,r,t){"use strict";t.r(r),r.default=angular.module("deskworks.paymentMethodsHelper",[]).factory("paymentMethodsHelper",["helper","upCreditCardService",function(e,r){return{countAll:function(e){return e.creditCards.length+e.eChecks.length},countExisting:function(r){return r.creditCards.concat(r.eChecks).reduce(function(r,t){return e.isUid(t.id)?r:r+1},0)}}}])},F9wG:function(e,r){angular.module("deskworks.members",["deskworks.members.userProfile","deskworks.members.billingProfile.edit","deskworks.members.userSearch","deskworks.OurMembersCtrl"])},FZlk:function(e,r){e.exports='<ff-panel id=upPhoto ng-if=$ctrl.schema.photo ngf-drop="$ctrl.save($files, $invalidFiles)" ngf-pattern="\'image/png,image/jpeg\'" ngf-drag-over-class=dragover> <ff-panel-header style=margin-bottom:.5rem><span translate=USER_PROFILE.PHOTO.HEADER></span></ff-panel-header> <div class=ff-row> <div class=ff-relative> <ff-img ng-if=$ctrl.user.photo ff-src={{$ctrl.user.photo}} img-placeholder=500x500></ff-img> <ff-img ng-if=!$ctrl.user.photo ff-src="" ff-attr-src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAQAAADTdEb+AAACHElEQVR42u3SMQ0AAAzDsJU/6aGo+tgQouSgIBJgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsjCUBxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFjsPeVaAS0/Qs6MAAAAAElFTkSuQmCC img-placeholder=500x500></ff-img> </div> <ff-btn-group flex="0 0 auto" class=ff-section-buttons ng-if=!$ctrl.schema.photo.$readOnly> <ff-btn sense=upload size=sm ff-spin=$ctrl.spin accept=image/png,image/jpeg ngf-select="$ctrl.save($files, $invalidFiles)" ngf-pattern="\'image/png,image/jpeg\'"> <span translate=USER_PROFILE.PHOTO.BTN_UPLOAD></span> </ff-btn> </ff-btn-group> </div> </ff-panel> '},GmbY:function(e,r,t){"use strict";t.r(r);var s=t("Dz1X");angular.module("deskworks.upEChecks",["deskworks.helper","deskworks.state","deskworks.userProfile.service","deskworks.dwECheck",s.default.name]).directive("upEChecks",function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/billing-sections/up-e-checks.tpl.html",controller:"upEChecksCtrl as $ctrl",bindToController:{user:"<userProfile",reg:"<",single:"<",paymentMethodsCount:"<"}}}).controller("upEChecksCtrl",["$scope","$element","$attrs","$q","$window","$translate","dwAlerts","helper","state","userProfileService","paymentMethodsHelper",function(e,r,t,s,n,a,l,f,o,i,c){var u=this;u.new=function(){var e=i.eCheck.new();return e.fullName=f.join([u.user.firstName,u.user.lastName]," "),e},u.isNew=i.eCheck.isNew,u.hasDeleteButton=function(e,r){return(u.isNew(e)?c.countAll(u.user):c.countExisting(u.user))>1&&(!r.editMode||u.reg)},u.save=function(e){return i.eCheck.save(o.getCurrentCenterId(),u.user.id,e).catch(function(e){return l.error(e,"Failed to save eCheck.")}).then(function(r){return u.user.eChecks.forEach(function(e){e.defaultPaymentMethod=!1}),e.defaultPaymentMethod=!0,r})},u.delete=function(e){return i.eCheck.isNew(e)?s.when():n.confirm(a.instant("BILLING_PROFILE.E_CHECKS.CONFIRM_DELETE"))?i.eCheck.delete(o.getCurrentCenterId(),u.user.id,e).catch(function(e){return l.error(e,"Failed to delete eCheck.")}).then(function(r){if(e.defaultPaymentMethod)for(var t=0;t<u.user.eChecks.length;t++)if(u.user.eChecks[t]!==e&&!u.isNew(u.user.eChecks[t]))return u.makeDefault(u.user.eChecks[t])}):s.reject()},u.makeDefault=function(e){return i.eCheck.save(o.getCurrentCenterId(),u.user.id,e).catch(function(e){return l.error(e,"Failed to set eCheck as default payment method.")}).then(function(r){return u.user.eChecks.forEach(function(e){e.defaultPaymentMethod=!1}),e.defaultPaymentMethod=!0,r})}}])},Ht9o:function(e,r){e.exports='<div class=our-members> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-panel class="our-members-toolbar ff-no-frame"> <div class="ff-grid gutter-h-half"> <label class=ff-row flex="{md: \'0 0 40%\'}"> <ff-label flex="0 0 70px"><span translate=OUR_MEMBERS.CENTER></span></ff-label> <dw-select-center ff-model=$ctrl.params.centerId ff-option-all=true></dw-select-center> </label> <label class=ff-row flex="{md: \'0 0 30%\'}"> <ff-label flex="0 0 70px"><span translate=OUR_MEMBERS.SORT></span></ff-label> <ff-select name=sort ff-model=$ctrl.params.sort ff-options="sort.id as sort.name for sort in $ctrl.optsSort"></ff-select> </label> <label class=ff-row flex="{md: \'0 0 30%\'}"> <ff-label flex="0 0 70px"><span translate=OUR_MEMBERS.SEARCH></span></ff-label> <ff-text name=search ff-model=$ctrl.params.q ff-model-options="{ debounce: 1000 }"></ff-text> </label> </div> </ff-panel> <ff-panel ng-if="!$ctrl.members.length && !$ctrl.fetching"><span translate=OUR_MEMBERS.EMPTY></span></ff-panel> <div class=our-members-container infinite-scroll=$ctrl.fetch() infinite-scroll-distance=2 infinite-scroll-container="\'.snap-content-scroller\'"> <div class=our-member ng-repeat="member in $ctrl.members" ng-click=$ctrl.view(member)> <ff-img ff-src={{::member.photo}}></ff-img> <h5>{{::member.name}}</h5> <h6>{{::member.occupation}}</h6> </div> <div ff-spin=true class=our-members-spin ng-if=$ctrl.fetching></div> </div> </div> </div> '},L3g9:function(e,r){e.exports='<div class=user-search> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <form name=userSearch> <membership-filter ff-model=$ctrl.membershipFilter filter-data=us.filters></membership-filter> <div class="ff-grid gutter-v gutter-h"> <div flex="{md: \'0 0 50%\'}"> <ff-panel> <label class=ff-row> <ff-label flex="0 0 104px"><span translate=USER_SEARCH.ACTIVATED_AT></span></ff-label> <dw-select-center ff-model=us.centerId ff-option-all=true></dw-select-center> </label> <label class=ff-row ng-repeat="col in us.columns | filter : { advanced: \'!true\' }"> <ff-label flex="0 0 104px">{{col.name}}</ff-label> <ff-text name={{col.id}} ff-model=col.value></ff-text> </label> <label class=ff-row> <ff-checkbox ff-model=us.advanced><span translate=USER_SEARCH.ADVANCED_SEARCH></span></ff-checkbox> </label> </ff-panel> </div> <div flex="{md: \'0 0 50%\'}"> <ff-panel ng-collapse=!us.advanced> <ff-row class=us-show-row> <span title="{{\'USER_SEARCH.SHOW.HINT\' | translate}}" translate=USER_SEARCH.SHOW>Show</span> </ff-row> <ff-row ng-repeat="col in us.columns | filter : { advanced: \'true\' }" ng-include="col.tpl || \'userSearchTextTpl\'"> </ff-row> </ff-panel> </div> </div> <ff-btn-group class=buttons-bottom style=text-align:left> <ff-btn sense=search type=submit ff-click=$ctrl.search(1)><span translate=USER_SEARCH.BTN_SEARCH></span></ff-btn> </ff-btn-group> </form> <ff-panel ng-if=us.users id=searchResults class=us-results> <ff-panel-header> <span translate=USER_SEARCH.RESULTS.HEADER translate-values="{ count: us.userCount }" ng-if=!$ctrl.previousSearch></span> <span translate=USER_SEARCH.PREV_RESULTS.HEADER translate-values="{ count: us.userCount }" ng-if=$ctrl.previousSearch></span> </ff-panel-header> <ff-header> <ff-row> <span ng-repeat="col in us.columns | filter: $ctrl.filterResultColumns"> <span>{{col.name}}</span> <ff-sort props=us col-id=col.id ff-click=$ctrl.search()></ff-sort> </span> </ff-row> </ff-header> <ff-row ng-repeat="user in us.users" class=ff-clickable ng-click=$ctrl.selectUser(user) ff-dim> <ff-static ng-repeat="col in us.columns | filter: $ctrl.filterResultColumns"> <span> <span ng-if="col.id !== \'email\'" ng-bind=::user[col.id]></span> <a ng-if="col.id === \'email\'" href=mailto:{{::user[col.id]}} ng-bind=::user[col.id] target=_blank rel=noopener ng-click=$event.stopPropagation()></a> <ff-hint ng-if="::user.isMasterMember && col.id === \'company\'"> <span translate=USER_SEARCH.MASTER_USER.HINT translate-values="{ company: user.company }"></span> </ff-hint> </span> </ff-static> <ff-icon sense=navigate class=ff-abs-right-center title="{{\'USER_SEARCH.BTN_SELECT.HINT\' | translate}}"></ff-icon> </ff-row> <ff-pagination props=us ff-click=$ctrl.search($page) ng-if="us.pageCount > 1"></ff-pagination> </ff-panel> </div> <script type=text/ng-template id=userSearchTextTpl> <ff-static flex="0 0 30px" class="ff-center"><ff-checkbox ff-model="col.include"></ff-checkbox></ff-static>\n  <label class="ff-row" flex="auto">\n    <ff-label flex="0 0 104px">{{col.name}}</ff-label>\n    <ff-text name="{{col.id}}" ff-model="col.value" ff-change="col.include = !!col.value"></ff-text>\n  </label> <\/script> <script type=text/ng-template id=userSearchDateTpl> <ff-static flex="0 0 30px" class="ff-center"><ff-checkbox ff-model="col.include"></ff-checkbox></ff-static>\n  <label class="ff-row" flex="auto">\n    <ff-label flex="0 0 104px">{{col.name}}</ff-label>\n    <ff-date name="{{col.id}}" ff-model="col.value" ff-change="col.include = !!col.value"\n             ff-validate-alert="{{\'USER_SEARCH.COLUMNS.JOIN_DATE\' | translate}}"></ff-date>\n  </label> <\/script> <script type=text/ng-template id=userSearchMacTpl> <ff-static flex="0 0 30px" class="ff-center"><ff-checkbox ff-model="col.include"></ff-checkbox></ff-static>\n  <label flex="1 1 auto">\n    <ff-label flex="0 0 104px">{{col.name}}</ff-label>\n    <ff-text name="{{col.id}}" ff-model="col.value" ff-change="[col.include = !!col.value, us.checkedIn = us.checkedIn && !!col.value]"></ff-text>\n  </label>\n  <label flex="0 0 auto">\n    <ff-checkbox ff-model="us.checkedIn" ff-disabled="!col.value" class="ff-small">\n      <span translate="USER_SEARCH.FILTERS.CHECKED_IN"></span>\n    </ff-checkbox>\n  </label> <\/script> '},MHBY:function(e,r){e.exports='<div id=upMailboxes ng-if=$ctrl.schema.mailboxes class=ff-grid ff-section="mailbox in $ctrl.user.mailboxes" ff-section-new=$ctrl.new()> <ff-panel ng-if=!$ctrl.user.mailboxes.length> <ff-panel-header><span translate=USER_PROFILE.MAILBOXES.HEADER></span></ff-panel-header> <span translate=USER_PROFILE.MAILBOXES.EMPTY></span> </ff-panel> <div ng-if=$ctrl.user.mailboxes.length> <div class=gutter-v> <ff-panel id="{{\'upMailbox-\' + mailbox.id}}" ff-block ff-block-save=$ctrl.save(mailbox) ff-block-delete=$ctrl.delete(mailbox) ff-block-edit-default=$ctrl.isNew(mailbox) ff-block-is-new=$ctrl.isNew(mailbox)> <ff-panel-header><span translate=USER_PROFILE.MAILBOX></span></ff-panel-header> <div class="ff-grid gutter-h"> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 130px"><req translate=USER_PROFILE.MAILBOXES.NUMBER></req></ff-label> <ff-text name=number ff-model=mailbox.number ff-required=true ff-validate-alert="{{\'USER_PROFILE.MAILBOXES.NUMBER\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 130px"><span translate=USER_PROFILE.MAILBOXES.KEY></span></ff-label> <ff-text name=key ff-model=mailbox.key ff-validate-alert="{{\'USER_PROFILE.MAILBOXES.KEY\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 130px"><span translate=USER_PROFILE.MAILBOXES.HANDLING></span></ff-label> <ff-select name=handling ff-model=mailbox.handling ff-validate-alert="{{\'USER_PROFILE.MAILBOXES.HANDLING\' | translate}}" ff-options="opt.name for opt in $ctrl.handlingOpts"></ff-select> </label> </ff-col> <ff-col flex="{md: \'0 0 50%\'}"> <label> <ff-row> <ff-label><span translate=USER_PROFILE.MAILBOXES.NAMES></span></ff-label> </ff-row> <ff-row> <ff-textarea name=names ff-model=mailbox.names rowspan=2 placeholder="{{\'USER_PROFILE.MAILBOXES.NAMES.HINT\' | translate}}" title="{{\'USER_PROFILE.MAILBOXES.NAMES.HINT\' | translate}}"></ff-textarea> </ff-row> </label> </ff-col> </div> <ff-btn-group class=ff-block-buttons ng-if=!$ctrl.schema.mailboxes.$readOnly> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-delete></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> </div> </div> <ff-btn-group class=ff-section-buttons ng-if=!$ctrl.schema.mailboxes.$readOnly> <ff-btn ff-btn-section-new> <span translate=GLOBAL.BTN_NEW></span> <span translate=USER_PROFILE.MAILBOX></span> </ff-btn> </ff-btn-group> </div> '},MQkE:function(e,r){angular.module("deskworks.upSystemInfo",[]).directive("upSystemInfo",function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-system-info.tpl.html",controller:"upSystemInfoCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}}).controller("upSystemInfoCtrl",function(){"use strict";var e=this;e.$onChanges=function(){e.user&&(e.user.activatedAt=e.user.activatedAt&&e.user.activatedAt.map(function(e){return e.centerName}).join(", "),e.user.masterMembers=e.user.masterMembers&&e.user.masterMembers.map(function(e){return e.fullName+(e.company?" ("+e.company+")":"")}).join(", "))}})},NGgp:function(e,r){angular.module("deskworks.upPersonalInfo",["deskworks.userProfile.service"]).directive("upPersonalInfo",function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-personal-info.tpl.html",controller:"upPersonalInfoCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}}).controller("upPersonalInfoCtrl",["$scope","dwAlerts","state","userProfileService",function(e,r,t,s){"use strict";var n=this;n.onChangeLastName=function(){if(n.reg&&!n.reg.member&&!n.reg.selfRegistration){var e=angular.element(document.getElementsByName("login")),r=e.scope();r&&r.field&&!e.hasClass("ng-dirty")&&(r.field.value=(n.user.lastName||"").toLowerCase().replace(/\W/g,"")+"-"+Date.now())}},n.save=function(){var a={firstName:n.user.firstName,middleName:n.user.middleName,lastName:n.user.lastName,email:n.user.email,company:n.user.company,occupation:n.user.occupation};return s.updateRaw(t.getCurrentCenterId(),n.user,a).then(function(){return e.$emit("CurrentUser:refresh")}).catch(function(e){return r.error(e,"Failed to save personal information.")})}}])},NQ3A:function(e,r){e.exports='<ff-panel id=upPrinterCodes ng-if=$ctrl.schema.printerCodes ff-block ff-block-save=$ctrl.save() ff-block-edit=$ctrl.editMode ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.PRINTER_CODES.HEADER></span></ff-panel-header> <div class=ff-grid> <ff-row flex="0 0 50%" class=ff-relative ng-repeat="prCode in $ctrl.user.printerCodes" id="{{\'upPrinterCode-\' + prCode.id}}"> <ff-text name=printerCode ff-model=prCode.code ff-required=true ff-validate-alert="{{\'USER_PROFILE.PRINTER_CODES.PRINTER_CODE\' | translate}}"></ff-text> <ff-btn flex=none sense=delete size=xs style=z-index:3 title="{{\'USER_PROFILE.PRINTER_CODES.BTN_DELETE.HINT\' | translate}}" ff-click=$ctrl.delete(prCode) ng-show=$ctrl.editMode></ff-btn> </ff-row> </div> <ff-btn-group class=ff-section-buttons ng-if=!$ctrl.schema.printerCodes.$readOnly> <ff-btn ff-btn-block-edit ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-save ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-cancel ng-if=!$ctrl.reg.new></ff-btn> <ff-btn sense=new size=sm ff-click=$ctrl.add()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </ff-panel> '},Ntds:function(e,r){e.exports='<div id=upEChecks class="ff-grid gutter-v gutter-h" ff-section="check in $ctrl.user.eChecks" ff-section-new=$ctrl.new()> <ff-panel flex="{{ $ctrl.single ? null : {lg: \'0 0 50%\'} }}" ng-if=!$ctrl.user.eChecks.length> <span translate=BILLING_PROFILE.E_CHECKS.EMPTY></span> </ff-panel> <ff-panel flex="{{ $ctrl.single ? null : {lg: \'0 0 50%\'} }}" id="{{\'upECheck-\' + check.id}}" ff-block ff-block-save=$ctrl.save(check) ff-block-delete=$ctrl.delete(check) ff-block-edit-default=$ctrl.isNew(check) ff-block-is-new=$ctrl.isNew(check)> <ff-header><span translate=BILLING_PROFILE.E_CHECKS.HEADER></span></ff-header> <fieldset dw-e-check=check></fieldset> <ff-btn-group class=ff-block-buttons ng-if="!$ctrl.user.accessRights.billingInfo.readOnly && !$ctrl.single"> <ff-btn ff-btn-block-delete ng-if="$ctrl.hasDeleteButton(check, ffBlock)" ng-hide=false></ff-btn> <ff-btn ff-btn-block-save ng-if=!$ctrl.reg></ff-btn> <ff-btn ff-btn-block-cancel ng-if=!$ctrl.reg></ff-btn> <ff-btn sense=favorite size=sm ng-if=check.defaultPaymentMethod title="{{\'BILLING_PROFILE.BTN_DEFAULT_PAYMENT_METHOD.HINT\' | translate}}"> <span translate=BILLING_PROFILE.BTN_DEFAULT_PAYMENT_METHOD></span> </ff-btn> <ff-btn sense=makeFavorite size=sm ng-if="!check.defaultPaymentMethod && !$ctrl.isNew(check)" ff-click=$ctrl.makeDefault(check) title="{{\'BILLING_PROFILE.BTN_SET_DEFAULT_PAYMENT_METHOD.HINT\' | translate}}"> <span translate=BILLING_PROFILE.BTN_SET_DEFAULT_PAYMENT_METHOD></span> </ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=ff-btn-full ng-if="!$ctrl.user.accessRights.billingInfo.readOnly && !$ctrl.single"> <ff-btn ff-btn-section-new><span translate=BILLING_PROFILE.E_CHECKS.BTN_ADD></span></ff-btn> </ff-btn-group> </div> '},"OXQ/":function(e,r,t){"use strict";t.r(r);t("qgYx");angular.module("deskworks.members.userSearch",["deskworks.routeHelper","deskworks.dwAlerts","deskworks.state","deskworks.helper","deskworks.dwSelectCenter","deskworks.userSearchState","flexForms.ffPagination","deskworks.userProfile.service"]).config(["$routeProvider",function(e){e.when("/user-search",{templateUrl:"members/user-search/user-search.tpl.html",controller:"UserSearchCtrl as $ctrl",label:"User Search",routeBranch:"user-search",reloadOnSearch:!1,userTasksPolicy:!1,translations:["user-search"],resolve:{auth:["routeHelper",function(e){return e.auth()}]}})}]).controller("UserSearchCtrl",["$scope","$filter","$translate","dwAlerts","state","helper","userSearchState","userProfileService",function(e,r,t,s,n,a,l,f){var o=this;n.setPageTitle(t.instant("USER_SEARCH.PAGE_TITLE"));var i=e.us=l;i.centerId=n.getCurrentCenterId(),i.users&&(o.previousSearch=!0),i.resetColumns(),i.advanced=!1,o.search=function(e){var t=i.columns.filter(function(e){return!e.advanced||i.advanced}).reduce(function(e,r){return r.value&&(e[r.id]=r.value),e},{}),n=angular.extend({page:e||i.page,pageSize:i.pageSize,sort:i.sort,order:i.order},o.membershipFilter,t);return i.checkedIn&&(n.checkedIn=i.checkedIn),f.search(i.centerId,n).catch(function(e){return s.error(e,"Failed to search users.")}).then(function(e){e.users.forEach(function(e){e.joinDate=r("date")(e.joinDate,"mediumDate")}),angular.extend(i,e),o.previousSearch=!1})},o.filterResultColumns=function(e){return e.include&&(!e.advanced||i.advanced||"email"===e.id)},o.selectUser=function(e){n.setCurrentUserId(e.id);var r=n.getParam("redirect");return r&&"/user-search"!==r?(n.setParam("redirect"),n.setPath(r)):n.setPath("/profile")}}])},OdV3:function(e,r){e.exports='<div class=user-profile id=userProfile> <h4 class=page-title> {{state.getPageTitle()}} <span ng-if="vm.reg.member && !vm.reg.selfRegistration" ng-style="{ color: vm.center.color }">{{vm.center.name}}</span> </h4> <div class="ff-grid ff-gutter-v ff-gutter-h"> <up-personal-info user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.personalInfo></up-personal-info> <up-login-info flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.loginInfo member-directory-url=wlLinks.memberDirectoryUrl></up-login-info> <up-photo flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.photo></up-photo> <up-system-info user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.system></up-system-info> <up-addresses user=vm.userProfile schema=vm.schema reg=vm.reg center=vm.center ng-if=vm.schema.addresses></up-addresses> <up-phones user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.phones></up-phones> <up-comments flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.comments></up-comments> <up-membership flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.membership kisi-save=vm.kisiSave ezeep-save=vm.ezeepSave></up-membership> <up-printer-codes flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.printerCodes></up-printer-codes> <up-documents flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.printerCodes></up-documents> <up-lead-source flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.leadSource></up-lead-source> <div ng-if="vm.schema.customFields && vm.customFields.length || vm.schema.shareable"> <div class="ff-grid ff-gutter-v ff-gutter-h"> <up-custom-fields flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg fields=vm.customFields ng-if="vm.schema.customFields && vm.customFields.length"></up-custom-fields> <up-shareable flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg fields=vm.shareable ng-if=vm.schema.shareable></up-shareable> </div> </div> <up-co-members user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.coMembers></up-co-members> <up-mailboxes user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.mailboxes></up-mailboxes> </div> <ff-btn-group class=buttons-bottom ng-if=vm.reg> <ff-btn sense=next ff-click=vm.next()><span translate=GLOBAL.BTN_NEXT></span></ff-btn> <ff-btn sense=back ff-click=vm.back() ng-if=vm.back><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> </div> '},Q9OX:function(e,r){e.exports='<div id=upCoMembers ng-if=$ctrl.schema.coMembers class=ff-grid ff-section="coMember in $ctrl.user.coMembers" ff-section-new=$ctrl.new()> <ff-panel ng-if=!$ctrl.user.coMembers.length> <ff-panel-header><span translate=USER_PROFILE.CO_MEMBERS.HEADER></span></ff-panel-header> <span translate=USER_PROFILE.CO_MEMBERS.EMPTY></span> </ff-panel> <div ng-if=$ctrl.user.coMembers.length> <div class=gutter-v> <ff-panel ff-block ff-block-save=$ctrl.save(coMember) ff-block-delete=$ctrl.delete(coMember) ff-block-edit-default=$ctrl.isNew(coMember) ff-block-dirty-default=$ctrl.isNewExisting(coMember) ff-block-is-new=$ctrl.isNew(coMember) id="{{\'upCoMember-\' + coMember.id}}"> <ff-panel-header><span translate=GLOBAL.CO_MEMBER></span></ff-panel-header> <div class="ff-grid gutter-h"> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PERSONAL_INFO.FULL_NAME></span></ff-label> <ff-text name=fullName ff-model=coMember.fullName placeholder="John Doe" ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.FULL_NAME\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=GLOBAL.EMAIL></span></ff-label> <ff-email name=email ff-model=coMember.email dw-email placeholder=jdoe@mail.com></ff-email> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PHONE></span></ff-label> <ff-text name=phone ff-model=coMember.phone dw-phone placeholder=888-379-2865></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=GLOBAL.LOGIN></span></ff-label> <ff-login name=login ff-model=coMember.login dw-login placeholder=jdoe></ff-login> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=GLOBAL.PASSWORD></span></ff-label> <ff-password name=password ff-model=coMember.password dw-password ff-not-contain="[coMember.login, coMember.login.split(\'\').reverse().join(\'\'), coMember.fullName]" ff-validate-alert=\'{ "notContain": "{{&#39;GLOBAL.PASSWORD.NOT_CONTAIN&#39; | translate}}" }\'></ff-password> </label> <ff-row ng-if=state.isLoggedAdmin()> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.LOGIN_INFO.ACCESS_CODES></span></ff-label> <ff-static style=overflow:visible ff-style="{overflow: \'visible\'}"> <up-access-codes flex=auto user-profile=coMember save=coMember.saveAccessCards></up-access-codes> </ff-static> </ff-row> </ff-col> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 180px"><span translate=USER_PROFILE.CO_MEMBERS.CAN_MAKE_RESERVATIONS></span></ff-label> <ff-static> <ff-checkbox name=canMakeReservations ff-model=coMember.canMakeReservations></ff-checkbox> </ff-static> </label> <label class=ff-row> <ff-label flex="0 1 180px"><span translate=USER_PROFILE.CO_MEMBERS.SEES_ACCOUNTING_INFO></span></ff-label> <ff-static> <ff-checkbox name=canSeeAccountingInfo ff-model=coMember.canSeeAccountingInfo></ff-checkbox> </ff-static> </label> <label class=ff-row> <ff-label flex="0 1 180px"><span translate=USER_PROFILE.CO_MEMBERS.GETS_CENTER_NOTICES></span></ff-label> <ff-static> <ff-checkbox name=getCenterNotices ff-model=coMember.getCenterNotices></ff-checkbox> </ff-static> </label> <ff-row> <ff-textarea name=notes ff-model=coMember.notes rowspan="state.isLoggedAdmin() ? 3 : 2" placeholder="{{\'USER_PROFILE.CO_MEMBERS.NOTES\' | translate}}" title="{{\'USER_PROFILE.CO_MEMBERS.NOTES\' | translate}}"></ff-textarea> </ff-row> </ff-col> </div> <ff-btn-group class=ff-block-buttons ng-if=!$ctrl.schema.coMembers.$readOnly> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-delete></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> </div> </div> <ff-btn-group class=ff-section-buttons style=margin-bottom:0 ng-if=!$ctrl.schema.coMembers.$readOnly> <ff-btn ff-btn-section-new> <span translate=USER_PROFILE.CO_MEMBERS.BTN_NEW></span> </ff-btn> <ff-btn sense=collapseBtnPriv size=sm ff-click="$ctrl.exUserCollapsed = !$ctrl.exUserCollapsed" ng-class="{ collapsed: $ctrl.exUserCollapsed }" ng-if=state.isLoggedAdmin()> <span translate=USER_PROFILE.CO_MEMBERS.BTN_ADD></span> </ff-btn> </ff-btn-group> <div flex="{md: \'0 0 50%\'}" style=margin-left:auto;margin-bottom:0 ng-collapse=$ctrl.exUserCollapsed ng-if=state.isLoggedAdmin()> <ff-panel style=margin-top:1.5rem> <form name=formNewExisting class=ff-row> <label flex="1 1 auto"> <ff-search ng-model=$ctrl.quickUser dw-search-user></ff-search> </label> <ff-btn-group flex="0 0 auto" style=z-index:3> <ff-btn type=submit sense=add size=sm ff-disabled=!$ctrl.quickUser ff-click=$ctrl.newExisting($ctrl.quickUser)>Add</ff-btn> </ff-btn-group> </form> </ff-panel> </div> </div> <script type=text/ng-template id=DeleteCoMemberTpl> <div class="dw-modal">\n    <div class="dw-modal-fade" ng-click="close()"></div>\n    <form class="dw-modal-dialog our-member-modal" novalidate>\n      <div class="dw-modal-scroll">\n        <ff-header><span translate="USER_PROFILE.CO_MEMBERS.CONFIRM_DELETE"></span></ff-header>\n        <label class="ff-row">\n          <ff-checkbox name="makeCoMemberInactive" ff-model="$ctrl.makeCoMemberInactive">\n            <span translate="USER_PROFILE.CO_MEMBERS.MAKE_INACTIVE"></span>\n          </ff-checkbox>\n        </label>\n        <ff-btn-group class="ff-center ff-tmargin" style="padding: 0 5px 5px 5px">\n          <ff-btn sense="cancel" ff-click="close(false)">Cancel</ff-btn>\n          <ff-btn type="submit" sense="ok" ff-click="close(true)">OK</ff-btn>\n        </ff-btn-group>\n      </div>\n    </form>\n  </div> <\/script> '},QU5I:function(e,r,t){"use strict";t.r(r);t("DbwS"),t("t91x"),t("1TsL");angular.module("deskworks.OurMembersCtrl",["infinite-scroll","dwModal","deskworks.routeHelper","deskworks.OurMembers","deskworks.OurMemberModalCtrl","deskworks.optsOurMembersSort"]).config(["$routeProvider",function(e){e.when("/our-members",{templateUrl:"members/our-members/our-members.tpl.html",controller:"OurMembersCtrl as $ctrl",label:"Meet Our Members",routeBranch:"our-members",translations:["our-members"],reloadOnSearch:!1,userTasksPolicy:!1,resolve:{auth:["$route","routeHelper",function(e,r){return r.auth(null).then(function(){e.current.$$route.hideSidebar=!1}).catch(function(){e.current.$$route.hideSidebar=!0})}]}})}]).controller("OurMembersCtrl",["$scope","$translate","$location","$q","dwModal","dwAlerts","state","helper","OurMembers","optsOurMembersSort",function(e,r,t,s,n,a,l,f,o,i){var c=this;function u(){c.members=[],c.params.offset=0,c.eof=!1}l.setPageTitle(r.instant("OUR_MEMBERS.PAGE_TITLE")),c.optsSort=i,c.params={centerId:l.getCurrentCenterId(),sort:"name",offset:0,limit:100},u(),e.$watch(function(){return t.search().centerId},function(e){c.params.centerId=angular.isDefined(e)?+e:l.getCurrentCenterId()}),e.$watch("$ctrl.params.centerId",function(e){t.search("centerId",e).replace()}),e.$watch(function(){return t.search().sort},function(e){c.params.sort=e||"name"}),e.$watch("$ctrl.params.sort",function(e){t.search("sort",e).replace()}),e.$watch(function(){return t.search().q},function(e){c.params.q=e||""}),e.$watch("$ctrl.params.q",function(e){t.search("q",e||void 0).replace()}),e.$watchGroup(["$ctrl.params.centerId","$ctrl.params.sort","$ctrl.params.q"],function(e,r){e.some(function(e,t){return e!==r[t]})&&s.when(c.fetching).finally(function(){u(),c.fetch()})}),c.fetch=function(){if(c.eof||c.fetching)return c.fetching;c.fetching=o.query(c.params).catch(function(e){return a.error(e,"Failed to query our members.")}).finally(function(){c.fetching=null}).then(function(e){c.members=c.members.concat(e),c.params.offset+=e.length,c.eof=e.length<c.params.limit})},c.view=function(r){n.show({scope:e,templateUrl:"members/our-members/our-member-modal.tpl.html",controller:"OurMemberModalCtrl",inputs:{member:r}})}}])},QXyp:function(e,r,t){"use strict";t.r(r);t("4jLY");angular.module("deskworks.upPhoto",[]).directive("upPhoto",function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-photo.tpl.html",controller:"upPhotoCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}}).controller("upPhotoCtrl",["$scope","$timeout","$translate","dwAlerts","state","userProfileService",function(e,r,t,s,n,a){var l=this;l.save=function(f,o){if(o&&o.length>0)return s.error(t.instant("USER_PROFILE.PHOTO.INVALID_FORMAT"));if(f&&f.length>0){if(!l.user.isNew())return l.spin=!0,l.user.photoFile=f[0],a.photo.save(n.getCurrentCenterId(),l.user).then(function(){l.spin=!1,e.$emit("CurrentUser:refresh")},function(e){return l.spin=!1,s.error(e,"Failed to upload photo.")});if(l.user.photoFile=f[0],window.FileReader&&f[0].type.indexOf("image")>-1){var i=new FileReader;i.readAsDataURL(f[0]),i.onload=function(e){r(function(){l.user.photo=e.target.result})}}}}}])},Rw1n:function(e,r){angular.module("deskworks.members.userProfile.new",["ngRoute","deskworks.userProfile.service","deskworks.center.service","deskworks.UserField","deskworks.routeHelper","deskworks.helper"]).config(["$routeProvider",function(e){"use strict";e.when("/new-member",{template:"<div ng-include=\"'members/user-profile/user-profile.tpl.html'\" ff-bulk-read-only></div>",controller:"RegisterUserCtrl as vm",label:"New Member",routeBranch:"new-member",translations:["user-profile"],resolve:{reg:function(){return{member:!0,selfRegistration:!1,step:1,stepCount:3,new:!0}},userProfile:["$q","$route","dwAlerts","centerService","userProfileService","state","routeHelper",function(e,r,t,s,n,a,l){return r.current.params["self-registration"]&&"false"!==r.current.params["self-registration"]?(a.setPath("/member-sign-up",!0),a.setParam("self-registration"),e.reject()):l.auth().then(function(){return s.get(a.getCurrentCenterId()).then(function(e){return n.new(e,"member","register").catch(function(e){return t.error(e,"Failed to load new member profile template.")})})})}],center:["state","centerService",function(e,r){return e.getCurrentCenterId()?r.get(e.getCurrentCenterId()):{}}],lazyKisi:"lazyLoadKisi",lazyEzeep:"lazyLoadEzeep"}}),e.when("/new-user",{template:"<div ng-include=\"'members/user-profile/user-profile.tpl.html'\" ff-bulk-read-only></div>",controller:"RegisterUserCtrl as vm",label:"New User",routeBranch:"new-user",translations:["user-profile"],resolve:{reg:function(){return{member:!1,selfRegistration:!1,step:1,stepCount:2,new:!0}},userProfile:["dwAlerts","centerService","userProfileService","state","routeHelper",function(e,r,t,s,n){return n.auth().then(function(){return r.get(s.getCurrentCenterId()).then(function(r){return t.new(r,"nonMember","register").catch(function(r){return e.error(r,"Failed to load new member profile template.")})})})}],center:["state","centerService",function(e,r){return e.getCurrentCenterId()?r.get(e.getCurrentCenterId()):{}}],lazyEzeep:"lazyLoadEzeep"}})}]).controller("RegisterUserCtrl",["$scope","$timeout","$translate","$filter","helper","state","dwAlerts","userProfile","reg","center","userProfileService","centerService","setupService","UserField",function(e,r,t,s,n,a,l,f,o,i,c,u,d,m){"use strict";var p=this;a.setPageTitle(t.instant(o.member?"USER_PROFILE.NEW_MEMBER.PAGE_TITLE":"USER_PROFILE.NEW_NON_MEMBER.PAGE_TITLE")),p.reg=o,p.userProfile=f,p.center=i,p.schema=f.schema,o&&!o.member&&(p.schema.customFields=!1),(p.schema.customFields||p.schema.shareable)&&m.query().catch(function(e){return l.error(e,"Failed to query user profile fields.")}).then(function(e){e.forEach(function(e){e.value=null}),p.customFields=e.filter(function(e){return"customFields"===e.section})}),p.reg&&!p.reg.member&&(p.userProfile.password="123456",p.userProfile.passwordConfirmation="123456",e.$watch("vm.userProfile.lastName",function(e){p.userProfile.login=(e||"").toLowerCase().replace(/\W/g,"")+"-"+Date.now()})),p.next=function(){if(!n.pointFirstInvalid("#userProfile"))return c.registerNewUser(a.getCurrentCenterId(),p.userProfile,void 0,p.customFields).then(function(){if(p.kisiSave)return p.kisiSave()}).then(function(){if(p.ezeepSave)return p.ezeepSave()}).then(function(){return a.setPath(a.getPath()+"/"+p.userProfile.id,!0),a.setParam("productId",(p.userProfile.membershipProduct||{}).id),a.setParam("membershipStartDate",s("date")(p.userProfile.membershipStartDate,"yyyy-MM-dd")),a.setCurrentUserId(p.userProfile.id),a.setParam("attachedReservationUnitId",p.userProfile.attachedReservationUnit&&p.userProfile.attachedReservationUnit.id),r(function(){return a.setPath(a.getPath()+"/membership/billing-profile")})})},c.bindTestUserGenerator(e,p.userProfile,p.reg)}])},SHcK:function(e,r){e.exports='<ff-panel id=upDocuments ng-if=$ctrl.schema.documents ff-block ff-block-save=$ctrl.save() ff-block-edit=$ctrl.editMode ff-block-edit-default=$ctrl.user.isNew() ngf-drop="$ctrl.add($files, $invalidFiles)" ngf-pattern="\'application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\'" ngf-multiple=true ngf-drag-over-class=dragover> <ff-panel-header><span translate=USER_PROFILE.DOCUMENTS.HEADER></span></ff-panel-header> <div class=ff-grid> <ff-row flex="{sm: \'0 0 50%\'}" ng-repeat="doc in $ctrl.user.documents" class=ff-relative id="{{\'upDocument-\' + doc.id}}"> <ff-text name=document ff-model=doc.name ff-required=true ff-validate-alert="Document Name" ff-static-url=doc.document></ff-text> <ff-btn flex=none style=z-index:3 sense=delete size=xs ff-click=$ctrl.delete(doc) ng-show=$ctrl.editMode title="{{\'USER_PROFILE.DOCUMENTS.BTN_DELETE.HINT\' | translate}}"></ff-btn> </ff-row> </div> <ff-btn-group class=ff-section-buttons ng-if=!$ctrl.schema.documents.$readOnly> <ff-btn ff-btn-block-edit ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-save ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-cancel ng-if=!$ctrl.reg.new></ff-btn> <ff-btn sense=new size=sm ngf-select="$ctrl.add($files, $invalidFiles)" ngf-pattern="\'application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\'" accept=application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document ngf-multiple=true><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </ff-panel> '},SxCY:function(e,r){e.exports='<ff-panel id=upSystemInfo ng-if=$ctrl.schema.system> <ff-panel-header><span translate=USER_PROFILE.SYSTEM_INFO.HEADER></span></ff-panel-header> <div class="ff-grid gutter-h"> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.SYSTEM_INFO.JOIN_DATE></span></ff-label> <ff-static name=joinDate ff-bind="$ctrl.user.joinDate | date:\'mediumDate\'"></ff-static> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.SYSTEM_INFO.USER_ID></span></ff-label> <ff-static name=userId ff-bind=$ctrl.user.id></ff-static> </label> </ff-col> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.SYSTEM_INFO.REGISTERED_BY></span></ff-label> <ff-static name=registeredBy ff-bind=$ctrl.user.registeredBy></ff-static> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.SYSTEM_INFO.ACTIVATED_AT></span></ff-label> <ff-static name=activatedAt ff-bind=$ctrl.user.activatedAt></ff-static> </label> <label class=ff-row ng-if=$ctrl.user.masterMembers> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.SYSTEM_INFO.CO_MEMBER_OF></span></ff-label> <ff-static name=masterMembers ff-bind=$ctrl.user.masterMembers></ff-static> </label> </ff-col> </div> </ff-panel> '},UEFl:function(e,r){angular.module("deskworks.upCustomFields",["deskworks.UserProfileFields"]).directive("upCustomFields",function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-custom-fields.tpl.html",controller:"upCustomFieldsCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",fields:"<"}}}).controller("upCustomFieldsCtrl",["$scope","dwAlerts","state","UserProfileFields",function(e,r,t,s){"use strict";var n=this;n.save=function(){return s.save(t.getCurrentCenterId(),n.user.id,n.fields).catch(function(e){return r.error(e,"Failed to save user profile fields.")})}}])},VsYK:function(e,r){angular.module("deskworks.userSearchState",["deskworks.optsMembershipFilter"]).factory("userSearchState",["$rootScope","$translate","optsMembershipFilter",function(e,r,t){"use strict";var s={advanced:!1,checkedIn:!1,centerId:0,page:1,sort:"lastName",order:1,pageSize:100,columns:[{id:"firstName",_name:"USER_SEARCH.COLUMNS.FIRST_NAME",include:!0},{id:"lastName",_name:"USER_SEARCH.COLUMNS.LAST_NAME",include:!0},{id:"company",_name:"USER_SEARCH.COLUMNS.COMPANY",include:!0},{id:"email",_name:"USER_SEARCH.COLUMNS.EMAIL",advanced:!0,include:!0},{id:"login",_name:"USER_SEARCH.COLUMNS.LOGIN",advanced:!0},{id:"phone",_name:"USER_SEARCH.COLUMNS.PHONE",advanced:!0},{id:"accessCode",_name:"USER_SEARCH.COLUMNS.ACCESS_CODE",advanced:!0},{id:"printerCode",_name:"USER_SEARCH.COLUMNS.PRINTER_CODE",advanced:!0},{id:"mailboxNumber",_name:"USER_SEARCH.COLUMNS.MAILBOX_NUMBER",advanced:!0},{id:"mailboxNames",_name:"USER_SEARCH.COLUMNS.MAILBOX_NAME",advanced:!0},{id:"occupation",_name:"USER_SEARCH.COLUMNS.OCCUPATION",advanced:!0},{id:"joinDate",_name:"USER_SEARCH.COLUMNS.JOIN_DATE",advanced:!0,tpl:"userSearchDateTpl"},{id:"macAddress",_name:"USER_SEARCH.COLUMNS.MAC_ADDRESS",advanced:!0,tpl:"userSearchMacTpl"}],resetColumns:function(){s.columns=angular.copy(n.columns),l()}};s.filters=angular.copy(t);var n=angular.copy(s);function a(){angular.copy(n,s),l()}function l(){s.filters.forEach(function(e){e.name=r.instant(e._name)}),s.columns.forEach(function(e){e.name=r.instant(e._name)})}return e.$on("LOGIN",a),e.$on("LOGOUT",a),l(),e.$on("$setTranslationsSuccess",l),s}])},WZXA:function(e,r){e.exports='<ff-panel id=upComments ng-if=$ctrl.schema.comments class=ff-no-frame ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.COMMENTS.HEADER></span></ff-panel-header> <ff-row> <ff-textarea name=comments ff-model=$ctrl.user.comments rowspan=5></ff-textarea> </ff-row> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.comments.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},YZOG:function(e,r,t){"use strict";t.r(r);t("2UZ+"),t("it7j");angular.module("deskworks.upPrinterCodes",["deskworks.helper","deskworks.state","deskworks.userProfile.service"]).directive("upPrinterCodes",function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-printer-codes.tpl.html",controller:"upPrinterCodesCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}}).controller("upPrinterCodesCtrl",["$scope","$element","$q","dwAlerts","helper","state","userProfileService",function(e,r,t,s,n,a,l){var f=this;f.$onInit=function(){e.$on("ffBlock::EditStart",function(){f.prCodesRollback=angular.copy(f.user.printerCodes)}),e.$on("ffBlock::EditCancel",function(){f.user.printerCodes=f.prCodesRollback})},f.add=function(){f.editMode||e.$broadcast("ffBlock::EditStart"),f.user.printerCodes.push(l.printerCode.new())},f.save=function(){var e=[];return f.user.printerCodes.forEach(function(r){var t=n.find(f.prCodesRollback,r.id);t&&t.code===r.code||e.push(l.printerCode.save(a.getCurrentCenterId(),f.user.id,r).catch(function(e){return s.error(e,"Failed to save printer code.")}))}),f.prCodesRollback.forEach(function(r){n.find(f.user.printerCodes,r.id)||e.push(l.printerCode.delete(a.getCurrentCenterId(),f.user.id,r).catch(function(e){return s.error(e,"Failed to delete printer code.")}))}),t.all(e)},f.delete=function(e){var t=n.findIndex(f.user.printerCodes,e.id);t>=0&&(f.user.printerCodes.splice(t,1),angular.element(r[0].querySelector('form[name="ffBlockForm"]')).scope().ffBlockForm.$setDirty())}}])},aT6e:function(e,r){e.exports='<ff-panel id=upLeadSource ng-if=$ctrl.schema.leadSource ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><req translate=USER_PROFILE.LEAD_SOURCE.HEADER></req></ff-panel-header> <label class=ff-row> <ff-select name=leadSource ff-model=$ctrl.user.leadSource ff-options="opt.name for opt in $ctrl.user.options.leadSources" ff-required=true ff-validate-alert="{{\'USER_PROFILE.LEAD_SOURCE.SOURCE\' | translate}}"></ff-select> </label> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.leadSource.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},"aj6+":function(e,r){e.exports='<div class="ff-grid gutter-h-half" style=justify-content:flex-start;align-items:center> <ff-row flex="0 0 110px" class="ff-no-frame ff-relative" ng-repeat="card in $ctrl.user.accessCards" id="{{\'upAccessCard-\' + card.id}}"> <ff-text flex=auto name=accessCode ff-model=card.number ff-required=true ff-validate-alert="{{\'USER_PROFILE.LOGIN_INFO.ACCESS_CODE\' | translate}}"></ff-text> <ff-btn flex=none style=z-index:3 sense=delete size=xs ff-click=$ctrl.delete(card) ng-show=ffBlock.editMode title="{{\'USER_PROFILE.LOGIN_INFO.DELETE_ACCESS_CODE\' | translate}}"></ff-btn> </ff-row> <ff-btn flex=none style="margin:4px 0 4px auto" sense=new size=xs ff-click=$ctrl.add() title="{{\'USER_PROFILE.LOGIN_INFO.ADD_ACCESS_CODE\' | translate}}"></ff-btn> </div> '},auvQ:function(e,r){e.exports='<div id=upAddresses ng-if=$ctrl.schema.addresses class="ff-grid gutter-v gutter-h" ff-section="address in $ctrl.user.addresses" ff-section-new="$ctrl.new($ctrl.center.country.id, $ctrl.center.state.id || $ctrl.center.state)"> <ff-panel ng-if=!$ctrl.user.addresses.length> <ff-panel-header><span translate=USER_PROFILE.ADDRESSES></span></ff-panel-header> <span translate=USER_PROFILE.ADDRESSES.EMPTY></span> </ff-panel> <ff-panel flex="{{ $ctrl.single ? null : {md: \'0 0 50%\'} }}" id="{{\'upAddress-\' + address.id}}" ff-block ff-block-save=$ctrl.save(address) ff-block-delete=$ctrl.delete(address) ff-block-edit-default=$ctrl.isNew(address) ff-block-is-new=$ctrl.isNew(address)> <ff-panel-header><span translate=USER_PROFILE.ADDRESS></span></ff-panel-header> <fieldset dw-address=address dw-address-type=true></fieldset> <ff-btn-group class=ff-block-buttons ng-if=!$ctrl.schema.addresses.$readOnly> <ff-btn ff-btn-block-edit ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-delete ng-if="($ctrl.isNew(address) ? $ctrl.user.addresses.length : $ctrl.countExisting()) > 1" ng-hide="ffBlock.editMode && !$ctrl.reg.new"></ff-btn> <ff-btn ff-btn-block-save ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-cancel ng-if=!$ctrl.reg.new></ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=ff-btn-full ng-if="!$ctrl.schema.addresses.$readOnly && !$ctrl.single"> <ff-btn ff-btn-section-new> <span translate=GLOBAL.BTN_NEW></span> <span translate=USER_PROFILE.ADDRESS></span> </ff-btn> </ff-btn-group> </div> '},cdCP:function(e,r){e.exports='<ff-panel id=upMembership ng-if=$ctrl.schema.membership ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.MEMBERSHIP.HEADER></span></ff-panel-header> <label class=ff-row ng-if="$ctrl.schema.membership.membershipStatus !== false"> <ff-label flex="0 1 116px"><req translate=USER_PROFILE.MEMBERSHIP.STATUS></req></ff-label> <ff-select name=status ff-model=$ctrl.user.membershipStatus ff-options="status.name for status in $ctrl.membStatuses" ff-required=true ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.STATUS\' | translate}}" ff-change=$ctrl.onChangeStatus()></ff-select> </label> <label class=ff-row ng-if="vm.reg && ($ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\')"> <ff-label flex="0 1 116px"><req translate=USER_PROFILE.MEMBERSHIP.CATEGORY></req></ff-label> <ff-select name=type ff-model=$ctrl.user.membershipType ff-options="type.name for type in $ctrl.user.options.membershipTypes" ff-required=true ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.CATEGORY\' | translate}}"></ff-select> </label> <label class=ff-row ng-if="vm.reg && ($ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\')"> <ff-label flex="0 1 116px"><req translate=USER_PROFILE.MEMBERSHIP.PLAN></req></ff-label> <ff-select name=plan ff-model=$ctrl.user.membershipProduct ff-options="product.name for product in $ctrl.user.membershipType.membershipPackages" ff-required=true ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.PLAN\' | translate}}"></ff-select> </label> <label class=ff-row ng-if="$ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\'"> <ff-label flex="0 1 116px"> <span> <req translate=USER_PROFILE.MEMBERSHIP.PRICE_LIST></req> <ff-hint hint-type=warning ng-if="ffBlock.editMode && !$ctrl.reg && $ctrl.priceListOrig !== $ctrl.user.membershipPriceList"> <span translate=USER_PROFILE.MEMBERSHIP.PRICE_LIST.CHANGE_WARNING></span> </ff-hint> </span> </ff-label> <ff-select name=priceList ff-model=$ctrl.user.membershipPriceList ff-options="plist.name for plist in $ctrl.user.options.membershipPriceLists" ff-required=true ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.PRICE_LIST\' | translate}}"></ff-select> </label> <label class=ff-row ng-if="vm.reg && ($ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\')"> <ff-label flex="0 1 116px" ff-required=true><span translate=USER_PROFILE.MEMBERSHIP.START_DATE></span></ff-label> <ff-date name=membershipStartDate ff-model=$ctrl.user.membershipStartDate ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.START_DATE\' | translate}}"></ff-date> </label> <label class=ff-row ng-if="$ctrl.schema.membership.attachedReservationUnit !== false"> <ff-label flex="0 0 116px" class=ff-small> <span translate=USER_PROFILE.MEMBERSHIP.ATTACHED_RESERVATION_UNIT></span> <ff-hint> <span translate=USER_PROFILE.MEMBERSHIP.ATTACHED_RESERVATION_UNIT.HINT></span> </ff-hint> </ff-label> <ff-select ff-model=$ctrl.user.attachedReservationUnit name=attachedReservationUnit ff-options="resUnit.name for resUnit in $ctrl.reservationUnits" ff-dim=!$ctrl.reservationUnits> </ff-select> </label> <label class=ff-row ng-if="$ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\'"> <ff-label flex="0 1 116px" ff-required=true><span translate=USER_PROFILE.MEMBERSHIP.BILLING_METHOD></span></ff-label> <ff-select name=billingMethod ff-model=$ctrl.user.membershipBillingMethod ff-options="method.name for method in $ctrl.billingMethods" ff-required=true ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.BILLING_METHOD\' | translate}}"></ff-select> </label> <kisi-access-group user-id=$ctrl.user.id save=$ctrl.kisiSave ng-if="$ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\'"></kisi-access-group> <ezeep-group user-id=$ctrl.user.id save=$ctrl.ezeepSave></ezeep-group> <label class=ff-row ng-if="$ctrl.user.makeRecurringBillingsInactive !== undefined"> <ff-checkbox name=makeRecurringBillingsInactive ff-model=$ctrl.user.makeRecurringBillingsInactive> <span translate=USER_PROFILE.MEMBERSHIP.INACTIVATE_RECURRING_BILLINGS></span> </ff-checkbox> </label> <label class=ff-row ng-if="$ctrl.user.makeCoMembersInactive !== undefined && $ctrl.user.coMembers.length"> <ff-checkbox name=makeCoMembersInactive ff-model=$ctrl.user.makeCoMembersInactive> <span translate=USER_PROFILE.MEMBERSHIP.INACTIVATE_CO_MEMBERS></span> </ff-checkbox> </label> <ff-row ng-if="$ctrl.user.membershipStatus.id === \'nonMember\' && $ctrl.user.selfRegistrationStatus"> <ff-label> <span class=text-warning ng-if="$ctrl.user.selfRegistrationStatus === \'abandoned\'"> <ff-icon sense=warning class=ff-flex-start></ff-icon> <span translate=USER_PROFILE.MEMBERSHIP.SIGN_UP.ABANDONED></span> </span> <span class=text-warning ng-if="$ctrl.user.selfRegistrationStatus === \'staffHelp\'"> <ff-icon sense=warning class=ff-flex-start></ff-icon> <span translate=USER_PROFILE.MEMBERSHIP.SIGN_UP.STAFF_HELP></span> </span> <span class=text-primary ng-if="$ctrl.user.selfRegistrationStatus === \'inProgress\'"> <ff-icon sense=info class=ff-flex-start></ff-icon> <span translate=USER_PROFILE.MEMBERSHIP.SIGN_UP.IN_PROGRESS></span> </span> </ff-label> </ff-row> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.membership.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> <ff-btn sense=reset size=sm ff-click=$ctrl.resetSelfRegistrationStatus() ng-if="$ctrl.user.membershipStatus.id === \'nonMember\' && $ctrl.user.selfRegistrationStatus === \'abandoned\'"> <span translate=USER_PROFILE.MEMBERSHIP.BTN_RESET_ABANDONED></span> </ff-btn> <ff-btn sense=reset size=sm ff-click=$ctrl.resetSelfRegistrationStatus() ng-if="$ctrl.user.membershipStatus.id === \'nonMember\' && $ctrl.user.selfRegistrationStatus === \'staffHelp\'"> <span translate=USER_PROFILE.MEMBERSHIP.BTN_RESET_STAFF_HELP></span> </ff-btn> <ff-btn sense=delete size=sm ff-click=$ctrl.deleteUser() ng-if="state.isLoggedAdmin() && !state.isLoggedRole(\'coordinator\') && !$ctrl.reg"> <span translate=USER_PROFILE.MEMBERSHIP.BTN_DELETE_USER></span> </ff-btn> </ff-btn-group> </ff-panel> '},e8sX:function(e,r){e.exports='<ff-panel id=upTermsOfService ng-if="$ctrl.schema.termsOfService && $ctrl.user.isNew()" class=ff-no-frame> <ff-panel-header style=margin-bottom:.5rem><req translate=USER_PROFILE.TERMS_OF_SERVICE.HEADER></req></ff-panel-header> <label class=ff-row> <ff-checkbox ff-model=$ctrl.user.termsOfService flex="0 0 36px" class=ff-center ff-required=true ff-validate-alert="{ required: (\'USER_PROFILE.TERMS_OF_SERVICE.REQUIRED\' | translate) }" title="{{\'USER_PROFILE.TERMS_OF_SERVICE.REQUIRED\' | translate}}"> </ff-checkbox> <ff-label> <span> <span translate=USER_PROFILE.TERMS_OF_SERVICE.LABEL></span> <a ng-href={{wlLinks.tosLinkUrl}} ng-bind=wlLinks.tosLinkText target=_blank rel=noopener></a> </span> </ff-label> </label> </ff-panel> '},"gB/y":function(e,r){e.exports='<div class=dw-modal> <div class=dw-modal-fade ng-click=close()></div> <div class="dw-modal-dialog our-member-modal"> <div class=dw-modal-scroll> <div class=our-member-header> <ff-img ff-src={{::member.photo}} ng-if=::member.photo></ff-img> <div class=our-member-details> <h4>{{::member.name}}</h4> <h5>{{::member.occupation}}</h5> <h6>{{::member.company}}</h6> <div class=our-member-contacts ng-if="::emails.length || phones.length"> <div class=our-member-emails ng-if=::emails.length> <span ng-repeat="field in ::emails"> <i class="fa fa-at"></i> <a ng-href=mailto:{{::field.value}} target=_blank rel=noopener>{{::field.value}}</a> </span> </div> <div class=our-member-phones ng-if=::phones.length> <span ng-repeat="field in ::phones"> <i class="fa fa-phone"></i> <a ng-href=tel:{{::field.value}} target=_blank rel=noopener>{{::field.value}}</a> </span> </div> </div> <div class=our-member-urls ng-if=::urls.length> <span ng-repeat="field in ::urls"> <a ng-href={{::field.value}} target=_blank rel=noopener title={{::field.name}}><i class=fa ng-class=::field.icon></i></a> </span> </div> </div> </div> <div ng-repeat="field in ::fields" class=our-member-field> <span>{{::field.name}}:</span>&nbsp;<span>{{::field.type === \'date\' ? (field.value | date:\'mediumDate\') : field.value}}</span> </div> </div> <button class=dw-modal-cross ng-click=close()></button> </div> </div> '},i0NF:function(e,r){angular.module("deskworks.upPhones",["deskworks.helper","deskworks.state","deskworks.userProfile.service"]).directive("upPhones",function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-phones.tpl.html",controller:"upPhonesCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",single:"<"}}}).controller("upPhonesCtrl",["$scope","$q","$window","$translate","dwAlerts","helper","state","userProfileService","optsPhoneType",function(e,r,t,s,n,a,l,f,o){"use strict";var i=this;i.types=o.map(function(e){return angular.extend(e,{name:s.instant(e.name)})}),i.new=f.phone.new,i.isNew=f.phone.isNew,i.countExisting=function(){return i.user.phones.reduce(function(e,r){return a.isUid(r.id)?e:e+1},0)},i.save=function(e){return f.phone.save(l.getCurrentCenterId(),i.user.id,e).catch(function(e){return n.error(e,"Failed to save phone.")})},i.delete=function(e){return f.phone.isNew(e)?r.when():t.confirm(s.instant("USER_PROFILE.PHONES.CONFIRM_DELETE"))?f.phone.delete(l.getCurrentCenterId(),i.user.id,e).catch(function(e){return n.error(e,"Failed to delete phone.")}):r.reject()}}])},jtA9:function(e,r){e.exports='<ff-panel id=upCustomFields ng-if="$ctrl.schema.customFields && $ctrl.fields.length" ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.CUSTOM_FIELDS.HEADER></span></ff-panel-header> <ff-col ff-dim=!$ctrl.fields> <fd-field field=field ng-repeat="field in $ctrl.fields"></fd-field> </ff-col> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.customFields.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},kULM:function(e,r,t){"use strict";t.r(r);t("it7j");var s=t("2/1H");r.default=angular.module("deskworks.upMembership",["deskworks.helper","deskworks.state","deskworks.userProfile.service",s.a.name]).directive("upMembership",function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-membership.tpl.html",controller:"upMembershipCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",kisiSave:"=",ezeepSave:"="}}}).controller("upMembershipCtrl",["$scope","$timeout","$window","$translate","$filter","$injector","$q","dwAlerts","state","helper","userProfileService","ReservationUnit","optsMembershipStatus","optsBillingMethod",function(e,r,t,s,n,a,l,f,o,i,c,u,d,m){var p,b=this;b.$onInit=function(){b.billingMethods=m,b.kisi=a.has("kisiAccessGroupDirective"),b.ezeep=a.has("ezeepGroupDirective"),b.membStatuses=d.filter(function(e){return!b.reg||!b.reg.member&&"nonMember"===e.id||b.reg.member&&("active"===e.id||"inactive"===e.id)}),b.schema.membership&&!1!==b.schema.membership.attachedReservationUnit&&u.query(o.getCurrentCenterId()).then(function(e){e.unshift({name:s.instant("USER_PROFILE.MEMBERSHIP.ATTACHED_RESERVATION_UNIT.NONE")}),b.user.attachedReservationUnit=i.find(e,o.getParam("attachedReservationUnitId")),b.reservationUnits=e.filter(function(e){return!e.attachedUserId||e.id==(b.user.attachedReservationUnit&&b.user.attachedReservationUnit.id)})}).catch(function(e){return f.error(e,"Failed to query Reservation Units")}),e.$on("ffBlock::EditStart",function(){p=b.user.membershipStatus,b.priceListOrig=b.user.membershipPriceList,delete b.user.makeRecurringBillingsInactive,delete b.user.makeCoMembersInactive}),e.$on("ffBlock::EditEnd",function(){delete b.user.makeRecurringBillingsInactive,delete b.user.makeCoMembersInactive})},b.save=function(){var e={};return"active"!==b.user.membershipStatus.id&&"inactive"!==b.user.membershipStatus.id||(e={membershipStatus:b.user.membershipStatus.id,membershipPriceListId:b.user.membershipPriceList.id,membershipBillingMethod:b.user.membershipBillingMethod.id,makeRecurringBillingsInactive:b.user.makeRecurringBillingsInactive,selfRegistrationStatus:null},b.user.coMembers&&b.user.coMembers.length&&(e.makeCoMembersInactive=b.user.makeCoMembersInactive)),b.schema.membership&&!1!==b.schema.membership.attachedReservationUnit&&(o.setParam("attachedReservationUnitId",b.user.attachedReservationUnit&&b.user.attachedReservationUnit.id),o.replace()),c.updateRaw(o.getCurrentCenterId(),b.user,e).catch(function(e){return f.error(e,"Failed to save membership.")}).then(function(){b.user.selfRegistrationStatus=null}).then(function(){if(b.kisiSave)return b.kisiSave()}).then(function(){if(b.ezeepSave)return b.ezeepSave()})},b.onChangeStatus=function(){!b.reg&&p&&("inactive"===b.user.membershipStatus.id&&"active"===p.id?(b.user.makeRecurringBillingsInactive=!0,b.user.makeCoMembersInactive=!0):(delete b.user.makeRecurringBillingsInactive,delete b.user.makeCoMembersInactive))},b.resetSelfRegistrationStatus=function(){return c.updateRaw(o.getCurrentCenterId(),b.user,{selfRegistrationStatus:null}).catch(function(e){return f.error(e,"Failed to reset abandoned self-registration status.")}).then(function(){r(function(){b.user.selfRegistrationStatus=null})})},b.deleteUser=function(){if(t.confirm(s.instant("USER_PROFILE.MEMBERSHIP.CONFIRM_DELETE_USER")))return c.delete(o.getCurrentCenterId(),b.user.id).catch(function(e){return f.error(e,"Failed to delete user.")}).then(function(){return o.setCurrentUser(null)})}}])},l7tb:function(e,r){e.exports='<div id=upCreditCards class="ff-grid gutter-v gutter-h" ff-section="cc in $ctrl.user.creditCards" ff-section-new=$ctrl.new()> <ff-panel flex="{{ $ctrl.single ? null : {lg: \'0 0 50%\'} }}" ng-if=!$ctrl.user.creditCards.length> <span translate=BILLING_PROFILE.CREDIT_CARDS.EMPTY></span> </ff-panel> <ff-panel flex="{{ $ctrl.single ? null : {lg: \'0 0 50%\'} }}" id="{{\'upCreditCard-\' + cc.id}}" ff-block ff-block-save=$ctrl.save(cc) ff-block-delete=$ctrl.delete(cc) ff-block-edit-default=$ctrl.isNew(cc) ff-block-is-new=$ctrl.isNew(cc)> <div class="ff-grid gutter-v"> <ff-panel> <ff-panel-header><span translate=BILLING_PROFILE.CREDIT_CARDS.HEADER></span></ff-panel-header> <fieldset dw-credit-card=cc dw-credit-card-types=$ctrl.settings.creditCardTypes></fieldset> </ff-panel> <ff-panel> <ff-panel-header><span translate=BILLING_PROFILE.CREDIT_CARDS.ADDRESS></span></ff-panel-header> <fieldset dw-address=cc not-required=$ctrl.settings.creditCardAddressOptional></fieldset> </ff-panel> </div> <ff-btn-group class=ff-block-buttons ng-if="!$ctrl.user.accessRights.billingInfo.readOnly && !$ctrl.single"> <ff-btn ff-btn-block-delete ng-if="$ctrl.hasDeleteButton(cc, ffBlock)" ng-hide=false></ff-btn> <ff-btn ff-btn-block-save ng-if=!$ctrl.reg></ff-btn> <ff-btn ff-btn-block-cancel ng-if=!$ctrl.reg></ff-btn> <ff-btn sense=favorite size=sm ng-if=cc.defaultPaymentMethod title="{{\'BILLING_PROFILE.BTN_DEFAULT_PAYMENT_METHOD.HINT\' | translate}}"> <span translate=BILLING_PROFILE.BTN_DEFAULT_PAYMENT_METHOD></span> </ff-btn> <ff-btn sense=makeFavorite size=sm ng-if="!cc.defaultPaymentMethod && !$ctrl.isNew(cc)" ff-click=$ctrl.makeDefault(cc) title="{{\'BILLING_PROFILE.BTN_SET_DEFAULT_PAYMENT_METHOD.HINT\' | translate}}"> <span translate=BILLING_PROFILE.BTN_SET_DEFAULT_PAYMENT_METHOD></span> </ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=ff-btn-full ng-if="!$ctrl.user.accessRights.billingInfo.readOnly && !$ctrl.single"> <ff-btn ff-btn-section-new><span translate=BILLING_PROFILE.CREDIT_CARDS.BTN_ADD></span></ff-btn> </ff-btn-group> </div> '},"m2t+":function(e,r){angular.module("deskworks.members.userProfile.edit",["deskworks.routeHelper","deskworks.helper","deskworks.setup.service","deskworks.userProfile.service","deskworks.UserProfileFields"]).config(["$routeProvider",function(e){"use strict";e.when("/profile",{template:"<div ng-include=\"'members/user-profile/user-profile.tpl.html'\" ff-bulk-read-only></div>",controller:"UserProfileEditCtrl as vm",label:"Profile",routeBranch:"profile",translations:["user-profile"],resolve:{reg:angular.noop,userProfile:["dwAlerts","userProfileService","state","routeHelper","resolveTimezone",function(e,r,t,s,n){return s.auth().then(function(){return s.selectUser().then(function(){return n()}).then(function(){return r.get(t.getCurrentCenterId(),t.getCurrentUserId()).catch(function(r){return e.error(r,"Failed to load user profile.")})})})}],center:["state","centerService",function(e,r){return e.getCurrentCenterId()?r.get(e.getCurrentCenterId()):{}}],lazyKisi:"lazyLoadKisi",lazyEzeep:"lazyLoadEzeep"}}),e.when("/new-member/:userId",{template:"<div ng-include=\"'members/user-profile/user-profile.tpl.html'\" ff-bulk-read-only></div>",controller:"UserProfileEditCtrl as vm",label:"New Member",routeBranch:"new-member",translations:["user-profile"],resolve:{reg:function(){return{member:!0,selfRegistration:!1,step:1,stepCount:3}},userProfile:["$route","dwAlerts","state","userProfileService","routeHelper","resolveTimezone",function(e,r,t,s,n,a){return n.auth().then(function(){return a()}).then(function(){return s.getForRegistration(t.getCurrentCenterId(),e.current.params.userId,"member","register").catch(function(e){return r.error(e,"Failed to load user profile.")})})}],center:["state","centerService",function(e,r){return e.getCurrentCenterId()?r.get(e.getCurrentCenterId()):{}}],lazyKisi:"lazyLoadKisi",lazyEzeep:"lazyLoadEzeep"}}),e.when("/new-user/:userId",{template:"<div ng-include=\"'members/user-profile/user-profile.tpl.html'\" ff-bulk-read-only></div>",controller:"UserProfileEditCtrl as vm",label:"New User",routeBranch:"new-user",translations:["user-profile"],resolve:{reg:function(){return{member:!1,selfRegistration:!1,step:1,stepCount:2}},userProfile:["$route","dwAlerts","state","userProfileService","routeHelper","resolveTimezone",function(e,r,t,s,n,a){return n.auth().then(function(){return a()}).then(function(){return s.getForRegistration(t.getCurrentCenterId(),e.current.params.userId,"nonMember","register").catch(function(e){return r.error(e,"Failed to load user profile.")})})}],center:["state","centerService",function(e,r){return e.getCurrentCenterId()?r.get(e.getCurrentCenterId()):{}}]}})}]).controller("UserProfileEditCtrl",["$scope","$translate","$filter","dwAlerts","state","helper","reg","userProfile","userProfileService","setupService","center","UserProfileFields",function(e,r,t,s,n,a,l,f,o,i,c,u){"use strict";var d=this;if(l)n.setPageTitle(l.member?"New Member Registration":"New Non-Member Registration");else{var m=r.instant("USER_PROFILE.PAGE_TITLE",{userName:f.firstName+" "+f.lastName});n.setPageTitle(m)}d.reg=l,d.center=c,d.userProfile=f,d.schema=f.schema,d.reg&&d.reg.member&&(d.userProfile.options.membershipTypes.some(function(e){var r=a.findByKeyValue(e.membershipPackages,"id",n.getParam("productId"));return r&&(d.userProfile.membershipType=e,d.userProfile.membershipProduct=r),!!r}),n.getParam("membershipStartDate")&&(d.userProfile.membershipStartDate=t("toDate")(n.getParam("membershipStartDate")))),d.reg||i.getSetupSettings().then(function(e){d.settings=e}).catch(function(e){return s.error(e,"Failed to get setup settings.")}).catch(angular.noop),(d.schema.customFields||d.schema.shareable)&&u.query(n.getCurrentCenterId(),d.userProfile.id).then(function(e){d.customFields=e.filter(function(e){return"customFields"===e.section}),d.shareable=e.filter(function(e){return"shareable"===e.section})}).catch(function(e){return s.error(e,"Failed to query user profile fields.")}).catch(angular.noop),d.next=function(){return n.setParam("productId",(d.userProfile.membershipProduct||{}).id),n.setParam("membershipStartDate",t("date")(d.userProfile.membershipStartDate,"yyyy-MM-dd")),n.setPath(n.getPath()+"/membership/billing-profile")}}])},ovSQ:function(e,r,t){"use strict";t.r(r);t("zTcH");angular.module("deskworks.upLoginInfo",["deskworks.upAccessCodes","deskworks.messageBoardUserSettings"]).directive("upLoginInfo",function(){return{templateUrl:"members/user-profile/sections/up-login-info.tpl.html",restrict:"E",scope:!0,controller:"upLoginInfoCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",memberDirectoryUrl:"<"}}}).controller("upLoginInfoCtrl",["$scope","$q","dwAlerts","state","userProfileService",function(e,r,t,s,n){var a=this;e.$watch("$ctrl.saveMessageBoardUserSettings",function(){a.user.saveMessageBoardUserSettings=a.saveMessageBoardUserSettings}),a.save=function(){var e={login:a.user.login,password:a.user.password,passwordConfirmation:a.user.passwordConfirmation};return r.all([n.updateRaw(s.getCurrentCenterId(),a.user,e).catch(function(e){return t.error(e,"Failed to save login information.")}),a.saveAccessCards&&a.saveAccessCards().catch(function(e){return t.error(e,"Failed to save access cards.")}),a.saveMessageBoardUserSettings&&a.saveMessageBoardUserSettings().catch(function(e){return t.error(e,"Failed to save message board user settings.")})])}}])},pp4h:function(e,r,t){"use strict";t.r(r),r.default=angular.module("deskworks.upTermsOfService",["deskworks.helper","deskworks.state"]).directive("upTermsOfService",function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-terms-of-service.tpl.html",controller:"upTermsOfServiceCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}}).controller("upTermsOfServiceCtrl",function(){})},qgYx:function(e,r,t){},sLGz:function(e,r){e.exports='<ff-panel id=upLoginInfo ng-if=$ctrl.schema.loginInfo ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.LOGIN_INFO.HEADER></span></ff-panel-header> <label class=ff-row> <ff-label flex="0 1 132px"><req translate=GLOBAL.LOGIN></req></ff-label> <ff-login name=login ff-model=$ctrl.user.login ff-required=true dw-login></ff-login> </label> <label class=ff-row> <ff-label flex="0 1 132px"><req translate=GLOBAL.PASSWORD></req></ff-label> <ff-password name=password ff-model=$ctrl.user.password ff-required={{$ctrl.reg.new}} dw-password ff-not-contain="[$ctrl.user.login, $ctrl.user.login.split(\'\').reverse().join(\'\'), $ctrl.user.firstName, $ctrl.user.lastName]" ff-validate-alert=\'{ "notContain": "{{&#39;GLOBAL.PASSWORD.NOT_CONTAIN&#39; | translate}}" }\'></ff-password> </label> <label class=ff-row> <ff-label flex="0 1 132px" class=ff-small><req translate=USER_PROFILE.LOGIN_INFO.PASSWORD_CONF></req></ff-label> <ff-password name=passwordConfirmation ff-model=$ctrl.user.passwordConfirmation dw-password ff-required={{$ctrl.reg.new}} ff-match=ffBlockForm.password.$viewValue ff-validate-alert=\'{ "field": "{{&#39;USER_PROFILE.LOGIN_INFO.PASSWORD_CONF&#39; | translate}}", "matchField": "{{&#39;GLOBAL.PASSWORD&#39; | translate}}" }\'> </ff-password> </label> <ff-row ng-if=$ctrl.schema.accessCodes> <ff-label flex="0 1 132px"><span translate=USER_PROFILE.LOGIN_INFO.ACCESS_CODES></span></ff-label> <ff-static> <up-access-codes flex=auto user-profile=$ctrl.user save=$ctrl.saveAccessCards></up-access-codes> </ff-static> </ff-row> <label class=ff-row ng-if="$ctrl.schema.loginInfo.memberDirectory !== false && $ctrl.memberDirectoryUrl"> <ff-label flex="0 1 132px"><span translate=USER_PROFILE.LOGIN_INFO.MEMBER_DIRECTORY></span></ff-label> <ff-static name=memberDirectory class=ff-small> <a ng-href={{$ctrl.memberDirectoryUrl}} target=_blank rel=noopener> <span translate=USER_PROFILE.LOGIN_INFO.MEMBER_DIRECTORY_LINK></span> </a> </ff-static> </label> <message-board-user-settings user-id=$ctrl.user.id save=$ctrl.saveMessageBoardUserSettings ng-if="$ctrl.schema.loginInfo && $ctrl.schema.loginInfo.messageBoardNotices !== false"></message-board-user-settings> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.loginInfo.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},tCyP:function(e,r){angular.module("deskworks.upShareable",["deskworks.userProfile.service","deskworks.UserProfileFields","deskworks.optsShareEmail"]).directive("upShareable",function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-shareable.tpl.html",controller:"upShareableCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",fields:"<"}}}).controller("upShareableCtrl",["$scope","$q","dwAlerts","state","userProfileService","UserProfileFields","optsShareEmail",function(e,r,t,s,n,a,l){"use strict";var f=this;f.$onInit=function(){f.optsShareEmail=l},f.save=function(){var l={sharePhoto:f.user.sharePhoto,shareCompany:f.user.shareCompany,shareOccupation:f.user.shareOccupation,shareEmail:f.user.shareEmail};return r.all([n.updateRaw(s.getCurrentCenterId(),f.user,l).then(function(){return e.$emit("CurrentUser:refresh")}).catch(function(e){return t.error(e,"Failed to save user shareable info.")}).catch(angular.noop),a.save(s.getCurrentCenterId(),f.user.id,f.fields).catch(function(e){return t.error(e,"Failed to save user profile fields.")}).catch(angular.noop)])}}])},zcfi:function(e,r){e.exports='<div id=upPhones ng-if=$ctrl.schema.phones class="ff-grid gutter-v gutter-h" ff-section="phone in $ctrl.user.phones" ff-section-new=$ctrl.new()> <ff-panel ng-if=!$ctrl.user.phones.length> <ff-panel-header><span translate=USER_PROFILE.PHONES></span></ff-panel-header> <span translate=USER_PROFILE.PHONES.EMPTY></span> </ff-panel> <ff-panel flex="{{ $ctrl.single ? null : {md: \'0 0 50%\'} }}" id="{{\'upPhone-\' + phone.id}}" ff-block ff-block-save=$ctrl.save(phone) ff-block-delete=$ctrl.delete(phone) ff-block-edit-default=$ctrl.isNew(phone) ff-block-is-new=$ctrl.isNew(phone)> <ff-panel-header><span translate=USER_PROFILE.PHONE></span></ff-panel-header> <label class=ff-row> <ff-label flex="0 1 116px"><req translate=USER_PROFILE.PHONES.TYPE></req></ff-label> <ff-select name=type ff-model=phone.type ff-options="type.name for type in $ctrl.types" ff-required=true ff-validate-alert="{{\'USER_PROFILE.PHONES.TYPE\' | translate}}"></ff-select> </label> <ff-row> <label flex="1 1 auto"> <ff-label flex="0 1 116px"><req translate=USER_PROFILE.PHONES.NUMBER></req></ff-label> <ff-text name=number ff-model=phone.number ff-required=true dw-phone placeholder=888-379-2865></ff-text> </label> <label flex="0 0 78px"> <ff-label flex="0 1 34px"><span translate=USER_PROFILE.PHONES.EXT></span></ff-label> <ff-text name=ext ff-model=phone.ext></ff-text> </label> </ff-row> <ff-btn-group class=ff-block-buttons ng-if=!$ctrl.schema.phones.$readOnly> <ff-btn ff-btn-block-edit ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-delete ng-if="($ctrl.isNew(phone) ? $ctrl.user.phones.length : $ctrl.countExisting()) > 1" ng-hide="ffBlock.editMode && !$ctrl.reg.new"></ff-btn> <ff-btn ff-btn-block-save ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-cancel ng-if=!$ctrl.reg.new></ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=ff-btn-full ng-if="!$ctrl.schema.phones.$readOnly && !$ctrl.single"> <ff-btn ff-btn-section-new> <span translate=GLOBAL.BTN_NEW></span> <span translate=USER_PROFILE.PHONE></span> </ff-btn> </ff-btn-group> </div> '}}]);