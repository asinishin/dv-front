(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"0YJG":function(e,r,t){"use strict";t.r(r);var s=t("0zKI"),n=t.n(s),l=t("xeXu"),a=t.n(l),f=t("nbuU"),o=t.n(f),i=t("WSeP"),c=t.n(i);angular.module("deskworks.upAccessCodes",[]).directive("upAccessCodes",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-access-codes.tpl.html",controller:"upAccessCodesCtrl as $ctrl",bindToController:{user:"<userProfile",save:"="}}})).controller("upAccessCodesCtrl",["$scope","$q","$filter","$timeout","state","helper","systemService",function(e,r,t,s,l,f,i){var u=this;function d(){var e=[];return c()(angular).call(angular,u.user.accessCards,(function(r){var t=o()(f).call(f,u.rollback,r.id);if(!t||t.number!==r.number){var s={number:r.number,userId:u.user.userId||u.user.id};r.id&&"new"!==r.id?e.push(i.updateAccessCard(l.getCurrentCenterId(),r.id,s)):e.push(i.createAccessCard(l.getCurrentCenterId(),s).then((function(e){r.id=e.id})))}})),c()(angular).call(angular,u.rollback,(function(r){f.findByKeyValue(u.user.accessCards,"id",r.id)||e.push(i.removeAccessCard(l.getCurrentCenterId(),r.id))})),r.all(e)}u.$onInit=function(){u.save=d,e.$watch("ffBlock.editMode",(function(e){e&&(u.rollback=angular.copy(u.user.accessCards))})),e.$on("ffControl::EditCancel",(function(){e.ffBlock.editMode&&(u.user.accessCards=u.rollback||u.user.accessCards,u.rollback=null)}))},u.add=function(){e.ffBlock.editMode||e.$emit("ffBlock::EditStart"),i.getAccessCard(l.getCurrentCenterId(),"new").then((function(e){s((function(){return u.user.accessCards.push(e)}))}))},u.delete=function(r){var t,s,l=a()(t=u.user.accessCards).call(t,r);l>=0&&(n()(s=u.user.accessCards).call(s,l,1),e.ffBlockForm.$setDirty())}}])},"1TsL":function(e,r,t){},"2M2i":function(e,r,t){"use strict";t.r(r);var s=t("iAzO"),n=t("DVTZ"),l=t("yrhy"),a=t("XRrO"),f=t("Oio6"),o=t("Tjft");r.default=angular.module("deskworks.upCoMembers",["deskworks.helper","deskworks.state","deskworks.userProfile.service",s.a.name,n.a.name,l.a.name,a.a.name,f.a.name,o.a.name]).directive("upCoMembers",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-co-members.tpl.html",controller:"upCoMembersCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upCoMembersCtrl",["$scope","$q","dwAlerts","dwModal","helper","state","userProfileService",function(e,r,t,s,n,l,a){var f=this;f.exUserCollapsed=!0,f.new=a.coMember.new,f.isNew=a.coMember.isNew,f.makeCoMemberInactive=!0,f.save=function(e){return a.coMember.save(l.getCurrentCenterId(),f.user.id,e).catch((function(e){return t.error(e,"Failed to save co-member.")})).then((function(){return e.saveAccessCards?e.saveAccessCards().catch((function(e){return t.error(e,"Failed to save access cards.")})):null}))},f.delete=function(r){return s.show({scope:e,templateUrl:"DeleteCoMemberTpl",controller:["$scope","close",function(e,r){e.close=r}]}).then((function(e){return e.element[0].querySelector("button[type=submit]").focus(),e.close.then((function(e){if(!e)throw"modal cancel"}))})).then((function(){return a.coMember.delete(l.getCurrentCenterId(),f.user.id,r,f.makeCoMemberInactive).catch((function(e){return t.error(e,"Failed to delete co-member.")}))}))},f.isNewExisting=function(e){return(e.userId||e.existingUserId)&&n.isUid(e.id)},f.newExisting=function(e){return a.get(l.getCurrentCenterId(),e.id).catch((function(e){return t.error(e,"Failed to get user profile.")})).then((function(e){f.user.coMembers.push(a.coMember.convertUserToCoMember(e)),delete f.quickUser}))}}])},"2cun":function(e,r){angular.module("deskworks.upMailboxes",["deskworks.helper","deskworks.state","deskworks.userProfile.service"]).directive("upMailboxes",(function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-mailboxes.tpl.html",controller:"upMailboxesCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upMailboxesCtrl",["$scope","$window","$q","$translate","dwAlerts","helper","state","userProfileService","optsMailboxHandling",function(e,r,t,s,n,l,a,f,o){"use strict";var i=this;i.handlingOpts=o,i.new=f.mailbox.new,i.isNew=f.mailbox.isNew,i.save=function(e){return f.mailbox.save(a.getCurrentCenterId(),i.user.id,e).catch((function(e){return n.error(e,"Failed to save mailbox.")}))},i.delete=function(e){return r.confirm(s.instant("USER_PROFILE.MAILBOXES.CONFIRM_DELETE"))?f.mailbox.delete(a.getCurrentCenterId(),i.user.id,e).catch((function(e){return n.error(e,"Failed to delete mailbox.")})):t.reject()}}])},3658:function(e,r,t){"use strict";t.r(r);var s=t("bfRn"),n=t("+Ie/");r.default=angular.module("deskworks.upCreditCards",["deskworks.helper","deskworks.state","deskworks.userProfile.service",s.a.name,n.a.name]).directive("upCreditCards",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/billing-sections/up-credit-cards.tpl.html",controller:"upCreditCardsCtrl as $ctrl",bindToController:{user:"<userProfile",reg:"<",settings:"<",single:"<"}}})).controller("upCreditCardsCtrl",["$scope","$element","$attrs","$q","$window","$translate","dwAlerts","helper","state","userProfileService",function(e,r,t,s,n,l,a,f,o,i){var c=this;c.new=function(){var e=i.creditCard.new(c.user);return e.type=c.settings.creditCardTypes[0],e},c.isNew=i.creditCard.isNew,c.hasDeleteButton=function(e,r){return c.single?!c.isNew(e):!r.editMode||c.reg},c.save=function(e){return i.creditCard.save(o.getCurrentCenterId(),c.user.id,e).catch((function(e){return a.error(e,"Failed to save credit card.")}))},c.delete=function(e){return i.creditCard.isNew(e)?s.when():n.confirm(l.instant("BILLING_PROFILE.CREDIT_CARDS.CONFIRM_DELETE"))?i.creditCard.delete(o.getCurrentCenterId(),c.user.id,e).catch((function(e){return a.error(e,"Failed to delete credit card.")})):s.reject()}}])},"3IK2":function(e,r,t){"use strict";t.r(r);var s=t("YtL8"),n=t.n(s),l=t("bfRn");r.default=angular.module("deskworks.upAddresses",["deskworks.helper","deskworks.state","deskworks.userProfile.service",l.a.name]).directive("upAddresses",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-addresses.tpl.html",controller:"upAddressesCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",center:"<",single:"<"}}})).controller("upAddressesCtrl",["$scope","$q","$window","$translate","dwAlerts","state","helper","userProfileService","optsAddressType","optsCountry","optsState",function(e,r,t,s,l,a,f,o,i,c,u){var d=this;d.types=i,d.countries=c,d.states=u,d.new=o.address.new,d.isNew=o.address.isNew,d.countExisting=function(){var e;return n()(e=d.user.addresses).call(e,(function(e,r){return f.isUid(r.id)?e:e+1}),0)},d.save=function(e){return o.address.save(a.getCurrentCenterId(),d.user.id,e).catch((function(e){return l.error(e,"Failed to save address.")}))},d.delete=function(e){return o.address.isNew(e)?r.when():t.confirm(s.instant("USER_PROFILE.ADDRESSES.CONFIRM_DELETE"))?o.address.delete(a.getCurrentCenterId(),d.user.id,e).catch((function(e){return l.error(e,"Failed to delete address.")})):r.reject()}}])},"3xdx":function(e,r){e.exports='<ff-panel id=upShareable ng-if=$ctrl.schema.shareable ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header> <span translate=USER_PROFILE.SHAREABLE_INFO.HEADER></span> <ff-hint><span translate=USER_PROFILE.SHAREABLE_INFO.HINT></span></ff-hint> </ff-panel-header> <ff-col ff-dim=!$ctrl.fields> <ff-row> <ff-label flex="0 1 160px"><span translate=USER_PROFILE.SHAREABLE_INFO.PUBLIC_FIELDS></span></ff-label> <ff-static> <div class="ff-grid gutter-h-half"> <label flex="0 0 auto"> <ff-checkbox ff-model=$ctrl.user.sharePhoto> <span translate=USER_PROFILE.PHOTO.HEADER></span> </ff-checkbox> </label> <label flex="0 0 auto"> <ff-checkbox ff-model=$ctrl.user.shareCompany> <span translate=USER_PROFILE.PERSONAL_INFO.COMPANY></span> </ff-checkbox> </label> <label flex="0 0 auto"> <ff-checkbox ff-model=$ctrl.user.shareOccupation> <span translate=USER_PROFILE.PERSONAL_INFO.OCCUPATION></span> </ff-checkbox> </label> </div> </ff-static> </ff-row> <label class=ff-row> <ff-label flex="0 1 160px"><span translate=GLOBAL.EMAIL></span></ff-label> <ff-select name=shareEmail ff-model=$ctrl.user.shareEmail ff-options="opt.id as opt.name for opt in $ctrl.optsShareEmail"></ff-select> </label> <fd-field field=field ng-repeat="field in $ctrl.fields"></fd-field> </ff-col> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.shareable.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},"4jLY":function(e,r,t){},"5KKy":function(e,r){angular.module("deskworks.upLeadSource",["deskworks.userProfile.service"]).directive("upLeadSource",(function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-lead-source.tpl.html",controller:"upLeadSourceCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upLeadSourceCtrl",["$scope","dwAlerts","state","userProfileService",function(e,r,t,s){"use strict";var n=this;n.save=function(){return s.updateRaw(t.getCurrentCenterId(),n.user,{leadSourceId:n.user.leadSource.id}).catch((function(e){return r.error(e,"Failed to save lead source.")}))}}])},"80Eh":function(e,r){e.exports='<ff-panel id=upPersonalInfo ng-if=$ctrl.schema.personalInfo ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.PERSONAL_INFO.HEADER></span></ff-panel-header> <div class="ff-grid gutter-h"> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 116px"><req translate=USER_PROFILE.PERSONAL_INFO.FIRST_NAME></req></ff-label> <ff-text name=firstName ff-model=$ctrl.user.firstName placeholder=John ff-required=true ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.FIRST_NAME\' | translate}}"></ff-text> </label> <ff-row ng-if="$ctrl.schema.personalInfo.middleName !== false"> <label> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PERSONAL_INFO.MIDDLE_NAME></span></ff-label> <ff-text name=middleName ff-model=$ctrl.user.middleName placeholder=James ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.MIDDLE_NAME\' | translate}}"></ff-text> </label> </ff-row> <label class=ff-row> <ff-label flex="0 1 116px"><req translate=USER_PROFILE.PERSONAL_INFO.LAST_NAME></req></ff-label> <ff-text name=lastName ff-model=$ctrl.user.lastName ff-required=true dw-last-name placeholder=Doe ff-change=$ctrl.onChangeLastName()></ff-text> </label> </ff-col> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 116px"><req translate=GLOBAL.EMAIL></req></ff-label> <ff-email name=email ff-model=$ctrl.user.email ff-required=true dw-email placeholder=jdoe@mail.com></ff-email> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PERSONAL_INFO.COMPANY></span></ff-label> <ff-text name=company ff-model=$ctrl.user.company placeholder="JDOE Software" ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.COMPANY\' | translate}}"></ff-text> </label> <label class=ff-row ng-if="$ctrl.schema.personalInfo.occupation !== false"> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PERSONAL_INFO.OCCUPATION></span></ff-label> <ff-text name=occupation ff-model=$ctrl.user.occupation placeholder="Software Solutions Architect" ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.OCCUPATION\' | translate}}"></ff-text> </label> </ff-col> </div> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.personalInfo.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},"99YD":function(e,r){angular.module("deskworks.upComments",["deskworks.userProfile.service"]).directive("upComments",(function(){"use strict";return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-comments.tpl.html",controller:"upCommentsCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upCommentsCtrl",["$scope","dwAlerts","state","userProfileService",function(e,r,t,s){"use strict";var n=this;n.save=function(){return s.updateRaw(t.getCurrentCenterId(),n.user,{comments:n.user.comments}).catch((function(e){return r.error(e,"Failed to save comments.")}))}}])},"9GwV":function(e,r,t){"use strict";t.r(r);t("kYjL");angular.module("deskworks.members.userProfile",["deskworks.members.userProfile.new","deskworks.members.userProfile.edit","deskworks.upPersonalInfo","deskworks.upLoginInfo","deskworks.upPhoto","deskworks.upSystemInfo","deskworks.upAddresses","deskworks.upPhones","deskworks.upComments","deskworks.upMembership","deskworks.upPrinterCodes","deskworks.upDocuments","deskworks.upLeadSource","deskworks.upTermsOfService","deskworks.upCustomFields","deskworks.upShareable","deskworks.upCoMembers","deskworks.upMailboxes","deskworks.upCreditCards","deskworks.upEChecks","deskworks.upBillingMethod","deskworks.lazyLoaders"])},AWhf:function(e,r,t){"use strict";t.r(r);t("w13K");var s=t("WSeP"),n=t.n(s),l=t("xeXu"),a=t.n(l),f=t("hsT8"),o=t.n(f);angular.module("deskworks.OurMemberModalCtrl",[]).controller("OurMemberModalCtrl",["$scope","close","member",function(e,r,t){var s,l,f,i,c;e.close=r,e.member=t,e.emails=o()(s=t.fields).call(s,(function(e){return"email"===e.type})),e.phones=o()(l=t.fields).call(l,(function(e){return"phone"===e.type})),e.urls=o()(f=t.fields).call(f,(function(e){return"url"===e.type})),e.fields=o()(i=t.fields).call(i,(function(e){var r;return a()(r=["email","phone","url"]).call(r,e.type)<0})),t.email&&e.emails.unshift({value:t.email}),n()(c=e.urls).call(c,(function(e){var r=(e.name||"").toLowerCase(),t=(e.value||"").toLowerCase();a()(r).call(r,"facebook")>=0||a()(t).call(t,"facebook.com")>=0?e.icon="fa-facebook-square":a()(r).call(r,"twitter")>=0||a()(t).call(t,"twitter.com")>=0?e.icon="fa-twitter-square":a()(r).call(r,"linkedin")>=0||a()(t).call(t,"linkedin.com")>=0?e.icon="fa-linkedin-square":a()(r).call(r,"github")>=0||a()(t).call(t,"github.com")>=0?e.icon="fa-github-square":a()(r).call(r,"youtube")>=0||a()(t).call(t,"youtube.com")>=0?e.icon="fa-youtube-square":a()(r).call(r,"vimeo")>=0||a()(t).call(t,"vimeo.com")>=0?e.icon="fa-vimeo-square":r.match(/google(?:\s|-)?(?:plus|\+)/)||a()(t).call(t,"plus.google.com")>=0?e.icon="fa-google-plus-square":e.icon="fa-globe"}))}])},Dial:function(e,r,t){"use strict";t.r(r);t("8cZI");var s=t("03wM"),n=t.n(s),l=t("yCd9"),a=t.n(l);angular.module("deskworks.globalConfig",["ngRoute","ngStorage","tmh.dynamicLocale","pascalprecht.translate","dateFilters","setLocale","setTranslations","resolveTimezone","deskworks.config","deskworks.setup.service","userTasksPolicy","resolveGtm","sessionInjector","sessionRefresher"]).config(["$httpProvider","$localStorageProvider","$routeProvider","$locationProvider","$translateProvider","$qProvider","deskworksConfigProvider","tmhDynamicLocaleProvider",function(e,r,t,s,l,f,o,i){e.defaults.withCredentials=!0,r.setKeyPrefix("dw"),s.html5Mode(!0).hashPrefix(""),e.interceptors.push("sessionInjector"),e.interceptors.push("sessionRefresher"),l.fallbackLanguage("en").preferredLanguage("en").useLoader("$translatePartialLoader",{urlTemplate:"translations/{part}-{lang}.json",loadFailureHandler:"$translateErrorHandler"}).useSanitizeValueStrategy("sceParameters").addInterpolation("$translateMessageFormatInterpolation"),i.defaultLocale("en-us"),o.setApiUrl("/api/v1"),t.otherwise({redirectTo:function(e,r,t){var s,l=a()(s=n()(t)).call(s,(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&");return o.getDefaultRoute()+(l.length>0?"?"+l:"")}}),t.whenOrig=t.when,t.when=function(e,r){return r.resolve=r.resolve||{},r.resolve.resolveLocale=["$q","$rootScope","dwAlerts","setLocale","setTranslations","setupService",function(e,t,s,n,l,a){return a.getSetupSettings().catch((function(e){return s.error(e,"Failed to get setup settings.")})).then((function(s){return t.settings=s,e.all([n(s),l(r.translations||[],s.locale)])}))}],r.resolve.resolveTimezone=["resolveTimezone",function(e){return e()}],r.resolve.userTasksPolicy=["userTasksPolicy",function(e){return e()}],r.resolve.resolveGtm=["resolveGtm",function(e){return e()}],t.whenOrig(e,r)}}])},DyEQ:function(e,r,t){"use strict";t.r(r);var s=t("0zKI"),n=t.n(s),l=t("NOor"),a=t.n(l),f=t("nbuU"),o=t.n(f),i=t("WSeP"),c=t.n(i);angular.module("deskworks.upDocuments",["deskworks.helper","deskworks.state","deskworks.userProfile.service"]).directive("upDocuments",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-documents.tpl.html",controller:"upDocumentsCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upDocumentsCtrl",["$scope","$element","$q","$translate","dwAlerts","helper","state","userProfileService",function(e,r,t,s,l,f,i,u){var d=this;d.$onInit=function(){e.$on("ffBlock::EditStart",(function(){d.docsRollback=angular.copy(d.user.documents)})),e.$on("ffBlock::EditCancel",(function(){d.user.documents=d.docsRollback}))},d.add=function(t,n){if(n&&n.length>0)return l.error(s.instant("USER_PROFILE.DOCUMENTS.INVALID_FORMAT"));t&&t.length>0&&(d.editMode||e.$broadcast("ffBlock::EditStart"),c()(t).call(t,(function(e){return d.user.documents.push(u.document.new(e))})),angular.element(r[0].querySelector('form[name="ffBlockForm"]')).scope().ffBlockForm.$setDirty())},d.save=function(){var e,r,s=[];return c()(e=d.user.documents).call(e,(function(e){var r=o()(f).call(f,d.docsRollback,e.id);r&&r.name===e.name||s.push(u.document.save(i.getCurrentCenterId(),d.user.id,e).catch((function(e){return l.error(e,"Failed to save document.")})))})),c()(r=d.docsRollback).call(r,(function(e){o()(f).call(f,d.user.documents,e.id)||s.push(u.document.delete(i.getCurrentCenterId(),d.user.id,e).catch((function(e){return l.error(e,"Failed to delete document.")})))})),t.all(s)},d.delete=function(e){var t,s=a()(f).call(f,d.user.documents,e.id);s>=0&&(n()(t=d.user.documents).call(t,s,1),angular.element(r[0].querySelector('form[name="ffBlockForm"]')).scope().ffBlockForm.$setDirty())}}])},F9wG:function(e,r){angular.module("deskworks.members",["deskworks.members.userProfile","deskworks.members.billingProfile.edit","deskworks.members.userSearch","deskworks.OurMembersCtrl"])},FZlk:function(e,r){e.exports='<ff-panel id=upPhoto ng-if=$ctrl.schema.photo ngf-drop="$ctrl.save($files, $invalidFiles)" ngf-pattern="\'image/png,image/jpeg\'" ngf-drag-over-class=dragover> <ff-panel-header style=margin-bottom:.5rem><span translate=USER_PROFILE.PHOTO.HEADER></span></ff-panel-header> <div class=ff-row> <div class=ff-relative> <ff-img ng-if=$ctrl.user.photo ff-src={{$ctrl.user.photo}} img-placeholder=500x500></ff-img> <ff-img ng-if=!$ctrl.user.photo ff-src="" ff-attr-src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAQAAADTdEb+AAACHElEQVR42u3SMQ0AAAzDsJU/6aGo+tgQouSgIBJgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsjCUBxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFjsPeVaAS0/Qs6MAAAAAElFTkSuQmCC img-placeholder=500x500></ff-img> </div> <ff-btn-group flex="0 0 auto" class=ff-section-buttons ng-if=!$ctrl.schema.photo.$readOnly> <ff-btn sense=upload size=sm ff-spin=$ctrl.spin accept=image/png,image/jpeg ngf-select="$ctrl.save($files, $invalidFiles)" ngf-pattern="\'image/png,image/jpeg\'"> <span translate=USER_PROFILE.PHOTO.BTN_UPLOAD></span> </ff-btn> </ff-btn-group> </div> </ff-panel> '},GmbY:function(e,r,t){"use strict";t.r(r);var s=t("5Lq6");angular.module("deskworks.upEChecks",["deskworks.helper","deskworks.state","deskworks.userProfile.service","deskworks.dwECheck",s.a.name]).directive("upEChecks",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/billing-sections/up-e-checks.tpl.html",controller:"upEChecksCtrl as $ctrl",bindToController:{user:"<userProfile",reg:"<",single:"<"}}})).controller("upEChecksCtrl",["$scope","$element","$attrs","$q","$window","$translate","dwAlerts","helper","state","userProfileService",function(e,r,t,s,n,l,a,f,o,i){var c=this;c.new=function(){return i.eCheck.new(c.user)},c.isNew=i.eCheck.isNew,c.hasDeleteButton=function(e,r){return c.single?!c.isNew(e):!r.editMode||c.reg},c.save=function(e){return i.eCheck.save(o.getCurrentCenterId(),c.user.id,e).catch((function(e){return a.error(e,"Failed to save eCheck.")}))},c.delete=function(e){return i.eCheck.isNew(e)?s.when():n.confirm(l.instant("BILLING_PROFILE.E_CHECKS.CONFIRM_DELETE"))?i.eCheck.delete(o.getCurrentCenterId(),c.user.id,e).catch((function(e){return a.error(e,"Failed to delete eCheck.")})):s.reject()}}])},Ht9o:function(e,r){e.exports='<div class=our-members> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-panel class="our-members-toolbar ff-no-frame"> <div class="ff-grid gutter-h-half"> <label class=ff-row flex="{md: \'0 0 40%\'}"> <ff-label flex="0 0 70px"><span translate=OUR_MEMBERS.CENTER></span></ff-label> <dw-select-center ff-model=$ctrl.params.centerId ff-option-all=true></dw-select-center> </label> <label class=ff-row flex="{md: \'0 0 30%\'}"> <ff-label flex="0 0 70px"><span translate=OUR_MEMBERS.SORT></span></ff-label> <ff-select name=sort ff-model=$ctrl.params.sort ff-options="sort.id as sort.name for sort in $ctrl.optsSort"></ff-select> </label> <label class=ff-row flex="{md: \'0 0 30%\'}"> <ff-label flex="0 0 70px"><span translate=OUR_MEMBERS.SEARCH></span></ff-label> <ff-text name=search ff-model=$ctrl.params.q ff-model-options="{ debounce: 1000 }"></ff-text> </label> </div> </ff-panel> <ff-panel ng-if="!$ctrl.members.length && !$ctrl.fetching"><span translate=OUR_MEMBERS.EMPTY></span></ff-panel> <div class=our-members-container infinite-scroll=$ctrl.fetch() infinite-scroll-distance=2 infinite-scroll-container="\'.snap-content-scroller\'"> <div class=our-member ng-repeat="member in $ctrl.members" ng-click=$ctrl.view(member)> <ff-img ff-src={{::member.photo}}></ff-img> <h5>{{::member.name}}</h5> <h6>{{::member.occupation}}</h6> </div> <div ff-spin=true class=our-members-spin ng-if=$ctrl.fetching></div> </div> </div> </div> '},L3g9:function(e,r){e.exports='<div class=user-search> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <form name=userSearch> <membership-filter ff-model=$ctrl.membershipFilter filter-data=us.filters></membership-filter> <div class="ff-grid gutter-v gutter-h"> <div flex="{md: \'0 0 50%\'}"> <ff-panel> <label class=ff-row> <ff-label flex="0 0 104px"><span translate=USER_SEARCH.ACTIVATED_AT></span></ff-label> <dw-select-center ff-model=us.centerId ff-option-all=true></dw-select-center> </label> <label class=ff-row ng-repeat="col in us.columns | filter : { advanced: \'!true\' }"> <ff-label flex="0 0 104px">{{col.name}}</ff-label> <ff-text name={{col.id}} ff-model=col.value></ff-text> </label> <label class=ff-row> <ff-checkbox ff-model=us.advanced><span translate=USER_SEARCH.ADVANCED_SEARCH></span></ff-checkbox> </label> </ff-panel> </div> <div flex="{md: \'0 0 50%\'}"> <ff-panel ng-collapse=!us.advanced> <ff-row class=us-show-row> <span title="{{\'USER_SEARCH.SHOW.HINT\' | translate}}" translate=USER_SEARCH.SHOW>Show</span> </ff-row> <ff-row ng-repeat="col in us.columns | filter : { advanced: \'true\' }" ng-include="col.tpl || \'userSearchTextTpl\'"> </ff-row> </ff-panel> </div> </div> <ff-btn-group class=buttons-bottom style=text-align:left> <ff-btn sense=search type=submit ff-click=$ctrl.search(1)><span translate=USER_SEARCH.BTN_SEARCH></span></ff-btn> </ff-btn-group> </form> <ff-panel ng-if=us.users id=searchResults class=us-results> <ff-panel-header> <span translate=USER_SEARCH.RESULTS.HEADER translate-values="{ count: us.userCount }" ng-if=!$ctrl.previousSearch></span> <span translate=USER_SEARCH.PREV_RESULTS.HEADER translate-values="{ count: us.userCount }" ng-if=$ctrl.previousSearch></span> </ff-panel-header> <ff-header> <ff-row> <span ng-repeat="col in us.columns | filter: $ctrl.filterResultColumns"> <span>{{col.name}}</span> <ff-sort props=us col-id=col.id ff-click=$ctrl.search()></ff-sort> </span> </ff-row> </ff-header> <ff-row ng-repeat="user in us.users" class=ff-clickable ng-click=$ctrl.selectUser(user) ff-dim> <ff-static ng-repeat="col in us.columns | filter: $ctrl.filterResultColumns"> <span> <span ng-if="col.id !== \'email\'" ng-bind=::user[col.id]></span> <a ng-if="col.id === \'email\'" href=mailto:{{::user[col.id]}} ng-bind=::user[col.id] target=_blank rel=noopener ng-click=$event.stopPropagation()></a> <ff-hint ng-if="::user.isMasterMember && col.id === \'company\'"> <span translate=USER_SEARCH.MASTER_USER.HINT translate-values="{ company: user.company }"></span> </ff-hint> </span> </ff-static> <ff-icon sense=navigate class=ff-abs-right-center title="{{\'USER_SEARCH.BTN_SELECT.HINT\' | translate}}"></ff-icon> </ff-row> <ff-pagination props=us ff-click=$ctrl.search($page) ng-if="us.pageCount > 1"></ff-pagination> </ff-panel> </div> <script type=text/ng-template id=userSearchTextTpl> <ff-static flex="0 0 30px" class="ff-center"><ff-checkbox ff-model="col.include"></ff-checkbox></ff-static>\n  <label class="ff-row" flex="auto">\n    <ff-label flex="0 0 104px">{{col.name}}</ff-label>\n    <ff-text name="{{col.id}}" ff-model="col.value" ff-change="col.include = !!col.value"></ff-text>\n  </label> <\/script> <script type=text/ng-template id=userSearchDateTpl> <ff-static flex="0 0 30px" class="ff-center"><ff-checkbox ff-model="col.include"></ff-checkbox></ff-static>\n  <label class="ff-row" flex="auto">\n    <ff-label flex="0 0 104px">{{col.name}}</ff-label>\n    <ff-date name="{{col.id}}" ff-model="col.value" ff-change="col.include = !!col.value"\n             ff-validate-alert="{{\'USER_SEARCH.COLUMNS.JOIN_DATE\' | translate}}"></ff-date>\n  </label> <\/script> <script type=text/ng-template id=userSearchMacTpl> <ff-static flex="0 0 30px" class="ff-center"><ff-checkbox ff-model="col.include"></ff-checkbox></ff-static>\n  <label flex="1 1 auto">\n    <ff-label flex="0 0 104px">{{col.name}}</ff-label>\n    <ff-text name="{{col.id}}" ff-model="col.value" ff-change="[col.include = !!col.value, us.checkedIn = us.checkedIn && !!col.value]"></ff-text>\n  </label>\n  <label flex="0 0 auto">\n    <ff-checkbox ff-model="us.checkedIn" ff-disabled="!col.value" class="ff-small">\n      <span translate="USER_SEARCH.FILTERS.CHECKED_IN"></span>\n    </ff-checkbox>\n  </label> <\/script> '},MHBY:function(e,r){e.exports='<div id=upMailboxes ng-if=$ctrl.schema.mailboxes class=ff-grid ff-section="mailbox in $ctrl.user.mailboxes" ff-section-new=$ctrl.new()> <ff-panel ng-if=!$ctrl.user.mailboxes.length> <ff-panel-header><span translate=USER_PROFILE.MAILBOXES.HEADER></span></ff-panel-header> <span translate=USER_PROFILE.MAILBOXES.EMPTY></span> </ff-panel> <div ng-if=$ctrl.user.mailboxes.length> <div class=gutter-v> <ff-panel id="{{\'upMailbox-\' + mailbox.id}}" ff-block ff-block-save=$ctrl.save(mailbox) ff-block-delete=$ctrl.delete(mailbox) ff-block-edit-default=$ctrl.isNew(mailbox) ff-block-is-new=$ctrl.isNew(mailbox)> <ff-panel-header><span translate=USER_PROFILE.MAILBOX></span></ff-panel-header> <div class="ff-grid gutter-h"> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 130px"><req translate=USER_PROFILE.MAILBOXES.NUMBER></req></ff-label> <ff-text name=number ff-model=mailbox.number ff-required=true ff-validate-alert="{{\'USER_PROFILE.MAILBOXES.NUMBER\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 130px"><span translate=USER_PROFILE.MAILBOXES.KEY></span></ff-label> <ff-text name=key ff-model=mailbox.key ff-validate-alert="{{\'USER_PROFILE.MAILBOXES.KEY\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 130px"><span translate=USER_PROFILE.MAILBOXES.HANDLING></span></ff-label> <ff-select name=handling ff-model=mailbox.handling ff-validate-alert="{{\'USER_PROFILE.MAILBOXES.HANDLING\' | translate}}" ff-options="opt.name for opt in $ctrl.handlingOpts"></ff-select> </label> </ff-col> <ff-col flex="{md: \'0 0 50%\'}"> <label> <ff-row> <ff-label><span translate=USER_PROFILE.MAILBOXES.NAMES></span></ff-label> </ff-row> <ff-row> <ff-textarea name=names ff-model=mailbox.names rowspan=2 placeholder="{{\'USER_PROFILE.MAILBOXES.NAMES.HINT\' | translate}}" title="{{\'USER_PROFILE.MAILBOXES.NAMES.HINT\' | translate}}"></ff-textarea> </ff-row> </label> </ff-col> </div> <ff-btn-group class=ff-block-buttons ng-if=!$ctrl.schema.mailboxes.$readOnly> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-delete></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> </div> </div> <ff-btn-group class=ff-section-buttons ng-if=!$ctrl.schema.mailboxes.$readOnly> <ff-btn ff-btn-section-new> <span translate=GLOBAL.BTN_NEW></span> <span translate=USER_PROFILE.MAILBOX></span> </ff-btn> </ff-btn-group> </div> '},MQkE:function(e,r,t){"use strict";t.r(r);t("8cZI");var s=t("yCd9"),n=t.n(s);angular.module("deskworks.upSystemInfo",[]).directive("upSystemInfo",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-system-info.tpl.html",controller:"upSystemInfoCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upSystemInfoCtrl",(function(){var e=this;e.$onChanges=function(){var r,t;e.user&&(e.user.activatedAt=e.user.activatedAt&&n()(r=e.user.activatedAt).call(r,(function(e){return e.centerName})).join(", "),e.user.masterMembers=e.user.masterMembers&&n()(t=e.user.masterMembers).call(t,(function(e){return e.fullName+(e.company?" ("+e.company+")":"")})).join(", "))}}))},NGgp:function(e,r,t){"use strict";t.r(r);t("y89P");var s=t("7pN8"),n=t.n(s),l=t("DVTZ"),a=t("SGGL");r.default=angular.module("deskworks.upPersonalInfo",["deskworks.userProfile.service",l.a.name,a.a.name]).directive("upPersonalInfo",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-personal-info.tpl.html",controller:"upPersonalInfoCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upPersonalInfoCtrl",["$scope","dwAlerts","state","userProfileService",function(e,r,t,s){var l=this;l.onChangeLastName=function(){if(l.reg&&!l.reg.member&&!l.reg.selfRegistration){var e=angular.element(document.getElementsByName("login")),r=e.scope();r&&r.field&&!e.hasClass("ng-dirty")&&(r.field.value=(l.user.lastName||"").toLowerCase().replace(/\W/g,"")+"-"+n()())}},l.save=function(){var n={firstName:l.user.firstName,middleName:l.user.middleName,lastName:l.user.lastName,email:l.user.email,company:l.user.company,occupation:l.user.occupation};return s.updateRaw(t.getCurrentCenterId(),l.user,n).then((function(){return e.$emit("CurrentUser:refresh")})).catch((function(e){return r.error(e,"Failed to save personal information.")}))}}])},NQ3A:function(e,r){e.exports='<ff-panel id=upPrinterCodes ng-if=$ctrl.schema.printerCodes ff-block ff-block-save=$ctrl.save() ff-block-edit=$ctrl.editMode ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.PRINTER_CODES.HEADER></span></ff-panel-header> <div class=ff-grid> <ff-row flex="0 0 50%" class=ff-relative ng-repeat="prCode in $ctrl.user.printerCodes" id="{{\'upPrinterCode-\' + prCode.id}}"> <ff-text name=printerCode ff-model=prCode.code ff-required=true ff-validate-alert="{{\'USER_PROFILE.PRINTER_CODES.PRINTER_CODE\' | translate}}"></ff-text> <ff-btn flex=none sense=delete size=xs style=z-index:3 title="{{\'USER_PROFILE.PRINTER_CODES.BTN_DELETE.HINT\' | translate}}" ff-click=$ctrl.delete(prCode) ng-show=$ctrl.editMode></ff-btn> </ff-row> </div> <ff-btn-group class=ff-section-buttons ng-if=!$ctrl.schema.printerCodes.$readOnly> <ff-btn ff-btn-block-edit ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-save ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-cancel ng-if=!$ctrl.reg.new></ff-btn> <ff-btn sense=new size=sm ff-click=$ctrl.add()><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </ff-panel> '},Ntds:function(e,r){e.exports='<div id=upEChecks class="ff-grid gutter-v gutter-h" ff-section="check in $ctrl.user.eChecks" ff-section-new=$ctrl.new()> <ff-panel flex="{{ $ctrl.single ? null : {lg: \'0 0 50%\'} }}" ng-if=!$ctrl.user.eChecks.length> <span translate=BILLING_PROFILE.E_CHECKS.EMPTY></span> </ff-panel> <ff-panel flex="{{ $ctrl.single ? null : {lg: \'0 0 50%\'} }}" id="{{\'upECheck-\' + check.id}}" ff-block ff-block-save=$ctrl.save(check) ff-block-delete=$ctrl.delete(check) ff-block-edit-default=$ctrl.isNew(check) ff-block-is-new=$ctrl.isNew(check)> <ff-header><span translate=BILLING_PROFILE.E_CHECKS.HEADER></span></ff-header> <fieldset dw-e-check=check></fieldset> <ff-btn-group class=ff-block-buttons ng-if="!$ctrl.user.accessRights.billingInfo.readOnly && (!$ctrl.isNew(check) || !$ctrl.single)"> <ff-btn ff-btn-block-delete ng-if="$ctrl.hasDeleteButton(check, ffBlock)" ng-hide=false></ff-btn> <ff-btn ff-btn-block-save ng-if="!$ctrl.reg && !$ctrl.single"></ff-btn> <ff-btn ff-btn-block-cancel ng-if="!$ctrl.reg && !$ctrl.single"></ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=ff-btn-full ng-if="!$ctrl.user.accessRights.billingInfo.readOnly && !$ctrl.single"> <ff-btn ff-btn-section-new><span translate=BILLING_PROFILE.E_CHECKS.BTN_ADD></span></ff-btn> </ff-btn-group> </div> '},"OXQ/":function(e,r,t){"use strict";t.r(r);t("X5mX");var s=t("WSeP"),n=t.n(s),l=t("KK/u"),a=t.n(l),f=t("hsT8"),o=t.n(f),i=t("YtL8"),c=t.n(i),u=(t("qgYx"),t("Njxs")),d=t("9HME");r.default=angular.module("deskworks.members.userSearch",["deskworks.routeHelper","deskworks.dwAlerts","deskworks.state","deskworks.helper","deskworks.userSearchState","flexForms.ffPagination","deskworks.userProfile.service",u.a.name,d.a.name]).config(["$routeProvider",function(e){e.when("/user-search",{templateUrl:"members/user-search/user-search.tpl.html",controller:"UserSearchCtrl as $ctrl",label:"User Search",routeBranch:"user-search",reloadOnSearch:!1,userTasksPolicy:!1,translations:["user-search"],resolve:{auth:["routeHelper",function(e){return e.auth()}]}})}]).controller("UserSearchCtrl",["$scope","$filter","$translate","dwAlerts","state","helper","userSearchState","userProfileService",function(e,r,t,s,l,f,i,u){var d=this;l.setPageTitle(t.instant("USER_SEARCH.PAGE_TITLE"));var m=e.us=i;m.centerId=l.getCurrentCenterId(),m.users&&(d.previousSearch=!0),m.resetColumns(),m.advanced=!1,d.search=function(e){var t,l,f=c()(t=o()(l=m.columns).call(l,(function(e){return!e.advanced||m.advanced}))).call(t,(function(e,r){return r.value&&(e[r.id]=r.value),e}),{}),i=angular.extend({page:e||m.page,pageSize:m.pageSize,sort:a()(m),order:m.order},d.membershipFilter,f);return m.checkedIn&&(i.checkedIn=m.checkedIn),u.search(m.centerId,i).catch((function(e){return s.error(e,"Failed to search users.")})).then((function(e){var t;n()(t=e.users).call(t,(function(e){e.joinDate=r("date")(e.joinDate,"mediumDate")})),angular.extend(m,e),d.previousSearch=!1}))},d.filterResultColumns=function(e){return e.include&&(!e.advanced||m.advanced||"email"===e.id)},d.selectUser=function(e){l.setCurrentUserId(e.id);var r=l.getParam("redirect");return r&&"/user-search"!==r?(l.setParam("redirect"),l.setPath(r)):l.setPath("/profile")}}])},OdV3:function(e,r){e.exports='<div class=user-profile id=userProfile> <h4 class=page-title> {{state.getPageTitle()}} <span ng-if="vm.reg.member && !vm.reg.selfRegistration" ng-style="{ color: vm.center.color }">{{vm.center.name}}</span> </h4> <div class="ff-grid ff-gutter-v ff-gutter-h"> <up-personal-info user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.personalInfo></up-personal-info> <up-login-info flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.loginInfo member-directory-url=wlLinks.memberDirectoryUrl></up-login-info> <up-photo flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.photo></up-photo> <up-system-info user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.system></up-system-info> <up-addresses user=vm.userProfile schema=vm.schema reg=vm.reg center=vm.center ng-if=vm.schema.addresses></up-addresses> <up-phones user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.phones></up-phones> <up-comments flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.comments></up-comments> <up-membership flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.membership kisi-save=vm.kisiSave ezeep-save=vm.ezeepSave></up-membership> <up-printer-codes flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.printerCodes></up-printer-codes> <up-documents flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.printerCodes></up-documents> <up-lead-source flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.leadSource></up-lead-source> <div ng-if="vm.schema.customFields && vm.customFields.length || vm.schema.shareable"> <div class="ff-grid ff-gutter-v ff-gutter-h"> <up-custom-fields flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg fields=vm.customFields ng-if="vm.schema.customFields && vm.customFields.length"></up-custom-fields> <up-shareable flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg fields=vm.shareable ng-if=vm.schema.shareable></up-shareable> </div> </div> <up-co-members user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.coMembers></up-co-members> <up-mailboxes user=vm.userProfile schema=vm.schema reg=vm.reg ng-if=vm.schema.mailboxes></up-mailboxes> </div> <ff-btn-group class=buttons-bottom ng-if=vm.reg> <ff-btn sense=next ff-click=vm.next()><span translate=GLOBAL.BTN_NEXT></span></ff-btn> <ff-btn sense=back ff-click=vm.back() ng-if=vm.back><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> </div> '},Q9OX:function(e,r){e.exports='<div id=upCoMembers ng-if=$ctrl.schema.coMembers class=ff-grid ff-section="coMember in $ctrl.user.coMembers" ff-section-new=$ctrl.new()> <ff-panel ng-if=!$ctrl.user.coMembers.length> <ff-panel-header><span translate=USER_PROFILE.CO_MEMBERS.HEADER></span></ff-panel-header> <span translate=USER_PROFILE.CO_MEMBERS.EMPTY></span> </ff-panel> <div ng-if=$ctrl.user.coMembers.length> <div class=gutter-v> <ff-panel ff-block ff-block-save=$ctrl.save(coMember) ff-block-delete=$ctrl.delete(coMember) ff-block-edit-default=$ctrl.isNew(coMember) ff-block-dirty-default=$ctrl.isNewExisting(coMember) ff-block-is-new=$ctrl.isNew(coMember) id="{{\'upCoMember-\' + coMember.id}}"> <ff-panel-header><span translate=GLOBAL.CO_MEMBER></span></ff-panel-header> <div class="ff-grid gutter-h"> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PERSONAL_INFO.FULL_NAME></span></ff-label> <ff-text name=fullName ff-model=coMember.fullName placeholder="John Doe" ff-validate-alert="{{\'USER_PROFILE.PERSONAL_INFO.FULL_NAME\' | translate}}"></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=GLOBAL.EMAIL></span></ff-label> <ff-email name=email ff-model=coMember.email dw-email placeholder=jdoe@mail.com></ff-email> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.PHONE></span></ff-label> <ff-text name=phone ff-model=coMember.phone dw-phone placeholder=888-379-2865></ff-text> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=GLOBAL.LOGIN></span></ff-label> <ff-login name=login ff-model=coMember.login dw-login placeholder=jdoe></ff-login> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=GLOBAL.PASSWORD></span></ff-label> <ff-password name=password ff-model=coMember.password dw-password ff-not-contain="[coMember.login, coMember.login.split(\'\').reverse().join(\'\'), coMember.fullName]" ff-validate-alert=\'{ "notContain": "{{&#39;GLOBAL.PASSWORD.NOT_CONTAIN&#39; | translate}}" }\'></ff-password> </label> <ff-row ng-if=state.isLoggedAdmin()> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.LOGIN_INFO.ACCESS_CODES></span></ff-label> <ff-static style=overflow:visible ff-style="{overflow: \'visible\'}"> <up-access-codes flex=auto user-profile=coMember save=coMember.saveAccessCards></up-access-codes> </ff-static> </ff-row> </ff-col> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 180px"><span translate=USER_PROFILE.CO_MEMBERS.CAN_MAKE_RESERVATIONS></span></ff-label> <ff-static> <ff-checkbox name=canMakeReservations ff-model=coMember.canMakeReservations></ff-checkbox> </ff-static> </label> <label class=ff-row> <ff-label flex="0 1 180px"><span translate=USER_PROFILE.CO_MEMBERS.SEES_ACCOUNTING_INFO></span></ff-label> <ff-static> <ff-checkbox name=canSeeAccountingInfo ff-model=coMember.canSeeAccountingInfo></ff-checkbox> </ff-static> </label> <label class=ff-row> <ff-label flex="0 1 180px"><span translate=USER_PROFILE.CO_MEMBERS.GETS_CENTER_NOTICES></span></ff-label> <ff-static> <ff-checkbox name=getCenterNotices ff-model=coMember.getCenterNotices></ff-checkbox> </ff-static> </label> <ff-row> <ff-textarea name=notes ff-model=coMember.notes rowspan="state.isLoggedAdmin() ? 3 : 2" placeholder="{{\'USER_PROFILE.CO_MEMBERS.NOTES\' | translate}}" title="{{\'USER_PROFILE.CO_MEMBERS.NOTES\' | translate}}"></ff-textarea> </ff-row> </ff-col> </div> <ff-btn-group class=ff-block-buttons ng-if=!$ctrl.schema.coMembers.$readOnly> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-delete></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> </div> </div> <ff-btn-group class=ff-section-buttons style=margin-bottom:0 ng-if=!$ctrl.schema.coMembers.$readOnly> <ff-btn ff-btn-section-new> <span translate=USER_PROFILE.CO_MEMBERS.BTN_NEW></span> </ff-btn> <ff-btn sense=collapseBtnPriv size=sm ff-click="$ctrl.exUserCollapsed = !$ctrl.exUserCollapsed" ng-class="{ collapsed: $ctrl.exUserCollapsed }" ng-if=state.isLoggedAdmin()> <span translate=USER_PROFILE.CO_MEMBERS.BTN_ADD></span> </ff-btn> </ff-btn-group> <div flex="{md: \'0 0 50%\'}" style=margin-left:auto;margin-bottom:0 ng-collapse=$ctrl.exUserCollapsed ng-if=state.isLoggedAdmin()> <ff-panel style=margin-top:1.5rem> <form name=formNewExisting class=ff-row> <label flex="1 1 auto"> <ff-search ng-model=$ctrl.quickUser dw-search-user></ff-search> </label> <ff-btn-group flex="0 0 auto" style=z-index:3> <ff-btn type=submit sense=add size=sm ff-disabled=!$ctrl.quickUser ff-click=$ctrl.newExisting($ctrl.quickUser)>Add</ff-btn> </ff-btn-group> </form> </ff-panel> </div> </div> <script type=text/ng-template id=DeleteCoMemberTpl> <div class="dw-modal">\n    <div class="dw-modal-fade" ng-click="close()"></div>\n    <form class="dw-modal-dialog our-member-modal" novalidate>\n      <div class="dw-modal-scroll">\n        <ff-header><span translate="USER_PROFILE.CO_MEMBERS.CONFIRM_DELETE"></span></ff-header>\n        <label class="ff-row">\n          <ff-checkbox name="makeCoMemberInactive" ff-model="$ctrl.makeCoMemberInactive">\n            <span translate="USER_PROFILE.CO_MEMBERS.MAKE_INACTIVE"></span>\n          </ff-checkbox>\n        </label>\n        <ff-btn-group class="ff-center ff-tmargin" style="padding: 0 5px 5px 5px">\n          <ff-btn sense="cancel" ff-click="close(false)">Cancel</ff-btn>\n          <ff-btn type="submit" sense="ok" ff-click="close(true)">OK</ff-btn>\n        </ff-btn-group>\n      </div>\n    </form>\n  </div> <\/script> '},QU5I:function(e,r,t){"use strict";t.r(r);t("JBxO"),t("FdtR"),t("y89P"),t("X5mX");var s=t("KK/u"),n=t.n(s),l=t("D4RU"),a=t.n(l),f=t("6RpP"),o=t.n(f),i=(t("1TsL"),t("iAzO")),c=t("9HME");r.default=angular.module("deskworks.OurMembersCtrl",["infinite-scroll","deskworks.routeHelper","deskworks.OurMembers","deskworks.OurMemberModalCtrl","deskworks.optsOurMembersSort",i.a.name,c.a.name]).config(["$routeProvider",function(e){e.when("/our-members",{templateUrl:"members/our-members/our-members.tpl.html",controller:"OurMembersCtrl as $ctrl",routeBranch:"our-members",translations:["our-members"],reloadOnSearch:!1,userTasksPolicy:!1,resolve:{auth:["$route","routeHelper",function(e,r){return r.auth(null).then((function(){e.current.$$route.hideSidebar=!1})).catch((function(){e.current.$$route.hideSidebar=!0}))}]}})}]).controller("OurMembersCtrl",["$scope","$translate","$location","$q","dwModal","dwAlerts","state","helper","OurMembers","optsOurMembersSort",function(e,r,t,s,l,f,i,c,u,d){var m=this;function p(){m.members=[],m.params.offset=0,m.eof=!1}i.setPageTitle(r.instant("OUR_MEMBERS.PAGE_TITLE")),m.optsSort=d,m.params={centerId:i.getCurrentCenterId(),sort:"name",offset:0,limit:100},p(),e.$watch((function(){return t.search().centerId}),(function(e){m.params.centerId=angular.isDefined(e)?+e:i.getCurrentCenterId()})),e.$watch("$ctrl.params.centerId",(function(e){t.search("centerId",e).replace()})),e.$watch((function(){return n()(t.search())}),(function(e){m.params.sort=e||"name"})),e.$watch("$ctrl.params.sort",(function(e){t.search("sort",e).replace()})),e.$watch((function(){return t.search().q}),(function(e){m.params.q=e||""})),e.$watch("$ctrl.params.q",(function(e){t.search("q",e||void 0).replace()})),e.$watchGroup(["$ctrl.params.centerId","$ctrl.params.sort","$ctrl.params.q"],(function(e,r){a()(e).call(e,(function(e,t){return e!==r[t]}))&&s.when(m.fetching).finally((function(){p(),m.fetch()}))})),m.fetch=function(){if(m.eof||m.fetching)return m.fetching;m.fetching=u.query(m.params).catch((function(e){return f.error(e,"Failed to query our members.")})).finally((function(){m.fetching=null})).then((function(e){var r;m.members=o()(r=m.members).call(r,e),m.params.offset+=e.length,m.eof=e.length<m.params.limit}))},m.view=function(r){l.show({scope:e,templateUrl:"members/our-members/our-member-modal.tpl.html",controller:"OurMemberModalCtrl",inputs:{member:r}})}}])},QXyp:function(e,r,t){"use strict";t.r(r);var s=t("xeXu"),n=t.n(s);t("4jLY");angular.module("deskworks.upPhoto",[]).directive("upPhoto",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-photo.tpl.html",controller:"upPhotoCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upPhotoCtrl",["$scope","$timeout","$translate","dwAlerts","state","userProfileService",function(e,r,t,s,l,a){var f=this;f.save=function(o,i){if(i&&i.length>0)return s.error(t.instant("USER_PROFILE.PHOTO.INVALID_FORMAT"));if(o&&o.length>0){if(!f.user.isNew())return f.spin=!0,f.user.photoFile=o[0],a.photo.save(l.getCurrentCenterId(),f.user).then((function(){f.spin=!1,e.$emit("CurrentUser:refresh")}),(function(e){return f.spin=!1,s.error(e,"Failed to upload photo.")}));var c;if(f.user.photoFile=o[0],window.FileReader&&n()(c=o[0].type).call(c,"image")>-1){var u=new FileReader;u.readAsDataURL(o[0]),u.onload=function(e){r((function(){f.user.photo=e.target.result}))}}}}}])},Rw1n:function(e,r,t){"use strict";t.r(r);t("y89P");var s=t("7pN8"),n=t.n(s),l=t("hsT8"),a=t.n(l),f=t("WSeP"),o=t.n(f);angular.module("deskworks.members.userProfile.new",["ngRoute","deskworks.userProfile.service","deskworks.center.service","deskworks.UserField","deskworks.routeHelper","deskworks.helper"]).config(["$routeProvider",function(e){e.when("/new-member",{template:"<div ng-include=\"'members/user-profile/user-profile.tpl.html'\" ff-bulk-read-only></div>",controller:"RegisterUserCtrl as vm",label:"New Member",routeBranch:"new-member",translations:["user-profile"],resolve:{reg:function(){return{member:!0,selfRegistration:!1,step:1,stepCount:3,new:!0}},userProfile:["$q","$route","dwAlerts","centerService","userProfileService","state","routeHelper",function(e,r,t,s,n,l,a){return r.current.params["self-registration"]&&"false"!==r.current.params["self-registration"]?(l.setPath("/member-sign-up",!0),l.setParam("self-registration"),e.reject()):a.auth().then((function(){return s.get(l.getCurrentCenterId()).then((function(e){return n.new(e,"member","register").catch((function(e){return t.error(e,"Failed to load new member profile template.")}))}))}))}],center:["state","centerService",function(e,r){return e.getCurrentCenterId()?r.get(e.getCurrentCenterId()):{}}],lazyKisi:"lazyLoadKisi",lazyEzeep:"lazyLoadEzeep"}}),e.when("/new-user",{template:"<div ng-include=\"'members/user-profile/user-profile.tpl.html'\" ff-bulk-read-only></div>",controller:"RegisterUserCtrl as vm",label:"New User",routeBranch:"new-user",translations:["user-profile"],resolve:{reg:function(){return{member:!1,selfRegistration:!1,step:1,stepCount:2,new:!0}},userProfile:["dwAlerts","centerService","userProfileService","state","routeHelper",function(e,r,t,s,n){return n.auth().then((function(){return r.get(s.getCurrentCenterId()).then((function(r){return t.new(r,"nonMember","register").catch((function(r){return e.error(r,"Failed to load new member profile template.")}))}))}))}],center:["state","centerService",function(e,r){return e.getCurrentCenterId()?r.get(e.getCurrentCenterId()):{}}],lazyEzeep:"lazyLoadEzeep"}})}]).controller("RegisterUserCtrl",["$scope","$timeout","$translate","$filter","$injector","helper","state","dwAlerts","userProfile","reg","center","userProfileService","centerService","setupService","UserField",function(e,r,t,s,l,f,i,c,u,d,m,p,b,g,h){var E=this;i.setPageTitle(t.instant(d.member?"USER_PROFILE.NEW_MEMBER.PAGE_TITLE":"USER_PROFILE.NEW_NON_MEMBER.PAGE_TITLE")),E.reg=d,E.userProfile=u,E.center=m,E.schema=u.schema,d&&!d.member&&(E.schema.customFields=!1,l.has("ezeepGroupDirective")&&(E.schema.membership=E.schema.membership||{membershipStatus:!1,attachedReservationUnit:!1})),(E.schema.customFields||E.schema.shareable)&&h.query().catch((function(e){return c.error(e,"Failed to query user profile fields.")})).then((function(e){o()(e).call(e,(function(e){e.value=null})),E.customFields=a()(e).call(e,(function(e){return"customFields"===e.section}))})),E.reg&&!E.reg.member&&(E.userProfile.password="123456",E.userProfile.passwordConfirmation="123456",e.$watch("vm.userProfile.lastName",(function(e){E.userProfile.login=(e||"").toLowerCase().replace(/\W/g,"")+"-"+n()()}))),E.next=function(){if(!f.pointFirstInvalid("#userProfile"))return p.registerNewUser(i.getCurrentCenterId(),E.userProfile,void 0,E.customFields).then((function(){if(E.kisiSave)return E.kisiSave()})).then((function(){if(E.ezeepSave)return E.ezeepSave()})).then((function(){return i.setPath(i.getPath()+"/"+E.userProfile.id,!0),i.setParam("productId",(E.userProfile.membershipProduct||{}).id),i.setParam("membershipStartDate",s("date")(E.userProfile.membershipStartDate,"yyyy-MM-dd")),i.setCurrentUserId(E.userProfile.id),i.setParam("attachedReservationUnitId",E.userProfile.attachedReservationUnit&&E.userProfile.attachedReservationUnit.id),r((function(){return i.setPath(i.getPath()+"/membership/billing-profile")}))}))},p.bindTestUserGenerator(e,E.userProfile,E.reg)}])},SHcK:function(e,r){e.exports='<ff-panel id=upDocuments ng-if=$ctrl.schema.documents ff-block ff-block-save=$ctrl.save() ff-block-edit=$ctrl.editMode ff-block-edit-default=$ctrl.user.isNew() ngf-drop="$ctrl.add($files, $invalidFiles)" ngf-pattern="\'application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\'" ngf-multiple=true ngf-drag-over-class=dragover> <ff-panel-header><span translate=USER_PROFILE.DOCUMENTS.HEADER></span></ff-panel-header> <div class=ff-grid> <ff-row flex="{sm: \'0 0 50%\'}" ng-repeat="doc in $ctrl.user.documents" class=ff-relative id="{{\'upDocument-\' + doc.id}}"> <ff-text name=document ff-model=doc.name ff-required=true ff-validate-alert="Document Name" ff-static-url=doc.document></ff-text> <ff-btn flex=none style=z-index:3 sense=delete size=xs ff-click=$ctrl.delete(doc) ng-show=$ctrl.editMode title="{{\'USER_PROFILE.DOCUMENTS.BTN_DELETE.HINT\' | translate}}"></ff-btn> </ff-row> </div> <ff-btn-group class=ff-section-buttons ng-if=!$ctrl.schema.documents.$readOnly> <ff-btn ff-btn-block-edit ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-save ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-cancel ng-if=!$ctrl.reg.new></ff-btn> <ff-btn sense=new size=sm ngf-select="$ctrl.add($files, $invalidFiles)" ngf-pattern="\'application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\'" accept=application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document ngf-multiple=true><span translate=GLOBAL.BTN_NEW></span></ff-btn> </ff-btn-group> </ff-panel> '},SxCY:function(e,r){e.exports='<ff-panel id=upSystemInfo ng-if=$ctrl.schema.system> <ff-panel-header><span translate=USER_PROFILE.SYSTEM_INFO.HEADER></span></ff-panel-header> <div class="ff-grid gutter-h"> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.SYSTEM_INFO.JOIN_DATE></span></ff-label> <ff-static name=joinDate ff-bind="$ctrl.user.joinDate | date:\'mediumDate\'"></ff-static> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.SYSTEM_INFO.USER_ID></span></ff-label> <ff-static name=userId ff-bind=$ctrl.user.id></ff-static> </label> </ff-col> <ff-col flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.SYSTEM_INFO.REGISTERED_BY></span></ff-label> <ff-static name=registeredBy ff-bind=$ctrl.user.registeredBy></ff-static> </label> <label class=ff-row> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.SYSTEM_INFO.ACTIVATED_AT></span></ff-label> <ff-static name=activatedAt ff-bind=$ctrl.user.activatedAt></ff-static> </label> <label class=ff-row ng-if=$ctrl.user.masterMembers> <ff-label flex="0 1 116px"><span translate=USER_PROFILE.SYSTEM_INFO.CO_MEMBER_OF></span></ff-label> <ff-static name=masterMembers ff-bind=$ctrl.user.masterMembers></ff-static> </label> </ff-col> </div> </ff-panel> '},UEFl:function(e,r,t){"use strict";t.r(r);var s=t("GJsN");r.default=angular.module("deskworks.upCustomFields",["deskworks.UserProfileFields",s.a.name]).directive("upCustomFields",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-custom-fields.tpl.html",controller:"upCustomFieldsCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",fields:"<"}}})).controller("upCustomFieldsCtrl",["$scope","dwAlerts","state","UserProfileFields",function(e,r,t,s){var n=this;n.save=function(){return s.save(t.getCurrentCenterId(),n.user.id,n.fields).catch((function(e){return r.error(e,"Failed to save user profile fields.")}))}}])},VsYK:function(e,r,t){"use strict";t.r(r);var s=t("WSeP"),n=t.n(s),l=t("acNQ");angular.module("deskworks.userSearchState",[l.a.name]).factory("userSearchState",["$rootScope","$translate","optsMembershipFilter",function(e,r,t){var s={advanced:!1,checkedIn:!1,centerId:0,page:1,sort:"lastName",order:1,pageSize:100,columns:[{id:"firstName",_name:"USER_SEARCH.COLUMNS.FIRST_NAME",include:!0},{id:"lastName",_name:"USER_SEARCH.COLUMNS.LAST_NAME",include:!0},{id:"company",_name:"USER_SEARCH.COLUMNS.COMPANY",include:!0},{id:"email",_name:"USER_SEARCH.COLUMNS.EMAIL",advanced:!0,include:!0},{id:"login",_name:"USER_SEARCH.COLUMNS.LOGIN",advanced:!0},{id:"phone",_name:"USER_SEARCH.COLUMNS.PHONE",advanced:!0},{id:"accessCode",_name:"USER_SEARCH.COLUMNS.ACCESS_CODE",advanced:!0},{id:"printerCode",_name:"USER_SEARCH.COLUMNS.PRINTER_CODE",advanced:!0},{id:"mailboxNumber",_name:"USER_SEARCH.COLUMNS.MAILBOX_NUMBER",advanced:!0},{id:"mailboxNames",_name:"USER_SEARCH.COLUMNS.MAILBOX_NAME",advanced:!0},{id:"occupation",_name:"USER_SEARCH.COLUMNS.OCCUPATION",advanced:!0},{id:"joinDate",_name:"USER_SEARCH.COLUMNS.JOIN_DATE",advanced:!0,tpl:"userSearchDateTpl"},{id:"macAddress",_name:"USER_SEARCH.COLUMNS.MAC_ADDRESS",advanced:!0,tpl:"userSearchMacTpl"}],resetColumns:function(){s.columns=angular.copy(l.columns),f()}};s.filters=angular.copy(t);var l=angular.copy(s);function a(){angular.copy(l,s),f()}function f(){var e,t;n()(e=s.filters).call(e,(function(e){e.name=r.instant(e._name)})),n()(t=s.columns).call(t,(function(e){e.name=r.instant(e._name)}))}return e.$on("LOGIN",a),e.$on("LOGOUT",a),f(),e.$on("$setTranslationsSuccess",f),s}])},WZXA:function(e,r){e.exports='<ff-panel id=upComments ng-if=$ctrl.schema.comments class=ff-no-frame ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.COMMENTS.HEADER></span></ff-panel-header> <ff-row> <ff-textarea name=comments ff-model=$ctrl.user.comments rowspan=5></ff-textarea> </ff-row> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.comments.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},YZOG:function(e,r,t){"use strict";t.r(r);var s=t("0zKI"),n=t.n(s),l=t("NOor"),a=t.n(l),f=t("nbuU"),o=t.n(f),i=t("WSeP"),c=t.n(i);angular.module("deskworks.upPrinterCodes",["deskworks.helper","deskworks.state","deskworks.userProfile.service"]).directive("upPrinterCodes",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-printer-codes.tpl.html",controller:"upPrinterCodesCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upPrinterCodesCtrl",["$scope","$element","$q","dwAlerts","helper","state","userProfileService",function(e,r,t,s,l,f,i){var u=this;u.$onInit=function(){e.$on("ffBlock::EditStart",(function(){u.prCodesRollback=angular.copy(u.user.printerCodes)})),e.$on("ffBlock::EditCancel",(function(){u.user.printerCodes=u.prCodesRollback}))},u.add=function(){u.editMode||e.$broadcast("ffBlock::EditStart"),u.user.printerCodes.push(i.printerCode.new())},u.save=function(){var e,r,n=[];return c()(e=u.user.printerCodes).call(e,(function(e){var r=o()(l).call(l,u.prCodesRollback,e.id);r&&r.code===e.code||n.push(i.printerCode.save(f.getCurrentCenterId(),u.user.id,e).catch((function(e){return s.error(e,"Failed to save printer code.")})))})),c()(r=u.prCodesRollback).call(r,(function(e){o()(l).call(l,u.user.printerCodes,e.id)||n.push(i.printerCode.delete(f.getCurrentCenterId(),u.user.id,e).catch((function(e){return s.error(e,"Failed to delete printer code.")})))})),t.all(n)},u.delete=function(e){var t,s=a()(l).call(l,u.user.printerCodes,e.id);s>=0&&(n()(t=u.user.printerCodes).call(t,s,1),angular.element(r[0].querySelector('form[name="ffBlockForm"]')).scope().ffBlockForm.$setDirty())}}])},aT6e:function(e,r){e.exports='<ff-panel id=upLeadSource ng-if=$ctrl.schema.leadSource ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><req translate=USER_PROFILE.LEAD_SOURCE.HEADER></req></ff-panel-header> <label class=ff-row> <ff-select name=leadSource ff-model=$ctrl.user.leadSource ff-options="opt.name for opt in $ctrl.user.options.leadSources" ff-required=true ff-validate-alert="{{\'USER_PROFILE.LEAD_SOURCE.SOURCE\' | translate}}"></ff-select> </label> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.leadSource.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},"aj6+":function(e,r){e.exports='<div class="ff-grid gutter-h-half" style=justify-content:flex-start;align-items:center> <ff-row flex="0 0 110px" class="ff-no-frame ff-relative" ng-repeat="card in $ctrl.user.accessCards" id="{{\'upAccessCard-\' + card.id}}"> <ff-text flex=auto name=accessCode ff-model=card.number ff-required=true ff-validate-alert="{{\'USER_PROFILE.LOGIN_INFO.ACCESS_CODE\' | translate}}"></ff-text> <ff-btn flex=none style=z-index:3 sense=delete size=xs ff-click=$ctrl.delete(card) ng-show=ffBlock.editMode title="{{\'USER_PROFILE.LOGIN_INFO.DELETE_ACCESS_CODE\' | translate}}"></ff-btn> </ff-row> <ff-btn flex=none style="margin:4px 0 4px auto" sense=new size=xs ff-click=$ctrl.add() title="{{\'USER_PROFILE.LOGIN_INFO.ADD_ACCESS_CODE\' | translate}}"></ff-btn> </div> '},auvQ:function(e,r){e.exports='<div id=upAddresses ng-if=$ctrl.schema.addresses class="ff-grid gutter-v gutter-h" ff-section="address in $ctrl.user.addresses" ff-section-new="$ctrl.new($ctrl.center.country.id, $ctrl.center.state.id || $ctrl.center.state)"> <ff-panel ng-if=!$ctrl.user.addresses.length> <ff-panel-header><span translate=USER_PROFILE.ADDRESSES></span></ff-panel-header> <span translate=USER_PROFILE.ADDRESSES.EMPTY></span> </ff-panel> <ff-panel flex="{{ $ctrl.single ? null : {md: \'0 0 50%\'} }}" id="{{\'upAddress-\' + address.id}}" ff-block ff-block-save=$ctrl.save(address) ff-block-delete=$ctrl.delete(address) ff-block-edit-default=$ctrl.isNew(address) ff-block-is-new=$ctrl.isNew(address)> <ff-panel-header><span translate=USER_PROFILE.ADDRESS></span></ff-panel-header> <fieldset dw-address=address dw-address-type=true></fieldset> <ff-btn-group class=ff-block-buttons ng-if=!$ctrl.schema.addresses.$readOnly> <ff-btn ff-btn-block-edit ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-delete ng-if="($ctrl.isNew(address) ? $ctrl.user.addresses.length : $ctrl.countExisting()) > 1" ng-hide="ffBlock.editMode && !$ctrl.reg.new"></ff-btn> <ff-btn ff-btn-block-save ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-cancel ng-if=!$ctrl.reg.new></ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=ff-btn-full ng-if="!$ctrl.schema.addresses.$readOnly && !$ctrl.single"> <ff-btn ff-btn-section-new> <span translate=GLOBAL.BTN_NEW></span> <span translate=USER_PROFILE.ADDRESS></span> </ff-btn> </ff-btn-group> </div> '},cdCP:function(e,r){e.exports='<ff-panel id=upMembership ng-if=$ctrl.schema.membership ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.MEMBERSHIP.HEADER></span></ff-panel-header> <label class=ff-row ng-if="$ctrl.schema.membership.membershipStatus !== false"> <ff-label flex="0 1 116px"><req translate=USER_PROFILE.MEMBERSHIP.STATUS></req></ff-label> <ff-select name=status ff-model=$ctrl.user.membershipStatus ff-options="status.name for status in $ctrl.membStatuses" ff-required=true ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.STATUS\' | translate}}" ff-change=$ctrl.onChangeStatus()></ff-select> </label> <label class=ff-row ng-if="vm.reg && ($ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\')"> <ff-label flex="0 1 116px"><req translate=USER_PROFILE.MEMBERSHIP.CATEGORY></req></ff-label> <ff-select name=type ff-model=$ctrl.user.membershipType ff-options="type.name for type in $ctrl.user.options.membershipTypes" ff-required=true ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.CATEGORY\' | translate}}"></ff-select> </label> <label class=ff-row ng-if="vm.reg && ($ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\')"> <ff-label flex="0 1 116px"><req translate=USER_PROFILE.MEMBERSHIP.PLAN></req></ff-label> <ff-select name=plan ff-model=$ctrl.user.membershipProduct ff-options="product.name for product in $ctrl.user.membershipType.membershipPackages" ff-required=true ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.PLAN\' | translate}}"></ff-select> </label> <label class=ff-row ng-if="$ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\'"> <ff-label flex="0 1 116px"> <span> <req translate=USER_PROFILE.MEMBERSHIP.PRICE_LIST></req> <ff-hint hint-type=warning ng-if="ffBlock.editMode && !$ctrl.reg && $ctrl.priceListOrig !== $ctrl.user.membershipPriceList"> <span translate=USER_PROFILE.MEMBERSHIP.PRICE_LIST.CHANGE_WARNING></span> </ff-hint> </span> </ff-label> <ff-select name=priceList ff-model=$ctrl.user.membershipPriceList ff-options="plist.name for plist in $ctrl.user.options.membershipPriceLists" ff-required=true ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.PRICE_LIST\' | translate}}"></ff-select> </label> <label class=ff-row ng-if="vm.reg && ($ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\')"> <ff-label flex="0 1 116px" ff-required=true><span translate=USER_PROFILE.MEMBERSHIP.START_DATE></span></ff-label> <ff-date name=membershipStartDate ff-model=$ctrl.user.membershipStartDate ff-validate-alert="{{\'USER_PROFILE.MEMBERSHIP.START_DATE\' | translate}}"></ff-date> </label> <label class=ff-row ng-if="$ctrl.schema.membership.attachedReservationUnit !== false"> <ff-label flex="0 0 116px" class=ff-small> <span translate=USER_PROFILE.MEMBERSHIP.ATTACHED_RESERVATION_UNIT></span> <ff-hint> <span translate=USER_PROFILE.MEMBERSHIP.ATTACHED_RESERVATION_UNIT.HINT></span> </ff-hint> </ff-label> <ff-select ff-model=$ctrl.user.attachedReservationUnit name=attachedReservationUnit ff-options="resUnit.name for resUnit in $ctrl.reservationUnits" ff-dim=!$ctrl.reservationUnits> </ff-select> </label> <kisi-access-group user-id=$ctrl.user.id save=$ctrl.kisiSave ng-if="$ctrl.user.membershipStatus.id === \'active\' || $ctrl.user.membershipStatus.id === \'inactive\'"></kisi-access-group> <ezeep-group user-id=$ctrl.user.id save=$ctrl.ezeepSave></ezeep-group> <label class=ff-row ng-if="$ctrl.user.makeRecurringBillingsInactive !== undefined"> <ff-checkbox name=makeRecurringBillingsInactive ff-model=$ctrl.user.makeRecurringBillingsInactive> <span translate=USER_PROFILE.MEMBERSHIP.INACTIVATE_RECURRING_BILLINGS></span> </ff-checkbox> </label> <label class=ff-row ng-if="$ctrl.user.makeCoMembersInactive !== undefined && $ctrl.user.coMembers.length"> <ff-checkbox name=makeCoMembersInactive ff-model=$ctrl.user.makeCoMembersInactive> <span translate=USER_PROFILE.MEMBERSHIP.INACTIVATE_CO_MEMBERS></span> </ff-checkbox> </label> <ff-row ng-if="$ctrl.user.membershipStatus.id === \'nonMember\' && $ctrl.user.selfRegistrationStatus"> <ff-label> <span class=text-danger ng-if="$ctrl.user.selfRegistrationStatus === \'abandoned\'"> <ff-icon sense=warning class=ff-flex-start></ff-icon> <span translate=USER_PROFILE.MEMBERSHIP.SIGN_UP.ABANDONED></span> </span> <span class=text-danger ng-if="$ctrl.user.selfRegistrationStatus === \'staffHelp\'"> <ff-icon sense=warning class=ff-flex-start></ff-icon> <span translate=USER_PROFILE.MEMBERSHIP.SIGN_UP.STAFF_HELP></span> </span> <span class=text-brand ng-if="$ctrl.user.selfRegistrationStatus === \'inProgress\'"> <ff-icon sense=info class=ff-flex-start></ff-icon> <span translate=USER_PROFILE.MEMBERSHIP.SIGN_UP.IN_PROGRESS></span> </span> </ff-label> </ff-row> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.membership.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> <ff-btn sense=reset size=sm ff-click=$ctrl.resetSelfRegistrationStatus() ng-if="$ctrl.user.membershipStatus.id === \'nonMember\' && $ctrl.user.selfRegistrationStatus === \'abandoned\'"> <span translate=USER_PROFILE.MEMBERSHIP.BTN_RESET_ABANDONED></span> </ff-btn> <ff-btn sense=reset size=sm ff-click=$ctrl.resetSelfRegistrationStatus() ng-if="$ctrl.user.membershipStatus.id === \'nonMember\' && $ctrl.user.selfRegistrationStatus === \'staffHelp\'"> <span translate=USER_PROFILE.MEMBERSHIP.BTN_RESET_STAFF_HELP></span> </ff-btn> <ff-btn sense=delete size=sm ff-click=$ctrl.deleteUser() ng-if="state.isLoggedAdmin() && !state.isLoggedRole(\'coordinator\') && !$ctrl.reg"> <span translate=USER_PROFILE.MEMBERSHIP.BTN_DELETE_USER></span> </ff-btn> </ff-btn-group> </ff-panel> '},ddam:function(e,r,t){"use strict";t.r(r);t("8cZI"),t("JBxO"),t("FdtR");var s=t("nbuU"),n=t.n(s),l=t("6RpP"),a=t.n(l),f=t("hsT8"),o=t.n(f),i=t("yCd9"),c=t.n(i);r.default=angular.module("deskworks.upBillingMethod",["autoSave","deskworks.helper","deskworks.state","deskworks.userProfile.service","deskworks.userProfile.optsBillingMethod"]).directive("upBillingMethod",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/billing-sections/up-billing-method.tpl.html",controller:"upBillingMethodCtrl as $ctrl",bindToController:{user:"<",reg:"<",settings:"<",single:"<",autoSave:"<",newPaymentMethods:"<"}}})).controller("upBillingMethodCtrl",["$scope","$timeout","dwAlerts","helper","state","userProfileService","optsBillingMethod","autoSave",function(e,r,t,s,l,f,i,u){var d=this;d.$onInit=function(){d.optsBillingMethod=i,d.prevState={},d.onChange(!0),e.$watchCollection((function(){var e,r,t;return c()(e=o()(r=a()(t=d.user.creditCards).call(t,d.user.eChecks)).call(r,(function(e){return d.newPaymentMethods||e.id&&!s.isUid(e.id)}))).call(e,(function(e){return e.id+e.number||""+e.bankRoutingNumber||""+e.bankAccountNumber||""}))}),(function(e,r){r!==e&&d.onChange()}))},d.onChange=function(e){var t,l,a,f;(e&&!d.reg||(d.user.billingMethod=d.user.billingMethod||d.optsBillingMethod[0].id),d.billingMethod=n()(t=d.optsBillingMethod).call(t,(function(e){return e.id===d.user.billingMethod})),d.optsPaymentMethod=[],d.billingMethod&&d.billingMethod.paymentMethodKey)&&(d.optsPaymentMethod=c()(a=o()(f=d.user[d.billingMethod.paymentMethodKey]).call(f,(function(e){return d.newPaymentMethods||e.id&&!s.isUid(e.id)}))).call(a,(function(e){return{id:e.id,name:e.number||e.bankRoutingNumber&&[e.bankRoutingNumber,e.bankAccountNumber].join(" / ")||"[new]"}})));d.paymentMethod=n()(l=d.optsPaymentMethod).call(l,(function(e){return e.id===d.user.paymentMethodId})),d.paymentMethod?d.user.paymentMethodId=d.paymentMethod.id:e&&!d.reg||!d.optsPaymentMethod.length?d.user.paymentMethodId=null:d.user.paymentMethodId=d.optsPaymentMethod[0].id,!1!==d.autoSave&&r((function(){if(!s.pointFirstInvalid("#upBillingMethod")){var r={billingMethod:d.user.billingMethod,paymentMethodId:d.user.paymentMethodId};e?d.prevState=r:angular.equals(d.prevState,r)||d.save().then((function(){d.prevState=r}))}}),100)},d.save=u.wrap((function(){var e={billingMethod:d.user.billingMethod,paymentMethodId:d.user.paymentMethodId};return d.saving=!0,f.updateRaw(l.getCurrentCenterId(),d.user,e).catch((function(e){return t.error(e,"Failed to save billing method.")})).finally((function(){d.saving=!1}))}))}])},e8sX:function(e,r){e.exports='<ff-panel id=upTermsOfService ng-if="$ctrl.schema.termsOfService && $ctrl.user.isNew()" class=ff-no-frame> <ff-panel-header style=margin-bottom:.5rem><req translate=USER_PROFILE.TERMS_OF_SERVICE.HEADER></req></ff-panel-header> <label class=ff-row> <ff-checkbox ff-model=$ctrl.user.termsOfService flex="0 0 36px" class=ff-center ff-required=true ff-validate-alert="{ required: (\'USER_PROFILE.TERMS_OF_SERVICE.REQUIRED\' | translate) }" title="{{\'USER_PROFILE.TERMS_OF_SERVICE.REQUIRED\' | translate}}"> </ff-checkbox> <ff-label> <span> <span translate=USER_PROFILE.TERMS_OF_SERVICE.LABEL></span> <a ng-href={{wlLinks.tosLinkUrl}} ng-bind=wlLinks.tosLinkText target=_blank rel=noopener></a> </span> </ff-label> </label> </ff-panel> '},"gB/y":function(e,r){e.exports='<div class=dw-modal> <div class=dw-modal-fade ng-click=close()></div> <div class="dw-modal-dialog our-member-modal"> <div class=dw-modal-scroll> <div class=our-member-header> <ff-img ff-src={{::member.photo}} ng-if=::member.photo></ff-img> <div class=our-member-details> <h4>{{::member.name}}</h4> <h5>{{::member.occupation}}</h5> <h6>{{::member.company}}</h6> <div class=our-member-contacts ng-if="::emails.length || phones.length"> <div class=our-member-emails ng-if=::emails.length> <span ng-repeat="field in ::emails"> <i class="fa fa-at"></i> <a ng-href=mailto:{{::field.value}} target=_blank rel=noopener>{{::field.value}}</a> </span> </div> <div class=our-member-phones ng-if=::phones.length> <span ng-repeat="field in ::phones"> <i class="fa fa-phone"></i> <a ng-href=tel:{{::field.value}} target=_blank rel=noopener>{{::field.value}}</a> </span> </div> </div> <div class=our-member-urls ng-if=::urls.length> <span ng-repeat="field in ::urls"> <a ng-href={{::field.value}} target=_blank rel=noopener title={{::field.name}}><i class=fa ng-class=::field.icon></i></a> </span> </div> </div> </div> <div ng-repeat="field in ::fields" class=our-member-field> <span>{{::field.name}}:</span>&nbsp;<span>{{::field.type === \'date\' ? (field.value | date:\'mediumDate\') : field.value}}</span> </div> </div> <button class=dw-modal-cross ng-click=close()></button> </div> </div> '},i0NF:function(e,r,t){"use strict";t.r(r);var s=t("YtL8"),n=t.n(s),l=t("yCd9"),a=t.n(l),f=t("Oio6");r.default=angular.module("deskworks.upPhones",["deskworks.helper","deskworks.state","deskworks.userProfile.service",f.a.name]).directive("upPhones",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-phones.tpl.html",controller:"upPhonesCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",single:"<"}}})).controller("upPhonesCtrl",["$scope","$q","$window","$translate","dwAlerts","helper","state","userProfileService","optsPhoneType",function(e,r,t,s,l,f,o,i,c){var u=this;u.types=a()(c).call(c,(function(e){return angular.extend(e,{name:s.instant(e.name)})})),u.new=i.phone.new,u.isNew=i.phone.isNew,u.countExisting=function(){var e;return n()(e=u.user.phones).call(e,(function(e,r){return f.isUid(r.id)?e:e+1}),0)},u.save=function(e){return i.phone.save(o.getCurrentCenterId(),u.user.id,e).catch((function(e){return l.error(e,"Failed to save phone.")}))},u.delete=function(e){return i.phone.isNew(e)?r.when():t.confirm(s.instant("USER_PROFILE.PHONES.CONFIRM_DELETE"))?i.phone.delete(o.getCurrentCenterId(),u.user.id,e).catch((function(e){return l.error(e,"Failed to delete phone.")})):r.reject()}}])},jtA9:function(e,r){e.exports='<ff-panel id=upCustomFields ng-if="$ctrl.schema.customFields && $ctrl.fields.length" ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.CUSTOM_FIELDS.HEADER></span></ff-panel-header> <ff-col ff-dim=!$ctrl.fields> <fd-field field=field ng-repeat="field in $ctrl.fields"></fd-field> </ff-col> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.customFields.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},kULM:function(e,r,t){"use strict";t.r(r);t("y89P");var s=t("nbuU"),n=t.n(s),l=t("hsT8"),a=t.n(l),f=t("2/1H");r.default=angular.module("deskworks.upMembership",["deskworks.helper","deskworks.state","deskworks.userProfile.service",f.a.name]).directive("upMembership",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-membership.tpl.html",controller:"upMembershipCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",kisiSave:"=",ezeepSave:"="}}})).controller("upMembershipCtrl",["$scope","$timeout","$window","$translate","$filter","$injector","$q","dwAlerts","state","helper","userProfileService","ReservationUnit","optsMembershipStatus",function(e,r,t,s,l,f,o,i,c,u,d,m,p){var b,g=this;g.$onInit=function(){g.kisi=f.has("kisiAccessGroupDirective"),g.ezeep=f.has("ezeepGroupDirective"),g.membStatuses=a()(p).call(p,(function(e){return!g.reg||!g.reg.member&&"nonMember"===e.id||g.reg.member&&("active"===e.id||"inactive"===e.id)})),g.schema.membership&&!1!==g.schema.membership.attachedReservationUnit&&m.query(c.getCurrentCenterId()).then((function(e){e.unshift({name:s.instant("USER_PROFILE.MEMBERSHIP.ATTACHED_RESERVATION_UNIT.NONE")}),g.user.attachedReservationUnit=n()(u).call(u,e,c.getParam("attachedReservationUnitId")),g.reservationUnits=a()(e).call(e,(function(e){return!e.attachedUserId||e.id==(g.user.attachedReservationUnit&&g.user.attachedReservationUnit.id)}))})).catch((function(e){return i.error(e,"Failed to query Reservation Units")})),e.$on("ffBlock::EditStart",(function(){b=g.user.membershipStatus,g.priceListOrig=g.user.membershipPriceList,delete g.user.makeRecurringBillingsInactive,delete g.user.makeCoMembersInactive})),e.$on("ffBlock::EditEnd",(function(){delete g.user.makeRecurringBillingsInactive,delete g.user.makeCoMembersInactive}))},g.save=function(){var e={};return"active"!==g.user.membershipStatus.id&&"inactive"!==g.user.membershipStatus.id||(e={membershipStatus:g.user.membershipStatus.id,membershipPriceListId:g.user.membershipPriceList.id,makeRecurringBillingsInactive:g.user.makeRecurringBillingsInactive,selfRegistrationStatus:null},g.user.coMembers&&g.user.coMembers.length&&(e.makeCoMembersInactive=g.user.makeCoMembersInactive)),g.schema.membership&&!1!==g.schema.membership.attachedReservationUnit&&(c.setParam("attachedReservationUnitId",g.user.attachedReservationUnit&&g.user.attachedReservationUnit.id),c.replace()),d.updateRaw(c.getCurrentCenterId(),g.user,e).catch((function(e){return i.error(e,"Failed to save membership.")})).then((function(){g.user.selfRegistrationStatus=null})).then((function(){if(g.kisiSave)return g.kisiSave()})).then((function(){if(g.ezeepSave)return g.ezeepSave()}))},g.onChangeStatus=function(){!g.reg&&b&&("inactive"===g.user.membershipStatus.id&&"active"===b.id?(g.user.makeRecurringBillingsInactive=!0,g.user.makeCoMembersInactive=!0):(delete g.user.makeRecurringBillingsInactive,delete g.user.makeCoMembersInactive))},g.resetSelfRegistrationStatus=function(){return d.updateRaw(c.getCurrentCenterId(),g.user,{selfRegistrationStatus:null}).catch((function(e){return i.error(e,"Failed to reset abandoned self-registration status.")})).then((function(){r((function(){g.user.selfRegistrationStatus=null}))}))},g.deleteUser=function(){if(t.confirm(s.instant("USER_PROFILE.MEMBERSHIP.CONFIRM_DELETE_USER")))return d.delete(c.getCurrentCenterId(),g.user.id).catch((function(e){return i.error(e,"Failed to delete user.")})).then((function(){return c.setCurrentUser(null)}))}}])},l7tb:function(e,r){e.exports='<div id=upCreditCards class="ff-grid gutter-v gutter-h" ff-section="cc in $ctrl.user.creditCards" ff-section-new=$ctrl.new()> <ff-panel flex="{{ $ctrl.single ? null : {lg: \'0 0 50%\'} }}" ng-if=!$ctrl.user.creditCards.length> <span translate=BILLING_PROFILE.CREDIT_CARDS.EMPTY></span> </ff-panel> <ff-panel flex="{{ $ctrl.single ? null : {lg: \'0 0 50%\'} }}" id="{{\'upCreditCard-\' + cc.id}}" ff-block ff-block-save=$ctrl.save(cc) ff-block-delete=$ctrl.delete(cc) ff-block-edit-default=$ctrl.isNew(cc) ff-block-is-new=$ctrl.isNew(cc)> <div class="ff-grid gutter-v"> <ff-panel> <ff-panel-header><span translate=BILLING_PROFILE.CREDIT_CARDS.HEADER></span></ff-panel-header> <fieldset dw-credit-card=cc dw-credit-card-types=$ctrl.settings.creditCardTypes></fieldset> </ff-panel> <ff-panel> <ff-panel-header><span translate=BILLING_PROFILE.CREDIT_CARDS.ADDRESS></span></ff-panel-header> <fieldset dw-address=cc not-required=$ctrl.settings.creditCardAddressOptional></fieldset> </ff-panel> </div> <ff-btn-group class=ff-block-buttons ng-if="!$ctrl.user.accessRights.billingInfo.readOnly && (!$ctrl.isNew(cc) || !$ctrl.single)"> <ff-btn ff-btn-block-delete ng-if="$ctrl.hasDeleteButton(cc, ffBlock)" ng-hide=false></ff-btn> <ff-btn ff-btn-block-save ng-if="!$ctrl.reg && !$ctrl.single"></ff-btn> <ff-btn ff-btn-block-cancel ng-if="!$ctrl.reg && !$ctrl.single"></ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=ff-btn-full ng-if="!$ctrl.user.accessRights.billingInfo.readOnly && !$ctrl.single"> <ff-btn ff-btn-section-new><span translate=BILLING_PROFILE.CREDIT_CARDS.BTN_ADD></span></ff-btn> </ff-btn-group> </div> '},"m2t+":function(e,r,t){"use strict";t.r(r);var s=t("hsT8"),n=t.n(s),l=t("D4RU"),a=t.n(l);angular.module("deskworks.members.userProfile.edit",["deskworks.routeHelper","deskworks.helper","deskworks.setup.service","deskworks.userProfile.service","deskworks.UserProfileFields"]).config(["$routeProvider",function(e){e.when("/profile",{template:"<div ng-include=\"'members/user-profile/user-profile.tpl.html'\" ff-bulk-read-only></div>",controller:"UserProfileEditCtrl as vm",label:"Profile",routeBranch:"profile",translations:["user-profile"],resolve:{reg:angular.noop,userProfile:["dwAlerts","userProfileService","state","routeHelper","resolveTimezone",function(e,r,t,s,n){return s.auth().then((function(){return s.selectUser().then((function(){return n()})).then((function(){return r.get(t.getCurrentCenterId(),t.getCurrentUserId()).catch((function(r){return e.error(r,"Failed to load user profile.")}))}))}))}],center:["state","centerService",function(e,r){return e.getCurrentCenterId()?r.get(e.getCurrentCenterId()):{}}],lazyKisi:"lazyLoadKisi",lazyEzeep:"lazyLoadEzeep"}}),e.when("/new-member/:userId",{template:"<div ng-include=\"'members/user-profile/user-profile.tpl.html'\" ff-bulk-read-only></div>",controller:"UserProfileEditCtrl as vm",label:"New Member",routeBranch:"new-member",translations:["user-profile"],resolve:{reg:function(){return{member:!0,selfRegistration:!1,step:1,stepCount:3}},userProfile:["$route","dwAlerts","state","userProfileService","routeHelper","resolveTimezone",function(e,r,t,s,n,l){return n.auth().then((function(){return l()})).then((function(){return s.getForRegistration(t.getCurrentCenterId(),e.current.params.userId,"member","register").catch((function(e){return r.error(e,"Failed to load user profile.")}))}))}],center:["state","centerService",function(e,r){return e.getCurrentCenterId()?r.get(e.getCurrentCenterId()):{}}],lazyKisi:"lazyLoadKisi",lazyEzeep:"lazyLoadEzeep"}}),e.when("/new-user/:userId",{template:"<div ng-include=\"'members/user-profile/user-profile.tpl.html'\" ff-bulk-read-only></div>",controller:"UserProfileEditCtrl as vm",label:"New User",routeBranch:"new-user",translations:["user-profile"],resolve:{reg:function(){return{member:!1,selfRegistration:!1,step:1,stepCount:2}},userProfile:["$route","dwAlerts","state","userProfileService","routeHelper","resolveTimezone",function(e,r,t,s,n,l){return n.auth().then((function(){return l()})).then((function(){return s.getForRegistration(t.getCurrentCenterId(),e.current.params.userId,"nonMember","register").catch((function(e){return r.error(e,"Failed to load user profile.")}))}))}],center:["state","centerService",function(e,r){return e.getCurrentCenterId()?r.get(e.getCurrentCenterId()):{}}]}})}]).controller("UserProfileEditCtrl",["$scope","$translate","$filter","dwAlerts","state","helper","reg","userProfile","userProfileService","setupService","center","UserProfileFields",function(e,r,t,s,l,f,o,i,c,u,d,m){var p,b=this;if(o)l.setPageTitle(o.member?"New Member Registration":"New Non-Member Registration");else{var g=r.instant("USER_PROFILE.PAGE_TITLE",{userName:i.firstName+" "+i.lastName});l.setPageTitle(g)}(b.reg=o,b.center=d,b.userProfile=i,b.schema=i.schema,b.reg&&b.reg.member)&&(a()(p=b.userProfile.options.membershipTypes).call(p,(function(e){var r=f.findByKeyValue(e.membershipPackages,"id",l.getParam("productId"));return r&&(b.userProfile.membershipType=e,b.userProfile.membershipProduct=r),!!r})),l.getParam("membershipStartDate")&&(b.userProfile.membershipStartDate=t("toDate")(l.getParam("membershipStartDate"))));b.reg||u.getSetupSettings().then((function(e){b.settings=e})).catch((function(e){return s.error(e,"Failed to get setup settings.")})).catch(angular.noop),(b.schema.customFields||b.schema.shareable)&&m.query(l.getCurrentCenterId(),b.userProfile.id).then((function(e){b.customFields=n()(e).call(e,(function(e){return"customFields"===e.section})),b.shareable=n()(e).call(e,(function(e){return"shareable"===e.section}))})).catch((function(e){return s.error(e,"Failed to query user profile fields.")})).catch(angular.noop),b.next=function(){return l.setParam("productId",(b.userProfile.membershipProduct||{}).id),l.setParam("membershipStartDate",t("date")(b.userProfile.membershipStartDate,"yyyy-MM-dd")),l.setPath(l.getPath()+"/membership/billing-profile")}}])},ntZG:function(e,r){e.exports='<div id=upBillingMethod class="ff-grid gutter-h"> <ff-panel flex="{lg: \'0 0 50%\'}"> <ff-spin ng-if=$ctrl.saving></ff-spin> <ff-header><span translate=BILLING_PROFILE.BILLING_METHOD></span></ff-header> <div class=ff-grid> <label flex="{md: \'0 0 50%\'}"> <ff-select ff-model=$ctrl.user.billingMethod ff-required=true ff-change=$ctrl.onChange() ff-options="opt.id as opt.name for opt in $ctrl.optsBillingMethod" ff-validate-alert="{{\'BILLING_PROFILE.BILLING_METHOD\' | translate}}"></ff-select> </label> <label flex="{md: \'0 0 50%\'}" ng-if=$ctrl.billingMethod.paymentMethodKey> <ff-select ff-model=$ctrl.user.paymentMethodId ff-required=true ff-change=$ctrl.onChange() ff-options="opt.id as opt.name for opt in $ctrl.optsPaymentMethod" ff-validate-alert="{{\'BILLING_PROFILE.PAYMENT_METHOD\' | translate}}"></ff-select> </label> </div> </ff-panel> </div> '},ovSQ:function(e,r,t){"use strict";t.r(r);var s=t("zTcH"),n=t("yrhy"),l=t("XRrO");r.default=angular.module("deskworks.upLoginInfo",["deskworks.upAccessCodes",s.a.name,n.a.name,l.a.name]).directive("upLoginInfo",(function(){return{templateUrl:"members/user-profile/sections/up-login-info.tpl.html",restrict:"E",scope:!0,controller:"upLoginInfoCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",memberDirectoryUrl:"<"}}})).controller("upLoginInfoCtrl",["$scope","$q","dwAlerts","state","userProfileService",function(e,r,t,s,n){var l=this;e.$watch("$ctrl.saveMessageBoardUserSettings",(function(){l.user.saveMessageBoardUserSettings=l.saveMessageBoardUserSettings})),l.save=function(){var e={login:l.user.login,password:l.user.password,passwordConfirmation:l.user.passwordConfirmation};return r.all([n.updateRaw(s.getCurrentCenterId(),l.user,e).catch((function(e){return t.error(e,"Failed to save login information.")})),l.saveAccessCards&&l.saveAccessCards().catch((function(e){return t.error(e,"Failed to save access cards.")})),l.saveMessageBoardUserSettings&&l.saveMessageBoardUserSettings().catch((function(e){return t.error(e,"Failed to save message board user settings.")}))])}}])},pp4h:function(e,r,t){"use strict";t.r(r),r.default=angular.module("deskworks.upTermsOfService",["deskworks.helper","deskworks.state"]).directive("upTermsOfService",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-terms-of-service.tpl.html",controller:"upTermsOfServiceCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<"}}})).controller("upTermsOfServiceCtrl",(function(){}))},qgYx:function(e,r,t){},sLGz:function(e,r){e.exports='<ff-panel id=upLoginInfo ng-if=$ctrl.schema.loginInfo ff-block ff-block-save=$ctrl.save() ff-block-edit-default=$ctrl.user.isNew()> <ff-panel-header><span translate=USER_PROFILE.LOGIN_INFO.HEADER></span></ff-panel-header> <label class=ff-row> <ff-label flex="0 1 132px"><req translate=GLOBAL.LOGIN></req></ff-label> <ff-login name=login ff-model=$ctrl.user.login ff-required=true dw-login></ff-login> </label> <label class=ff-row> <ff-label flex="0 1 132px"><req translate=GLOBAL.PASSWORD></req></ff-label> <ff-password name=password ff-model=$ctrl.user.password ff-required={{$ctrl.reg.new}} dw-password ff-not-contain="[$ctrl.user.login, $ctrl.user.login.split(\'\').reverse().join(\'\'), $ctrl.user.firstName, $ctrl.user.lastName]" ff-validate-alert=\'{ "notContain": "{{&#39;GLOBAL.PASSWORD.NOT_CONTAIN&#39; | translate}}" }\'></ff-password> </label> <label class=ff-row> <ff-label flex="0 1 132px" class=ff-small><req translate=USER_PROFILE.LOGIN_INFO.PASSWORD_CONF></req></ff-label> <ff-password name=passwordConfirmation ff-model=$ctrl.user.passwordConfirmation dw-password ff-required={{$ctrl.reg.new}} ff-match=ffBlockForm.password.$viewValue ff-validate-alert=\'{ "field": "{{&#39;USER_PROFILE.LOGIN_INFO.PASSWORD_CONF&#39; | translate}}", "matchField": "{{&#39;GLOBAL.PASSWORD&#39; | translate}}" }\'> </ff-password> </label> <ff-row ng-if=$ctrl.schema.accessCodes> <ff-label flex="0 1 132px"><span translate=USER_PROFILE.LOGIN_INFO.ACCESS_CODES></span></ff-label> <ff-static> <up-access-codes flex=auto user-profile=$ctrl.user save=$ctrl.saveAccessCards></up-access-codes> </ff-static> </ff-row> <label class=ff-row ng-if="$ctrl.schema.loginInfo.memberDirectory !== false && $ctrl.memberDirectoryUrl"> <ff-label flex="0 1 132px"><span translate=USER_PROFILE.LOGIN_INFO.MEMBER_DIRECTORY></span></ff-label> <ff-static name=memberDirectory class=ff-small> <a ng-href={{$ctrl.memberDirectoryUrl}} target=_blank rel=noopener> <span translate=USER_PROFILE.LOGIN_INFO.MEMBER_DIRECTORY_LINK></span> </a> </ff-static> </label> <message-board-user-settings user-id=$ctrl.user.id save=$ctrl.saveMessageBoardUserSettings ng-if="$ctrl.schema.loginInfo && $ctrl.schema.loginInfo.messageBoardNotices !== false"></message-board-user-settings> <ff-btn-group class=ff-section-buttons ng-if="!$ctrl.schema.loginInfo.$readOnly && !$ctrl.reg.new"> <ff-btn ff-btn-block-edit></ff-btn> <ff-btn ff-btn-block-save></ff-btn> <ff-btn ff-btn-block-cancel></ff-btn> </ff-btn-group> </ff-panel> '},tCyP:function(e,r,t){"use strict";t.r(r);var s=t("GJsN");r.default=angular.module("deskworks.upShareable",["deskworks.userProfile.service","deskworks.UserProfileFields","deskworks.optsShareEmail",s.a.name]).directive("upShareable",(function(){return{restrict:"E",scope:!0,templateUrl:"members/user-profile/sections/up-shareable.tpl.html",controller:"upShareableCtrl as $ctrl",bindToController:{reg:"<",user:"<",schema:"<",fields:"<"}}})).controller("upShareableCtrl",["$scope","$q","dwAlerts","state","userProfileService","UserProfileFields","optsShareEmail",function(e,r,t,s,n,l,a){var f=this;f.$onInit=function(){f.optsShareEmail=a},f.save=function(){var a={sharePhoto:f.user.sharePhoto,shareCompany:f.user.shareCompany,shareOccupation:f.user.shareOccupation,shareEmail:f.user.shareEmail};return r.all([n.updateRaw(s.getCurrentCenterId(),f.user,a).then((function(){return e.$emit("CurrentUser:refresh")})).catch((function(e){return t.error(e,"Failed to save user shareable info.")})).catch(angular.noop),l.save(s.getCurrentCenterId(),f.user.id,f.fields).catch((function(e){return t.error(e,"Failed to save user profile fields.")})).catch(angular.noop)])}}])},zcfi:function(e,r){e.exports='<div id=upPhones ng-if=$ctrl.schema.phones class="ff-grid gutter-v gutter-h" ff-section="phone in $ctrl.user.phones" ff-section-new=$ctrl.new()> <ff-panel ng-if=!$ctrl.user.phones.length> <ff-panel-header><span translate=USER_PROFILE.PHONES></span></ff-panel-header> <span translate=USER_PROFILE.PHONES.EMPTY></span> </ff-panel> <ff-panel flex="{{ $ctrl.single ? null : {md: \'0 0 50%\'} }}" id="{{\'upPhone-\' + phone.id}}" ff-block ff-block-save=$ctrl.save(phone) ff-block-delete=$ctrl.delete(phone) ff-block-edit-default=$ctrl.isNew(phone) ff-block-is-new=$ctrl.isNew(phone)> <ff-panel-header><span translate=USER_PROFILE.PHONE></span></ff-panel-header> <label class=ff-row> <ff-label flex="0 1 116px"><req translate=USER_PROFILE.PHONES.TYPE></req></ff-label> <ff-select name=type ff-model=phone.type ff-options="type.name for type in $ctrl.types" ff-required=true ff-validate-alert="{{\'USER_PROFILE.PHONES.TYPE\' | translate}}"></ff-select> </label> <ff-row> <label flex="1 1 auto"> <ff-label flex="0 1 116px"><req translate=USER_PROFILE.PHONES.NUMBER></req></ff-label> <ff-text name=number ff-model=phone.number ff-required=true dw-phone placeholder=888-379-2865></ff-text> </label> <label flex="0 0 78px"> <ff-label flex="0 1 34px"><span translate=USER_PROFILE.PHONES.EXT></span></ff-label> <ff-text name=ext ff-model=phone.ext></ff-text> </label> </ff-row> <ff-btn-group class=ff-block-buttons ng-if=!$ctrl.schema.phones.$readOnly> <ff-btn ff-btn-block-edit ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-delete ng-if="($ctrl.isNew(phone) ? $ctrl.user.phones.length : $ctrl.countExisting()) > 1" ng-hide="ffBlock.editMode && !$ctrl.reg.new"></ff-btn> <ff-btn ff-btn-block-save ng-if=!$ctrl.reg.new></ff-btn> <ff-btn ff-btn-block-cancel ng-if=!$ctrl.reg.new></ff-btn> </ff-btn-group> </ff-panel> <ff-btn-group class=ff-btn-full ng-if="!$ctrl.schema.phones.$readOnly && !$ctrl.single"> <ff-btn ff-btn-section-new> <span translate=GLOBAL.BTN_NEW></span> <span translate=USER_PROFILE.PHONE></span> </ff-btn> </ff-btn-group> </div> '}}]);