(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"+1+s":function(e,t){e.exports="<div id=reservationReport class=gutter-v> <form name=formReservationReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <report-columns ng-model=vm.config.reportColumns></report-columns> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions> <report-dates ng-model=vm.config.reportDates embed=\"0 0 100px\"></report-dates> </report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},"/1cb":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.optsReportByPeriod",[]).factory("optsReportByPeriod",["$rootScope","$translate","$filter",function(e,t,r){var n=r("date"),o=[{id:"week",_name:"REPORTS.BY_PERIOD.WEEK",format:function(e,t){return n(e,"MMM d")+" - "+n(t,"MMM d")}},{id:"month",_name:"REPORTS.BY_PERIOD.MONTH",format:function(e,t){return n(e,"MMM")}},{id:"quarter",_name:"REPORTS.BY_PERIOD.QUARTER",format:function(e,t){return n(e,"MMM")+" - "+n(t,"MMM")}},{id:"year",_name:"REPORTS.BY_PERIOD.YEAR",format:function(e,t){return n(e,"yyyy")}}];function a(){o.forEach(function(e){e.name=t.instant(e._name)})}return a(),e.$on("$setTranslationsSuccess",a),o}])},"1THZ":function(e,t,r){"use strict";r.r(t);r("2UZ+");t.default=angular.module("deskworks.ReservationUtilizationReportCtrl",["pdfPreview","fileSaver","chart","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.ReservationUtilizationReport","deskworks.reservationUtilizationReportColumns","deskworks.reportByPeriod","deskworks.reservationUtilizationReportAggregate","deskworks.reports.reservationUtilizationReportPieChart"]).controller("ReservationUtilizationReportCtrl",["$scope","$location","$timeout","$translate","$filter","helper","state","fileSaver","reportStyles","ReportBuilder","ReservationUtilizationReport","reservationUtilizationReportColumns","reservationUtilizationReportAggregate","reservationUtilizationReportPieChart",function(e,t,r,n,o,a,i,s,l,d,u,f,p,c){var m,g=this;function R(e){var t={columns:[],rows:[],styles:[]},r=p(e),a=e.reportColumns.findIndex(function(e){return"[period]"===e.dataKey});if(a<0)throw new Error("[period] is not found in report columns");return t.columns=r.periods.map(function(t){return angular.extend({},e.reportColumns[a],{dataKey:o("date")(t.fromDate,"yyyyMMdd"),title:t.title})}),t.columns=e.reportColumns.slice(0,a).concat(t.columns).concat(e.reportColumns.slice(a+1)),r.units.forEach(function(e){t.rows.push([e.unitName].concat(Array.apply(null,Array(t.columns.length-1)).map(Boolean.prototype.valueOf,!1))),t.styles.push(l.h2),e.groups.forEach(function(e,r){t.rows.push([e.name].concat(e.totals).concat(e.total)),t.styles.push(r%2?null:l.rowOdd)}),t.rows.push([[e.unitName,n.instant("REPORTS.TOTAL")].join(" ")].concat(e.totals).concat(e.total)),t.styles.push(l.h3)}),t}g.config={reportName:n.instant("RESERVATION_UTILIZATION_REPORT.REPORT_NAME"),reportOptions:{},reportColumns:f,reportDates:{fromDate:moment().subtract(1,"month").startOf("month"),toDate:moment().subtract(1,"month").endOf("month")},getReportData:function(){return u.query({centerId:g.config.reportOptions.centerId||void 0,fromDate:o("date")(g.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:o("date")(g.config.reportDates.toDate,"yyyy-MM-dd")})}},i.setPageTitle(g.config.reportName),g.reportBuilder=new d(g.config),e.$watch(function(){return{reportOptions:g.config.reportOptions,reportDates:g.config.reportDates,byPeriod:g.config.byPeriod}},function(e,t){m&&(r.cancel(m),m=null),m=r(function(){if(g.pdf=null,!a.pointFirstInvalid("#reservationUtilizationReport")&&g.config.reportDates.fromDate&&g.config.reportDates.toDate){var r=e.reportDates.fromDate,n=t.reportDates.fromDate;!moment.isMoment(r)||moment.isMoment(n)&&r.isSame(n)||(g.config.reportData=null),r=e.reportDates.toDate,n=t.reportDates.toDate,!moment.isMoment(r)||moment.isMoment(n)&&r.isSame(n)||(g.config.reportData=null),g.reportBuilder.generatePdf(R).then(function(e){g.pdf=e.output("blob")}).then(function(){g.chart=c.getChartData(p(g.config))})}},100)},!0),g.downloadPdf=function(){g.pdf&&s(g.pdf,g.reportBuilder.getReportFileName("pdf"))},g.downloadCsv=function(){g.pdf&&s(g.reportBuilder.buildCsv(R),g.reportBuilder.getReportFileName("csv"))}}])},"2S09":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.membershipReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportColumns","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.membershipReport.service","deskworks.reports.membershipReportColumns"]).controller("MembershipReportCtrl",["$scope","$timeout","$location","$translate","state","helper","fileSaver","ReportBuilder","MembershipReport","membershipReportColumns","fields",function(e,t,r,n,o,a,i,s,l,d,u){var f,p=this;function c(e){var t={columns:e.reportColumns.columns.filter(function(e){return e.include}),rows:e.reportData};return t.rows=p.reportBuilder.sortData(t.rows,e.reportColumns.order),t.rows=t.rows.map(function(e){return t.columns.map(function(t){return e[t.dataKey]})}),t}p.config={reportName:n.instant("MEMBERSHIP_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:angular.copy(d)},getReportData:function(){var e={centerId:p.config.reportOptions.centerId,ownerId:p.config.reportOwnerRegion.ownerId,regionId:p.config.reportOwnerRegion.regionId};return l.query(angular.extend(e,p.membershipFilter)).$promise.then(function(e){return e.map(function(e){return e.fields&&delete(e=angular.extend(e,e.fields)).fields,e})})}},o.setPageTitle(p.config.reportName),p.reportBuilder=new s(p.config),angular.forEach(u,function(e){p.config.reportColumns.columns.push({dataKey:e.id,title:e.name,include:!1})}),e.$watch(function(){return{reportOptions:p.config.reportOptions,reportColumns:p.config.reportColumns,reportOwnerRegion:p.config.reportOwnerRegion,membershipFilter:p.membershipFilter}},function(e,r){f&&(t.cancel(f),f=null),f=t(function(){p.pdf=null,e&&r&&!angular.equals(e.membershipFilter,r.membershipFilter)&&(p.config.reportData=null),angular.isUndefined(p.config.reportOptions.centerId)||p.reportBuilder.buildPdf(c).then(function(e){p.pdf=e})},100)},!0),p.downloadPdf=function(){p.pdf&&i(p.pdf,p.reportBuilder.getReportFileName("pdf"))},p.downloadCsv=function(){p.pdf&&i(p.reportBuilder.buildCsv(c),p.reportBuilder.getReportFileName("csv"))}}])},"3DDD":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.membershipReportColumns",[]).factory("membershipReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"company",_title:"MEMBERSHIP_REPORT.COLUMNS.COMPANY",include:!0,minWidth:150},{dataKey:"name",_title:"MEMBERSHIP_REPORT.COLUMNS.NAME",include:!0,minWidth:150},{dataKey:"address",_title:"MEMBERSHIP_REPORT.COLUMNS.ADDRESS",include:!1,minWidth:150},{dataKey:"comments",_title:"MEMBERSHIP_REPORT.COLUMNS.COMMENTS",include:!1,minWidth:250},{dataKey:"email",_title:"MEMBERSHIP_REPORT.COLUMNS.EMAIL",include:!1,minWidth:150},{dataKey:"phone",_title:"MEMBERSHIP_REPORT.COLUMNS.PHONE",include:!1,minWidth:100},{dataKey:"facility",_title:"MEMBERSHIP_REPORT.COLUMNS.FACILITY",include:!1,minWidth:150},{dataKey:"joinDate",_title:"MEMBERSHIP_REPORT.COLUMNS.JOIN_DATE",include:!1,minWidth:100,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"occupation",_title:"MEMBERSHIP_REPORT.COLUMNS.OCCUPATION",include:!0,minWidth:150},{dataKey:"pricelist",_title:"MEMBERSHIP_REPORT.COLUMNS.PRICE_LIST",include:!0,minWidth:160},{dataKey:"status",_title:"MEMBERSHIP_REPORT.COLUMNS.STATUS",include:!0,width:"wrap"},{dataKey:"printerCodes",_title:"MEMBERSHIP_REPORT.COLUMNS.PRINTER_CODES",include:!1},{dataKey:"leadSource",_title:"MEMBERSHIP_REPORT.COLUMNS.LEAD_SOURCE",include:!1}];function o(){n.forEach(function(e){e.title=r.instant(e._title)})}return o(),e.$on("$setTranslationsSuccess",o),n}])},"3i5X":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.reportHeader",["deskworks.reports.reportStyles"]).factory("reportHeader",["$filter","$translate","reportStyles",function(e,t,r){return function(n,o,a){var i,s,l,d=o.internal.pageSize.width;o.setFontStyle("normal"),o.setTextColor(r.header.textColor),s=r.pageMargins[3],l=40,o.setFontSize(14),i=a.reportName.toUpperCase(),o.text(i,s,l),s+=o.getTextWidth(i)+3,a.reportDates&&(o.setFontSize(7),i=t.instant("REPORTS.HEADER.FOR_PERIOD").toUpperCase(),a.reportDates.fromDate&&(i+=" "+t.instant("REPORTS.HEADER.FROM").toUpperCase()+":"),o.text(i,s,l),s+=o.getTextWidth(i)+3,a.reportDates.fromDate&&(o.setFontSize(9),i=e("date")(a.reportDates.fromDate,"mediumDate")||"",o.text(i,s,l),s+=o.getTextWidth(i)+3),o.setFontSize(7),i=t.instant("REPORTS.HEADER.THROUGH").toUpperCase()+":",o.text(i,s,l),s+=o.getTextWidth(i)+3,o.setFontSize(9),i=e("date")(a.reportDates.toDate,"mediumDate")||"",o.text(i,s,l),s+=o.getTextWidth(i)+3),s=d-r.pageMargins[1],o.setFontSize(9),i=""+n.pageCount,s-=o.getTextWidth(i),o.text(i,s,l),o.setFontSize(7),i=t.instant("REPORTS.HEADER.PAGE").toUpperCase()+":",s-=o.getTextWidth(i+" "),o.text(i,s,l-.6),s=r.pageMargins[3],l+=11,o.setFontSize(7),i=t.instant("REPORTS.HEADER.REPORT_FOR").toUpperCase()+":",o.text(i,s,l-.6),s+=o.getTextWidth(i+" "),o.setFontSize(9),i=a.reportFor||(!1===a.reportOptions.centerId||+a.reportOptions.centerId)&&[a.center.name,a.center.city,a.center.state.name].join(", ")||"All Centers",o.text(i,s,l),s+=o.getTextWidth(i+" "),s=d-r.pageMargins[1],o.setFontSize(9),i=e("date")(moment(),"mediumDate"),s-=o.getTextWidth(i),o.text(i,s,l),o.setFontSize(7),i=t.instant("REPORTS.HEADER.REPORT_DATE").toUpperCase()+":",s-=o.getTextWidth(i+" "),o.text(i,s,l-.6)}}])},"5+k5":function(e,t,r){"use strict";r.r(t);var n=r("Xai3");t.default=angular.module("deskworks.reports.ReportBuilder",[n.default.name,"csvMake","jsPDF","deskworks.logo","deskworks.reports.reportStyles","deskworks.reports.reportHeader","deskworks.reports.reportFooter","deskworks.center.service"]).factory("ReportBuilder",["$rootScope","$q","$timeout","$window","$filter","$http","state","logo","jsPDF","csvMake","centerService","reportStyles","reportHeader","reportFooter","reportSort",function(e,t,r,n,o,a,i,s,l,d,u,f,p,c,m){return function(r){var n=this;function a(e,t,r,n){return e.styles.fillColor&&(angular.isArray(e.styles.fillColor)?(r.setFillColor.apply(null,e.styles.fillColor),r.setDrawColor.apply(null,e.styles.fillColor)):(r.setFillColor(e.styles.fillColor),r.setDrawColor(e.styles.fillColor)),r.rect(e.x,e.y,e.width,e.height,"DF")),angular.isNumber(e.styles.textColor)?r.setTextColor(e.styles.textColor):r.setTextColor.apply(null,e.styles.textColor),r.setFontStyle(e.styles.fontStyle),"center"===n[t.column.dataKey].halign?r.autoTableText(e.text,e.textPos.x+e.width/2-e.styles.cellPadding,e.textPos.y,{halign:"center",valign:e.styles.valign}):"right"===n[t.column.dataKey].halign?r.autoTableText(e.text,e.textPos.x+e.width-2*e.styles.cellPadding,e.textPos.y,{halign:"right",valign:e.styles.valign}):r.autoTableText(e.text,e.textPos.x,e.textPos.y,{halign:n[t.column.dataKey].halign,valign:e.styles.valign}),0===t.column.index&&e.styles.borderColor&&e.styles.borderWidth&&(r.setLineWidth(e.styles.borderWidth),r.setDrawColor(e.styles.borderColor[0],e.styles.borderColor[1],e.styles.borderColor[2]),r.rect(t.settings.margin.left+e.styles.borderWidth/2,t.row.y+e.styles.borderWidth/2,t.table.width-e.styles.borderWidth,t.row.height-2*e.styles.borderWidth,"S")),!1}e.$watch(function(){return r.reportOptions.centerId},function(e,t){e!==t&&(r.reportData=null,r.center=null)}),n.resolve=function(){return t.all({reportData:r.reportData||r.getReportData().catch(function(t){return e.showError(t,"Failed to load report data.")}),center:r.center||u.get(+r.reportOptions.centerId||i.getCurrentCenterId()).catch(function(t){return e.showError(t,"Failed to load center data.")}),logo:r.logo||s.getSiteLogo()}).then(function(e){return r.reportData=e.reportData,r.center=e.center,r.logo=e.logo,r})},n.buildPdf=function(e,t){return n.generatePdf(e,t).then(function(e){return e.output("blob")})},n.generatePdf=function(e,t,o){return n.resolve().then(function(){var n=o||new l(r.reportOptions.paperLayout,"pt",r.reportOptions.paperSize),i=e(r);i.rows.forEach(function(e){i.columns.forEach(function(t,r){!1===e[r]?e[r]="":(t.pdf&&(e[r]=t.pdf(e[r])),e[r]=angular.isUndefined(e[r])||null===e[r]||""===e[r]?"-":e[r])})});var s={headerStyles:(t||f).headerStyles,bodyStyles:(t||f).bodyStyles,columnStyles:(t||f).columnStyles,margin:(t||f).pageMargins,tableMargin:t&&t.tableMargin||(t||f).pageMargins,startY:r.startY||(t||f).startY||!1,addPageContent:function(e){(r.reportHeader||p)(e,n,r),(r.reportFooter||c)(e,n,r)},createdHeaderCell:function(e,t){var r=i.columns[t.column.index];t.column.widthStyle=r.width||t.column.widthStyle,r.minWidth&&(t.column.minWidth=r.minWidth)}};return(r.stylesInjector||i.styles)&&(s.createdCell=r.stylesInjector||function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,i.styles[t.row.index])},s.drawCell=function(e,t){return a(e,t,n,i.columns)},s.drawHeaderCell=function(e,t){return a(e,t,n,i.columns)}),n.autoTable(i.columns.map(function(e){return e.title.toUpperCase()}),i.rows,angular.extend({},s,{margin:s.tableMargin||s.margin})),n})},n.buildCsv=function(e){var t={charset:"utf-8"},n=e(r);return n.rows.forEach(function(e){n.columns.forEach(function(t,r){t.csv&&(e[r]=t.csv(e[r])),e[r]=angular.isUndefined(e[r])||null===e[r]||!1===e[r]||""===e[r]?"":e[r]})}),n.rows.unshift(n.columns.map(function(e){return e.title.toUpperCase()})),new Blob([d.generate(n.rows,t)],{type:"text/csv;charset="+t.charset+";"})},n.getReportFileName=function(e,t){var n=!1===r.reportOptions.centerId||+r.reportOptions.centerId?r.center.shortName:"all-centers",a=r.reportName;return n=(n||"").toLowerCase().replace(/\s+/g,"-"),a=(a||"").toLowerCase().replace(/\s+/g,"-"),e=(e||"pdf").toLowerCase(),a+"-"+n+"-"+o("date")(moment(),"yyyyMMdd-HHmmss")+(t||"")+"."+e},n.sortData=m}}])},"5ual":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.WriteOffReportCtrl",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.WriteOffReport","deskworks.writeOffReportColumns","deskworks.reportOrderBy"]).controller("WriteOffReportCtrl",["$scope","$timeout","$translate","$filter","$location","helper","state","fileSaver","reportStyles","ReportBuilder","WriteOffReport","writeOffReportColumns",function(e,t,r,n,o,a,i,s,l,d,u,f){var p,c=this;function m(e){var t={columns:e.reportColumns,rows:[],styles:[]},n=0;return t.rows=c.reportBuilder.sortData(e.reportData,e.orderBy).map(function(e,r){return t.styles.push(r%2?null:l.rowOdd),n+=e.amount,t.columns.map(function(t){return e[t.dataKey]})}),t.rows.push(Array.apply(null,Array(t.columns.length-2)).map(Boolean.prototype.valueOf,!1).concat([r.instant("REPORTS.TOTAL")+":",a.round(n)])),t.styles.push(l.h3),t}c.config={reportName:r.instant("WRITE_OFF_REPORT.REPORT_NAME"),reportOptions:{},reportColumns:f,reportDates:{fromDate:moment().date(1),toDate:moment()},getReportData:function(){return u.query({centerId:c.config.reportOptions.centerId||null,fromDate:n("date")(c.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:n("date")(c.config.reportDates.toDate,"yyyy-MM-dd")})}},i.setPageTitle(c.config.reportName),c.reportBuilder=new d(c.config),e.$watch(function(){return{reportOptions:c.config.reportOptions,reportDates:c.config.reportDates,orderBy:c.config.orderBy,orderSort:c.config.orderSort}},function(e,r){p&&(t.cancel(p),p=null),p=t(function(){if(c.pdf=null,!angular.isUndefined(c.config.reportOptions.centerId)&&c.config.reportDates.fromDate&&c.config.reportDates.toDate){var t=e.reportDates.fromDate,n=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(c.config.reportData=null),t=e.reportDates.toDate,n=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(c.config.reportData=null),c.reportBuilder.buildPdf(m).then(function(e){c.pdf=e})}},100)},!0),c.downloadPdf=function(){c.pdf&&s(c.pdf,c.reportBuilder.getReportFileName("pdf"))},c.downloadCsv=function(){c.pdf&&s(c.reportBuilder.buildCsv(m),c.reportBuilder.getReportFileName("csv"))}}])},"6avE":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.priceListReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportOptions","deskworks.reports.priceListReport.service","deskworks.reports.priceListReportColumns"]).controller("PriceListReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","PriceListReport","priceListReportColumns",function(e,t,r,n,o,a,i,s,l,d,u){var f,p=this,c=[];function m(e){var t,o={columns:e.reportColumns.columns,rows:[]};return c=[],angular.forEach(e.reportData.pricelists,function(a){e.plNames.indexOf(a.name)<0||((t=Array.apply(null,Array(o.columns.length)).map(Boolean.prototype.valueOf,!1))[0]=n.instant("PRICE_LISTS.LIST.PRICE_LIST")+": "+a.name+" ("+n.instant("PRICE_LISTS.LAST_UPDATE")+": "+r("date")(a.updatedAt,"mediumDate")+")",o.rows.push(t),c.push(s.h1),a.productTypes.forEach(function(e){(t=Array.apply(null,Array(o.columns.length)).map(Boolean.prototype.valueOf,!1))[0]=e.id,o.rows.push(t),c.push(s.h2),e.products.forEach(function(e,t){o.rows.push(o.columns.map(function(t){return e[t.dataKey]})),c.push(t%2?null:s.rowOdd)})}))}),o}p.config={reportName:n.instant("PRICE_LISTS.LIST.HEADER"),reportOptions:{centerId:!1},reportColumns:{columns:angular.copy(u)},getReportData:function(){return d.get({centerId:o.getCurrentCenterId()}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,c[t.row.index])}},p.reportBuilder=new l(p.config),e.$watch(function(){return{reportOptions:p.config.reportOptions,plNames:e.vm.priceLists.filter(function(e){return e.include}).map(function(e){return e.name})}},function(e){f&&(t.cancel(f),f=null),f=t(function(){p.pdf=null,angular.isDefined(p.config.reportOptions.centerId)&&(p.config.plNames=e.plNames,p.reportBuilder.buildPdf(m).then(function(e){p.pdf=e}))},100)},!0),p.downloadPdf=function(){p.pdf&&i(p.pdf,p.reportBuilder.getReportFileName("pdf"))},p.downloadCsv=function(){p.pdf&&i(p.reportBuilder.buildCsv(m),p.reportBuilder.getReportFileName("csv"))}}])},"8d/h":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.optsPaperSize",[]).factory("optsPaperSize",function(){return[{id:"letter",name:"Letter"},{id:"A4",name:"A4"},{id:"A3",name:"A3"},{id:"A2",name:"A2"},{id:"A1",name:"A1"},{id:"A0",name:"A0"}]})},"8scq":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.membershipReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("MembershipReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["joinDate"]);return e(r.getApiAbsUrl("/centers/:centerId/membership-reports"),{centerId:"@centerId"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,n,function(e){return angular.forEach(e,function(e){angular.forEach(e.fields,function(t){e[t.id]=t.value}),delete e.fields}),e}]}})}])},"92Gs":function(e,t,r){"use strict";r.r(t);var n=r("Xai3");t.default=angular.module("deskworks.reportGroupBy",[n.default.name]).factory("reportGroupBy",["reportSort",function(e){return function(t,r){return e(t,r).reduce(function(e,t){var n=e[e.length-1]||[],o=n[0]||{};return o[r]===t[r]||moment.isMoment(o[r])&&moment.isMoment(t[r])&&o[r].isSame(t[r],"day")||(n=[],e.push(n)),n.push(t),e},[])}}])},"9LJv":function(e,t,r){"use strict";r.r(t);r("RKBc");t.default=angular.module("fileSaver",[]).factory("fileSaver",["$window",function(e){return function(t,r,n,o){if(e.cordova&&e.cordova.InAppBrowser&&"ios"===e.cordova.platformId){var a=new FileReader;a.onloadend=function(){var t=a.result;return e.cordova.InAppBrowser.open(t,"_blank","hidenavigationbuttons=yes,hideurlbar=yes,enableViewportScale=yes,location=no")},a.readAsDataURL(t)}return e.saveAs(t,r,n,o)}}])},BEjt:function(e,t){e.exports="<div id=reservationUsageReport class=gutter-v> <form name=formReservationUsageReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\" style=margin-bottom:-15px> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <div class=gutter-v> <report-dates ng-model=$ctrl.config.reportDates></report-dates> </div> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=$ctrl.config.reportOptions> <report-order-by ng-model=$ctrl.config.orderBy report-columns=$ctrl.config.reportColumns></report-order-by> </report-options> <report-owner-region ng-model=$ctrl.config.reportOwnerRegion report-data=$ctrl.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=$ctrl.downloadPdf() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=$ctrl.downloadCsv() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=$ctrl.pdf></div> </ff-panel> </div> "},"C/0G":function(e,t){e.exports="<div id=memberStatement class=gutter-v> <form name=formMemberStatement> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 65%', md: '0 0 50%'}\"> <report-dates ng-model=vm.config.reportDates></report-dates> </div> <div flex=\"{lg: '0 0 35%', md: '0 0 50%'}\"> <report-options ng-model=vm.config.reportOptions></report-options> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=MEMBER_STATEMENT.BTN_PDF></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=MEMBER_STATEMENT.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},"CR4+":function(e,t){e.exports="<div ng-controller=\"PriceListReportCtrl as rep\" class=gutter-v> <div class=ff-grid> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\" style=margin-left:auto> <report-options ng-model=rep.config.reportOptions></report-options> </div> </div> <ff-btn-group> <ff-btn sense=download ff-click=rep.downloadPdf() ff-disabled=!rep.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=rep.downloadCsv() ff-disabled=!rep.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=rep.pdf></div> </ff-panel> </div> "},E9xF:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.invoiceStyles",["systemColors","deskworks.helper","deskworks.reports.reportStyles"]).factory("invoiceStyles",["systemColors","helper","reportStyles",function(e,t,r){var n=angular.copy(r);return n.pageMargins[0]=50,n.pageMargins[2]=30,n.startY=170,n.header.textColor="#000000",n.headerStyles={fontSize:9,fontStyle:"normal",valign:"middle",fillColor:100,textColor:255},n.h1={fontStyle:"bold",textColor:0,borderWidth:1,borderColor:[0,0,0]},n.h2={fontStyle:"bold",textColor:0,borderWidth:1,borderColor:[180,180,180]},n}])},EKM0:function(e,t){e.exports="<div id=membershipReport class=gutter-v> <form name=formMembershipReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 65%', md: '0 0 50%'}\"> <report-columns ng-model=vm.config.reportColumns></report-columns> </div> <div flex=\"{lg: '0 0 35%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions></report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> <ff-panel> <ff-panel-header><span translate=MEMBERSHIP_REPORT.MEMBERSHIP.HEADER></span></ff-panel-header> <membership-filter ff-model=vm.membershipFilter layout=2col></membership-filter> </ff-panel> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},GGg2:function(e,t){e.exports="<div id=recurringBillingReport class=gutter-v> <form name=formRecurringBillingReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 65%', md: '0 0 50%'}\"> <report-columns ng-model=vm.config.reportColumns></report-columns> </div> <div flex=\"{lg: '0 0 35%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions></report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},GO8p:function(e,t,r){"use strict";r.r(t);var n=r("lu0O"),o=r.n(n);r("dbsv");t.default=angular.module("jsPDF",[]).factory("jsPDF",["$window",function(e){return e.jsPDF=o.a,e.jsPDF}])},HFgu:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.mailboxReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportColumns","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.mailboxReport.service","deskworks.reports.mailboxReportColumns"]).controller("MailboxReportCtrl",["$scope","$timeout","$translate","state","helper","fileSaver","ReportBuilder","MailboxReport","mailboxReportColumns",function(e,t,r,n,o,a,i,s,l){var d,u=this;function f(e){var t={columns:e.reportColumns.columns.filter(function(e){return e.include}),rows:e.reportData};return t.rows=u.reportBuilder.sortData(t.rows,e.reportColumns.order),t.rows=t.rows.map(function(e){return t.columns.map(function(t){return e[t.dataKey]})}),t}u.config={reportName:r.instant("MAILBOX_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:angular.copy(l)},getReportData:function(){return s.query({centerId:u.config.reportOptions.centerId,ownerId:u.config.reportOwnerRegion.ownerId,regionId:u.config.reportOwnerRegion.regionId}).$promise}},n.setPageTitle(u.config.reportName),u.reportBuilder=new i(u.config),e.$watch(function(){return{reportOptions:u.config.reportOptions,reportColumns:u.config.reportColumns,reportOwnerRegion:u.config.reportOwnerRegion}},function(){d&&(t.cancel(d),d=null),d=t(function(){u.pdf=null,angular.isUndefined(u.config.reportOptions.centerId)||u.reportBuilder.buildPdf(f).then(function(e){u.pdf=e})},100)},!0),u.downloadPdf=function(){u.pdf&&a(u.pdf,u.reportBuilder.getReportFileName("pdf"))},u.downloadCsv=function(){u.pdf&&a(u.reportBuilder.buildCsv(f),u.reportBuilder.getReportFileName("csv"))}}])},IWno:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.mailboxReportColumns",[]).factory("mailboxReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"number",_title:"MAILBOX_REPORT.COLUMNS.BOX_ID",include:!0},{dataKey:"company",_title:"MAILBOX_REPORT.COLUMNS.COMPANY",include:!0,minWidth:150},{dataKey:"fullName",_title:"MAILBOX_REPORT.COLUMNS.USER_NAME",include:!0,minWidth:120},{dataKey:"handling",_title:"MAILBOX_REPORT.COLUMNS.HANDLING",include:!0,width:"wrap"},{dataKey:"key",_title:"MAILBOX_REPORT.COLUMNS.KEY_ID",include:!0,width:"wrap"},{dataKey:"names",_title:"MAILBOX_REPORT.COLUMNS.OTHER_NAMES",include:!0}];function o(){n.forEach(function(e){e.title=r.instant(e._title)})}return o(),e.$on("$setTranslationsSuccess",o),n}])},IWz8:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.reservationReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("ReservationReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["reservations.createdAt","reservations.startTime","reservations.endTime"]);return e(r.getApiAbsUrl("/centers/:centerId/reservation-reports"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{get:{method:"GET",transformResponse:[angular.fromJson,n]}})}])},JAJz:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.securityDepositReport.service",["ngResource","datesDeserializer","deserializeNumbers","deskworks.config"]).factory("SecurityDepositReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=t(["deposits.date","deposits.details.date"]),a=r(["deposits.initialAmount","deposits.balance","deposits.details.amount"]);return e(n.getApiAbsUrl("/centers/:centerId/security-deposit-reports"),{centerId:"@centerId"},{get:{method:"GET",transformResponse:[angular.fromJson,o,a]}})}])},KkfT:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reservationUsageReportColumns",[]).factory("reservationUsageReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"memberCompany",_title:"REPORTS.COLUMNS.USER_COMPANY"},{dataKey:"memberName",_title:"REPORTS.COLUMNS.USER_NAME",defaultOrder:!0},{dataKey:"reservationCost",_title:"RESERVATION_USAGE_REPORT.COLUMNS.RESERVATION_COST",halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"reservationCreditApplied",_title:"RESERVATION_USAGE_REPORT.COLUMNS.RES_CREDITS_APPLIED",halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"reservationCostBalance",_title:"RESERVATION_USAGE_REPORT.COLUMNS.RES_COST_BALANCE",halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach(function(e){e.title=r.instant(e._title)})}return o(),e.$on("$setTranslationsSuccess",o),n}])},"L+wq":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.mailboxReport.service",["ngResource","deskworks.config"]).factory("MailboxReport",["$resource","deskworksConfig",function(e,t){return e(t.getApiAbsUrl("/centers/:centerId/mailbox-reports"),{centerId:"@centerId"},{query:{method:"GET",isArray:!0}})}])},LJmX:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.reservationReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportColumns","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.reservationReport.service","deskworks.reports.reservationReportColumns"]).controller("ReservationReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","ReservationReport","reservationReportColumns",function(e,t,r,n,o,a,i,s,l,d,u){var f,p=this,c=[];function m(e){var t={columns:e.reportColumns.columns.filter(function(e){return e.include})};return t.rows=p.reportBuilder.sortData(e.reportData.reservations,e.reportColumns.order),c=[],t.rows=t.rows.map(function(e,r){return c.push(r%2?null:s.rowOdd),t.columns.map(function(t){return e[t.dataKey]})}),t}p.config={reportName:n.instant("RESERVATION_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:angular.copy(u)},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return d.get({centerId:p.config.reportOptions.centerId,fromDate:r("date")(p.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(p.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:p.config.reportOwnerRegion.ownerId,regionId:p.config.reportOwnerRegion.regionId}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,c[t.row.index])}},p.config.reportDates.toDate.add(7,"d"),o.setPageTitle(p.config.reportName),p.reportBuilder=new l(p.config),e.$watch(function(){return{reportOptions:p.config.reportOptions,reportColumns:p.config.reportColumns,reportDates:p.config.reportDates,reportOwnerRegion:p.config.reportOwnerRegion}},function(e,r){f&&(t.cancel(f),f=null),f=t(function(){if(p.pdf=null,!angular.isUndefined(p.config.reportOptions.centerId)){var t=e.reportDates.fromDate,n=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(p.config.reportData=null),t=e.reportDates.toDate,n=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(p.config.reportData=null),p.reportBuilder.buildPdf(m).then(function(e){p.pdf=e})}},100)},!0),p.downloadPdf=function(){p.pdf&&i(p.pdf,p.reportBuilder.getReportFileName("pdf"))},p.downloadCsv=function(){p.pdf&&i(p.reportBuilder.buildCsv(m),p.reportBuilder.getReportFileName("csv"))}}])},LM7I:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.recurringBillingReportColumns",[]).factory("recurringBillingReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userCompany",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.COMPANY",include:!0},{dataKey:"userName",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.MEMBER",include:!0,minWidth:100},{dataKey:"centerName",_title:"REPORTS.COLUMNS.CENTER",include:!1},{dataKey:"lastBillDate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.LAST_BILL_DATE",include:!0,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"nextBillDate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.NEXT_BILL_DATE",include:!0,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"amount",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.AMOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"billingMethod",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.BILLING_METHOD",include:!0},{dataKey:"ccExpiry",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.CC_EXPIRY",include:!1,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"discount",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.DISCOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"productName",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.PRODUCT",include:!0,minWidth:120},{dataKey:"description",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.DESCRIPTION",include:!1},{dataKey:"startDate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.START_DATE",include:!0,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"terminate",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.TERMINATION_DATE",include:!1,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"useForCheckInBilling",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.USE_FOR_CHECK_IN_BILLING",include:!1,halign:"center",pdf:function(e){return t("yesno")(e)},csv:function(e){return t("yesno")(e)}},{dataKey:"total",_title:"RECURRING_BILLINGS_REPORT.COLUMNS.TOTAL",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach(function(e){e.title=r.instant(e._title)})}return o(),e.$on("$setTranslationsSuccess",o),n}])},Mmgn:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.priceListReportColumns",[]).factory("priceListReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"name",_title:"PRICE_LISTS.PRODUCTS.PRODUCT",include:!0},{dataKey:"passQty",_title:"PRICE_LISTS.PRODUCTS.PASSES",include:!0,halign:"center",width:"wrap"},{dataKey:"reservationCredit",_title:"PRICE_LISTS.PRODUCTS.CREDIT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"price",_title:"PRICE_LISTS.PRODUCTS.PRICE",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach(function(e){e.title=r.instant(e._title)})}return o(),e.$on("$setTranslationsSuccess",o),n}])},PjE5:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.memberUsageReport.service",["ngResource","datesDeserializer","deserializeNumbers","deskworks.config"]).factory("MemberUsageReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=n.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/member-usage-reports"),a=t(["checkInTime","checkOutTime"]),i=r(["usageHours","usagePasses"]);return e(o,{centerId:"@centerId",userId:"@userId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,a,i]}})}])},"SeF/":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.memberStatement",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.memberStatement.service","deskworks.reports.memberStatementColumns"]).controller("MemberStatementCtrl",["$rootScope","$scope","$route","$timeout","$filter","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","user","MemberStatement","memberStatementColumns",function(e,t,r,n,o,a,i,s,l,d,u,f,p,c){var m,g=this,R=[];function h(e){var t={columns:e.reportColumns.columns,rows:[]};R=[],t.rows=e.reportData.transactions.map(function(e,r){return R.push(r%2?null:d.rowOdd),t.columns.map(function(t){return e[t.dataKey]})}),t.rows.unshift([!1,a.instant("MEMBER_STATEMENT.BALANCE_FORWARD")+":",!1,!1,e.reportData.balanceForward.amountBilled,e.reportData.balanceForward.amountPaid,e.reportData.balanceForward.balance]),R.unshift(d.h2),t.rows.push([!1,a.instant("MEMBER_STATEMENT.TOTALS")+":",!1,!1,e.reportData.totals.amountBilled,e.reportData.totals.amountPaid,e.reportData.totals.balance]),R.push(d.h2);var r=[],n=e.reportData.depositTransactions.map(function(e,n){return r.push(n%2?null:d.rowOdd),t.columns.map(function(t){return e[t.dataKey]})});return n.length>0&&(n.unshift([!1,a.instant("MEMBER_STATEMENT.SECURITY_DEPOSITS")+":",!1,!1,e.reportData.depositTotals.amountBilled,e.reportData.depositTotals.amountPaid,e.reportData.depositTotals.balance]),r.unshift(d.h2),t.rows=n.concat(t.rows),R=r.concat(R)),t}g.config={reportName:a.instant("MEMBER_STATEMENT.REPORT_NAME"),reportOptions:{centerId:!1},reportColumns:{columns:c},reportDates:{fromDate:moment(),toDate:moment()},reportFor:f.firstName+" "+f.lastName+(f.company&&", "+f.company),getReportData:function(){return p.get({centerId:i.getCurrentCenterId(),userId:i.getCurrentUserId(),fromDate:o("date")(g.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:o("date")(g.config.reportDates.toDate,"yyyy-MM-dd")}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,R[t.row.index])}},i.setPageTitle(a.instant("MEMBER_STATEMENT.PAGE_TITLE",{userName:g.config.reportFor})),g.config.reportDates.fromDate.subtract(1,"M"),g.reportBuilder=new u(g.config),t.$watch(function(){return{reportOptions:g.config.reportOptions,reportDates:g.config.reportDates}},function(e,t){m&&(n.cancel(m),m=null),m=n(function(){if(g.pdf=null,angular.isDefined(g.config.reportOptions.centerId)){var r=e.reportDates.fromDate,n=t.reportDates.fromDate;!moment.isMoment(r)||moment.isMoment(n)&&r.isSame(n)||(g.config.reportData=null),r=e.reportDates.toDate,n=t.reportDates.toDate,!moment.isMoment(r)||moment.isMoment(n)&&r.isSame(n)||(g.config.reportData=null),g.reportBuilder.buildPdf(h).then(function(e){g.pdf=e})}},100)},!0),g.downloadPdf=function(){g.pdf&&l(g.pdf,g.reportBuilder.getReportFileName("pdf"))},e.$on("CHANGE-CENTER",r.reload)}])},SoPU:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.priceListReport.service",["ngResource","datesDeserializer","deskworks.config"]).factory("PriceListReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["pricelists.updatedAt"]);return e(r.getApiAbsUrl("/centers/:centerId/pricelist-reports"),{centerId:"@centerId"},{get:{method:"GET",transformResponse:[angular.fromJson,n]}})}])},T3vP:function(e,t,r){"use strict";r.r(t);r("t91x");t.default=angular.module("csvMake",[]).service("csvMake",["$q","$timeout","$window","$document",function(e,t,r,n){this.generate=function(e,t){return t.txtDelim=t.txtDelim||'"',t.decimalSep=t.decimalSep||".",t.fieldSep=t.fieldSep||",",t.charset=t.charset||"utf-8",t.fieldSep=this.isSpecialChar(t.fieldSep)?this.getSpecialChar(t.fieldSep):t.fieldSep,this.stringify(e,t)};var o="\r\n",a={"\\t":"\t","\\b":"\b","\\v":"\v","\\f":"\f","\\r":"\r"};this.stringifyField=function(e,t){return"locale"===t.decimalSep&&this.isFloat(e)?e.toLocaleString():"."!==t.decimalSep&&this.isFloat(e)?e.toString().replace(".",t.decimalSep):"string"==typeof e?(e=e.replace(/"/g,'""'),(t.quoteStrings||e.indexOf(",")>-1||e.indexOf("\n")>-1||e.indexOf("\r")>-1)&&(e=t.txtDelim+e+t.txtDelim),e):"boolean"==typeof e?e?"TRUE":"FALSE":e},this.isFloat=function(e){return+e===e&&(!isFinite(e)||Boolean(e%1))},this.stringifyAsync=function(t,r){var n=e.defer(),a=this,i="",s="",l=e.when(t).then(function(e){var t,l;angular.isDefined(r.header)&&r.header&&(t=[],angular.forEach(r.header,function(e,t){this.push(a.stringifyField(e,r))},t),l=t.join(r.fieldSep?r.fieldSep:","),s+=l+o);var d,u,f=[];(angular.isArray(e)?f=e:angular.isFunction(e)&&(f=e()),angular.isDefined(r.label)&&r.label&&"boolean"==typeof r.label)&&(d=[],angular.forEach(f[0],function(e,t){this.push(a.stringifyField(t,r))},d),u=d.join(r.fieldSep?r.fieldSep:","),s+=u+o);angular.forEach(f,function(e,t){var n,i,l=angular.copy(f[t]);i=[];var d=r.columnOrder?r.columnOrder:l;angular.forEach(d,function(e,t){var n=r.columnOrder?l[e]:e;this.push(a.stringifyField(n,r))},i),n=i.join(r.fieldSep?r.fieldSep:","),s+=t<f.length?n+o:n}),r.addByteOrderMarker&&(i+="\ufeff"),i+=s,n.resolve(i)});return"function"==typeof l.catch&&l.catch(function(e){n.reject(e)}),n.promise},this.stringify=function(e,t){var r,n,a=this,i="",s="";angular.isDefined(t.header)&&t.header&&(r=[],angular.forEach(t.header,function(e,r){this.push(a.stringifyField(e,t))},r),n=r.join(t.fieldSep?t.fieldSep:","),s+=n+o);var l,d,u=e;angular.isDefined(t.label)&&t.label&&"boolean"==typeof t.label&&(l=[],angular.forEach(u[0],function(e,r){this.push(a.stringifyField(r,t))},l),d=l.join(t.fieldSep?t.fieldSep:","),s+=d+o);return angular.forEach(u,function(e,r){var n,i,l=angular.copy(u[r]);i=[];var d=t.columnOrder?t.columnOrder:l;angular.forEach(d,function(e,r){var n=t.columnOrder?l[e]:e;this.push(a.stringifyField(n,t))},i),n=i.join(t.fieldSep?t.fieldSep:","),s+=r<u.length?n+o:n}),t.addByteOrderMarker&&(i+="\ufeff"),i+=s},this.isSpecialChar=function(e){return void 0!==a[e]},this.getSpecialChar=function(e){return a[e]}}])},U9c4:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.memberUsageReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.memberUsageReport.service","deskworks.reports.memberUsageReportColumns"]).controller("MemberUsageReportCtrl",["$rootScope","$scope","$timeout","$filter","$route","$q","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","MemberUsageReport","memberUsageReportColumns",function(e,t,r,n,o,a,i,s,l,d,u,f,p,c){var m,g=this,R=[];g.config={reportName:i.instant("MEMBER_USAGE_REPORT.REPORT_NAME"),reportOptions:{},reportColumns:{columns:c},reportDates:{fromDate:moment(),toDate:moment()},getReportData:function(){return p.query({centerId:g.config.reportOptions.centerId,userId:s.getCurrentUserId(),fromDate:n("date")(g.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:n("date")(g.config.reportDates.toDate,"yyyy-MM-dd")}).$promise.then(function(e){return angular.forEach(e,function(e){e.date=e.checkInTime.clone().hour(0).minute(0).second(0).millisecond(0)}),e})},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,R[t.row.index])}},s.setPageTitle(g.config.reportName),g.config.reportDates.fromDate.date(1),g.config.reportDates.toDate.add(1,"M").date(0),g.reportBuilder=new f(g.config),t.$watch(function(){return{reportOptions:g.config.reportOptions,reportDates:g.config.reportDates,reportColumns:g.config.reportColumns}},function(e,t){m&&(r.cancel(m),m=null),m=r(function(){if(g.pdf=null,angular.isDefined(g.config.reportOptions.centerId)){var r=e.reportDates.fromDate,n=t.reportDates.fromDate;!moment.isMoment(r)||moment.isMoment(n)&&r.isSame(n)||(g.config.reportData=null),r=e.reportDates.toDate,n=t.reportDates.toDate,!moment.isMoment(r)||moment.isMoment(n)&&r.isSame(n)||(g.config.reportData=null),g.reportBuilder.buildPdf(v).then(function(e){g.pdf=e})}},100)},!0),g.downloadPdf=function(){g.pdf&&d(g.pdf,g.reportBuilder.getReportFileName("pdf"))},g.downloadCsv=function(){g.pdf&&d(g.reportBuilder.buildCsv(v),g.reportBuilder.getReportFileName("csv"))};var h=e.$on("CHANGE-USER",o.reload);function v(e){var t={columns:e.reportColumns.columns.filter(function(e){return e.include}),rows:[]};R=[];var r=g.reportBuilder.sortData(e.reportData,e.reportColumns.order),n=l.findIndexByKeyValue(t.columns,"dataKey","usageHours"),o=l.findIndexByKeyValue(t.columns,"dataKey","usagePasses"),a=Array.apply(null,new Array(t.columns.length)).map(function(e){return!1}),s=0,d=0;return r.forEach(function(l,f){if(R.push(f%2?null:u.rowOdd),t.rows.push(t.columns.map(function(e){return l[e.dataKey]})),s+=l.usageHours?l.usageHours:0,d+=l.usagePasses?l.usagePasses:0,("date"===e.reportColumns.order||"userName"===e.reportColumns.order)&&(n>=0||o>=0)){var p,c,m="date"===e.reportColumns.order?l[e.reportColumns.order].unix():l[e.reportColumns.order]||null;if(f<r.length-1&&(p="date"===e.reportColumns.order?r[f+1][e.reportColumns.order].unix():r[f+1][e.reportColumns.order]||null),m!==p)s=Math.round(100*s)/100,d=Math.round(100*d)/100,n>=0&&(c=a.slice(0,Math.max(n-1,0)).concat([i.instant("MEMBER_USAGE_REPORT.TOTALS.SUBTOTAL")+":",s])),o>=0&&(n>=0?c.push(d):c=a.slice(0,Math.max(o-1,0)).concat([i.instant("MEMBER_USAGE_REPORT.TOTALS.SUBTOTAL")+":",d])),t.rows.push(c),R.push(u.h2),s=0,d=0}}),t}t.$on("$destroy",h)}])},UUql:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.securityDepositReportColumns",[]).factory("securityDepositReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userName",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.USER_NAME",include:!0,minWidth:120},{dataKey:"userCompany",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.COMPANY",include:!0,minWidth:150},{dataKey:"date",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.DATE",include:!0,width:"wrap",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")},defaultOrder:!0},{dataKey:"orderId",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.ORDER_ID",include:!1,width:"wrap"},{dataKey:"initialAmount",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.INITIAL_AMOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"balance",_title:"SECURITY_DEPOSIT_REPORT.COLUMNS.BALANCE",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach(function(e){e.title=r.instant(e._title)})}return o(),e.$on("$setTranslationsSuccess",o),n}])},UwMB:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.reportStyles",["systemColors","deskworks.helper"]).factory("reportStyles",["systemColors","helper",function(e,t){return{pageMargins:[60,25,50,25],headerStyles:{fontSize:9,fontStyle:"normal",valign:"middle",fillColor:t.hex2rgbArr(e.info),textColor:255},bodyStyles:{overflow:"linebreak",textColor:0},header:{textColor:e.primary},footer:{textColor:e.primary},rowOdd:{fillColor:[245,245,245]},h1:{fontStyle:"bold",fillColor:t.hex2rgbArr(e.primary),textColor:[255,255,255]},h2:{fontStyle:"bold",textColor:t.hex2rgbArr(e.info),borderWidth:1,borderColor:t.hex2rgbArr(e.info)},h3:{fontStyle:"bold"}}}])},Xai3:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reportSort",[]).factory("reportSort",["$filter",function(e){return function(t,r,n){var o=[];return r=""+r,t=t.filter(function(e){if((e[r]||0===e[r])&&""!==e[r])return!0;o.push(e)}),e("orderBy")(t,r,n).concat(o)}}])},Yes4:function(e,t,r){"use strict";r.r(t),t.default=angular.module("systemColors",[]).factory("systemColors",["$window","$timeout","helper",function(e,t,r){var n={},o=angular.element('<div style="display: none"></div>');return o.append('<div class="text-text"></div>'),o.append('<div class="text-success"></div>'),o.append('<div class="text-primary"></div>'),o.append('<div class="text-warning"></div>'),o.append("<div></div>"),o.append('<div class="sidebar-group-header"></div>'),document.body.appendChild(o[0]),n.text=r.rgb2hex(e.getComputedStyle(o.children()[0]).getPropertyValue("color"))||"#444",n.info=r.rgb2hex(e.getComputedStyle(o.children()[4]).getPropertyValue("color"))||"#4d4e4c",n.primary=r.rgb2hex(e.getComputedStyle(o.children()[5]).getPropertyValue("background-color"))||"#949594",n.warning=r.rgb2hex(e.getComputedStyle(o.children()[3]).getPropertyValue("color"))||"#ff9b00",o.remove(),n}])},ZfRm:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.recurringBillingReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportColumns","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.recurringBillingReport.service","deskworks.reports.recurringBillingReportColumns"]).controller("RecurringBillingReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","RecurringBillingReport","recurringBillingReportColumns",function(e,t,r,n,o,a,i,s,l,d,u){var f,p=this,c=[];function m(e){var t={columns:e.reportColumns.columns.filter(function(e){return e.include})};t.rows=p.reportBuilder.sortData(e.reportData.billings,e.reportColumns.order),c=[],t.rows=t.rows.map(function(e,r){return c.push(r%2?null:s.rowOdd),t.columns.map(function(t){return e[t.dataKey]})});var r,o,i=a.findIndexByKeyValue(t.columns,"dataKey","total");return i>=0&&(o=(o=(o=a.findIndexByKeyValue(t.columns,"dataKey","description"))<0?a.findIndexByKeyValue(t.columns,"dataKey","productName"):o)<0?t.columns.length-2:o,t.rows.push(Array.apply(null,Array(t.columns.length)).map(Boolean.prototype.valueOf,!1)),c.push(null),(r=Array.apply(null,Array(t.columns.length)).map(Boolean.prototype.valueOf,!1))[o]=n.instant("RECURRING_BILLINGS_REPORT.TOTALS.MONTHLY")+":",r[i]=e.reportData.totalMonthly,t.rows.push(r),c.push(s.h3),(r=Array.apply(null,Array(t.columns.length)).map(Boolean.prototype.valueOf,!1))[o]=n.instant("RECURRING_BILLINGS_REPORT.TOTALS.QUARTERLY")+":",r[i]=e.reportData.totalQuarterly,t.rows.push(r),c.push(s.h3),(r=Array.apply(null,Array(t.columns.length)).map(Boolean.prototype.valueOf,!1))[o]=n.instant("RECURRING_BILLINGS_REPORT.TOTALS.SEMI_ANNUAL")+":",r[i]=e.reportData.totalSemiAnnual,t.rows.push(r),c.push(s.h3),(r=Array.apply(null,Array(t.columns.length)).map(Boolean.prototype.valueOf,!1))[o]=n.instant("RECURRING_BILLINGS_REPORT.TOTALS.ANNUAL")+":",r[i]=e.reportData.totalAnnual,t.rows.push(r),c.push(s.h3),(r=Array.apply(null,Array(t.columns.length)).map(Boolean.prototype.valueOf,!1))[o]=n.instant("RECURRING_BILLINGS_REPORT.TOTALS.AS_NEEDED")+":",r[i]=e.reportData.totalAsNeeded,t.rows.push(r),c.push(s.h3)),t}p.config={reportName:n.instant("RECURRING_BILLINGS_REPORT.REPORT_NAME"),reportOptions:{},reportColumns:{columns:angular.copy(u)},reportOwnerRegion:{},getReportData:function(){return d.get({centerId:p.config.reportOptions.centerId,ownerId:p.config.reportOwnerRegion.ownerId,regionId:p.config.reportOwnerRegion.regionId}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,c[t.row.index])}},o.setPageTitle(p.config.reportName),p.reportBuilder=new l(p.config),e.$watch(function(){return{reportOptions:p.config.reportOptions,reportColumns:p.config.reportColumns,reportOwnerRegion:p.config.reportOwnerRegion}},function(){f&&(t.cancel(f),f=null),f=t(function(){p.pdf=null,angular.isUndefined(p.config.reportOptions.centerId)||p.reportBuilder.buildPdf(m).then(function(e){p.pdf=e})},100)},!0),p.downloadPdf=function(){p.pdf&&i(p.pdf,p.reportBuilder.getReportFileName("pdf"))},p.downloadCsv=function(){p.pdf&&i(p.reportBuilder.buildCsv(m),p.reportBuilder.getReportFileName("csv"))}}])},aHVT:function(e,t){e.exports="<div id=writeOffReport class=gutter-v> <form name=formWriteOffReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <report-dates ng-model=$ctrl.config.reportDates></report-dates> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <report-options ng-model=$ctrl.config.reportOptions> <report-order-by ng-model=$ctrl.config.orderBy report-columns=$ctrl.config.reportColumns></report-order-by> </report-options> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=$ctrl.downloadPdf() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=$ctrl.downloadCsv() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=$ctrl.pdf></div> </ff-panel> </div> "},aRIa:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.memberStatement.service",["ngResource","datesDeserializer","deskworks.config"]).factory("MemberStatement",["$resource","$q","datesDeserializer","deskworksConfig",function(e,t,r,n){var o=r(["transactions.date","depositTransactions.date"]);return e(n.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/member-statements"),{centerId:"@centerId",userId:"@userId",fromDate:"@fromDate",toDate:"@toDate"},{get:{method:"GET",transformResponse:[angular.fromJson,o]}})}])},aoB6:function(e,t){e.exports='<form name=formGenerateInvoice class="generate-invoice gutter-v"> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div> <div class="ff-grid gutter-v gutter-h" ng-hide=$resolve.orderId> <ff-panel flex="{lg: \'0 0 50%\', md: \'0 0 100%\'}" ng-repeat="address in vm.user.addresses" class=keep-sm-btn-size> <ff-panel-header> <ff-row class=gutter-h-half> <span translate=INVOICE.ADDRESS.HEADER></span> <div flex="0 0 auto" style="align-items:center;margin:-.5rem 0"> <ff-btn sense=favorite size=sm ng-if="address === vm.invoice.address" title="{{\'INVOICE.ADDRESS.BTN_SELECTED.HINT\' | translate}}"> <span translate=INVOICE.ADDRESS.BTN_SELECTED></span> </ff-btn> <ff-btn sense=makeFavorite size=sm ng-if="address !== vm.invoice.address" ff-click=vm.selectAddress(address) title="{{\'INVOICE.ADDRESS.BTN_SELECT.HINT\' | translate}}"> <span translate=INVOICE.ADDRESS.BTN_SELECT></span> </ff-btn> </div> </ff-row> </ff-panel-header> <fieldset dw-address=address ng-disabled="address !== vm.invoice.address"></fieldset> </ff-panel> </div> </div> <div class="ff-grid gutter-h" ng-hide=$resolve.orderId> <ff-panel flex="{lg: \'0 0 50%\', md: \'0 0 100%\'}"> <ff-panel-header><span translate=INVOICE.DATES.HEADER></span></ff-panel-header> <label class=ff-row> <ff-label flex="0 0 116px"><req translate=INVOICE.DATES.END_DATE></req></ff-label> <ff-date ff-model=vm.invoice.endDate ff-required=true ff-validate-alert="{{\'INVOICE.DATES.END_DATE\' | translate}}"></ff-date> </label> <label class=ff-row> <ff-label flex="0 0 116px"><req translate=INVOICE.DATES.DUE_DATE></req></ff-label> <ff-date ff-model=vm.invoice.dueDate ff-required=true ff-validate-alert="{{\'INVOICE.DATES.DUE_DATE\' | translate}}"></ff-date> </label> <label> <ff-checkbox ff-model=vm.invoice.showDates ff-click="vm.config.reportColumns.columns[0].include = vm.invoice.showDates" ff-label="{{\'INVOICE.DATES.ADD_DATE_TO_ALL_ITEMS\' | translate}}"></ff-checkbox> </label> </ff-panel> </div> <div> <div class="ff-grid gutter-v gutter-h" ng-hide=$resolve.orderId> <ff-panel flex="{lg: \'0 0 50%\', md: \'0 0 100%\'}"> <ff-panel-header><span translate=INVOICE.ITEMS.HEADER></span></ff-panel-header> <div> <ff-row> <label flex="0 0 auto"> <ff-include-all flex="0 0 32px" items=vm.invoice.items default=true></ff-include-all> </label> </ff-row> <ff-header> <ff-row> <span flex="0 0 32px" class=ff-center><ff-icon sense=check></ff-icon></span> <span flex="1 1 100px" ng-if=vm.invoice.showDates><span translate=INVOICE.ITEMS.DATE></span></span> <span flex="2 1 100px"><span translate=INVOICE.ITEMS.NAME></span></span> <span flex="0 0 80px" class=ff-right><span translate=INVOICE.ITEMS.AMOUNT></span></span> </ff-row> </ff-header> <label ng-repeat="charge in vm.charges" class=ff-row> <ff-static flex="0 0 32px" class=ff-center> <ff-checkbox ff-model=charge.include></ff-checkbox> </ff-static> <ff-static flex="1 1 100px" ng-if=vm.invoice.showDates>{{charge.date | date:\'mediumDate\'}}</ff-static> <ff-static flex="2 1 100px" ff-bind=charge.name></ff-static> <ff-static flex="0 0 80px" ff-bind="charge.amount | ncurrency" class=ff-right></ff-static> </label> </div> </ff-panel> <ff-panel flex="{lg: \'0 0 50%\', md: \'0 0 100%\'}"> <ff-panel-header><span translate=INVOICE.PAYMENTS.HEADER></span></ff-panel-header> <ff-row> <label flex="0 0 auto"> <ff-include-all flex="0 0 32px" items=vm.payments default=true></ff-include-all> </label> </ff-row> <ff-header> <ff-row> <span flex="0 0 32px" class=ff-center><ff-icon sense=check></ff-icon></span> <span><span translate=INVOICE.PAYMENTS.DATE></span></span> <span flex="0 0 80px" class=ff-right><span translate=INVOICE.PAYMENTS.AMOUNT></span></span> </ff-row> </ff-header> <label ng-repeat="payment in vm.payments" class=ff-row> <ff-static flex="0 0 32px" class=ff-center> <ff-checkbox ff-model=payment.include></ff-checkbox> </ff-static> <ff-static ff-bind="payment.date | date:\'mediumDate\'"></ff-static> <ff-static flex="0 0 80px" ff-bind="payment.amount | ncurrency" class=ff-right></ff-static> </label> </ff-panel> </div> </div> <div class="ff-grid gutter-v"> <ff-btn-group flex="0 0 auto" class=buttons-bottom style=margin-top:0> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=INVOICE.BTN_PDF></span> </ff-btn> <ff-btn sense=back ff-click=$resolve.back() ng-if=$resolve.back> <span translate=GLOBAL.BTN_BACK></span> </ff-btn> </ff-btn-group> <div flex="{lg: \'0 0 33%\', md: \'0 0 100%\'}" style=margin-bottom:0> <report-options ng-model=vm.config.reportOptions></report-options> </div> </div> <ff-panel> <ff-panel-header><span translate=INVOICE.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </form> '},bHMQ:function(e,t,r){"use strict";r.r(t);var n="/white-label/images/logo-print.png";t.default=angular.module("deskworks.logo",[]).factory("logo",["$window","$http","$q","deskworksConfig",function(e,t,r,o){var a,i,s=480,l=171;return{getSiteLogo:function(){return a=a||r(function(e){var t=new Image;t.crossOrigin="anonymous",t.src=o.getApiAbsUrl(n),t.onerror=function(){console.warn("Report failed to load site logo."),e(null),t=null},t.onload=function(){e(t),t=null}}).then(d)},getSiteLogoInv:function(){return i=i||r(function(e){var t=document.querySelector(".sidebar-logo a img");t||console.warn("Report failed to load site logo."),e(t)}).then(d)},resetSiteLogo:function(){a=null},resetSiteLogoInv:function(){i=null}};function d(e){if(!e)return null;var t=e.width/s,r=e.height/l,n=t>r?t:r,o=Math.round(e.width/n),a=Math.round(e.height/n),i=document.createElement("canvas");document.body.appendChild(i),i.width=o,i.height=a,i.getContext("2d").drawImage(e,0,0,o,a);var d=i.toDataURL("image/png");return document.body.removeChild(i),{width:o,height:a,data:d}}}])},"bm4+":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.invoice",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.ReportBuilder","deskworks.reports.reportOptions","deskworks.reports.invoiceHeader","deskworks.reports.invoice.service","deskworks.reports.invoiceColumns","deskworks.reports.invoiceStyles"]).controller("InvoiceCtrl",["$rootScope","$scope","$route","$filter","$timeout","$q","$translate","dwAlerts","fileSaver","state","helper","user","center","orderId","ReportBuilder","invoiceStyles","invoiceHeader","Invoice","invoiceColumns",function(e,t,r,n,o,a,i,s,l,d,u,f,p,c,m,g,R,h,v){var E=this;d.setPageTitle(i.instant(c?"INVOICE.INVOICE_NAME":"INVOICE.PAGE_TITLE",{orderId:c})),E.user=f,E.invoice={endDate:moment(),dueDate:moment(),address:E.user.addresses[0],showDates:!0};var y=[];function w(e){var t={columns:e.reportColumns.columns.filter(function(e){return e.include}),rows:[]};y=[];var r=["recurring","rental","deposit","payment","refund"];d(i.instant("INVOICE.RECURRING"),e.reportData.items.filter(function(e){return e.include&&"recurring"===e.type})),d(i.instant("INVOICE.RENTAL"),e.reportData.items.filter(function(e){return e.include&&"rental"===e.type})),d(i.instant("INVOICE.DEPOSITS"),e.reportData.items.filter(function(e){return e.include&&"deposit"===e.type})),d(i.instant("INVOICE.OTHER_CHARGES"),e.reportData.items.filter(function(e){return e.include&&r.indexOf(e.type)<0}));var n,o=e.reportData.items.filter(function(e){return e.include&&"payment"!==e.type&&"refund"!==e.type}),a=o.reduce(function(e,t){return e+(+t.amount||0)},0),s=a+e.reportData.items.reduce(function(e,t){return!t.include||"payment"!==t.type&&"refund"!==t.type?e:e+(+t.amount||0)},0),l=[];return o.forEach(function(e){angular.forEach(e.taxes,function(e,t){l.length<=t&&l.push({name:e.taxName,amount:0}),l[t].amount+=+e.taxAmount})}),l.length&&((n=Array.apply(null,Array(t.columns.length)).map(Boolean.prototype.valueOf,!1))[u.findIndexByKeyValue(t.columns,"dataKey","name")]=i.instant("INVOICE.CHARGES")+":",n[u.findIndexByKeyValue(t.columns,"dataKey","amount")]=Math.round(100*a)/100,t.rows.push(n),y.push(g.h1)),l.forEach(function(e){s+=e.amount||0,(n=Array.apply(null,Array(t.columns.length)).map(Boolean.prototype.valueOf,!1))[u.findIndexByKeyValue(t.columns,"dataKey","name")]=e.name,n[u.findIndexByKeyValue(t.columns,"dataKey","amount")]=Math.round(100*e.amount)/100,t.rows.push(n),y.push(g.h1)}),d(i.instant("INVOICE.PAYMENTS"),e.reportData.items.filter(function(e){return e.include&&"payment"===e.type})),d(i.instant("INVOICE.REFUNDS"),e.reportData.items.filter(function(e){return e.include&&"refund"===e.type})),(n=Array.apply(null,Array(t.columns.length)).map(Boolean.prototype.valueOf,!1))[u.findIndexByKeyValue(t.columns,"dataKey","name")]=i.instant("INVOICE.BALANCE")+":",n[u.findIndexByKeyValue(t.columns,"dataKey","amount")]=Math.round(100*s)/100,t.rows.push(n),y.push(g.h1),t;function d(e,r){r&&r.length&&((n=Array.apply(null,Array(t.columns.length)).map(Boolean.prototype.valueOf,!1))[u.findIndexByKeyValue(t.columns,"dataKey","name")]=e,t.rows.push(n),y.push(g.h2),r.forEach(function(e,r){y.push(r%2?null:g.rowOdd),t.rows.push(t.columns.map(function(t){return e[t.dataKey]}))}),(n=Array.apply(null,Array(t.columns.length)).map(Boolean.prototype.valueOf,!1))[u.findIndexByKeyValue(t.columns,"dataKey","qty")]=i.instant("INVOICE.SUBTOTAL")+":",n[u.findIndexByKeyValue(t.columns,"dataKey","amount")]=r.reduce(function(e,t){return e+ +t.amount},0),t.rows.push(n),y.push(g.h3))}}E.config={reportOptions:{centerId:!1,paperLayout:"p"},reportColumns:{columns:v},reportHeader:R,reportFooter:function(){},reportFor:u.join([E.user.firstName,E.user.lastName]," "),reportForCompany:E.user.company,pageMargins:angular.copy(g.pageMargins),startY:g.startY,getReportData:function(){return a.when(E.invoice)},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,y[t.row.index])}},p.street2&&(E.config.startY+=12),p.taxId&&(E.config.startY+=12),E.config.pageMargins[0]=74,h.get({centerId:d.getCurrentCenterId(),userId:d.getCurrentUserId(),orderId:c}).$promise.catch(function(e){return s.error(e,"Failed to get invoice.")}).then(function(e){E.payments=e.items.filter(function(e){return"payment"===e.type||"refund"===e.type}),E.charges=e.items.filter(function(e){return"payment"!==e.type&&"refund"!==e.type}),angular.extend(E.invoice,e),E.invoice.dueDate||(E.invoice.dueDate=E.invoice.date?E.invoice.date.clone():E.invoice.endDate.clone()),E.config.invoice=E.invoice,E.config.reportName=i.instant(p.taxId?"INVOICE.TAX_INVOICE_NAME":"INVOICE.INVOICE_NAME",{orderId:E.invoice.invoiceNumber}),E.reportBuilder=new m(E.config),E.watchReportParams()}),E.selectAddress=function(e){E.invoice.address=e},E.downloadPdf=function(){E.pdf&&l(E.pdf,E.reportBuilder.getReportFileName("pdf"))},E.watchReportParams=function(){var e;t.$watch(function(){return{reportOptions:E.config.reportOptions,invoice:E.invoice}},function(t,r){e&&(o.cancel(e),e=null),e=o(function(){E.pdf=null,angular.isDefined(E.config.reportOptions.centerId)&&E.reportBuilder.buildPdf(w,g).then(function(e){E.pdf=e})},100)},!0)};var O=e.$on("CHANGE-CENTER",C),S=e.$on("CHANGE-USER",C);function C(){if(t.$resolve.back)return t.$resolve.back();r.reload()}t.$on("$destroy",function(){O(),S()})}])},dd2W:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.recurringBillingReport.service",["ngResource","datesDeserializer","deserializeNumbers","deskworks.config"]).factory("RecurringBillingReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=r(["billings.total","billings.discount","billings.amount"]),a=t(["billings.lastBillDate","billings.nextBillDate","billings.startDate","billings.ccExpiry","billings.terminate"]);return e(n.getApiAbsUrl("/centers/:centerId/recurring-billing-reports"),{centerId:"@centerId"},{get:{method:"GET",transformResponse:[angular.fromJson,a,o]}})}])},fKuI:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.WriteOffReport",["ngResource","datesDeserializer","deserializeNumbers","deskworks.config"]).factory("WriteOffReport",["$resource","datesDeserializer","deserializeNumbers","deskworksConfig",function(e,t,r,n){var o=t(["date"]),a=r(["amount"]),i=e(n.getApiAbsUrl("/write-off-report"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,o,a]}});return{query:function(e){return i.query(e).$promise}}}])},"g9E+":function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reservationUtilizationReportColumns",[]).factory("reservationUtilizationReportColumns",["$rootScope","$translate",function(e,t){var r=[{dataKey:"unitName",_title:"RESERVATION_UNITS.UNIT"},{dataKey:"[period]",_title:"",halign:"center"},{dataKey:"totals",_title:"REPORTS.TOTALS",halign:"center"}];function n(){r.forEach(function(e){e.title=t.instant(e._title)})}return n(),e.$on("$setTranslationsSuccess",n),r}])},grn2:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.invoiceHeader",["deskworks.reports.invoiceStyles"]).factory("invoiceHeader",["$filter","$translate","invoiceStyles",function(e,t,r){return function(n,o,a){var i,s,l,d=o.internal.pageSize.width;if(o.setFontStyle("normal"),o.setTextColor(r.header.textColor),o.setFontSize(14),i=a.reportName.toUpperCase(),s=(d-o.getTextWidth(i))/2,l=40,o.text(i,s,l),1===n.pageCount){o.setFontSize(10),o.setFontStyle("normal"),s=n.settings.margin.left,l=60,o.text(a.center.name,s,l),l+=12,o.text(a.center.street1||"",s,l),a.center.street2&&(l+=12,o.text(a.center.street2||"",s,l)),l+=12,o.text([a.center.city,a.center.state.name||a.center.state,a.center.zip].join(", "),s,l),l+=12,o.text(t.instant("INVOICE.HEADER.PHONE").toUpperCase()+": "+a.center.phone,s,l),a.center.taxId&&(l+=12,o.text(t.instant("INVOICE.HEADER.TAX_ID").toUpperCase()+": "+a.center.taxId,s,l));var u=l+18;if(a.logo){s=d-n.settings.margin.right,l=50;var f=140,p=50,c=f/a.logo.width,m=p/a.logo.height;c<=m?p*=c/m:f*=m/c,o.addImage(a.logo.data,s-f,l,f,p)}o.setFontSize(8),o.setFontStyle("bold"),s=n.settings.margin.left,l=u,o.text(t.instant("INVOICE.HEADER.BILL_TO").toUpperCase()+":",s,l),o.setFontSize(10),o.setFontStyle("normal"),l+=12,o.text(a.reportFor||"",s,l),l+=12,o.text(a.reportForCompany||"",s,l),a.invoice.address&&(l+=12,o.text(a.invoice.address.street||"",s,l),l+=12,o.text([a.invoice.address.city,a.invoice.address.state.name||a.invoice.address.state,a.invoice.address.zip].join(", "),s,l)),s=d-n.settings.margin.right,l=u,o.setFontSize(8),o.setFontStyle("bold"),i=t.instant("INVOICE.HEADER.DATE").toUpperCase()+":",o.text(i,s-o.getTextWidth(i),l),o.setFontSize(10),o.setFontStyle("normal"),l+=12,i=e("date")(a.invoice.date||a.invoice.endDate,"mediumDate"),o.text(i,s-o.getTextWidth(i),l),l+=12,o.setFontSize(8),o.setFontStyle("bold"),i=t.instant("INVOICE.HEADER.DUE_DATE").toUpperCase()+":",o.text(i,s-o.getTextWidth(i),l),o.setFontSize(10),o.setFontStyle("normal"),l+=12,i=e("date")(a.invoice.dueDate,"mediumDate"),o.text(i,s-o.getTextWidth(i),l)}}}])},h0ZB:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.writeOffReportColumns",[]).factory("writeOffReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"userCompany",_title:"WRITE_OFF_REPORT.COLUMNS.COMPANY"},{dataKey:"userName",_title:"WRITE_OFF_REPORT.COLUMNS.NAME",defaultOrder:!0},{dataKey:"orderId",_title:"WRITE_OFF_REPORT.COLUMNS.ORDER_ID",halign:"right"},{dataKey:"date",_title:"WRITE_OFF_REPORT.COLUMNS.DATE",halign:"right",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"amount",_title:"WRITE_OFF_REPORT.COLUMNS.AMOUNT",halign:"right",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach(function(e){e.title=r.instant(e._title)})}return o(),e.$on("$setTranslationsSuccess",o),n}])},haNf:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.memberStatementColumns",[]).factory("memberStatementColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"date",_title:"MEMBER_STATEMENT.COLUMNS.DATE",include:!0,width:"wrap",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"item",_title:"MEMBER_STATEMENT.COLUMNS.ITEM",include:!0},{dataKey:"price",_title:"MEMBER_STATEMENT.COLUMNS.UNIT_PRICE",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"qty",_title:"MEMBER_STATEMENT.COLUMNS.QUANTITY",include:!0,halign:"center",width:"wrap"},{dataKey:"amountBilled",_title:"MEMBER_STATEMENT.COLUMNS.AMOUNT_BILLED",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"amountPaid",_title:"MEMBER_STATEMENT.COLUMNS.AMOUNT_PAID",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"balance",_title:"MEMBER_STATEMENT.COLUMNS.BALANCE",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach(function(e){e.title=r.instant(e._title)})}return o(),e.$on("$setTranslationsSuccess",o),n}])},hlyU:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.securityDepositReport",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.reports.securityDepositReport.service","deskworks.reports.securityDepositReportColumns"]).controller("SecurityDepositReportCtrl",["$scope","$timeout","$filter","$translate","$location","state","helper","fileSaver","reportStyles","ReportBuilder","SecurityDepositReport","securityDepositReportColumns",function(e,t,r,n,o,a,i,s,l,d,u,f){var p,c=this,m=[];function g(e){var t={columns:e.reportColumns.columns.filter(function(e){return e.include}),rows:[]},r=c.reportBuilder.sortData(e.reportData.deposits,e.reportColumns.order);m=[];var o,a=Array.apply(null,new Array(t.columns.length)).map(function(e){return!1}),s=i.findIndexByKeyValue(t.columns,"dataKey","date"),d=i.findIndexByKeyValue(t.columns,"dataKey","balance"),u=i.findIndexByKeyValue(t.columns,"dataKey","userName");return u<0&&(u=i.findIndexByKeyValue(t.columns,"dataKey","userCompany")),r.forEach(function(r,n){m.push(e.showDetails?l.h2:n%2?null:l.rowOdd),t.rows.push(t.columns.map(function(e){return r[e.dataKey]})),e.showDetails&&r.details.forEach(function(e,r){m.push(r%2?null:l.rowOdd);var n=a.slice(0,t.columns.length);s>=0&&(n[s]=e.date),d>=0&&(n[d]=e.amount),u>=0&&(n[u]=e.notes),t.rows.push(n)})}),t.rows.push(a),m.push(null),(o=i.findIndexByKeyValue(t.columns,"dataKey","balance"))>=0&&(t.rows.push(a.slice(0,Math.max(o-1,0)).concat(o>0?[n.instant("SECURITY_DEPOSIT_REPORT.TOTALS.TOTAL")+":",e.reportData.total]:[e.reportData.total]).concat(a.slice(0,a.length-o-1))),m.push(l.h3)),t}c.config={reportName:n.instant("SECURITY_DEPOSIT_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:{columns:angular.copy(f)},showDetails:!1,getReportData:function(){return u.get({centerId:c.config.reportOptions.centerId,ownerId:c.config.reportOwnerRegion.ownerId,regionId:c.config.reportOwnerRegion.regionId}).$promise},stylesInjector:function(e,t){e.styles.fillColor=!1,angular.extend(e.styles,m[t.row.index])}},a.setPageTitle(c.config.reportName),e.$watch(function(){return o.search().showDetails},function(e){c.config.showDetails=e}),e.$watch("vm.config.showDetails",function(e){o.search("showDetails",e||null).replace()}),c.reportBuilder=new d(c.config),e.$watch(function(){return{reportOptions:c.config.reportOptions,reportColumns:c.config.reportColumns,reportOwnerRegion:c.config.reportOwnerRegion,showDetails:c.config.showDetails}},function(e,r){p&&(t.cancel(p),p=null),p=t(function(){c.pdf=null,angular.isUndefined(c.config.reportOptions.centerId)||c.reportBuilder.buildPdf(g).then(function(e){c.pdf=e})},100)},!0),c.downloadPdf=function(){c.pdf&&s(c.pdf,c.reportBuilder.getReportFileName("pdf"))},c.downloadCsv=function(){c.pdf&&s(c.reportBuilder.buildCsv(g),c.reportBuilder.getReportFileName("csv"))}}])},iTQj:function(e,t){e.exports="<div id=mailboxReport class=gutter-v> <form name=formMailboxReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <report-columns ng-model=vm.config.reportColumns></report-columns> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions></report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},kJoc:function(e,t){e.exports="<div id=securityDepositReport class=gutter-v> <form name=formSecurityDepositReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <report-columns ng-model=vm.config.reportColumns></report-columns> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=vm.config.reportOptions> <ff-row> <ff-label flex=\"0 0 100px\"><span translate=SECURITY_DEPOSIT_REPORT.SHOW_DETAILS></span></ff-label> <ff-static><ff-checkbox ff-model=vm.config.showDetails></ff-checkbox></ff-static> </ff-row> </report-options> <report-owner-region ng-model=vm.config.reportOwnerRegion report-data=vm.config.reportData></report-owner-region> </div> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},lKYt:function(e,t){e.exports="<div id=memberUsageReport class=gutter-v> <form name=formMemberUsageReport> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <div class=gutter-v> <report-dates ng-model=vm.config.reportDates></report-dates> <report-columns ng-model=vm.config.reportColumns></report-columns> </div> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <report-options ng-model=vm.config.reportOptions></report-options> </div> </div> <ff-btn-group class=buttons-bottom> <ff-btn sense=download ff-click=vm.downloadPdf() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=vm.downloadCsv() ff-disabled=!vm.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=vm.pdf></div> </ff-panel> </div> "},nJHl:function(e,t){e.exports="<div id=reservationUtilizationReport class=gutter-v> <form> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <report-dates ng-model=$ctrl.config.reportDates></report-dates> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=gutter-v> <report-options ng-model=$ctrl.config.reportOptions all-centers=false> <report-by-period ng-model=$ctrl.config.byPeriod></report-by-period> </report-options> </div> </div> <ff-panel flex=auto> <ff-panel-header><span translate=RESERVATION_UTILIZATION_REPORT.CHART.HEADER></span></ff-panel-header> <div ff-dim=!$ctrl.pdf> <chart chart-type=pie chart-labels=$ctrl.chart.labels chart-data=$ctrl.chart.data chart-options=$ctrl.chart.options></chart> </div> </ff-panel> <ff-btn-group> <ff-btn sense=download ff-click=$ctrl.downloadPdf() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_PDF></span> </ff-btn> <ff-btn sense=download ff-click=$ctrl.downloadCsv() ff-disabled=!$ctrl.pdf> <span translate=REPORTS.BTN_CSV></span> </ff-btn> </ff-btn-group> </div> </form> <ff-panel> <ff-panel-header><span translate=REPORTS.PREVIEW.HEADER></span></ff-panel-header> <div pdf-preview=$ctrl.pdf></div> </ff-panel> </div> "},pfDI:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.invoiceColumns",[]).factory("invoiceColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"date",_title:"INVOICE.COLUMNS.DATE",include:!0,width:"wrap",pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"name",_title:"INVOICE.COLUMNS.ITEM",include:!0,minWidth:150},{dataKey:"description",_title:"INVOICE.COLUMNS.DESCRIPTION",include:!0,minWidth:150,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"price",_title:"INVOICE.COLUMNS.RATE",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}},{dataKey:"qty",_title:"INVOICE.COLUMNS.QUANTITY",include:!0,halign:"center",width:"wrap"},{dataKey:"amount",_title:"INVOICE.COLUMNS.AMOUNT",include:!0,halign:"right",width:"wrap",pdf:function(e){return t("ncurrency")(e)},csv:function(e){return t("ncurrency")(e)}}];function o(){n.forEach(function(e){e.title=r.instant(e._title)})}return o(),e.$on("$setTranslationsSuccess",o),n}])},piGw:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.ReservationUsageReport",["ngResource","deskworks.config","deserializeNumbers"]).factory("ReservationUsageReport",["$resource","deskworksConfig","deserializeNumbers",function(e,t,r){var n=t.getApiAbsUrl("/reservation-usage-report"),o=r(["reservationHours","reservationCost","reservationCreditApplied","reservationCostBalance"]),a=e(n,{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,o]}});return{query:function(e){return a.query(e).$promise}}}])},qD0y:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.reservationUtilizationReportPieChart",[]).factory("reservationUtilizationReportPieChart",["$translate","$filter","helper",function(e,t,r){return{getChartData:function(n){var o=[],a=[],i=n.units.reduce(function(e,t){return e+t.total},0);n.units.forEach(function(e){e.total&&(o.push(e.total),a.push(e.unitName))});var s={data:[],options:{tooltips:{callbacks:{label:function(e,n){var o=n.labels[e.index],a=n.datasets[0].data[e.index],s=r.round(a/i*100,1);return"".concat(o,": ").concat(t("hours")(a)," (").concat(s,"%)")}}},legend:{display:!0,position:"right"}}};return s.data.push({data:o}),s.labels=a,s.options.title={display:!0,text:e.instant("RESERVATION_UTILIZATION_REPORT.CHART.TOTAL_TIME").toUpperCase()+": "+t("hours")(i)},s}}}])},qctg:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.ReservationUsageReportCtrl",["pdfPreview","fileSaver","deskworks.state","deskworks.reports.reportStyles","deskworks.reports.ReportBuilder","deskworks.reports.reportDates","deskworks.reports.reportOptions","deskworks.reports.reportOwnerRegion","deskworks.ReservationUsageReport","deskworks.reservationUsageReportColumns","deskworks.reportOrderBy"]).controller("ReservationUsageReportCtrl",["$scope","$timeout","$filter","$translate","state","helper","fileSaver","reportStyles","ReportBuilder","ReservationUsageReport","reservationUsageReportColumns",function(e,t,r,n,o,a,i,s,l,d,u){var f,p=this;function c(e){var t={columns:e.reportColumns,rows:[],styles:[]},r=["reservationCost","reservationCreditApplied","reservationCostBalance"],o=e.reportData.reduce(function(e,t){return r.forEach(function(r){e[r]+=t[r]||0}),e},r.reduce(function(e,t){return e[t]=0,e},{}));o.memberCompany=n.instant("REPORTS.TOTALS").toUpperCase()+":";var i=t.columns.map(function(e){return angular.isNumber(o[e.dataKey])?a.round(o[e.dataKey]):o[e.dataKey]||!1});return t.rows.push(i),t.styles.push(s.h2),p.reportBuilder.sortData(e.reportData,e.orderBy).forEach(function(e,r){t.rows.push(t.columns.map(function(t){return angular.isNumber(e[t.dataKey])?a.round(e[t.dataKey]):e[t.dataKey]})),t.styles.push(r%2?null:s.rowOdd)}),e.reportData.length&&(t.rows.push(angular.extend({},i)),t.styles.push(s.h2)),t}p.config={reportName:n.instant("RESERVATION_USAGE_REPORT.REPORT_NAME"),reportOptions:{},reportOwnerRegion:{},reportColumns:u,reportDates:{fromDate:moment().subtract(1,"month").startOf("month"),toDate:moment().subtract(1,"month").endOf("month")},getReportData:function(){return d.query({centerId:p.config.reportOptions.centerId||null,fromDate:r("date")(p.config.reportDates.fromDate,"yyyy-MM-dd"),toDate:r("date")(p.config.reportDates.toDate,"yyyy-MM-dd"),ownerId:p.config.reportOwnerRegion.ownerId,regionId:p.config.reportOwnerRegion.regionId})}},o.setPageTitle(p.config.reportName),p.reportBuilder=new l(p.config),e.$watch(function(){return{reportOptions:p.config.reportOptions,reportDates:p.config.reportDates,orderBy:p.config.orderBy,reportOwnerRegion:p.config.reportOwnerRegion}},function(e,r){f&&(t.cancel(f),f=null),f=t(function(){p.pdf=null;var t=e.reportDates.fromDate,n=r.reportDates.fromDate;!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(p.config.reportData=null),t=e.reportDates.toDate,n=r.reportDates.toDate,!moment.isMoment(t)||moment.isMoment(n)&&t.isSame(n)||(p.config.reportData=null),p.reportBuilder.buildPdf(c).then(function(e){p.pdf=e})},100)},!0),p.downloadPdf=function(){p.pdf&&i(p.pdf,p.reportBuilder.getReportFileName("pdf"))},p.downloadCsv=function(){p.pdf&&i(p.reportBuilder.buildCsv(c),p.reportBuilder.getReportFileName("csv"))}}])},qhd7:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.ReservationUtilizationReport",["ngResource","datesDeserializer","deskworks.config"]).factory("ReservationUtilizationReport",["$resource","datesDeserializer","deskworksConfig",function(e,t,r){var n=t(["groups.daily.date"]),o=e(r.getApiAbsUrl("/reservation-utilization-report"),{centerId:"@centerId",fromDate:"@fromDate",toDate:"@toDate"},{query:{method:"GET",isArray:!0,transformResponse:[angular.fromJson,n]}});return{query:function(e){return o.query(e).$promise}}}])},rjaI:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.reportFooter",["deskworks.reports.reportStyles"]).factory("reportFooter",["$filter","reportStyles",function(e,t){return function(e,r,n){var o,a=r.internal.pageSize.width,i=r.internal.pageSize.height;r.setFontStyle("normal"),r.setTextColor(t.footer.textColor),r.setFontSize(9),o=[n.center.name,n.center.phone,n.center.street1],n.center.street2&&o.push(n.center.street2),o.push(n.center.city),o.push(n.center.state.name||n.center.state),o.push(n.center.zip),o=o.join(" / "),r.text(o,(a-r.getTextWidth(o))/2,i-30)}}])},rlfb:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.memberUsageReportColumns",["deskworks.helper"]).factory("memberUsageReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"date",_title:"MEMBER_USAGE_REPORT.COLUMNS.DATE",include:!0,defaultOrder:!0,pdf:function(e){return t("date")(e,"mediumDate")},csv:function(e){return t("date")(e,"shortDate")}},{dataKey:"userName",_title:"MEMBER_USAGE_REPORT.COLUMNS.USER_NAME",include:!0},{dataKey:"userEmail",_title:"MEMBER_USAGE_REPORT.COLUMNS.USER_EMAIL",include:!0},{dataKey:"checkInTime",_title:"MEMBER_USAGE_REPORT.COLUMNS.CHECK_IN",include:!0,halign:"center",pdf:function(e){return t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortTime")}},{dataKey:"checkOutTime",_title:"MEMBER_USAGE_REPORT.COLUMNS.CHECK_OUT",include:!0,halign:"center",pdf:function(e){return t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortTime")}},{dataKey:"usageHours",_title:"MEMBER_USAGE_REPORT.COLUMNS.HOURS",include:!0,halign:"center"},{dataKey:"usagePasses",_title:"MEMBER_USAGE_REPORT.COLUMNS.PASSES",include:!0,halign:"center"}];function o(){n.forEach(function(e){e.title=r.instant(e._title)})}return o(),e.$on("$setTranslationsSuccess",o),n}])},t9tK:function(e,t,r){"use strict";r.r(t);r("it7j"),r("IKQL");t.default=angular.module("deskworks.reservationUtilizationReportAggregate",["deskworks.reports.optsReportByPeriod"]).factory("reservationUtilizationReportAggregate",["reservationUtilizationReportCreateGrid",function(e){return function(t){var r=t.reportDates,n=r.fromDate,o=r.toDate,a=t.reportData,i=t.byPeriod,s={periods:e(n,o,i)};return s.units=a.map(function(e){var t={unitName:e.unitName,totals:Array(s.periods.length).fill(0),total:0};return t.groups=e.groups.map(function(e){return{name:e.name,totals:e.daily.reduce(function(e,r){return s.periods.some(function(n,o){if(r.date.isSameOrAfter(n.fromDate)&&r.date.isSameOrBefore(n.toDate)){var a=angular.isNumber(r.usage)?r.usage:0;return e[o]+=a,t.totals[o]+=a,!0}}),e},Array(s.periods.length).fill(0))}}),t.groups.forEach(function(e){e.total=e.totals.reduce(function(e,t){return e+t},0),t.total+=e.total}),t}),s}}]).factory("reservationUtilizationReportCreateGrid",["$filter","optsReportByPeriod",function(e,t){return function(e,r,n){var o=[],a=t.find(function(e){return e.id===n}),i=e.clone().startOf(n);do{var s={fromDate:i.clone()};i.add(1,n+"s"),s.toDate=i.clone().subtract(1,"ms"),s.title=a.format(s.fromDate,s.toDate),o.push(s)}while(i.isSameOrBefore(r));return o}}])},vRPl:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.reservationReportColumns",[]).factory("reservationReportColumns",["$rootScope","$filter","$translate",function(e,t,r){var n=[{dataKey:"startTime",_title:"RESERVATION_REPORT.COLUMNS.START_TIME",include:!0,minWidth:100,pdf:function(e){return t("date")(e,"weekDate")+" "+t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortDate")+" "+t("date")(e,"shortTime")}},{dataKey:"centerName",_title:"RESERVATION_REPORT.COLUMNS.CENTER",include:!1,minWidth:120},{dataKey:"createdAt",_title:"RESERVATION_REPORT.COLUMNS.CREATED_AT",include:!1,minWidth:80,pdf:function(e){return t("date")(e,"mediumDate")+" "+t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortDate")+" "+t("date")(e,"shortTime")}},{dataKey:"endTime",_title:"RESERVATION_REPORT.COLUMNS.END_TIME",include:!0,minWidth:100,pdf:function(e){return t("date")(e,"weekDate")+" "+t("date")(e,"shortTime")},csv:function(e){return t("date")(e,"shortDate")+" "+t("date")(e,"shortTime")}},{dataKey:"note",_title:"RESERVATION_REPORT.COLUMNS.NOTE",include:!1,minWidth:120},{dataKey:"reservationUnitName",_title:"RESERVATION_REPORT.COLUMNS.UNIT",include:!0,minWidth:150},{dataKey:"userCompany",_title:"RESERVATION_REPORT.COLUMNS.COMPANY",include:!0,minWidth:150},{dataKey:"userName",_title:"RESERVATION_REPORT.COLUMNS.USER_NAME",include:!0,minWidth:120}];function o(){n.forEach(function(e){e.title=r.instant(e._title)})}return o(),e.$on("$setTranslationsSuccess",o),n}])},zl1W:function(e,t,r){"use strict";r.r(t),t.default=angular.module("deskworks.reports.invoice.service",["ngResource","datesDeserializer","deskworks.config"]).factory("Invoice",["$resource","$q","datesDeserializer","deskworksConfig",function(e,t,r,n){var o=r(["items.date","date","dueDate"]);return e(n.getApiAbsUrl("/centers/:centerId/user-profiles/:userId/generate-invoices"),{centerId:"@centerId",userId:"@userId",orderId:"@orderId"},{get:{method:"GET",transformResponse:[angular.fromJson,o]}})}])},zvMh:function(e,t,r){"use strict";r.r(t);r("nd6X");t.default=angular.module("b64",[]).factory("b64",["$window",function(e){var t=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array;return function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=e.length;n<o;++n)t[n]=e[n],r[e.charCodeAt(n)]=n;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63}(),{toByteArray:function(e){var t,o,a,i,s,l,d=e.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s="="===e[d-2]?2:"="===e[d-1]?1:0,l=new n(3*d/4-s),a=s>0?d-4:d;var u=0;for(t=0,o=0;t<a;t+=4,o+=3)i=r[e.charCodeAt(t)]<<18|r[e.charCodeAt(t+1)]<<12|r[e.charCodeAt(t+2)]<<6|r[e.charCodeAt(t+3)],l[u++]=i>>16&255,l[u++]=i>>8&255,l[u++]=255&i;2===s?(i=r[e.charCodeAt(t)]<<2|r[e.charCodeAt(t+1)]>>4,l[u++]=255&i):1===s&&(i=r[e.charCodeAt(t)]<<10|r[e.charCodeAt(t+1)]<<4|r[e.charCodeAt(t+2)]>>2,l[u++]=i>>8&255,l[u++]=255&i);return l},fromByteArray:function(e){for(var r,n=e.length,a=n%3,i="",s=[],l=0,d=n-a;l<d;l+=16383)s.push(o(e,l,l+16383>d?d:l+16383));1===a?(r=e[n-1],i+=t[r>>2],i+=t[r<<4&63],i+="=="):2===a&&(r=(e[n-2]<<8)+e[n-1],i+=t[r>>10],i+=t[r>>4&63],i+=t[r<<2&63],i+="=");return s.push(i),s.join("")}};function o(e,r,n){for(var o,a,i=[],s=r;s<n;s+=3)o=(e[s]<<16)+(e[s+1]<<8)+e[s+2],i.push(t[(a=o)>>18&63]+t[a>>12&63]+t[a>>6&63]+t[63&a]);return i.join("")}}])}}]);