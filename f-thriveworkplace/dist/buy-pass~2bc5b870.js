(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"1scS":function(e,r,t){"use strict";t.r(r);t("t91x"),t("aIjk"),t("5nZu");var s=t("l7sz"),n=t.n(s),a=t("aE5K"),l=t.n(a),f=t("9QnR"),o=t.n(f),i=["$injector",function(e){var r,s=(r=t("TTUl")).keys().map(r);e.loadNewModules(s.map(function(e){return e.default.name})),e.invoke(["$templateCache",function(e){var r=t("DwaR");r.keys().forEach(function(t){return e.put(t.replace(/^\.\//,""),r(t))}),e.put("staff-help/staff-help.tpl.html",n.a),e.put("templates/new-user-profile.tpl.html",l.a),e.put("templates/new-billing-profile.tpl.html",o.a)}])}];r.default=i},"5nZu":function(e,r,t){"use strict";t("DbwS"),t("t91x"),angular.module("deskworks.StaffHelpCtrl",["ngRoute","deskworks.helper","deskworks.config"]).controller("StaffHelpCtrl",["$scope","$timeout","$q","$route","$window","$translate","dwAlerts","helper","state","deskworksConfig",function(e,r,t,s,n,a,l,f,o,i){this.notice=o.getParam("notice"),o.setPageTitle(a.instant("SIMPLE_RES.STAFF_HELP.PAGE_TITLE")),e.$on("$routeChangeStart",function(e,r,t){!r.$$route||"MemberSignUpBillingCtrl"!==r.$$route.controller&&"MemberSignUpPurchaseCtrl"!==r.$$route.controller&&"SimpleReservationBillingCtrl"!==r.$$route.controller&&"SimpleReservationPurchaseCtrl"!==r.$$route.controller&&"BuyPassBillingCtrl"!==r.$$route.controller&&"BuyPassPurchaseCtrl"!==r.$$route.controller||(l.error(a.instant("SIMPLE_RES.STAFF_HELP.BACK_ERROR")),e.preventDefault())}),this.home=function(){if(o.getParam("redirect"))n.location.href=o.getParam("redirect");else{var e=o.getParam("origin"),s=o.getCurrentCenterId();(e?o.logout():t.when()).finally(function(){return o.resetParams(),e&&o.setCurrentCenterId(s),o.setPath(e||i.getDefaultRoute())})}return r(1e4)}}])},"9QnR":function(e,r){e.exports='<div id=newBillingProfile> <h4 class="page-title flex"> <span>{{state.getPageTitle()}}</span> <need-help phone="$resolve.center.phone || vm.reg.phone"></need-help> </h4> <ff-board> <ff-panel style=max-width:450px> <ff-panel-header> <span translate=GLOBAL.STEP_X_OF_Y translate-values=vm.reg ng-if=vm.reg.stepCount></span> <span ng-if=vm.reg.stepCount>&nbsp;</span> <small translate=GLOBAL.REQUIRED_FIELDS_MARKED_WITH></small> </ff-panel-header> <div class="ff-grid gutter-v"> <up-credit-cards user-profile=vm.userProfile reg=vm.reg settings=vm.settings single=true ng-if=vm.userProfile.creditCards.length></up-credit-cards> <up-e-checks user-profile=vm.userProfile reg=vm.reg single=true ng-if="vm.settings.enableEChecks && vm.userProfile.eChecks.length"></up-e-checks> <ff-btn-group ng-if=vm.showSwitchButton()> <ff-btn sense=add size=sm ng-if=vm.userProfile.eChecks.length ff-click=vm.addCC()> <span translate=BILLING_PROFILE.CREDIT_CARDS.BTN_ADD></span> </ff-btn> <ff-btn sense=add size=sm ng-if=vm.userProfile.creditCards.length ff-click=vm.addECheck()> <span translate=BILLING_PROFILE.E_CHECKS.BTN_ADD></span> </ff-btn> </ff-btn-group> </div> </ff-panel> </ff-board> <ff-btn-group class=buttons-bottom> <ff-btn sense=help ff-click=vm.staffHelp() ng-if=vm.staffHelp><span translate=GLOBAL.BTN_STAFF_HELP></span></ff-btn> <ff-btn sense=back ff-click=vm.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> <ff-btn sense=next ff-click=vm.next() ng-if=vm.next><span translate=SIMPLE_RES.BILLING.BTN_PURCHASE></span></ff-btn> <ff-btn sense=next ff-click=vm.complete() ng-if=vm.complete><span translate=MEMBER_SIGN_UP.BILLING.BTN_COMPLETE></span></ff-btn> </ff-btn-group> </div> '},DwaR:function(e,r,t){var s={"./steps/01-select-pass.tpl.html":"f5iy","./steps/04-purchase.tpl.html":"ZCcb"};function n(e){var r=a(e);return t(r)}function a(e){if(!t.o(s,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id="DwaR"},Ebsd:function(e,r,t){"use strict";t.r(r),r.default=angular.module("deskworks.buyPass.purchase",["ngRoute","deskworks.helper","deskworks.purchase.service"]).controller("BuyPassPurchaseCtrl",["$scope","$route","$translate","dwAlerts","helper","state","purchase","purchaseService",function(e,r,t,s,n,a,l,f){var o=this;a.setPageTitle(t.instant("BUY_PASS.PURCHASE.PAGE_TITLE")),o.purchase=l,o.next=function(){return a.setPath(a.getPath()+"/billing")},o.staffHelp=function(){return f.createStaffHelp(a.getCurrentCenterId(),r.current.params.userId,o.purchase.id).catch(function(e){return s.error(e,"Failed to create staff help.")}).then(function(e){return a.setParam("notice",e.notice),a.setPath(a.getPath()+"/staff-help")})}}])},ONIO:function(e,r,t){"use strict";t.r(r);t("DbwS"),t("t91x");r.default=angular.module("deskworks.buyPass.userProfile",["ngRoute","deskworks.userProfile.service","deskworks.helper","needHelp"]).controller("BuyPassUserProfileCtrl",["$scope","$timeout","$q","$route","$translate","helper","state","center","dwAlerts","userProfile","reg","userProfileService","purchaseService",function(e,r,t,s,n,a,l,f,o,i,c,u,p){var d=this;d.reg=c,d.reg.phone=f.phone,d.userProfile=i,d.schema=i.schema,l.setPageTitle(n.instant(d.reg.new?"USER_PROFILE.NEW_USER.PAGE_TITLE":"USER_PROFILE.PAGE_TITLE",{userName:a.join([d.userProfile.firstName,d.userProfile.lastName]," ")})),u.bindTestUserGenerator(e,d.userProfile,d.reg),d.next=function(){if(!a.pointFirstInvalid("#userProfile"))return t.when(d.reg.new&&u.registerNewUser(0,d.userProfile)).then(function(){if(d.reg.new)return l.login(d.userProfile.login,d.userProfile.password).catch(function(e){return o.error(e,"Failed to log in with created user.")})}).then(function(){return p.createPurchase(l.getCurrentCenterId(),d.userProfile.id,void 0,l.getParam("pass")).catch(function(e){return o.error(e,"Failed to create purchase.")}).finally(function(){d.reg.new&&(l.replace(),s.updateParams({userId:d.userProfile.id}))})}).then(function(e){return r(function(){return l.setPath(l.getPath()+"/purchase/"+e.id)})})},d.back=l.back}])},RvEx:function(e,r,t){"use strict";t.r(r);t("it7j");r.default=angular.module("deskworks.buyPass.billing",["ngRoute","deskworks.userProfile.service","deskworks.purchase.service","deskworks.routeHelper","deskworks.helper"]).controller("BuyPassBillingCtrl",["$scope","$route","$timeout","$window","$translate","dwAlerts","helper","state","settings","userProfile","reg","userProfileService","purchaseService",function(e,r,t,s,n,a,l,f,o,i,c,u,p){var d=this;if(d.userProfile=i,d.reg=c,d.settings=o,f.setPageTitle(n.instant("BILLING_PROFILE.PAGE_TITLE",{userName:l.join([d.userProfile.firstName,d.userProfile.lastName]," ")})),o.creditCardTypes=o.creditCardTypes.filter(function(e){return e.enable}),d.userProfile.creditCards.forEach(function(e){e.type=l.find(o.creditCardTypes,e.type)||e.type||{}}),d.userProfile.creditCards=d.userProfile.creditCards||[],!d.userProfile.creditCards.length&&!d.userProfile.eChecks.length){var g=u.creditCard.new(d.userProfile);g.type=o.creditCardTypes[0],d.userProfile.creditCards.push(g)}u.bindTestBillingGenerator(e,d.userProfile,d.reg),d.addCC=function(){var e=u.creditCard.new(d.userProfile);d.userProfile.creditCards=[e],d.userProfile.eChecks=[]},d.addECheck=function(){var e=u.eCheck.new(d.userProfile);d.userProfile.eChecks=[e],d.userProfile.creditCards=[]},d.showSwitchButton=function(){var e=!d.userProfile.creditCards[0]||u.creditCard.isNew(d.userProfile.creditCards[0]),r=!d.userProfile.eChecks[0]||u.eCheck.isNew(d.userProfile.eChecks[0]);return e&&r&&d.settings.enableEChecks},d.next=function(){if(!l.pointFirstInvalid("#newBillingProfile")){var o=f.prohibitBack(["BuyPassPurchaseCtrl"],n.instant("SIMPLE_RES.BILLING.BACK_ERROR"),e);return u.saveBillingProfile(f.getCurrentCenterId(),d.userProfile).then(function(){return p.createPayment(f.getCurrentCenterId(),r.current.params.userId,r.current.params.purchaseId,{},void 0,f.getParam("pass")).then(function(e){return s.location.href=f.getParam("redirect")+"&accessCode="+e.accessCode,t(15e3)}).catch(function(e){return a.error(e,"Failed to make payment.")})}).catch(o)}},d.staffHelp=function(){return p.createStaffHelp(f.getCurrentCenterId(),r.current.params.userId,r.current.params.purchaseId).catch(function(e){return a.error(e,"Failed to create staff help.")}).then(function(e){return f.setParam("notice",e.notice),f.setPath(f.getPath().replace(/\/billing$/,"/staff-help"))})},d.back=f.back}])},TTUl:function(e,r,t){var s={"./steps/01-select-pass.controller.js":"iYEM","./steps/02-sign-in.controller.js":"uOUY","./steps/03-user-profile.controller.js":"ONIO","./steps/04-purchase.controller.js":"Ebsd","./steps/05-staff-help.controller.js":"nmaZ","./steps/06-billing.controller.js":"RvEx"};function n(e){var r=a(e);return t(r)}function a(e){if(!t.o(s,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id="TTUl"},ZCcb:function(e,r){e.exports='<form name=formPurchase id=buyPassPurchase> <h4 class="page-title flex"> <span>{{state.getPageTitle()}}</span> <need-help phone=$resolve.center.phone></need-help> </h4> <ff-board> <ff-panel> <ff-panel-header>Order Id: {{$ctrl.purchase.orderId}}</ff-panel-header> <dw-invoice invoice=$ctrl.purchase center=$ctrl.center allow-remove=false></dw-invoice> </ff-panel> </ff-board> <ff-btn-group class=buttons-bottom> <ff-btn sense=help ff-click=$ctrl.staffHelp()><span translate=GLOBAL.BTN_STAFF_HELP></span></ff-btn> <ff-btn sense=back ff-click=state.back()><span translate=GLOBAL.BTN_BACK></span></ff-btn> <ff-btn sense=next type=submit ff-click=$ctrl.next()><span translate=GLOBAL.BTN_NEXT></span></ff-btn> </ff-btn-group> </form> '},aE5K:function(e,r){e.exports='<div class=user-profile id=userProfile> <h4 class="page-title flex"> <span> {{state.getPageTitle()}} <span ng-if="vm.reg.member && !vm.reg.selfRegistration" ng-style="{ color: vm.center.color }">{{vm.center.name}}</span> </span> <need-help phone=vm.reg.phone></need-help> </h4> <ff-board> <ff-panel> <ff-panel-header ng-if=vm.reg> <span translate=GLOBAL.STEP_X_OF_Y translate-values=vm.reg ng-if=vm.reg.stepCount></span> <small translate=GLOBAL.REQUIRED_FIELDS_MARKED_WITH></small> </ff-panel-header> <div class="ff-grid ff-gutter-v ff-gutter-h"> <up-personal-info user=vm.userProfile schema=vm.schema reg=vm.reg></up-personal-info> <up-addresses flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg center=vm.center single=true></up-addresses> <div flex="{md: \'0 0 50%\'}"> <div class="ff-grid ff-gutter-v"> <up-login-info user=vm.userProfile schema=vm.schema reg=vm.reg member-directory-url=wlLinks.memberDirectoryUrl></up-login-info> <up-phones user=vm.userProfile schema=vm.schema reg=vm.reg single=true></up-phones> </div> </div> <up-photo flex="{md: \'0 0 50%\'}" user=vm.userProfile schema=vm.schema reg=vm.reg></up-photo> <div flex="{md: \'0 0 50%\'}"> <div class="ff-grid ff-gutter-v"> <up-lead-source user=vm.userProfile schema=vm.schema reg=vm.reg></up-lead-source> <up-terms-of-service user=vm.userProfile schema=vm.schema reg=vm.reg></up-terms-of-service> </div> </div> </div> </ff-panel> </ff-board> <ff-btn-group class=buttons-bottom ng-if=vm.reg> <ff-btn sense=back ff-click=vm.back() ng-if=vm.back><span translate=GLOBAL.BTN_BACK></span></ff-btn> <ff-btn sense=next ff-click=vm.next()><span translate=GLOBAL.BTN_NEXT></span></ff-btn> </ff-btn-group> </div> '},aIjk:function(e,r,t){"use strict";r.a=angular.module("needHelp",[]).directive("needHelp",function(){return{restrict:"E",scope:!0,controller:function(){},controllerAs:"$ctrl",template:'<span translate="GLOBAL.NEED_HELP" class="need-help" ng-if="$ctrl.phone" '+"translate-values=\"{ phone: '<a href=&quot;tel:' + $ctrl.phone + '&quot;>' + $ctrl.phone + '</a>' }\"></span>",bindToController:{phone:"<"}}})},f5iy:function(e,r){e.exports='<form name=formSelectPass id=selectPass> <h4 class="page-title flex"> <span>{{state.getPageTitle()}}</span> <need-help phone=$resolve.center.phone></need-help> </h4> <ff-board class=ff-no-frame> <div class="ff-grid ff-gutter-v ff-gutter-h"> <ff-panel flex="{md: \'0 0 50%\'}"> <label class=ff-row> <ff-label flex="1 0 124px" class=em> <span translate=BUY_PASS.SELECT_PASS.HEADER></span> </ff-label> <ff-select flex="1 1 70%" name=pass ff-model=$ctrl.pass ff-options="pass.name for pass in $ctrl.passes" ff-change=$ctrl.onPassChange() ff-required=true ff-validate-alert="{{\'BUY_PASS.SELECT_PASS.PASS\' | translate}}"> </ff-select> </label> <label class=ff-row> <ff-label flex="1 0 124px" class=em> <span translate=BUY_PASS.SELECT_PASS.PRICE></span> </ff-label> <ff-static flex="1 1 100%" ff-bind="$ctrl.pass.price | nd | ncurrency" name=price></ff-static> </label> </ff-panel> <ff-panel flex="{md: \'0 0 50%\'}"> <span class=pre-description translate=BUY_PASS.SELECT_PASS.NOTE></span> </ff-panel> </div> </ff-board> <ff-btn-group class=buttons-bottom> <ff-btn sense=next type=submit ff-click=$ctrl.next()> <span translate=GLOBAL.BTN_NEXT></span> </ff-btn> </ff-btn-group> </form> '},iYEM:function(e,r,t){"use strict";t.r(r);t("it7j");r.default=angular.module("deskworks.buyPass.selectPass",["ngRoute","deskworks.helper"]).controller("BuyPassSelectPassCtrl",["$scope","$translate","state","helper","passes",function(e,r,t,s,n){var a=this;t.setPageTitle(r.instant("BUY_PASS.SELECT_PASS.PAGE_TITLE")),a.passes=n,a.pass=s.find(a.passes,t.getParam("pass")),a.next=function(){if(!s.pointFirstInvalid("#selectPass"))return t.setPath(t.getPath()+"/user")},a.onPassChange=function(){t.replace(),t.setParam("pass",a.pass.id)}}])},l7sz:function(e,r){e.exports='<div id=staffHelp class=ff-tmargin> <ff-board> <ff-panel> <span ng-bind=::vm.notice></span> </ff-panel> </ff-board> <ff-btn-group class="buttons-bottom ff-center"> <ff-btn sense=home type=submit ff-click=vm.home()><span translate=GLOBAL.BTN_HOME></span></ff-btn> </ff-btn-group> </div> '},nmaZ:function(e,r,t){"use strict";t.r(r),r.default=angular.module("deskworks.buyPass.staffHelp",["ngRoute","deskworks.helper","deskworks.config"]).controller("BuyPassStaffHelpCtrl",["$scope","$timeout","$window","$translate","dwAlerts","helper","state",function(e,r,t,s,n,a,l){l.setPageTitle(s.instant("SIMPLE_RES.STAFF_HELP.PAGE_TITLE")),this.notice=l.getParam("notice"),e.$on("$routeChangeStart",function(e,r,t){var a=r.$$route&&r.$$route.controller;"BuyPassPurchaseCtrl"!==a&&"BuyPassBillingCtrl"!==a||(n.error(s.instant("SIMPLE_RES.STAFF_HELP.BACK_ERROR")),e.preventDefault())}),this.home=function(){return t.location.href=l.getParam("redirect"),r(1e4)}}])},uOUY:function(e,r,t){"use strict";t.r(r),r.default=angular.module("deskworks.buyPass.signIn",["flexForms","deskworks.state","deskworks.config","deskworks.dwSignIn"]).controller("BuyPassSignInCtrl",["$scope","$translate","state",function(e,r,t){t.setPageTitle(r.instant("SIGN_IN.PAGE_TITLE")),e.$on("dwSignIn:SignIn",function(e){e.stopPropagation(),t.replace(),t.setPath(t.getPath()+"/"+t.getLoggedUserId())}),e.$on("dwSignIn:SignUp",function(e){e.stopPropagation(),t.setPath(t.getPath()+"/new")})}])}}]);