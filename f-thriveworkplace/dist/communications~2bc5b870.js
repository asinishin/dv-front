(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"/l8F":function(e,t){e.exports='<ff-panel> <ff-panel-header><span> <span translate=SH_CODES.HEADER></span> <ff-hint><span translate=SH_CODES.HINT></span></ff-hint> </span></ff-panel-header> <ff-row ng-repeat="code in $ctrl.shortCodes"> <ff-label flex="1 0 140px" ff-bind-html=code.id></ff-label> <ff-static flex="1 1 350px">{{code._name | translate}}</ff-static> </ff-row> </ff-panel> '},"7GGv":function(e,t,a){"use strict";a.r(t);a("aJ1N"),a("NhWh"),a("GPfp");t.default=angular.module("deskworks.communications.emailAllMembers",["ffRichtext","deskworks.emailAllMembers.service","deskworks.taToolbarEmail","deskworks.shortCodes","deskworks.attachments"]).controller("EmailAllMembersCtrl",["$scope","$templateCache","$translate","dwAlerts","state","helper","emailAllMembers","taToolbarEmail",function(e,t,a,n,s,r,f,l){var i=this;s.setPageTitle(a.instant("EMAIL_MEMBERS.ALL.PAGE_TITLE")),i.toolbar=l,i.attachments=[],i.body=a.instant("EMAIL_MEMBERS.MESSAGE.ALL.DEFAULT"),i.shortCodes=[{id:"{{member-name}}",_name:"SH_CODES.MEMBER_NAME"},{id:"{{first-name}}",_name:"SH_CODES.FIRST_NAME"},{id:"{{last-name}}",_name:"SH_CODES.LAST_NAME"},{id:"{{login}}",_name:"SH_CODES.MEMBER_LOGIN"},{id:"{{company-name}}",_name:"SH_CODES.COMPANY_NAME"}],i.send=function(e){if(!r.pointFirstInvalid("#emailAllMembers")){var t={includeNonMembers:i.includeNonMembers,subject:i.subject,body:i.body,attachments:i.attachments};return f.send(t,e).catch(function(e){return n.error(e,"Failed to email all members.")}).then(function(){n.info(e?a.instant("EMAIL_MEMBERS.TEST_SUCCESS"):a.instant("EMAIL_MEMBERS.SUCCESS")),e||i.form.$setPristine()})}},i.viewRecipients=function(){return f.query(i.includeNonMembers).catch(function(e){return n.error(e,"Failed to query recipients.")}).then(function(e){i.recipients=e,i.recipients.forEach(function(e){e.fullName=r.join([e.firstName,e.lastName]," ")})})}}])},"8/89":function(e,t){e.exports='<ff-panel ngf-drop=$ctrl.attach($files) ngf-multiple=true ngf-drag-over-class=dragover> <ff-panel-header><span translate=ATTACHMENTS.HEADER></span></ff-panel-header> <ff-row ng-repeat="att in $ctrl.attachments" ff-dim=att.$$spin> <ff-static name=attachment><a href="{{att.url || att.$$url}}" target=_blank rel=noopener>{{att.fileName}}</a></ff-static> <ff-btn sense=delete size=xs class=buttons-row ff-click=$ctrl.detach($index) flex=none title="{{\'ATTACHMENTS.BTN_DELETE.HINT\' | translate}}"></ff-btn> </ff-row> <ff-btn-group class=ff-section-buttons> <ff-btn sense=new size=sm ngf-select=$ctrl.attach($files) ngf-multiple=true> <span translate=ATTACHMENTS.BTN_ADD></span> </ff-btn> </ff-btn-group> </ff-panel> '},C0gS:function(e,t){e.exports='<form name=$ctrl.form id=emailAllMembers ng-hide=$ctrl.recipients ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-panel style=max-width:654px> <ff-panel-header><span translate=EMAIL_MEMBERS.OPTIONS.HEADER></span></ff-panel-header> <label> <ff-checkbox ff-model=$ctrl.includeNonMembers> <span translate=EMAIL_MEMBERS.OPTIONS.INCLUDE_NON_MEMBERS></span> </ff-checkbox> </label> </ff-panel> <ff-panel style=max-width:654px> <ff-panel-header><span translate=EMAIL_MEMBERS.MESSAGE.HEADER></span></ff-panel-header> <label class=ff-row> <ff-label flex="0 0 100px"><req translate=EMAIL_MEMBERS.MESSAGE.SUBJECT></req></ff-label> <ff-text ff-model=$ctrl.subject ff-required=true ff-validate-alert="{{\'EMAIL_MEMBERS.MESSAGE.SUBJECT\' | translate}}"></ff-text> </label> <ff-row> <ff-richtext ff-model=$ctrl.body ta-toolbar={{$ctrl.toolbar}} class=ta-email></ff-richtext> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=save ff-click=$ctrl.send(true) title="{{\'EMAIL_MEMBERS.BTN_TEST.HINT\' | translate}}"> <span translate=EMAIL_MEMBERS.BTN_TEST></span> </ff-btn> <ff-btn sense=save ff-click=$ctrl.send() ff-disabled=$ctrl.form.$pristine title="{{\'EMAIL_MEMBERS.BTN_SEND.HINT\' | translate}}"> <span translate=EMAIL_MEMBERS.BTN_SEND></span> </ff-btn> <ff-btn sense=search ff-click=$ctrl.viewRecipients()><span translate=EMAIL_MEMBERS.BTN_VIEW_RECIPIENTS></span></ff-btn> </ff-btn-group> <div class="ff-grid gutter-v gutter-h" style=margin-bottom:0> <div flex="{md: \'0 0 50%\'}" short-codes=$ctrl.shortCodes></div> <div flex="{md: \'0 0 50%\'}" attachments=$ctrl.attachments form=$ctrl.form class=ff-flex-start></div> </div> </div> </form> <div ng-if=$ctrl.recipients> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-btn-group ng-if="$ctrl.recipients.length > 10"> <ff-btn sense=back ff-click="$ctrl.recipients = null"><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> <ff-panel> <ff-panel-header> <span translate=EMAIL_MEMBERS.RECIPIENTS.HEADER translate-values="{ count: $ctrl.recipients.length }"></span> </ff-panel-header> <ff-header ng-show="$ctrl.recipients.length > 0"> <ff-row> <cell><span translate=EMAIL_MEMBERS.RECIPIENTS.COMPANY></span></cell> <cell><span translate=EMAIL_MEMBERS.RECIPIENTS.NAME></span></cell> <cell><span translate=EMAIL_MEMBERS.RECIPIENTS.EMAIL></span></cell> </ff-row> </ff-header> <ff-row ng-repeat="rcpt in $ctrl.recipients"> <ff-static ff-bind=::rcpt.company></ff-static> <ff-static ff-bind=::rcpt.fullName></ff-static> <ff-static><a href=mailto:{{::rcpt.email}} target=_blank rel=noopener ng-bind=::rcpt.email></a></ff-static> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=back ff-click="$ctrl.recipients = null"><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> </div> </div> '},CRxJ:function(e,t){e.exports='<form name=$ctrl.form id=emailSiteMembers ng-hide=$ctrl.recipients ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-panel style=max-width:654px> <ff-panel-header><span translate=EMAIL_MEMBERS.OPTIONS.HEADER></span></ff-panel-header> <div class="ff-grid gutter-v-half"> <div> <ff-row> <label flex=none><ff-include-all flex="0 0 30px" items=$ctrl.membershipCategories default=true></ff-include-all></label> </ff-row> <ff-header> <ff-row> <span flex="0 0 32px" class=ff-center title="{{\'GLOBAL.INCLUDE\' | translate}}"><ff-icon sense=check></ff-icon></span> <cell><span translate=EMAIL_MEMBERS.OPTIONS.MEMBERSHIP></span></cell> </ff-row> </ff-header> <label class=ff-row ng-repeat="membType in $ctrl.membershipCategories"> <ff-static flex="0 0 32px" class=ff-center><ff-checkbox ff-model=membType.include></ff-checkbox></ff-static> <ff-static>{{::membType.name}}</ff-static> </label> </div> <ff-static class=ff-no-frame><ff-static> <label> <ff-checkbox ff-model=$ctrl.checkedInOnly> <span translate=EMAIL_MEMBERS.OPTIONS.ONLY_CHECKED_IN></span> </ff-checkbox> </label> </ff-static></ff-static> </div> </ff-panel> <ff-panel style=max-width:654px> <ff-panel-header><span translate=EMAIL_MEMBERS.MESSAGE.HEADER></span></ff-panel-header> <label class=ff-row> <ff-label flex="0 0 100px"><req translate=EMAIL_MEMBERS.MESSAGE.SUBJECT></req></ff-label> <ff-text ff-model=$ctrl.subject ff-required=true ff-validate-alert="{{\'EMAIL_MEMBERS.MESSAGE.SUBJECT\' | translate}}"></ff-text> </label> <ff-row> <ff-richtext ff-model=$ctrl.body ta-toolbar={{$ctrl.toolbar}} class=ta-email></ff-richtext> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=save ff-click=$ctrl.send(true) title="{{\'EMAIL_MEMBERS.BTN_TEST.HINT\' | translate}}"> <span translate=EMAIL_MEMBERS.BTN_TEST></span> </ff-btn> <ff-btn sense=save ff-click=$ctrl.send() ff-disabled=$ctrl.form.$pristine title="{{\'EMAIL_MEMBERS.BTN_SEND.HINT\' | translate}}"> <span translate=EMAIL_MEMBERS.BTN_SEND></span> </ff-btn> <ff-btn sense=search ff-click=$ctrl.viewRecipients()><span translate=EMAIL_MEMBERS.BTN_VIEW_RECIPIENTS></span></ff-btn> </ff-btn-group> <div class="ff-grid gutter-v gutter-h" style=margin-bottom:0> <div flex="{md: \'0 0 50%\'}" short-codes=$ctrl.shortCodes></div> <div flex="{md: \'0 0 50%\'}" attachments=$ctrl.attachments form=$ctrl.form class=ff-flex-start></div> </div> </div> </form> <div ng-if=$ctrl.recipients> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-btn-group ng-if="$ctrl.recipients.length > 10"> <ff-btn sense=back ff-click="$ctrl.recipients = null"><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> <ff-panel> <ff-panel-header> <span translate=EMAIL_MEMBERS.RECIPIENTS.HEADER translate-values="{ count: $ctrl.recipients.length }"></span> </ff-panel-header> <ff-header ng-show="$ctrl.recipients.length > 0"> <ff-row> <cell><span translate=EMAIL_MEMBERS.RECIPIENTS.COMPANY></span></cell> <cell><span translate=EMAIL_MEMBERS.RECIPIENTS.NAME></span></cell> <cell><span translate=EMAIL_MEMBERS.RECIPIENTS.EMAIL></span></cell> </ff-row> </ff-header> <ff-row ng-repeat="rcpt in $ctrl.recipients"> <ff-static ff-bind=::rcpt.company></ff-static> <ff-static ff-bind=::rcpt.fullName></ff-static> <ff-static><a href=mailto:{{::rcpt.email}} target=_blank rel=noopener ng-bind=::rcpt.email></a></ff-static> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=back ff-click="$ctrl.recipients = null"><span translate=GLOBAL.BTN_BACK></span></ff-btn> </ff-btn-group> </div> </div> '},CZgw:function(e,t,a){"use strict";a.r(t);a("t91x");var n=["$injector",function(e){var t,n=(t=a("XDdL")).keys().map(t);e.loadNewModules(n.map(function(e){return e.default.name})),e.invoke(["$templateCache",function(e){var t=a("gZPn");t.keys().forEach(function(a){return e.put(a.replace(/^\.\//,""),t(a))})}])}];t.default=n},GPfp:function(e,t,a){"use strict";var n=a("8/89"),s=a.n(n);angular.module("deskworks.attachments",["deskworks.getAttachments.service"]).directive("attachments",function(){return{template:s.a,restrict:"EAC",scope:!0,controller:"AttachmentsCtrl as $ctrl",bindToController:{attachments:"=",form:"<?",attacher:"<?",detacher:"<?"}}}).controller("AttachmentsCtrl",["$window","dwAlerts","getAttachments",function(e,t,a){var n=this;n.attach=function(s){return a(s).then(function(a){n.attachments=n.attachments.concat(a),n.attacher?a.forEach(function(e,a){e.$$spin=!0,n.attacher(e).then(function(t){e.$$spin=!1,e.id=t.id,e.url=t.url,delete e.fileData}).catch(function(a){return n.attachments.splice(n.attachments.indexOf(e),1),t.error(a,"Failed to attach file.")})}):(a.forEach(function(t,a){t.$$url=e.URL.createObjectURL(s[a])}),n.form&&n.form.$setDirty())})},n.detach=function(a){if(n.detacher){var s=n.attachments[a];return n.detacher(s).then(function(){n.attachments.splice(n.attachments.indexOf(s),1)}).catch(function(e){return t.error(e,"Failed to detach file.")})}e.URL.revokeObjectURL(n.attachments[a].$$url),n.attachments.splice(a,1),n.form&&n.form.$setDirty()},n.$onDestroy=function(){n.attachments.forEach(function(t){return e.URL.revokeObjectURL(t.$$url)})}}])},GwHj:function(e,t){e.exports='<div class=message-board ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <ff-panel class=ff-bmargin> <ff-col class=msg-sticky> <ff-header class=msg-post-header> <span translate=MESSAGE_BOARD.POST_MESSAGE.HEADER ng-if=!$ctrl.message.id></span> <span ng-if=$ctrl.message.id> <span translate=MESSAGE_BOARD.EDIT_MESSAGE.HEADER></span> <strong>{{$ctrl.message.author.fullName || \'anonymous\'}}</strong> at <span nice-time=$ctrl.message.createdAt></span> on <span>{{$ctrl.message.createdAt | date: \'mediumDate\'}}</span> </span> </ff-header> <form name=$ctrl.form class="ff-row msg-post"> <ff-textarea name=text ff-model=$ctrl.message.text placeholder="{{\'MESSAGE_BOARD.POST_MESSAGE.PLACEHOLDER\' | translate}}" counter={{$ctrl.message.text.length}}/{{::$ctrl.messageMaxLength}} ng-keypress=$ctrl.keypress($event)></ff-textarea> <div ff-dim=$ctrl.posting class=msg-buttons> <ff-btn type=submit sense=ok size=xs ff-click=$ctrl.post() title="{{\'MESSAGE_BOARD.POST_MESSAGE.BTN_POST\' | translate}}" ff-disabled=!$ctrl.message.text></ff-btn> <ff-btn sense=cancel size=xs title="{{\'GLOBAL.BTN_CANCEL\' | translate}}" ff-click="$ctrl.message = {}" ng-if=$ctrl.message.id></ff-btn> </div> </form> <ff-header class=msg-messages-header translate=MESSAGE_BOARD.MESSAGES.HEADER></ff-header> </ff-col> <div class=msg-scroller infinite-scroll=$ctrl.fetch() infinite-scroll-distance=2 infinite-scroll-container="\'.snap-content-scroller\'"> <ff-row ng-repeat="msg in $ctrl.messages" class="msg-container animate-collapse" ng-class="{ active: msg.id === $ctrl.message.id }"> <div class=msg-ava><ff-img ff-src={{::msg.author.photo}}></ff-img></div> <div> <div> <div class=msg-meta> <span class=msg-name>{{::msg.author.fullName || \'anonymous\'}}</span> <span class=msg-time nice-time=::msg.createdAt></span> <span class=msg-date>{{::msg.createdAt | date: \'mediumDate\'}}</span> </div> <div class=msg-body>{{msg.text}}</div> </div> </div> <ff-btn-group class=floating-toolbar ng-if=::state.isLoggedAdmin()> <ff-row> <ff-btn sense=edit size=xs class=ff-btn-icon ff-click=$ctrl.edit(msg) title="{{\'GLOBAL.BTN_EDIT\' | translate}}"></ff-btn> <ff-btn sense=delete size=xs class=ff-btn-icon ff-click=$ctrl.delete(msg) title="{{\'GLOBAL.BTN_DELETE\' | translate}}"></ff-btn> </ff-row> </ff-btn-group> </ff-row> <div class="ff-spin ff-spin-placeholder" ng-if=$ctrl.fetching></div> </div> <ff-label ng-if="!$ctrl.messages.length && !$ctrl.fetching" class=ff-no-frame> <span translate=GLOBAL.NONE></span> </ff-label> </ff-panel> </div> '},LIyd:function(e,t,a){"use strict";a.r(t);a("aJ1N");t.default=angular.module("deskworks.SplashPageCtrl",["ffRichtext","deskworks.SplashPage","deskworks.taToolbarEmail"]).controller("SplashPageCtrl",["$scope","$translate","$timeout","dwAlerts","state","helper","center","splashPage","SplashPage","taToolbarEmail",function(e,t,a,n,s,r,f,l,i,c){var o=this;s.setPageTitle(t.instant("SPLASH_PAGE.PAGE_TITLE",{centerName:f.name})),o.sp=l,o.toolbar=c,a(function(){angular.element(document.querySelectorAll("#splashPage ff-richtext .ta-toolbar")).after('<header class="header ta-fake-header" role="banner"><a href="javascript:void(0)" target="_blank"></a></header>')}),o.save=function(){if(!r.pointFirstInvalid("#splashPage"))return i.save(s.getCurrentCenterId(),o.sp).catch(function(e){return n.error(e,"Failed to save splash page settings.")}).then(function(){o.form.$setPristine()})}}])},NhWh:function(e,t,a){"use strict";a("z6HB");var n=a("/l8F"),s=a.n(n);angular.module("deskworks.shortCodes",[]).directive("shortCodes",function(){return{template:s.a,restrict:"EAC",scope:!0,controller:"ShortCodesCtrl as $ctrl",bindToController:{shortCodes:"<"}}}).controller("ShortCodesCtrl",function(){})},PVke:function(e,t,a){},XDdL:function(e,t,a){var n={"./email-all-members/email-all-members.controller.js":"7GGv","./email-site-members/email-site-members.controller.js":"lT5k","./message-board/message-board.controller.js":"Xwkr","./splash-page/splash-page.controller.js":"LIyd"};function s(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=r,e.exports=s,s.id="XDdL"},Xwkr:function(e,t,a){"use strict";a.r(t);a("DbwS"),a("t91x"),a("2UZ+"),a("it7j"),a("PVke");t.default=angular.module("deskworks.MessageBoardCtrl",["NATS","infinite-scroll","deskworks.MessageBoard"]).controller("MessageBoardCtrl",["$scope","$translate","$window","$timeout","dwAlerts","state","helper","MessageBoard","NATS",function(e,t,a,n,s,r,f,l,i){var c=this;r.setPageTitle(t.instant("MESSAGE_BOARD.PAGE_TITLE")),c.messageMaxLength=1e3,c.message={},c.messages=[],c.params={centerId:r.getCurrentCenterId(),offset:0,limit:100};var o=[];function d(e){e=l.deserialize(e);var t=f.find(c.messages,e.id);if(t)return angular.extend(t,e);c.messages.unshift(e)}function m(e){var t=f.find(c.messages,e.id);if(t)return angular.extend(t,e)}function p(e){var t=f.findIndex(c.messages,e.id);t>=0&&c.messages.splice(t,1)}n(function(){c.nats=i.connect(),c.nats.on("error",function(e){console.warn("NATS error:",e)}),e.$on("$destroy",function(){o.forEach(function(e){c.nats.unsubscribe(e)}),c.nats.close()}),f.focus(".message-board .msg-post textarea")}),c.fetch=function(){if(c.eof||c.fetching)return c.fetching;c.fetching=l.query(c.params).catch(function(e){return s.error(e,"Failed to query messages.")}).finally(function(){c.fetching=null}).then(function(e){c.messages=c.messages.concat(e),c.params.offset=c.messages.length,c.eof=e.length<c.params.limit,o.length||(o.push(c.nats.subscribe("API.:siteId.centers.:centerId.message-board.messages.create",d)),o.push(c.nats.subscribe("API.:siteId.centers.:centerId.message-board.messages.update",m)),o.push(c.nats.subscribe("API.:siteId.centers.:centerId.message-board.messages.delete",p)))})},c.post=function(){!c.posting&&c.message.text&&(c.message.centerId=c.message.centerId||r.getCurrentCenterId(),c.posting=!0,l.save(c.message).catch(function(e){return s.error(e,"Failed to save message.")}).then(function(){c.message={}}).finally(function(){c.posting=!1}))},c.keypress=function(e){13!==e.which||e.shiftKey||(e.preventDefault(),c.post())},c.edit=function(e){c.message=angular.copy(e),f.focus(".msg-post textarea")},c.delete=function(e){if(a.confirm(t.instant("MESSAGE_BOARD.MESSAGES.CONFIRM_DELETE")))return c.message.id===e.id&&(c.message={}),l.delete(e.id).catch(function(e){return s.error(e,"Failed to delete message.")})}}])},aJ1N:function(e,t,a){"use strict";a("T7M0"),a("0rqx");angular.module("ffRichtext",["textAngular"]).directive("ffRichtext",["ffHelper",function(e){return{restrict:"E",scope:!0,compile:function(t,a){var n=angular.element("<text-angular></text-angular>");return e.copyInnerAttrs(t,a,n),t.append(n),this.link},link:function(e,t,a){var n=angular.element(t[0].querySelector("[contenteditable]"));e.$watch("ffBlock.editMode",function(e){angular.isUndefined(e)||(t.toggleClass("ff-read-only",!e),n.attr("contenteditable",e))})}}}])},gZPn:function(e,t,a){var n={"./email-all-members/email-all-members.tpl.html":"C0gS","./email-site-members/email-site-members.tpl.html":"CRxJ","./message-board/message-board.tpl.html":"GwHj","./splash-page/splash-page.tpl.html":"h8Oe"};function s(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=r,e.exports=s,s.id="gZPn"},h8Oe:function(e,t){e.exports='<form name=$ctrl.form id=splashPage ff-bulk-read-only> <h4 class=page-title ng-bind=state.getPageTitle()></h4> <div class=gutter-v> <ff-panel style=max-width:654px> <ff-row style=margin-bottom:1rem> <label flex=none> <ff-checkbox name=enabled ff-model=$ctrl.sp.enabled> <span translate=SPLASH_PAGE.ENABLED></span> </ff-checkbox> </label> <ff-hint flex="0 0 15px" style=align-self:center;margin-left:auto> <span translate=SPLASH_PAGE.HINT></span> </ff-hint> </ff-row> <ff-row> <ff-richtext ff-model=$ctrl.sp.body ta-toolbar={{$ctrl.toolbar}} class=ta-html></ff-richtext> </ff-row> </ff-panel> <ff-btn-group> <ff-btn sense=save ff-click=$ctrl.save() ff-disabled=$ctrl.form.$pristine> <span translate=GLOBAL.BTN_SAVE></span> </ff-btn> </ff-btn-group> </div> </form> '},lT5k:function(e,t,a){"use strict";a.r(t);a("aJ1N"),a("NhWh"),a("GPfp");t.default=angular.module("deskworks.communications.emailSiteMembers",["ffRichtext","deskworks.emailSiteMembers.service","deskworks.getAttachments.service","deskworks.taToolbarEmail","deskworks.shortCodes","deskworks.attachments"]).controller("EmailSiteMembersCtrl",["$scope","$templateCache","$translate","dwAlerts","state","helper","emailSiteMembers","membershipCategories","center","getAttachments","taToolbarEmail",function(e,t,a,n,s,r,f,l,i,c,o){var d=this;s.setPageTitle(a.instant("EMAIL_MEMBERS.SITE.PAGE_TITLE",{centerName:i.name})),d.toolbar=o,d.membershipCategories=l,d.membershipCategory=d.membershipCategories[0],d.attachments=[],d.body=a.instant("EMAIL_MEMBERS.MESSAGE.SITE.DEFAULT"),d.shortCodes=[{id:"{{center-name}}",_name:"SH_CODES.CENTER_NAME"},{id:"{{member-name}}",_name:"SH_CODES.MEMBER_NAME"},{id:"{{first-name}}",_name:"SH_CODES.FIRST_NAME"},{id:"{{last-name}}",_name:"SH_CODES.LAST_NAME"},{id:"{{login}}",_name:"SH_CODES.MEMBER_LOGIN"},{id:"{{company-name}}",_name:"SH_CODES.COMPANY_NAME"}],d.send=function(e){if(!r.pointFirstInvalid("#emailSiteMembers")){var t={membershipTypeIds:d.getSelectedMembershipIds(),subject:d.subject,body:d.body,attachments:d.attachments,checkedInOnly:d.checkedInOnly};return f.send(s.getCurrentCenterId(),t,e).catch(function(e){return n.error(e,"Failed to email site members.")}).then(function(){n.info(e?a.instant("EMAIL_MEMBERS.TEST_SUCCESS"):a.instant("EMAIL_MEMBERS.SUCCESS")),e||d.form.$setPristine()})}},d.viewRecipients=function(){return f.query(s.getCurrentCenterId(),d.getSelectedMembershipIds(),d.checkedInOnly).catch(function(e){return n.error(e,"Failed to query recipients.")}).then(function(e){d.recipients=e,d.recipients.forEach(function(e){e.fullName=r.join([e.firstName,e.lastName]," ")})})},d.getSelectedMembershipIds=function(){return d.membershipCategories.filter(function(e){return e.include}).map(function(e){return e.id})}}])},z6HB:function(e,t,a){}}]);