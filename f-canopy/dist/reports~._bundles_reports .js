(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["reports~._bundles_reports "],{

/***/ "./bundles/reports sync recursive .*\\.tpl\\.html$":
/*!*********************************************!*\
  !*** ./bundles/reports sync .*\.tpl\.html$ ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./accounts-receivable-report/accounts-receivable-report.tpl.html": "./bundles/reports/accounts-receivable-report/accounts-receivable-report.tpl.html",
	"./availability-report/availability-report.tpl.html": "./bundles/reports/availability-report/availability-report.tpl.html",
	"./check-in-report/check-in-report.tpl.html": "./bundles/reports/check-in-report/check-in-report.tpl.html",
	"./credit-balance-report/credit-balance-report.tpl.html": "./bundles/reports/credit-balance-report/credit-balance-report.tpl.html",
	"./deposit-and-tax-report/deposit-and-tax-report.tpl.html": "./bundles/reports/deposit-and-tax-report/deposit-and-tax-report.tpl.html",
	"./deposit-transaction-report/deposit-transaction-report.tpl.html": "./bundles/reports/deposit-transaction-report/deposit-transaction-report.tpl.html",
	"./directives/report-columns.tpl.html": "./bundles/reports/directives/report-columns.tpl.html",
	"./directives/report-dates.tpl.html": "./bundles/reports/directives/report-dates.tpl.html",
	"./directives/report-order-by.tpl.html": "./bundles/reports/directives/report-order-by.tpl.html",
	"./directives/report-owner-region.tpl.html": "./bundles/reports/directives/report-owner-region.tpl.html",
	"./income-by-item-report/income-by-item-report.tpl.html": "./bundles/reports/income-by-item-report/income-by-item-report.tpl.html",
	"./income-report/income-report.tpl.html": "./bundles/reports/income-report/income-report.tpl.html",
	"./mailbox-report/mailbox-report.tpl.html": "./bundles/reports/mailbox-report/mailbox-report.tpl.html",
	"./member-statement/member-statement.tpl.html": "./bundles/reports/member-statement/member-statement.tpl.html",
	"./member-usage-report/member-usage-report.tpl.html": "./bundles/reports/member-usage-report/member-usage-report.tpl.html",
	"./membership-report/membership-report.tpl.html": "./bundles/reports/membership-report/membership-report.tpl.html",
	"./pass-usage-report/pass-usage-report.tpl.html": "./bundles/reports/pass-usage-report/pass-usage-report.tpl.html",
	"./passport-reservation-usage-report/passport-reservation-usage-report.tpl.html": "./bundles/reports/passport-reservation-usage-report/passport-reservation-usage-report.tpl.html",
	"./payment-reconciliation-report/payment-reconciliation-report.tpl.html": "./bundles/reports/payment-reconciliation-report/payment-reconciliation-report.tpl.html",
	"./price-list-report/price-list-report.tpl.html": "./bundles/reports/price-list-report/price-list-report.tpl.html",
	"./product-report/product-report.tpl.html": "./bundles/reports/product-report/product-report.tpl.html",
	"./recurring-billing-change-report/recurring-billing-change-report.tpl.html": "./bundles/reports/recurring-billing-change-report/recurring-billing-change-report.tpl.html",
	"./recurring-billing-churn-report/recurring-billing-churn-report.tpl.html": "./bundles/reports/recurring-billing-churn-report/recurring-billing-churn-report.tpl.html",
	"./recurring-billing-report/recurring-billing-report.tpl.html": "./bundles/reports/recurring-billing-report/recurring-billing-report.tpl.html",
	"./rent-roll-report/rent-roll-report.tpl.html": "./bundles/reports/rent-roll-report/rent-roll-report.tpl.html",
	"./reservation-report/reservation-report.tpl.html": "./bundles/reports/reservation-report/reservation-report.tpl.html",
	"./reservation-usage-report/reservation-usage-report.tpl.html": "./bundles/reports/reservation-usage-report/reservation-usage-report.tpl.html",
	"./reservation-utilization-report/reservation-utilization-report.tpl.html": "./bundles/reports/reservation-utilization-report/reservation-utilization-report.tpl.html",
	"./revenue-forecast-report/revenue-forecast-report.tpl.html": "./bundles/reports/revenue-forecast-report/revenue-forecast-report.tpl.html",
	"./security-deposit-report/security-deposit-report.tpl.html": "./bundles/reports/security-deposit-report/security-deposit-report.tpl.html",
	"./write-off-report/write-off-report.tpl.html": "./bundles/reports/write-off-report/write-off-report.tpl.html"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./bundles/reports sync recursive .*\\.tpl\\.html$";

/***/ }),

/***/ "./bundles/reports sync recursive \\..+\\/.+\\.js$":
/*!********************************************!*\
  !*** ./bundles/reports sync \..+\/.+\.js$ ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./accounts-receivable-report/accounts-receivable-report-columns.service.js": "./bundles/reports/accounts-receivable-report/accounts-receivable-report-columns.service.js",
	"./accounts-receivable-report/accounts-receivable-report.controller.js": "./bundles/reports/accounts-receivable-report/accounts-receivable-report.controller.js",
	"./accounts-receivable-report/accounts-receivable-report.service.js": "./bundles/reports/accounts-receivable-report/accounts-receivable-report.service.js",
	"./availability-report/availability-report-columns.service.js": "./bundles/reports/availability-report/availability-report-columns.service.js",
	"./availability-report/availability-report.controller.js": "./bundles/reports/availability-report/availability-report.controller.js",
	"./availability-report/availability-report.service.js": "./bundles/reports/availability-report/availability-report.service.js",
	"./check-in-report/check-in-report-bar-chart.service.js": "./bundles/reports/check-in-report/check-in-report-bar-chart.service.js",
	"./check-in-report/check-in-report-columns.service.js": "./bundles/reports/check-in-report/check-in-report-columns.service.js",
	"./check-in-report/check-in-report-totals-columns.service.js": "./bundles/reports/check-in-report/check-in-report-totals-columns.service.js",
	"./check-in-report/check-in-report.controller.js": "./bundles/reports/check-in-report/check-in-report.controller.js",
	"./check-in-report/check-in-report.service.js": "./bundles/reports/check-in-report/check-in-report.service.js",
	"./credit-balance-report/credit-balance-report-columns.service.js": "./bundles/reports/credit-balance-report/credit-balance-report-columns.service.js",
	"./credit-balance-report/credit-balance-report.controller.js": "./bundles/reports/credit-balance-report/credit-balance-report.controller.js",
	"./credit-balance-report/credit-balance-report.service.js": "./bundles/reports/credit-balance-report/credit-balance-report.service.js",
	"./deposit-and-tax-report/deposit-and-tax-report-columns.service.js": "./bundles/reports/deposit-and-tax-report/deposit-and-tax-report-columns.service.js",
	"./deposit-and-tax-report/deposit-and-tax-report.controller.js": "./bundles/reports/deposit-and-tax-report/deposit-and-tax-report.controller.js",
	"./deposit-and-tax-report/deposit-and-tax-report.service.js": "./bundles/reports/deposit-and-tax-report/deposit-and-tax-report.service.js",
	"./deposit-transaction-report/deposit-transaction-report-columns.service.js": "./bundles/reports/deposit-transaction-report/deposit-transaction-report-columns.service.js",
	"./deposit-transaction-report/deposit-transaction-report.controller.js": "./bundles/reports/deposit-transaction-report/deposit-transaction-report.controller.js",
	"./deposit-transaction-report/deposit-transaction-report.service.js": "./bundles/reports/deposit-transaction-report/deposit-transaction-report.service.js",
	"./directives/report-columns.directive.js": "./bundles/reports/directives/report-columns.directive.js",
	"./directives/report-dates.directive.js": "./bundles/reports/directives/report-dates.directive.js",
	"./directives/report-order-by.directive.js": "./bundles/reports/directives/report-order-by.directive.js",
	"./directives/report-owner-region.directive.js": "./bundles/reports/directives/report-owner-region.directive.js",
	"./income-by-item-report/income-by-item-report-chart.service.js": "./bundles/reports/income-by-item-report/income-by-item-report-chart.service.js",
	"./income-by-item-report/income-by-item-report-columns.service.js": "./bundles/reports/income-by-item-report/income-by-item-report-columns.service.js",
	"./income-by-item-report/income-by-item-report-data.service.js": "./bundles/reports/income-by-item-report/income-by-item-report-data.service.js",
	"./income-by-item-report/income-by-item-report.controller.js": "./bundles/reports/income-by-item-report/income-by-item-report.controller.js",
	"./income-by-item-report/income-by-member-report-columns.service.js": "./bundles/reports/income-by-item-report/income-by-member-report-columns.service.js",
	"./income-by-item-report/income-by-member-report-data.service.js": "./bundles/reports/income-by-item-report/income-by-member-report-data.service.js",
	"./income-by-item-report/income-by-order-report-columns.service.js": "./bundles/reports/income-by-item-report/income-by-order-report-columns.service.js",
	"./income-by-item-report/income-by-order-report-data.service.js": "./bundles/reports/income-by-item-report/income-by-order-report-data.service.js",
	"./income-report/income-report-columns.service.js": "./bundles/reports/income-report/income-report-columns.service.js",
	"./income-report/income-report.controller.js": "./bundles/reports/income-report/income-report.controller.js",
	"./income-report/income-report.service.js": "./bundles/reports/income-report/income-report.service.js",
	"./mailbox-report/mailbox-report-columns.service.js": "./bundles/reports/mailbox-report/mailbox-report-columns.service.js",
	"./mailbox-report/mailbox-report.controller.js": "./bundles/reports/mailbox-report/mailbox-report.controller.js",
	"./mailbox-report/mailbox-report.service.js": "./bundles/reports/mailbox-report/mailbox-report.service.js",
	"./member-statement/member-statement-columns.service.js": "./bundles/reports/member-statement/member-statement-columns.service.js",
	"./member-statement/member-statement.controller.js": "./bundles/reports/member-statement/member-statement.controller.js",
	"./member-statement/member-statement.service.js": "./bundles/reports/member-statement/member-statement.service.js",
	"./member-usage-report/member-usage-report-columns.service.js": "./bundles/reports/member-usage-report/member-usage-report-columns.service.js",
	"./member-usage-report/member-usage-report.controller.js": "./bundles/reports/member-usage-report/member-usage-report.controller.js",
	"./member-usage-report/member-usage-report.service.js": "./bundles/reports/member-usage-report/member-usage-report.service.js",
	"./membership-report/membership-report-columns.service.js": "./bundles/reports/membership-report/membership-report-columns.service.js",
	"./membership-report/membership-report.controller.js": "./bundles/reports/membership-report/membership-report.controller.js",
	"./membership-report/membership-report.service.js": "./bundles/reports/membership-report/membership-report.service.js",
	"./pass-usage-report/pass-usage-report-columns.service.js": "./bundles/reports/pass-usage-report/pass-usage-report-columns.service.js",
	"./pass-usage-report/pass-usage-report.controller.js": "./bundles/reports/pass-usage-report/pass-usage-report.controller.js",
	"./pass-usage-report/pass-usage-report.service.js": "./bundles/reports/pass-usage-report/pass-usage-report.service.js",
	"./passport-reservation-usage-report/passport-reservation-usage-report-columns.service.js": "./bundles/reports/passport-reservation-usage-report/passport-reservation-usage-report-columns.service.js",
	"./passport-reservation-usage-report/passport-reservation-usage-report.controller.js": "./bundles/reports/passport-reservation-usage-report/passport-reservation-usage-report.controller.js",
	"./passport-reservation-usage-report/passport-reservation-usage-report.service.js": "./bundles/reports/passport-reservation-usage-report/passport-reservation-usage-report.service.js",
	"./payment-reconciliation-report/payment-reconciliation-report-columns.service.js": "./bundles/reports/payment-reconciliation-report/payment-reconciliation-report-columns.service.js",
	"./payment-reconciliation-report/payment-reconciliation-report.controller.js": "./bundles/reports/payment-reconciliation-report/payment-reconciliation-report.controller.js",
	"./payment-reconciliation-report/payment-reconciliation-report.service.js": "./bundles/reports/payment-reconciliation-report/payment-reconciliation-report.service.js",
	"./price-list-report/price-list-report-columns.service.js": "./bundles/reports/price-list-report/price-list-report-columns.service.js",
	"./price-list-report/price-list-report.controller.js": "./bundles/reports/price-list-report/price-list-report.controller.js",
	"./price-list-report/price-list-report.service.js": "./bundles/reports/price-list-report/price-list-report.service.js",
	"./product-report/product-report-columns.service.js": "./bundles/reports/product-report/product-report-columns.service.js",
	"./product-report/product-report-data.service.js": "./bundles/reports/product-report/product-report-data.service.js",
	"./product-report/product-report.controller.js": "./bundles/reports/product-report/product-report.controller.js",
	"./product-report/product-report.service.js": "./bundles/reports/product-report/product-report.service.js",
	"./recurring-billing-change-report/opts-rbc-report-by-period.service.js": "./bundles/reports/recurring-billing-change-report/opts-rbc-report-by-period.service.js",
	"./recurring-billing-change-report/recurring-billing-change-chart.service.js": "./bundles/reports/recurring-billing-change-report/recurring-billing-change-chart.service.js",
	"./recurring-billing-change-report/recurring-billing-change-data.service.js": "./bundles/reports/recurring-billing-change-report/recurring-billing-change-data.service.js",
	"./recurring-billing-change-report/recurring-billing-change-report-columns.service.js": "./bundles/reports/recurring-billing-change-report/recurring-billing-change-report-columns.service.js",
	"./recurring-billing-change-report/recurring-billing-change-report.controller.js": "./bundles/reports/recurring-billing-change-report/recurring-billing-change-report.controller.js",
	"./recurring-billing-change-report/recurring-billing-change-report.service.js": "./bundles/reports/recurring-billing-change-report/recurring-billing-change-report.service.js",
	"./recurring-billing-churn-report/recurring-billing-churn-report-columns.service.js": "./bundles/reports/recurring-billing-churn-report/recurring-billing-churn-report-columns.service.js",
	"./recurring-billing-churn-report/recurring-billing-churn-report.controller.js": "./bundles/reports/recurring-billing-churn-report/recurring-billing-churn-report.controller.js",
	"./recurring-billing-churn-report/recurring-billing-churn-report.service.js": "./bundles/reports/recurring-billing-churn-report/recurring-billing-churn-report.service.js",
	"./recurring-billing-report/recurring-billing-report-columns.service.js": "./bundles/reports/recurring-billing-report/recurring-billing-report-columns.service.js",
	"./recurring-billing-report/recurring-billing-report.controller.js": "./bundles/reports/recurring-billing-report/recurring-billing-report.controller.js",
	"./recurring-billing-report/recurring-billing-report.service.js": "./bundles/reports/recurring-billing-report/recurring-billing-report.service.js",
	"./rent-roll-report/rent-roll-report-columns.service.js": "./bundles/reports/rent-roll-report/rent-roll-report-columns.service.js",
	"./rent-roll-report/rent-roll-report.controller.js": "./bundles/reports/rent-roll-report/rent-roll-report.controller.js",
	"./rent-roll-report/rent-roll-report.service.js": "./bundles/reports/rent-roll-report/rent-roll-report.service.js",
	"./reservation-report/reservation-report-columns.service.js": "./bundles/reports/reservation-report/reservation-report-columns.service.js",
	"./reservation-report/reservation-report.controller.js": "./bundles/reports/reservation-report/reservation-report.controller.js",
	"./reservation-report/reservation-report.service.js": "./bundles/reports/reservation-report/reservation-report.service.js",
	"./reservation-usage-report/reservation-usage-report-columns.service.js": "./bundles/reports/reservation-usage-report/reservation-usage-report-columns.service.js",
	"./reservation-usage-report/reservation-usage-report.controller.js": "./bundles/reports/reservation-usage-report/reservation-usage-report.controller.js",
	"./reservation-usage-report/reservation-usage-report.service.js": "./bundles/reports/reservation-usage-report/reservation-usage-report.service.js",
	"./reservation-utilization-report/reservation-utilization-actual-expected-aggregate.service.js": "./bundles/reports/reservation-utilization-report/reservation-utilization-actual-expected-aggregate.service.js",
	"./reservation-utilization-report/reservation-utilization-actual-expected-chart.service.js": "./bundles/reports/reservation-utilization-report/reservation-utilization-actual-expected-chart.service.js",
	"./reservation-utilization-report/reservation-utilization-actual-expected-columns.service.js": "./bundles/reports/reservation-utilization-report/reservation-utilization-actual-expected-columns.service.js",
	"./reservation-utilization-report/reservation-utilization-actual-expected-report.service.js": "./bundles/reports/reservation-utilization-report/reservation-utilization-actual-expected-report.service.js",
	"./reservation-utilization-report/reservation-utilization-detailed-actual-aggregate.service.js": "./bundles/reports/reservation-utilization-report/reservation-utilization-detailed-actual-aggregate.service.js",
	"./reservation-utilization-report/reservation-utilization-detailed-actual-chart.service.js": "./bundles/reports/reservation-utilization-report/reservation-utilization-detailed-actual-chart.service.js",
	"./reservation-utilization-report/reservation-utilization-detailed-actual-columns.service.js": "./bundles/reports/reservation-utilization-report/reservation-utilization-detailed-actual-columns.service.js",
	"./reservation-utilization-report/reservation-utilization-detailed-actual-report.service.js": "./bundles/reports/reservation-utilization-report/reservation-utilization-detailed-actual-report.service.js",
	"./reservation-utilization-report/reservation-utilization-report.controller.js": "./bundles/reports/reservation-utilization-report/reservation-utilization-report.controller.js",
	"./reservation-utilization-report/reservation-utilization-report.service.js": "./bundles/reports/reservation-utilization-report/reservation-utilization-report.service.js",
	"./revenue-forecast-report/revenue-forecast-chart.service.js": "./bundles/reports/revenue-forecast-report/revenue-forecast-chart.service.js",
	"./revenue-forecast-report/revenue-forecast-data.service.js": "./bundles/reports/revenue-forecast-report/revenue-forecast-data.service.js",
	"./revenue-forecast-report/revenue-forecast-report-columns.service.js": "./bundles/reports/revenue-forecast-report/revenue-forecast-report-columns.service.js",
	"./revenue-forecast-report/revenue-forecast-report.controller.js": "./bundles/reports/revenue-forecast-report/revenue-forecast-report.controller.js",
	"./revenue-forecast-report/revenue-forecast-report.service.js": "./bundles/reports/revenue-forecast-report/revenue-forecast-report.service.js",
	"./security-deposit-report/security-deposit-report-columns.service.js": "./bundles/reports/security-deposit-report/security-deposit-report-columns.service.js",
	"./security-deposit-report/security-deposit-report.controller.js": "./bundles/reports/security-deposit-report/security-deposit-report.controller.js",
	"./security-deposit-report/security-deposit-report.service.js": "./bundles/reports/security-deposit-report/security-deposit-report.service.js",
	"./services/b64.service.js": "./bundles/reports/services/b64.service.js",
	"./services/report-builder.service.js": "./bundles/reports/services/report-builder.service.js",
	"./services/report-group-by.service.js": "./bundles/reports/services/report-group-by.service.js",
	"./write-off-report/write-off-report-columns.service.js": "./bundles/reports/write-off-report/write-off-report-columns.service.js",
	"./write-off-report/write-off-report.controller.js": "./bundles/reports/write-off-report/write-off-report.controller.js",
	"./write-off-report/write-off-report.service.js": "./bundles/reports/write-off-report/write-off-report.service.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./bundles/reports sync recursive \\..+\\/.+\\.js$";

/***/ }),

/***/ "./bundles/reports/accounts-receivable-report/accounts-receivable-report-columns.service.js":
/*!**************************************************************************************************!*\
  !*** ./bundles/reports/accounts-receivable-report/accounts-receivable-report-columns.service.js ***!
  \**************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);


/**
 * Columns for Accounts Receivable Report
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.accountsReceivableReportColumns', []).factory('accountsReceivableReportColumns', ["$rootScope", "$filter", "$translate", function ($rootScope, $filter, $translate) {
  var cols = [{
    dataKey: 'userCompany',
    _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.COMPANY',
    include: true,
    styles: {
      minCellWidth: 130
    }
  }, {
    dataKey: 'userName',
    _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.USER_NAME',
    include: true,
    styles: {
      minCellWidth: 120
    }
  }, {
    dataKey: 'date',
    _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.BILL_DATE',
    include: true,
    defaultOrder: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('date')(v, 'mediumDate');
    },
    csv: function csv(v) {
      return $filter('date')(v, 'shortDate');
    }
  }, {
    dataKey: 'amount',
    _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.AMOUNT',
    include: true,
    styles: {
      minCellWidth: 60,
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('ncurrency')(v);
    },
    csv: function csv(v) {
      return $filter('ncurrency')(v);
    }
  }, {
    dataKey: 'dateDue',
    _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.DUE_DATE',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('date')(v, 'mediumDate');
    },
    csv: function csv(v) {
      return $filter('date')(v, 'shortDate');
    }
  }, {
    dataKey: 'amountDue',
    _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.AMOUNT_DUE',
    include: true,
    styles: {
      minCellWidth: 65,
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('ncurrency')(v);
    },
    csv: function csv(v) {
      return $filter('ncurrency')(v);
    }
  }, {
    dataKey: 'daysLate',
    _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.DAYS_LATE',
    include: true,
    styles: {
      halign: 'right'
    }
  }, {
    dataKey: 'comment',
    _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.COMMENT',
    include: true,
    styles: {
      minCellWidth: 120
    }
  }, {
    dataKey: 'orderId',
    _title: 'ACCOUNTS_RECEIVABLE_REPORT.COLUMNS.ORDER_ID',
    include: false,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    }
  }];
  translate();
  $rootScope.$on('$setTranslationsSuccess', translate);

  function translate() {
    cols.forEach(function (col) {
      col.title = $translate.instant(col._title);
    });
  }

  return cols;
}]));

/***/ }),

/***/ "./bundles/reports/accounts-receivable-report/accounts-receivable-report.controller.js":
/*!*********************************************************************************************!*\
  !*** ./bundles/reports/accounts-receivable-report/accounts-receivable-report.controller.js ***!
  \*********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/sort */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/sort.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find-index */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find-index.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "../node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.string.search.js */ "../node_modules/core-js/modules/es.string.search.js");
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "../node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! shared/reports/directives/pdf-preview.directive */ "./shared/reports/directives/pdf-preview.directive.js");
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! shared/reports/services/report-styles.service */ "./shared/reports/services/report-styles.service.js");
/* harmony import */ var shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! shared/reports/directives/report-options.directive */ "./shared/reports/directives/report-options.directive.js");











/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.accountsReceivableReport', [shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_7__["default"].name, shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_8__["default"].name, shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_9__["default"].name, shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_10__["default"].name, 'deskworks.state', 'deskworks.reports.ReportBuilder', 'deskworks.reports.reportDates', 'deskworks.reports.reportOwnerRegion', 'deskworks.reports.accountsReceivableReport.service', 'deskworks.reports.accountsReceivableReportColumns']).controller('AccountsReceivableReportCtrl', ["$scope", "$timeout", "$filter", "$translate", "$location", "state", "helper", "reportStyles", "ReportBuilder", "reportHelper", "AccountsReceivableReport", "accountsReceivableReportColumns", function ($scope, $timeout, $filter, $translate, $location, state, helper, reportStyles, ReportBuilder, reportHelper, AccountsReceivableReport, accountsReceivableReportColumns) {
  var vm = this;
  vm.config = {
    reportName: $translate.instant('ACCOUNTS_RECEIVABLE_REPORT.REPORT_NAME'),
    reportOptions: {},
    reportOwnerRegion: {},
    reportColumns: {
      columns: angular.copy(accountsReceivableReportColumns)
    },
    reportDates: {
      fromDate: false,
      toDate: moment()
    },
    getReportData: function getReportData() {
      return AccountsReceivableReport.get({
        centerId: vm.config.reportOptions.centerId,
        date: $filter('date')(vm.config.reportDates.toDate, 'yyyy-MM-dd'),
        ownerId: vm.config.reportOwnerRegion.ownerId,
        regionId: vm.config.reportOwnerRegion.regionId
      }).$promise;
    }
  };
  state.setPageTitle(vm.config.reportName);
  /**
   * Map pastDueOnly to URL search param
   */

  $scope.$watch(function () {
    return $location.search().credits;
  }, function (val) {
    vm.config.credits = !!val && val !== 'false';
  });
  $scope.$watch('vm.config.credits', function (val) {
    $location.search('credits', val).replace();
  });
  vm.reportBuilder = new ReportBuilder(vm.config);
  /**
   * Watch for data report depends on (center, columns, order) and generate new report
   */

  var debounceTimeout;
  $scope.$watch(function (_) {
    return {
      reportOptions: vm.config.reportOptions,
      reportDates: vm.config.reportDates,
      reportColumns: vm.config.reportColumns,
      reportOwnerRegion: vm.config.reportOwnerRegion,
      credits: vm.config.credits,
      orderBy: vm.config.orderBy
    };
  }, function (newVal, oldVal) {
    if (debounceTimeout) {
      $timeout.cancel(debounceTimeout);
      debounceTimeout = null;
    }

    debounceTimeout = $timeout(function (_) {
      vm.pdf = null;
      if (angular.isUndefined(vm.config.reportOptions.centerId)) return;
      var newDate = newVal.reportDates.fromDate,
          oldDate = oldVal.reportDates.fromDate;
      if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;
      newDate = newVal.reportDates.toDate;
      oldDate = oldVal.reportDates.toDate;
      if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;
      vm.reportBuilder.buildPdf(reportDataCallback).then(function (blob) {
        vm.pdf = blob;
      });
    }, 100);
  }, true);
  /**
   * Download generated PDF report
   */

  vm.downloadPdf = function () {
    if (!vm.pdf) return;
    reportHelper.download({
      blob: vm.pdf,
      fileName: vm.reportBuilder.getReportFileName('pdf')
    });
  };
  /**
  * Generate and download CSV report
  */


  vm.downloadCsv = function () {
    if (!vm.pdf) return;
    reportHelper.download({
      blob: vm.reportBuilder.buildCsv(reportDataCallback),
      fileName: vm.reportBuilder.getReportFileName('csv')
    });
  };
  /**
   * Report data callback for ReportBuilder, returns report data matrix and columns
   */


  function reportDataCallback(config) {
    var _context, _context2, _context3, _context5, _context6, _context7;

    var result = {
      columns: _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_0___default()(_context = config.reportColumns.columns).call(_context, function (item) {
        return item.include;
      }),
      rows: _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_0___default()(_context2 = config.reportData.payments).call(_context2, function (i) {
        return vm.config.credits || i.amountDue >= 0;
      }),
      styles: []
    };
    result.rows = _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_1___default()(reportHelper).call(reportHelper, result.rows, config.orderBy);
    var totalAmount = helper.round(result.rows.reduce(function (sum, p) {
      return sum + (p.amountDue ? +p.amountDue : 0);
    }, 0));
    var avgDaysLate = result.rows.length && helper.round(result.rows.reduce(function (sum, p) {
      return sum + (p.daysLate ? +p.daysLate : 0);
    }, 0) / result.rows.length);
    result.rows = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default()(_context3 = result.rows).call(_context3, function (payment, idx) {
      var _context4;

      result.styles.push(idx % 2 ? null : reportStyles.rowOdd);
      return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default()(_context4 = result.columns).call(_context4, function (col) {
        return payment[col.dataKey];
      });
    });

    var idx,
        arr = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default()(_context5 = Array.apply(null, new Array(result.columns.length))).call(_context5, function (_) {
      return false;
    });

    result.rows.push(arr);
    result.styles.push(null);
    idx = _babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_3___default()(_context6 = result.columns).call(_context6, function (c) {
      return c.dataKey === 'daysLate';
    });

    if (idx >= 0) {
      result.rows.push([{
        content: $translate.instant('ACCOUNTS_RECEIVABLE_REPORT.TOTALS.AVG_DAYS_LATE') + ':',
        colSpan: idx,
        styles: {
          halign: 'right'
        }
      }, {
        content: avgDaysLate
      }, {
        content: false,
        colSpan: result.columns.length - idx - 1
      }]);
      result.styles.push(reportStyles.h3);
    }

    idx = _babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_3___default()(_context7 = result.columns).call(_context7, function (c) {
      return c.dataKey === 'amountDue';
    });

    if (idx >= 0) {
      result.rows.push([{
        content: $translate.instant('ACCOUNTS_RECEIVABLE_REPORT.TOTALS.TOTAL_DUE') + ':',
        colSpan: idx,
        styles: {
          halign: 'right'
        }
      }, {
        content: $filter('ncurrency')(totalAmount)
      }, {
        content: false,
        colSpan: result.columns.length - idx - 1
      }]);
      result.styles.push(reportStyles.h3);
    }

    return result;
  }
}]));

/***/ }),

/***/ "./bundles/reports/accounts-receivable-report/accounts-receivable-report.service.js":
/*!******************************************************************************************!*\
  !*** ./bundles/reports/accounts-receivable-report/accounts-receivable-report.service.js ***!
  \******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * AccountsReceivableReport service
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.accountsReceivableReport.service', ['ngResource', 'datesDeserializer', 'deserializeNumbers', 'deskworks.config']).factory('AccountsReceivableReport', ["$resource", "datesDeserializer", "deserializeNumbers", "deskworksConfig", function ($resource, datesDeserializer, deserializeNumbers, deskworksConfig) {
  var desDates = datesDeserializer(['payments.date', 'payments.dateDue']);
  var numbersDeserializer = deserializeNumbers(['payments.amountDue', 'payments.amount']);
  var url = deskworksConfig.getApiAbsUrl('/centers/:centerId/accounts-receivable-reports');
  return $resource(url, {
    centerId: '@centerId',
    date: '@date'
  }, {
    get: {
      method: 'GET',
      transformResponse: [angular.fromJson, desDates, numbersDeserializer]
    }
  });
}]));

/***/ }),

/***/ "./bundles/reports/accounts-receivable-report/accounts-receivable-report.tpl.html":
/*!****************************************************************************************!*\
  !*** ./bundles/reports/accounts-receivable-report/accounts-receivable-report.tpl.html ***!
  \****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div id=\"accountsReceivableReport\" class=\"gutter-v\"> <form name=\"formAccountsReceivableReport\"> <h1 class=\"page-title\">{{state.getPageTitle()}}</h1> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 65%', md: '0 0 50%'}\"> <div class=\"gutter-v\"> <report-dates model=\"vm.config.reportDates\"></report-dates> <report-columns model=\"vm.config.reportColumns\"></report-columns> </div> </div> <div flex=\"{lg: '0 0 35%', md: '0 0 50%'}\"> <div class=\"gutter-v\"> <report-options model=\"vm.config.reportOptions\"> <report-order-by model=\"vm.config.orderBy\" report-columns=\"vm.config.reportColumns.columns\"></report-order-by> <ff-static> <label> <ff-checkbox ff-model=\"vm.config.credits\"><span translate=\"ACCOUNTS_RECEIVABLE_REPORT.DISPLAY_CREDITS\"></span></ff-checkbox> </label> </ff-static> </report-options> <report-owner-region model=\"vm.config.reportOwnerRegion\" report-data=\"vm.config.reportData\"></report-owner-region> </div> </div> </div> <ff-btn-group class=\"buttons-bottom\"> <ff-btn sense=\"download\" ff-click=\"vm.downloadPdf()\" ff-disabled=\"!vm.pdf\"> <span translate=\"REPORTS.BTN_PDF\"></span> </ff-btn> <ff-btn sense=\"download\" ff-click=\"vm.downloadCsv()\" ff-disabled=\"!vm.pdf\"> <span translate=\"REPORTS.BTN_CSV\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\"REPORTS.PREVIEW.HEADER\"></span></ff-panel-header> <div pdf-preview=\"vm.pdf\"></div> </ff-panel> </div> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/reports/availability-report/availability-report-columns.service.js":
/*!************************************************************************************!*\
  !*** ./bundles/reports/availability-report/availability-report-columns.service.js ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);


/**
 * Columns for Availability Report
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.availabilityReportColumns', []).factory('availabilityReportColumns', ["$rootScope", "$filter", "$translate", function ($rootScope, $filter, $translate) {
  var cols = {
    vacant: [{
      dataKey: 'name',
      _title: 'AVAILABILITY_REPORT.COLUMNS.UNIT',
      include: true
    }, {
      dataKey: 'basePrice',
      _title: 'AVAILABILITY_REPORT.COLUMNS.PRICE',
      include: true,
      styles: {
        halign: 'right',
        cellWidth: 'wrap'
      },
      pdf: function pdf(v) {
        return $filter('ncurrency')(v);
      },
      csv: function csv(v) {
        return $filter('ncurrency')(v);
      }
    }, {
      dataKey: 'description',
      _title: 'AVAILABILITY_REPORT.COLUMNS.DESCRIPTION',
      include: true
    }],
    occupied: [{
      dataKey: 'name',
      _title: 'AVAILABILITY_REPORT.COLUMNS.UNIT',
      include: true
    }, {
      dataKey: 'attachedUser',
      _title: 'AVAILABILITY_REPORT.COLUMNS.CLIENT',
      include: true
    }, {
      dataKey: 'basePrice',
      _title: 'AVAILABILITY_REPORT.COLUMNS.PRICE',
      include: true,
      styles: {
        halign: 'right'
      },
      pdf: function pdf(v) {
        return $filter('ncurrency')(v);
      },
      csv: function csv(v) {
        return $filter('ncurrency')(v);
      }
    }, {
      dataKey: 'discount',
      _title: 'AVAILABILITY_REPORT.COLUMNS.DISCOUNT',
      include: true,
      styles: {
        halign: 'right'
      },
      pdf: function pdf(v) {
        return $filter('ncurrency')(v);
      },
      csv: function csv(v) {
        return $filter('ncurrency')(v);
      }
    }, {
      dataKey: 'netPrice',
      _title: 'AVAILABILITY_REPORT.COLUMNS.NET_PRICE',
      include: true,
      styles: {
        halign: 'right'
      },
      pdf: function pdf(v) {
        return $filter('ncurrency')(v);
      },
      csv: function csv(v) {
        return $filter('ncurrency')(v);
      }
    }, {
      dataKey: 'startDate',
      _title: 'AVAILABILITY_REPORT.COLUMNS.START_DATE',
      include: true,
      styles: {
        halign: 'right'
      },
      pdf: function pdf(v) {
        return $filter('date')(v, 'mediumDate');
      },
      csv: function csv(v) {
        return $filter('date')(v, 'shortDate');
      }
    }, {
      dataKey: 'terminationDate',
      _title: 'AVAILABILITY_REPORT.COLUMNS.TERMINATION_DATE',
      include: true,
      styles: {
        halign: 'right'
      },
      pdf: function pdf(v) {
        return $filter('date')(v, 'mediumDate');
      },
      csv: function csv(v) {
        return $filter('date')(v, 'shortDate');
      }
    }]
  };
  translate();
  $rootScope.$on('$setTranslationsSuccess', translate);

  function translate() {
    cols.vacant.forEach(function (col) {
      col.title = $translate.instant(col._title);
    });
    cols.occupied.forEach(function (col) {
      col.title = $translate.instant(col._title);
    });
  }

  return cols;
}]));

/***/ }),

/***/ "./bundles/reports/availability-report/availability-report.controller.js":
/*!*******************************************************************************!*\
  !*** ./bundles/reports/availability-report/availability-report.controller.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ "../node_modules/@babel/runtime-corejs3/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_assign__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/assign */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/assign.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_assign__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_assign__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/slice */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/slice.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "../node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.string.search.js */ "../node_modules/core-js/modules/es.string.search.js");
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "../node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! shared/reports/directives/pdf-preview.directive */ "./shared/reports/directives/pdf-preview.directive.js");
/* harmony import */ var shared_reports_services_jspdf_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! shared/reports/services/jspdf.service */ "./shared/reports/services/jspdf.service.js");
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! shared/reports/services/report-styles.service */ "./shared/reports/services/report-styles.service.js");
/* harmony import */ var shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! shared/reports/directives/report-options.directive */ "./shared/reports/directives/report-options.directive.js");











function ownKeys(object, enumerableOnly) { var keys = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(object); if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default.a) { var symbols = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(object); if (enumerableOnly) { symbols = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_7___default()(symbols).call(symbols, function (sym) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(target, key, source[key]); }); } else if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default.a) { Object.defineProperties(target, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default()(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(source, key)); }); } } return target; }










/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.availabilityReport', [shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_14__["default"].name, shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_16__["default"].name, shared_reports_services_jspdf_service__WEBPACK_IMPORTED_MODULE_15__["default"].name, shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_17__["default"].name, shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_18__["default"].name, 'deskworks.state', 'deskworks.reports.ReportBuilder', 'deskworks.reports.reportDates', 'deskworks.reports.availabilityReport.service', 'deskworks.reports.availabilityReportColumns']).controller('AvailabilityReportCtrl', ["$scope", "$timeout", "$filter", "$translate", "$location", "state", "helper", "jsPDF", "reportStyles", "ReportBuilder", "reportHelper", "AvailabilityReport", "availabilityReportColumns", function ($scope, $timeout, $filter, $translate, $location, state, helper, jsPDF, reportStyles, ReportBuilder, reportHelper, AvailabilityReport, availabilityReportColumns) {
  var $ctrl = this;
  var columnStyles1 = {
    0: {
      cellWidth: 230
    },
    1: {
      cellWidth: 60
    }
  };
  var columnStyles2 = {
    0: {
      cellWidth: 230
    },
    1: {
      cellWidth: 'wrap'
    },
    2: {
      cellWidth: 60
    },
    3: {
      cellWidth: 60
    },
    4: {
      cellWidth: 60
    },
    5: {
      cellWidth: 80
    },
    6: {
      cellWidth: 80
    }
  };
  $ctrl.config = {
    reportName: $translate.instant('AVAILABILITY_REPORT.REPORT_NAME'),
    reportOptions: {},
    merged: false,
    getReportData: function getReportData() {
      return AvailabilityReport.query({
        centerId: $ctrl.config.reportOptions.centerId
      });
    }
  };
  state.setPageTitle($ctrl.config.reportName);
  /**
   * Map showDetails to URL search param
   */

  $scope.$watch(function (_) {
    return $location.search().merged;
  }, function (val) {
    $ctrl.config.merged = val;
  });
  $scope.$watch('$ctrl.config.merged', function (val) {
    $location.search('merged', val || null).replace();
  });
  $ctrl.reportBuilder = new ReportBuilder($ctrl.config);
  /**
   * Watch for data report depends on (center, columns, order) and generate new report
   */

  var debounceTimeout;
  $scope.$watch(function (_) {
    return {
      reportOptions: $ctrl.config.reportOptions,
      reportColumns: $ctrl.config.reportColumns,
      merged: $ctrl.config.merged
    };
  }, function (newVal, oldVal) {
    if (debounceTimeout) {
      $timeout.cancel(debounceTimeout);
      debounceTimeout = null;
    }

    debounceTimeout = $timeout(function () {
      $ctrl.pdf = null;
      if (angular.isUndefined($ctrl.config.reportOptions.centerId)) return;

      if ($ctrl.config.merged) {
        $ctrl.reportBuilder.buildPdf(reportDataCallbackMerged, _objectSpread({
          columnStyles: columnStyles2
        }, reportStyles)).then(function (blob) {
          $ctrl.pdf = blob;
        });
      } else {
        var doc = new jsPDF($ctrl.config.reportOptions.paperLayout, 'pt', $ctrl.config.reportOptions.paperSize);
        var startY = reportStyles.pageMargins[0];
        doc.setFontSize(11);
        doc.setFont(doc.getFont().fontName, 'bold');
        doc.autoTableText($translate.instant('AVAILABILITY_REPORT.VACANT') + ':', reportStyles.pageMargins[3], startY, {});

        var styles = _babel_runtime_corejs3_core_js_stable_object_assign__WEBPACK_IMPORTED_MODULE_5___default()({
          startY: startY + 15,
          columnStyles: columnStyles1
        }, reportStyles);

        $ctrl.reportBuilder.generatePdf(reportDataCallbackVacant, styles, doc) // generate 1st part
        .then(function (doc) {
          var startY = doc.previousAutoTable.finalY + 20;
          doc.setFontSize(11);
          doc.setFont(doc.getFont().fontName, 'bold');
          doc.autoTableText($translate.instant('AVAILABILITY_REPORT.OCCUPIED') + ':', reportStyles.pageMargins[3], startY, {
            /*halign: columns[data.column.dataKey].halign, valign: cell.styles.valign*/
          });

          var styles = _babel_runtime_corejs3_core_js_stable_object_assign__WEBPACK_IMPORTED_MODULE_5___default()({
            startY: startY + 15,
            columnStyles: columnStyles2
          }, reportStyles);

          $ctrl.reportBuilder.generatePdf(reportDataCallbackOccupied, styles, doc) // generate 2nd part
          .then(function (doc) {
            $ctrl.pdf = doc.output('blob');
          });
        });
      }
    }, 100);
  }, true);
  /**
   * Download generated PDF report
   */

  $ctrl.downloadPdf = function () {
    if (!$ctrl.pdf) return;
    reportHelper.download({
      blob: $ctrl.pdf,
      fileName: $ctrl.reportBuilder.getReportFileName('pdf')
    });
  };
  /**
  * Generate and download CSV report
  */


  $ctrl.downloadCsv = function () {
    if (!$ctrl.pdf) return;

    if ($ctrl.config.merged) {
      reportHelper.download({
        blob: $ctrl.reportBuilder.buildCsv(reportDataCallbackMerged),
        fileName: $ctrl.reportBuilder.getReportFileName('csv')
      });
    } else {
      reportHelper.download({
        blob: $ctrl.reportBuilder.buildCsv(reportDataCallbackVacant),
        fileName: $ctrl.reportBuilder.getReportFileName('csv', '-vacant')
      });
      reportHelper.download({
        blob: $ctrl.reportBuilder.buildCsv(reportDataCallbackOccupied),
        fileName: $ctrl.reportBuilder.getReportFileName('csv', '-occupied')
      });
    }
  };
  /**
   * Report data callback for ReportBuilder, returns report data matrix and columns
   */


  function reportDataCallbackVacant(config) {
    var _context, _context5;

    var result = {
      columns: availabilityReportColumns.vacant,
      rows: [],
      styles: []
    };

    var idx,
        arr = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_6___default()(_context = Array.apply(null, new Array(result.columns.length))).call(_context, function (val) {
      return false;
    }); // Finally, convert to matrix


    var totalVacant = 0;
    config.reportData.forEach(function (resType, index) {
      var _context2, _context3;

      var resUnits = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_7___default()(_context2 = resType.reservationUnits).call(_context2, function (unit) {
        return !unit.attachedUser;
      });

      if (!resUnits.length) return; // skip empty reservation types
      // Reservation Type name

      result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_8___default()(_context3 = [resType.name]).call(_context3, _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_9___default()(arr).call(arr, 0, arr.length - 1)));
      result.styles.push(reportStyles.h2);
      resUnits.forEach(function (resUnit, idx) {
        var _context4;

        totalVacant += resUnit.basePrice || 0;
        result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_6___default()(_context4 = result.columns).call(_context4, function (col) {
          return resUnit[col.dataKey];
        }));
        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);
      });
    });
    result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_8___default()(_context5 = [$translate.instant('AVAILABILITY_REPORT.TOTALS.VACANT'), totalVacant]).call(_context5, _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_9___default()(arr).call(arr, 0, arr.length - 2)));
    result.styles.push(reportStyles.h1);
    return result;
  }
  /**
   * Report data callback for ReportBuilder, returns report data matrix and columns
   */


  function reportDataCallbackOccupied(config) {
    var _context6, _context10;

    var result = {
      columns: availabilityReportColumns.occupied,
      rows: [],
      styles: []
    };

    var idx,
        arr = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_6___default()(_context6 = Array.apply(null, new Array(result.columns.length))).call(_context6, function (_) {
      return false;
    }); // Finally, convert to matrix


    var totalNet = 0;
    config.reportData.forEach(function (resType) {
      var _context7, _context8;

      var resUnits = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_7___default()(_context7 = resType.reservationUnits).call(_context7, function (unit) {
        return !!unit.attachedUser;
      });

      if (!resUnits.length) return; // skip empty reservation types
      // Reservation Type name

      result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_8___default()(_context8 = [resType.name]).call(_context8, _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_9___default()(arr).call(arr, 0, arr.length - 1)));
      result.styles.push(reportStyles.h2);
      resUnits.forEach(function (resUnit, idx) {
        var _context9;

        totalNet += resUnit.netPrice || 0;
        result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_6___default()(_context9 = result.columns).call(_context9, function (col) {
          return resUnit[col.dataKey];
        }));
        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);
      });
    });
    result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_8___default()(_context10 = [$translate.instant('AVAILABILITY_REPORT.TOTALS.OCCUPIED'), false, false, false, totalNet]).call(_context10, _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_9___default()(arr).call(arr, 0, arr.length - 5)));
    result.styles.push(reportStyles.h1);
    return result;
  }
  /**
   * Report data callback for ReportBuilder, returns report data matrix and columns
   */


  function reportDataCallbackMerged(config) {
    var _context11, _context14, _context15;

    var result = {
      columns: availabilityReportColumns.occupied,
      rows: [],
      styles: []
    };

    var arr = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_6___default()(_context11 = Array.apply(null, new Array(result.columns.length))).call(_context11, function (_) {
      return false;
    });

    var totalNetOccupied = 0,
        totalPriceVacant = 0;
    config.reportData.forEach(function (resType) {
      var _context12;

      var resUnits = resType.reservationUnits;
      if (!resUnits.length) return; // skip empty reservation types
      // Reservation Type name

      result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_8___default()(_context12 = [resType.name]).call(_context12, _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_9___default()(arr).call(arr, 0, arr.length - 1)));
      result.styles.push(reportStyles.h2);
      resUnits.forEach(function (unit, idx) {
        var _context13;

        if (unit.attachedUser) {
          totalNetOccupied += unit.netPrice || 0;
        } else {
          totalPriceVacant += unit.basePrice || 0;
        }

        result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_6___default()(_context13 = result.columns).call(_context13, function (col) {
          return unit[col.dataKey];
        }));
        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);
      });
    });
    result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_8___default()(_context14 = [$translate.instant('AVAILABILITY_REPORT.TOTALS.OCCUPIED'), false, false, false, totalNetOccupied]).call(_context14, _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_9___default()(arr).call(arr, 0, arr.length - 5)));
    result.styles.push(reportStyles.h1);
    result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_8___default()(_context15 = [$translate.instant('AVAILABILITY_REPORT.TOTALS.VACANT'), false, totalPriceVacant]).call(_context15, _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_9___default()(arr).call(arr, 0, arr.length - 3)));
    result.styles.push(reportStyles.h1);
    return result;
  }
}]));

/***/ }),

/***/ "./bundles/reports/availability-report/availability-report.service.js":
/*!****************************************************************************!*\
  !*** ./bundles/reports/availability-report/availability-report.service.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);


/**
 * AvailabilityReport service
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.availabilityReport.service', ['ngResource', 'deserializeNumbers', 'datesDeserializer', 'deskworks.config']).factory('AvailabilityReport', ["$resource", "deserializeNumbers", "datesDeserializer", "deskworksConfig", function ($resource, deserializeNumbers, datesDeserializer, deskworksConfig) {
  var url = deskworksConfig.getApiAbsUrl('/centers/:centerId/availability-reports');
  var dsNumbers = deserializeNumbers(['reservationUnits.basePrice', 'reservationUnits.netPrice', 'reservationUnits.discount']);
  var dsDates = datesDeserializer(['reservationUnits.startDate', 'reservationUnits.terminationDate']);
  var res = $resource(url, {
    centerId: '@centerId'
  }, {
    query: {
      method: 'GET',
      isArray: true,
      transformResponse: [angular.fromJson, dsDates, dsNumbers]
    }
  });
  return {
    query: function query(params) {
      return res.query(params).$promise.then(function (categories) {
        categories.forEach(function (cat) {
          cat.reservationUnits.forEach(function (unit) {
            unit.netPrice = unit.basePrice;
            if (angular.isNumber(unit.netPrice)) unit.netPrice -= unit.discount || 0;
          });
        });
        return categories;
      });
    }
  };
}]));

/***/ }),

/***/ "./bundles/reports/availability-report/availability-report.tpl.html":
/*!**************************************************************************!*\
  !*** ./bundles/reports/availability-report/availability-report.tpl.html ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div id=\"availabilityReport\" class=\"gutter-v\"> <form name=\"formAvailabilityReport\"> <h1 class=\"page-title\">{{state.getPageTitle()}}</h1> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\" style=\"margin-left:auto\"> <report-options model=\"$ctrl.config.reportOptions\" all-centers=\"false\"> <ff-row> <ff-label flex=\"0 0 100px\"><span translate=\"AVAILABILITY_REPORT.MERGED\"></span></ff-label> <ff-static><ff-checkbox ff-model=\"$ctrl.config.merged\"></ff-checkbox></ff-static> </ff-row> </report-options> </div> </div> <ff-btn-group class=\"buttons-bottom\"> <ff-btn sense=\"download\" ff-click=\"$ctrl.downloadPdf()\" ff-disabled=\"!$ctrl.pdf\"> <span translate=\"REPORTS.BTN_PDF\"></span> </ff-btn> <ff-btn sense=\"download\" ff-click=\"$ctrl.downloadCsv()\" ff-disabled=\"!$ctrl.pdf\"> <span translate=\"REPORTS.BTN_CSV\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\"REPORTS.PREVIEW.HEADER\"></span></ff-panel-header> <div pdf-preview=\"$ctrl.pdf\"></div> </ff-panel> </div> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/reports/check-in-report/check-in-report-bar-chart.service.js":
/*!******************************************************************************!*\
  !*** ./bundles/reports/check-in-report/check-in-report-bar-chart.service.js ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);


/**
 * Bar chart for Check-In Report
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.checkInReportBarChart', []).factory('checkInReportBarChart', ["$translate", "$filter", "helper", "whitelabel", function ($translate, $filter, helper, whitelabel) {
  return {
    getChartConfig: function getChartConfig(chartData, orderBy) {
      var chartDataConfig = {
        labels: _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(chartData).call(chartData, function (item) {
          return item.name || '-';
        }),
        data: [{
          data: _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(chartData).call(chartData, function (item) {
            return item.value / 3600000;
          }),
          backgroundColor: whitelabel.getProperty('--brand-color')
        }],
        options: {
          legend: {
            display: false
          },
          tooltips: {
            callbacks: {
              label: function label(tooltipItem, data) {
                return $filter('hoursMinutes')(chartData[tooltipItem.index].value);
              }
            }
          },
          scales: {
            xAxes: [{
              maxBarThickness: 100
            }]
          }
        }
      };

      if (orderBy === 'checkInTime') {
        chartDataConfig.type = 'bar';
      } else {
        chartDataConfig.type = 'horizontalBar';
      }

      return chartDataConfig;
    }
  };
}]));

/***/ }),

/***/ "./bundles/reports/check-in-report/check-in-report-columns.service.js":
/*!****************************************************************************!*\
  !*** ./bundles/reports/check-in-report/check-in-report-columns.service.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);


/**
 * Columns for Check In Report
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.checkInReportColumns', []).factory('checkInReportColumns', ["$rootScope", "$filter", "$translate", function ($rootScope, $filter, $translate) {
  var cols = [{
    dataKey: 'userName',
    _title: 'CHECK_IN_REPORT.COLUMNS.NAME'
  }, {
    dataKey: 'userCompany',
    _title: 'CHECK_IN_REPORT.COLUMNS.COMPANY'
  }, {
    dataKey: 'checkInTime',
    _title: 'CHECK_IN_REPORT.COLUMNS.DATE',
    styles: {
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('date')(v, 'mediumDate');
    },
    csv: function csv(v) {
      return $filter('date')(v, 'shortDate');
    }
  }, {
    dataKey: 'checkInTime',
    _title: 'CHECK_IN_REPORT.COLUMNS.CHECK_IN',
    styles: {
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('date')(v, 'shortTime');
    },
    csv: function csv(v) {
      return $filter('date')(v, 'shortTime');
    }
  }, {
    dataKey: 'checkOutTime',
    _title: 'CHECK_IN_REPORT.COLUMNS.CHECK_OUT',
    styles: {
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('date')(v, 'shortTime');
    },
    csv: function csv(v) {
      return $filter('date')(v, 'shortTime');
    }
  }, {
    dataKey: 'duration',
    _title: 'CHECK_IN_REPORT.COLUMNS.USAGE_HOURS',
    styles: {
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('hoursMinutes')(v);
    },
    csv: function csv(v) {
      return $filter('hoursMinutes')(v);
    }
  }];
  translate();
  $rootScope.$on('$setTranslationsSuccess', translate);

  function translate() {
    cols.forEach(function (col) {
      col.title = $translate.instant(col._title);
    });
  }

  return cols;
}]));

/***/ }),

/***/ "./bundles/reports/check-in-report/check-in-report-totals-columns.service.js":
/*!***********************************************************************************!*\
  !*** ./bundles/reports/check-in-report/check-in-report-totals-columns.service.js ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);


/**
 * Totals Columns for Check In Report
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.checkInReportTotalsColumns', []).factory('checkInReportTotalsColumns', ["$rootScope", "$filter", "$translate", function ($rootScope, $filter, $translate) {
  var cols = [{
    dataKey: 'userName',
    _title: 'CHECK_IN_REPORT.COLUMNS.NAME'
  }, {
    dataKey: 'userCompany',
    _title: 'CHECK_IN_REPORT.COLUMNS.COMPANY'
  }, {
    dataKey: 'totalHoursTimeRange',
    _title: 'CHECK_IN_REPORT.COLUMNS.TOTAL_HOURS_TIME_RANGE',
    halign: 'right',
    pdf: function pdf(val) {
      return $filter('hoursMinutes')(val);
    },
    csv: function csv(val) {
      return $filter('hoursMinutes')(val);
    }
  }, {
    dataKey: 'date',
    _title: 'CHECK_IN_REPORT.COLUMNS.DATE',
    halign: 'right',
    pdf: function pdf(val) {
      return $filter('date')(val, 'mediumDate');
    },
    csv: function csv(val) {
      return $filter('date')(val, 'shortDate');
    }
  }, {
    dataKey: 'totalHoursDay',
    _title: 'CHECK_IN_REPORT.COLUMNS.TOTAL_HOURS_DAY',
    halign: 'right',
    pdf: function pdf(val) {
      return $filter('hoursMinutes')(val);
    },
    csv: function csv(val) {
      return $filter('hoursMinutes')(val);
    }
  }];
  translate();
  $rootScope.$on('$setTranslationsSuccess', translate);

  function translate() {
    cols.forEach(function (col) {
      col.title = $translate.instant(col._title);
    });
  }

  return cols;
}]));

/***/ }),

/***/ "./bundles/reports/check-in-report/check-in-report.controller.js":
/*!***********************************************************************!*\
  !*** ./bundles/reports/check-in-report/check-in-report.controller.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/slice */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/slice.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "../node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.string.search.js */ "../node_modules/core-js/modules/es.string.search.js");
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "../node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! shared/reports/directives/pdf-preview.directive */ "./shared/reports/directives/pdf-preview.directive.js");
/* harmony import */ var shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! shared/charts/chart.directive */ "./shared/charts/chart.directive.js");
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! shared/reports/services/report-styles.service */ "./shared/reports/services/report-styles.service.js");
/* harmony import */ var shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! shared/reports/directives/report-options.directive */ "./shared/reports/directives/report-options.directive.js");
/* harmony import */ var _services_report_group_by_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../services/report-group-by.service */ "./bundles/reports/services/report-group-by.service.js");














/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.CheckInReportCtrl', [shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_8__["default"].name, shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_9__["default"].name, shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_10__["default"].name, shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_11__["default"].name, shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_12__["default"].name, 'deskworks.state', 'deskworks.reports.ReportBuilder', 'deskworks.reports.reportDates', 'deskworks.CheckInReport', 'deskworks.checkInReportColumns', 'deskworks.checkInReportTotalsColumns', 'deskworks.reports.checkInReportBarChart', _services_report_group_by_service__WEBPACK_IMPORTED_MODULE_13__["default"].name]).controller('CheckInReportCtrl', ["$scope", "$location", "$timeout", "$translate", "$filter", "state", "reportStyles", "ReportBuilder", "reportHelper", "CheckInReport", "checkInReportBarChart", "checkInReportColumns", "checkInReportTotalsColumns", "reportGroupBy", function ($scope, $location, $timeout, $translate, $filter, state, reportStyles, ReportBuilder, reportHelper, CheckInReport, checkInReportBarChart, checkInReportColumns, checkInReportTotalsColumns, reportGroupBy) {
  var $ctrl = this;
  $ctrl.config = {
    reportName: $translate.instant('CHECK_IN_REPORT.REPORT_NAME'),
    reportOptions: {},
    orderBy: 'checkInTime',
    reportColumns: {
      columns: checkInReportColumns
    },
    reportDates: {
      fromDate: moment(),
      toDate: moment()
    },
    getReportData: function getReportData() {
      return CheckInReport.query({
        centerId: $ctrl.config.reportOptions.centerId,
        fromDate: $filter('date')($ctrl.config.reportDates.fromDate, 'yyyy-MM-dd'),
        toDate: $filter('date')($ctrl.config.reportDates.toDate, 'yyyy-MM-dd')
      });
    }
  };
  state.setPageTitle($ctrl.config.reportName);
  $ctrl.config.reportDates.fromDate.date(1);
  /**
   * Map orderBy to URL search param
   */

  if ($ctrl.config.orderBy !== false) {
    $scope.$watch(function () {
      return $location.search().orderBy;
    }, function (val) {
      $ctrl.config.orderBy = val || 'checkInTime';
    });
    $scope.$watch('$ctrl.config.orderBy', function (val) {
      $location.search('orderBy', val).replace();
    });
  }

  $ctrl.reportBuilder = new ReportBuilder($ctrl.config);
  /**
   * Watch for data report depends on (center, columns, order) and generate new report
   */

  var debounceTimeout;
  $scope.$watch(function () {
    return {
      reportOptions: $ctrl.config.reportOptions,
      reportDates: $ctrl.config.reportDates,
      orderBy: $ctrl.config.orderBy
    };
  }, function (newVal, oldVal) {
    if (debounceTimeout) {
      $timeout.cancel(debounceTimeout);
      debounceTimeout = null;
    }

    debounceTimeout = $timeout(function () {
      $ctrl.pdf = null;
      if (!$ctrl.config.reportDates.fromDate || !$ctrl.config.reportDates.toDate) return;
      var newDate = newVal.reportDates.fromDate,
          oldDate = oldVal.reportDates.fromDate;
      if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) $ctrl.config.reportData = null;
      newDate = newVal.reportDates.toDate;
      oldDate = oldVal.reportDates.toDate;
      if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) $ctrl.config.reportData = null;
      var doc = new jsPDF($ctrl.config.reportOptions.paperLayout, 'pt', $ctrl.config.reportOptions.paperSize);
      $ctrl.reportBuilder.generatePdf(reportDataCallback) // generate 1st part
      .then(function (doc) {
        var _context;

        var styles = angular.copy(reportStyles);
        styles.startY = doc.previousAutoTable.finalY + 40;
        styles.tableMargin = _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0___default()(_context = reportStyles.pageMargins).call(_context);
        styles.tableMargin[3] = 340; // limit 2nd table width

        $ctrl.reportBuilder.generatePdf(totalsDataCallback, styles, doc) // generate 2nd part
        .then(function (doc) {
          $ctrl.pdf = doc.output('blob');
        }).then(function () {
          $ctrl.bar = getBarChartData($ctrl.config);
        });
      });
    }, 100);
  }, true);
  /**
   * Download generated PDF report
   */

  $ctrl.downloadPdf = function () {
    if (!$ctrl.pdf) return;
    reportHelper.download({
      blob: $ctrl.pdf,
      fileName: $ctrl.reportBuilder.getReportFileName('pdf')
    });
  };
  /**
   * Generate and download CSV report
   */


  $ctrl.downloadCsv = function () {
    if (!$ctrl.pdf) return;
    reportHelper.download({
      blob: $ctrl.reportBuilder.buildCsv(reportDataCallback),
      fileName: $ctrl.reportBuilder.getReportFileName('csv', '-main')
    });
    reportHelper.download({
      blob: $ctrl.reportBuilder.buildCsv(totalsDataCallback),
      fileName: $ctrl.reportBuilder.getReportFileName('csv', '-totals')
    });
  };
  /**
   * Report data callback
   */


  function reportDataCallback(config) {
    var _context2;

    var result = {
      columns: checkInReportColumns,
      rows: [],
      styles: []
    };
    var groups = reportGroupBy(config.reportData, config.orderBy);

    var arr = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default()(_context2 = Array.apply(null, new Array(result.columns.length))).call(_context2, function () {
      return false;
    });

    groups.forEach(function (group) {
      var _context4;

      var total = 0;
      group.forEach(function (item, idx) {
        var _context3;

        result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default()(_context3 = result.columns).call(_context3, function (col) {
          return item[col.dataKey];
        }));
        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);
        total += item.duration;
      });
      result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_2___default()(_context4 = _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0___default()(arr).call(arr, 0, result.columns.length - 2)).call(_context4, [$translate.instant('CHECK_IN_REPORT.COLUMNS.SUBTOTAL') + ':', total]));
      result.styles.push(reportStyles.h2);
    });
    return result;
  }
  /**
   * Totals data callback
   */


  function totalsDataCallback(config) {
    var colsFilter = {
      userName: ['userName', 'totalHoursTimeRange'],
      userCompany: ['userCompany', 'totalHoursTimeRange'],
      checkInTime: ['date', 'totalHoursDay']
    };
    var result = {
      columns: _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default()(checkInReportTotalsColumns).call(checkInReportTotalsColumns, function (col) {
        return colsFilter[config.orderBy].indexOf(col.dataKey) >= 0;
      }),
      rows: [],
      styles: []
    };
    var groups = reportGroupBy(config.reportData, config.orderBy);
    groups.forEach(function (group, idx) {
      var total = group.reduce(function (total, item) {
        return total + item.duration;
      }, 0);
      result.rows.push([group[0][config.orderBy], total]);
      result.styles.push(idx % 2 ? null : reportStyles.rowOdd);
    });
    return result;
  }
  /**
   * Create chart
   */


  function getBarChartData(config) {
    var groups = reportGroupBy(config.reportData, config.orderBy);

    var chartData = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default()(groups).call(groups, function (group) {
      var total = group.reduce(function (total, item) {
        return total + item.duration;
      }, 0);
      return {
        name: config.orderBy === 'checkInTime' ? $filter('date')(group[0][config.orderBy]) : group[0][config.orderBy],
        value: total // ms

      };
    });

    return checkInReportBarChart.getChartConfig(chartData, config.orderBy);
  }
}]));

/***/ }),

/***/ "./bundles/reports/check-in-report/check-in-report.service.js":
/*!********************************************************************!*\
  !*** ./bundles/reports/check-in-report/check-in-report.service.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);


/**
 * CheckInReport service
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.CheckInReport', ['ngResource', 'datesDeserializer', 'deskworks.config']).factory('CheckInReport', ["$resource", "datesDeserializer", "deskworksConfig", function ($resource, datesDeserializer, deskworksConfig) {
  var desDates = datesDeserializer(['checkInTime', 'checkOutTime']);
  var url = deskworksConfig.getApiAbsUrl('/check-in-report');
  var res = $resource(url, {
    centerId: '@centerId',
    fromDate: '@fromDate',
    toDate: '@toDate'
  }, {
    query: {
      method: 'GET',
      isArray: true,
      transformResponse: [angular.fromJson, desDates]
    }
  });
  return {
    query: function query(params) {
      return res.query(params).$promise.then(function (result) {
        result.forEach(function (item) {
          item.duration = item.checkOutTime.diff(item.checkInTime);
        });
        return result;
      });
    }
  };
}]));

/***/ }),

/***/ "./bundles/reports/check-in-report/check-in-report.tpl.html":
/*!******************************************************************!*\
  !*** ./bundles/reports/check-in-report/check-in-report.tpl.html ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div id=\"checkInReport\" class=\"gutter-v\"> <form name=\"formCheckInReport\"> <h1 class=\"page-title\">{{state.getPageTitle()}}</h1> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <report-dates model=\"$ctrl.config.reportDates\"></report-dates> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=\"gutter-v\"> <report-options model=\"$ctrl.config.reportOptions\"> <ff-row> <ff-label flex=\"0 0 100px\"><span translate=\"CHECK_IN_REPORT.ORDER_BY\"></span></ff-label> <ff-static> <div class=\"ff-grid gutter-h-half\"> <label flex=\"none\"> <ff-radio ff-model=\"$ctrl.config.orderBy\" ff-value=\"'userName'\"> <span translate=\"CHECK_IN_REPORT.ORDER_BY.NAME\"></span> </ff-radio> </label> <label flex=\"none\"> <ff-radio ff-model=\"$ctrl.config.orderBy\" ff-value=\"'userCompany'\"> <span translate=\"CHECK_IN_REPORT.ORDER_BY.COMPANY\"></span> </ff-radio> </label> <label flex=\"none\"> <ff-radio ff-model=\"$ctrl.config.orderBy\" ff-value=\"'checkInTime'\"> <span translate=\"CHECK_IN_REPORT.ORDER_BY.DATE\"></span> </ff-radio> </label> </div> </ff-static> </ff-row> </report-options> </div> </div> <ff-panel flex=\"auto\"> <ff-panel-header> <span ng-if=\"$ctrl.config.orderBy === 'checkInTime'\" translate=\"CHECK_IN_REPORT.BAR_CHART.USAGE_PER_DAY\"></span> <span ng-if=\"$ctrl.config.orderBy === 'userName'\" translate=\"CHECK_IN_REPORT.BAR_CHART.USAGE_BY_MEMBER\"></span> <span ng-if=\"$ctrl.config.orderBy === 'userCompany'\" translate=\"CHECK_IN_REPORT.BAR_CHART.USAGE_BY_COMPANY\"></span> </ff-panel-header> <div ff-dim=\"!$ctrl.pdf\" ng-init=\"$c = $ctrl\"> <chart chart-type=\"{{$ctrl.bar.type}}\" chart-labels=\"$ctrl.bar.labels\" chart-data=\"$ctrl.bar.data\" chart-options=\"$ctrl.bar.options\" ng-style=\"{ 'max-height': $c.config.orderBy === 'checkInTime' ? null : 'none', 'height': $c.config.orderBy === 'checkInTime' ? null : $c.bar.labels.length * 25 + 'px' }\"></chart> </div> </ff-panel> <ff-btn-group> <ff-btn sense=\"download\" ff-click=\"$ctrl.downloadPdf()\" ff-disabled=\"!$ctrl.pdf\"> <span translate=\"REPORTS.BTN_PDF\"></span> </ff-btn> <ff-btn sense=\"download\" ff-click=\"$ctrl.downloadCsv()\" ff-disabled=\"!$ctrl.pdf\"> <span translate=\"REPORTS.BTN_CSV\"></span> </ff-btn> </ff-btn-group> </div> </form> <ff-panel> <ff-panel-header><span translate=\"REPORTS.PREVIEW.HEADER\"></span></ff-panel-header> <div pdf-preview=\"$ctrl.pdf\"></div> </ff-panel> </div> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/reports/credit-balance-report/credit-balance-report-columns.service.js":
/*!****************************************************************************************!*\
  !*** ./bundles/reports/credit-balance-report/credit-balance-report-columns.service.js ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);


/**
 * Columns for Credit Balance Report
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.creditBalanceReportColumns', []).factory('creditBalanceReportColumns', ["$rootScope", "$filter", "$translate", function ($rootScope, $filter, $translate) {
  var cols = [{
    dataKey: 'centerName',
    _title: 'CREDIT_BALANCE_REPORT.COLUMNS.CENTER',
    include: true
  }, {
    dataKey: 'userName',
    _title: 'CREDIT_BALANCE_REPORT.COLUMNS.USER_NAME',
    include: true
  }, {
    dataKey: 'date',
    _title: 'CREDIT_BALANCE_REPORT.COLUMNS.DATE',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('date')(v, 'mediumDate');
    },
    csv: function csv(v) {
      return $filter('date')(v, 'shortDate');
    }
  }, {
    dataKey: 'order',
    _title: 'CREDIT_BALANCE_REPORT.COLUMNS.ORDER_ID',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    }
  }, {
    dataKey: 'amount',
    _title: 'CREDIT_BALANCE_REPORT.COLUMNS.BALANCE',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('ncurrency')(v);
    },
    csv: function csv(v) {
      return $filter('ncurrency')(v);
    }
  }];
  translate();
  $rootScope.$on('$setTranslationsSuccess', translate);

  function translate() {
    cols.forEach(function (col) {
      col.title = $translate.instant(col._title);
    });
  }

  return cols;
}]));

/***/ }),

/***/ "./bundles/reports/credit-balance-report/credit-balance-report.controller.js":
/*!***********************************************************************************!*\
  !*** ./bundles/reports/credit-balance-report/credit-balance-report.controller.js ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "../node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.string.search.js */ "../node_modules/core-js/modules/es.string.search.js");
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "../node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! shared/reports/directives/pdf-preview.directive */ "./shared/reports/directives/pdf-preview.directive.js");
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! shared/reports/services/report-styles.service */ "./shared/reports/services/report-styles.service.js");
/* harmony import */ var shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! shared/reports/directives/report-options.directive */ "./shared/reports/directives/report-options.directive.js");








/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.creditBalanceReport', [shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_4__["default"].name, shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_5__["default"].name, shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_6__["default"].name, shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_7__["default"].name, 'deskworks.state', 'deskworks.reports.ReportBuilder', 'deskworks.reports.reportDates', 'deskworks.reports.reportOwnerRegion', 'deskworks.reports.creditBalanceReport.service', 'deskworks.reports.creditBalanceReportColumns']).controller('CreditBalanceReportCtrl', ["$scope", "$timeout", "$filter", "$translate", "$location", "state", "helper", "reportStyles", "ReportBuilder", "reportHelper", "CreditBalanceReport", "creditBalanceReportColumns", function ($scope, $timeout, $filter, $translate, $location, state, helper, reportStyles, ReportBuilder, reportHelper, CreditBalanceReport, creditBalanceReportColumns) {
  var vm = this;
  vm.config = {
    reportName: $translate.instant('CREDIT_BALANCE_REPORT.REPORT_NAME'),
    reportOptions: {},
    reportOwnerRegion: {},
    reportColumns: {
      columns: creditBalanceReportColumns
    },
    toDate: moment(),
    getReportData: function getReportData() {
      return CreditBalanceReport.get({
        centerId: vm.config.reportOptions.centerId,
        ownerId: vm.config.reportOwnerRegion.ownerId,
        regionId: vm.config.reportOwnerRegion.regionId,
        toDate: $filter('date')(vm.config.toDate, 'yyyy-MM-dd')
      }).$promise;
    }
  };
  state.setPageTitle(vm.config.reportName);
  vm.reportBuilder = new ReportBuilder(vm.config);

  vm.getToday = function () {
    return moment();
  };

  watchToDate();
  /**
   * Watch for report options, generate new report (or rebuild old) on changes, watch for 'toDate' url param
   */

  var debounceTimeout;
  $scope.$watch(function (_) {
    return {
      reportOptions: vm.config.reportOptions,
      reportOwnerRegion: vm.config.reportOwnerRegion,
      toDate: vm.config.toDate
    };
  }, function (newVal, oldVal) {
    if (debounceTimeout) {
      $timeout.cancel(debounceTimeout);
      debounceTimeout = null;
    }

    debounceTimeout = $timeout(function () {
      if (moment.isMoment(newVal.toDate) && newVal.toDate.isAfter(moment(), 'day')) return;
      vm.pdf = null;
      if (angular.isUndefined(vm.config.reportOptions.centerId)) return;
      var newDate = newVal.toDate,
          oldDate = oldVal.toDate;
      if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;
      vm.reportBuilder.buildPdf(reportDataCallback).then(function (blob) {
        vm.pdf = blob;
      });
    }, 100);
  }, true);
  /**
   * Download generated PDF report
   */

  vm.downloadPdf = function () {
    if (!vm.pdf) {
      return;
    }

    reportHelper.download({
      blob: vm.pdf,
      fileName: vm.reportBuilder.getReportFileName('pdf')
    });
  };
  /**
  * Generate and download CSV report
  */


  vm.downloadCsv = function () {
    if (!vm.pdf) {
      return;
    }

    reportHelper.download({
      blob: vm.reportBuilder.buildCsv(reportDataCallback),
      fileName: vm.reportBuilder.getReportFileName('csv')
    });
  };
  /**
   * Report data callback for ReportBuilder, returns report data matrix and columns
   */


  function reportDataCallback(config) {
    var _context;

    var result = {
      columns: config.reportColumns.columns,
      rows: [],
      styles: []
    }; // Finally, convert to matrix

    result.rows = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default()(_context = config.reportData.credits).call(_context, function (credit, idx) {
      var _context2;

      result.styles.push(idx % 2 ? null : reportStyles.rowOdd);
      return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default()(_context2 = result.columns).call(_context2, function (col) {
        return credit[col.dataKey];
      });
    });
    result.rows.push([false, false, false, false, false]);
    result.styles.push(null);
    result.rows.push([false, false, false, $translate.instant('CREDIT_BALANCE_REPORT.TOTALS.CREDIT') + ':', config.reportData.total]);
    result.styles.push(reportStyles.h3);
    return result;
  }
  /**
   * Map toDate to URL search param
   */


  function watchToDate() {
    $scope.$watch(function () {
      return $location.search().toDate;
    }, function (val) {
      var date = $filter('toDate')(val);
      vm.config.toDate = moment.isMoment(date) && !vm.config.toDate.isSame(date) ? date : vm.config.toDate;
    });
    $scope.$watch('vm.config.toDate', function (val) {
      if (!moment.isMoment(val)) return;
      $location.search('toDate', $filter('date')(val, 'yyyy-MM-dd')).replace();
    });
  }
}]));

/***/ }),

/***/ "./bundles/reports/credit-balance-report/credit-balance-report.service.js":
/*!********************************************************************************!*\
  !*** ./bundles/reports/credit-balance-report/credit-balance-report.service.js ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * CreditBalanceReport service
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.creditBalanceReport.service', ['ngResource', 'datesDeserializer', 'deskworks.config']).factory('CreditBalanceReport', ["$resource", "datesDeserializer", "deskworksConfig", function ($resource, datesDeserializer, deskworksConfig) {
  var desDates = datesDeserializer(['credits.date']);
  var url = deskworksConfig.getApiAbsUrl('/reports/credit-balance');
  return $resource(url, {
    centerId: '@centerId'
  }, {
    get: {
      method: 'GET',
      transformResponse: [angular.fromJson, desDates]
    }
  });
}]));

/***/ }),

/***/ "./bundles/reports/credit-balance-report/credit-balance-report.tpl.html":
/*!******************************************************************************!*\
  !*** ./bundles/reports/credit-balance-report/credit-balance-report.tpl.html ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div id=\"creditBalanceReport\" class=\"gutter-v\"> <form name=\"formCreditBalanceReport\"> <h1 class=\"page-title\">{{state.getPageTitle()}}</h1> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\" style=\"margin-left:auto\"> <div class=\"gutter-v\"> <report-options model=\"vm.config.reportOptions\"> <label class=\"ff-row\"> <ff-label flex=\"0 0 100px\" ff-required=\"true\"><span translate=\"REPORTS.PERIOD.TO_DATE\"></span></ff-label> <ff-date flex=\"0 0 124px\" name=\"toDate\" ff-model=\"vm.config.toDate\" ff-date-order=\"{ early: vm.config.toDate, late: vm.getToday() }\" ff-validate-alert=\"{ field: 'Selected date', late: 'or equal to today' }\"></ff-date> <span class=\"ff-label\"></span> </label> </report-options> <report-owner-region model=\"vm.config.reportOwnerRegion\" report-data=\"vm.config.reportData\"></report-owner-region> </div> </div> </div> <ff-btn-group class=\"buttons-bottom\"> <ff-btn sense=\"download\" ff-click=\"vm.downloadPdf()\" ff-disabled=\"!vm.pdf\"> <span translate=\"REPORTS.BTN_PDF\"></span> </ff-btn> <ff-btn sense=\"download\" ff-click=\"vm.downloadCsv()\" ff-disabled=\"!vm.pdf\"> <span translate=\"REPORTS.BTN_CSV\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\"REPORTS.PREVIEW.HEADER\"></span></ff-panel-header> <div pdf-preview=\"vm.pdf\"></div> </ff-panel> </div> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/reports/deposit-and-tax-report/deposit-and-tax-report-columns.service.js":
/*!******************************************************************************************!*\
  !*** ./bundles/reports/deposit-and-tax-report/deposit-and-tax-report-columns.service.js ***!
  \******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);


/**
 * Columns for Deposit And Tax Report
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.depositAndTaxReportColumns', []).factory('depositAndTaxReportColumns', ["$rootScope", "$filter", "$translate", function ($rootScope, $filter, $translate) {
  var cols = [{
    dataKey: 'userName',
    _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.NAME',
    include: true,
    defaultOrder: true
  }, {
    dataKey: 'userCompany',
    _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.COMPANY',
    include: true
  }, {
    dataKey: 'orderId',
    _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.ORDER_ID',
    include: true,
    styles: {
      halign: 'right'
    }
  }, {
    dataKey: 'productName',
    _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.ITEM',
    include: true
  }, {
    dataKey: 'productCode',
    _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.ITEM_CODE',
    include: true,
    styles: {
      halign: 'right'
    }
  }, {
    dataKey: 'amountTaxable',
    _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.TAXABLE_AMOUNT',
    include: true,
    styles: {
      halign: 'right'
    },
    pdf: function pdf(val) {
      return $filter('ncurrency')(val);
    },
    csv: function csv(val) {
      return $filter('ncurrency')(val);
    }
  }, {
    dataKey: 'amountNonTaxable',
    _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.NON_TAXABLE_AMOUNT',
    include: true,
    styles: {
      halign: 'right'
    },
    pdf: function pdf(val) {
      return $filter('ncurrency')(val);
    },
    csv: function csv(val) {
      return $filter('ncurrency')(val);
    }
  }, {
    dataKey: 'subtotal',
    _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.SUBTOTAL',
    include: true,
    styles: {
      halign: 'right',
      cellWidth: 'wrap'
    },
    pdf: function pdf(val) {
      return $filter('ncurrency')(val);
    },
    csv: function csv(val) {
      return $filter('ncurrency')(val);
    }
  }, {
    dataKey: 'tax',
    _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.TAX',
    include: true,
    styles: {
      halign: 'right',
      cellWidth: 'wrap'
    },
    pdf: function pdf(val) {
      return $filter('ncurrency')(val);
    },
    csv: function csv(val) {
      return $filter('ncurrency')(val);
    }
  }, {
    dataKey: 'total',
    _title: 'DEPOSIT_AND_TAX_REPORT.COLUMNS.TOTAL',
    include: true,
    styles: {
      halign: 'right',
      cellWidth: 'wrap'
    },
    pdf: function pdf(val) {
      return $filter('ncurrency')(val);
    },
    csv: function csv(val) {
      return $filter('ncurrency')(val);
    }
  }];
  translate();
  $rootScope.$on('$setTranslationsSuccess', translate);

  function translate() {
    cols.forEach(function (col) {
      col.title = $translate.instant(col._title);
    });
  }

  return cols;
}]));

/***/ }),

/***/ "./bundles/reports/deposit-and-tax-report/deposit-and-tax-report.controller.js":
/*!*************************************************************************************!*\
  !*** ./bundles/reports/deposit-and-tax-report/deposit-and-tax-report.controller.js ***!
  \*************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find-index */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find-index.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_fill__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/fill */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/fill.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_fill__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_fill__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! shared/reports/directives/pdf-preview.directive */ "./shared/reports/directives/pdf-preview.directive.js");
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! shared/reports/services/report-styles.service */ "./shared/reports/services/report-styles.service.js");
/* harmony import */ var shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! shared/reports/directives/report-options.directive */ "./shared/reports/directives/report-options.directive.js");









/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.DepositAndTaxReportCtrl', [shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_5__["default"].name, shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_6__["default"].name, shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_7__["default"].name, shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_8__["default"].name, 'deskworks.state', 'deskworks.reports.reportDates', 'deskworks.reports.reportColumns', 'deskworks.reports.ReportBuilder', 'deskworks.reportOrderBy', 'deskworks.DepositAndTaxReport', 'deskworks.depositAndTaxReportColumns']).controller('DepositAndTaxReportCtrl', ["$scope", "$timeout", "$translate", "$filter", "state", "reportHelper", "ReportBuilder", "reportStyles", "DepositAndTaxReport", "depositAndTaxReportColumns", function ($scope, $timeout, $translate, $filter, state, reportHelper, ReportBuilder, reportStyles, DepositAndTaxReport, depositAndTaxReportColumns) {
  var $ctrl = this;
  $ctrl.config = {
    reportName: $translate.instant('DEPOSIT_AND_TAX_REPORT.REPORT_NAME'),
    reportOptions: {},
    reportColumns: angular.copy(depositAndTaxReportColumns),
    reportDates: {
      fromDate: moment(),
      toDate: moment()
    },
    getReportData: function getReportData() {
      return DepositAndTaxReport.get({
        centerId: $ctrl.config.reportOptions.centerId || null,
        fromDate: $filter('date')($ctrl.config.reportDates.fromDate, 'yyyy-MM-dd'),
        toDate: $filter('date')($ctrl.config.reportDates.toDate, 'yyyy-MM-dd')
      });
    }
  };
  state.setPageTitle($ctrl.config.reportName);
  $ctrl.config.reportDates.fromDate.subtract(1, 'M').date(1); // set fromDate to first day of previous month

  $ctrl.config.reportDates.toDate.date(0); // set toDate to last day of previous month

  $ctrl.reportBuilder = new ReportBuilder($ctrl.config);
  /**
   * Watch for data report depends on (center, columns, order) and generate new report
   */

  var debounceTimeout;
  $scope.$watch(function () {
    return {
      reportOptions: $ctrl.config.reportOptions,
      reportDates: $ctrl.config.reportDates,
      orderBy: $ctrl.config.orderBy
    };
  }, function (newVal, oldVal) {
    if (debounceTimeout) {
      $timeout.cancel(debounceTimeout);
      debounceTimeout = null;
    }

    debounceTimeout = $timeout(function () {
      $ctrl.pdf = null;
      var newDate = newVal.reportDates.fromDate,
          oldDate = oldVal.reportDates.fromDate;
      if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) $ctrl.config.reportData = null;
      newDate = newVal.reportDates.toDate;
      oldDate = oldVal.reportDates.toDate;
      if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) $ctrl.config.reportData = null;
      $ctrl.reportBuilder.buildPdf(reportDataCallback).then(function (blob) {
        $ctrl.pdf = blob;
      });
    }, 100);
  }, true);
  /**
   * Download generated PDF report
   */

  $ctrl.downloadPdf = function () {
    if (!$ctrl.pdf) return;
    reportHelper.download({
      blob: $ctrl.pdf,
      fileName: $ctrl.reportBuilder.getReportFileName('pdf')
    });
  };
  /**
   * Generate and download CSV report
   */


  $ctrl.downloadCsv = function () {
    if (!$ctrl.pdf) return;
    reportHelper.download({
      blob: $ctrl.reportBuilder.buildCsv(reportDataCallback),
      fileName: $ctrl.reportBuilder.getReportFileName('csv')
    });
  };
  /**
   * Report data callback
   */


  function reportDataCallback(config) {
    var _context, _context2, _context5;

    var ncurrency = $filter('ncurrency');
    var result = {
      columns: _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1___default()(_context = config.reportColumns).call(_context, function (item) {
        return item.include;
      }),
      rows: [],
      styles: []
    };

    var amountTaxableIndex = _babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_2___default()(_context2 = result.columns).call(_context2, function (col) {
      return col.dataKey === 'amountTaxable';
    });

    config.reportData.daily.forEach(function (day) {
      result.rows.push([// daily total
      {
        content: $filter('date')(day.date, 'mediumDate'),
        colSpan: amountTaxableIndex
      }, {
        content: $translate.instant("DEPOSIT_AND_TAX_REPORT.TOTAL_DAILY") + ':',
        colSpan: result.columns.length - amountTaxableIndex - 1
      }, {
        content: ncurrency(day.total)
      }]);
      result.styles.push(reportStyles.h1);
      day.billingMethods.forEach(function (method) {
        result.rows.push([// billing method total
        {
          content: method.name,
          colSpan: amountTaxableIndex
        }, {
          content: $translate.instant("DEPOSIT_AND_TAX_REPORT.TOTAL_PAYMENT_METHOD") + ':',
          colSpan: result.columns.length - amountTaxableIndex - 1
        }, {
          content: ncurrency(method.total)
        }]);
        result.styles.push(reportStyles.h2);
        method.orders.forEach(function (order) {
          var _context3;

          result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default()(_context3 = result.columns).call(_context3, function (col) {
            return angular.isDefined(order[col.dataKey]) ? order[col.dataKey] : false;
          }));
          result.styles.push(reportStyles.h3);
          order.items.forEach(function (item, idx) {
            var _context4;

            result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default()(_context4 = result.columns).call(_context4, function (col) {
              return angular.isDefined(item[col.dataKey]) ? item[col.dataKey] : false;
            }));
            result.styles.push(idx % 2 ? null : reportStyles.rowOdd);
          });
        });
      });
    }); // Add empty row

    result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_fill__WEBPACK_IMPORTED_MODULE_4___default()(_context5 = Array(result.columns.length)).call(_context5, false));
    result.styles.push(null); // Add total rows

    var totalRowKeys = [{
      name: 'TOTAL_TAXABLE_AMOUNT',
      data: 'totalTaxableAmount'
    }, {
      name: 'TOTAL_NON_TAXABLE_AMOUNT',
      data: 'totalNonTaxableAmount'
    }, {
      name: 'TOTAL_CHARGES',
      data: 'totalCharges'
    }, {
      name: 'TOTAL_TAX',
      data: 'totalTax'
    }, {
      name: 'GRAND_TOTAL',
      data: 'grandTotal'
    }, {
      name: 'TOTAL_MEMBERSHIP',
      data: 'membership'
    }, {
      name: 'TOTAL_REGISTRATION',
      data: 'registration'
    }, {
      name: 'TOTAL_RENTAL',
      data: 'rental'
    }, {
      name: 'TOTAL_PRINT',
      data: 'print'
    }, {
      name: 'TOTAL_SERVICES',
      data: 'services'
    }];
    totalRowKeys.forEach(function (key, idx) {
      result.rows.push([{
        content: $translate.instant("DEPOSIT_AND_TAX_REPORT.".concat(key.name)) + ':',
        colSpan: result.columns.length - 1,
        styles: {
          halign: 'right'
        }
      }, {
        content: ncurrency(idx < 5 ? config.reportData[key.data] : config.reportData.totalsByProductType[key.data] || 0)
      }]);
      result.styles.push(reportStyles.h3);
    });
    return result;
  }
}]));

/***/ }),

/***/ "./bundles/reports/deposit-and-tax-report/deposit-and-tax-report.service.js":
/*!**********************************************************************************!*\
  !*** ./bundles/reports/deposit-and-tax-report/deposit-and-tax-report.service.js ***!
  \**********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * DepositAndTaxReport service
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.DepositAndTaxReport', ['ngResource', 'datesDeserializer', 'deskworks.config']).factory('DepositAndTaxReport', ["$resource", "datesDeserializer", "deskworksConfig", function ($resource, datesDeserializer, deskworksConfig) {
  var desDates = datesDeserializer('daily.date');
  var url = deskworksConfig.getApiAbsUrl('/reports/deposit-and-tax');
  var res = $resource(url, {
    centerId: '@centerId',
    fromDate: '@fromDate',
    toDate: '@toDate'
  }, {
    get: {
      method: 'GET',
      isArray: false,
      transformResponse: [angular.fromJson, desDates]
    }
  });
  return {
    get: function get(params) {
      return res.get(params).$promise // TODO: remove after fixing API
      .then(function (data) {
        return data.totalsByProductType = data.totalsByProductType || data.totalsTyProductType, data;
      });
    }
  };
}]));

/***/ }),

/***/ "./bundles/reports/deposit-and-tax-report/deposit-and-tax-report.tpl.html":
/*!********************************************************************************!*\
  !*** ./bundles/reports/deposit-and-tax-report/deposit-and-tax-report.tpl.html ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div id=\"depositAndTaxReport\" class=\"gutter-v\"> <form name=\"formDepositAndTaxReport\"> <h1 class=\"page-title\">{{state.getPageTitle()}}</h1> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <div class=\"gutter-v\"> <report-dates model=\"$ctrl.config.reportDates\"></report-dates> </div> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <report-options model=\"$ctrl.config.reportOptions\"> </report-options> </div> </div> <ff-btn-group class=\"buttons-bottom\"> <ff-btn sense=\"download\" ff-click=\"$ctrl.downloadPdf()\" ff-disabled=\"!$ctrl.pdf\"> <span translate=\"REPORTS.BTN_PDF\"></span> </ff-btn> <ff-btn sense=\"download\" ff-click=\"$ctrl.downloadCsv()\" ff-disabled=\"!$ctrl.pdf\"> <span translate=\"REPORTS.BTN_CSV\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\"REPORTS.PREVIEW.HEADER\"></span></ff-panel-header> <div pdf-preview=\"$ctrl.pdf\"></div> </ff-panel> </div> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/reports/deposit-transaction-report/deposit-transaction-report-columns.service.js":
/*!**************************************************************************************************!*\
  !*** ./bundles/reports/deposit-transaction-report/deposit-transaction-report-columns.service.js ***!
  \**************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);


/**
 * Columns for Deposit Transaction Report
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.depositTransactionReportColumns', ['deskworks.helper']).factory('depositTransactionReportColumns', ["$rootScope", "$filter", "$translate", "helper", function ($rootScope, $filter, $translate, helper) {
  var cols = [{
    dataKey: 'reference',
    _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.REFERENCE',
    include: true,
    pdf: function pdf(v) {
      return $filter('date')(v, 'mediumDate');
    },
    csv: function csv(v) {
      return $filter('date')(v, 'shortDate');
    }
  }, {
    dataKey: 'userName',
    _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.USER_NAME',
    include: true,
    defaultOrder: true
  }, {
    dataKey: 'payorName',
    _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.PAYOR',
    include: true
  }, {
    dataKey: 'userCompany',
    _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.COMPANY',
    include: true
  }, {
    dataKey: 'amount',
    _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.AMOUNT',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('ncurrency')(v);
    },
    csv: function csv(v) {
      return $filter('ncurrency')(v);
    }
  }, {
    dataKey: 'subtotal',
    _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.SUBTOTAL',
    include: true,
    readonly: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('ncurrency')(v);
    },
    csv: function csv(v) {
      return $filter('ncurrency')(v);
    }
  }, {
    dataKey: 'total',
    _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.TOTAL',
    include: true,
    readonly: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('ncurrency')(v);
    },
    csv: function csv(v) {
      return $filter('ncurrency')(v);
    }
  }, {
    dataKey: 'orderId',
    _title: 'DEPOSIT_TRANSACTION_REPORT.COLUMNS.ORDER_ID',
    include: false,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    }
  }];
  translate();
  $rootScope.$on('$setTranslationsSuccess', translate);

  function translate() {
    cols.forEach(function (col) {
      col.title = $translate.instant(col._title);
    });
  }

  return cols;
}]));

/***/ }),

/***/ "./bundles/reports/deposit-transaction-report/deposit-transaction-report.controller.js":
/*!*********************************************************************************************!*\
  !*** ./bundles/reports/deposit-transaction-report/deposit-transaction-report.controller.js ***!
  \*********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "../node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "../node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find-index */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find-index.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/slice */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/slice.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! shared/reports/directives/pdf-preview.directive */ "./shared/reports/directives/pdf-preview.directive.js");
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! shared/reports/services/report-styles.service */ "./shared/reports/services/report-styles.service.js");
/* harmony import */ var shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! shared/reports/directives/report-options.directive */ "./shared/reports/directives/report-options.directive.js");












/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.depositTransactionReport', [shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_8__["default"].name, shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_9__["default"].name, shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_10__["default"].name, shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_11__["default"].name, 'deskworks.state', 'deskworks.reports.ReportBuilder', 'deskworks.reports.reportDates', 'deskworks.reports.reportOwnerRegion', 'deskworks.reports.depositTransactionReport.service', 'deskworks.reports.depositTransactionReportColumns']).controller('DepositTransactionReportCtrl', ["$scope", "$timeout", "$filter", "$translate", "state", "helper", "reportStyles", "ReportBuilder", "reportHelper", "DepositTransactionReport", "depositTransactionReportColumns", "banks", "centers", function ($scope, $timeout, $filter, $translate, state, helper, reportStyles, ReportBuilder, reportHelper, DepositTransactionReport, depositTransactionReportColumns, banks, centers) {
  var vm = this;
  vm.config = {
    reportName: $translate.instant('DEPOSIT_TRANSACTION_REPORT.REPORT_NAME'),
    reportOptions: {},
    reportOwnerRegion: {},
    reportColumns: {
      columns: depositTransactionReportColumns
    },
    reportDates: {
      fromDate: moment(),
      toDate: moment()
    },
    getReportData: function getReportData() {
      return DepositTransactionReport.query({
        bankId: vm.config.reportOptions.bankId,
        centerId: vm.config.reportOptions.centerId || null,
        fromDate: $filter('date')(vm.config.reportDates.fromDate, 'yyyy-MM-dd'),
        toDate: $filter('date')(vm.config.reportDates.toDate, 'yyyy-MM-dd'),
        ownerId: vm.config.reportOwnerRegion.ownerId,
        regionId: vm.config.reportOwnerRegion.regionId
      }).$promise;
    }
  };
  state.setPageTitle(vm.config.reportName);
  vm.config.reportDates.fromDate.subtract(1, 'M').date(1); // set fromDate to first day of previous month

  vm.config.reportDates.toDate.date(0); // set toDate to last day of previous month

  vm.reportBuilder = new ReportBuilder(vm.config);
  /**
   * Filter centers list depending on bankId
   */

  $scope.$watch('vm.config.reportOptions.bankId', function (bankId) {
    if (!bankId) return;
    vm.centers = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default()(centers).call(centers, function (center) {
      return center.bankId === bankId;
    });
    vm.centers.unshift({
      id: 0,
      name: 'All Centers'
    });

    if (!helper.findByKeyValue(vm.centers, 'id', vm.config.reportOptions.centerId)) {
      vm.config.reportOptions.centerId = vm.centers[0].id;
      state.setParam('centerId', vm.config.reportOptions.centerId);
      state.replace();
    }
  });
  /**
   * Watch for data report depends on (center, columns, order) and generate new report
   */

  var debounceTimeout;
  $scope.$watch(function () {
    return {
      reportOptions: vm.config.reportOptions,
      reportDates: vm.config.reportDates,
      reportColumns: vm.config.reportColumns,
      reportOwnerRegion: vm.config.reportOwnerRegion,
      orderBy: vm.config.orderBy
    };
  }, function (newVal, oldVal) {
    if (debounceTimeout) {
      $timeout.cancel(debounceTimeout);
      debounceTimeout = null;
    }

    debounceTimeout = $timeout(function () {
      vm.pdf = null;
      if (angular.isUndefined(vm.config.reportOptions.bankId)) return;
      var newDate = newVal.reportDates.fromDate,
          oldDate = oldVal.reportDates.fromDate;
      if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;
      newDate = newVal.reportDates.toDate;
      oldDate = oldVal.reportDates.toDate;
      if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;
      if (newVal.reportOptions.bankId !== oldVal.reportOptions.bankId) vm.config.reportData = null;
      vm.reportBuilder.buildPdf(reportDataCallback).then(function (blob) {
        vm.pdf = blob;
      });
    }, 100);
  }, true);
  /**
   * Download generated PDF report
   */

  vm.downloadPdf = function () {
    if (!vm.pdf) {
      return;
    }

    reportHelper.download({
      blob: vm.pdf,
      fileName: vm.reportBuilder.getReportFileName('pdf')
    });
  };
  /**
  * Generate and download CSV report
  */


  vm.downloadCsv = function () {
    if (!vm.pdf) {
      return;
    }

    reportHelper.download({
      blob: vm.reportBuilder.buildCsv(reportDataCallback),
      fileName: vm.reportBuilder.getReportFileName('csv')
    });
  };
  /**
   * Report data callback for ReportBuilder, returns report data matrix and columns
   */


  function reportDataCallback(config) {
    var _context, _context2;

    var result = {
      columns: _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default()(_context = config.reportColumns.columns).call(_context, function (c) {
        return c.include;
      }),
      rows: [],
      styles: []
    };

    var idx,
        arr = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4___default()(_context2 = Array.apply(null, new Array(result.columns.length))).call(_context2, function (_) {
      return false;
    });

    config.reportData.forEach(function (dateTotal, index) {
      var _context3;

      idx = _babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_5___default()(_context3 = result.columns).call(_context3, function (c) {
        return c.dataKey === 'total';
      });

      if (idx >= 0) {
        var _context4, _context5, _context6;

        result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_6___default()(_context4 = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_6___default()(_context5 = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_6___default()(_context6 = [dateTotal.date]).call(_context6, _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_7___default()(arr).call(arr, 0, Math.max(idx - 2, 0)))).call(_context5, idx > 1 ? [$translate.instant('DEPOSIT_TRANSACTION_REPORT.TOTALS.DAILY') + ':', dateTotal.total] : [dateTotal.total])).call(_context4, _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_7___default()(arr).call(arr, 0, arr.length - idx - 1)));
        result.styles.push(reportStyles.h1);
      }

      dateTotal.billingMethods.forEach(function (billingMethod) {
        var _context7, _context11;

        idx = _babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_5___default()(_context7 = result.columns).call(_context7, function (c) {
          return c.dataKey === 'subtotal';
        });

        if (idx >= 0) {
          var _context8, _context9, _context10;

          result.rows.push(idx === 0 ? [billingMethod.subtotal] : _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_6___default()(_context8 = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_6___default()(_context9 = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_6___default()(_context10 = [billingMethod.name + ' ' + $translate.instant('DEPOSIT_TRANSACTION_REPORT.TOTALS.DEPOSITS')]).call(_context10, _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_7___default()(arr).call(arr, 0, Math.max(idx - 3, 0)))).call(_context9, idx > 2 ? [billingMethod.name + ' ' + $translate.instant('DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL') + ':', false, billingMethod.subtotal] : idx === 2 ? [billingMethod.name + ' ' + $translate.instant('DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL') + ':', billingMethod.subtotal] : idx === 1 ? [billingMethod.subtotal] : [])).call(_context8, _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_7___default()(arr).call(arr, 0, arr.length - idx - 1)));
          result.styles.push(reportStyles.h2);
        }

        var payments = vm.reportBuilder.sortData(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_6___default()([]).apply([], _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4___default()(_context11 = billingMethod.centers).call(_context11, function (center) {
          return center.payments;
        })), config.orderBy);
        payments.forEach(function (payment, idx) {
          var _context12;

          result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4___default()(_context12 = result.columns).call(_context12, function (col) {
            return col.dataKey === 'subtotal' || col.dataKey === 'total' ? false : payment[col.dataKey];
          }));
          result.styles.push(idx % 2 ? null : reportStyles.rowOdd);
        });
        billingMethod.centers.forEach(function (center) {
          var _context13;

          idx = _babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_5___default()(_context13 = result.columns).call(_context13, function (c) {
            return c.dataKey === 'subtotal';
          });

          if (idx >= 0) {
            var _context14, _context15;

            result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_6___default()(_context14 = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_6___default()(_context15 = _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_7___default()(arr).call(arr, 0, Math.max(idx - 2, 0))).call(_context15, idx > 2 ? [center.name + ' ' + $translate.instant('DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL') + ':', false, center.subtotal] : idx > 0 ? [center.name + ' ' + $translate.instant('DEPOSIT_TRANSACTION_REPORT.TOTALS.SUBTOTAL') + ':', center.subtotal] : [center.subtotal])).call(_context14, _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_7___default()(arr).call(arr, 0, arr.length - idx - 1)));
          }

          result.styles.push(reportStyles.h3);
        });
        result.rows.push(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_7___default()(arr).call(arr));
        result.styles.push(null);
      });
    });
    return result;
  }
}]));

/***/ }),

/***/ "./bundles/reports/deposit-transaction-report/deposit-transaction-report.service.js":
/*!******************************************************************************************!*\
  !*** ./bundles/reports/deposit-transaction-report/deposit-transaction-report.service.js ***!
  \******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * DepositTransactionReport service
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.depositTransactionReport.service', ['ngResource', 'deserializeNumbers', 'datesDeserializer', 'deskworks.config']).factory('DepositTransactionReport', ["$resource", "datesDeserializer", "deserializeNumbers", "deskworksConfig", function ($resource, datesDeserializer, deserializeNumbers, deskworksConfig) {
  var url = deskworksConfig.getApiAbsUrl('/banks/:bankId/deposit-transaction-reports');
  var desDates = datesDeserializer(['date', 'billingMethods.centers.payments.date']);
  var numbersDeserializer = deserializeNumbers(['billingMethods.centers.payments.amount']);
  return $resource(url, {
    bankId: '@bankId',
    centerId: '@centerId',
    fromDate: '@fromDate',
    toDate: '@toDate'
  }, {
    query: {
      method: 'GET',
      isArray: true,
      transformResponse: [angular.fromJson, desDates, numbersDeserializer]
    }
  });
}]));

/***/ }),

/***/ "./bundles/reports/deposit-transaction-report/deposit-transaction-report.tpl.html":
/*!****************************************************************************************!*\
  !*** ./bundles/reports/deposit-transaction-report/deposit-transaction-report.tpl.html ***!
  \****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div id=\"depositTransactionReport\" class=\"gutter-v\"> <form name=\"formDepositTransactionReport\"> <h1 class=\"page-title\">{{state.getPageTitle()}}</h1> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <div class=\"gutter-v\"> <report-dates model=\"vm.config.reportDates\"></report-dates> <report-columns model=\"vm.config.reportColumns\"></report-columns> </div> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=\"gutter-v\"> <report-options model=\"vm.config.reportOptions\" banks=\"$resolve.banks\" centers=\"vm.centers\"> <report-order-by model=\"vm.config.orderBy\" report-columns=\"vm.config.reportColumns.columns\"></report-order-by> </report-options> <report-owner-region model=\"vm.config.reportOwnerRegion\" report-data=\"vm.config.reportData\"></report-owner-region> </div> </div> </div> <ff-btn-group class=\"buttons-bottom\"> <ff-btn sense=\"download\" ff-click=\"vm.downloadPdf()\" ff-disabled=\"!vm.pdf\"> <span translate=\"REPORTS.BTN_PDF\"></span> </ff-btn> <ff-btn sense=\"download\" ff-click=\"vm.downloadCsv()\" ff-disabled=\"!vm.pdf\"> <span translate=\"REPORTS.BTN_CSV\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\"REPORTS.PREVIEW.HEADER\"></span></ff-panel-header> <div pdf-preview=\"vm.pdf\"></div> </ff-panel> </div> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/reports/directives/report-columns.directive.js":
/*!****************************************************************!*\
  !*** ./bundles/reports/directives/report-columns.directive.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "../node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.string.search.js */ "../node_modules/core-js/modules/es.string.search.js");
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.string.split.js */ "../node_modules/core-js/modules/es.string.split.js");
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.array.join.js */ "../node_modules/core-js/modules/es.array.join.js");
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "../node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7__);









/**
 * reportColumns directive - wraps report columns including and sorting
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.reportColumns', ['deskworks.helper']).directive('reportColumns', ["$compile", "$templateCache", function ($compile, $templateCache) {
  var templateUrl = 'directives/report-columns.tpl.html';
  return {
    restrict: 'E',
    scope: true,
    transclude: 'element',
    priority: 2,
    // To be higher than ngModel directive with priority: 1
    controller: 'ReportColumnsCtrl as $ctrl',
    bindToController: {
      model: '<'
    },
    link: function link($scope, $element, $attrs, $ctrl, $transclude) {
      $transclude(function () {
        $element.after($compile($templateCache.get(templateUrl))($scope));
      });
    }
  };
}]).controller('ReportColumnsCtrl', ["$scope", "$location", "helper", function ($scope, $location, helper) {
  var $ctrl = this;
  /**
   * $onInit
   */

  $ctrl.$onInit = function () {
    watchColumns();
  };
  /**
   * Map columns to URL search param
   */


  function watchColumns() {
    $scope.$watch(function () {
      return $location.search().columns;
    }, function (val) {
      if (val) {
        $ctrl.model.columns.forEach(function (col) {
          col.include = false;
        });
        val.split(',').forEach(function (colId) {
          (helper.findByKeyValue($ctrl.model.columns, 'dataKey', colId) || {}).include = true;
        });
      }
    });
    $scope.$watchCollection(function () {
      var _context;

      return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(_context = $ctrl.model.columns).call(_context, function (col) {
        return !!col.include;
      });
    }, function () {
      var _context2, _context3;

      // Calculate left column items count
      $ctrl.leftColCount = $ctrl.rightColCount = Math.floor($ctrl.model.columns.length / 2);

      if ($ctrl.leftColCount + $ctrl.rightColCount < $ctrl.model.columns.length) {
        $ctrl.leftColCount++;
      }

      var columns = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(_context2 = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1___default()(_context3 = $ctrl.model.columns).call(_context3, function (col) {
        return col.include;
      })).call(_context2, function (col) {
        return col.dataKey;
      }).join(',');

      $location.search('columns', columns).replace();
    });
  }
}]));

/***/ }),

/***/ "./bundles/reports/directives/report-columns.tpl.html":
/*!************************************************************!*\
  !*** ./bundles/reports/directives/report-columns.tpl.html ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<ff-panel> <ff-panel-header><span translate=\"REPORTS.COLUMNS.HEADER\"></span></ff-panel-header> <div class=\"ff-grid\"> <ff-header flex=\"{lg: '0 0 50%'}\"> <ff-row> <cell flex=\"0 0 32px\" class=\"ff-center\" title=\"{{'GLOBAL.INCLUDE' | translate}}\"> <ff-icon sense=\"check\"></ff-icon> </cell> <cell translate=\"REPORTS.COLUMNS.COLUMN\"></cell> </ff-row> </ff-header> <ff-header flex=\"{lg: '0 0 50%'}\" class=\"show-lg\"> <ff-row> <cell flex=\"0 0 32px\" class=\"ff-center\" title=\"{{'GLOBAL.INCLUDE' | translate}}\"> <ff-icon sense=\"check\"></ff-icon> </cell> <cell translate=\"REPORTS.COLUMNS.COLUMN\"></cell> </ff-row> </ff-header> </div> <div class=\"ff-grid\"> <ff-col flex=\"{lg: '0 0 50%'}\"> <ff-row ng-repeat=\"column in $ctrl.model.columns | limitTo: $ctrl.leftColCount\"> <ff-checkbox class=\"ff-center ff-control\" flex=\"0 0 32px\" ff-model=\"column.include\" ff-disabled=\"column.readonly\"></ff-checkbox> <ff-static ff-bind=\"column.title\"></ff-static> </ff-row> </ff-col> <ff-col flex=\"{lg: '0 0 50%'}\"> <ff-row ng-repeat=\"column in $ctrl.model.columns | limitTo: $ctrl.rightColCount : $ctrl.leftColCount\"> <ff-checkbox class=\"ff-center ff-control\" flex=\"0 0 32px\" ff-model=\"column.include\" ff-disabled=\"column.readonly\"></ff-checkbox> <ff-static ff-bind=\"column.title\"></ff-static> </ff-row> </ff-col> </div> </ff-panel> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/reports/directives/report-dates.directive.js":
/*!**************************************************************!*\
  !*** ./bundles/reports/directives/report-dates.directive.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "../node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.string.search.js */ "../node_modules/core-js/modules/es.string.search.js");
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "../node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);




/**
 * reportDates directive - wraps report 'From Date' and 'To Date'
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.reportDates', ['deskworks.helper']).directive('reportDates', ["$compile", "$templateCache", function ($compile, $templateCache) {
  var templateUrl = 'directives/report-dates.tpl.html';
  return {
    restrict: 'EAC',
    scope: true,
    transclude: 'element',
    priority: 2,
    // To be higher than ngModel directive with priority: 1
    controller: 'ReportDatesCtrl as $ctrl',
    bindToController: {
      model: '<',
      embed: '@' // if presents, flexForm and ffTwoColumns wrapping is disabled and attribute flex={{embed}}

    },
    link: function link($scope, $element, $attrs, $ctrl, $transclude) {
      $transclude(function (clone, newScope) {
        var tpl = $compile($templateCache.get(templateUrl))($scope);
        angular.element(tpl[0].querySelector ? tpl[0].querySelector('.ff-panel-body') : tpl).append(clone); // append custom content before compilation

        $element.after(tpl);
      });
    }
  };
}]).controller('ReportDatesCtrl', ["$scope", "$location", "$filter", "state", "helper", function ($scope, $location, $filter, state, helper) {
  var $ctrl = this;
  /**
   * $onInit
   */

  $ctrl.$onInit = function () {
    if ($ctrl.model.fromDate !== false) watchFromDate();
    if ($ctrl.model.toDate !== false) watchToDate();
  };
  /**
   * Map fromDate to URL search param
   */


  function watchFromDate() {
    $scope.$watch(function () {
      return $location.search().fromDate;
    }, function (val) {
      var date = $filter('toDate')(val);
      $ctrl.model.fromDate = moment.isMoment(date) && !$ctrl.model.fromDate.isSame(date) ? date : $ctrl.model.fromDate;
    });
    $scope.$watch('$ctrl.model.fromDate', function (val) {
      if (!moment.isMoment(val)) return;
      $location.search('fromDate', $filter('date')(val, 'yyyy-MM-dd')).replace();
    });
  }
  /**
   * Map toDate to URL search param
   */


  function watchToDate() {
    $scope.$watch(function () {
      return $location.search().toDate;
    }, function (val) {
      var date = $filter('toDate')(val);
      $ctrl.model.toDate = moment.isMoment(date) && !$ctrl.model.toDate.isSame(date) ? date : $ctrl.model.toDate;
    });
    $scope.$watch('$ctrl.model.toDate', function (val) {
      if (!moment.isMoment(val)) return;
      $location.search('toDate', $filter('date')(val, 'yyyy-MM-dd')).replace();
    });
  }
}]));

/***/ }),

/***/ "./bundles/reports/directives/report-dates.tpl.html":
/*!**********************************************************!*\
  !*** ./bundles/reports/directives/report-dates.tpl.html ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<ff-panel ng-hide=\"$ctrl.embed\"> <ff-panel-header><span translate=\"REPORTS.PERIOD.HEADER\"></span></ff-panel-header> <div class=\"ff-grid\"> <label class=\"ff-row\" flex=\"{lg: '0 0 50%'}\" ng-if=\"$ctrl.model.fromDate !== false\"> <ff-label flex=\"{lg: '0 0 90px', xs: '0 0 100px'}\" ff-required=\"true\"><span translate=\"REPORTS.PERIOD.FROM_DATE\"></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=\"$ctrl.model.fromDate\" ff-required=\"true\" ff-date-order=\"{ early: $ctrl.model.fromDate, late: $ctrl.model.toDate }\" ff-validate-alert=\"{ field: '{{'REPORTS.PERIOD.FROM_DATE' | translate}}', late: '{{'REPORTS.PERIOD.TO_DATE' | translate}}' }\"></ff-date> <span class=\"ff-label\"></span> </label> <label class=\"ff-row\" flex=\"{lg: $ctrl.model.fromDate === false ? 'auto' : '0 0 50%'}\"> <ff-label flex=\"{lg: '0 0 72px', xs: '0 0 100px'}\" ff-required=\"true\"><span translate=\"REPORTS.PERIOD.TO_DATE\"></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=\"$ctrl.model.toDate\" ff-required=\"true\" ff-date-order=\"{ early: $ctrl.model.fromDate, late: $ctrl.model.toDate }\" ff-validate-alert=\"{ field: '{{'REPORTS.PERIOD.TO_DATE' | translate}}', early: '{{'REPORTS.PERIOD.FROM_DATE' | translate}}' }\"></ff-date> <span class=\"ff-label\"></span> </label> </div> </ff-panel> <label class=\"ff-row\" ng-if=\"$ctrl.embed && $ctrl.model.fromDate !== false\"> <ff-label flex=\"{{$ctrl.embed}}\" ff-required=\"true\"><span translate=\"REPORTS.PERIOD.FROM_DATE\"></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=\"$ctrl.model.fromDate\" ff-required=\"true\" ff-validate-alert=\"{{'REPORTS.PERIOD.FROM_DATE' | translate}}\"></ff-date> <span class=\"ff-label\"></span> </label> <label class=\"ff-row\" ng-if=\"$ctrl.embed\"> <ff-label flex=\"{{$ctrl.embed}}\" ff-required=\"true\"><span translate=\"REPORTS.PERIOD.TO_DATE\"></span></ff-label> <ff-date flex=\"0 0 124px\" ff-model=\"$ctrl.model.toDate\" ff-required=\"true\" ff-validate-alert=\"{{'REPORTS.PERIOD.TO_DATE' | translate}}\"></ff-date> <span class=\"ff-label\"></span> </label> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/reports/directives/report-order-by.directive.js":
/*!*****************************************************************!*\
  !*** ./bundles/reports/directives/report-order-by.directive.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_fill__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/fill */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/fill.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_fill__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_fill__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "../node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.string.split.js */ "../node_modules/core-js/modules/es.string.split.js");
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.string.search.js */ "../node_modules/core-js/modules/es.string.search.js");
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "../node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.array.join.js */ "../node_modules/core-js/modules/es.array.join.js");
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _report_order_by_tpl_html__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./report-order-by.tpl.html */ "./bundles/reports/directives/report-order-by.tpl.html");
/* harmony import */ var _report_order_by_tpl_html__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_report_order_by_tpl_html__WEBPACK_IMPORTED_MODULE_10__);











/**
 * reportOrderBy directive - sorting report control
 */

/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reportOrderBy', []).directive('reportOrderBy', ["$compile", function ($compile) {
  return {
    restrict: 'E',
    scope: true,
    transclude: 'element',
    priority: 2,
    // To be higher than ngModel directive with priority: 1
    controller: 'ReportOrderByCtrl as $ctrl',
    bindToController: {
      model: '=',
      reportColumns: '<',
      levelsCount: '<levels'
    },
    link: function link($scope, $element, $attrs, $ctrl, $transclude) {
      $transclude(function (clone, newScope) {
        var tpl = $compile(_report_order_by_tpl_html__WEBPACK_IMPORTED_MODULE_10___default.a)($scope);
        angular.element(tpl[0].querySelector ? tpl[0].querySelector('.ff-panel-body') : tpl).append(clone); // append custom content before compilation

        $element.after(tpl);
      });
    }
  };
}]).controller('ReportOrderByCtrl', ["$scope", "$location", function ($scope, $location) {
  var $ctrl = this;
  /**
   * $onInit
   */

  $ctrl.$onInit = function () {
    initLevels();
    var orders = ($location.search().orderBy || '').split(',');
    $ctrl.levels.forEach(function (level, idx) {
      var _context, _context2;

      level.order = (orders[idx] ? _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0___default()(_context = level.cols).call(_context, function (c) {
        return c.dataKey === orders[idx];
      }) : _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0___default()(_context2 = level.cols).call(_context2, function (c) {
        return c.defaultOrder === true;
      }) || level.cols[0]).dataKey;
    });
    watchOrderBy();
  };
  /**
   * Init levels
   */


  function initLevels() {
    var _context3, _context4;

    if (!$ctrl.levels) $ctrl.levels = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default()(_context3 = _babel_runtime_corejs3_core_js_stable_instance_fill__WEBPACK_IMPORTED_MODULE_2___default()(_context4 = new Array($ctrl.levelsCount || 1)).call(_context4, null)).call(_context3, function () {
      return {};
    });
    var exclude = [];
    $ctrl.levels.forEach(function (level, index) {
      var _context5;

      level.cols = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default()(_context5 = $ctrl.reportColumns).call(_context5, function (col) {
        if (exclude.indexOf(col.dataKey) < 0) {
          return true;
        } else {
          if (col.dataKey === level.order) level.order = null;
        }
      });
      if (index) level.cols.unshift({
        dataKey: null,
        title: '-'
      });
      if (level.order) exclude.push(level.order);
    });
  }
  /**
   * Map orderBy to URL search param
   */


  function watchOrderBy() {
    $scope.$watchCollection(function () {
      var _context6, _context7;

      return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default()(_context6 = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default()(_context7 = $ctrl.levels).call(_context7, function (level) {
        return !!level.order;
      })).call(_context6, function (level) {
        return level.order;
      });
    }, function (val) {
      var _context8, _context9;

      initLevels();

      var orders = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default()(_context8 = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default()(_context9 = $ctrl.levels).call(_context9, function (level) {
        return level.order;
      })).call(_context8, function (order) {
        return !!order;
      });

      $location.search('orderBy', orders.join(',')).replace();
      $ctrl.model = $ctrl.levelsCount > 1 ? orders : orders[0];
    });
  }
}]));

/***/ }),

/***/ "./bundles/reports/directives/report-order-by.tpl.html":
/*!*************************************************************!*\
  !*** ./bundles/reports/directives/report-order-by.tpl.html ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<label class=\"ff-row\" ng-repeat=\"level in $ctrl.levels track by $index\"> <ff-label flex=\"0 0 100px\"> <span translate=\"REPORTS.COLUMNS.ORDER_BY\" ng-if=\"!$index\"></span> <span translate=\"REPORTS.COLUMNS.THEN_ORDER_BY\" ng-if=\"$index\" style=\"font-size:.925em\"></span> </ff-label> <ff-select ff-model=\"level.order\" ff-options=\"col.dataKey as col.title for col in level.cols\"></ff-select> </label> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/reports/directives/report-owner-region.directive.js":
/*!*********************************************************************!*\
  !*** ./bundles/reports/directives/report-owner-region.directive.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "../node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.string.search.js */ "../node_modules/core-js/modules/es.string.search.js");
/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "../node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);




/**
 * reportOwnerRegion directive - wraps report filters: owner, region
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.reportOwnerRegion', ['deskworks.Owner', 'deskworks.Region', 'deskworks.setup.service']).directive('reportOwnerRegion', ["$compile", "$templateCache", function ($compile, $templateCache) {
  var templateUrl = 'directives/report-owner-region.tpl.html';
  return {
    restrict: 'EAC',
    scope: true,
    transclude: 'element',
    priority: 2,
    // To be higher than ngModel directive with priority: 1
    controller: 'ReportOwnerRegionCtrl as $ctrl',
    bindToController: {
      model: '<',
      reportData: '='
    },
    link: function link($scope, $element, $attrs, $ctrl, $transclude) {
      $transclude(function (clone, newScope) {
        var tpl = $compile($templateCache.get(templateUrl))($scope);
        angular.element(tpl[0].querySelector ? tpl[0].querySelector('.ff-panel-body') : tpl).append(clone); // append custom content before compilation

        $element.after(tpl);
      });
    }
  };
}]).controller('ReportOwnerRegionCtrl', ["$scope", "$location", "$translate", "$q", "dwAlerts", "Owner", "Region", "setupService", "state", function ($scope, $location, $translate, $q, dwAlerts, Owner, Region, setupService, state) {
  var $ctrl = this;
  if (state.getLoggedUser().role !== 'master') return;
  /**
   * $onInit
   */

  $ctrl.$onInit = function () {
    fetchData();
    if ($ctrl.model.ownerId !== false) watchOwnerId();
    if ($ctrl.model.regionId !== false) watchRegionId();
  };

  function fetchData() {
    return setupService.getSetupSettings().catch(function (err) {
      return dwAlerts(err, 'Failed to get setup settings.');
    }).then(function (settings) {
      if (settings.isFranchise) {
        return $q.all([Owner.query().catch(function (err) {
          return dwAlerts(err, 'Failed to query owners.');
        }).then(function (owners) {
          $ctrl.owners = owners;
          $ctrl.owners.unshift({
            name: $translate.instant('REPORTS.OWNER_REGION.OWNER.ALL')
          });
        }), Region.query().catch(function (err) {
          return dwAlerts(err, 'Failed to query regions.');
        }).then(function (regions) {
          $ctrl.regions = regions;
          $ctrl.regions.unshift({
            name: $translate.instant('REPORTS.OWNER_REGION.REGION.ALL')
          });
        })]);
      }
    });
  }
  /**
   * Map ownerId to URL search param
   */


  function watchOwnerId() {
    $scope.$watch(function () {
      return $location.search().ownerId;
    }, function (newVal, oldVal) {
      $ctrl.model.ownerId = newVal || newVal === 0 ? +newVal : $ctrl.owners && $ctrl.owners[0] && $ctrl.owners[0].id;
      if (newVal !== oldVal) $ctrl.reportData = null;
    });
    $scope.$watch('$ctrl.model.ownerId', function (val) {
      $location.search('ownerId', val).replace();
    });
  }
  /**
   * Map regionId to URL search param
   */


  function watchRegionId() {
    $scope.$watch(function () {
      return $location.search().regionId;
    }, function (newVal, oldVal) {
      $ctrl.model.regionId = newVal || newVal === 0 ? +newVal : $ctrl.regions && $ctrl.regions[0] && $ctrl.regions[0].id;
      if (newVal !== oldVal) $ctrl.reportData = null;
    });
    $scope.$watch('$ctrl.model.regionId', function (val) {
      $location.search('regionId', val).replace();
    });
  }

  $ctrl.onChange = function () {
    if ($ctrl.model.ownerId || $ctrl.model.regionId) $scope.vm.config.reportOptions.centerId = 0;
  };
}]));

/***/ }),

/***/ "./bundles/reports/directives/report-owner-region.tpl.html":
/*!*****************************************************************!*\
  !*** ./bundles/reports/directives/report-owner-region.tpl.html ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<ff-panel ng-if=\"$ctrl.owners && $ctrl.regions\"> <ff-panel-header><span translate=\"REPORTS.OWNER_REGION.HEADER\"></span></ff-panel-header> <label class=\"ff-row\"> <ff-label flex=\"0 0 100px\"><span translate=\"REPORTS.OWNER_REGION.OWNER\"></span></ff-label> <ff-select ff-model=\"$ctrl.model.ownerId\" ff-options=\"owner.id as owner.name for owner in $ctrl.owners\" ff-change=\"$ctrl.onChange()\"></ff-select> </label> <label class=\"ff-row\"> <ff-label flex=\"0 0 100px\"><span translate=\"REPORTS.OWNER_REGION.REGION\"></span></ff-label> <ff-select ff-model=\"$ctrl.model.regionId\" ff-options=\"region.id as region.name for region in $ctrl.regions\" ff-change=\"$ctrl.onChange()\"></ff-select> </label> </ff-panel> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/reports/income-by-item-report/income-by-item-report-chart.service.js":
/*!**************************************************************************************!*\
  !*** ./bundles/reports/income-by-item-report/income-by-item-report-chart.service.js ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "../node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.string.split.js */ "../node_modules/core-js/modules/es.string.split.js");
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "../node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.array.join.js */ "../node_modules/core-js/modules/es.array.join.js");
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var shared_reports_services_report_sort_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! shared/reports/services/report-sort.service */ "./shared/reports/services/report-sort.service.js");










/**
 * Pie chart for Income by Item Report
 */

/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.incomeByItemReportChart', [shared_reports_services_report_sort_service__WEBPACK_IMPORTED_MODULE_9__["default"].name]).factory('incomeByItemReportChart', ["$filter", "helper", "reportSort", function ($filter, helper, reportSort) {
  return dataToChart;

  function dataToChart(_ref) {
    var data = _ref.data,
        onClick = _ref.onClick,
        levels = _ref.levels,
        multiLevelProductCategory = _ref.multiLevelProductCategory,
        productCategories = _ref.productCategories;
    var categories = [];
    data.forEach(function (productType) {
      categories = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_0___default()(categories).call(categories, productType.productCategories);
    });
    var converters = [pieByCategories, pieByProducts, pieByUsers];
    if (multiLevelProductCategory) converters.unshift(pieBySupCategories);
    var list = converters[levels.length](categories, levels, productCategories);
    return {
      type: 'pie',
      data: {
        codes: _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default()(list).call(list, function (i) {
          return i.code;
        }),
        labels: _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default()(list).call(list, function (i) {
          return i.name;
        }),
        datasets: [{
          data: _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default()(list).call(list, function (i) {
            return helper.round(i.value);
          })
        }]
      },
      options: {
        tooltips: {
          callbacks: {
            label: function label(tooltipItem, data) {
              return data.labels[tooltipItem.index] + ': ' + $filter('ncurrency')(data.datasets[0].data[tooltipItem.index]);
            }
          }
        },
        legend: {
          display: true,
          position: 'right'
        },
        onClick: onClick
      }
    };
  }
  /**
   * By Super Categories
   */


  function pieBySupCategories(categories, levels, productCategories) {
    var list = [];
    categories.forEach(function (category) {
      var supCode = category.code.split('-')[0];

      var item = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2___default()(list).call(list, function (i) {
        return i.code === supCode;
      });

      var pc = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2___default()(productCategories).call(productCategories, function (i) {
        var arr = i.code.split('-');
        return supCode === arr[0] && (!arr[1] || arr[1].replace(/0/g, '').length === 0);
      }) || {};

      if (!item) {
        item = {
          code: supCode,
          name: helper.join([pc.name || category.name, '[' + supCode + ']'], ' '),
          value: 0,
          catsCount: 0,
          cats: []
        };
        list.push(item);
      }

      item.catsCount++;
      item.cats.push(category);
      category.products.forEach(function (product) {
        item.value += helper.toNumber(product.amount);
      });
    });
    list = reportSort(list, 'value', true); // const others = list.slice(10);
    // list = list.slice(0, 10);
    // if (others.length) {
    //   const total = Math.max(others.reduce((total, item) => total + item.value, 0), 0);
    //   list.push({ name: 'Others', value: total });
    // }

    return list;
  }
  /**
   * By Categories
   */


  function pieByCategories(categories, levels) {
    var _context;

    if (levels.length) {
      var code = levels[levels.length - 1].code;
      categories = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default()(categories).call(categories, function (cat) {
        return cat.code.indexOf(code) === 0;
      });
    }

    return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default()(_context = rangeCategories(categories) // .slice(0, 10)
    ).call(_context, function (cat) {
      return {
        code: cat.code,
        name: helper.join([cat.name, '[' + cat.code + ']'], ' '),
        value: cat.total
      };
    });
  }
  /**
   * By Products
   */


  function pieByProducts(categories, levels) {
    var _context2;

    var categoryCode = levels[levels.length - 1].code;

    var category = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2___default()(_context2 = rangeCategories(categories)).call(_context2, function (cat) {
      return cat.code === categoryCode;
    });

    var list = [];
    category.products.forEach(function (product) {
      var item = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2___default()(list).call(list, function (item) {
        return item.code === product.code;
      });

      if (!item) {
        item = {
          code: product.code,
          name: helper.join([product.name, '[' + product.code + ']'], ' '),
          value: 0
        };
        list.push(item);
      }

      item.value += helper.toNumber(product.amount);
    });
    list = reportSort(list, 'value', true);
    return list;
  }
  /**
   * By Users
   */


  function pieByUsers(categories, levels) {
    var _context3;

    var categoryCode = levels[levels.length - 2].code;
    var productCode = levels[levels.length - 1].code;

    var category = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2___default()(_context3 = rangeCategories(categories)).call(_context3, function (cat) {
      return cat.code === categoryCode;
    });

    var list = [];
    category.products.forEach(function (product) {
      if (product.code !== productCode) return;

      var item = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2___default()(list).call(list, function (item) {
        return item.name === product.userName;
      });

      if (!item) {
        item = {
          code: product.code,
          name: product.userName,
          value: 0
        };
        list.push(item);
      }

      item.value += helper.toNumber(product.amount);
    });
    list = reportSort(list, 'value', true);
    return list;
  }
  /**
   * Merge products from different categories, calculate totals, sort
   */


  function rangeCategories(categories) {
    var ranged = [];
    categories.forEach(function (category) {
      // merge categories with same code
      var cat = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2___default()(ranged).call(ranged, function (cat) {
        return cat.code === category.code;
      });

      if (cat) {
        var _context4;

        cat.products = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_0___default()(_context4 = cat.products).call(_context4, category.products); // merge products
      } else {
        cat = angular.copy(category);
        cat.total = 0;
        ranged.push(cat);
      }
    });
    ranged.forEach(function (category) {
      // calculate totals
      category.products.forEach(function (product) {
        category.total += helper.toNumber(product.amount);
      });
    });
    return reportSort(ranged, 'total', true);
  }
}]));

/***/ }),

/***/ "./bundles/reports/income-by-item-report/income-by-item-report-columns.service.js":
/*!****************************************************************************************!*\
  !*** ./bundles/reports/income-by-item-report/income-by-item-report-columns.service.js ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);


/**
 * Columns for Income By Item Report
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.incomeByItemReportColumns', []).factory('incomeByItemReportColumns', ["$rootScope", "$filter", "$translate", function ($rootScope, $filter, $translate) {
  var cols = [{
    dataKey: 'productCode',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE',
    include: true,
    styles: {
      cellWidth: 'wrap'
    }
  }, {
    dataKey: 'productName',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME',
    include: true
  }, {
    dataKey: 'userName',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME',
    include: true
  }, {
    dataKey: 'orderNo',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    }
  }, {
    dataKey: 'date',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.DATE',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('date')(v, 'mediumDate');
    },
    csv: function csv(v) {
      return $filter('date')(v, 'shortDate');
    }
  }, {
    dataKey: 'qty',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    }
  }, {
    dataKey: 'amount',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('ncurrency')(v);
    },
    csv: function csv(v) {
      return $filter('ncurrency')(v);
    }
  }, {
    dataKey: 'subtotal',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.SUBTOTAL',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('ncurrency')(v);
    },
    csv: function csv(v) {
      return $filter('ncurrency')(v);
    }
  }, {
    dataKey: 'total',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('ncurrency')(v);
    },
    csv: function csv(v) {
      return $filter('ncurrency')(v);
    }
  }];
  translate();
  $rootScope.$on('$setTranslationsSuccess', translate);

  function translate() {
    cols.forEach(function (col) {
      col.title = $translate.instant(col._title);
    });
  }

  return cols;
}]));

/***/ }),

/***/ "./bundles/reports/income-by-item-report/income-by-item-report-data.service.js":
/*!*************************************************************************************!*\
  !*** ./bundles/reports/income-by-item-report/income-by-item-report-data.service.js ***!
  \*************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.array.join.js */ "../node_modules/core-js/modules/es.array.join.js");
/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _income_by_item_report_columns_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./income-by-item-report-columns.service */ "./bundles/reports/income-by-item-report/income-by-item-report-columns.service.js");



/**
 * Data to report converter for Income By Item Report
 */

/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.incomeByItemReportData', [_income_by_item_report_columns_service__WEBPACK_IMPORTED_MODULE_2__["default"].name]).factory('incomeByItemReportData', ["$filter", "$translate", "helper", "reportStyles", "incomeByItemReportColumns", function ($filter, $translate, helper, reportStyles, incomeByItemReportColumns) {
  return dataToReport;
  /**
   * @param params
   * @param data
   * @returns {{columns: Array, styles: Array, rows: Array}}
   */

  function dataToReport(params, data) {
    var result = {
      columns: incomeByItemReportColumns,
      rows: [],
      styles: []
    };
    var total = 0;
    data.forEach(function (productType) {
      var typeTotal = 0;
      result.rows.push([false, $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.ITEM_TYPE') + ': ' + productType.name, false, false, false, false, false, false, false]);
      result.styles.push(reportStyles.h1);
      productType.productCategories.forEach(function (category) {
        var categoryTotal = 0;
        category.products.forEach(function (product, idx) {
          result.rows.push([product.code, product.name, product.userName, product.orderNo, product.date, product.qty, product.amount, false, false]);
          result.styles.push(idx % 2 ? null : reportStyles.rowOdd);
          categoryTotal += helper.toNumber(product.amount);
        });
        typeTotal += categoryTotal;
        var categoryTotalName = helper.join([category.name, '[' + category.code + ']', $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.TOTAL')], ' ');
        result.rows.push([false, categoryTotalName, false, false, false, false, false, helper.round(categoryTotal), false]);
        result.styles.push(reportStyles.h2);
      });
      total += typeTotal;
      result.rows.push([false, false, $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.TOTAL') + ' ' + productType.name, false, false, false, false, false, helper.round(typeTotal)]);
      result.styles.push(reportStyles.h3);
      result.rows.push([false, false, false, false, false, false, false, false, false]);
      result.styles.push(null);
    });
    result.rows.push([false, false, false, false, false, false, false, $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.INCOME') + ':', helper.round(total)]);
    result.styles.push(reportStyles.h3);
    return result;
  }
}]));

/***/ }),

/***/ "./bundles/reports/income-by-item-report/income-by-item-report.controller.js":
/*!***********************************************************************************!*\
  !*** ./bundles/reports/income-by-item-report/income-by-item-report.controller.js ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ "../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ "../node_modules/@babel/runtime-corejs3/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! shared/reports/directives/pdf-preview.directive */ "./shared/reports/directives/pdf-preview.directive.js");
/* harmony import */ var shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! shared/charts/chart.directive */ "./shared/charts/chart.directive.js");
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! shared/reports/services/report-styles.service */ "./shared/reports/services/report-styles.service.js");
/* harmony import */ var shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! shared/reports/directives/report-options.directive */ "./shared/reports/directives/report-options.directive.js");
/* harmony import */ var shared_reports_api_income_by_item_report_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! shared/reports/api/income-by-item-report.service */ "./shared/reports/api/income-by-item-report.service.js");
/* harmony import */ var _income_by_item_report_data_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./income-by-item-report-data.service */ "./bundles/reports/income-by-item-report/income-by-item-report-data.service.js");
/* harmony import */ var _income_by_member_report_data_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./income-by-member-report-data.service */ "./bundles/reports/income-by-item-report/income-by-member-report-data.service.js");
/* harmony import */ var _income_by_order_report_data_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./income-by-order-report-data.service */ "./bundles/reports/income-by-item-report/income-by-order-report-data.service.js");
/* harmony import */ var _income_by_item_report_chart_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./income-by-item-report-chart.service */ "./bundles/reports/income-by-item-report/income-by-item-report-chart.service.js");








function ownKeys(object, enumerableOnly) { var keys = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_1___default()(object); if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default.a) { var symbols = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_2___default()(object); if (enumerableOnly) { symbols = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_3___default()(symbols).call(symbols, function (sym) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(target, key, source[key]); }); } else if (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default.a) { Object.defineProperties(target, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_4___default()(source, key)); }); } } return target; }











/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.incomeByItemReport', [shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_7__["default"].name, shared_charts_chart_directive__WEBPACK_IMPORTED_MODULE_8__["default"].name, shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_9__["default"].name, shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_10__["default"].name, shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_11__["default"].name, shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_9__["default"].name, shared_reports_api_income_by_item_report_service__WEBPACK_IMPORTED_MODULE_12__["default"].name, _income_by_item_report_data_service__WEBPACK_IMPORTED_MODULE_13__["default"].name, _income_by_member_report_data_service__WEBPACK_IMPORTED_MODULE_14__["default"].name, _income_by_order_report_data_service__WEBPACK_IMPORTED_MODULE_15__["default"].name, _income_by_item_report_chart_service__WEBPACK_IMPORTED_MODULE_16__["default"].name, 'deskworks.state', 'deskworks.reports.reportDates', 'deskworks.ProductCategory']).controller('IncomeByItemReportCtrl', ["$scope", "$q", "$timeout", "$filter", "$translate", "$location", "state", "helper", "debounce", "dwAlerts", "reportStyles", "reportHelper", "ProductCategory", "setupService", "IncomeByItemReport", "incomeByItemReportChart", "incomeByItemReportData", "incomeByMemberReportData", "incomeByOrderReportData", function ($scope, $q, $timeout, $filter, $translate, $location, state, helper, debounce, dwAlerts, reportStyles, reportHelper, ProductCategory, setupService, IncomeByItemReport, incomeByItemReportChart, incomeByItemReportData, incomeByMemberReportData, incomeByOrderReportData) {
  var $ctrl = this;
  var paramsChanged = reportHelper.paramsChanged,
      loadResources = reportHelper.loadResources;
  $ctrl.config = {
    reportName: $translate.instant('INCOME_BY_ITEM_REPORT.REPORT_NAME')
  };
  $ctrl.params = {
    fromDate: state.getParam('fromDate') ? $filter('toDate')(state.getParam('fromDate')) : moment().subtract(1, 'month').startOf('month'),
    toDate: state.getParam('toDate') ? $filter('toDate')(state.getParam('toDate')) : moment().subtract(1, 'month').endOf('month'),
    orderBy: state.getParam('orderBy') || 'item'
  };
  $ctrl.resources = null;
  $ctrl.data = null;
  $ctrl.byOrder = {
    item: {
      dataToReport: incomeByItemReportData
    },
    member: {
      dataToReport: incomeByMemberReportData
    },
    order: {
      dataToReport: incomeByOrderReportData
    }
  };
  $ctrl.chartLevels = [];
  state.setPageTitle($ctrl.config.reportName);
  /**
   * Watch report params and generate new report
   */

  $scope.$watch('$ctrl.params', debounce(function (np, op) {
    state.setParam('orderBy', $ctrl.params.orderBy);
    $ctrl.pdf = null;
    $ctrl.report = null;
    if (helper.pointFirstInvalid('#incomeByItemReport')) return;
    if (!$ctrl.params.fromDate || !$ctrl.params.toDate) return;

    if (paramsChanged(np, op, ['fromDate', 'toDate', 'centerId'])) {
      $ctrl.data = null;
      $ctrl.chartLevels = [];
    }

    $q.all({
      resources: $ctrl.resources || loadResources(function () {
        return {
          settings: setupService.getSetupSettings().catch(function (err) {
            return dwAlerts.error(err, 'Failed to get setup settings.');
          }),
          productCategories: ProductCategory.query().catch(function (err) {
            return dwAlerts.error(err, 'Failed to query product categories.');
          })
        };
      }),
      data: $ctrl.data || IncomeByItemReport.query($ctrl.params).catch(function (err) {
        return dwAlerts.error(err, 'Failed to query report.');
      })
    }).then(function (result) {
      $ctrl.resources = result.resources;
      $ctrl.data = result.data;
    }).then(function () {
      var dataToReport = $ctrl.byOrder[$ctrl.params.orderBy].dataToReport;
      $ctrl.report = dataToReport($ctrl.params, $ctrl.data);
      var doc = reportHelper.buildPdf({
        config: _objectSpread(_objectSpread({}, $ctrl.config), $ctrl.params),
        report: $ctrl.report,
        resources: $ctrl.resources
      });
      $ctrl.pdf = doc.output('blob');
      buildChart();
    });
  }, 100), true);
  /**
   * Chart click handler
   * @param event
   * @param items
   */

  function chartOnClick(event, items) {
    $scope.$apply(function (_) {
      var idx = items[0] && items[0]._index;
      if (!angular.isNumber(idx)) return;
      var multiLevelProductCategory = $ctrl.resources.settings.multiLevelProductCategory;
      if ($ctrl.chartLevels.length >= (multiLevelProductCategory ? 3 : 2)) return;
      $ctrl.chartLevels.push({
        code: $ctrl.chart.data.codes[idx],
        name: $ctrl.chart.data.labels[idx]
      });
      $timeout(function () {
        return buildChart();
      });
    });
  }
  /**
   * Chart back button handler
   */


  $ctrl.chartBack = function () {
    $ctrl.chartLevels.pop();
    buildChart();
  };

  function buildChart() {
    $ctrl.chart = incomeByItemReportChart({
      data: $ctrl.data,
      onClick: chartOnClick,
      levels: $ctrl.chartLevels,
      multiLevelProductCategory: $ctrl.resources.settings.multiLevelProductCategory,
      productCategories: $ctrl.resources.productCategories
    });
  }
  /**
   * Download generated PDF report
   */


  $ctrl.downloadPdf = function () {
    if (!$ctrl.pdf) return;
    var fileName = reportHelper.getReportFileName({
      extension: 'pdf',
      config: _objectSpread(_objectSpread({}, $ctrl.config), $ctrl.params),
      resources: $ctrl.resources
    });
    reportHelper.download({
      blob: $ctrl.pdf,
      fileName: fileName
    });
  };
  /**
   * Generate and download CSV report
   */


  $ctrl.downloadCsv = function () {
    if (!$ctrl.pdf) return;
    var fileName = reportHelper.getReportFileName({
      extension: 'csv',
      config: _objectSpread(_objectSpread({}, $ctrl.config), $ctrl.params),
      resources: $ctrl.resources
    });
    var csv = reportHelper.buildCsv({
      report: $ctrl.report
    });
    reportHelper.download({
      blob: csv,
      fileName: fileName
    });
  };
}]));

/***/ }),

/***/ "./bundles/reports/income-by-item-report/income-by-item-report.tpl.html":
/*!******************************************************************************!*\
  !*** ./bundles/reports/income-by-item-report/income-by-item-report.tpl.html ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div id=\"incomeByItemReport\" class=\"gutter-v\"> <form name=\"formIncomeByItemReport\"> <h1 class=\"page-title\">{{state.getPageTitle()}}</h1> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <report-dates model=\"$ctrl.params\"></report-dates> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=\"gutter-v\"> <report-options model=\"$ctrl.params\"> <ff-row> <ff-label flex=\"0 0 100px\"><span translate=\"INCOME_BY_ITEM_REPORT.ORDER_BY\"></span></ff-label> <ff-static> <div class=\"ff-grid gutter-h-half\"> <label flex=\"0 0 auto\"> <ff-radio ff-model=\"$ctrl.params.orderBy\" ff-value=\"'item'\"> <span translate=\"INCOME_BY_ITEM_REPORT.ORDER_BY.ITEM\"></span> </ff-radio> </label> <label flex=\"0 0 auto\"> <ff-radio ff-model=\"$ctrl.params.orderBy\" ff-value=\"'member'\"> <span translate=\"INCOME_BY_ITEM_REPORT.ORDER_BY.MEMBER\"></span> </ff-radio> </label> <label flex=\"0 0 auto\"> <ff-radio ff-model=\"$ctrl.params.orderBy\" ff-value=\"'order'\"> <span translate=\"INCOME_BY_ITEM_REPORT.ORDER_BY.ORDER\"></span> </ff-radio> </label> </div> </ff-static> </ff-row> </report-options> </div> </div> <ff-panel flex=\"1 1 auto\"> <ff-panel-header> <ff-row class=\"gutter-h-half\"> <div> <span ng-if=\"!$ctrl.chartLevels.length\" translate=\"INCOME_BY_ITEM_REPORT.PRODUCT_CATEGORIES_PIE_CHART.HEADER\"></span> <span ng-if=\"$ctrl.chartLevels.length\" ng-bind=\"$ctrl.chartLevels[$ctrl.chartLevels.length - 1].name\"></span> </div> <div flex=\"0 0 auto\" style=\"align-items:center\"> <ff-btn ng-if=\"$ctrl.chartLevels.length\" size=\"sm\" sense=\"back\" style=\"margin:-.5rem 0\" title=\"{{'GLOBAL.BTN_BACK' | translate}}\" ff-click=\"$ctrl.chartBack()\"><span translate=\"GLOBAL.BTN_BACK\"></span></ff-btn> </div> </ff-row> </ff-panel-header> <div ff-dim=\"!$ctrl.pdf\"> <chart config=\"$ctrl.chart\"></chart> </div> </ff-panel> </div> <ff-btn-group class=\"buttons-bottom\"> <ff-btn sense=\"download\" ff-click=\"$ctrl.downloadPdf()\" ff-disabled=\"!$ctrl.pdf\"> <span translate=\"REPORTS.BTN_PDF\"></span> </ff-btn> <ff-btn sense=\"download\" ff-click=\"$ctrl.downloadCsv()\" ff-disabled=\"!$ctrl.pdf\"> <span translate=\"REPORTS.BTN_CSV\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\"REPORTS.PREVIEW.HEADER\"></span></ff-panel-header> <div pdf-preview=\"$ctrl.pdf\"></div> </ff-panel> </div> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/reports/income-by-item-report/income-by-member-report-columns.service.js":
/*!******************************************************************************************!*\
  !*** ./bundles/reports/income-by-item-report/income-by-member-report-columns.service.js ***!
  \******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);


/**
 * Columns for Income By Member Report
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.incomeByMemberReportColumns', []).factory('incomeByMemberReportColumns', ["$rootScope", "$filter", "$translate", function ($rootScope, $filter, $translate) {
  var cols = [{
    dataKey: 'userName',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME',
    include: true
  }, {
    dataKey: 'productCode',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    }
  }, {
    dataKey: 'productName',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME',
    include: true
  }, {
    dataKey: 'orderNo',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    }
  }, {
    dataKey: 'date',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.DATE',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('date')(v, 'mediumDate');
    },
    csv: function csv(v) {
      return $filter('date')(v, 'shortDate');
    }
  }, {
    dataKey: 'qty',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    }
  }, {
    dataKey: 'amount',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('ncurrency')(v);
    },
    csv: function csv(v) {
      return $filter('ncurrency')(v);
    }
  }, {
    dataKey: 'total',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('ncurrency')(v);
    },
    csv: function csv(v) {
      return $filter('ncurrency')(v);
    }
  }];
  translate();
  $rootScope.$on('$setTranslationsSuccess', translate);

  function translate() {
    cols.forEach(function (col) {
      col.title = $translate.instant(col._title);
    });
  }

  return cols;
}]));

/***/ }),

/***/ "./bundles/reports/income-by-item-report/income-by-member-report-data.service.js":
/*!***************************************************************************************!*\
  !*** ./bundles/reports/income-by-item-report/income-by-member-report-data.service.js ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var shared_reports_services_report_sort_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared/reports/services/report-sort.service */ "./shared/reports/services/report-sort.service.js");
/* harmony import */ var _income_by_member_report_columns_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./income-by-member-report-columns.service */ "./bundles/reports/income-by-item-report/income-by-member-report-columns.service.js");




/**
 * Data to report converter for Income By Member Report
 */

/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.incomeByMemberReportData', [shared_reports_services_report_sort_service__WEBPACK_IMPORTED_MODULE_2__["default"].name, _income_by_member_report_columns_service__WEBPACK_IMPORTED_MODULE_3__["default"].name]).factory('incomeByMemberReportData', ["$filter", "$translate", "helper", "reportStyles", "reportSort", "incomeByMemberReportColumns", function ($filter, $translate, helper, reportStyles, reportSort, incomeByMemberReportColumns) {
  return dataToReport;
  /**
   * @param params
   * @param data
   * @returns {{columns: Array, styles: Array, rows: Array}}
   */

  function dataToReport(params, data) {
    var result = {
      columns: incomeByMemberReportColumns,
      rows: [],
      styles: []
    };
    var users = [];
    data.forEach(function (productType) {
      productType.productCategories.forEach(function (category) {
        category.products.forEach(function (product) {
          var user = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0___default()(users).call(users, function (u) {
            return u.name === product.userName;
          });

          if (!user) {
            user = {
              name: product.userName,
              products: []
            };
            users.push(user);
          }

          user.products.push(product);
        });
      });
    });
    users = reportSort(users, 'name');
    var total = 0;
    users.forEach(function (user) {
      var userTotal = 0;
      reportSort(user.products, 'date').forEach(function (product, idx) {
        result.rows.push([product.userName, product.code, product.name, product.orderNo, product.date, product.qty, product.amount, false]);
        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);
        userTotal += helper.toNumber(product.amount);
      });
      total += userTotal;
      result.rows.push([user.name + ' ' + $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.TOTAL'), false, false, false, false, false, false, helper.round(userTotal)]);
      result.styles.push(reportStyles.h2);
    });
    result.rows.push([false, false, false, false, false, false, false, false]);
    result.styles.push(null);
    result.rows.push([false, false, false, false, false, false, $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.INCOME') + ':', helper.round(total)]);
    result.styles.push(reportStyles.h3);
    return result;
  }
}]));

/***/ }),

/***/ "./bundles/reports/income-by-item-report/income-by-order-report-columns.service.js":
/*!*****************************************************************************************!*\
  !*** ./bundles/reports/income-by-item-report/income-by-order-report-columns.service.js ***!
  \*****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);


/**
 * Columns for Income By Order ID Report
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.incomeByOrderReportColumns', []).factory('incomeByOrderReportColumns', ["$rootScope", "$filter", "$translate", function ($rootScope, $filter, $translate) {
  var cols = [{
    dataKey: 'orderNo',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    }
  }, {
    dataKey: 'userName',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.USER_NAME',
    include: true
  }, {
    dataKey: 'productCode',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_CODE',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    }
  }, {
    dataKey: 'productName',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.PRODUCT_NAME',
    include: true
  }, {
    dataKey: 'date',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.DATE',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('date')(v, 'mediumDate');
    },
    csv: function csv(v) {
      return $filter('date')(v, 'shortDate');
    }
  }, {
    dataKey: 'qty',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.QUANTITY',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    }
  }, {
    dataKey: 'amount',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.AMOUNT',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('ncurrency')(v);
    },
    csv: function csv(v) {
      return $filter('ncurrency')(v);
    }
  }, {
    dataKey: 'total',
    _title: 'INCOME_BY_ITEM_REPORT.COLUMNS.TOTAL',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('ncurrency')(v);
    },
    csv: function csv(v) {
      return $filter('ncurrency')(v);
    }
  }];
  translate();
  $rootScope.$on('$setTranslationsSuccess', translate);

  function translate() {
    cols.forEach(function (col) {
      col.title = $translate.instant(col._title);
    });
  }

  return cols;
}]));

/***/ }),

/***/ "./bundles/reports/income-by-item-report/income-by-order-report-data.service.js":
/*!**************************************************************************************!*\
  !*** ./bundles/reports/income-by-item-report/income-by-order-report-data.service.js ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var shared_reports_services_report_sort_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared/reports/services/report-sort.service */ "./shared/reports/services/report-sort.service.js");
/* harmony import */ var _income_by_order_report_columns_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./income-by-order-report-columns.service */ "./bundles/reports/income-by-item-report/income-by-order-report-columns.service.js");




/**
 * Data to report converter for Income By Order Report
 */

/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.incomeByOrderReportData', [shared_reports_services_report_sort_service__WEBPACK_IMPORTED_MODULE_2__["default"].name, _income_by_order_report_columns_service__WEBPACK_IMPORTED_MODULE_3__["default"].name]).factory('incomeByOrderReportData', ["$filter", "$translate", "helper", "reportStyles", "reportSort", "incomeByOrderReportColumns", function ($filter, $translate, helper, reportStyles, reportSort, incomeByOrderReportColumns) {
  return dataToReport;
  /**
   * @param params
   * @param data
   * @returns {{columns: Array, styles: Array, rows: Array}}
   */

  function dataToReport(params, data) {
    var result = {
      columns: incomeByOrderReportColumns,
      rows: [],
      styles: []
    };
    var orders = [];
    data.forEach(function (productType) {
      productType.productCategories.forEach(function (category) {
        category.products.forEach(function (product) {
          var order = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0___default()(orders).call(orders, function (o) {
            return o.orderNo === product.orderNo;
          });

          if (!order) {
            order = {
              orderNo: product.orderNo,
              products: []
            };
            orders.push(order);
          }

          order.products.push(product);
        });
      });
    });
    orders = reportSort(orders, 'name');
    var total = 0;
    orders.forEach(function (order) {
      var orderTotal = 0;
      reportSort(order.products, 'date').forEach(function (product, idx) {
        result.rows.push([product.orderNo, product.userName, product.code, product.name, product.date, product.qty, product.amount, false]);
        result.styles.push(idx % 2 ? null : reportStyles.rowOdd);
        orderTotal += helper.toNumber(product.amount);
      });
      total += orderTotal;
      result.rows.push([false, $translate.instant('INCOME_BY_ITEM_REPORT.COLUMNS.ORDER_NO') + ' #' + order.orderNo + ' ' + $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.TOTAL'), false, false, false, false, false, helper.round(orderTotal)]);
      result.styles.push(reportStyles.h2);
    });
    result.rows.push([false, false, false, false, false, false, false, false]);
    result.styles.push(null);
    result.rows.push([false, false, false, false, false, false, $translate.instant('INCOME_BY_ITEM_REPORT.TOTALS.INCOME') + ':', helper.round(total)]);
    result.styles.push(reportStyles.h3);
    return result;
  }
}]));

/***/ }),

/***/ "./bundles/reports/income-report/income-report-columns.service.js":
/*!************************************************************************!*\
  !*** ./bundles/reports/income-report/income-report-columns.service.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);


/**
 * Columns for Income Report
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.incomeReportColumns', []).factory('incomeReportColumns', ["$rootScope", "$filter", "$translate", function ($rootScope, $filter, $translate) {
  var cols = [{
    dataKey: 'userCompany',
    _title: 'INCOME_REPORT.COLUMNS.COMPANY',
    include: true,
    styles: {
      minCellWidth: 250
    }
  }, {
    dataKey: 'userName',
    _title: 'INCOME_REPORT.COLUMNS.NAME',
    include: true,
    styles: {
      minCellWidth: 200
    }
  }, {
    dataKey: 'date',
    _title: 'INCOME_REPORT.COLUMNS.DATE',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('date')(v, 'mediumDate');
    },
    csv: function csv(v) {
      return $filter('date')(v, 'shortDate');
    }
  }, {
    dataKey: 'method',
    _title: 'INCOME_REPORT.COLUMNS.METHOD',
    include: true,
    styles: {
      cellWidth: 'wrap'
    }
  }, {
    dataKey: 'amount',
    _title: 'INCOME_REPORT.COLUMNS.AMOUNT',
    include: true,
    styles: {
      cellWidth: 'wrap',
      halign: 'right'
    },
    pdf: function pdf(v) {
      return $filter('ncurrency')(v);
    },
    csv: function csv(v) {
      return $filter('ncurrency')(v);
    }
  }];
  translate();
  $rootScope.$on('$setTranslationsSuccess', translate);

  function translate() {
    cols.forEach(function (col) {
      col.title = $translate.instant(col._title);
    });
  }

  return cols;
}]));

/***/ }),

/***/ "./bundles/reports/income-report/income-report.controller.js":
/*!*******************************************************************!*\
  !*** ./bundles/reports/income-report/income-report.controller.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! shared/reports/directives/pdf-preview.directive */ "./shared/reports/directives/pdf-preview.directive.js");
/* harmony import */ var shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared/reports/services/report-helper.service */ "./shared/reports/services/report-helper.service.js");
/* harmony import */ var shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! shared/reports/services/report-styles.service */ "./shared/reports/services/report-styles.service.js");
/* harmony import */ var shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! shared/reports/directives/report-options.directive */ "./shared/reports/directives/report-options.directive.js");





/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.incomeReport', [shared_reports_directives_pdf_preview_directive__WEBPACK_IMPORTED_MODULE_1__["default"].name, shared_reports_services_report_helper_service__WEBPACK_IMPORTED_MODULE_2__["default"].name, shared_reports_services_report_styles_service__WEBPACK_IMPORTED_MODULE_3__["default"].name, shared_reports_directives_report_options_directive__WEBPACK_IMPORTED_MODULE_4__["default"].name, 'deskworks.state', 'deskworks.reports.ReportBuilder', 'deskworks.reports.reportDates', 'deskworks.reports.reportOwnerRegion', 'deskworks.reports.incomeReport.service', 'deskworks.reports.incomeReportColumns']).controller('IncomeReportCtrl', ["$scope", "$timeout", "$filter", "$translate", "state", "helper", "reportHelper", "reportStyles", "ReportBuilder", "IncomeReport", "incomeReportColumns", function ($scope, $timeout, $filter, $translate, state, helper, reportHelper, reportStyles, ReportBuilder, IncomeReport, incomeReportColumns) {
  var vm = this;
  vm.config = {
    reportName: $translate.instant('INCOME_REPORT.REPORT_NAME'),
    reportOptions: {},
    reportOwnerRegion: {},
    reportColumns: {
      columns: incomeReportColumns
    },
    reportDates: {
      fromDate: moment(),
      toDate: moment()
    },
    getReportData: function getReportData() {
      return IncomeReport.get({
        centerId: vm.config.reportOptions.centerId,
        fromDate: $filter('date')(vm.config.reportDates.fromDate, 'yyyy-MM-dd'),
        toDate: $filter('date')(vm.config.reportDates.toDate, 'yyyy-MM-dd'),
        ownerId: vm.config.reportOwnerRegion.ownerId,
        regionId: vm.config.reportOwnerRegion.regionId
      }).$promise;
    }
  };
  state.setPageTitle($translate.instant('INCOME_REPORT.PAGE_TITLE'));
  vm.config.reportDates.fromDate.date(1); // set fromDate to first day of current month

  vm.config.reportDates.toDate.add(1, 'M').date(0); // set toDate to last day of current month

  vm.reportBuilder = new ReportBuilder(vm.config);
  /**
   * Watch for data report depends on (center, columns, order) and generate new report
   */

  var debounceTimeout;
  $scope.$watch(function (_) {
    return {
      reportOptions: vm.config.reportOptions,
      reportDates: vm.config.reportDates,
      reportOwnerRegion: vm.config.reportOwnerRegion
    };
  }, function (newVal, oldVal) {
    if (debounceTimeout) {
      $timeout.cancel(debounceTimeout);
      debounceTimeout = null;
    }

    debounceTimeout = $timeout(function (_) {
      vm.pdf = null;
      if (angular.isUndefined(vm.config.reportOptions.centerId)) return;
      var newDate = newVal.reportDates.fromDate,
          oldDate = oldVal.reportDates.fromDate;
      if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;
      newDate = newVal.reportDates.toDate;
      oldDate = oldVal.reportDates.toDate;
      if (moment.isMoment(newDate) && (!moment.isMoment(oldDate) || !newDate.isSame(oldDate))) vm.config.reportData = null;
      vm.reportBuilder.buildPdf(reportDataCallback).then(function (blob) {
        vm.pdf = blob;
      });
    }, 100);
  }, true);
  /**
   * Download generated PDF report
   */

  vm.downloadPdf = function () {
    if (!vm.pdf) return;
    reportHelper.download({
      blob: vm.pdf,
      fileName: vm.reportBuilder.getReportFileName('pdf')
    });
  };
  /**
  * Generate and download CSV report
  */


  vm.downloadCsv = function () {
    if (!vm.pdf) return;
    reportHelper.download({
      blob: vm.reportBuilder.buildCsv(reportDataCallback),
      fileName: vm.reportBuilder.getReportFileName('csv')
    });
  };
  /**
   * Report data callback for ReportBuilder, returns report data matrix and columns
   */


  function reportDataCallback(config) {
    var _context;

    var result = {
      columns: config.reportColumns.columns,
      rows: [],
      styles: []
    }; // Finally, convert to matrix

    result.rows = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(_context = config.reportData.payments).call(_context, function (payment, idx) {
      var _context2;

      result.styles.push(idx % 2 ? null : reportStyles.rowOdd);
      return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(_context2 = result.columns).call(_context2, function (col) {
        return payment[col.dataKey];
      });
    });
    result.rows.push([false, false, false, false, false]);
    result.styles.push(null);
    result.rows.push([false, false, false, $translate.instant('INCOME_REPORT.TOTAL_INCOME') + ':', config.reportData.total]);
    result.styles.push(reportStyles.h3);
    return result;
  }
}]));

/***/ }),

/***/ "./bundles/reports/income-report/income-report.service.js":
/*!****************************************************************!*\
  !*** ./bundles/reports/income-report/income-report.service.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * IncomeReport service
 */
/* harmony default export */ __webpack_exports__["default"] = (angular.module('deskworks.reports.incomeReport.service', ['ngResource', 'datesDeserializer', 'deskworks.config']).factory('IncomeReport', ["$resource", "datesDeserializer", "deskworksConfig", function ($resource, datesDeserializer, deskworksConfig) {
  var desDates = datesDeserializer(['payments.date']);
  var url = deskworksConfig.getApiAbsUrl('/centers/:centerId/income-reports');
  return $resource(url, {
    centerId: '@centerId',
    fromDate: '@fromDate',
    toDate: '@toDate'
  }, {
    get: {
      method: 'GET',
      transformResponse: [angular.fromJson, desDates]
    }
  });
}]));

/***/ }),

/***/ "./bundles/reports/income-report/income-report.tpl.html":
/*!**************************************************************!*\
  !*** ./bundles/reports/income-report/income-report.tpl.html ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div id=\"incomeReport\" class=\"gutter-v\"> <form name=\"formIncomeReport\"> <h1 class=\"page-title\">{{state.getPageTitle()}}</h1> <div class=\"ff-grid gutter-v gutter-h\"> <div flex=\"{lg: '0 0 61%', md: '0 0 50%'}\"> <report-dates model=\"vm.config.reportDates\"></report-dates> </div> <div flex=\"{lg: '0 0 39%', md: '0 0 50%'}\"> <div class=\"gutter-v\"> <report-options model=\"vm.config.reportOptions\"></report-options> <report-owner-region model=\"vm.config.reportOwnerRegion\" report-data=\"vm.config.reportData\"></report-owner-region> </div> </div> </div> <ff-btn-group class=\"buttons-bottom\"> <ff-btn sense=\"download\" ff-click=\"vm.downloadPdf()\" ff-disabled=\"!vm.pdf\"> <span translate=\"REPORTS.BTN_PDF\"></span> </ff-btn> <ff-btn sense=\"download\" ff-click=\"vm.downloadCsv()\" ff-disabled=\"!vm.pdf\"> <span translate=\"REPORTS.BTN_CSV\"></span> </ff-btn> </ff-btn-group> </form> <ff-panel> <ff-panel-header><span translate=\"REPORTS.PREVIEW.HEADER\"></span></ff-panel-header> <div pdf-preview=\"vm.pdf\"></div> </ff-panel> </div> ";
// Exports
module.exports = code;

/***/ }),

/***/ "./bundles/reports/index.js":
/*!**********************************!*\
  !*** ./bundles/reports/index.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "../node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "../node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "../node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_keys__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/keys */ "../node_modules/@babel/runtime-corejs3/core-js-stable/instance/keys.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_keys__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_keys__WEBPACK_IMPORTED_MODULE_4__);





var index = ['$injector', function index($injector) {
  // JS
  var importAll = function importAll(r) {
    var _context;

    return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default()(_context = _babel_runtime_corejs3_core_js_stable_instance_keys__WEBPACK_IMPORTED_MODULE_4___default()(r).call(r)).call(_context, r);
  };

  var js = importAll(__webpack_require__("./bundles/reports sync recursive \\..+\\/.+\\.js$"));
  $injector.loadNewModules(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default()(js).call(js, function (m) {
    return m.default.name;
  })); // Templates

  $injector.invoke(['$templateCache', function ($templateCache) {
    var ctx = __webpack_require__("./bundles/reports sync recursive .*\\.tpl\\.html$");

    _babel_runtime_corejs3_core_js_stable_instance_keys__WEBPACK_IMPORTED_MODULE_4___default()(ctx).call(ctx).forEach(function (key) {
      return $templateCache.put(key.replace(/^\.\//, ''), ctx(key));
    });
  }]);
}];
/* harmony default export */ __webpack_exports__["default"] = (index);

/***/ })

}]);
//# sourceMappingURL=reports~._bundles_reports .js.map?_rev=4543ee651deaf4cdb7c8