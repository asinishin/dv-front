(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"/MEN":function(t,a,e){},"1KV+":function(t,a,e){"use strict";e.r(a);var n=e("YtL8"),r=e.n(n),o=e("yCd9"),i=e.n(o),l=e("WSeP"),s=e.n(l),c=e("nbuU"),d=e.n(c),u=e("Xp5u");a.default=angular.module("deskworks.AnalyticsSales",["ngResource","datesDeserializer","deskworks.config",u.a.name]).factory("AnalyticsSales",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,n,o,l,c){var u=n(["periods.from","periods.to"]),f=t(o.getApiAbsUrl("/analytics/sales"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,u]}});return{get:function(t){return f.get({centerId:t.centerId||null,byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd"),to:a("date")(t.to,"yyyy-MM-dd")}).$promise.then((function(a){return function(t){var a,e,n,o=t.data,u=t.params.byPeriod,f=void 0===u?"month":u,p=d()(c).call(c,(function(t){return t.id===f}));return s()(a=o.periods).call(a,(function(t){t.title=p.format(t.from,t.to)})),o.totals=i()(e=o.periods).call(e,(function(t,a){var e;return l.round(r()(e=o.data).call(e,(function(t,e){return t+e.totals[a]}),0))})),s()(n=o.data).call(n,(function(t){var a;t.total=l.round(r()(a=t.totals).call(a,(function(t,a){return t+a}),0))})),o}({data:a,params:t})}))}}}])},"1LnZ":function(t,a,e){var n={"./dashboard/analytics-dashboard.controller.js":"Dc08","./dashboard/analytics-user.service.js":"RlMt","./widgets/analytics-widget.directive.js":"1e+P","./widgets/analytics-widgets-list.service.js":"Xh+F","./widgets/income/analytics-income-chart.service.js":"O7bB","./widgets/income/analytics-income.directive.js":"p5aI","./widgets/income/analytics-income.service.js":"2Bp7","./widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart-units.service.js":"9pnN","./widgets/occupancy-vacancy/analytics-occupancy-vacancy-chart.service.js":"oCA5","./widgets/occupancy-vacancy/analytics-occupancy-vacancy.directive.js":"qLGz","./widgets/occupancy-vacancy/analytics-occupancy-vacancy.service.js":"G6gN","./widgets/recurring-billings/analytics-recurring-billings-chart.service.js":"qbH2","./widgets/recurring-billings/analytics-recurring-billings.directive.js":"NfJs","./widgets/recurring-billings/analytics-recurring-billings.service.js":"xlJL","./widgets/sales-by-product-category/analytics-sales-by-product-category-chart.service.js":"XdOV","./widgets/sales-by-product-category/analytics-sales-by-product-category-detailed-chart.service.js":"Z7iF","./widgets/sales-by-product-category/analytics-sales-by-product-category.directive.js":"ENWM","./widgets/sales-by-product-category/analytics-sales-by-product-category.service.js":"QXqx","./widgets/sales/analytics-sales-chart.service.js":"DbU7","./widgets/sales/analytics-sales.directive.js":"4uyB","./widgets/sales/analytics-sales.service.js":"1KV+"};function r(t){var a=o(t);return e(a)}function o(t){if(!e.o(n,t)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=o,t.exports=r,r.id="1LnZ"},"1e+P":function(t,a,e){"use strict";e.r(a);var n=e("WSeP"),r=e.n(n),o=e("nbuU"),i=e.n(o),l=(e("KOgG"),e("r970")),s=e.n(l),c=e("Xh+F");a.default=angular.module("deskworks.analyticsWidgetDirective",[c.default.name]).directive("analyticsWidget",(function(){return{template:s.a,restrict:"E",scope:!0,controller:"AnalyticsWidgetDirectiveCtrl as $w",bindToController:{widget:"<",centerId:"@"},link:function(t,a){a.addClass("analytics-widget")}}})).controller("AnalyticsWidgetDirectiveCtrl",["$scope","$element","$window","$compile","state","dwAlerts","helper","analyticsWidgetsList",function(t,a,e,n,o,l,s,c){var d=this;d.$onInit=function(){t.$watch("$w.widget.wide",(function(){a.toggleClass("analytics-widget-wide",!!d.widget.wide)}))},d.$onChanges=function(){if(d.widget){if(d.config=i()(c).call(c,(function(t){return t.uid===d.widget.uid})),!d.config)return void a.css("display","none");var e=angular.element(a[0].querySelector(".analytics-widget-body")),o=angular.element(d.config.template);o.attr("params","$w.widget"),o.attr("center-id",d.centerId),r()(angular).call(angular,e.children(),(function(t){return t.remove()})),e.append(o),n(o)(t.$new())}},d.onDragStart=function(t){var a=s.findParentElement(t.target,(function(t){return void 0!==t.attr("dnd-list")}));a.toggleClass("analytics-wide-placeholder",!!d.widget.wide),a.toggleClass("analytics-dragging",!0)},d.onDragEnd=function(t){s.findParentElement(t.target,(function(t){return void 0!==t.attr("dnd-list")})).toggleClass("analytics-dragging",!1)}}])},"2Bp7":function(t,a,e){"use strict";e.r(a);var n=e("WSeP"),r=e.n(n),o=e("nbuU"),i=e.n(o),l=e("Xp5u");a.default=angular.module("deskworks.AnalyticsIncome",["ngResource","datesDeserializer","deskworks.config",l.a.name]).factory("AnalyticsIncome",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,n,o,l,s){var c=n(["periods.from","periods.to"]),d=t(o.getApiAbsUrl("/analytics/income"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,c]}});return{get:function(t){return d.get({centerId:t.centerId||null,byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd")||null,to:a("date")(t.to,"yyyy-MM-dd")||null}).$promise.then((function(a){return function(t){var a,e=t.data,n=t.params.byPeriod,o=void 0===n?"month":n,l=i()(s).call(s,(function(t){return t.id===o}));return r()(a=e.periods).call(a,(function(t){t.title=l.format(t.from,t.to)})),e}({data:a,params:t})}))}}}])},"2R0e":function(t,a){t.exports='<label class=ff-row style=min-width:130px> <ff-label flex=none><span translate=CHARTS.BY_PERIOD></span></ff-label> <ff-select ff-model=$ctrl.period ff-options="opt.id as opt.name for opt in $ctrl.optsPeriod"></ff-select> </label> '},"2yBK":function(t,a){t.exports='<div ng-class="{ \'empty-chart\': $ctrl.data.data.length === 0 || $ctrl.data.grandTotal === 0 }"> <ng-form name=$ctrl.widgetToolbarForm class=ff-grid> <ff-static flex=auto> <ff-hint ng-if="$ctrl.params.selected === null"><span translate=ANALYTICS.WIDGET.SALES_BY_PRODUCT_CATEGORY.HINT></span></ff-hint> <ff-btn sense=back size=sm ng-if="$ctrl.params.selected !== null" ff-click="$ctrl.params.selected = null"> <span translate=GLOBAL.BTN_BACK></span> </ff-btn> </ff-static> <chart-period flex="0 1 auto" period=$ctrl.params.period from=$ctrl.params.from to=$ctrl.params.to></chart-period> </ng-form> <chart config=$ctrl.chart ff-dim=$ctrl.spin></chart> </div> '},"4uyB":function(t,a,e){"use strict";e.r(a);e("JBxO"),e("FdtR");var n=e("Tfwl"),r=e.n(n),o=e("XAgg"),i=e.n(o),l=e("yKah"),s=e.n(l),c=e("WSeP"),d=e.n(c),u=e("lvz6"),f=e.n(u),p=e("hsT8"),m=e.n(p),g=e("Ekwr"),y=e.n(g),h=e("03wM"),b=e.n(h),v=e("fzuT"),C=e.n(v),w=e("RnuU"),k=e.n(w),A=e("CLLE"),$=e("G6E5"),P=e("1KV+"),T=e("Xp5u"),I=e("CgoQ"),x=e("DbU7"),R=e("DcLO"),O=e("OOrm");function S(t,a){var e=b()(t);if(y.a){var n=y()(t);a&&(n=m()(n).call(n,(function(a){return f()(t,a).enumerable}))),e.push.apply(e,n)}return e}function E(t){for(var a=1;a<arguments.length;a++){var e,n=null!=arguments[a]?arguments[a]:{};if(a%2)d()(e=S(Object(n),!0)).call(e,(function(a){C()(t,a,n[a])}));else if(s.a)i()(t,s()(n));else{var o;d()(o=S(Object(n))).call(o,(function(a){r()(t,a,f()(n,a))}))}}return t}a.default=angular.module("deskworks.analyticsSalesDirective",["debounce",A.a.name,$.a.name,P.default.name,T.a.name,I.a.name,x.default.name,R.a.name,O.a.name]).directive("analyticsSales",(function(){return{template:k.a,restrict:"E",scope:!0,controller:"AnalyticsSalesDirectiveCtrl as $ctrl",bindToController:{params:"<",centerId:"<"}}})).controller("AnalyticsSalesDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","AnalyticsSales","analyticsSalesChart","optsChartByPeriod","optsChartPeriod",function(t,a,e,n,r,o,i,l,s,c,d){var u=this,f=i.paramsChanged;u.optsByPeriod=c,u.optsPeriod=d,u.data=null,u.$onInit=function(){t.$watch((function(){return E(E({},u.params),{},{centerId:u.centerId})}),o((function(t,e){u.params.period=u.params.period||"12months",u.params.byPeriod=u.params.byPeriod||"month",u.widgetToolbarForm.$invalid||(f(t,e,["centerId","from","to","byPeriod"])&&(u.data=null),u.data=u.data||(u.spin=!0,l.get(t).catch((function(t){return n.error(t,"Failed to get Sales widget data.")})).finally((function(){u.spin=!1}))),a.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){u.chart=s(E(E({},u.data),{},{params:u.params}))})))}),100),!0)}}])},"9pnN":function(t,a,e){"use strict";e.r(a);var n=e("6RpP"),r=e.n(n),o=e("yCd9"),i=e.n(o),l=e("G6E5"),s=e("aGVL"),c=e("bU+R"),d=e.n(c);a.default=angular.module("deskworks.analyticsOccupancyVacancyChartUnits",[l.a.name,s.a.name]).factory("analyticsOccupancyVacancyChartUnits",["$filter","$translate","chartColors","reportHelper",function(t,a,e,n){return function(t){var a,n=t.periods,o=t.data,l=t.params,s=i()(n).call(n,(function(t){return t.title})),c=i()(a=o[l.selected].units).call(a,(function(t,a){return{label:t.name,data:t.totals,maxBarThickness:80,backgroundColor:e[a]}}));return{type:"bar",plugins:[d.a],data:{labels:s,datasets:c},options:{plugins:{datalabels:{display:"auto",color:"#fff",backgroundColor:"#000",padding:1,borderRadius:3,formatter:function(t,a){return"".concat(Math.round(t),"%")}}},tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(t){var a,e=o[l.selected].units[t.datasetIndex],n=e.name,i=e.totals;return r()(a="".concat(n,": ")).call(a,i[t.index],"%")}}},layout:{padding:{top:15}},legend:{display:!0,position:l.wide?"right":"bottom"},scales:{yAxes:[{ticks:{min:0,max:100,callback:function(t){return"".concat(t,"%")}}}]}}}}}])},C5yw:function(t,a,e){var n={"./dashboard/analytics-dashboard.tpl.html":"aOtR","./widgets/analytics-widget-base.tpl.html":"RnuU","./widgets/analytics-widget.tpl.html":"r970","./widgets/occupancy-vacancy/analytics-occupancy-vacancy.tpl.html":"jwnm","./widgets/sales-by-product-category/analytics-sales-by-product-category.tpl.html":"2yBK"};function r(t){var a=o(t);return e(a)}function o(t){if(!e.o(n,t)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=o,t.exports=r,r.id="C5yw"},CLLE:function(t,a,e){"use strict";var n=e("Tfwl"),r=e.n(n),o=e("XAgg"),i=e.n(o),l=e("yKah"),s=e.n(l),c=e("WSeP"),d=e.n(c),u=e("lvz6"),f=e.n(u),p=e("hsT8"),m=e.n(p),g=e("Ekwr"),y=e.n(g),h=e("03wM"),b=e.n(h),v=e("ipr/"),C=e.n(v),w=e("yCd9"),k=e.n(w),A=e("fzuT"),$=e.n(A),P=(e("S2gh"),e("bG+q"),e("pl6f")),T=e("aGVL"),I=e("bU+R"),x=e.n(I);function R(t,a){var e=b()(t);if(y.a){var n=y()(t);a&&(n=m()(n).call(n,(function(a){return f()(t,a).enumerable}))),e.push.apply(e,n)}return e}function O(t){for(var a=1;a<arguments.length;a++){var e,n=null!=arguments[a]?arguments[a]:{};if(a%2)d()(e=R(Object(n),!0)).call(e,(function(a){$()(t,a,n[a])}));else if(s.a)i()(t,s()(n));else{var o;d()(o=R(Object(n))).call(o,(function(a){r()(t,a,f()(n,a))}))}}return t}a.a=angular.module("chartDirective",["deskworks.helper",P.a.name,T.a.name]).directive("chart",["$window","systemColors",function(t,a){return t.Chart.defaults.global.legend.labels.boxWidth=12,t.Chart.defaults.global.tooltips.cornerRadius=3,t.Chart.defaults.global.tooltips.displayColors=!1,t.Chart.defaults.global.tooltips.backgroundColor="rgba(0,0,0,0.65)",t.Chart.defaults.global.elements.rectangle.borderWidth=1,t.Chart.defaults.global.elements.rectangle.backgroundColor=a.primary,t.Chart.defaults.global.elements.arc.borderWidth=1,t.Chart.plugins.unregister(x.a),{restrict:"E",scope:!0,controller:"ChartCtrl as $ctrl",bindToController:{type:"@chartType",labels:"<chartLabels",data:"<chartData",options:"<chartOptions",config:"<"},template:"<canvas></canvas>"}}]).controller("ChartCtrl",["$scope","$element","$window","chartColors",function(t,a,e,n){var r,o=this,i={maintainAspectRatio:!1},l={backgroundColor:n,hoverBorderWidth:2,hoverBorderColor:"#fff"};o.$onDestroy=function(){r&&r.destroy()},o.$onChanges=function(t){var n;if(o.config){var s;r&&r.destroy();var c=O({},o.config);return c.options=O(O({},c.options),i),c.data=O({},c.data),c.data.datasets=k()(s=c.data.datasets).call(s,(function(t){return O(O({},l),t)})),void(r=new e.Chart(a.children(),c))}if(o.options){var d={labels:o.labels,datasets:C()(n=o.data).call(n)};d.datasets[0]=angular.extend({},l,d.datasets[0]),!r||t.type&&t.type.currentValue!==t.type.previousValue?(r&&r.destroy(),r=new e.Chart(a.children(),{type:o.type,data:d,options:angular.extend({},i,o.options)})):(angular.extend(r.data,d),angular.extend(r.options,i,o.options),r.update())}}}])},CgoQ:function(t,a,e){"use strict";var n=e("WSeP"),r=e.n(n);a.a=angular.module("deskworks.optsChartPeriod",[]).factory("optsChartPeriod",["$rootScope","$translate",function(t,a){var e=[{id:"lastMonth",_name:"CHARTS.PERIOD.LAST_MONTH",from:function(){return moment().subtract(1,"month").startOf("month")},to:function(){return moment().subtract(1,"month").endOf("month")}},{id:"thisMonth",_name:"CHARTS.PERIOD.THIS_MONTH",from:function(){return moment().startOf("month")},to:function(){return moment().endOf("month")}},{id:"lastQuarter",_name:"CHARTS.PERIOD.LAST_QUARTER",from:function(){return moment().subtract(1,"quarter").startOf("quarter")},to:function(){return moment().subtract(1,"quarter").endOf("quarter")}},{id:"thisQuarter",_name:"CHARTS.PERIOD.THIS_QUARTER",from:function(){return moment().startOf("quarter")},to:function(){return moment().endOf("quarter")}},{id:"12months",_name:"CHARTS.PERIOD.12_MONTHS",from:function(){return moment().subtract(12,"month")},to:function(){return moment()}},{id:"lastYear",_name:"CHARTS.PERIOD.LAST_YEAR",from:function(){return moment().subtract(1,"year").startOf("year")},to:function(){return moment().subtract(1,"year").endOf("year")}},{id:"thisYear",_name:"CHARTS.PERIOD.THIS_YEAR",from:function(){return moment().startOf("year")},to:function(){return moment().endOf("year")}},{id:"allTime",_name:"CHARTS.PERIOD.ALL_TIME",from:function(){return null},to:function(){return null}},{id:"custom",_name:"CHARTS.PERIOD.CUSTOM",from:function(){return moment().subtract(1,"month").startOf("month")},to:function(){return moment().subtract(1,"month").endOf("month")}}];function n(){r()(e).call(e,(function(t){t.name=a.instant(t._name)}))}return n(),t.$on("$setTranslationsSuccess",n),e}])},DLeD:function(t,a,e){"use strict";e.r(a);e("Muwe"),e("y89P");var n=e("WSeP"),r=e.n(n),o=e("lRNC"),i=e.n(o),l=e("yCd9"),s=e.n(l),c=["$injector",function(t){var a,n,o=(a=e("1LnZ"),s()(n=i()(a).call(a)).call(n,a));t.loadNewModules(s()(o).call(o,(function(t){return t.default.name}))),t.invoke(["$templateCache",function(t){var a,n=e("C5yw");r()(a=i()(n).call(n)).call(a,(function(a){return t.put(a.replace(/^\.\//,""),n(a))}))}])}];a.default=c},DbU7:function(t,a,e){"use strict";e.r(a);var n=e("6RpP"),r=e.n(n),o=e("yCd9"),i=e.n(o),l=e("G6E5"),s=e("aGVL"),c=e("bU+R"),d=e.n(c);a.default=angular.module("deskworks.analyticsSalesChart",[l.a.name,s.a.name]).factory("analyticsSalesChart",["$filter","$translate","chartColors","reportHelper",function(t,a,e,n){return function(n){var o,l=n.periods,s=n.data,c=n.totals,u=n.params,f=i()(l).call(l,(function(t){return t.title})),p=r()(o=i()(s).call(s,(function(t,a){return{label:t.name,data:t.totals,backgroundColor:e[a],maxBarThickness:80}}))).call(o,[{label:a.instant("GLOBAL.TOTAL"),data:i()(c).call(c,(function(t){return 0})),backgroundColor:"transparent",maxBarThickness:80,datalabels:{display:!0,align:"end",offset:-3,color:"#fff",backgroundColor:"#000",padding:1,borderRadius:3,font:{weight:"bold"}}}]);return{type:"bar",plugins:[d.a],data:{labels:f,datasets:p},options:{plugins:{datalabels:{display:"auto",color:"#fff",backgroundColor:"#000",padding:1,borderRadius:3,formatter:function(a,e){return t("ncurrency")(e.datasetIndex<p.length-1?a:c[e.dataIndex],void 0,0)}}},tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(a,e){var n=e.datasets[a.datasetIndex];return n.label+": "+t("ncurrency")(a.datasetIndex<p.length-1?n.data[a.index]:c[a.index])}}},layout:{padding:{top:15}},legend:{display:!0,position:u.wide?"right":"bottom"},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{callback:function(a){return t("ncurrency")(a,void 0,0)}}}]}}}}}])},Dc08:function(t,a,e){"use strict";e.r(a);e("va6R");var n=e("I5Zy"),r=e("jd5N"),o=e("1e+P"),i=e("Xh+F"),l=e("RlMt");a.default=angular.module("deskworks.AnalyticsDashboardCtrl",["deskworks.state","session",n.a.name,r.a.name,o.default.name,i.default.name,l.default.name]).controller("AnalyticsDashboardCtrl",["$scope","$translate","$timeout","dwAlerts","state","helper","dnd","keese","session","analyticsWidgetsList","AnalyticsUser",function(t,a,e,n,r,o,i,l,s,c,d){var u=this;r.setPageTitle(a.instant("ANALYTICS.PAGE_TITLE")),u.widgetsList=c,u.widgetToAdd=u.widgetsList[0],u.onInit=function(){u.loadDefaults()},u.getCenterId=function(){return u.settings.allCenters?null:r.getCurrentCenterId()},u.onDrop=function(t,a,e,n){i.move(t,a,e,n);return!0},u.addWidget=function(){var t=u.settings.widgets;t.push({uid:u.widgetToAdd.uid,order:l.generate(t.length&&t[t.length-1].order),wide:!1})},u.saveDefaults=function(){return d.save({userId:s.user.id},u.settings).catch((function(t){return n.error(t,"Failed to save dashboard settings.")})).then((function(){u.defaults=angular.copy(u.settings)}))},u.loadDefaults=function(){return d.get({userId:s.user.id}).catch((function(t){return n.error(t,"Failed to get dashboard settings.")})).then((function(t){u.settings=o.purify(t),e((function(){u.defaults=angular.copy(u.settings)}))}))},u.isPristine=function(){return angular.equals(u.settings,u.defaults)},u.onInit()}])},DcLO:function(t,a,e){"use strict";var n=e("nbuU"),r=e.n(n),o=e("ggrz"),i=e.n(o),l=(e("gq4Z"),e("CgoQ"));a.a=angular.module("deskworks.chartPeriodDirective",[l.a.name]).directive("chartPeriod",(function(){return{template:i.a,restrict:"E",scope:!0,controller:"ChartPeriodCtrl as $ctrl",bindToController:{period:"=",from:"=",to:"="}}})).controller("ChartPeriodCtrl",["$scope","optsChartPeriod",function(t,a){var e=this;e.optsPeriod=a,t.$watchGroup(["$ctrl.period","$ctrl.from","$ctrl.to"],(function(t,n){if("custom"===e.period&&e.to&&e.to.endOf("month"),t[0]!==n[0]||e.period&&!e.from&&!e.to){var o=r()(a).call(a,(function(t){return t.id===e.period}));e.from=o.from(),e.to=o.to()}}))}])},ENWM:function(t,a,e){"use strict";e.r(a);e("JBxO"),e("FdtR");var n=e("Tfwl"),r=e.n(n),o=e("XAgg"),i=e.n(o),l=e("yKah"),s=e.n(l),c=e("WSeP"),d=e.n(c),u=e("lvz6"),f=e.n(u),p=e("hsT8"),m=e.n(p),g=e("Ekwr"),y=e.n(g),h=e("03wM"),b=e.n(h),v=e("fzuT"),C=e.n(v),w=e("2yBK"),k=e.n(w),A=e("CLLE"),$=e("G6E5"),P=e("QXqx"),T=e("CgoQ"),I=e("XdOV"),x=e("Z7iF"),R=e("DcLO"),O=e("OOrm");function S(t,a){var e=b()(t);if(y.a){var n=y()(t);a&&(n=m()(n).call(n,(function(a){return f()(t,a).enumerable}))),e.push.apply(e,n)}return e}function E(t){for(var a=1;a<arguments.length;a++){var e,n=null!=arguments[a]?arguments[a]:{};if(a%2)d()(e=S(Object(n),!0)).call(e,(function(a){C()(t,a,n[a])}));else if(s.a)i()(t,s()(n));else{var o;d()(o=S(Object(n))).call(o,(function(a){r()(t,a,f()(n,a))}))}}return t}a.default=angular.module("deskworks.analyticsSalesByProductCategoryDirective",["debounce","deskworks.setup.service",A.a.name,$.a.name,P.default.name,T.a.name,I.default.name,x.default.name,R.a.name,O.a.name]).directive("analyticsSalesByProductCategory",(function(){return{template:k.a,restrict:"E",scope:!0,controller:"AnalyticsSalesByProductCategoryDirectiveCtrl as $ctrl",bindToController:{params:"<",centerId:"<"}}})).controller("AnalyticsSalesByProductCategoryDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","AnalyticsSalesByProductCategory","analyticsSalesByProductCategoryChart","analyticsSalesByProductCategoryDetailedChart","optsChartPeriod",function(t,a,e,n,r,o,i,l,s,c,d){var u=this,f=i.paramsChanged;function p(t){u.params.selected=t}u.optsPeriod=d,u.data=null,u.chartLevels=[],u.$onInit=function(){t.$watch((function(){return E(E({},u.params),{},{centerId:u.centerId})}),o((function(t,e){u.params.period=u.params.period||"lastMonth",u.params.byPeriod=u.params.byPeriod||"month",u.widgetToolbarForm.$invalid||(f(t,e,["from","to","centerId"])&&(u.data=null,u.params.selected=null),u.data=u.data||(u.spin=!0,l.get(E(E({},u.params),{},{centerId:u.centerId})).catch((function(t){return n.error(t,"Failed to get Sales By Product Category widget data.")}))).finally((function(){u.spin=!1})),a.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){null!==u.params.selected?u.chart=c(E(E({},u.data),{},{params:u.params})):u.chart=s(E(E({},u.data),{},{params:u.params,onChartClick:p}))})))}),100),!0)}}])},G6gN:function(t,a,e){"use strict";e.r(a);var n=e("WSeP"),r=e.n(n),o=e("nbuU"),i=e.n(o),l=e("Xp5u");a.default=angular.module("deskworks.AnalyticsOccupancyVacancy",["ngResource","datesDeserializer","deskworks.config",l.a.name]).factory("AnalyticsOccupancyVacancy",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,n,o,l,s){var c=n(["periods.from","periods.to"]),d=t(o.getApiAbsUrl("/analytics/occupancy-vacancy"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,c]}});return{get:function(t){return d.get({centerId:t.centerId||null,byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd")||null,to:a("date")(t.to,"yyyy-MM-dd")||null}).$promise.then((function(a){return function(t){var a,e=t.data,n=t.params.byPeriod,o=void 0===n?"month":n,l=i()(s).call(s,(function(t){return t.id===o}));return r()(a=e.periods).call(a,(function(t){t.title=l.format(t.from,t.to)})),e}({data:a,params:t})}))}}}])},I5Zy:function(t,a,e){"use strict";var n=e("xeXu"),r=e.n(n),o=e("0zKI"),i=e.n(o),l=(e("RF9M"),e("/MEN"),e("jd5N"));a.a=angular.module("dnd",["dndLists",l.a.name]).factory("dnd",["keese",function(t){return{move:function(a,e,n,o){var l=a[e];n&&i()(n).call(n,o,0,l);a===n&&o<=e&&e++;if(i()(a).call(a,e,1),n){var s=r()(n).call(n,l);l.order=t.generate(n[s-1]&&n[s-1].order,n[s+1]&&n[s+1].order)}return l}}}])},KOgG:function(t,a,e){},NfJs:function(t,a,e){"use strict";e.r(a);e("JBxO"),e("FdtR");var n=e("Tfwl"),r=e.n(n),o=e("XAgg"),i=e.n(o),l=e("yKah"),s=e.n(l),c=e("WSeP"),d=e.n(c),u=e("lvz6"),f=e.n(u),p=e("hsT8"),m=e.n(p),g=e("Ekwr"),y=e.n(g),h=e("03wM"),b=e.n(h),v=e("fzuT"),C=e.n(v),w=e("RnuU"),k=e.n(w),A=e("CLLE"),$=e("G6E5"),P=e("xlJL"),T=e("Xp5u"),I=e("CgoQ"),x=e("qbH2"),R=e("DcLO"),O=e("OOrm");function S(t,a){var e=b()(t);if(y.a){var n=y()(t);a&&(n=m()(n).call(n,(function(a){return f()(t,a).enumerable}))),e.push.apply(e,n)}return e}function E(t){for(var a=1;a<arguments.length;a++){var e,n=null!=arguments[a]?arguments[a]:{};if(a%2)d()(e=S(Object(n),!0)).call(e,(function(a){C()(t,a,n[a])}));else if(s.a)i()(t,s()(n));else{var o;d()(o=S(Object(n))).call(o,(function(a){r()(t,a,f()(n,a))}))}}return t}a.default=angular.module("deskworks.analyticsRecurringBillingsDirective",["debounce",A.a.name,$.a.name,P.default.name,T.a.name,I.a.name,x.default.name,R.a.name,O.a.name]).directive("analyticsRecurringBillings",(function(){return{template:k.a,restrict:"E",scope:!0,controller:"AnalyticsRecurringBillingsDirectiveCtrl as $ctrl",bindToController:{params:"<",centerId:"<"}}})).controller("AnalyticsRecurringBillingsDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","AnalyticsRecurringBillings","analyticsRecurringBillingsChart","optsChartByPeriod","optsChartPeriod",function(t,a,e,n,r,o,i,l,s,c,d){var u=this,f=i.paramsChanged;u.optsByPeriod=c,u.optsPeriod=d,u.data=null,u.$onInit=function(){t.$watch((function(){return E(E({},u.params),{},{centerId:u.centerId})}),o((function(t,e){u.params.period=u.params.period||"12months",u.params.byPeriod=u.params.byPeriod||"month",u.widgetToolbarForm.$invalid||(f(t,e,["byPeriod","from","to","centerId"])&&(u.data=null),u.data=u.data||(u.spin=!0,l.get(E(E({},u.params),{},{centerId:u.centerId})).catch((function(t){return n.error(t,"Failed to get Recurring Billings widget data.")})).finally((function(){u.spin=!1}))),a.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){u.chart=s(E(E({},u.data),{},{params:u.params}))})))}),100),!0)}}])},O7bB:function(t,a,e){"use strict";e.r(a);var n=e("6RpP"),r=e.n(n),o=e("yCd9"),i=e.n(o),l=e("aGVL"),s=e("bU+R"),c=e.n(s);a.default=angular.module("deskworks.analyticsIncomeChart",[l.a.name,"deskworks.whitelabel"]).factory("analyticsIncomeChart",["$filter","$translate","chartColors","whitelabel",function(t,a,e,n){return function(o){var l=o.periods,s=o.totals,d=(o.params,i()(l).call(l,(function(t){return t.title}))),u=[{data:s,maxBarThickness:80,backgroundColor:n.getProperty("--brand-color")||e[0]}],f=a.instant("ANALYTICS.INCOME");return{type:"bar",plugins:[c.a],data:{labels:d,datasets:u},options:{plugins:{datalabels:{display:"auto",color:"#fff",backgroundColor:"#000",padding:1,borderRadius:3,formatter:function(a,e){return t("ncurrency")(a,void 0,0)}}},tooltips:{callbacks:{label:function(a){var e;return r()(e="".concat(f,": ")).call(e,t("ncurrency")(s[a.index]))}}},layout:{padding:{top:15}},legend:{display:!1},scales:{yAxes:[{ticks:{min:0,callback:function(a){return t("ncurrency")(a,void 0,0)}}}]}}}}}])},OOrm:function(t,a,e){"use strict";var n=e("2R0e"),r=e.n(n),o=e("Xp5u");a.a=angular.module("deskworks.chartByPeriodDirective",[o.a.name]).directive("chartByPeriod",(function(){return{template:r.a,restrict:"E",scope:!0,controller:"ChartByPeriodCtrl as $ctrl",bindToController:{period:"="}}})).controller("ChartByPeriodCtrl",["$scope","optsChartByPeriod",function(t,a){this.optsPeriod=a}])},QXqx:function(t,a,e){"use strict";e.r(a);var n=e("YtL8"),r=e.n(n),o=e("WSeP"),i=e.n(o),l=e("nbuU"),s=e.n(l),c=e("Xp5u");a.default=angular.module("deskworks.AnalyticsSalesByProductCategory",["ngResource","datesDeserializer","deskworks.config",c.a.name]).factory("AnalyticsSalesByProductCategory",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,n,o,l,c){var d=n(["periods.from","periods.to"]),u=t(o.getApiAbsUrl("/analytics/sales-by-product-category"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,d]}});return{get:function(t){return u.get({centerId:t.centerId||null,byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd"),to:a("date")(t.to,"yyyy-MM-dd")}).$promise.then((function(a){return function(t){var a,e,n,o=t.data,d=t.params.byPeriod,u=void 0===d?"month":d,f=s()(c).call(c,(function(t){return t.id===u}));return i()(a=o.periods).call(a,(function(t){t.title=f.format(t.from,t.to)})),o.grandTotal=0,i()(e=o.data).call(e,(function(t){var a;t.total=r()(a=t.totals).call(a,(function(t,a){return t+a}),0),o.grandTotal+=t.total})),i()(n=o.data).call(n,(function(t){t.totalPercentage=o.grandTotal?l.round(100*t.total/o.grandTotal,1):0,t.total=l.round(t.total)})),o}({data:a,params:t})}))}}}])},RlMt:function(t,a,e){"use strict";e.r(a),a.default=angular.module("deskworks.AnalyticsUser",["ngResource","datesDeserializer","deskworks.config"]).factory("AnalyticsUser",["$resource","$timeout","datesDeserializer","deskworksConfig",function(t,a,e,n){var r=n.getApiAbsUrl("/analytics/users/:userId"),o=e(["widgets.from","widgets.to"]),i=t(r,{userId:"@userId"},{get:{method:"GET",transformResponse:[angular.fromJson,o]},update:{method:"PUT"}});return{get:function(t){return i.get(t).$promise},save:function(t,a){return i.update(t,a).$promise}}}])},RnuU:function(t,a){t.exports='<div> <ng-form name=$ctrl.widgetToolbarForm class=ff-grid> <chart-by-period flex=none period=$ctrl.params.byPeriod></chart-by-period> <ff-static flex=auto></ff-static> <chart-period flex="0 1 auto" period=$ctrl.params.period from=$ctrl.params.from to=$ctrl.params.to></chart-period> </ng-form> <chart config=$ctrl.chart ff-dim=$ctrl.spin></chart> </div> '},XdOV:function(t,a,e){"use strict";e.r(a);var n=e("6RpP"),r=e.n(n),o=e("yCd9"),i=e.n(o),l=e("G6E5"),s=e("bU+R"),c=e.n(s);a.default=angular.module("deskworks.analyticsSalesByProductCategoryChart",[l.a.name]).factory("analyticsSalesByProductCategoryChart",["$filter","$rootScope","reportHelper",function(t,a,e){return function(e){var n=e.data,o=e.onChartClick,l=(e.params,i()(n).call(n,(function(t){return t.name}))),s=[{data:i()(n).call(n,(function(t){return t.totalPercentage}))}];return{type:"pie",plugins:[c.a],data:{labels:l,datasets:s},options:{plugins:{datalabels:{display:"auto",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,formatter:function(t,a){var e,o=n[a.dataIndex],i=o.name,l=o.totalPercentage;return r()(e="".concat(i,"\n")).call(e,l,"%")}}},tooltips:{displayColors:!0,callbacks:{label:function(a){var e,o,i=n[a.index],l=i.name,s=i.totalPercentage,c=i.total;return r()(e=r()(o="".concat(l,": ")).call(o,s,"% (")).call(e,t("ncurrency")(c),")")}}},layout:{padding:{top:15}},legend:{display:!0,position:"right"},onClick:function(t,e){a.$apply((function(t){var a=e[0]&&e[0]._index;angular.isNumber(a)&&o(a)}))}}}}}])},"Xh+F":function(t,a,e){"use strict";e.r(a);var n=e("4uyB"),r=e("ENWM"),o=e("p5aI"),i=e("NfJs"),l=e("qLGz");a.default=angular.module("deskworks.analyticsWidgetsList",[n.default.name,r.default.name,o.default.name,i.default.name,l.default.name]).factory("analyticsWidgetsList",(function(){return[{uid:"sales",_name:"ANALYTICS.WIDGET.SALES",template:"<analytics-sales></analytics-sales>"},{uid:"sales-by-product-category",_name:"ANALYTICS.WIDGET.SALES_BY_PRODUCT_CATEGORY",template:"<analytics-sales-by-product-category></analytics-sales-by-product-category>"},{uid:"income",_name:"ANALYTICS.WIDGET.INCOME",template:"<analytics-income></analytics-income>"},{uid:"recurring-billings",_name:"ANALYTICS.WIDGET.RECURRING_BILLINGS",template:"<analytics-recurring-billings></analytics-recurring-billings>"},{uid:"occupancy-vacancy",_name:"ANALYTICS.WIDGET.OCCUPANCY_VACANCY",template:"<analytics-occupancy-vacancy></analytics-occupancy-vacancy>"}]}))},Xp5u:function(t,a,e){"use strict";var n=e("WSeP"),r=e.n(n);a.a=angular.module("deskworks.optsChartByPeriod",[]).factory("optsChartByPeriod",["$rootScope","$translate","$filter",function(t,a,e){var n=e("date"),o=[{id:"week",_name:"CHARTS.BY_PERIOD.WEEK",format:function(t,a){return n(t,"MMM d")+" - "+n(a,"MMM d")}},{id:"month",_name:"CHARTS.BY_PERIOD.MONTH",format:function(t,a){return n(t,"MMM")}},{id:"quarter",_name:"CHARTS.BY_PERIOD.QUARTER",format:function(t,a){return n(t,"MMM")+" - "+n(a,"MMM")}},{id:"year",_name:"CHARTS.BY_PERIOD.YEAR",format:function(t,a){return n(t,"yyyy")}}];function i(){r()(o).call(o,(function(t){t.name=a.instant(t._name)}))}return i(),t.$on("$setTranslationsSuccess",i),o}])},Z7iF:function(t,a,e){"use strict";e.r(a);var n=e("6RpP"),r=e.n(n),o=e("YtL8"),i=e.n(o),l=e("yCd9"),s=e.n(l),c=e("bU+R"),d=e.n(c),u=e("aGVL");a.default=angular.module("deskworks.analyticsSalesByProductCategoryDetailedChart",[u.a.name]).factory("analyticsSalesByProductCategoryDetailedChart",["$filter","chartColors",function(t,a){return function(e){var n,o=e.periods,l=e.data,c=e.params;l=l[c.selected];var u=s()(o).call(o,(function(t){return t.title})),f=[{data:l.totals,maxBarThickness:80,backgroundColor:a[c.selected]}],p=i()(n=l.totals).call(n,(function(t,a){return a<t.min&&(t.min=a),a>t.max&&(t.max=a),t}),{min:0,max:0}),m=p.min,g=p.max;return{type:"bar",plugins:[d.a],data:{labels:u,datasets:f},options:{plugins:{datalabels:{display:"auto",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,formatter:function(a,e){return t("ncurrency")(a,void 0,0)}}},tooltips:{callbacks:{label:function(a){var e,n=l,o=n.name,i=n.totals;return r()(e="".concat(o,": ")).call(e,t("ncurrency")(i[a.index]))}}},legend:{display:!1},scales:{yAxes:[{ticks:{min:m,max:g,callback:function(a){return t("ncurrency")(a,void 0,0)}}}]}}}}}])},aGVL:function(t,a,e){"use strict";a.a=angular.module("chartColors",[]).factory("chartColors",(function(){return["#317da3","#e6194b","#3cb44b","#ffe119","#f58231","#911eb4","#aa6e28","#008080","#808080","#800000","#3244a1","#e64c19","#3db372","#d1ff1a","#f5c131","#b31e81","#a89728","#005580","#806659","#804000"]}))},aOtR:function(t,a){t.exports='<div class=analytics-dashboard> <h1 class=page-title>{{state.getPageTitle()}}</h1> <div class="ff-spin ff-spin-placeholder" ng-if=!$ctrl.settings></div> <div class=gutter-v ng-if=$ctrl.settings> <ff-panel ng-if="state.getUserCenters().length > 1"> <div> <label class=i-block> <ff-checkbox ff-model=$ctrl.settings.allCenters><span translate=ANALYTICS.ALL_CENTERS></span></ff-checkbox> </label> <ff-hint><span translate=ANALYTICS.ALL_CENTERS.HINT></span></ff-hint> </div> </ff-panel> <div> <div class="ff-grid gutter-h gutter-v" dnd-list dnd-drop="callback({ targetList: $ctrl.settings.widgets, targetIndex: index })"> <analytics-widget ng-repeat="widget in $ctrl.settings.widgets" widget=widget center-id=$ctrl.getCenterId() dnd-draggable=null dnd-nodrag dnd-dragstart=$w.onDragStart(event) dnd-dragend=$w.onDragEnd(event) dnd-callback="$ctrl.onDrop($ctrl.settings.widgets, $index, targetList, targetIndex)"></analytics-widget> <div class=dndPlaceholder>Drop here.</div> <div class=analytics-dashboard-trash title="{{\'ANALYTICS.BTN_TRASH\' | translate}}" dnd-list=[] dnd-drop="callback({ targetList: null, targetIndex: index })"><i class="fa fa-trash"></i></div> </div> </div> <div> <div class="ff-grid gutter-h-half gutter-v-half"> <ng-form class=ff-row flex="0 1 300px"> <label class=ff-row> <ff-label flex=none>Add widget:</ff-label> <ff-select ff-model=$ctrl.widgetToAdd ff-options="widget._name | translate for widget in $ctrl.widgetsList"></ff-select> </label> <ff-btn-group flex=none class=buttons-row> <ff-btn sense=add size=xs type=submit ff-click=$ctrl.addWidget() title="{{ \'GLOBAL.BTN_NEW\' | translate }}"></ff-btn> </ff-btn-group> </ng-form> <ff-btn-group flex=none> <ff-btn sense=makeFavorite ff-click=$ctrl.saveDefaults() ff-disabled=$ctrl.isPristine()> <span translate=ANALYTICS.BTN_SAVE_DEFAULTS></span> </ff-btn> </ff-btn-group> </div> </div> </div> </div> '},"bG+q":function(t,a,e){},ggrz:function(t,a){t.exports="<label class=ff-row style=min-width:190px> <ff-label flex=none><span translate=CHARTS.PERIOD></span></ff-label> <ff-select ff-model=$ctrl.period ff-options=\"opt.id as opt.name for opt in $ctrl.optsPeriod\"></ff-select> </label> <ff-row style=z-index:1;margin-left:-108px ng-style=\"{ 'min-width': $ctrl.period === 'custom' ? '300px' : 'none' }\"> <label class=ff-row flex=\"0 1 158px\" ng-if=\"$ctrl.period === 'custom'\"> <ff-label flex=none><span translate=CHARTS.FROM></span></ff-label> <ff-date name=from ff-model=$ctrl.from monthly=true ff-required=true ff-validate-alert=\"{{'CHARTS.FROM' | translate}}\"></ff-date> </label> <label class=ff-row flex=\"0 1 140px\" ng-if=\"$ctrl.period === 'custom'\"> <ff-label flex=none><span translate=CHARTS.TO></span></ff-label> <ff-date name=to ff-model=$ctrl.to monthly=true ff-required=true ff-validate-alert=\"{{'CHARTS.TO' | translate}}\"></ff-date> </label> </ff-row> "},gq4Z:function(t,a,e){},jd5N:function(t,a,e){"use strict";var n=e("JRMi"),r=e.n(n),o=e("gQJ2"),i=e.n(o);a.a=angular.module("keese",[]).factory("keese",(function(){var t="0123456789?@ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a=t.length,e=function(){for(var a={},e=0;e<t.length;e++)a[t[e]]=e;return a}();return{generate:function(t,a,e){return e?o(t,a,e):n(t,a)}};function n(t,a){return t?a?l(t,a):((e=c(t)).digits=e.digits.substr(0,e.order_length+1),s(e,c("1"))):a?l("0",a):"1";var e}function o(t,a,e){var r=new Array(e);if(e>0)if(a)!function t(a,e,o,i){var l=Math.floor((o+i)/2),s=n(a,e);r[l]=s,o<l&&t(a,s,o,l);l+1<i&&t(s,e,l+1,i)}(t,a,0,e);else for(var o=0;o<e;o++){var i=keese(t,null);r[o]=i,t=i}return r}function l(n,r){if(n>r)throw new Error("assertion failed: "+i()(n)+" < "+i()(r));var o=c(n),l=c(r);u(o,l);for(var f=0,p=Math.max(o.digits.length,l.digits.length),m=0;m<p||f>0;m++){var g=e[o.digits[m]]||0,y=f+(e[l.digits[m]]||0);if(g!==y){if(g!==y-1){for(var h=Math.floor((y-g)/2),b="",v=0;v<m;v++)b+="0";b+=t[h];var C=c(d(o.order_length,b));return o.digits=o.digits.substr(0,m+1),s(o,C)}f=a}}throw new Error}function s(n,r){u(n,r);for(var o="",i=n.order_length,l=0,s=Math.max(n.digits.length,r.digits.length)-1;s>=0;s--)l+=e[n.digits[s]]||0,l+=e[r.digits[s]]||0,o=t[l%a]+o,l=Math.floor(l/a);for(;l>0;)o=t[l%a]+o,l=Math.floor(l/a),i++;return d(i,o)}function c(t){var a=r()(t).call(t,"~")+1;return{order_length:a,digits:t.substr(a)}}function d(t,a){for(;t>0&&"0"==a.charAt(0);)a=a.substr(1),t--;for(var e="",n=0;n<t;n++)e+="~";return e+a}function u(t,a){f(t,a.order_length),f(a,t.order_length)}function f(t,a){for(;t.order_length<a;)t.digits="0"+t.digits,t.order_length++}}))},jwnm:function(t,a){t.exports='<div> <ng-form name=$ctrl.widgetToolbarForm class=ff-grid> <chart-by-period flex=none period=$ctrl.params.byPeriod></chart-by-period> <ff-static flex=auto> <ff-hint ng-if="$ctrl.params.selected === null"><span translate=ANALYTICS.WIDGET.OCCUPANCY_VACANCY.HINT></span></ff-hint> <ff-btn sense=back size=sm ng-if="$ctrl.params.selected !== null" ff-click="$ctrl.params.selected = null"> <span translate=GLOBAL.BTN_BACK></span> </ff-btn> </ff-static> <chart-period flex="0 1 auto" period=$ctrl.params.period from=$ctrl.params.from to=$ctrl.params.to></chart-period> </ng-form> <chart config=$ctrl.chart ff-dim=$ctrl.spin></chart> </div> '},oCA5:function(t,a,e){"use strict";e.r(a);var n=e("6RpP"),r=e.n(n),o=e("yCd9"),i=e.n(o),l=e("G6E5"),s=e("aGVL"),c=e("bU+R"),d=e.n(c);a.default=angular.module("deskworks.analyticsOccupancyVacancyChart",[l.a.name,s.a.name]).factory("analyticsOccupancyVacancyChart",["$rootScope","$filter","$translate","chartColors","reportHelper",function(t,a,e,n,o){return function(a){var e=a.periods,o=a.data,l=a.params,s=a.onChartClick,c=i()(e).call(e,(function(t){return t.title})),u=i()(o).call(o,(function(t,a){return{label:t.name,data:t.totals,maxBarThickness:80,backgroundColor:n[a]}}));return{type:"bar",plugins:[d.a],data:{labels:c,datasets:u},options:{plugins:{datalabels:{display:"auto",color:"#fff",backgroundColor:"#000",padding:1,borderRadius:3,formatter:function(t,a){return"".concat(Math.round(t),"%")}}},tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(t){var a,e=o[t.datasetIndex],n=e.name,i=e.totals;return r()(a="".concat(n,": ")).call(a,i[t.index],"%")}}},layout:{padding:{top:15}},legend:{display:!0,position:l.wide?"right":"bottom"},scales:{yAxes:[{ticks:{min:0,max:100,callback:function(t){return"".concat(t,"%")}}}]},onClick:function(a,e){var n=this;t.$apply((function(t){var e=n.getElementAtEvent(a)[0];e&&s(e._datasetIndex)}))}}}}}])},p5aI:function(t,a,e){"use strict";e.r(a);e("JBxO"),e("FdtR");var n=e("Tfwl"),r=e.n(n),o=e("XAgg"),i=e.n(o),l=e("yKah"),s=e.n(l),c=e("WSeP"),d=e.n(c),u=e("lvz6"),f=e.n(u),p=e("hsT8"),m=e.n(p),g=e("Ekwr"),y=e.n(g),h=e("03wM"),b=e.n(h),v=e("fzuT"),C=e.n(v),w=e("RnuU"),k=e.n(w),A=e("CLLE"),$=e("G6E5"),P=e("2Bp7"),T=e("Xp5u"),I=e("CgoQ"),x=e("O7bB"),R=e("DcLO"),O=e("OOrm");function S(t,a){var e=b()(t);if(y.a){var n=y()(t);a&&(n=m()(n).call(n,(function(a){return f()(t,a).enumerable}))),e.push.apply(e,n)}return e}function E(t){for(var a=1;a<arguments.length;a++){var e,n=null!=arguments[a]?arguments[a]:{};if(a%2)d()(e=S(Object(n),!0)).call(e,(function(a){C()(t,a,n[a])}));else if(s.a)i()(t,s()(n));else{var o;d()(o=S(Object(n))).call(o,(function(a){r()(t,a,f()(n,a))}))}}return t}a.default=angular.module("deskworks.analyticsIncomeDirective",["debounce",A.a.name,$.a.name,T.a.name,I.a.name,P.default.name,x.default.name,R.a.name,O.a.name]).directive("analyticsIncome",(function(){return{template:k.a,restrict:"E",scope:!0,controller:"AnalyticsIncomeDirectiveCtrl as $ctrl",bindToController:{params:"<",centerId:"<"}}})).controller("AnalyticsIncomeDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","AnalyticsIncome","analyticsIncomeChart","optsChartByPeriod","optsChartPeriod",function(t,a,e,n,r,o,i,l,s,c,d){var u=this,f=i.paramsChanged;u.optsByPeriod=c,u.optsPeriod=d,u.data=null,u.$onInit=function(){t.$watch((function(){return E(E({},u.params),{},{centerId:u.centerId})}),o((function(t,e){u.params.period=u.params.period||"12months",u.params.byPeriod=u.params.byPeriod||"month",u.widgetToolbarForm.$invalid||(f(t,e,["byPeriod","from","to","centerId"])&&(u.data=null),u.data=u.data||(u.spin=!0,l.get(t).catch((function(t){return n.error(t,"Failed to query Income widget data.")})).finally((function(){u.spin=!1}))),a.all({data:u.data}).then((function(t){u.data=t.data})).then((function(){u.chart=s(E(E({},u.data),{},{params:u.params}))})))}),100),!0)}}])},pl6f:function(t,a,e){"use strict";a.a=angular.module("systemColors",["deskworks.helper"]).factory("systemColors",["$window","helper",function(t,a){var e={},n=angular.element('<div style="display: none"></div>');return n.append('<div class="text-text"></div>'),n.append('<div class="text-brand"></div>'),n.append('<div class="text-brand"></div>'),n.append('<div class="text-danger"></div>'),n.append("<div></div>"),n.append('<div class="sidebar-group-header"></div>'),document.body.appendChild(n[0]),e.text=a.rgb2hex(t.getComputedStyle(n.children()[0]).getPropertyValue("color"))||"#444",e.info=a.rgb2hex(t.getComputedStyle(n.children()[4]).getPropertyValue("color"))||"#4d4e4c",e.primary=a.rgb2hex(t.getComputedStyle(n.children()[5]).getPropertyValue("background-color"))||"#949594",e.warning=a.rgb2hex(t.getComputedStyle(n.children()[3]).getPropertyValue("color"))||"#ff9b00",n.remove(),e}])},qLGz:function(t,a,e){"use strict";e.r(a);e("JBxO"),e("FdtR");var n=e("Tfwl"),r=e.n(n),o=e("XAgg"),i=e.n(o),l=e("yKah"),s=e.n(l),c=e("WSeP"),d=e.n(c),u=e("lvz6"),f=e.n(u),p=e("hsT8"),m=e.n(p),g=e("Ekwr"),y=e.n(g),h=e("03wM"),b=e.n(h),v=e("fzuT"),C=e.n(v),w=e("jwnm"),k=e.n(w),A=e("CLLE"),$=e("G6E5"),P=e("G6gN"),T=e("Xp5u"),I=e("CgoQ"),x=e("oCA5"),R=e("9pnN"),O=e("DcLO"),S=e("OOrm");function E(t,a){var e=b()(t);if(y.a){var n=y()(t);a&&(n=m()(n).call(n,(function(a){return f()(t,a).enumerable}))),e.push.apply(e,n)}return e}function L(t){for(var a=1;a<arguments.length;a++){var e,n=null!=arguments[a]?arguments[a]:{};if(a%2)d()(e=E(Object(n),!0)).call(e,(function(a){C()(t,a,n[a])}));else if(s.a)i()(t,s()(n));else{var o;d()(o=E(Object(n))).call(o,(function(a){r()(t,a,f()(n,a))}))}}return t}a.default=angular.module("deskworks.analyticsOccupancyVacancyDirective",["debounce",A.a.name,$.a.name,T.a.name,I.a.name,P.default.name,x.default.name,R.default.name,O.a.name,S.a.name]).directive("analyticsOccupancyVacancy",(function(){return{template:k.a,restrict:"E",scope:!0,controller:"AnalyticsOccupancyVacancyDirectiveCtrl as $ctrl",bindToController:{params:"<",centerId:"<"}}})).controller("AnalyticsOccupancyVacancyDirectiveCtrl",["$scope","$q","state","dwAlerts","helper","debounce","reportHelper","AnalyticsOccupancyVacancy","analyticsOccupancyVacancyChart","analyticsOccupancyVacancyChartUnits","optsChartByPeriod","optsChartPeriod",function(t,a,e,n,r,o,i,l,s,c,d,u){var f=this,p=i.paramsChanged;function m(t){f.params.selected=t}f.optsByPeriod=d,f.optsPeriod=u,f.data=null,f.$onInit=function(){t.$watch((function(){return L(L({},f.params),{},{centerId:f.centerId})}),o((function(t,e){f.params.period=f.params.period||"12months",f.params.byPeriod=f.params.byPeriod||"month",f.widgetToolbarForm.$invalid||(p(t,e,["byPeriod","from","to","centerId"])&&(f.data=null,f.params.selected=null),f.data=f.data||(f.spin=!0,l.get(t).catch((function(t){return n.error(t,"Failed to query Occupancy Vacancy widget data.")})).finally((function(){f.spin=!1}))),a.all({data:f.data}).then((function(t){f.data=t.data})).then((function(){null!==f.params.selected?f.chart=c(L(L({},f.data),{},{params:f.params})):f.chart=s(L(L({},f.data),{},{params:f.params,onChartClick:m}))})))}),100),!0)}}])},qbH2:function(t,a,e){"use strict";e.r(a);var n=e("6RpP"),r=e.n(n),o=e("yCd9"),i=e.n(o),l=e("KK/u"),s=e.n(l),c=e("ipr/"),d=e.n(c),u=e("G6E5"),f=e("aGVL"),p=e("bU+R"),m=e.n(p);a.default=angular.module("deskworks.analyticsRecurringBillingsChart",[u.a.name,f.a.name]).factory("analyticsRecurringBillingsChart",["$filter","$translate","chartColors","reportHelper",function(t,a,e,n){return function(o){var l,c,u=o.periods,f=o.data,p=o.totals,g=o.params;f=d()(l=s()(n).call(n,f,"total",!0)).call(l,0,12);var y=i()(u).call(u,(function(t){return t.title})),h=r()(c=i()(f).call(f,(function(t,a){return{label:t.name,data:t.totals,backgroundColor:e[a],maxBarThickness:80}}))).call(c,[{label:a.instant("GLOBAL.TOTAL"),data:i()(p).call(p,(function(t){return 0})),backgroundColor:"transparent",maxBarThickness:80,datalabels:{display:!0,align:"end",offset:-3,color:"#000",textStrokeWidth:0,font:{weight:"bold"}}}]);return{type:"bar",plugins:[m.a],data:{labels:y,datasets:h},options:{plugins:{datalabels:{display:"auto",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,formatter:function(a,e){return t("ncurrency")(e.datasetIndex<h.length-1?a:p[e.dataIndex],void 0,0)}}},tooltips:{mode:"index",intersect:!0,displayColors:!0,callbacks:{label:function(a,e){var n=e.datasets[a.datasetIndex];return n.label+": "+t("ncurrency")(a.datasetIndex<h.length-1?n.data[a.index]:p[a.index])}}},layout:{padding:{top:15}},legend:{display:!0,position:g.wide?"right":"bottom"},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{min:0,callback:function(a){return t("ncurrency")(a,void 0,0)}}}]}}}}}])},r970:function(t,a){t.exports='<ff-panel> <ff-panel-header class=ff-row> <span translate={{$w.config._name}}></span> <div class=analytics-widget-toolbar> <ff-btn sense=widen size=xs class=ff-btn-icon ff-click="$w.widget.wide = !$w.widget.wide" title="{{\'ANALYTICS.WIDE\' | translate}}"></ff-btn> <ff-btn sense=drag size=xs class=ff-btn-icon dnd-handle title="{{\'ANALYTICS.DRAG_N_DROP\' | translate}}"></ff-btn> </div> </ff-panel-header> <div class=analytics-widget-body></div> </ff-panel> '},va6R:function(t,a,e){},xlJL:function(t,a,e){"use strict";e.r(a);var n=e("YtL8"),r=e.n(n),o=e("yCd9"),i=e.n(o),l=e("WSeP"),s=e.n(l),c=e("nbuU"),d=e.n(c),u=e("Xp5u");a.default=angular.module("deskworks.AnalyticsRecurringBillings",["ngResource","datesDeserializer","deskworks.config",u.a.name]).factory("AnalyticsRecurringBillings",["$resource","$filter","$timeout","datesDeserializer","deskworksConfig","helper","optsChartByPeriod",function(t,a,e,n,o,l,c){var u=n(["periods.from","periods.to"]),f=t(o.getApiAbsUrl("/analytics/recurring-billings"),{byPeriod:"@byPeriod",from:"@from",to:"@to"},{get:{method:"GET",isArray:!1,transformResponse:[angular.fromJson,u]}});return{get:function(t){return f.get({centerId:t.centerId||null,byPeriod:t.byPeriod||"month",from:a("date")(t.from,"yyyy-MM-dd"),to:a("date")(t.to,"yyyy-MM-dd")}).$promise.then((function(a){return function(t){var a,e,n,o=t.data,u=t.params.byPeriod,f=void 0===u?"month":u,p=d()(c).call(c,(function(t){return t.id===f}));return s()(a=o.periods).call(a,(function(t){t.title=p.format(t.from,t.to)})),o.totals=i()(e=o.periods).call(e,(function(t,a){var e;return l.round(r()(e=o.data).call(e,(function(t,e){return t+e.totals[a]}),0))})),s()(n=o.data).call(n,(function(t){var a;t.total=l.round(r()(a=t.totals).call(a,(function(t,a){return t+a}),0))})),o}({data:a,params:t})}))}}}])}}]);