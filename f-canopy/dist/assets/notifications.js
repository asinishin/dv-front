angular.module("deskworks.BulkInvoicesTplCtrl",["deskworks.notifications.service","deskworks.taToolbarEmail"]).controller("BulkInvoicesTplCtrl",["$scope","$translate","dwAlerts","state","helper","tpl","Notifications","taToolbarEmail",function(t,e,n,i,a,r,s,o){"use strict";var l=this;i.setPageTitle(e.instant("NOTIFICATIONS.BULK_INVOICES.PAGE_TITLE")),l.tpl=r,l.toolbar=o,l.save=function(){if(!a.pointFirstInvalid("#bulkInvoicesTpl"))return s.saveBulkInvoices(l.tpl).catch(function(t){return n.error(t,"Failed to save bulk invoices template.")}).then(function(){l.form.$setPristine()})}}]),angular.module("deskworks.CalSyncErrorEmailCtrl",["deskworks.notifications.service"]).controller("CalSyncErrorEmailCtrl",["$scope","$translate","dwAlerts","state","helper","Notifications","tpl",function(t,e,n,i,a,r,s){"use strict";var o=this;i.setPageTitle(e.instant("NOTIFICATIONS.CALENDAR_SYNC_ERROR.PAGE_TITLE")),o.tpl=s,o.save=function(){if(!a.pointFirstInvalid("#calSyncErrorEmail"))return r.saveCalSyncErrorEmail(o.tpl).catch(function(t){return n.error(t,"Failed to save calendar sync error email template.")}).then(function(){o.form.$setPristine()})}}]),angular.module("deskworks.DeclinedCardEmailCtrl",["deskworks.notifications.service"]).controller("DeclinedCardEmailCtrl",["$scope","$translate","dwAlerts","state","helper","Notifications","tpl",function(t,e,n,i,a,r,s){"use strict";var o=this;i.setPageTitle(e.instant("NOTIFICATIONS.DECLINED_CARD.PAGE_TITLE")),o.tpl=s,o.save=function(){if(!a.pointFirstInvalid("#declinedCardEmail"))return r.saveDeclinedCardEmail(o.tpl).catch(function(t){return n.error(t,"Failed to save declined card email template.")}).then(function(){o.form.$setPristine()})}}]),angular.module("deskworks.DeskTabletTemplateCtrl",["deskworks.notifications.service"]).controller("DeskTabletTemplateCtrl",["$scope","$translate","dwAlerts","state","helper","Notifications","tpl",function(t,e,n,i,a,r,s){"use strict";var o=this;i.setPageTitle(e.instant("NOTIFICATIONS.DESK_TABLET_TEMPLATE.PAGE_TITLE")),o.tpl=s,o.save=function(){if(!a.pointFirstInvalid("#deskTabletTemplate"))return r.saveDeskTabletTemplate(i.getCurrentCenterId(),o.tpl).catch(function(t){return n.error(t,"Failed to save dest tablet template.")}).then(function(){o.form.$setPristine()})},o.toAccessCode=function(){return i.setPath("/access-code-of-the-day")}}]),angular.module("deskworks.ExpiredCardEmailCtrl",["deskworks.notifications.service"]).controller("ExpiredCardEmailCtrl",["$scope","$translate","dwAlerts","state","helper","Notifications","tpl",function(t,e,n,i,a,r,s){"use strict";var o=this;i.setPageTitle(e.instant("NOTIFICATIONS.EXPIRED_CARD.PAGE_TITLE")),o.tpl=s,o.save=function(){if(!a.pointFirstInvalid("#expiredCardEmail"))return r.saveExpiredCardEmail(o.tpl).catch(function(t){return n.error(t,"Failed to save expired card email template.")}).then(function(){o.form.$setPristine()})}}]),angular.module("deskworks.PassesUsedUpEmailCtrl",["deskworks.notifications.service"]).controller("PassesUsedUpEmailCtrl",["$scope","$translate","dwAlerts","state","helper","Notifications","tpl",function(t,e,n,i,a,r,s){"use strict";var o=this;i.setPageTitle(e.instant("NOTIFICATIONS.PASSES_USED_UP.PAGE_TITLE")),o.tpl=s,o.save=function(){if(!a.pointFirstInvalid("#passesUsedUpEmail"))return r.savePassesUsedUpEmail(o.tpl).catch(function(t){return n.error(t,"Failed to save passes used up email template.")}).then(function(){o.form.$setPristine()})}}]),angular.module("deskworks.ReceiptEmailTplCtrl",["deskworks.notifications.service","deskworks.taToolbarEmail"]).controller("ReceiptEmailTplCtrl",["$q","$translate","dwAlerts","state","helper","tpls","Notifications","taToolbarEmail",function(t,e,n,i,a,r,s,o){"use strict";var l=this;i.setPageTitle(e.instant("NOTIFICATIONS.RECEIPT.PAGE_TITLE")),l.tpls=r,l.toolbar=o,l.save=function(){if(!a.pointFirstInvalid("#receiptEmailTpl"))return t.all(l.tpls.map(function(t){return s.saveEmailTemplate(t.$$id,t).catch(function(t){return n.error(t,"Failed to save receipt email template.")})})).then(function(){l.form.$setPristine()})}}]),angular.module("deskworks.notifications.recurringInvoices",["deskworks.notifications.service","deskworks.taToolbarEmail"]).controller("RecurringInvoicesEmailCtrl",["$scope","$translate","dwAlerts","state","helper","tpl","Notifications","taToolbarEmail",function(t,e,n,i,a,r,s,o){"use strict";var l=this;i.setPageTitle(e.instant("NOTIFICATIONS.RECURRING_INVOICES.PAGE_TITLE")),l.tpl=r,l.toolbar=o,l.save=function(){if(!a.pointFirstInvalid("#recurringInvoicesTpl"))return s.saveRecurringInvoices(l.tpl).catch(function(t){return n.error(t,"Failed to save recurring invoices template.")}).then(function(){l.form.$setPristine()})}}]),angular.module("deskworks.RenewalNoticeEmailCtrl",["deskworks.notifications.service"]).controller("RenewalNoticeEmailCtrl",["$scope","$translate","dwAlerts","state","helper","Notifications","tpl",function(t,e,n,i,a,r,s){"use strict";var o=this;i.setPageTitle(e.instant("NOTIFICATIONS.RENEWAL_NOTICE.PAGE_TITLE")),o.tpl=s,o.save=function(){if(!a.pointFirstInvalid("#renewalNoticeEmail"))return r.saveRenewalNoticeEmail(o.tpl).catch(function(t){return n.error(t,"Failed to save renewal notice email template.")}).then(function(){o.form.$setPristine()})}}]),angular.module("deskworks.ReservationConfirmationEmailCtrl",["deskworks.notifications.service","deskworks.getAttachments.service"]).controller("ReservationConfirmationEmailCtrl",["$scope","$translate","dwAlerts","state","helper","getAttachments","Notifications","tpl",function(t,e,n,i,a,r,s,o){"use strict";var l=this;i.setPageTitle(e.instant("NOTIFICATIONS.RESERVATION_CONFIRMATION.PAGE_TITLE")),l.tabs=[{id:"confirm",title:e.instant("NOTIFICATIONS.RESERVATION_CONFIRMATION.RESERVATION"),tpl:o.confirm},{id:"cancel",title:e.instant("NOTIFICATIONS.RESERVATION_CONFIRMATION.CANCELLATION"),tpl:o.cancel},{id:"repeat",title:e.instant("NOTIFICATIONS.RESERVATION_CONFIRMATION.REPEATING"),tpl:o.repeat}],l.tpl=o,l.attachments=l.tpl.attachments||[],delete l.tpl.attachments,l.save=function(){if(!a.pointFirstInvalid("#reservationConfirmationEmail"))return s.saveReservationConfirmation(l.tpl).catch(function(t){return n.error(t,"Failed to save reservation confirmation template.")}).then(function(){l.form.$setPristine()})},l.attach=function(t){r(t).then(function(t){l.attachments=l.attachments.concat(t),t.forEach(function(t){t.$$spin=!0,s.attachReservationConfirmation(t).then(function(e){t.$$spin=!1,t.id=e.id,t.url=e.url,delete t.fileData}).catch(function(e){return l.attachments.splice(l.attachments.indexOf(t),1),n.error(e,"Failed to attach file.")})})})},l.detach=function(t){var e=l.attachments[t];return s.detachReservationConfirmation(e.id).then(function(t){l.attachments.splice(l.attachments.indexOf(e),1)}).catch(function(t){return n.error(t,"Failed to detach file.")})}}]),angular.module("deskworks.ReservationReminderEmailCtrl",["deskworks.notifications.service","deskworks.getAttachments.service"]).controller("ReservationReminderEmailCtrl",["$scope","$translate","dwAlerts","state","helper","getAttachments","Notifications","tpl",function(t,e,n,i,a,r,s,o){"use strict";var l=this;i.setPageTitle(e.instant("NOTIFICATIONS.RESERVATION_REMINDER.PAGE_TITLE")),l.tpl=o,l.attachments=l.tpl.attachments||[],delete l.tpl.attachments,l.save=function(){if(!a.pointFirstInvalid("#reservationReminderEmail"))return s.saveReservationReminder(l.tpl).catch(function(t){return n.error(t,"Failed to save reservation reminder template.")}).then(function(){l.form.$setPristine()})},l.attach=function(t){r(t).then(function(t){l.attachments=l.attachments.concat(t),t.forEach(function(t){t.$$spin=!0,s.attachReservationReminder(t).then(function(e){t.$$spin=!1,t.id=e.id,t.url=e.url,delete t.fileData}).catch(function(e){return l.attachments.splice(l.attachments.indexOf(t),1),n.error(e,"Failed to attach file.")})})})},l.detach=function(t){var e=l.attachments[t];return s.detachReservationReminder(e.id).then(function(t){l.attachments.splice(l.attachments.indexOf(e),1)}).catch(function(t){return n.error(t,"Failed to detach file.")})}}]),angular.module("deskworks.WelcomeLetterCtrl",["deskworks.notifications.service","deskworks.getAttachments.service"]).controller("WelcomeLetterCtrl",["$scope","$translate","dwAlerts","state","helper","getAttachments","Notifications","tpl",function(t,e,n,i,a,r,s,o){"use strict";var l=this;i.setPageTitle(e.instant("NOTIFICATIONS.WELCOME_LETTER.PAGE_TITLE")),l.tpl=o,l.attachments=l.tpl.attachments||[],delete l.tpl.attachments,l.save=function(){if(!a.pointFirstInvalid("#welcomeLetter"))return s.saveWelcomeLetter(l.tpl).catch(function(t){return n.error(t,"Failed to save welcome letter template.")}).then(function(){l.form.$setPristine()})},l.attach=function(t){r(t).then(function(t){l.attachments=l.attachments.concat(t),t.forEach(function(t){t.$$spin=!0,s.attachWelcomeLetter(t).then(function(e){t.$$spin=!1,t.id=e.id,t.url=e.url,delete t.fileData}).catch(function(e){return l.attachments.splice(l.attachments.indexOf(t),1),n.error(e,"Failed to attach file.")})})})},l.detach=function(t){var e=l.attachments[t];return s.detachWelcomeLetter(e.id).then(function(t){l.attachments.splice(l.attachments.indexOf(e),1)}).catch(function(t){return n.error(t,"Failed to detach file.")})}}]);